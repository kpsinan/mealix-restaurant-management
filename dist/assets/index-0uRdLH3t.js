var iC=Object.defineProperty;var sC=(t,e,n)=>e in t?iC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var sn=(t,e,n)=>sC(t,typeof e!="symbol"?e+"":e,n);function oC(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var P$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aC(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var d_={exports:{}},Im={},p_={exports:{}},Dt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Df=Symbol.for("react.element"),lC=Symbol.for("react.portal"),uC=Symbol.for("react.fragment"),cC=Symbol.for("react.strict_mode"),hC=Symbol.for("react.profiler"),fC=Symbol.for("react.provider"),dC=Symbol.for("react.context"),pC=Symbol.for("react.forward_ref"),mC=Symbol.for("react.suspense"),gC=Symbol.for("react.memo"),yC=Symbol.for("react.lazy"),uw=Symbol.iterator;function vC(t){return t===null||typeof t!="object"?null:(t=uw&&t[uw]||t["@@iterator"],typeof t=="function"?t:null)}var m_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g_=Object.assign,y_={};function Cc(t,e,n){this.props=t,this.context=e,this.refs=y_,this.updater=n||m_}Cc.prototype.isReactComponent={};Cc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Cc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function v_(){}v_.prototype=Cc.prototype;function ry(t,e,n){this.props=t,this.context=e,this.refs=y_,this.updater=n||m_}var iy=ry.prototype=new v_;iy.constructor=ry;g_(iy,Cc.prototype);iy.isPureReactComponent=!0;var cw=Array.isArray,w_=Object.prototype.hasOwnProperty,sy={current:null},x_={key:!0,ref:!0,__self:!0,__source:!0};function b_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)w_.call(e,r)&&!x_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Df,type:t,key:s,ref:o,props:i,_owner:sy.current}}function wC(t,e){return{$$typeof:Df,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function oy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Df}function xC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var hw=/\/+/g;function R0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xC(""+t.key):e.toString(36)}function sp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Df:case lC:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+R0(o,0):r,cw(i)?(n="",t!=null&&(n=t.replace(hw,"$&/")+"/"),sp(i,e,n,"",function(u){return u})):i!=null&&(oy(i)&&(i=wC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(hw,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",cw(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+R0(s,a);o+=sp(s,e,n,l,i)}else if(l=vC(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+R0(s,a++),o+=sp(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ed(t,e,n){if(t==null)return t;var r=[],i=0;return sp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function bC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gi={current:null},op={transition:null},_C={ReactCurrentDispatcher:gi,ReactCurrentBatchConfig:op,ReactCurrentOwner:sy};function __(){throw Error("act(...) is not supported in production builds of React.")}Dt.Children={map:Ed,forEach:function(t,e,n){Ed(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ed(t,function(){e++}),e},toArray:function(t){return Ed(t,function(e){return e})||[]},only:function(t){if(!oy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Dt.Component=Cc;Dt.Fragment=uC;Dt.Profiler=hC;Dt.PureComponent=ry;Dt.StrictMode=cC;Dt.Suspense=mC;Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_C;Dt.act=__;Dt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=g_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=sy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)w_.call(e,l)&&!x_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Df,type:t.type,key:i,ref:s,props:r,_owner:o}};Dt.createContext=function(t){return t={$$typeof:dC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fC,_context:t},t.Consumer=t};Dt.createElement=b_;Dt.createFactory=function(t){var e=b_.bind(null,t);return e.type=t,e};Dt.createRef=function(){return{current:null}};Dt.forwardRef=function(t){return{$$typeof:pC,render:t}};Dt.isValidElement=oy;Dt.lazy=function(t){return{$$typeof:yC,_payload:{_status:-1,_result:t},_init:bC}};Dt.memo=function(t,e){return{$$typeof:gC,type:t,compare:e===void 0?null:e}};Dt.startTransition=function(t){var e=op.transition;op.transition={};try{t()}finally{op.transition=e}};Dt.unstable_act=__;Dt.useCallback=function(t,e){return gi.current.useCallback(t,e)};Dt.useContext=function(t){return gi.current.useContext(t)};Dt.useDebugValue=function(){};Dt.useDeferredValue=function(t){return gi.current.useDeferredValue(t)};Dt.useEffect=function(t,e){return gi.current.useEffect(t,e)};Dt.useId=function(){return gi.current.useId()};Dt.useImperativeHandle=function(t,e,n){return gi.current.useImperativeHandle(t,e,n)};Dt.useInsertionEffect=function(t,e){return gi.current.useInsertionEffect(t,e)};Dt.useLayoutEffect=function(t,e){return gi.current.useLayoutEffect(t,e)};Dt.useMemo=function(t,e){return gi.current.useMemo(t,e)};Dt.useReducer=function(t,e,n){return gi.current.useReducer(t,e,n)};Dt.useRef=function(t){return gi.current.useRef(t)};Dt.useState=function(t){return gi.current.useState(t)};Dt.useSyncExternalStore=function(t,e,n){return gi.current.useSyncExternalStore(t,e,n)};Dt.useTransition=function(){return gi.current.useTransition()};Dt.version="18.3.1";p_.exports=Dt;var G=p_.exports;const on=aC(G),SC=oC({__proto__:null,default:on},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AC=G,EC=Symbol.for("react.element"),NC=Symbol.for("react.fragment"),TC=Object.prototype.hasOwnProperty,CC=AC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,PC={key:!0,ref:!0,__self:!0,__source:!0};function S_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)TC.call(e,r)&&!PC.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:EC,type:t,key:s,ref:o,props:i,_owner:CC.current}}Im.Fragment=NC;Im.jsx=S_;Im.jsxs=S_;d_.exports=Im;var y=d_.exports,n1={},A_={exports:{}},ts={},E_={exports:{}},N_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,ae){var fe=$.length;$.push(ae);e:for(;0<fe;){var ve=fe-1>>>1,V=$[ve];if(0<i(V,ae))$[ve]=ae,$[fe]=V,fe=ve;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var ae=$[0],fe=$.pop();if(fe!==ae){$[0]=fe;e:for(var ve=0,V=$.length,Y=V>>>1;ve<Y;){var ie=2*(ve+1)-1,ne=$[ie],oe=ie+1,ue=$[oe];if(0>i(ne,fe))oe<V&&0>i(ue,ne)?($[ve]=ue,$[oe]=fe,ve=oe):($[ve]=ne,$[ie]=fe,ve=ie);else if(oe<V&&0>i(ue,fe))$[ve]=ue,$[oe]=fe,ve=oe;else break e}}return ae}function i($,ae){var fe=$.sortIndex-ae.sortIndex;return fe!==0?fe:$.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,m=3,p=!1,x=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N($){for(var ae=n(u);ae!==null;){if(ae.callback===null)r(u);else if(ae.startTime<=$)r(u),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=n(u)}}function R($){if(E=!1,N($),!x)if(n(l)!==null)x=!0,se(z);else{var ae=n(u);ae!==null&&re(R,ae.startTime-$)}}function z($,ae){x=!1,E&&(E=!1,w(T),T=-1),p=!0;var fe=m;try{for(N(ae),d=n(l);d!==null&&(!(d.expirationTime>ae)||$&&!S());){var ve=d.callback;if(typeof ve=="function"){d.callback=null,m=d.priorityLevel;var V=ve(d.expirationTime<=ae);ae=t.unstable_now(),typeof V=="function"?d.callback=V:d===n(l)&&r(l),N(ae)}else r(l);d=n(l)}if(d!==null)var Y=!0;else{var ie=n(u);ie!==null&&re(R,ie.startTime-ae),Y=!1}return Y}finally{d=null,m=fe,p=!1}}var Q=!1,L=null,T=-1,k=5,M=-1;function S(){return!(t.unstable_now()-M<k)}function P(){if(L!==null){var $=t.unstable_now();M=$;var ae=!0;try{ae=L(!0,$)}finally{ae?j():(Q=!1,L=null)}}else Q=!1}var j;if(typeof A=="function")j=function(){A(P)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,X=B.port2;B.port1.onmessage=P,j=function(){X.postMessage(null)}}else j=function(){C(P,0)};function se($){L=$,Q||(Q=!0,j())}function re($,ae){T=C(function(){$(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){x||p||(x=!0,se(z))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var ae=3;break;default:ae=m}var fe=m;m=ae;try{return $()}finally{m=fe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,ae){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var fe=m;m=$;try{return ae()}finally{m=fe}},t.unstable_scheduleCallback=function($,ae,fe){var ve=t.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?ve+fe:ve):fe=ve,$){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=fe+V,$={id:c++,callback:ae,priorityLevel:$,startTime:fe,expirationTime:V,sortIndex:-1},fe>ve?($.sortIndex=fe,e(u,$),n(l)===null&&$===n(u)&&(E?(w(T),T=-1):E=!0,re(R,fe-ve))):($.sortIndex=V,e(l,$),x||p||(x=!0,se(z))),$},t.unstable_shouldYield=S,t.unstable_wrapCallback=function($){var ae=m;return function(){var fe=m;m=ae;try{return $.apply(this,arguments)}finally{m=fe}}}})(N_);E_.exports=N_;var kC=E_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IC=G,es=kC;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var T_=new Set,Yh={};function cu(t,e){hc(t,e),hc(t+"Capture",e)}function hc(t,e){for(Yh[t]=e,t=0;t<e.length;t++)T_.add(e[t])}var Ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),r1=Object.prototype.hasOwnProperty,LC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fw={},dw={};function RC(t){return r1.call(dw,t)?!0:r1.call(fw,t)?!1:LC.test(t)?dw[t]=!0:(fw[t]=!0,!1)}function jC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DC(t,e,n,r){if(e===null||typeof e>"u"||jC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yi(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Vr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vr[t]=new yi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vr[e]=new yi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vr[t]=new yi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vr[t]=new yi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vr[t]=new yi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vr[t]=new yi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vr[t]=new yi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vr[t]=new yi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vr[t]=new yi(t,5,!1,t.toLowerCase(),null,!1,!1)});var ay=/[\-:]([a-z])/g;function ly(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ay,ly);Vr[e]=new yi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ay,ly);Vr[e]=new yi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ay,ly);Vr[e]=new yi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vr[t]=new yi(t,1,!1,t.toLowerCase(),null,!1,!1)});Vr.xlinkHref=new yi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vr[t]=new yi(t,1,!1,t.toLowerCase(),null,!0,!0)});function uy(t,e,n,r){var i=Vr.hasOwnProperty(e)?Vr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DC(e,n,i,r)&&(n=null),r||i===null?RC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ia=IC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nd=Symbol.for("react.element"),Ru=Symbol.for("react.portal"),ju=Symbol.for("react.fragment"),cy=Symbol.for("react.strict_mode"),i1=Symbol.for("react.profiler"),C_=Symbol.for("react.provider"),P_=Symbol.for("react.context"),hy=Symbol.for("react.forward_ref"),s1=Symbol.for("react.suspense"),o1=Symbol.for("react.suspense_list"),fy=Symbol.for("react.memo"),Ia=Symbol.for("react.lazy"),k_=Symbol.for("react.offscreen"),pw=Symbol.iterator;function lh(t){return t===null||typeof t!="object"?null:(t=pw&&t[pw]||t["@@iterator"],typeof t=="function"?t:null)}var On=Object.assign,j0;function xh(t){if(j0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);j0=e&&e[1]||""}return`
`+j0+t}var D0=!1;function M0(t,e){if(!t||D0)return"";D0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{D0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xh(t):""}function MC(t){switch(t.tag){case 5:return xh(t.type);case 16:return xh("Lazy");case 13:return xh("Suspense");case 19:return xh("SuspenseList");case 0:case 2:case 15:return t=M0(t.type,!1),t;case 11:return t=M0(t.type.render,!1),t;case 1:return t=M0(t.type,!0),t;default:return""}}function a1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ju:return"Fragment";case Ru:return"Portal";case i1:return"Profiler";case cy:return"StrictMode";case s1:return"Suspense";case o1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case P_:return(t.displayName||"Context")+".Consumer";case C_:return(t._context.displayName||"Context")+".Provider";case hy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case fy:return e=t.displayName||null,e!==null?e:a1(t.type)||"Memo";case Ia:e=t._payload,t=t._init;try{return a1(t(e))}catch{}}return null}function FC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return a1(e);case 8:return e===cy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Za(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function I_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OC(t){var e=I_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Td(t){t._valueTracker||(t._valueTracker=OC(t))}function L_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=I_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Lp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function l1(t,e){var n=e.checked;return On({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function mw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Za(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function R_(t,e){e=e.checked,e!=null&&uy(t,"checked",e,!1)}function u1(t,e){R_(t,e);var n=Za(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?c1(t,e.type,n):e.hasOwnProperty("defaultValue")&&c1(t,e.type,Za(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function gw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function c1(t,e,n){(e!=="number"||Lp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bh=Array.isArray;function Ju(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Za(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function h1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return On({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Fe(92));if(bh(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Za(n)}}function j_(t,e){var n=Za(e.value),r=Za(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function vw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function D_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function f1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?D_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cd,M_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cd=Cd||document.createElement("div"),Cd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Xh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VC=["Webkit","ms","Moz","O"];Object.keys(Ph).forEach(function(t){VC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ph[e]=Ph[t]})});function F_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ph.hasOwnProperty(t)&&Ph[t]?(""+e).trim():e+"px"}function O_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=F_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var BC=On({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function d1(t,e){if(e){if(BC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function p1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var m1=null;function dy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var g1=null,Zu=null,ec=null;function ww(t){if(t=Of(t)){if(typeof g1!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=Mm(e),g1(t.stateNode,t.type,e))}}function V_(t){Zu?ec?ec.push(t):ec=[t]:Zu=t}function B_(){if(Zu){var t=Zu,e=ec;if(ec=Zu=null,ww(t),e)for(t=0;t<e.length;t++)ww(e[t])}}function U_(t,e){return t(e)}function z_(){}var F0=!1;function q_(t,e,n){if(F0)return t(e,n);F0=!0;try{return U_(t,e,n)}finally{F0=!1,(Zu!==null||ec!==null)&&(z_(),B_())}}function Jh(t,e){var n=t.stateNode;if(n===null)return null;var r=Mm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Fe(231,e,typeof n));return n}var y1=!1;if(Ko)try{var uh={};Object.defineProperty(uh,"passive",{get:function(){y1=!0}}),window.addEventListener("test",uh,uh),window.removeEventListener("test",uh,uh)}catch{y1=!1}function UC(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var kh=!1,Rp=null,jp=!1,v1=null,zC={onError:function(t){kh=!0,Rp=t}};function qC(t,e,n,r,i,s,o,a,l){kh=!1,Rp=null,UC.apply(zC,arguments)}function $C(t,e,n,r,i,s,o,a,l){if(qC.apply(this,arguments),kh){if(kh){var u=Rp;kh=!1,Rp=null}else throw Error(Fe(198));jp||(jp=!0,v1=u)}}function hu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xw(t){if(hu(t)!==t)throw Error(Fe(188))}function HC(t){var e=t.alternate;if(!e){if(e=hu(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return xw(i),t;if(s===r)return xw(i),e;s=s.sibling}throw Error(Fe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Fe(189))}}if(n.alternate!==r)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?t:e}function H_(t){return t=HC(t),t!==null?W_(t):null}function W_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=W_(t);if(e!==null)return e;t=t.sibling}return null}var G_=es.unstable_scheduleCallback,bw=es.unstable_cancelCallback,WC=es.unstable_shouldYield,GC=es.unstable_requestPaint,ir=es.unstable_now,KC=es.unstable_getCurrentPriorityLevel,py=es.unstable_ImmediatePriority,K_=es.unstable_UserBlockingPriority,Dp=es.unstable_NormalPriority,QC=es.unstable_LowPriority,Q_=es.unstable_IdlePriority,Lm=null,po=null;function YC(t){if(po&&typeof po.onCommitFiberRoot=="function")try{po.onCommitFiberRoot(Lm,t,void 0,(t.current.flags&128)===128)}catch{}}var Fs=Math.clz32?Math.clz32:ZC,XC=Math.log,JC=Math.LN2;function ZC(t){return t>>>=0,t===0?32:31-(XC(t)/JC|0)|0}var Pd=64,kd=4194304;function _h(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mp(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=_h(a):(s&=o,s!==0&&(r=_h(s)))}else o=n&~i,o!==0?r=_h(o):s!==0&&(r=_h(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fs(e),i=1<<n,r|=t[n],e&=~i;return r}function eP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Fs(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=eP(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function w1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Y_(){var t=Pd;return Pd<<=1,!(Pd&4194240)&&(Pd=64),t}function O0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Mf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fs(e),t[e]=n}function nP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Fs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function my(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ln=0;function X_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var J_,gy,Z_,e6,t6,x1=!1,Id=[],Ua=null,za=null,qa=null,Zh=new Map,ef=new Map,Ra=[],rP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function _w(t,e){switch(t){case"focusin":case"focusout":Ua=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":qa=null;break;case"pointerover":case"pointerout":Zh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ef.delete(e.pointerId)}}function ch(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Of(e),e!==null&&gy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function iP(t,e,n,r,i){switch(e){case"focusin":return Ua=ch(Ua,t,e,n,r,i),!0;case"dragenter":return za=ch(za,t,e,n,r,i),!0;case"mouseover":return qa=ch(qa,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Zh.set(s,ch(Zh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ef.set(s,ch(ef.get(s)||null,t,e,n,r,i)),!0}return!1}function n6(t){var e=Ul(t.target);if(e!==null){var n=hu(e);if(n!==null){if(e=n.tag,e===13){if(e=$_(n),e!==null){t.blockedOn=e,t6(t.priority,function(){Z_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ap(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=b1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);m1=r,n.target.dispatchEvent(r),m1=null}else return e=Of(n),e!==null&&gy(e),t.blockedOn=n,!1;e.shift()}return!0}function Sw(t,e,n){ap(t)&&n.delete(e)}function sP(){x1=!1,Ua!==null&&ap(Ua)&&(Ua=null),za!==null&&ap(za)&&(za=null),qa!==null&&ap(qa)&&(qa=null),Zh.forEach(Sw),ef.forEach(Sw)}function hh(t,e){t.blockedOn===e&&(t.blockedOn=null,x1||(x1=!0,es.unstable_scheduleCallback(es.unstable_NormalPriority,sP)))}function tf(t){function e(i){return hh(i,t)}if(0<Id.length){hh(Id[0],t);for(var n=1;n<Id.length;n++){var r=Id[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ua!==null&&hh(Ua,t),za!==null&&hh(za,t),qa!==null&&hh(qa,t),Zh.forEach(e),ef.forEach(e),n=0;n<Ra.length;n++)r=Ra[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ra.length&&(n=Ra[0],n.blockedOn===null);)n6(n),n.blockedOn===null&&Ra.shift()}var tc=ia.ReactCurrentBatchConfig,Fp=!0;function oP(t,e,n,r){var i=ln,s=tc.transition;tc.transition=null;try{ln=1,yy(t,e,n,r)}finally{ln=i,tc.transition=s}}function aP(t,e,n,r){var i=ln,s=tc.transition;tc.transition=null;try{ln=4,yy(t,e,n,r)}finally{ln=i,tc.transition=s}}function yy(t,e,n,r){if(Fp){var i=b1(t,e,n,r);if(i===null)K0(t,e,r,Op,n),_w(t,r);else if(iP(i,t,e,n,r))r.stopPropagation();else if(_w(t,r),e&4&&-1<rP.indexOf(t)){for(;i!==null;){var s=Of(i);if(s!==null&&J_(s),s=b1(t,e,n,r),s===null&&K0(t,e,r,Op,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else K0(t,e,r,null,n)}}var Op=null;function b1(t,e,n,r){if(Op=null,t=dy(r),t=Ul(t),t!==null)if(e=hu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Op=t,null}function r6(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KC()){case py:return 1;case K_:return 4;case Dp:case QC:return 16;case Q_:return 536870912;default:return 16}default:return 16}}var Da=null,vy=null,lp=null;function i6(){if(lp)return lp;var t,e=vy,n=e.length,r,i="value"in Da?Da.value:Da.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return lp=i.slice(t,1<r?1-r:void 0)}function up(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ld(){return!0}function Aw(){return!1}function ns(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ld:Aw,this.isPropagationStopped=Aw,this}return On(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ld)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ld)},persist:function(){},isPersistent:Ld}),e}var Pc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wy=ns(Pc),Ff=On({},Pc,{view:0,detail:0}),lP=ns(Ff),V0,B0,fh,Rm=On({},Ff,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fh&&(fh&&t.type==="mousemove"?(V0=t.screenX-fh.screenX,B0=t.screenY-fh.screenY):B0=V0=0,fh=t),V0)},movementY:function(t){return"movementY"in t?t.movementY:B0}}),Ew=ns(Rm),uP=On({},Rm,{dataTransfer:0}),cP=ns(uP),hP=On({},Ff,{relatedTarget:0}),U0=ns(hP),fP=On({},Pc,{animationName:0,elapsedTime:0,pseudoElement:0}),dP=ns(fP),pP=On({},Pc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mP=ns(pP),gP=On({},Pc,{data:0}),Nw=ns(gP),yP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=wP[t])?!!e[t]:!1}function xy(){return xP}var bP=On({},Ff,{key:function(t){if(t.key){var e=yP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=up(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xy,charCode:function(t){return t.type==="keypress"?up(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?up(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_P=ns(bP),SP=On({},Rm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tw=ns(SP),AP=On({},Ff,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xy}),EP=ns(AP),NP=On({},Pc,{propertyName:0,elapsedTime:0,pseudoElement:0}),TP=ns(NP),CP=On({},Rm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),PP=ns(CP),kP=[9,13,27,32],by=Ko&&"CompositionEvent"in window,Ih=null;Ko&&"documentMode"in document&&(Ih=document.documentMode);var IP=Ko&&"TextEvent"in window&&!Ih,s6=Ko&&(!by||Ih&&8<Ih&&11>=Ih),Cw=" ",Pw=!1;function o6(t,e){switch(t){case"keyup":return kP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a6(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Du=!1;function LP(t,e){switch(t){case"compositionend":return a6(e);case"keypress":return e.which!==32?null:(Pw=!0,Cw);case"textInput":return t=e.data,t===Cw&&Pw?null:t;default:return null}}function RP(t,e){if(Du)return t==="compositionend"||!by&&o6(t,e)?(t=i6(),lp=vy=Da=null,Du=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return s6&&e.locale!=="ko"?null:e.data;default:return null}}var jP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!jP[t.type]:e==="textarea"}function l6(t,e,n,r){V_(r),e=Vp(e,"onChange"),0<e.length&&(n=new wy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Lh=null,nf=null;function DP(t){w6(t,0)}function jm(t){var e=Ou(t);if(L_(e))return t}function MP(t,e){if(t==="change")return e}var u6=!1;if(Ko){var z0;if(Ko){var q0="oninput"in document;if(!q0){var Iw=document.createElement("div");Iw.setAttribute("oninput","return;"),q0=typeof Iw.oninput=="function"}z0=q0}else z0=!1;u6=z0&&(!document.documentMode||9<document.documentMode)}function Lw(){Lh&&(Lh.detachEvent("onpropertychange",c6),nf=Lh=null)}function c6(t){if(t.propertyName==="value"&&jm(nf)){var e=[];l6(e,nf,t,dy(t)),q_(DP,e)}}function FP(t,e,n){t==="focusin"?(Lw(),Lh=e,nf=n,Lh.attachEvent("onpropertychange",c6)):t==="focusout"&&Lw()}function OP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jm(nf)}function VP(t,e){if(t==="click")return jm(e)}function BP(t,e){if(t==="input"||t==="change")return jm(e)}function UP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vs=typeof Object.is=="function"?Object.is:UP;function rf(t,e){if(Vs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!r1.call(e,i)||!Vs(t[i],e[i]))return!1}return!0}function Rw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jw(t,e){var n=Rw(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rw(n)}}function h6(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?h6(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f6(){for(var t=window,e=Lp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lp(t.document)}return e}function _y(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zP(t){var e=f6(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&h6(n.ownerDocument.documentElement,n)){if(r!==null&&_y(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=jw(n,s);var o=jw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qP=Ko&&"documentMode"in document&&11>=document.documentMode,Mu=null,_1=null,Rh=null,S1=!1;function Dw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;S1||Mu==null||Mu!==Lp(r)||(r=Mu,"selectionStart"in r&&_y(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rh&&rf(Rh,r)||(Rh=r,r=Vp(_1,"onSelect"),0<r.length&&(e=new wy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Mu)))}function Rd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Fu={animationend:Rd("Animation","AnimationEnd"),animationiteration:Rd("Animation","AnimationIteration"),animationstart:Rd("Animation","AnimationStart"),transitionend:Rd("Transition","TransitionEnd")},$0={},d6={};Ko&&(d6=document.createElement("div").style,"AnimationEvent"in window||(delete Fu.animationend.animation,delete Fu.animationiteration.animation,delete Fu.animationstart.animation),"TransitionEvent"in window||delete Fu.transitionend.transition);function Dm(t){if($0[t])return $0[t];if(!Fu[t])return t;var e=Fu[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in d6)return $0[t]=e[n];return t}var p6=Dm("animationend"),m6=Dm("animationiteration"),g6=Dm("animationstart"),y6=Dm("transitionend"),v6=new Map,Mw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function al(t,e){v6.set(t,e),cu(e,[t])}for(var H0=0;H0<Mw.length;H0++){var W0=Mw[H0],$P=W0.toLowerCase(),HP=W0[0].toUpperCase()+W0.slice(1);al($P,"on"+HP)}al(p6,"onAnimationEnd");al(m6,"onAnimationIteration");al(g6,"onAnimationStart");al("dblclick","onDoubleClick");al("focusin","onFocus");al("focusout","onBlur");al(y6,"onTransitionEnd");hc("onMouseEnter",["mouseout","mouseover"]);hc("onMouseLeave",["mouseout","mouseover"]);hc("onPointerEnter",["pointerout","pointerover"]);hc("onPointerLeave",["pointerout","pointerover"]);cu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cu("onBeforeInput",["compositionend","keypress","textInput","paste"]);cu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sh));function Fw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,$C(r,e,void 0,t),t.currentTarget=null}function w6(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fw(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fw(i,a,u),s=l}}}if(jp)throw t=v1,jp=!1,v1=null,t}function bn(t,e){var n=e[C1];n===void 0&&(n=e[C1]=new Set);var r=t+"__bubble";n.has(r)||(x6(e,t,2,!1),n.add(r))}function G0(t,e,n){var r=0;e&&(r|=4),x6(n,t,r,e)}var jd="_reactListening"+Math.random().toString(36).slice(2);function sf(t){if(!t[jd]){t[jd]=!0,T_.forEach(function(n){n!=="selectionchange"&&(WP.has(n)||G0(n,!1,t),G0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[jd]||(e[jd]=!0,G0("selectionchange",!1,e))}}function x6(t,e,n,r){switch(r6(e)){case 1:var i=oP;break;case 4:i=aP;break;default:i=yy}n=i.bind(null,e,n,t),i=void 0,!y1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function K0(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Ul(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}q_(function(){var u=s,c=dy(n),d=[];e:{var m=v6.get(t);if(m!==void 0){var p=wy,x=t;switch(t){case"keypress":if(up(n)===0)break e;case"keydown":case"keyup":p=_P;break;case"focusin":x="focus",p=U0;break;case"focusout":x="blur",p=U0;break;case"beforeblur":case"afterblur":p=U0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Ew;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=cP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=EP;break;case p6:case m6:case g6:p=dP;break;case y6:p=TP;break;case"scroll":p=lP;break;case"wheel":p=PP;break;case"copy":case"cut":case"paste":p=mP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Tw}var E=(e&4)!==0,C=!E&&t==="scroll",w=E?m!==null?m+"Capture":null:m;E=[];for(var A=u,N;A!==null;){N=A;var R=N.stateNode;if(N.tag===5&&R!==null&&(N=R,w!==null&&(R=Jh(A,w),R!=null&&E.push(of(A,R,N)))),C)break;A=A.return}0<E.length&&(m=new p(m,x,null,n,c),d.push({event:m,listeners:E}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",m&&n!==m1&&(x=n.relatedTarget||n.fromElement)&&(Ul(x)||x[Qo]))break e;if((p||m)&&(m=c.window===c?c:(m=c.ownerDocument)?m.defaultView||m.parentWindow:window,p?(x=n.relatedTarget||n.toElement,p=u,x=x?Ul(x):null,x!==null&&(C=hu(x),x!==C||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=u),p!==x)){if(E=Ew,R="onMouseLeave",w="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(E=Tw,R="onPointerLeave",w="onPointerEnter",A="pointer"),C=p==null?m:Ou(p),N=x==null?m:Ou(x),m=new E(R,A+"leave",p,n,c),m.target=C,m.relatedTarget=N,R=null,Ul(c)===u&&(E=new E(w,A+"enter",x,n,c),E.target=N,E.relatedTarget=C,R=E),C=R,p&&x)t:{for(E=p,w=x,A=0,N=E;N;N=Au(N))A++;for(N=0,R=w;R;R=Au(R))N++;for(;0<A-N;)E=Au(E),A--;for(;0<N-A;)w=Au(w),N--;for(;A--;){if(E===w||w!==null&&E===w.alternate)break t;E=Au(E),w=Au(w)}E=null}else E=null;p!==null&&Ow(d,m,p,E,!1),x!==null&&C!==null&&Ow(d,C,x,E,!0)}}e:{if(m=u?Ou(u):window,p=m.nodeName&&m.nodeName.toLowerCase(),p==="select"||p==="input"&&m.type==="file")var z=MP;else if(kw(m))if(u6)z=BP;else{z=OP;var Q=FP}else(p=m.nodeName)&&p.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(z=VP);if(z&&(z=z(t,u))){l6(d,z,n,c);break e}Q&&Q(t,m,u),t==="focusout"&&(Q=m._wrapperState)&&Q.controlled&&m.type==="number"&&c1(m,"number",m.value)}switch(Q=u?Ou(u):window,t){case"focusin":(kw(Q)||Q.contentEditable==="true")&&(Mu=Q,_1=u,Rh=null);break;case"focusout":Rh=_1=Mu=null;break;case"mousedown":S1=!0;break;case"contextmenu":case"mouseup":case"dragend":S1=!1,Dw(d,n,c);break;case"selectionchange":if(qP)break;case"keydown":case"keyup":Dw(d,n,c)}var L;if(by)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Du?o6(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(s6&&n.locale!=="ko"&&(Du||T!=="onCompositionStart"?T==="onCompositionEnd"&&Du&&(L=i6()):(Da=c,vy="value"in Da?Da.value:Da.textContent,Du=!0)),Q=Vp(u,T),0<Q.length&&(T=new Nw(T,t,null,n,c),d.push({event:T,listeners:Q}),L?T.data=L:(L=a6(n),L!==null&&(T.data=L)))),(L=IP?LP(t,n):RP(t,n))&&(u=Vp(u,"onBeforeInput"),0<u.length&&(c=new Nw("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=L))}w6(d,e)})}function of(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vp(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Jh(t,n),s!=null&&r.unshift(of(t,s,i)),s=Jh(t,e),s!=null&&r.push(of(t,s,i))),t=t.return}return r}function Au(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ow(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Jh(n,s),l!=null&&o.unshift(of(n,l,a))):i||(l=Jh(n,s),l!=null&&o.push(of(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var GP=/\r\n?/g,KP=/\u0000|\uFFFD/g;function Vw(t){return(typeof t=="string"?t:""+t).replace(GP,`
`).replace(KP,"")}function Dd(t,e,n){if(e=Vw(e),Vw(t)!==e&&n)throw Error(Fe(425))}function Bp(){}var A1=null,E1=null;function N1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var T1=typeof setTimeout=="function"?setTimeout:void 0,QP=typeof clearTimeout=="function"?clearTimeout:void 0,Bw=typeof Promise=="function"?Promise:void 0,YP=typeof queueMicrotask=="function"?queueMicrotask:typeof Bw<"u"?function(t){return Bw.resolve(null).then(t).catch(XP)}:T1;function XP(t){setTimeout(function(){throw t})}function Q0(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),tf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);tf(e)}function $a(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Uw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var kc=Math.random().toString(36).slice(2),ho="__reactFiber$"+kc,af="__reactProps$"+kc,Qo="__reactContainer$"+kc,C1="__reactEvents$"+kc,JP="__reactListeners$"+kc,ZP="__reactHandles$"+kc;function Ul(t){var e=t[ho];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qo]||n[ho]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Uw(t);t!==null;){if(n=t[ho])return n;t=Uw(t)}return e}t=n,n=t.parentNode}return null}function Of(t){return t=t[ho]||t[Qo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ou(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function Mm(t){return t[af]||null}var P1=[],Vu=-1;function ll(t){return{current:t}}function An(t){0>Vu||(t.current=P1[Vu],P1[Vu]=null,Vu--)}function yn(t,e){Vu++,P1[Vu]=t.current,t.current=e}var el={},ii=ll(el),ki=ll(!1),Zl=el;function fc(t,e){var n=t.type.contextTypes;if(!n)return el;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ii(t){return t=t.childContextTypes,t!=null}function Up(){An(ki),An(ii)}function zw(t,e,n){if(ii.current!==el)throw Error(Fe(168));yn(ii,e),yn(ki,n)}function b6(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Fe(108,FC(t)||"Unknown",i));return On({},n,r)}function zp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||el,Zl=ii.current,yn(ii,t),yn(ki,ki.current),!0}function qw(t,e,n){var r=t.stateNode;if(!r)throw Error(Fe(169));n?(t=b6(t,e,Zl),r.__reactInternalMemoizedMergedChildContext=t,An(ki),An(ii),yn(ii,t)):An(ki),yn(ki,n)}var Uo=null,Fm=!1,Y0=!1;function _6(t){Uo===null?Uo=[t]:Uo.push(t)}function ek(t){Fm=!0,_6(t)}function ul(){if(!Y0&&Uo!==null){Y0=!0;var t=0,e=ln;try{var n=Uo;for(ln=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Uo=null,Fm=!1}catch(i){throw Uo!==null&&(Uo=Uo.slice(t+1)),G_(py,ul),i}finally{ln=e,Y0=!1}}return null}var Bu=[],Uu=0,qp=null,$p=0,ds=[],ps=0,eu=null,qo=1,$o="";function Dl(t,e){Bu[Uu++]=$p,Bu[Uu++]=qp,qp=t,$p=e}function S6(t,e,n){ds[ps++]=qo,ds[ps++]=$o,ds[ps++]=eu,eu=t;var r=qo;t=$o;var i=32-Fs(r)-1;r&=~(1<<i),n+=1;var s=32-Fs(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qo=1<<32-Fs(e)+i|n<<i|r,$o=s+t}else qo=1<<s|n<<i|r,$o=t}function Sy(t){t.return!==null&&(Dl(t,1),S6(t,1,0))}function Ay(t){for(;t===qp;)qp=Bu[--Uu],Bu[Uu]=null,$p=Bu[--Uu],Bu[Uu]=null;for(;t===eu;)eu=ds[--ps],ds[ps]=null,$o=ds[--ps],ds[ps]=null,qo=ds[--ps],ds[ps]=null}var Zi=null,Yi=null,Pn=!1,Ms=null;function A6(t,e){var n=ms(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $w(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zi=t,Yi=$a(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zi=t,Yi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=eu!==null?{id:qo,overflow:$o}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ms(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zi=t,Yi=null,!0):!1;default:return!1}}function k1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function I1(t){if(Pn){var e=Yi;if(e){var n=e;if(!$w(t,e)){if(k1(t))throw Error(Fe(418));e=$a(n.nextSibling);var r=Zi;e&&$w(t,e)?A6(r,n):(t.flags=t.flags&-4097|2,Pn=!1,Zi=t)}}else{if(k1(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,Pn=!1,Zi=t}}}function Hw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zi=t}function Md(t){if(t!==Zi)return!1;if(!Pn)return Hw(t),Pn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!N1(t.type,t.memoizedProps)),e&&(e=Yi)){if(k1(t))throw E6(),Error(Fe(418));for(;e;)A6(t,e),e=$a(e.nextSibling)}if(Hw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yi=$a(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yi=null}}else Yi=Zi?$a(t.stateNode.nextSibling):null;return!0}function E6(){for(var t=Yi;t;)t=$a(t.nextSibling)}function dc(){Yi=Zi=null,Pn=!1}function Ey(t){Ms===null?Ms=[t]:Ms.push(t)}var tk=ia.ReactCurrentBatchConfig;function dh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var r=n.stateNode}if(!r)throw Error(Fe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,t))}return t}function Fd(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ww(t){var e=t._init;return e(t._payload)}function N6(t){function e(w,A){if(t){var N=w.deletions;N===null?(w.deletions=[A],w.flags|=16):N.push(A)}}function n(w,A){if(!t)return null;for(;A!==null;)e(w,A),A=A.sibling;return null}function r(w,A){for(w=new Map;A!==null;)A.key!==null?w.set(A.key,A):w.set(A.index,A),A=A.sibling;return w}function i(w,A){return w=Ka(w,A),w.index=0,w.sibling=null,w}function s(w,A,N){return w.index=N,t?(N=w.alternate,N!==null?(N=N.index,N<A?(w.flags|=2,A):N):(w.flags|=2,A)):(w.flags|=1048576,A)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,A,N,R){return A===null||A.tag!==6?(A=rg(N,w.mode,R),A.return=w,A):(A=i(A,N),A.return=w,A)}function l(w,A,N,R){var z=N.type;return z===ju?c(w,A,N.props.children,R,N.key):A!==null&&(A.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Ia&&Ww(z)===A.type)?(R=i(A,N.props),R.ref=dh(w,A,N),R.return=w,R):(R=gp(N.type,N.key,N.props,null,w.mode,R),R.ref=dh(w,A,N),R.return=w,R)}function u(w,A,N,R){return A===null||A.tag!==4||A.stateNode.containerInfo!==N.containerInfo||A.stateNode.implementation!==N.implementation?(A=ig(N,w.mode,R),A.return=w,A):(A=i(A,N.children||[]),A.return=w,A)}function c(w,A,N,R,z){return A===null||A.tag!==7?(A=Kl(N,w.mode,R,z),A.return=w,A):(A=i(A,N),A.return=w,A)}function d(w,A,N){if(typeof A=="string"&&A!==""||typeof A=="number")return A=rg(""+A,w.mode,N),A.return=w,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Nd:return N=gp(A.type,A.key,A.props,null,w.mode,N),N.ref=dh(w,null,A),N.return=w,N;case Ru:return A=ig(A,w.mode,N),A.return=w,A;case Ia:var R=A._init;return d(w,R(A._payload),N)}if(bh(A)||lh(A))return A=Kl(A,w.mode,N,null),A.return=w,A;Fd(w,A)}return null}function m(w,A,N,R){var z=A!==null?A.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return z!==null?null:a(w,A,""+N,R);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Nd:return N.key===z?l(w,A,N,R):null;case Ru:return N.key===z?u(w,A,N,R):null;case Ia:return z=N._init,m(w,A,z(N._payload),R)}if(bh(N)||lh(N))return z!==null?null:c(w,A,N,R,null);Fd(w,N)}return null}function p(w,A,N,R,z){if(typeof R=="string"&&R!==""||typeof R=="number")return w=w.get(N)||null,a(A,w,""+R,z);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Nd:return w=w.get(R.key===null?N:R.key)||null,l(A,w,R,z);case Ru:return w=w.get(R.key===null?N:R.key)||null,u(A,w,R,z);case Ia:var Q=R._init;return p(w,A,N,Q(R._payload),z)}if(bh(R)||lh(R))return w=w.get(N)||null,c(A,w,R,z,null);Fd(A,R)}return null}function x(w,A,N,R){for(var z=null,Q=null,L=A,T=A=0,k=null;L!==null&&T<N.length;T++){L.index>T?(k=L,L=null):k=L.sibling;var M=m(w,L,N[T],R);if(M===null){L===null&&(L=k);break}t&&L&&M.alternate===null&&e(w,L),A=s(M,A,T),Q===null?z=M:Q.sibling=M,Q=M,L=k}if(T===N.length)return n(w,L),Pn&&Dl(w,T),z;if(L===null){for(;T<N.length;T++)L=d(w,N[T],R),L!==null&&(A=s(L,A,T),Q===null?z=L:Q.sibling=L,Q=L);return Pn&&Dl(w,T),z}for(L=r(w,L);T<N.length;T++)k=p(L,w,T,N[T],R),k!==null&&(t&&k.alternate!==null&&L.delete(k.key===null?T:k.key),A=s(k,A,T),Q===null?z=k:Q.sibling=k,Q=k);return t&&L.forEach(function(S){return e(w,S)}),Pn&&Dl(w,T),z}function E(w,A,N,R){var z=lh(N);if(typeof z!="function")throw Error(Fe(150));if(N=z.call(N),N==null)throw Error(Fe(151));for(var Q=z=null,L=A,T=A=0,k=null,M=N.next();L!==null&&!M.done;T++,M=N.next()){L.index>T?(k=L,L=null):k=L.sibling;var S=m(w,L,M.value,R);if(S===null){L===null&&(L=k);break}t&&L&&S.alternate===null&&e(w,L),A=s(S,A,T),Q===null?z=S:Q.sibling=S,Q=S,L=k}if(M.done)return n(w,L),Pn&&Dl(w,T),z;if(L===null){for(;!M.done;T++,M=N.next())M=d(w,M.value,R),M!==null&&(A=s(M,A,T),Q===null?z=M:Q.sibling=M,Q=M);return Pn&&Dl(w,T),z}for(L=r(w,L);!M.done;T++,M=N.next())M=p(L,w,T,M.value,R),M!==null&&(t&&M.alternate!==null&&L.delete(M.key===null?T:M.key),A=s(M,A,T),Q===null?z=M:Q.sibling=M,Q=M);return t&&L.forEach(function(P){return e(w,P)}),Pn&&Dl(w,T),z}function C(w,A,N,R){if(typeof N=="object"&&N!==null&&N.type===ju&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Nd:e:{for(var z=N.key,Q=A;Q!==null;){if(Q.key===z){if(z=N.type,z===ju){if(Q.tag===7){n(w,Q.sibling),A=i(Q,N.props.children),A.return=w,w=A;break e}}else if(Q.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Ia&&Ww(z)===Q.type){n(w,Q.sibling),A=i(Q,N.props),A.ref=dh(w,Q,N),A.return=w,w=A;break e}n(w,Q);break}else e(w,Q);Q=Q.sibling}N.type===ju?(A=Kl(N.props.children,w.mode,R,N.key),A.return=w,w=A):(R=gp(N.type,N.key,N.props,null,w.mode,R),R.ref=dh(w,A,N),R.return=w,w=R)}return o(w);case Ru:e:{for(Q=N.key;A!==null;){if(A.key===Q)if(A.tag===4&&A.stateNode.containerInfo===N.containerInfo&&A.stateNode.implementation===N.implementation){n(w,A.sibling),A=i(A,N.children||[]),A.return=w,w=A;break e}else{n(w,A);break}else e(w,A);A=A.sibling}A=ig(N,w.mode,R),A.return=w,w=A}return o(w);case Ia:return Q=N._init,C(w,A,Q(N._payload),R)}if(bh(N))return x(w,A,N,R);if(lh(N))return E(w,A,N,R);Fd(w,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,A!==null&&A.tag===6?(n(w,A.sibling),A=i(A,N),A.return=w,w=A):(n(w,A),A=rg(N,w.mode,R),A.return=w,w=A),o(w)):n(w,A)}return C}var pc=N6(!0),T6=N6(!1),Hp=ll(null),Wp=null,zu=null,Ny=null;function Ty(){Ny=zu=Wp=null}function Cy(t){var e=Hp.current;An(Hp),t._currentValue=e}function L1(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function nc(t,e){Wp=t,Ny=zu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ci=!0),t.firstContext=null)}function vs(t){var e=t._currentValue;if(Ny!==t)if(t={context:t,memoizedValue:e,next:null},zu===null){if(Wp===null)throw Error(Fe(308));zu=t,Wp.dependencies={lanes:0,firstContext:t}}else zu=zu.next=t;return e}var zl=null;function Py(t){zl===null?zl=[t]:zl.push(t)}function C6(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Py(e)):(n.next=i.next,i.next=n),e.interleaved=n,Yo(t,r)}function Yo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var La=!1;function ky(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function P6(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ha(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Gt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yo(t,n)}return i=r.interleaved,i===null?(e.next=e,Py(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yo(t,n)}function cp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,my(t,n)}}function Gw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gp(t,e,n,r){var i=t.updateQueue;La=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var m=a.lane,p=a.eventTime;if((r&m)===m){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,E=a;switch(m=e,p=n,E.tag){case 1:if(x=E.payload,typeof x=="function"){d=x.call(p,d,m);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=E.payload,m=typeof x=="function"?x.call(p,d,m):x,m==null)break e;d=On({},d,m);break e;case 2:La=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else p={eventTime:p,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);nu|=o,t.lanes=o,t.memoizedState=d}}function Kw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var Vf={},mo=ll(Vf),lf=ll(Vf),uf=ll(Vf);function ql(t){if(t===Vf)throw Error(Fe(174));return t}function Iy(t,e){switch(yn(uf,e),yn(lf,t),yn(mo,Vf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:f1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=f1(e,t)}An(mo),yn(mo,e)}function mc(){An(mo),An(lf),An(uf)}function k6(t){ql(uf.current);var e=ql(mo.current),n=f1(e,t.type);e!==n&&(yn(lf,t),yn(mo,n))}function Ly(t){lf.current===t&&(An(mo),An(lf))}var jn=ll(0);function Kp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var X0=[];function Ry(){for(var t=0;t<X0.length;t++)X0[t]._workInProgressVersionPrimary=null;X0.length=0}var hp=ia.ReactCurrentDispatcher,J0=ia.ReactCurrentBatchConfig,tu=0,Mn=null,vr=null,Er=null,Qp=!1,jh=!1,cf=0,nk=0;function Wr(){throw Error(Fe(321))}function jy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vs(t[n],e[n]))return!1;return!0}function Dy(t,e,n,r,i,s){if(tu=s,Mn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hp.current=t===null||t.memoizedState===null?ok:ak,t=n(r,i),jh){s=0;do{if(jh=!1,cf=0,25<=s)throw Error(Fe(301));s+=1,Er=vr=null,e.updateQueue=null,hp.current=lk,t=n(r,i)}while(jh)}if(hp.current=Yp,e=vr!==null&&vr.next!==null,tu=0,Er=vr=Mn=null,Qp=!1,e)throw Error(Fe(300));return t}function My(){var t=cf!==0;return cf=0,t}function co(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Er===null?Mn.memoizedState=Er=t:Er=Er.next=t,Er}function ws(){if(vr===null){var t=Mn.alternate;t=t!==null?t.memoizedState:null}else t=vr.next;var e=Er===null?Mn.memoizedState:Er.next;if(e!==null)Er=e,vr=t;else{if(t===null)throw Error(Fe(310));vr=t,t={memoizedState:vr.memoizedState,baseState:vr.baseState,baseQueue:vr.baseQueue,queue:vr.queue,next:null},Er===null?Mn.memoizedState=Er=t:Er=Er.next=t}return Er}function hf(t,e){return typeof e=="function"?e(t):e}function Z0(t){var e=ws(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=vr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((tu&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Mn.lanes|=c,nu|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Vs(r,e.memoizedState)||(Ci=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Mn.lanes|=s,nu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function eg(t){var e=ws(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Vs(s,e.memoizedState)||(Ci=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function I6(){}function L6(t,e){var n=Mn,r=ws(),i=e(),s=!Vs(r.memoizedState,i);if(s&&(r.memoizedState=i,Ci=!0),r=r.queue,Fy(D6.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Er!==null&&Er.memoizedState.tag&1){if(n.flags|=2048,ff(9,j6.bind(null,n,r,i,e),void 0,null),Tr===null)throw Error(Fe(349));tu&30||R6(n,e,i)}return i}function R6(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Mn.updateQueue,e===null?(e={lastEffect:null,stores:null},Mn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function j6(t,e,n,r){e.value=n,e.getSnapshot=r,M6(e)&&F6(t)}function D6(t,e,n){return n(function(){M6(e)&&F6(t)})}function M6(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vs(t,n)}catch{return!0}}function F6(t){var e=Yo(t,1);e!==null&&Os(e,t,1,-1)}function Qw(t){var e=co();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hf,lastRenderedState:t},e.queue=t,t=t.dispatch=sk.bind(null,Mn,t),[e.memoizedState,t]}function ff(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Mn.updateQueue,e===null?(e={lastEffect:null,stores:null},Mn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function O6(){return ws().memoizedState}function fp(t,e,n,r){var i=co();Mn.flags|=t,i.memoizedState=ff(1|e,n,void 0,r===void 0?null:r)}function Om(t,e,n,r){var i=ws();r=r===void 0?null:r;var s=void 0;if(vr!==null){var o=vr.memoizedState;if(s=o.destroy,r!==null&&jy(r,o.deps)){i.memoizedState=ff(e,n,s,r);return}}Mn.flags|=t,i.memoizedState=ff(1|e,n,s,r)}function Yw(t,e){return fp(8390656,8,t,e)}function Fy(t,e){return Om(2048,8,t,e)}function V6(t,e){return Om(4,2,t,e)}function B6(t,e){return Om(4,4,t,e)}function U6(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function z6(t,e,n){return n=n!=null?n.concat([t]):null,Om(4,4,U6.bind(null,e,t),n)}function Oy(){}function q6(t,e){var n=ws();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jy(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $6(t,e){var n=ws();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&jy(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function H6(t,e,n){return tu&21?(Vs(n,e)||(n=Y_(),Mn.lanes|=n,nu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ci=!0),t.memoizedState=n)}function rk(t,e){var n=ln;ln=n!==0&&4>n?n:4,t(!0);var r=J0.transition;J0.transition={};try{t(!1),e()}finally{ln=n,J0.transition=r}}function W6(){return ws().memoizedState}function ik(t,e,n){var r=Ga(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},G6(t))K6(e,n);else if(n=C6(t,e,n,r),n!==null){var i=di();Os(n,t,r,i),Q6(n,e,r)}}function sk(t,e,n){var r=Ga(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(G6(t))K6(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Vs(a,o)){var l=e.interleaved;l===null?(i.next=i,Py(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=C6(t,e,i,r),n!==null&&(i=di(),Os(n,t,r,i),Q6(n,e,r))}}function G6(t){var e=t.alternate;return t===Mn||e!==null&&e===Mn}function K6(t,e){jh=Qp=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Q6(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,my(t,n)}}var Yp={readContext:vs,useCallback:Wr,useContext:Wr,useEffect:Wr,useImperativeHandle:Wr,useInsertionEffect:Wr,useLayoutEffect:Wr,useMemo:Wr,useReducer:Wr,useRef:Wr,useState:Wr,useDebugValue:Wr,useDeferredValue:Wr,useTransition:Wr,useMutableSource:Wr,useSyncExternalStore:Wr,useId:Wr,unstable_isNewReconciler:!1},ok={readContext:vs,useCallback:function(t,e){return co().memoizedState=[t,e===void 0?null:e],t},useContext:vs,useEffect:Yw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fp(4194308,4,U6.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fp(4194308,4,t,e)},useInsertionEffect:function(t,e){return fp(4,2,t,e)},useMemo:function(t,e){var n=co();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=co();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ik.bind(null,Mn,t),[r.memoizedState,t]},useRef:function(t){var e=co();return t={current:t},e.memoizedState=t},useState:Qw,useDebugValue:Oy,useDeferredValue:function(t){return co().memoizedState=t},useTransition:function(){var t=Qw(!1),e=t[0];return t=rk.bind(null,t[1]),co().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Mn,i=co();if(Pn){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=e(),Tr===null)throw Error(Fe(349));tu&30||R6(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Yw(D6.bind(null,r,s,t),[t]),r.flags|=2048,ff(9,j6.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=co(),e=Tr.identifierPrefix;if(Pn){var n=$o,r=qo;n=(r&~(1<<32-Fs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=cf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ak={readContext:vs,useCallback:q6,useContext:vs,useEffect:Fy,useImperativeHandle:z6,useInsertionEffect:V6,useLayoutEffect:B6,useMemo:$6,useReducer:Z0,useRef:O6,useState:function(){return Z0(hf)},useDebugValue:Oy,useDeferredValue:function(t){var e=ws();return H6(e,vr.memoizedState,t)},useTransition:function(){var t=Z0(hf)[0],e=ws().memoizedState;return[t,e]},useMutableSource:I6,useSyncExternalStore:L6,useId:W6,unstable_isNewReconciler:!1},lk={readContext:vs,useCallback:q6,useContext:vs,useEffect:Fy,useImperativeHandle:z6,useInsertionEffect:V6,useLayoutEffect:B6,useMemo:$6,useReducer:eg,useRef:O6,useState:function(){return eg(hf)},useDebugValue:Oy,useDeferredValue:function(t){var e=ws();return vr===null?e.memoizedState=t:H6(e,vr.memoizedState,t)},useTransition:function(){var t=eg(hf)[0],e=ws().memoizedState;return[t,e]},useMutableSource:I6,useSyncExternalStore:L6,useId:W6,unstable_isNewReconciler:!1};function js(t,e){if(t&&t.defaultProps){e=On({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function R1(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:On({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vm={isMounted:function(t){return(t=t._reactInternals)?hu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=di(),i=Ga(t),s=Wo(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ha(t,s,i),e!==null&&(Os(e,t,i,r),cp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=di(),i=Ga(t),s=Wo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ha(t,s,i),e!==null&&(Os(e,t,i,r),cp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=di(),r=Ga(t),i=Wo(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ha(t,i,r),e!==null&&(Os(e,t,r,n),cp(e,t,r))}};function Xw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!rf(n,r)||!rf(i,s):!0}function Y6(t,e,n){var r=!1,i=el,s=e.contextType;return typeof s=="object"&&s!==null?s=vs(s):(i=Ii(e)?Zl:ii.current,r=e.contextTypes,s=(r=r!=null)?fc(t,i):el),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Jw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Vm.enqueueReplaceState(e,e.state,null)}function j1(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},ky(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=vs(s):(s=Ii(e)?Zl:ii.current,i.context=fc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(R1(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vm.enqueueReplaceState(i,i.state,null),Gp(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function gc(t,e){try{var n="",r=e;do n+=MC(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function tg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function D1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var uk=typeof WeakMap=="function"?WeakMap:Map;function X6(t,e,n){n=Wo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Jp||(Jp=!0,H1=r),D1(t,e)},n}function J6(t,e,n){n=Wo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){D1(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){D1(t,e),typeof r!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Zw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new uk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Sk.bind(null,t,e,n),e.then(t,t))}function ex(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function tx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wo(-1,1),e.tag=2,Ha(n,e,1))),n.lanes|=1),t)}var ck=ia.ReactCurrentOwner,Ci=!1;function hi(t,e,n,r){e.child=t===null?T6(e,null,n,r):pc(e,t.child,n,r)}function nx(t,e,n,r,i){n=n.render;var s=e.ref;return nc(e,i),r=Dy(t,e,n,r,s,i),n=My(),t!==null&&!Ci?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xo(t,e,i)):(Pn&&n&&Sy(e),e.flags|=1,hi(t,e,r,i),e.child)}function rx(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Wy(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Z6(t,e,s,r,i)):(t=gp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:rf,n(o,r)&&t.ref===e.ref)return Xo(t,e,i)}return e.flags|=1,t=Ka(s,r),t.ref=e.ref,t.return=e,e.child=t}function Z6(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(rf(s,r)&&t.ref===e.ref)if(Ci=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ci=!0);else return e.lanes=t.lanes,Xo(t,e,i)}return M1(t,e,n,r,i)}function eS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},yn($u,Qi),Qi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,yn($u,Qi),Qi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,yn($u,Qi),Qi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,yn($u,Qi),Qi|=r;return hi(t,e,i,n),e.child}function tS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function M1(t,e,n,r,i){var s=Ii(n)?Zl:ii.current;return s=fc(e,s),nc(e,i),n=Dy(t,e,n,r,s,i),r=My(),t!==null&&!Ci?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xo(t,e,i)):(Pn&&r&&Sy(e),e.flags|=1,hi(t,e,n,i),e.child)}function ix(t,e,n,r,i){if(Ii(n)){var s=!0;zp(e)}else s=!1;if(nc(e,i),e.stateNode===null)dp(t,e),Y6(e,n,r),j1(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=vs(u):(u=Ii(n)?Zl:ii.current,u=fc(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Jw(e,o,r,u),La=!1;var m=e.memoizedState;o.state=m,Gp(e,r,o,i),l=e.memoizedState,a!==r||m!==l||ki.current||La?(typeof c=="function"&&(R1(e,n,c,r),l=e.memoizedState),(a=La||Xw(e,n,a,r,m,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,P6(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:js(e.type,a),o.props=u,d=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=vs(l):(l=Ii(n)?Zl:ii.current,l=fc(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||m!==l)&&Jw(e,o,r,l),La=!1,m=e.memoizedState,o.state=m,Gp(e,r,o,i);var x=e.memoizedState;a!==d||m!==x||ki.current||La?(typeof p=="function"&&(R1(e,n,p,r),x=e.memoizedState),(u=La||Xw(e,n,u,r,m,x,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return F1(t,e,n,r,s,i)}function F1(t,e,n,r,i,s){tS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&qw(e,n,!1),Xo(t,e,s);r=e.stateNode,ck.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=pc(e,t.child,null,s),e.child=pc(e,null,a,s)):hi(t,e,a,s),e.memoizedState=r.state,i&&qw(e,n,!0),e.child}function nS(t){var e=t.stateNode;e.pendingContext?zw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&zw(t,e.context,!1),Iy(t,e.containerInfo)}function sx(t,e,n,r,i){return dc(),Ey(i),e.flags|=256,hi(t,e,n,r),e.child}var O1={dehydrated:null,treeContext:null,retryLane:0};function V1(t){return{baseLanes:t,cachePool:null,transitions:null}}function rS(t,e,n){var r=e.pendingProps,i=jn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),yn(jn,i&1),t===null)return I1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=zm(o,r,0,null),t=Kl(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=V1(n),e.memoizedState=O1,t):Vy(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return hk(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Ka(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ka(a,s):(s=Kl(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?V1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=O1,r}return s=t.child,t=s.sibling,r=Ka(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Vy(t,e){return e=zm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Od(t,e,n,r){return r!==null&&Ey(r),pc(e,t.child,null,n),t=Vy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hk(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=tg(Error(Fe(422))),Od(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=zm({mode:"visible",children:r.children},i,0,null),s=Kl(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&pc(e,t.child,null,o),e.child.memoizedState=V1(o),e.memoizedState=O1,s);if(!(e.mode&1))return Od(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Fe(419)),r=tg(s,r,void 0),Od(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ci||a){if(r=Tr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yo(t,i),Os(r,t,i,-1))}return Hy(),r=tg(Error(Fe(421))),Od(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Ak.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Yi=$a(i.nextSibling),Zi=e,Pn=!0,Ms=null,t!==null&&(ds[ps++]=qo,ds[ps++]=$o,ds[ps++]=eu,qo=t.id,$o=t.overflow,eu=e),e=Vy(e,r.children),e.flags|=4096,e)}function ox(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),L1(t.return,e,n)}function ng(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function iS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(hi(t,e,r.children,n),r=jn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ox(t,n,e);else if(t.tag===19)ox(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(yn(jn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Kp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ng(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Kp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ng(e,!0,n,null,s);break;case"together":ng(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),nu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,n=Ka(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ka(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fk(t,e,n){switch(e.tag){case 3:nS(e),dc();break;case 5:k6(e);break;case 1:Ii(e.type)&&zp(e);break;case 4:Iy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;yn(Hp,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(yn(jn,jn.current&1),e.flags|=128,null):n&e.child.childLanes?rS(t,e,n):(yn(jn,jn.current&1),t=Xo(t,e,n),t!==null?t.sibling:null);yn(jn,jn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return iS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),yn(jn,jn.current),r)break;return null;case 22:case 23:return e.lanes=0,eS(t,e,n)}return Xo(t,e,n)}var sS,B1,oS,aS;sS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};B1=function(){};oS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ql(mo.current);var s=null;switch(n){case"input":i=l1(t,i),r=l1(t,r),s=[];break;case"select":i=On({},i,{value:void 0}),r=On({},r,{value:void 0}),s=[];break;case"textarea":i=h1(t,i),r=h1(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Bp)}d1(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Yh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Yh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&bn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};aS=function(t,e,n,r){n!==r&&(e.flags|=4)};function ph(t,e){if(!Pn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function dk(t,e,n){var r=e.pendingProps;switch(Ay(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gr(e),null;case 1:return Ii(e.type)&&Up(),Gr(e),null;case 3:return r=e.stateNode,mc(),An(ki),An(ii),Ry(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Md(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ms!==null&&(K1(Ms),Ms=null))),B1(t,e),Gr(e),null;case 5:Ly(e);var i=ql(uf.current);if(n=e.type,t!==null&&e.stateNode!=null)oS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Fe(166));return Gr(e),null}if(t=ql(mo.current),Md(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ho]=e,r[af]=s,t=(e.mode&1)!==0,n){case"dialog":bn("cancel",r),bn("close",r);break;case"iframe":case"object":case"embed":bn("load",r);break;case"video":case"audio":for(i=0;i<Sh.length;i++)bn(Sh[i],r);break;case"source":bn("error",r);break;case"img":case"image":case"link":bn("error",r),bn("load",r);break;case"details":bn("toggle",r);break;case"input":mw(r,s),bn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},bn("invalid",r);break;case"textarea":yw(r,s),bn("invalid",r)}d1(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Dd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Dd(r.textContent,a,t),i=["children",""+a]):Yh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&bn("scroll",r)}switch(n){case"input":Td(r),gw(r,s,!0);break;case"textarea":Td(r),vw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Bp)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=D_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ho]=e,t[af]=r,sS(t,e,!1,!1),e.stateNode=t;e:{switch(o=p1(n,r),n){case"dialog":bn("cancel",t),bn("close",t),i=r;break;case"iframe":case"object":case"embed":bn("load",t),i=r;break;case"video":case"audio":for(i=0;i<Sh.length;i++)bn(Sh[i],t);i=r;break;case"source":bn("error",t),i=r;break;case"img":case"image":case"link":bn("error",t),bn("load",t),i=r;break;case"details":bn("toggle",t),i=r;break;case"input":mw(t,r),i=l1(t,r),bn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=On({},r,{value:void 0}),bn("invalid",t);break;case"textarea":yw(t,r),i=h1(t,r),bn("invalid",t);break;default:i=r}d1(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?O_(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&M_(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Xh(t,l):typeof l=="number"&&Xh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Yh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&bn("scroll",t):l!=null&&uy(t,s,l,o))}switch(n){case"input":Td(t),gw(t,r,!1);break;case"textarea":Td(t),vw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Za(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ju(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ju(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Bp)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gr(e),null;case 6:if(t&&e.stateNode!=null)aS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Fe(166));if(n=ql(uf.current),ql(mo.current),Md(e)){if(r=e.stateNode,n=e.memoizedProps,r[ho]=e,(s=r.nodeValue!==n)&&(t=Zi,t!==null))switch(t.tag){case 3:Dd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Dd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ho]=e,e.stateNode=r}return Gr(e),null;case 13:if(An(jn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pn&&Yi!==null&&e.mode&1&&!(e.flags&128))E6(),dc(),e.flags|=98560,s=!1;else if(s=Md(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[ho]=e}else dc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gr(e),s=!1}else Ms!==null&&(K1(Ms),Ms=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||jn.current&1?wr===0&&(wr=3):Hy())),e.updateQueue!==null&&(e.flags|=4),Gr(e),null);case 4:return mc(),B1(t,e),t===null&&sf(e.stateNode.containerInfo),Gr(e),null;case 10:return Cy(e.type._context),Gr(e),null;case 17:return Ii(e.type)&&Up(),Gr(e),null;case 19:if(An(jn),s=e.memoizedState,s===null)return Gr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ph(s,!1);else{if(wr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Kp(t),o!==null){for(e.flags|=128,ph(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return yn(jn,jn.current&1|2),e.child}t=t.sibling}s.tail!==null&&ir()>yc&&(e.flags|=128,r=!0,ph(s,!1),e.lanes=4194304)}else{if(!r)if(t=Kp(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ph(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Pn)return Gr(e),null}else 2*ir()-s.renderingStartTime>yc&&n!==1073741824&&(e.flags|=128,r=!0,ph(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ir(),e.sibling=null,n=jn.current,yn(jn,r?n&1|2:n&1),e):(Gr(e),null);case 22:case 23:return $y(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qi&1073741824&&(Gr(e),e.subtreeFlags&6&&(e.flags|=8192)):Gr(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function pk(t,e){switch(Ay(e),e.tag){case 1:return Ii(e.type)&&Up(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return mc(),An(ki),An(ii),Ry(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ly(e),null;case 13:if(An(jn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));dc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return An(jn),null;case 4:return mc(),null;case 10:return Cy(e.type._context),null;case 22:case 23:return $y(),null;case 24:return null;default:return null}}var Vd=!1,ei=!1,mk=typeof WeakSet=="function"?WeakSet:Set,He=null;function qu(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Gn(t,e,r)}else n.current=null}function U1(t,e,n){try{n()}catch(r){Gn(t,e,r)}}var ax=!1;function gk(t,e){if(A1=Fp,t=f6(),_y(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,m=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)m=d,d=p;for(;;){if(d===t)break t;if(m===n&&++u===i&&(a=o),m===s&&++c===r&&(l=o),(p=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(E1={focusedElem:t,selectionRange:n},Fp=!1,He=e;He!==null;)if(e=He,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,He=t;else for(;He!==null;){e=He;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,C=x.memoizedState,w=e.stateNode,A=w.getSnapshotBeforeUpdate(e.elementType===e.type?E:js(e.type,E),C);w.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(R){Gn(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,He=t;break}He=e.return}return x=ax,ax=!1,x}function Dh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&U1(e,n,s)}i=i.next}while(i!==r)}}function Bm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function z1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function lS(t){var e=t.alternate;e!==null&&(t.alternate=null,lS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ho],delete e[af],delete e[C1],delete e[JP],delete e[ZP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uS(t){return t.tag===5||t.tag===3||t.tag===4}function lx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function q1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Bp));else if(r!==4&&(t=t.child,t!==null))for(q1(t,e,n),t=t.sibling;t!==null;)q1(t,e,n),t=t.sibling}function $1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($1(t,e,n),t=t.sibling;t!==null;)$1(t,e,n),t=t.sibling}var Rr=null,Ds=!1;function Ta(t,e,n){for(n=n.child;n!==null;)cS(t,e,n),n=n.sibling}function cS(t,e,n){if(po&&typeof po.onCommitFiberUnmount=="function")try{po.onCommitFiberUnmount(Lm,n)}catch{}switch(n.tag){case 5:ei||qu(n,e);case 6:var r=Rr,i=Ds;Rr=null,Ta(t,e,n),Rr=r,Ds=i,Rr!==null&&(Ds?(t=Rr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rr.removeChild(n.stateNode));break;case 18:Rr!==null&&(Ds?(t=Rr,n=n.stateNode,t.nodeType===8?Q0(t.parentNode,n):t.nodeType===1&&Q0(t,n),tf(t)):Q0(Rr,n.stateNode));break;case 4:r=Rr,i=Ds,Rr=n.stateNode.containerInfo,Ds=!0,Ta(t,e,n),Rr=r,Ds=i;break;case 0:case 11:case 14:case 15:if(!ei&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&U1(n,e,o),i=i.next}while(i!==r)}Ta(t,e,n);break;case 1:if(!ei&&(qu(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Gn(n,e,a)}Ta(t,e,n);break;case 21:Ta(t,e,n);break;case 22:n.mode&1?(ei=(r=ei)||n.memoizedState!==null,Ta(t,e,n),ei=r):Ta(t,e,n);break;default:Ta(t,e,n)}}function ux(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mk),e.forEach(function(r){var i=Ek.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Is(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rr=a.stateNode,Ds=!1;break e;case 3:Rr=a.stateNode.containerInfo,Ds=!0;break e;case 4:Rr=a.stateNode.containerInfo,Ds=!0;break e}a=a.return}if(Rr===null)throw Error(Fe(160));cS(s,o,i),Rr=null,Ds=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Gn(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hS(e,t),e=e.sibling}function hS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Is(e,t),ao(t),r&4){try{Dh(3,t,t.return),Bm(3,t)}catch(E){Gn(t,t.return,E)}try{Dh(5,t,t.return)}catch(E){Gn(t,t.return,E)}}break;case 1:Is(e,t),ao(t),r&512&&n!==null&&qu(n,n.return);break;case 5:if(Is(e,t),ao(t),r&512&&n!==null&&qu(n,n.return),t.flags&32){var i=t.stateNode;try{Xh(i,"")}catch(E){Gn(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&R_(i,s),p1(a,o);var u=p1(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?O_(i,d):c==="dangerouslySetInnerHTML"?M_(i,d):c==="children"?Xh(i,d):uy(i,c,d,u)}switch(a){case"input":u1(i,s);break;case"textarea":j_(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?Ju(i,!!s.multiple,p,!1):m!==!!s.multiple&&(s.defaultValue!=null?Ju(i,!!s.multiple,s.defaultValue,!0):Ju(i,!!s.multiple,s.multiple?[]:"",!1))}i[af]=s}catch(E){Gn(t,t.return,E)}}break;case 6:if(Is(e,t),ao(t),r&4){if(t.stateNode===null)throw Error(Fe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(E){Gn(t,t.return,E)}}break;case 3:if(Is(e,t),ao(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{tf(e.containerInfo)}catch(E){Gn(t,t.return,E)}break;case 4:Is(e,t),ao(t);break;case 13:Is(e,t),ao(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(zy=ir())),r&4&&ux(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(ei=(u=ei)||c,Is(e,t),ei=u):Is(e,t),ao(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(He=t,c=t.child;c!==null;){for(d=He=c;He!==null;){switch(m=He,p=m.child,m.tag){case 0:case 11:case 14:case 15:Dh(4,m,m.return);break;case 1:qu(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(E){Gn(r,n,E)}}break;case 5:qu(m,m.return);break;case 22:if(m.memoizedState!==null){hx(d);continue}}p!==null?(p.return=m,He=p):hx(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=F_("display",o))}catch(E){Gn(t,t.return,E)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(E){Gn(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Is(e,t),ao(t),r&4&&ux(t);break;case 21:break;default:Is(e,t),ao(t)}}function ao(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(uS(n)){var r=n;break e}n=n.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Xh(i,""),r.flags&=-33);var s=lx(t);$1(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=lx(t);q1(t,a,o);break;default:throw Error(Fe(161))}}catch(l){Gn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yk(t,e,n){He=t,fS(t)}function fS(t,e,n){for(var r=(t.mode&1)!==0;He!==null;){var i=He,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Vd;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ei;a=Vd;var u=ei;if(Vd=o,(ei=l)&&!u)for(He=i;He!==null;)o=He,l=o.child,o.tag===22&&o.memoizedState!==null?fx(i):l!==null?(l.return=o,He=l):fx(i);for(;s!==null;)He=s,fS(s),s=s.sibling;He=i,Vd=a,ei=u}cx(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,He=s):cx(t)}}function cx(t){for(;He!==null;){var e=He;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ei||Bm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ei)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:js(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Kw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Kw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&tf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}ei||e.flags&512&&z1(e)}catch(m){Gn(e,e.return,m)}}if(e===t){He=null;break}if(n=e.sibling,n!==null){n.return=e.return,He=n;break}He=e.return}}function hx(t){for(;He!==null;){var e=He;if(e===t){He=null;break}var n=e.sibling;if(n!==null){n.return=e.return,He=n;break}He=e.return}}function fx(t){for(;He!==null;){var e=He;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bm(4,e)}catch(l){Gn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Gn(e,i,l)}}var s=e.return;try{z1(e)}catch(l){Gn(e,s,l)}break;case 5:var o=e.return;try{z1(e)}catch(l){Gn(e,o,l)}}}catch(l){Gn(e,e.return,l)}if(e===t){He=null;break}var a=e.sibling;if(a!==null){a.return=e.return,He=a;break}He=e.return}}var vk=Math.ceil,Xp=ia.ReactCurrentDispatcher,By=ia.ReactCurrentOwner,gs=ia.ReactCurrentBatchConfig,Gt=0,Tr=null,fr=null,Fr=0,Qi=0,$u=ll(0),wr=0,df=null,nu=0,Um=0,Uy=0,Mh=null,Ni=null,zy=0,yc=1/0,Bo=null,Jp=!1,H1=null,Wa=null,Bd=!1,Ma=null,Zp=0,Fh=0,W1=null,pp=-1,mp=0;function di(){return Gt&6?ir():pp!==-1?pp:pp=ir()}function Ga(t){return t.mode&1?Gt&2&&Fr!==0?Fr&-Fr:tk.transition!==null?(mp===0&&(mp=Y_()),mp):(t=ln,t!==0||(t=window.event,t=t===void 0?16:r6(t.type)),t):1}function Os(t,e,n,r){if(50<Fh)throw Fh=0,W1=null,Error(Fe(185));Mf(t,n,r),(!(Gt&2)||t!==Tr)&&(t===Tr&&(!(Gt&2)&&(Um|=n),wr===4&&ja(t,Fr)),Li(t,r),n===1&&Gt===0&&!(e.mode&1)&&(yc=ir()+500,Fm&&ul()))}function Li(t,e){var n=t.callbackNode;tP(t,e);var r=Mp(t,t===Tr?Fr:0);if(r===0)n!==null&&bw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bw(n),e===1)t.tag===0?ek(dx.bind(null,t)):_6(dx.bind(null,t)),YP(function(){!(Gt&6)&&ul()}),n=null;else{switch(X_(r)){case 1:n=py;break;case 4:n=K_;break;case 16:n=Dp;break;case 536870912:n=Q_;break;default:n=Dp}n=xS(n,dS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dS(t,e){if(pp=-1,mp=0,Gt&6)throw Error(Fe(327));var n=t.callbackNode;if(rc()&&t.callbackNode!==n)return null;var r=Mp(t,t===Tr?Fr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=em(t,r);else{e=r;var i=Gt;Gt|=2;var s=mS();(Tr!==t||Fr!==e)&&(Bo=null,yc=ir()+500,Gl(t,e));do try{bk();break}catch(a){pS(t,a)}while(!0);Ty(),Xp.current=s,Gt=i,fr!==null?e=0:(Tr=null,Fr=0,e=wr)}if(e!==0){if(e===2&&(i=w1(t),i!==0&&(r=i,e=G1(t,i))),e===1)throw n=df,Gl(t,0),ja(t,r),Li(t,ir()),n;if(e===6)ja(t,r);else{if(i=t.current.alternate,!(r&30)&&!wk(i)&&(e=em(t,r),e===2&&(s=w1(t),s!==0&&(r=s,e=G1(t,s))),e===1))throw n=df,Gl(t,0),ja(t,r),Li(t,ir()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Fe(345));case 2:Ml(t,Ni,Bo);break;case 3:if(ja(t,r),(r&130023424)===r&&(e=zy+500-ir(),10<e)){if(Mp(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){di(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=T1(Ml.bind(null,t,Ni,Bo),e);break}Ml(t,Ni,Bo);break;case 4:if(ja(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Fs(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ir()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vk(r/1960))-r,10<r){t.timeoutHandle=T1(Ml.bind(null,t,Ni,Bo),r);break}Ml(t,Ni,Bo);break;case 5:Ml(t,Ni,Bo);break;default:throw Error(Fe(329))}}}return Li(t,ir()),t.callbackNode===n?dS.bind(null,t):null}function G1(t,e){var n=Mh;return t.current.memoizedState.isDehydrated&&(Gl(t,e).flags|=256),t=em(t,e),t!==2&&(e=Ni,Ni=n,e!==null&&K1(e)),t}function K1(t){Ni===null?Ni=t:Ni.push.apply(Ni,t)}function wk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Vs(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ja(t,e){for(e&=~Uy,e&=~Um,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fs(e),r=1<<n;t[n]=-1,e&=~r}}function dx(t){if(Gt&6)throw Error(Fe(327));rc();var e=Mp(t,0);if(!(e&1))return Li(t,ir()),null;var n=em(t,e);if(t.tag!==0&&n===2){var r=w1(t);r!==0&&(e=r,n=G1(t,r))}if(n===1)throw n=df,Gl(t,0),ja(t,e),Li(t,ir()),n;if(n===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ml(t,Ni,Bo),Li(t,ir()),null}function qy(t,e){var n=Gt;Gt|=1;try{return t(e)}finally{Gt=n,Gt===0&&(yc=ir()+500,Fm&&ul())}}function ru(t){Ma!==null&&Ma.tag===0&&!(Gt&6)&&rc();var e=Gt;Gt|=1;var n=gs.transition,r=ln;try{if(gs.transition=null,ln=1,t)return t()}finally{ln=r,gs.transition=n,Gt=e,!(Gt&6)&&ul()}}function $y(){Qi=$u.current,An($u)}function Gl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QP(n)),fr!==null)for(n=fr.return;n!==null;){var r=n;switch(Ay(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Up();break;case 3:mc(),An(ki),An(ii),Ry();break;case 5:Ly(r);break;case 4:mc();break;case 13:An(jn);break;case 19:An(jn);break;case 10:Cy(r.type._context);break;case 22:case 23:$y()}n=n.return}if(Tr=t,fr=t=Ka(t.current,null),Fr=Qi=e,wr=0,df=null,Uy=Um=nu=0,Ni=Mh=null,zl!==null){for(e=0;e<zl.length;e++)if(n=zl[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}zl=null}return t}function pS(t,e){do{var n=fr;try{if(Ty(),hp.current=Yp,Qp){for(var r=Mn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Qp=!1}if(tu=0,Er=vr=Mn=null,jh=!1,cf=0,By.current=null,n===null||n.return===null){wr=1,df=e,fr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Fr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var m=c.alternate;m?(c.updateQueue=m.updateQueue,c.memoizedState=m.memoizedState,c.lanes=m.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=ex(o);if(p!==null){p.flags&=-257,tx(p,o,a,s,e),p.mode&1&&Zw(s,u,e),e=p,l=u;var x=e.updateQueue;if(x===null){var E=new Set;E.add(l),e.updateQueue=E}else x.add(l);break e}else{if(!(e&1)){Zw(s,u,e),Hy();break e}l=Error(Fe(426))}}else if(Pn&&a.mode&1){var C=ex(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),tx(C,o,a,s,e),Ey(gc(l,a));break e}}s=l=gc(l,a),wr!==4&&(wr=2),Mh===null?Mh=[s]:Mh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=X6(s,l,e);Gw(s,w);break e;case 1:a=l;var A=s.type,N=s.stateNode;if(!(s.flags&128)&&(typeof A.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Wa===null||!Wa.has(N)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=J6(s,a,e);Gw(s,R);break e}}s=s.return}while(s!==null)}yS(n)}catch(z){e=z,fr===n&&n!==null&&(fr=n=n.return);continue}break}while(!0)}function mS(){var t=Xp.current;return Xp.current=Yp,t===null?Yp:t}function Hy(){(wr===0||wr===3||wr===2)&&(wr=4),Tr===null||!(nu&268435455)&&!(Um&268435455)||ja(Tr,Fr)}function em(t,e){var n=Gt;Gt|=2;var r=mS();(Tr!==t||Fr!==e)&&(Bo=null,Gl(t,e));do try{xk();break}catch(i){pS(t,i)}while(!0);if(Ty(),Gt=n,Xp.current=r,fr!==null)throw Error(Fe(261));return Tr=null,Fr=0,wr}function xk(){for(;fr!==null;)gS(fr)}function bk(){for(;fr!==null&&!WC();)gS(fr)}function gS(t){var e=wS(t.alternate,t,Qi);t.memoizedProps=t.pendingProps,e===null?yS(t):fr=e,By.current=null}function yS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pk(n,e),n!==null){n.flags&=32767,fr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wr=6,fr=null;return}}else if(n=dk(n,e,Qi),n!==null){fr=n;return}if(e=e.sibling,e!==null){fr=e;return}fr=e=t}while(e!==null);wr===0&&(wr=5)}function Ml(t,e,n){var r=ln,i=gs.transition;try{gs.transition=null,ln=1,_k(t,e,n,r)}finally{gs.transition=i,ln=r}return null}function _k(t,e,n,r){do rc();while(Ma!==null);if(Gt&6)throw Error(Fe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(nP(t,s),t===Tr&&(fr=Tr=null,Fr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bd||(Bd=!0,xS(Dp,function(){return rc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gs.transition,gs.transition=null;var o=ln;ln=1;var a=Gt;Gt|=4,By.current=null,gk(t,n),hS(n,t),zP(E1),Fp=!!A1,E1=A1=null,t.current=n,yk(n),GC(),Gt=a,ln=o,gs.transition=s}else t.current=n;if(Bd&&(Bd=!1,Ma=t,Zp=i),s=t.pendingLanes,s===0&&(Wa=null),YC(n.stateNode),Li(t,ir()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Jp)throw Jp=!1,t=H1,H1=null,t;return Zp&1&&t.tag!==0&&rc(),s=t.pendingLanes,s&1?t===W1?Fh++:(Fh=0,W1=t):Fh=0,ul(),null}function rc(){if(Ma!==null){var t=X_(Zp),e=gs.transition,n=ln;try{if(gs.transition=null,ln=16>t?16:t,Ma===null)var r=!1;else{if(t=Ma,Ma=null,Zp=0,Gt&6)throw Error(Fe(331));var i=Gt;for(Gt|=4,He=t.current;He!==null;){var s=He,o=s.child;if(He.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(He=u;He!==null;){var c=He;switch(c.tag){case 0:case 11:case 15:Dh(8,c,s)}var d=c.child;if(d!==null)d.return=c,He=d;else for(;He!==null;){c=He;var m=c.sibling,p=c.return;if(lS(c),c===u){He=null;break}if(m!==null){m.return=p,He=m;break}He=p}}}var x=s.alternate;if(x!==null){var E=x.child;if(E!==null){x.child=null;do{var C=E.sibling;E.sibling=null,E=C}while(E!==null)}}He=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,He=o;else e:for(;He!==null;){if(s=He,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Dh(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,He=w;break e}He=s.return}}var A=t.current;for(He=A;He!==null;){o=He;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,He=N;else e:for(o=A;He!==null;){if(a=He,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bm(9,a)}}catch(z){Gn(a,a.return,z)}if(a===o){He=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,He=R;break e}He=a.return}}if(Gt=i,ul(),po&&typeof po.onPostCommitFiberRoot=="function")try{po.onPostCommitFiberRoot(Lm,t)}catch{}r=!0}return r}finally{ln=n,gs.transition=e}}return!1}function px(t,e,n){e=gc(n,e),e=X6(t,e,1),t=Ha(t,e,1),e=di(),t!==null&&(Mf(t,1,e),Li(t,e))}function Gn(t,e,n){if(t.tag===3)px(t,t,n);else for(;e!==null;){if(e.tag===3){px(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Wa===null||!Wa.has(r))){t=gc(n,t),t=J6(e,t,1),e=Ha(e,t,1),t=di(),e!==null&&(Mf(e,1,t),Li(e,t));break}}e=e.return}}function Sk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=di(),t.pingedLanes|=t.suspendedLanes&n,Tr===t&&(Fr&n)===n&&(wr===4||wr===3&&(Fr&130023424)===Fr&&500>ir()-zy?Gl(t,0):Uy|=n),Li(t,e)}function vS(t,e){e===0&&(t.mode&1?(e=kd,kd<<=1,!(kd&130023424)&&(kd=4194304)):e=1);var n=di();t=Yo(t,e),t!==null&&(Mf(t,e,n),Li(t,n))}function Ak(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),vS(t,n)}function Ek(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(e),vS(t,n)}var wS;wS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ki.current)Ci=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ci=!1,fk(t,e,n);Ci=!!(t.flags&131072)}else Ci=!1,Pn&&e.flags&1048576&&S6(e,$p,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dp(t,e),t=e.pendingProps;var i=fc(e,ii.current);nc(e,n),i=Dy(null,e,r,t,i,n);var s=My();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ii(r)?(s=!0,zp(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ky(e),i.updater=Vm,e.stateNode=i,i._reactInternals=e,j1(e,r,t,n),e=F1(null,e,r,!0,s,n)):(e.tag=0,Pn&&s&&Sy(e),hi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Tk(r),t=js(r,t),i){case 0:e=M1(null,e,r,t,n);break e;case 1:e=ix(null,e,r,t,n);break e;case 11:e=nx(null,e,r,t,n);break e;case 14:e=rx(null,e,r,js(r.type,t),n);break e}throw Error(Fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:js(r,i),M1(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:js(r,i),ix(t,e,r,i,n);case 3:e:{if(nS(e),t===null)throw Error(Fe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,P6(t,e),Gp(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=gc(Error(Fe(423)),e),e=sx(t,e,r,n,i);break e}else if(r!==i){i=gc(Error(Fe(424)),e),e=sx(t,e,r,n,i);break e}else for(Yi=$a(e.stateNode.containerInfo.firstChild),Zi=e,Pn=!0,Ms=null,n=T6(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(dc(),r===i){e=Xo(t,e,n);break e}hi(t,e,r,n)}e=e.child}return e;case 5:return k6(e),t===null&&I1(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,N1(r,i)?o=null:s!==null&&N1(r,s)&&(e.flags|=32),tS(t,e),hi(t,e,o,n),e.child;case 6:return t===null&&I1(e),null;case 13:return rS(t,e,n);case 4:return Iy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pc(e,null,r,n):hi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:js(r,i),nx(t,e,r,i,n);case 7:return hi(t,e,e.pendingProps,n),e.child;case 8:return hi(t,e,e.pendingProps.children,n),e.child;case 12:return hi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,yn(Hp,r._currentValue),r._currentValue=o,s!==null)if(Vs(s.value,o)){if(s.children===i.children&&!ki.current){e=Xo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Wo(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),L1(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),L1(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}hi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,nc(e,n),i=vs(i),r=r(i),e.flags|=1,hi(t,e,r,n),e.child;case 14:return r=e.type,i=js(r,e.pendingProps),i=js(r.type,i),rx(t,e,r,i,n);case 15:return Z6(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:js(r,i),dp(t,e),e.tag=1,Ii(r)?(t=!0,zp(e)):t=!1,nc(e,n),Y6(e,r,i),j1(e,r,i,n),F1(null,e,r,!0,t,n);case 19:return iS(t,e,n);case 22:return eS(t,e,n)}throw Error(Fe(156,e.tag))};function xS(t,e){return G_(t,e)}function Nk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ms(t,e,n,r){return new Nk(t,e,n,r)}function Wy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Tk(t){if(typeof t=="function")return Wy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===hy)return 11;if(t===fy)return 14}return 2}function Ka(t,e){var n=t.alternate;return n===null?(n=ms(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gp(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Wy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ju:return Kl(n.children,i,s,e);case cy:o=8,i|=8;break;case i1:return t=ms(12,n,e,i|2),t.elementType=i1,t.lanes=s,t;case s1:return t=ms(13,n,e,i),t.elementType=s1,t.lanes=s,t;case o1:return t=ms(19,n,e,i),t.elementType=o1,t.lanes=s,t;case k_:return zm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C_:o=10;break e;case P_:o=9;break e;case hy:o=11;break e;case fy:o=14;break e;case Ia:o=16,r=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=ms(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Kl(t,e,n,r){return t=ms(7,t,r,e),t.lanes=n,t}function zm(t,e,n,r){return t=ms(22,t,r,e),t.elementType=k_,t.lanes=n,t.stateNode={isHidden:!1},t}function rg(t,e,n){return t=ms(6,t,null,e),t.lanes=n,t}function ig(t,e,n){return e=ms(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ck(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=O0(0),this.expirationTimes=O0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=O0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Gy(t,e,n,r,i,s,o,a,l){return t=new Ck(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ms(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ky(s),t}function Pk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ru,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function bS(t){if(!t)return el;t=t._reactInternals;e:{if(hu(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ii(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var n=t.type;if(Ii(n))return b6(t,n,e)}return e}function _S(t,e,n,r,i,s,o,a,l){return t=Gy(n,r,!0,t,i,s,o,a,l),t.context=bS(null),n=t.current,r=di(),i=Ga(n),s=Wo(r,i),s.callback=e??null,Ha(n,s,i),t.current.lanes=i,Mf(t,i,r),Li(t,r),t}function qm(t,e,n,r){var i=e.current,s=di(),o=Ga(i);return n=bS(n),e.context===null?e.context=n:e.pendingContext=n,e=Wo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ha(i,e,o),t!==null&&(Os(t,i,o,s),cp(t,i,o)),o}function tm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ky(t,e){mx(t,e),(t=t.alternate)&&mx(t,e)}function kk(){return null}var SS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Qy(t){this._internalRoot=t}$m.prototype.render=Qy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));qm(t,e,null,null)};$m.prototype.unmount=Qy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ru(function(){qm(null,t,null,null)}),e[Qo]=null}};function $m(t){this._internalRoot=t}$m.prototype.unstable_scheduleHydration=function(t){if(t){var e=e6();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ra.length&&e!==0&&e<Ra[n].priority;n++);Ra.splice(n,0,t),n===0&&n6(t)}};function Yy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gx(){}function Ik(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=tm(o);s.call(u)}}var o=_S(e,r,t,0,null,!1,!1,"",gx);return t._reactRootContainer=o,t[Qo]=o.current,sf(t.nodeType===8?t.parentNode:t),ru(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=tm(l);a.call(u)}}var l=Gy(t,0,!1,null,null,!1,!1,"",gx);return t._reactRootContainer=l,t[Qo]=l.current,sf(t.nodeType===8?t.parentNode:t),ru(function(){qm(e,l,n,r)}),l}function Wm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=tm(o);a.call(l)}}qm(e,o,t,i)}else o=Ik(n,e,t,i,r);return tm(o)}J_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_h(e.pendingLanes);n!==0&&(my(e,n|1),Li(e,ir()),!(Gt&6)&&(yc=ir()+500,ul()))}break;case 13:ru(function(){var r=Yo(t,1);if(r!==null){var i=di();Os(r,t,1,i)}}),Ky(t,1)}};gy=function(t){if(t.tag===13){var e=Yo(t,134217728);if(e!==null){var n=di();Os(e,t,134217728,n)}Ky(t,134217728)}};Z_=function(t){if(t.tag===13){var e=Ga(t),n=Yo(t,e);if(n!==null){var r=di();Os(n,t,e,r)}Ky(t,e)}};e6=function(){return ln};t6=function(t,e){var n=ln;try{return ln=t,e()}finally{ln=n}};g1=function(t,e,n){switch(e){case"input":if(u1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Mm(r);if(!i)throw Error(Fe(90));L_(r),u1(r,i)}}}break;case"textarea":j_(t,n);break;case"select":e=n.value,e!=null&&Ju(t,!!n.multiple,e,!1)}};U_=qy;z_=ru;var Lk={usingClientEntryPoint:!1,Events:[Of,Ou,Mm,V_,B_,qy]},mh={findFiberByHostInstance:Ul,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rk={bundleType:mh.bundleType,version:mh.version,rendererPackageName:mh.rendererPackageName,rendererConfig:mh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ia.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=H_(t),t===null?null:t.stateNode},findFiberByHostInstance:mh.findFiberByHostInstance||kk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ud=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ud.isDisabled&&Ud.supportsFiber)try{Lm=Ud.inject(Rk),po=Ud}catch{}}ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Lk;ts.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yy(e))throw Error(Fe(200));return Pk(t,e,null,n)};ts.createRoot=function(t,e){if(!Yy(t))throw Error(Fe(299));var n=!1,r="",i=SS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Gy(t,1,!1,null,null,n,!1,r,i),t[Qo]=e.current,sf(t.nodeType===8?t.parentNode:t),new Qy(e)};ts.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=H_(e),t=t===null?null:t.stateNode,t};ts.flushSync=function(t){return ru(t)};ts.hydrate=function(t,e,n){if(!Hm(e))throw Error(Fe(200));return Wm(null,t,e,!0,n)};ts.hydrateRoot=function(t,e,n){if(!Yy(t))throw Error(Fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=SS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=_S(e,null,t,1,n??null,i,!1,s,o),t[Qo]=e.current,sf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new $m(e)};ts.render=function(t,e,n){if(!Hm(e))throw Error(Fe(200));return Wm(null,t,e,!1,n)};ts.unmountComponentAtNode=function(t){if(!Hm(t))throw Error(Fe(40));return t._reactRootContainer?(ru(function(){Wm(null,null,t,!1,function(){t._reactRootContainer=null,t[Qo]=null})}),!0):!1};ts.unstable_batchedUpdates=qy;ts.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hm(n))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return Wm(t,e,n,!1,r)};ts.version="18.3.1-next-f1338f8080-20240426";function AS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(AS)}catch(t){console.error(t)}}AS(),A_.exports=ts;var jk=A_.exports,yx=jk;n1.createRoot=yx.createRoot,n1.hydrateRoot=yx.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pf(){return pf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pf.apply(this,arguments)}var Fa;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fa||(Fa={}));const vx="popstate";function Dk(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Q1("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:nm(i)}return Fk(e,n,null,t)}function Kn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ES(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Mk(){return Math.random().toString(36).substr(2,8)}function wx(t,e){return{usr:t.state,key:t.key,idx:e}}function Q1(t,e,n,r){return n===void 0&&(n=null),pf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ic(e):e,{state:n,key:e&&e.key||r||Mk()})}function nm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ic(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Fk(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Fa.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(pf({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=Fa.Pop;let C=c(),w=C==null?null:C-u;u=C,l&&l({action:a,location:E.location,delta:w})}function m(C,w){a=Fa.Push;let A=Q1(E.location,C,w);u=c()+1;let N=wx(A,u),R=E.createHref(A);try{o.pushState(N,"",R)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;i.location.assign(R)}s&&l&&l({action:a,location:E.location,delta:1})}function p(C,w){a=Fa.Replace;let A=Q1(E.location,C,w);u=c();let N=wx(A,u),R=E.createHref(A);o.replaceState(N,"",R),s&&l&&l({action:a,location:E.location,delta:0})}function x(C){let w=i.location.origin!=="null"?i.location.origin:i.location.href,A=typeof C=="string"?C:nm(C);return A=A.replace(/ $/,"%20"),Kn(w,"No window.location.(origin|href) available to create URL for href: "+A),new URL(A,w)}let E={get action(){return a},get location(){return t(i,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(vx,d),l=C,()=>{i.removeEventListener(vx,d),l=null}},createHref(C){return e(i,C)},createURL:x,encodeLocation(C){let w=x(C);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:p,go(C){return o.go(C)}};return E}var xx;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xx||(xx={}));function Ok(t,e,n){return n===void 0&&(n="/"),Vk(t,e,n)}function Vk(t,e,n,r){let i=typeof e=="string"?Ic(e):e,s=vc(i.pathname||"/",n);if(s==null)return null;let o=NS(t);Bk(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=Xk(s);a=Qk(o[l],u)}return a}function NS(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Kn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Qa([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(Kn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),NS(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:Gk(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of TS(s.path))i(s,o,l)}),e}function TS(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=TS(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Bk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Kk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Uk=/^:[\w-]+$/,zk=3,qk=2,$k=1,Hk=10,Wk=-2,bx=t=>t==="*";function Gk(t,e){let n=t.split("/"),r=n.length;return n.some(bx)&&(r+=Wk),e&&(r+=qk),n.filter(i=>!bx(i)).reduce((i,s)=>i+(Uk.test(s)?zk:s===""?$k:Hk),r)}function Kk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function Qk(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?e:e.slice(s.length)||"/",d=Y1({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),m=l.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Qa([s,d.pathname]),pathnameBase:t7(Qa([s,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(s=Qa([s,d.pathnameBase]))}return o}function Y1(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Yk(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:m,isOptional:p}=c;if(m==="*"){let E=a[d]||"";o=s.slice(0,s.length-E.length).replace(/(.)\/+$/,"$1")}const x=a[d];return p&&!x?u[m]=void 0:u[m]=(x||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function Yk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ES(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Xk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ES(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function vc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function Jk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ic(t):t;return{pathname:n?n.startsWith("/")?n:Zk(n,e):e,search:n7(r),hash:r7(i)}}function Zk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function sg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function e7(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function CS(t,e){let n=e7(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function PS(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ic(t):(i=pf({},t),Kn(!i.pathname||!i.pathname.includes("?"),sg("?","pathname","search",i)),Kn(!i.pathname||!i.pathname.includes("#"),sg("#","pathname","hash",i)),Kn(!i.search||!i.search.includes("#"),sg("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),d-=1;i.pathname=m.join("/")}a=d>=0?e[d]:"/"}let l=Jk(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Qa=t=>t.join("/").replace(/\/\/+/g,"/"),t7=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),n7=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,r7=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function i7(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kS=["post","put","patch","delete"];new Set(kS);const s7=["get",...kS];new Set(s7);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mf(){return mf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mf.apply(this,arguments)}const Gm=G.createContext(null),IS=G.createContext(null),cl=G.createContext(null),Km=G.createContext(null),fu=G.createContext({outlet:null,matches:[],isDataRoute:!1}),LS=G.createContext(null);function o7(t,e){let{relative:n}=e===void 0?{}:e;Bf()||Kn(!1);let{basename:r,navigator:i}=G.useContext(cl),{hash:s,pathname:o,search:a}=Qm(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Qa([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Bf(){return G.useContext(Km)!=null}function Lc(){return Bf()||Kn(!1),G.useContext(Km).location}function RS(t){G.useContext(cl).static||G.useLayoutEffect(t)}function jS(){let{isDataRoute:t}=G.useContext(fu);return t?w7():a7()}function a7(){Bf()||Kn(!1);let t=G.useContext(Gm),{basename:e,future:n,navigator:r}=G.useContext(cl),{matches:i}=G.useContext(fu),{pathname:s}=Lc(),o=JSON.stringify(CS(i,n.v7_relativeSplatPath)),a=G.useRef(!1);return RS(()=>{a.current=!0}),G.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=PS(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Qa([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,o,s,t])}function Qm(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=G.useContext(cl),{matches:i}=G.useContext(fu),{pathname:s}=Lc(),o=JSON.stringify(CS(i,r.v7_relativeSplatPath));return G.useMemo(()=>PS(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function l7(t,e){return u7(t,e)}function u7(t,e,n,r){Bf()||Kn(!1);let{navigator:i}=G.useContext(cl),{matches:s}=G.useContext(fu),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Lc(),c;if(e){var d;let C=typeof e=="string"?Ic(e):e;l==="/"||(d=C.pathname)!=null&&d.startsWith(l)||Kn(!1),c=C}else c=u;let m=c.pathname||"/",p=m;if(l!=="/"){let C=l.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let x=Ok(t,{pathname:p}),E=p7(x&&x.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:Qa([l,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?l:Qa([l,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r);return e&&E?G.createElement(Km.Provider,{value:{location:mf({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Fa.Pop}},E):E}function c7(){let t=v7(),e=i7(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),n?G.createElement("pre",{style:i},n):null,null)}const h7=G.createElement(c7,null);class f7 extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?G.createElement(fu.Provider,{value:this.props.routeContext},G.createElement(LS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function d7(t){let{routeContext:e,match:n,children:r}=t,i=G.useContext(Gm);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),G.createElement(fu.Provider,{value:e},r)}function p7(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||Kn(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:m,errors:p}=n,x=d.route.loader&&m[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||x){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,m)=>{let p,x=!1,E=null,C=null;n&&(p=a&&d.route.id?a[d.route.id]:void 0,E=d.route.errorElement||h7,l&&(u<0&&m===0?(x7("route-fallback"),x=!0,C=null):u===m&&(x=!0,C=d.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,m+1)),A=()=>{let N;return p?N=E:x?N=C:d.route.Component?N=G.createElement(d.route.Component,null):d.route.element?N=d.route.element:N=c,G.createElement(d7,{match:d,routeContext:{outlet:c,matches:w,isDataRoute:n!=null},children:N})};return n&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?G.createElement(f7,{location:n.location,revalidation:n.revalidation,component:E,error:p,children:A(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):A()},null)}var DS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(DS||{}),MS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(MS||{});function m7(t){let e=G.useContext(Gm);return e||Kn(!1),e}function g7(t){let e=G.useContext(IS);return e||Kn(!1),e}function y7(t){let e=G.useContext(fu);return e||Kn(!1),e}function FS(t){let e=y7(),n=e.matches[e.matches.length-1];return n.route.id||Kn(!1),n.route.id}function v7(){var t;let e=G.useContext(LS),n=g7(),r=FS();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function w7(){let{router:t}=m7(DS.UseNavigateStable),e=FS(MS.UseNavigateStable),n=G.useRef(!1);return RS(()=>{n.current=!0}),G.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,mf({fromRouteId:e},s)))},[t,e])}const _x={};function x7(t,e,n){_x[t]||(_x[t]=!0)}function b7(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ei(t){Kn(!1)}function _7(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Fa.Pop,navigator:s,static:o=!1,future:a}=t;Bf()&&Kn(!1);let l=e.replace(/^\/*/,"/"),u=G.useMemo(()=>({basename:l,navigator:s,static:o,future:mf({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Ic(r));let{pathname:c="/",search:d="",hash:m="",state:p=null,key:x="default"}=r,E=G.useMemo(()=>{let C=vc(c,l);return C==null?null:{location:{pathname:C,search:d,hash:m,state:p,key:x},navigationType:i}},[l,c,d,m,p,x,i]);return E==null?null:G.createElement(cl.Provider,{value:u},G.createElement(Km.Provider,{children:n,value:E}))}function S7(t){let{children:e,location:n}=t;return l7(X1(e),n)}new Promise(()=>{});function X1(t,e){e===void 0&&(e=[]);let n=[];return G.Children.forEach(t,(r,i)=>{if(!G.isValidElement(r))return;let s=[...e,i];if(r.type===G.Fragment){n.push.apply(n,X1(r.props.children,s));return}r.type!==Ei&&Kn(!1),!r.props.index||!r.props.children||Kn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=X1(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rm(){return rm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rm.apply(this,arguments)}function OS(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function A7(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function E7(t,e){return t.button===0&&(!e||e==="_self")&&!A7(t)}const N7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],T7=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],C7="6";try{window.__reactRouterVersion=C7}catch{}const P7=G.createContext({isTransitioning:!1}),k7="startTransition",Sx=SC[k7];function I7(t){let{basename:e,children:n,future:r,window:i}=t,s=G.useRef();s.current==null&&(s.current=Dk({window:i,v5Compat:!0}));let o=s.current,[a,l]=G.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=G.useCallback(d=>{u&&Sx?Sx(()=>l(d)):l(d)},[l,u]);return G.useLayoutEffect(()=>o.listen(c),[o,c]),G.useEffect(()=>b7(r),[r]),G.createElement(_7,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const L7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",R7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xy=G.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,viewTransition:d}=e,m=OS(e,N7),{basename:p}=G.useContext(cl),x,E=!1;if(typeof u=="string"&&R7.test(u)&&(x=u,L7))try{let N=new URL(window.location.href),R=u.startsWith("//")?new URL(N.protocol+u):new URL(u),z=vc(R.pathname,p);R.origin===N.origin&&z!=null?u=z+R.search+R.hash:E=!0}catch{}let C=o7(u,{relative:i}),w=D7(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:d});function A(N){r&&r(N),N.defaultPrevented||w(N)}return G.createElement("a",rm({},m,{href:x||C,onClick:E||s?r:A,ref:n,target:l}))}),Ax=G.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:c}=e,d=OS(e,T7),m=Qm(l,{relative:d.relative}),p=Lc(),x=G.useContext(IS),{navigator:E,basename:C}=G.useContext(cl),w=x!=null&&M7(m)&&u===!0,A=E.encodeLocation?E.encodeLocation(m).pathname:m.pathname,N=p.pathname,R=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;i||(N=N.toLowerCase(),R=R?R.toLowerCase():null,A=A.toLowerCase()),R&&C&&(R=vc(R,C)||R);const z=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let Q=N===A||!o&&N.startsWith(A)&&N.charAt(z)==="/",L=R!=null&&(R===A||!o&&R.startsWith(A)&&R.charAt(A.length)==="/"),T={isActive:Q,isPending:L,isTransitioning:w},k=Q?r:void 0,M;typeof s=="function"?M=s(T):M=[s,Q?"active":null,L?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let S=typeof a=="function"?a(T):a;return G.createElement(Xy,rm({},d,{"aria-current":k,className:M,ref:n,style:S,to:l,viewTransition:u}),typeof c=="function"?c(T):c)});var J1;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(J1||(J1={}));var Ex;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ex||(Ex={}));function j7(t){let e=G.useContext(Gm);return e||Kn(!1),e}function D7(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=jS(),u=Lc(),c=Qm(t,{relative:o});return G.useCallback(d=>{if(E7(d,n)){d.preventDefault();let m=r!==void 0?r:nm(u)===nm(c);l(t,{replace:m,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,r,i,n,t,s,o,a])}function M7(t,e){e===void 0&&(e={});let n=G.useContext(P7);n==null&&Kn(!1);let{basename:r}=j7(J1.useViewTransitionState),i=Qm(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=vc(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=vc(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Y1(i.pathname,o)!=null||Y1(i.pathname,s)!=null}var VS={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Nx=on.createContext&&on.createContext(VS),F7=["attr","size","title"];function O7(t,e){if(t==null)return{};var n=V7(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function V7(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function im(){return im=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},im.apply(this,arguments)}function Tx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tx(Object(n),!0).forEach(function(r){B7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tx(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function B7(t,e,n){return e=U7(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U7(t){var e=z7(t,"string");return typeof e=="symbol"?e:e+""}function z7(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function BS(t){return t&&t.map((e,n)=>on.createElement(e.tag,sm({key:n},e.attr),BS(e.child)))}function vi(t){return e=>on.createElement(q7,im({attr:sm({},t.attr)},e),BS(t.child))}function q7(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=O7(t,F7),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),on.createElement("svg",im({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:sm(sm({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&on.createElement("title",null,s),t.children)};return Nx!==void 0?on.createElement(Nx.Consumer,null,n=>e(n)):e(VS)}function $7(t){return vi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function H7(t){return vi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function W7(t){return vi({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function G7(t){return vi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function K7(t){return vi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function Q7(t){return vi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M288 130.54V112h16c8.84 0 16-7.16 16-16V80c0-8.84-7.16-16-16-16h-96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h16v18.54C115.49 146.11 32 239.18 32 352h448c0-112.82-83.49-205.89-192-221.46zM496 384H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h480c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function Y7(t){return vi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 80v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8zm144 263.88V440c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-24.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V232c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v24.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07z"},child:[]}]})(t)}function X7(t){return vi({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"},child:[]}]})(t)}function J7(t){return vi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function Z7(t){return vi({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M567.938 243.908L462.25 85.374A48.003 48.003 0 0 0 422.311 64H153.689a48 48 0 0 0-39.938 21.374L8.062 243.908A47.994 47.994 0 0 0 0 270.533V400c0 26.51 21.49 48 48 48h480c26.51 0 48-21.49 48-48V270.533a47.994 47.994 0 0 0-8.062-26.625zM162.252 128h251.497l85.333 128H376l-32 64H232l-32-64H76.918l85.334-128z"},child:[]}]})(t)}function eI(t){return vi({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(t)}function tI(t){return vi({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function nI(t){return vi({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(t)}function rI(t){return vi({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function iI(t){return vi({attr:{viewBox:"0 0 416 512"},child:[{tag:"path",attr:{d:"M207.9 15.2c.8 4.7 16.1 94.5 16.1 128.8 0 52.3-27.8 89.6-68.9 104.6L168 486.7c.7 13.7-10.2 25.3-24 25.3H80c-13.7 0-24.7-11.5-24-25.3l12.9-238.1C27.7 233.6 0 196.2 0 144 0 109.6 15.3 19.9 16.1 15.2 19.3-5.1 61.4-5.4 64 16.3v141.2c1.3 3.4 15.1 3.2 16 0 1.4-25.3 7.9-139.2 8-141.8 3.3-20.8 44.7-20.8 47.9 0 .2 2.7 6.6 116.5 8 141.8.9 3.2 14.8 3.4 16 0V16.3c2.6-21.6 44.8-21.4 48-1.1zm119.2 285.7l-15 185.1c-1.2 14 9.9 26 23.9 26h56c13.3 0 24-10.7 24-24V24c0-13.2-10.7-24-24-24-82.5 0-221.4 178.5-64.9 300.9z"},child:[]}]})(t)}const sI=(t,e)=>{G.useEffect(()=>{const n=r=>{t.current&&!t.current.contains(r.target)&&e()};return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[t,e])},oI=[{path:"/",label:"Home",icon:J7},{path:"/menu",label:"Menu",icon:iI},{path:"/billing",label:"Billing",icon:Y7},{path:"/reports",label:"Reports",icon:H7},{path:"/staff",label:"Staff",icon:rI},{path:"/order",label:"Order",icon:G7},{path:"/kitchen",label:"Kitchen",icon:Q7}],aI=()=>{const[t,e]=G.useState(!0),[n,r]=G.useState(!1),i=G.useRef(null);return sI(i,()=>r(!1)),G.useEffect(()=>{const s=localStorage.getItem("sidebarOpen");s!==null&&e(JSON.parse(s))},[]),G.useEffect(()=>{localStorage.setItem("sidebarOpen",JSON.stringify(t))},[t]),y.jsxs("aside",{className:`sticky top-0 h-screen bg-slate-900 text-slate-300 flex flex-col transition-all duration-300 ease-in-out ${t?"w-64":"w-20"}`,children:[y.jsx("button",{onClick:()=>e(!t),"aria-label":t?"Collapse sidebar":"Expand sidebar",className:"absolute -right-3 top-8 z-10 p-1.5 rounded-full bg-slate-800 text-slate-300 hover:bg-amber-500 hover:text-slate-900 transition-colors",children:t?y.jsx(W7,{size:14}):y.jsx($7,{size:14})}),y.jsxs("div",{className:`flex-1 flex flex-col ${t?"overflow-y-auto overflow-x-hidden":"overflow-hidden"}`,children:[y.jsxs("div",{className:"flex items-center h-20 px-6 shrink-0",children:[y.jsx("span",{className:"text-amber-400 text-3xl",children:""}),t&&y.jsxs("div",{className:"ml-4 flex flex-col",children:[y.jsx("span",{className:"text-2xl font-bold tracking-wider text-amber-400 leading-tight",children:"MealIX"}),y.jsx("span",{className:"text-xs text-slate-500 tracking-wider mt-0.5",children:"Developed by Sinan KP"})]})]}),y.jsx("nav",{className:"px-4 space-y-2",children:oI.map(({path:s,label:o,icon:a})=>y.jsxs(Ax,{to:s,className:({isActive:l})=>`relative flex items-center rounded-lg font-medium py-3 px-4 transition-colors group
                ${l?"bg-amber-500 text-slate-900 shadow-lg":"hover:bg-slate-800 hover:text-amber-400"}`,children:[y.jsx(a,{className:"w-6 h-6 shrink-0","aria-hidden":"true"}),t&&y.jsx("span",{className:"ml-4 flex-1 whitespace-nowrap",children:o}),!t&&y.jsx("span",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-4 px-3 py-1.5 bg-slate-800 text-amber-400 text-xs font-medium rounded-md opacity-0 group-hover:opacity-100 whitespace-nowrap shadow-lg transition-opacity pointer-events-none z-20",children:o})]},s))})]}),y.jsxs("div",{className:"px-4 py-4 border-t border-slate-700/50",children:[y.jsxs(Ax,{to:"/settings",className:({isActive:s})=>`relative flex items-center rounded-lg font-medium py-3 px-4 transition-colors group
            ${s?"bg-amber-500 text-slate-900 shadow-lg":"hover:bg-slate-800 hover:text-amber-400"}`,children:[y.jsx(K7,{className:"w-6 h-6 shrink-0","aria-hidden":"true"}),t&&y.jsx("span",{className:"ml-4",children:"Settings"}),!t&&y.jsx("span",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-4 px-3 py-1.5 bg-slate-800 text-amber-400 text-xs font-medium rounded-md opacity-0 group-hover:opacity-100 whitespace-nowrap shadow-lg transition-opacity pointer-events-none z-20",children:"Settings"})]}),y.jsxs("div",{ref:i,className:"relative mt-2",children:[n&&y.jsxs("div",{className:`absolute bottom-full mb-2 w-56 ${t?"left-0":"left-4"} bg-slate-800 rounded-lg shadow-lg py-2 transition-all duration-300 ease-in-out transform origin-bottom ${n?"scale-100 opacity-100":"scale-95 opacity-0"}`,children:[y.jsxs("div",{className:"px-4 py-3 border-b border-slate-700",children:[y.jsx("p",{className:"font-semibold text-slate-200",children:"Manager"}),y.jsx("p",{className:"text-sm text-slate-400 truncate",children:"manager@restrogrid.com"})]}),y.jsxs("button",{className:"flex w-full items-center px-4 py-2 text-sm text-slate-300 hover:bg-slate-700 hover:text-amber-400",children:[y.jsx(nI,{className:"mr-3"})," Profile"]}),y.jsxs("button",{className:"flex w-full items-center px-4 py-2 text-sm text-red-400 hover:bg-slate-700",children:[y.jsx(tI,{className:"mr-3"})," Logout"]})]}),y.jsxs("div",{className:`mt-2 p-2 flex items-center cursor-pointer rounded-lg hover:bg-slate-800 transition-colors ${!t&&"justify-center"}`,onClick:()=>r(s=>!s),children:[y.jsx("img",{src:"https://i.pravatar.cc/48",alt:"profile",className:"w-10 h-10 rounded-full border-2 border-amber-400"}),t&&y.jsxs("div",{className:"ml-3",children:[y.jsx("p",{className:"font-semibold text-slate-200",children:"Manager"}),y.jsx("p",{className:"text-xs text-slate-400",children:"Admin"})]})]})]})]})]})};var Cx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},lI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},zS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let m=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(m=64)),r.push(n[c],n[d],n[m],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(US(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new uI;const m=s<<2|a>>4;if(r.push(m),u!==64){const p=a<<4&240|u>>2;if(r.push(p),d!==64){const x=u<<6&192|d;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cI=function(t){const e=US(t);return zS.encodeByteArray(e,!0)},om=function(t){return cI(t).replace(/\./g,"")},hI=function(t){try{return zS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=()=>fI().__FIREBASE_DEFAULTS__,pI=()=>{if(typeof process>"u"||typeof Cx>"u")return;const t=Cx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hI(t[1]);return e&&JSON.parse(e)},Jy=()=>{try{return dI()||pI()||mI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gI=t=>{var e,n;return(n=(e=Jy())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yI=t=>{const e=gI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qS=()=>{var t;return(t=Jy())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[om(JSON.stringify(n)),om(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bI(){var t;const e=(t=Jy())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _I(){return!bI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function SI(){try{return typeof indexedDB=="object"}catch{return!1}}function AI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="FirebaseError";class Rc extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=EI,Object.setPrototypeOf(this,Rc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$S.prototype.create)}}class $S{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?NI(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Rc(i,a,r)}}function NI(t,e){return t.replace(TI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const TI=/\{\$([^}]+)}/g;function Z1(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Px(s)&&Px(o)){if(!Z1(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Px(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(t){return t&&t._delegate?t._delegate:t}class gf{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new vI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kI(e))try{this.getOrInitializeService({instanceIdentifier:Fl})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Fl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fl){return this.instances.has(e)}getOptions(e=Fl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fl){return this.component?this.component.multipleInstances?e:Fl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PI(t){return t===Fl?void 0:t}function kI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new CI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Wt||(Wt={}));const LI={debug:Wt.DEBUG,verbose:Wt.VERBOSE,info:Wt.INFO,warn:Wt.WARN,error:Wt.ERROR,silent:Wt.SILENT},RI=Wt.INFO,jI={[Wt.DEBUG]:"log",[Wt.VERBOSE]:"log",[Wt.INFO]:"info",[Wt.WARN]:"warn",[Wt.ERROR]:"error"},DI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=jI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class HS{constructor(e){this.name=e,this._logLevel=RI,this._logHandler=DI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Wt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Wt.DEBUG,...e),this._logHandler(this,Wt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Wt.VERBOSE,...e),this._logHandler(this,Wt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Wt.INFO,...e),this._logHandler(this,Wt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Wt.WARN,...e),this._logHandler(this,Wt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Wt.ERROR,...e),this._logHandler(this,Wt.ERROR,...e)}}const MI=(t,e)=>e.some(n=>t instanceof n);let kx,Ix;function FI(){return kx||(kx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OI(){return Ix||(Ix=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WS=new WeakMap,e2=new WeakMap,GS=new WeakMap,og=new WeakMap,Zy=new WeakMap;function VI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ya(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&WS.set(n,t)}).catch(()=>{}),Zy.set(e,t),e}function BI(t){if(e2.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});e2.set(t,e)}let t2={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return e2.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ya(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UI(t){t2=t(t2)}function zI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ag(this),e,...n);return GS.set(r,e.sort?e.sort():[e]),Ya(r)}:OI().includes(t)?function(...e){return t.apply(ag(this),e),Ya(WS.get(this))}:function(...e){return Ya(t.apply(ag(this),e))}}function qI(t){return typeof t=="function"?zI(t):(t instanceof IDBTransaction&&BI(t),MI(t,FI())?new Proxy(t,t2):t)}function Ya(t){if(t instanceof IDBRequest)return VI(t);if(og.has(t))return og.get(t);const e=qI(t);return e!==t&&(og.set(t,e),Zy.set(e,t)),e}const ag=t=>Zy.get(t);function $I(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ya(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ya(o.result),l.oldVersion,l.newVersion,Ya(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const HI=["get","getKey","getAll","getAllKeys","count"],WI=["put","add","delete","clear"],lg=new Map;function Lx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lg.get(e))return lg.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=WI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||HI.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return lg.set(e,s),s}UI(t=>({...t,get:(e,n,r)=>Lx(e,n)||t.get(e,n,r),has:(e,n)=>!!Lx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const n2="@firebase/app",Rx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new HS("@firebase/app"),QI="@firebase/app-compat",YI="@firebase/analytics-compat",XI="@firebase/analytics",JI="@firebase/app-check-compat",ZI="@firebase/app-check",eL="@firebase/auth",tL="@firebase/auth-compat",nL="@firebase/database",rL="@firebase/data-connect",iL="@firebase/database-compat",sL="@firebase/functions",oL="@firebase/functions-compat",aL="@firebase/installations",lL="@firebase/installations-compat",uL="@firebase/messaging",cL="@firebase/messaging-compat",hL="@firebase/performance",fL="@firebase/performance-compat",dL="@firebase/remote-config",pL="@firebase/remote-config-compat",mL="@firebase/storage",gL="@firebase/storage-compat",yL="@firebase/firestore",vL="@firebase/vertexai-preview",wL="@firebase/firestore-compat",xL="firebase",bL="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="[DEFAULT]",_L={[n2]:"fire-core",[QI]:"fire-core-compat",[XI]:"fire-analytics",[YI]:"fire-analytics-compat",[ZI]:"fire-app-check",[JI]:"fire-app-check-compat",[eL]:"fire-auth",[tL]:"fire-auth-compat",[nL]:"fire-rtdb",[rL]:"fire-data-connect",[iL]:"fire-rtdb-compat",[sL]:"fire-fn",[oL]:"fire-fn-compat",[aL]:"fire-iid",[lL]:"fire-iid-compat",[uL]:"fire-fcm",[cL]:"fire-fcm-compat",[hL]:"fire-perf",[fL]:"fire-perf-compat",[dL]:"fire-rc",[pL]:"fire-rc-compat",[mL]:"fire-gcs",[gL]:"fire-gcs-compat",[yL]:"fire-fst",[wL]:"fire-fst-compat",[vL]:"fire-vertex","fire-js":"fire-js",[xL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const am=new Map,SL=new Map,i2=new Map;function jx(t,e){try{t.container.addComponent(e)}catch(n){Jo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lm(t){const e=t.name;if(i2.has(e))return Jo.debug(`There were multiple attempts to register component ${e}.`),!1;i2.set(e,t);for(const n of am.values())jx(n,t);for(const n of SL.values())jx(n,t);return!0}function AL(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xa=new $S("app","Firebase",EL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=bL;function KS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:r2,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xa.create("bad-app-name",{appName:String(i)});if(n||(n=qS()),!n)throw Xa.create("no-options");const s=am.get(i);if(s){if(Z1(n,s.options)&&Z1(r,s.config))return s;throw Xa.create("duplicate-app",{appName:i})}const o=new II(i);for(const l of i2.values())o.addComponent(l);const a=new NL(n,r,o);return am.set(i,a),a}function CL(t=r2){const e=am.get(t);if(!e&&t===r2&&qS())return KS();if(!e)throw Xa.create("no-app",{appName:t});return e}function ic(t,e,n){var r;let i=(r=_L[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Jo.warn(a.join(" "));return}lm(new gf(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL="firebase-heartbeat-database",kL=1,yf="firebase-heartbeat-store";let ug=null;function QS(){return ug||(ug=$I(PL,kL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yf)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xa.create("idb-open",{originalErrorMessage:t.message})})),ug}async function IL(t){try{const n=(await QS()).transaction(yf),r=await n.objectStore(yf).get(YS(t));return await n.done,r}catch(e){if(e instanceof Rc)Jo.warn(e.message);else{const n=Xa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Jo.warn(n.message)}}}async function Dx(t,e){try{const r=(await QS()).transaction(yf,"readwrite");await r.objectStore(yf).put(e,YS(t)),await r.done}catch(n){if(n instanceof Rc)Jo.warn(n.message);else{const r=Xa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Jo.warn(r.message)}}}function YS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL=1024,RL=30*24*60*60*1e3;class jL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ML(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Mx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=RL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Jo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Mx(),{heartbeatsToSend:r,unsentEntries:i}=DL(this._heartbeatsCache.heartbeats),s=om(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Jo.warn(n),""}}}function Mx(){return new Date().toISOString().substring(0,10)}function DL(t,e=LL){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Fx(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Fx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ML{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return SI()?AI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Dx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Dx(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Fx(t){return om(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t){lm(new gf("platform-logger",e=>new GI(e),"PRIVATE")),lm(new gf("heartbeat",e=>new jL(e),"PRIVATE")),ic(n2,Rx,t),ic(n2,Rx,"esm2017"),ic("fire-js","")}FL("");var OL="firebase",VL="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ic(OL,VL,"app");var Ox=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ql,XS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(L,T){function k(){}k.prototype=T.prototype,L.D=T.prototype,L.prototype=new k,L.prototype.constructor=L,L.C=function(M,S,P){for(var j=Array(arguments.length-2),B=2;B<arguments.length;B++)j[B-2]=arguments[B];return T.prototype[S].apply(M,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(L,T,k){k||(k=0);var M=Array(16);if(typeof T=="string")for(var S=0;16>S;++S)M[S]=T.charCodeAt(k++)|T.charCodeAt(k++)<<8|T.charCodeAt(k++)<<16|T.charCodeAt(k++)<<24;else for(S=0;16>S;++S)M[S]=T[k++]|T[k++]<<8|T[k++]<<16|T[k++]<<24;T=L.g[0],k=L.g[1],S=L.g[2];var P=L.g[3],j=T+(P^k&(S^P))+M[0]+3614090360&4294967295;T=k+(j<<7&4294967295|j>>>25),j=P+(S^T&(k^S))+M[1]+3905402710&4294967295,P=T+(j<<12&4294967295|j>>>20),j=S+(k^P&(T^k))+M[2]+606105819&4294967295,S=P+(j<<17&4294967295|j>>>15),j=k+(T^S&(P^T))+M[3]+3250441966&4294967295,k=S+(j<<22&4294967295|j>>>10),j=T+(P^k&(S^P))+M[4]+4118548399&4294967295,T=k+(j<<7&4294967295|j>>>25),j=P+(S^T&(k^S))+M[5]+1200080426&4294967295,P=T+(j<<12&4294967295|j>>>20),j=S+(k^P&(T^k))+M[6]+2821735955&4294967295,S=P+(j<<17&4294967295|j>>>15),j=k+(T^S&(P^T))+M[7]+4249261313&4294967295,k=S+(j<<22&4294967295|j>>>10),j=T+(P^k&(S^P))+M[8]+1770035416&4294967295,T=k+(j<<7&4294967295|j>>>25),j=P+(S^T&(k^S))+M[9]+2336552879&4294967295,P=T+(j<<12&4294967295|j>>>20),j=S+(k^P&(T^k))+M[10]+4294925233&4294967295,S=P+(j<<17&4294967295|j>>>15),j=k+(T^S&(P^T))+M[11]+2304563134&4294967295,k=S+(j<<22&4294967295|j>>>10),j=T+(P^k&(S^P))+M[12]+1804603682&4294967295,T=k+(j<<7&4294967295|j>>>25),j=P+(S^T&(k^S))+M[13]+4254626195&4294967295,P=T+(j<<12&4294967295|j>>>20),j=S+(k^P&(T^k))+M[14]+2792965006&4294967295,S=P+(j<<17&4294967295|j>>>15),j=k+(T^S&(P^T))+M[15]+1236535329&4294967295,k=S+(j<<22&4294967295|j>>>10),j=T+(S^P&(k^S))+M[1]+4129170786&4294967295,T=k+(j<<5&4294967295|j>>>27),j=P+(k^S&(T^k))+M[6]+3225465664&4294967295,P=T+(j<<9&4294967295|j>>>23),j=S+(T^k&(P^T))+M[11]+643717713&4294967295,S=P+(j<<14&4294967295|j>>>18),j=k+(P^T&(S^P))+M[0]+3921069994&4294967295,k=S+(j<<20&4294967295|j>>>12),j=T+(S^P&(k^S))+M[5]+3593408605&4294967295,T=k+(j<<5&4294967295|j>>>27),j=P+(k^S&(T^k))+M[10]+38016083&4294967295,P=T+(j<<9&4294967295|j>>>23),j=S+(T^k&(P^T))+M[15]+3634488961&4294967295,S=P+(j<<14&4294967295|j>>>18),j=k+(P^T&(S^P))+M[4]+3889429448&4294967295,k=S+(j<<20&4294967295|j>>>12),j=T+(S^P&(k^S))+M[9]+568446438&4294967295,T=k+(j<<5&4294967295|j>>>27),j=P+(k^S&(T^k))+M[14]+3275163606&4294967295,P=T+(j<<9&4294967295|j>>>23),j=S+(T^k&(P^T))+M[3]+4107603335&4294967295,S=P+(j<<14&4294967295|j>>>18),j=k+(P^T&(S^P))+M[8]+1163531501&4294967295,k=S+(j<<20&4294967295|j>>>12),j=T+(S^P&(k^S))+M[13]+2850285829&4294967295,T=k+(j<<5&4294967295|j>>>27),j=P+(k^S&(T^k))+M[2]+4243563512&4294967295,P=T+(j<<9&4294967295|j>>>23),j=S+(T^k&(P^T))+M[7]+1735328473&4294967295,S=P+(j<<14&4294967295|j>>>18),j=k+(P^T&(S^P))+M[12]+2368359562&4294967295,k=S+(j<<20&4294967295|j>>>12),j=T+(k^S^P)+M[5]+4294588738&4294967295,T=k+(j<<4&4294967295|j>>>28),j=P+(T^k^S)+M[8]+2272392833&4294967295,P=T+(j<<11&4294967295|j>>>21),j=S+(P^T^k)+M[11]+1839030562&4294967295,S=P+(j<<16&4294967295|j>>>16),j=k+(S^P^T)+M[14]+4259657740&4294967295,k=S+(j<<23&4294967295|j>>>9),j=T+(k^S^P)+M[1]+2763975236&4294967295,T=k+(j<<4&4294967295|j>>>28),j=P+(T^k^S)+M[4]+1272893353&4294967295,P=T+(j<<11&4294967295|j>>>21),j=S+(P^T^k)+M[7]+4139469664&4294967295,S=P+(j<<16&4294967295|j>>>16),j=k+(S^P^T)+M[10]+3200236656&4294967295,k=S+(j<<23&4294967295|j>>>9),j=T+(k^S^P)+M[13]+681279174&4294967295,T=k+(j<<4&4294967295|j>>>28),j=P+(T^k^S)+M[0]+3936430074&4294967295,P=T+(j<<11&4294967295|j>>>21),j=S+(P^T^k)+M[3]+3572445317&4294967295,S=P+(j<<16&4294967295|j>>>16),j=k+(S^P^T)+M[6]+76029189&4294967295,k=S+(j<<23&4294967295|j>>>9),j=T+(k^S^P)+M[9]+3654602809&4294967295,T=k+(j<<4&4294967295|j>>>28),j=P+(T^k^S)+M[12]+3873151461&4294967295,P=T+(j<<11&4294967295|j>>>21),j=S+(P^T^k)+M[15]+530742520&4294967295,S=P+(j<<16&4294967295|j>>>16),j=k+(S^P^T)+M[2]+3299628645&4294967295,k=S+(j<<23&4294967295|j>>>9),j=T+(S^(k|~P))+M[0]+4096336452&4294967295,T=k+(j<<6&4294967295|j>>>26),j=P+(k^(T|~S))+M[7]+1126891415&4294967295,P=T+(j<<10&4294967295|j>>>22),j=S+(T^(P|~k))+M[14]+2878612391&4294967295,S=P+(j<<15&4294967295|j>>>17),j=k+(P^(S|~T))+M[5]+4237533241&4294967295,k=S+(j<<21&4294967295|j>>>11),j=T+(S^(k|~P))+M[12]+1700485571&4294967295,T=k+(j<<6&4294967295|j>>>26),j=P+(k^(T|~S))+M[3]+2399980690&4294967295,P=T+(j<<10&4294967295|j>>>22),j=S+(T^(P|~k))+M[10]+4293915773&4294967295,S=P+(j<<15&4294967295|j>>>17),j=k+(P^(S|~T))+M[1]+2240044497&4294967295,k=S+(j<<21&4294967295|j>>>11),j=T+(S^(k|~P))+M[8]+1873313359&4294967295,T=k+(j<<6&4294967295|j>>>26),j=P+(k^(T|~S))+M[15]+4264355552&4294967295,P=T+(j<<10&4294967295|j>>>22),j=S+(T^(P|~k))+M[6]+2734768916&4294967295,S=P+(j<<15&4294967295|j>>>17),j=k+(P^(S|~T))+M[13]+1309151649&4294967295,k=S+(j<<21&4294967295|j>>>11),j=T+(S^(k|~P))+M[4]+4149444226&4294967295,T=k+(j<<6&4294967295|j>>>26),j=P+(k^(T|~S))+M[11]+3174756917&4294967295,P=T+(j<<10&4294967295|j>>>22),j=S+(T^(P|~k))+M[2]+718787259&4294967295,S=P+(j<<15&4294967295|j>>>17),j=k+(P^(S|~T))+M[9]+3951481745&4294967295,L.g[0]=L.g[0]+T&4294967295,L.g[1]=L.g[1]+(S+(j<<21&4294967295|j>>>11))&4294967295,L.g[2]=L.g[2]+S&4294967295,L.g[3]=L.g[3]+P&4294967295}r.prototype.u=function(L,T){T===void 0&&(T=L.length);for(var k=T-this.blockSize,M=this.B,S=this.h,P=0;P<T;){if(S==0)for(;P<=k;)i(this,L,P),P+=this.blockSize;if(typeof L=="string"){for(;P<T;)if(M[S++]=L.charCodeAt(P++),S==this.blockSize){i(this,M),S=0;break}}else for(;P<T;)if(M[S++]=L[P++],S==this.blockSize){i(this,M),S=0;break}}this.h=S,this.o+=T},r.prototype.v=function(){var L=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);L[0]=128;for(var T=1;T<L.length-8;++T)L[T]=0;var k=8*this.o;for(T=L.length-8;T<L.length;++T)L[T]=k&255,k/=256;for(this.u(L),L=Array(16),T=k=0;4>T;++T)for(var M=0;32>M;M+=8)L[k++]=this.g[T]>>>M&255;return L};function s(L,T){var k=a;return Object.prototype.hasOwnProperty.call(k,L)?k[L]:k[L]=T(L)}function o(L,T){this.h=T;for(var k=[],M=!0,S=L.length-1;0<=S;S--){var P=L[S]|0;M&&P==T||(k[S]=P,M=!1)}this.g=k}var a={};function l(L){return-128<=L&&128>L?s(L,function(T){return new o([T|0],0>T?-1:0)}):new o([L|0],0>L?-1:0)}function u(L){if(isNaN(L)||!isFinite(L))return d;if(0>L)return C(u(-L));for(var T=[],k=1,M=0;L>=k;M++)T[M]=L/k|0,k*=4294967296;return new o(T,0)}function c(L,T){if(L.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(L.charAt(0)=="-")return C(c(L.substring(1),T));if(0<=L.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(T,8)),M=d,S=0;S<L.length;S+=8){var P=Math.min(8,L.length-S),j=parseInt(L.substring(S,S+P),T);8>P?(P=u(Math.pow(T,P)),M=M.j(P).add(u(j))):(M=M.j(k),M=M.add(u(j)))}return M}var d=l(0),m=l(1),p=l(16777216);t=o.prototype,t.m=function(){if(E(this))return-C(this).m();for(var L=0,T=1,k=0;k<this.g.length;k++){var M=this.i(k);L+=(0<=M?M:4294967296+M)*T,T*=4294967296}return L},t.toString=function(L){if(L=L||10,2>L||36<L)throw Error("radix out of range: "+L);if(x(this))return"0";if(E(this))return"-"+C(this).toString(L);for(var T=u(Math.pow(L,6)),k=this,M="";;){var S=R(k,T).g;k=w(k,S.j(T));var P=((0<k.g.length?k.g[0]:k.h)>>>0).toString(L);if(k=S,x(k))return P+M;for(;6>P.length;)P="0"+P;M=P+M}},t.i=function(L){return 0>L?0:L<this.g.length?this.g[L]:this.h};function x(L){if(L.h!=0)return!1;for(var T=0;T<L.g.length;T++)if(L.g[T]!=0)return!1;return!0}function E(L){return L.h==-1}t.l=function(L){return L=w(this,L),E(L)?-1:x(L)?0:1};function C(L){for(var T=L.g.length,k=[],M=0;M<T;M++)k[M]=~L.g[M];return new o(k,~L.h).add(m)}t.abs=function(){return E(this)?C(this):this},t.add=function(L){for(var T=Math.max(this.g.length,L.g.length),k=[],M=0,S=0;S<=T;S++){var P=M+(this.i(S)&65535)+(L.i(S)&65535),j=(P>>>16)+(this.i(S)>>>16)+(L.i(S)>>>16);M=j>>>16,P&=65535,j&=65535,k[S]=j<<16|P}return new o(k,k[k.length-1]&-2147483648?-1:0)};function w(L,T){return L.add(C(T))}t.j=function(L){if(x(this)||x(L))return d;if(E(this))return E(L)?C(this).j(C(L)):C(C(this).j(L));if(E(L))return C(this.j(C(L)));if(0>this.l(p)&&0>L.l(p))return u(this.m()*L.m());for(var T=this.g.length+L.g.length,k=[],M=0;M<2*T;M++)k[M]=0;for(M=0;M<this.g.length;M++)for(var S=0;S<L.g.length;S++){var P=this.i(M)>>>16,j=this.i(M)&65535,B=L.i(S)>>>16,X=L.i(S)&65535;k[2*M+2*S]+=j*X,A(k,2*M+2*S),k[2*M+2*S+1]+=P*X,A(k,2*M+2*S+1),k[2*M+2*S+1]+=j*B,A(k,2*M+2*S+1),k[2*M+2*S+2]+=P*B,A(k,2*M+2*S+2)}for(M=0;M<T;M++)k[M]=k[2*M+1]<<16|k[2*M];for(M=T;M<2*T;M++)k[M]=0;return new o(k,0)};function A(L,T){for(;(L[T]&65535)!=L[T];)L[T+1]+=L[T]>>>16,L[T]&=65535,T++}function N(L,T){this.g=L,this.h=T}function R(L,T){if(x(T))throw Error("division by zero");if(x(L))return new N(d,d);if(E(L))return T=R(C(L),T),new N(C(T.g),C(T.h));if(E(T))return T=R(L,C(T)),new N(C(T.g),T.h);if(30<L.g.length){if(E(L)||E(T))throw Error("slowDivide_ only works with positive integers.");for(var k=m,M=T;0>=M.l(L);)k=z(k),M=z(M);var S=Q(k,1),P=Q(M,1);for(M=Q(M,2),k=Q(k,2);!x(M);){var j=P.add(M);0>=j.l(L)&&(S=S.add(k),P=j),M=Q(M,1),k=Q(k,1)}return T=w(L,S.j(T)),new N(S,T)}for(S=d;0<=L.l(T);){for(k=Math.max(1,Math.floor(L.m()/T.m())),M=Math.ceil(Math.log(k)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),P=u(k),j=P.j(T);E(j)||0<j.l(L);)k-=M,P=u(k),j=P.j(T);x(P)&&(P=m),S=S.add(P),L=w(L,j)}return new N(S,L)}t.A=function(L){return R(this,L).h},t.and=function(L){for(var T=Math.max(this.g.length,L.g.length),k=[],M=0;M<T;M++)k[M]=this.i(M)&L.i(M);return new o(k,this.h&L.h)},t.or=function(L){for(var T=Math.max(this.g.length,L.g.length),k=[],M=0;M<T;M++)k[M]=this.i(M)|L.i(M);return new o(k,this.h|L.h)},t.xor=function(L){for(var T=Math.max(this.g.length,L.g.length),k=[],M=0;M<T;M++)k[M]=this.i(M)^L.i(M);return new o(k,this.h^L.h)};function z(L){for(var T=L.g.length+1,k=[],M=0;M<T;M++)k[M]=L.i(M)<<1|L.i(M-1)>>>31;return new o(k,L.h)}function Q(L,T){var k=T>>5;T%=32;for(var M=L.g.length-k,S=[],P=0;P<M;P++)S[P]=0<T?L.i(P+k)>>>T|L.i(P+k+1)<<32-T:L.i(P+k);return new o(S,L.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,XS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,Ql=o}).apply(typeof Ox<"u"?Ox:typeof self<"u"?self:typeof window<"u"?window:{});var zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var JS,Ah,ZS,yp,s2,e8,t8,n8;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,D){return f==Array.prototype||f==Object.prototype||(f[_]=D.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof zd=="object"&&zd];for(var _=0;_<f.length;++_){var D=f[_];if(D&&D.Math==Math)return D}throw Error("Cannot find global object")}var r=n(this);function i(f,_){if(_)e:{var D=r;f=f.split(".");for(var W=0;W<f.length-1;W++){var pe=f[W];if(!(pe in D))break e;D=D[pe]}f=f[f.length-1],W=D[f],_=_(W),_!=W&&_!=null&&e(D,f,{configurable:!0,writable:!0,value:_})}}function s(f,_){f instanceof String&&(f+="");var D=0,W=!1,pe={next:function(){if(!W&&D<f.length){var _e=D++;return{value:_(_e,f[_e]),done:!1}}return W=!0,{done:!0,value:void 0}}};return pe[Symbol.iterator]=function(){return pe},pe}i("Array.prototype.values",function(f){return f||function(){return s(this,function(_,D){return D})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function u(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function c(f,_,D){return f.call.apply(f.bind,arguments)}function d(f,_,D){if(!f)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pe,W),f.apply(_,pe)}}return function(){return f.apply(_,arguments)}}function m(f,_,D){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,m.apply(null,arguments)}function p(f,_){var D=Array.prototype.slice.call(arguments,1);return function(){var W=D.slice();return W.push.apply(W,arguments),f.apply(this,W)}}function x(f,_){function D(){}D.prototype=_.prototype,f.aa=_.prototype,f.prototype=new D,f.prototype.constructor=f,f.Qb=function(W,pe,_e){for(var Oe=Array(arguments.length-2),Vt=2;Vt<arguments.length;Vt++)Oe[Vt-2]=arguments[Vt];return _.prototype[pe].apply(W,Oe)}}function E(f){const _=f.length;if(0<_){const D=Array(_);for(let W=0;W<_;W++)D[W]=f[W];return D}return[]}function C(f,_){for(let D=1;D<arguments.length;D++){const W=arguments[D];if(l(W)){const pe=f.length||0,_e=W.length||0;f.length=pe+_e;for(let Oe=0;Oe<_e;Oe++)f[pe+Oe]=W[Oe]}else f.push(W)}}class w{constructor(_,D){this.i=_,this.j=D,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function A(f){return/^[\s\xa0]*$/.test(f)}function N(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function R(f){return R[" "](f),f}R[" "]=function(){};var z=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function Q(f,_,D){for(const W in f)_.call(D,f[W],W,f)}function L(f,_){for(const D in f)_.call(void 0,f[D],D,f)}function T(f){const _={};for(const D in f)_[D]=f[D];return _}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(f,_){let D,W;for(let pe=1;pe<arguments.length;pe++){W=arguments[pe];for(D in W)f[D]=W[D];for(let _e=0;_e<k.length;_e++)D=k[_e],Object.prototype.hasOwnProperty.call(W,D)&&(f[D]=W[D])}}function S(f){var _=1;f=f.split(":");const D=[];for(;0<_&&f.length;)D.push(f.shift()),_--;return f.length&&D.push(f.join(":")),D}function P(f){a.setTimeout(()=>{throw f},0)}function j(){var f=ae;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class B{constructor(){this.h=this.g=null}add(_,D){const W=X.get();W.set(_,D),this.h?this.h.next=W:this.g=W,this.h=W}}var X=new w(()=>new se,f=>f.reset());class se{constructor(){this.next=this.g=this.h=null}set(_,D){this.h=_,this.g=D,this.next=null}reset(){this.next=this.g=this.h=null}}let re,$=!1,ae=new B,fe=()=>{const f=a.Promise.resolve(void 0);re=()=>{f.then(ve)}};var ve=()=>{for(var f;f=j();){try{f.h.call(f.g)}catch(D){P(D)}var _=X;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}$=!1};function V(){this.s=this.s,this.C=this.C}V.prototype.s=!1,V.prototype.ma=function(){this.s||(this.s=!0,this.N())},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var ie=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const D=()=>{};a.addEventListener("test",D,_),a.removeEventListener("test",D,_)}catch{}return f}();function ne(f,_){if(Y.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var D=this.type=f.type,W=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(z){e:{try{R(_.nodeName);var pe=!0;break e}catch{}pe=!1}pe||(_=null)}}else D=="mouseover"?_=f.fromElement:D=="mouseout"&&(_=f.toElement);this.relatedTarget=_,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:oe[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ne.aa.h.call(this)}}x(ne,Y);var oe={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ue="closure_listenable_"+(1e6*Math.random()|0),we=0;function be(f,_,D,W,pe){this.listener=f,this.proxy=null,this.src=_,this.type=D,this.capture=!!W,this.ha=pe,this.key=++we,this.da=this.fa=!1}function Se(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Re(f){this.src=f,this.g={},this.h=0}Re.prototype.add=function(f,_,D,W,pe){var _e=f.toString();f=this.g[_e],f||(f=this.g[_e]=[],this.h++);var Oe=Pe(f,_,W,pe);return-1<Oe?(_=f[Oe],D||(_.fa=!1)):(_=new be(_,this.src,_e,!!W,pe),_.fa=D,f.push(_)),_};function Ae(f,_){var D=_.type;if(D in f.g){var W=f.g[D],pe=Array.prototype.indexOf.call(W,_,void 0),_e;(_e=0<=pe)&&Array.prototype.splice.call(W,pe,1),_e&&(Se(_),f.g[D].length==0&&(delete f.g[D],f.h--))}}function Pe(f,_,D,W){for(var pe=0;pe<f.length;++pe){var _e=f[pe];if(!_e.da&&_e.listener==_&&_e.capture==!!D&&_e.ha==W)return pe}return-1}var ge="closure_lm_"+(1e6*Math.random()|0),J={};function Ke(f,_,D,W,pe){if(Array.isArray(_)){for(var _e=0;_e<_.length;_e++)Ke(f,_[_e],D,W,pe);return null}return D=wt(D),f&&f[ue]?f.K(_,D,u(W)?!!W.capture:!1,pe):ot(f,_,D,!1,W,pe)}function ot(f,_,D,W,pe,_e){if(!_)throw Error("Invalid event type");var Oe=u(pe)?!!pe.capture:!!pe,Vt=tt(f);if(Vt||(f[ge]=Vt=new Re(f)),D=Vt.add(_,D,W,Oe,_e),D.proxy)return D;if(W=Ue(),D.proxy=W,W.src=f,W.listener=D,f.addEventListener)ie||(pe=Oe),pe===void 0&&(pe=!1),f.addEventListener(_.toString(),W,pe);else if(f.attachEvent)f.attachEvent(Be(_.toString()),W);else if(f.addListener&&f.removeListener)f.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return D}function Ue(){function f(D){return _.call(f.src,f.listener,D)}const _=_t;return f}function Ie(f,_,D,W,pe){if(Array.isArray(_))for(var _e=0;_e<_.length;_e++)Ie(f,_[_e],D,W,pe);else W=u(W)?!!W.capture:!!W,D=wt(D),f&&f[ue]?(f=f.i,_=String(_).toString(),_ in f.g&&(_e=f.g[_],D=Pe(_e,D,W,pe),-1<D&&(Se(_e[D]),Array.prototype.splice.call(_e,D,1),_e.length==0&&(delete f.g[_],f.h--)))):f&&(f=tt(f))&&(_=f.g[_.toString()],f=-1,_&&(f=Pe(_,D,W,pe)),(D=-1<f?_[f]:null)&&ze(D))}function ze(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[ue])Ae(_.i,f);else{var D=f.type,W=f.proxy;_.removeEventListener?_.removeEventListener(D,W,f.capture):_.detachEvent?_.detachEvent(Be(D),W):_.addListener&&_.removeListener&&_.removeListener(W),(D=tt(_))?(Ae(D,f),D.h==0&&(D.src=null,_[ge]=null)):Se(f)}}}function Be(f){return f in J?J[f]:J[f]="on"+f}function _t(f,_){if(f.da)f=!0;else{_=new ne(_,this);var D=f.listener,W=f.ha||f.src;f.fa&&ze(f),f=D.call(W,_)}return f}function tt(f){return f=f[ge],f instanceof Re?f:null}var Ot="__closure_events_fn_"+(1e9*Math.random()>>>0);function wt(f){return typeof f=="function"?f:(f[Ot]||(f[Ot]=function(_){return f.handleEvent(_)}),f[Ot])}function et(){V.call(this),this.i=new Re(this),this.M=this,this.F=null}x(et,V),et.prototype[ue]=!0,et.prototype.removeEventListener=function(f,_,D,W){Ie(this,f,_,D,W)};function St(f,_){var D,W=f.F;if(W)for(D=[];W;W=W.F)D.push(W);if(f=f.M,W=_.type||_,typeof _=="string")_=new Y(_,f);else if(_ instanceof Y)_.target=_.target||f;else{var pe=_;_=new Y(W,f),M(_,pe)}if(pe=!0,D)for(var _e=D.length-1;0<=_e;_e--){var Oe=_.g=D[_e];pe=mt(Oe,W,!0,_)&&pe}if(Oe=_.g=f,pe=mt(Oe,W,!0,_)&&pe,pe=mt(Oe,W,!1,_)&&pe,D)for(_e=0;_e<D.length;_e++)Oe=_.g=D[_e],pe=mt(Oe,W,!1,_)&&pe}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var D=f.g[_],W=0;W<D.length;W++)Se(D[W]);delete f.g[_],f.h--}}this.F=null},et.prototype.K=function(f,_,D,W){return this.i.add(String(f),_,!1,D,W)},et.prototype.L=function(f,_,D,W){return this.i.add(String(f),_,!0,D,W)};function mt(f,_,D,W){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var pe=!0,_e=0;_e<_.length;++_e){var Oe=_[_e];if(Oe&&!Oe.da&&Oe.capture==D){var Vt=Oe.listener,Rn=Oe.ha||Oe.src;Oe.fa&&Ae(f.i,Oe),pe=Vt.call(Rn,W)!==!1&&pe}}return pe&&!W.defaultPrevented}function nt(f,_,D){if(typeof f=="function")D&&(f=m(f,D));else if(f&&typeof f.handleEvent=="function")f=m(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(f,_||0)}function ht(f){f.g=nt(()=>{f.g=null,f.i&&(f.i=!1,ht(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class st extends V{constructor(_,D){super(),this.m=_,this.l=D,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ht(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kt(f){V.call(this),this.h=f,this.g={}}x(Kt,V);var Ut=[];function Xe(f){Q(f.g,function(_,D){this.g.hasOwnProperty(D)&&ze(_)},f),f.g={}}Kt.prototype.N=function(){Kt.aa.N.call(this),Xe(this)},Kt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gt=a.JSON.stringify,Zt=a.JSON.parse,ut=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function kt(){}kt.prototype.h=null;function xt(f){return f.h||(f.h=f.i())}function En(){}var vn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yt(){Y.call(this,"d")}x(Yt,Y);function ft(){Y.call(this,"c")}x(ft,Y);var Lt={},Hs=null;function Yn(){return Hs=Hs||new et}Lt.La="serverreachability";function rs(f){Y.call(this,Lt.La,f)}x(rs,Y);function Ur(f){const _=Yn();St(_,new rs(_))}Lt.STAT_EVENT="statevent";function lt(f,_){Y.call(this,Lt.STAT_EVENT,f),this.stat=_}x(lt,Y);function wn(f){const _=Yn();St(_,new lt(_,f))}Lt.Ma="timingevent";function is(f,_){Y.call(this,Lt.Ma,f),this.size=_}x(is,Y);function xr(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},_)}function br(){this.g=!0}br.prototype.xa=function(){this.g=!1};function Nn(f,_,D,W,pe,_e){f.info(function(){if(f.g)if(_e)for(var Oe="",Vt=_e.split("&"),Rn=0;Rn<Vt.length;Rn++){var Rt=Vt[Rn].split("=");if(1<Rt.length){var It=Rt[0];Rt=Rt[1];var mn=It.split("_");Oe=2<=mn.length&&mn[1]=="type"?Oe+(It+"="+Rt+"&"):Oe+(It+"=redacted&")}}else Oe=null;else Oe=_e;return"XMLHTTP REQ ("+W+") [attempt "+pe+"]: "+_+`
`+D+`
`+Oe})}function ur(f,_,D,W,pe,_e,Oe){f.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+pe+"]: "+_+`
`+D+`
`+_e+" "+Oe})}function Tn(f,_,D,W){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ws(f,D)+(W?" "+W:"")})}function Ao(f,_){f.info(function(){return"TIMEOUT: "+_})}br.prototype.info=function(){};function Ws(f,_){if(!f.g)return _;if(!_)return null;try{var D=JSON.parse(_);if(D){for(f=0;f<D.length;f++)if(Array.isArray(D[f])){var W=D[f];if(!(2>W.length)){var pe=W[1];if(Array.isArray(pe)&&!(1>pe.length)){var _e=pe[0];if(_e!="noop"&&_e!="stop"&&_e!="close")for(var Oe=1;Oe<pe.length;Oe++)pe[Oe]=""}}}}return gt(D)}catch{return _}}var zr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ji={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},si;function qr(){}x(qr,kt),qr.prototype.g=function(){return new XMLHttpRequest},qr.prototype.i=function(){return{}},si=new qr;function Xn(f,_,D,W){this.j=f,this.i=_,this.l=D,this.R=W||1,this.U=new Kt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gs}function Gs(){this.i=null,this.g="",this.h=!1}var Di={},_s={};function Ks(f,_,D){f.L=1,f.v=Co(oi(_)),f.m=D,f.P=!0,Eo(f,null)}function Eo(f,_){f.F=Date.now(),Qs(f),f.A=oi(f.v);var D=f.A,W=f.R;Array.isArray(W)||(W=[String(W)]),dt(D.i,"t",W),f.C=0,D=f.j.J,f.h=new Gs,f.g=Bn(f.j,D?_:null,!f.m),0<f.O&&(f.M=new st(m(f.Y,f,f.g),f.O)),_=f.U,D=f.g,W=f.ca;var pe="readystatechange";Array.isArray(pe)||(pe&&(Ut[0]=pe.toString()),pe=Ut);for(var _e=0;_e<pe.length;_e++){var Oe=Ke(D,pe[_e],W||_.handleEvent,!1,_.h||_);if(!Oe)break;_.g[Oe.key]=Oe}_=f.H?T(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),Ur(),Nn(f.i,f.u,f.A,f.l,f.R,f.m)}Xn.prototype.ca=function(f){f=f.target;const _=this.M;_&&_i(f)==3?_.j():this.Y(f)},Xn.prototype.Y=function(f){try{if(f==this.g)e:{const mn=_i(this.g);var _=this.g.Ba();const Vi=this.g.Z();if(!(3>mn)&&(mn!=3||this.g&&(this.h.h||this.g.oa()||Nl(this.g)))){this.J||mn!=4||_==7||(_==8||0>=Vi?Ur(3):Ur(2)),sa(this);var D=this.g.Z();this.X=D;t:if(No(this)){var W=Nl(this.g);f="";var pe=W.length,_e=_i(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mi(this),_r(this);var Oe="";break t}this.h.i=new a.TextDecoder}for(_=0;_<pe;_++)this.h.h=!0,f+=this.h.i.decode(W[_],{stream:!(_e&&_==pe-1)});W.length=0,this.h.g+=f,this.C=0,Oe=this.h.g}else Oe=this.g.oa();if(this.o=D==200,ur(this.i,this.u,this.A,this.l,this.R,mn,D),this.o){if(this.T&&!this.K){t:{if(this.g){var Vt,Rn=this.g;if((Vt=Rn.g?Rn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(Vt)){var Rt=Vt;break t}}Rt=null}if(D=Rt)Tn(this.i,this.l,D,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oa(this,D);else{this.o=!1,this.s=3,wn(12),Mi(this),_r(this);break e}}if(this.P){D=!0;let $r;for(;!this.J&&this.C<Oe.length;)if($r=Uc(this,Oe),$r==_s){mn==4&&(this.s=4,wn(14),D=!1),Tn(this.i,this.l,null,"[Incomplete Response]");break}else if($r==Di){this.s=4,wn(15),Tn(this.i,this.l,Oe,"[Invalid Chunk]"),D=!1;break}else Tn(this.i,this.l,$r,null),oa(this,$r);if(No(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mn!=4||Oe.length!=0||this.h.h||(this.s=1,wn(16),D=!1),this.o=this.o&&D,!D)Tn(this.i,this.l,Oe,"[Invalid Chunked Response]"),Mi(this),_r(this);else if(0<Oe.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+Oe.length),$e(It),It.M=!0,wn(11))}}else Tn(this.i,this.l,Oe,null),oa(this,Oe);mn==4&&Mi(this),this.o&&!this.J&&(mn==4?yt(this.j,this):(this.o=!1,Qs(this)))}else Ns(this.g),D==400&&0<Oe.indexOf("Unknown SID")?(this.s=3,wn(12)):(this.s=0,wn(13)),Mi(this),_r(this)}}}catch{}finally{}};function No(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Uc(f,_){var D=f.C,W=_.indexOf(`
`,D);return W==-1?_s:(D=Number(_.substring(D,W)),isNaN(D)?Di:(W+=1,W+D>_.length?_s:(_=_.slice(W,W+D),f.C=W+D,_)))}Xn.prototype.cancel=function(){this.J=!0,Mi(this)};function Qs(f){f.S=Date.now()+f.I,ml(f,f.I)}function ml(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=xr(m(f.ba,f),_)}function sa(f){f.B&&(a.clearTimeout(f.B),f.B=null)}Xn.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Ao(this.i,this.A),this.L!=2&&(Ur(),wn(17)),Mi(this),this.s=2,_r(this)):ml(this,this.S-f)};function _r(f){f.j.G==0||f.J||yt(f.j,f)}function Mi(f){sa(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,Xe(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function oa(f,_){try{var D=f.j;if(D.G!=0&&(D.g==f||Ys(D.h,f))){if(!f.K&&Ys(D.h,f)&&D.G==3){try{var W=D.Da.g.parse(_)}catch{W=null}if(Array.isArray(W)&&W.length==3){var pe=W;if(pe[0]==0){e:if(!D.u){if(D.g)if(D.g.F+3e3<f.F)ct(D),as(D);else break e;Le(D),wn(18)}}else D.za=pe[1],0<D.za-D.T&&37500>pe[2]&&D.F&&D.v==0&&!D.C&&(D.C=xr(m(D.Za,D),6e3));if(1>=wl(D.h)&&D.ca){try{D.ca()}catch{}D.ca=void 0}}else Xt(D,11)}else if((f.K||D.g==f)&&ct(D),!A(_))for(pe=D.Da.g.parse(_),_=0;_<pe.length;_++){let Rt=pe[_];if(D.T=Rt[0],Rt=Rt[1],D.G==2)if(Rt[0]=="c"){D.K=Rt[1],D.ia=Rt[2];const It=Rt[3];It!=null&&(D.la=It,D.j.info("VER="+D.la));const mn=Rt[4];mn!=null&&(D.Aa=mn,D.j.info("SVER="+D.Aa));const Vi=Rt[5];Vi!=null&&typeof Vi=="number"&&0<Vi&&(W=1.5*Vi,D.L=W,D.j.info("backChannelRequestTimeoutMs_="+W)),W=D;const $r=f.g;if($r){const Pr=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pr){var _e=W.h;_e.g||Pr.indexOf("spdy")==-1&&Pr.indexOf("quic")==-1&&Pr.indexOf("h2")==-1||(_e.j=_e.l,_e.g=new Set,_e.h&&(xl(_e,_e.h),_e.h=null))}if(W.D){const Ts=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;Ts&&(W.ya=Ts,Mt(W.I,W.D,Ts))}}D.G=3,D.l&&D.l.ua(),D.ba&&(D.R=Date.now()-f.F,D.j.info("Handshake RTT: "+D.R+"ms")),W=D;var Oe=f;if(W.qa=tn(W,W.J?W.ia:null,W.W),Oe.K){kn(W.h,Oe);var Vt=Oe,Rn=W.L;Rn&&(Vt.I=Rn),Vt.B&&(sa(Vt),Qs(Vt)),W.g=Oe}else Ne(W);0<D.i.length&&v(D)}else Rt[0]!="stop"&&Rt[0]!="close"||Xt(D,7);else D.G==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?Xt(D,7):da(D):Rt[0]!="noop"&&D.l&&D.l.ta(Rt),D.v=0)}}Ur(4)}catch{}}var gl=class{constructor(f,_){this.g=f,this.map=_}};function yl(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vl(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function wl(f){return f.h?1:f.g?f.g.size:0}function Ys(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function xl(f,_){f.g?f.g.add(_):f.h=_}function kn(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}yl.prototype.cancel=function(){if(this.i=bl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function bl(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const D of f.g.values())_=_.concat(D.D);return _}return E(f.i)}function vu(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var _=[],D=f.length,W=0;W<D;W++)_.push(f[W]);return _}_=[],D=0;for(W in f)_[D++]=f[W];return _}function Ss(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var _=[];f=f.length;for(var D=0;D<f;D++)_.push(D);return _}_=[],D=0;for(const W in f)_[D++]=W;return _}}}function Xs(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var D=Ss(f),W=vu(f),pe=W.length,_e=0;_e<pe;_e++)_.call(void 0,W[_e],D&&D[_e],f)}var wi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function To(f,_){if(f){f=f.split("&");for(var D=0;D<f.length;D++){var W=f[D].indexOf("="),pe=null;if(0<=W){var _e=f[D].substring(0,W);pe=f[D].substring(W+1)}else _e=f[D];_(_e,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function en(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof en){this.h=f.h,aa(this,f.j),this.o=f.o,this.g=f.g,la(this,f.s),this.l=f.l;var _=f.i,D=new bi;D.i=_.i,_.g&&(D.g=new Map(_.g),D.h=_.h),wu(this,D),this.m=f.m}else f&&(_=String(f).match(wi))?(this.h=!1,aa(this,_[1]||"",!0),this.o=Js(_[2]||""),this.g=Js(_[3]||"",!0),la(this,_[4]),this.l=Js(_[5]||"",!0),wu(this,_[6]||"",!0),this.m=Js(_[7]||"")):(this.h=!1,this.i=new bi(null,this.h))}en.prototype.toString=function(){var f=[],_=this.j;_&&f.push(xi(_,xu,!0),":");var D=this.g;return(D||_=="file")&&(f.push("//"),(_=this.o)&&f.push(xi(_,xu,!0),"@"),f.push(encodeURIComponent(String(D)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D=this.s,D!=null&&f.push(":",String(D))),(D=this.l)&&(this.g&&D.charAt(0)!="/"&&f.push("/"),f.push(xi(D,D.charAt(0)=="/"?qc:zc,!0))),(D=this.i.toString())&&f.push("?",D),(D=this.m)&&f.push("#",xi(D,Po)),f.join("")};function oi(f){return new en(f)}function aa(f,_,D){f.j=D?Js(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function la(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function wu(f,_,D){_ instanceof bi?(f.i=_,$c(f.i,f.h)):(D||(_=xi(_,Sl)),f.i=new bi(_,f.h))}function Mt(f,_,D){f.i.set(_,D)}function Co(f){return Mt(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Js(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function xi(f,_,D){return typeof f=="string"?(f=encodeURI(f).replace(_,_l),D&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function _l(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var xu=/[#\/\?@]/g,zc=/[#\?:]/g,qc=/[#\?]/g,Sl=/[#\?@]/g,Po=/#/g;function bi(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function ss(f){f.g||(f.g=new Map,f.h=0,f.i&&To(f.i,function(_,D){f.add(decodeURIComponent(_.replace(/\+/g," ")),D)}))}t=bi.prototype,t.add=function(f,_){ss(this),this.i=null,f=eo(this,f);var D=this.g.get(f);return D||this.g.set(f,D=[]),D.push(_),this.h+=1,this};function Zs(f,_){ss(f),_=eo(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function ua(f,_){return ss(f),_=eo(f,_),f.g.has(_)}t.forEach=function(f,_){ss(this),this.g.forEach(function(D,W){D.forEach(function(pe){f.call(_,pe,W,this)},this)},this)},t.na=function(){ss(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),D=[];for(let W=0;W<_.length;W++){const pe=f[W];for(let _e=0;_e<pe.length;_e++)D.push(_[W])}return D},t.V=function(f){ss(this);let _=[];if(typeof f=="string")ua(this,f)&&(_=_.concat(this.g.get(eo(this,f))));else{f=Array.from(this.g.values());for(let D=0;D<f.length;D++)_=_.concat(f[D])}return _},t.set=function(f,_){return ss(this),this.i=null,f=eo(this,f),ua(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},t.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function dt(f,_,D){Zs(f,_),0<D.length&&(f.i=null,f.g.set(eo(f,_),E(D)),f.h+=D.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var D=0;D<_.length;D++){var W=_[D];const _e=encodeURIComponent(String(W)),Oe=this.V(W);for(W=0;W<Oe.length;W++){var pe=_e;Oe[W]!==""&&(pe+="="+encodeURIComponent(String(Oe[W]))),f.push(pe)}}return this.i=f.join("&")};function eo(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function $c(f,_){_&&!f.j&&(ss(f),f.i=null,f.g.forEach(function(D,W){var pe=W.toLowerCase();W!=pe&&(Zs(this,W),dt(this,pe,D))},f)),f.j=_}function Hc(f,_){const D=new br;if(a.Image){const W=new Image;W.onload=p(Sr,D,"TestLoadImage: loaded",!0,_,W),W.onerror=p(Sr,D,"TestLoadImage: error",!1,_,W),W.onabort=p(Sr,D,"TestLoadImage: abort",!1,_,W),W.ontimeout=p(Sr,D,"TestLoadImage: timeout",!1,_,W),a.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=f}else _(!1)}function Wc(f,_){const D=new br,W=new AbortController,pe=setTimeout(()=>{W.abort(),Sr(D,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:W.signal}).then(_e=>{clearTimeout(pe),_e.ok?Sr(D,"TestPingServer: ok",!0,_):Sr(D,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(pe),Sr(D,"TestPingServer: error",!1,_)})}function Sr(f,_,D,W,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),W(D)}catch{}}function As(){this.g=new ut}function Gc(f,_,D){const W=D||"";try{Xs(f,function(pe,_e){let Oe=pe;u(pe)&&(Oe=gt(pe)),_.push(W+_e+"="+encodeURIComponent(Oe))})}catch(pe){throw _.push(W+"type="+encodeURIComponent("_badmap")),pe}}function ca(f){this.l=f.Ub||null,this.j=f.eb||!1}x(ca,kt),ca.prototype.g=function(){return new Es(this.l,this.j)},ca.prototype.i=function(f){return function(){return f}}({});function Es(f,_){et.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Es,et),t=Es.prototype,t.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,os(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fi(this)),this.readyState=0},t.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,os(this)),this.g&&(this.readyState=3,os(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ha(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function ha(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}t.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Fi(this):os(this),this.readyState==3&&ha(this)}},t.Ra=function(f){this.g&&(this.response=this.responseText=f,Fi(this))},t.Qa=function(f){this.g&&(this.response=f,Fi(this))},t.ga=function(){this.g&&Fi(this)};function Fi(f){f.readyState=4,f.l=null,f.j=null,f.v=null,os(f)}t.setRequestHeader=function(f,_){this.u.append(f,_)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var D=_.next();!D.done;)D=D.value,f.push(D[0]+": "+D[1]),D=_.next();return f.join(`\r
`)};function os(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ko(f){let _="";return Q(f,function(D,W){_+=W,_+=":",_+=D,_+=`\r
`}),_}function Al(f,_,D){e:{for(W in D){var W=!1;break e}W=!0}W||(D=ko(D),typeof f=="string"?D!=null&&encodeURIComponent(String(D)):Mt(f,_,D))}function cn(f){et.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(cn,et);var El=/^https?$/i,Io=["POST","PUT"];t=cn.prototype,t.Ha=function(f){this.J=f},t.ea=function(f,_,D,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():si.g(),this.v=this.o?xt(this.o):xt(si),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(_e){to(this,_e);return}if(f=D||"",D=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var pe in W)D.set(pe,W[pe]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const _e of W.keys())D.set(_e,W.get(_e));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(D.keys()).find(_e=>_e.toLowerCase()=="content-type"),pe=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Io,_,void 0))||W||pe||D.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_e,Oe]of D)this.g.setRequestHeader(_e,Oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ro(this),this.u=!0,this.g.send(f),this.u=!1}catch(_e){to(this,_e)}};function to(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,fa(f),no(f)}function fa(f){f.A||(f.A=!0,St(f,"complete"),St(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,St(this,"complete"),St(this,"abort"),no(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),no(this,!0)),cn.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Lo(this):this.bb())},t.bb=function(){Lo(this)};function Lo(f){if(f.h&&typeof o<"u"&&(!f.v[1]||_i(f)!=4||f.Z()!=2)){if(f.u&&_i(f)==4)nt(f.Ea,0,f);else if(St(f,"readystatechange"),_i(f)==4){f.h=!1;try{const Oe=f.Z();e:switch(Oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var D;if(!(D=_)){var W;if(W=Oe===0){var pe=String(f.D).match(wi)[1]||null;!pe&&a.self&&a.self.location&&(pe=a.self.location.protocol.slice(0,-1)),W=!El.test(pe?pe.toLowerCase():"")}D=W}if(D)St(f,"complete"),St(f,"success");else{f.m=6;try{var _e=2<_i(f)?f.g.statusText:""}catch{_e=""}f.l=_e+" ["+f.Z()+"]",fa(f)}}finally{no(f)}}}}function no(f,_){if(f.g){ro(f);const D=f.g,W=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||St(f,"ready");try{D.onreadystatechange=W}catch{}}}function ro(f){f.I&&(a.clearTimeout(f.I),f.I=null)}t.isActive=function(){return!!this.g};function _i(f){return f.g?f.g.readyState:0}t.Z=function(){try{return 2<_i(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Zt(_)}};function Nl(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Ns(f){const _={};f=(f.g&&2<=_i(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<f.length;W++){if(A(f[W]))continue;var D=S(f[W]);const pe=D[0];if(D=D[1],typeof D!="string")continue;D=D.trim();const _e=_[pe]||[];_[pe]=_e,_e.push(D)}L(_,function(W){return W.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ai(f,_,D){return D&&D.internalChannelParams&&D.internalChannelParams[f]||_}function Tl(f){this.Aa=0,this.i=[],this.j=new br,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ai("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ai("baseRetryDelayMs",5e3,f),this.cb=ai("retryDelaySeedMs",1e4,f),this.Wa=ai("forwardChannelMaxRetries",2,f),this.wa=ai("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new yl(f&&f.concurrentRequestLimit),this.Da=new As,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Tl.prototype,t.la=8,t.G=1,t.connect=function(f,_,D,W){wn(0),this.W=f,this.H=_||{},D&&W!==void 0&&(this.H.OSID=D,this.H.OAID=W),this.F=this.X,this.I=tn(this,null,this.W),v(this)};function da(f){if(Cl(f),f.G==3){var _=f.U++,D=oi(f.I);if(Mt(D,"SID",f.K),Mt(D,"RID",_),Mt(D,"TYPE","terminate"),le(f,D),_=new Xn(f,f.j,_),_.L=2,_.v=Co(oi(D)),D=!1,a.navigator&&a.navigator.sendBeacon)try{D=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!D&&a.Image&&(new Image().src=_.v,D=!0),D||(_.g=Bn(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Qs(_)}In(f)}function as(f){f.g&&($e(f),f.g.cancel(),f.g=null)}function Cl(f){as(f),f.u&&(a.clearTimeout(f.u),f.u=null),ct(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function v(f){if(!vl(f.h)&&!f.s){f.s=!0;var _=f.Ga;re||fe(),$||(re(),$=!0),ae.add(_,f),f.B=0}}function F(f,_){return wl(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=xr(m(f.Ga,f,_),zt(f,f.B)),f.B++,!0)}t.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const pe=new Xn(this,this.j,f);let _e=this.o;if(this.S&&(_e?(_e=T(_e),M(_e,this.S)):_e=this.S),this.m!==null||this.O||(pe.H=_e,_e=null),this.P)e:{for(var _=0,D=0;D<this.i.length;D++){t:{var W=this.i[D];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(_+=W,4096<_){_=D;break e}if(_===4096||D===this.i.length-1){_=D+1;break e}}_=1e3}else _=1e3;_=de(this,pe,_),D=oi(this.I),Mt(D,"RID",f),Mt(D,"CVER",22),this.D&&Mt(D,"X-HTTP-Session-Id",this.D),le(this,D),_e&&(this.O?_="headers="+encodeURIComponent(String(ko(_e)))+"&"+_:this.m&&Al(D,this.m,_e)),xl(this.h,pe),this.Ua&&Mt(D,"TYPE","init"),this.P?(Mt(D,"$req",_),Mt(D,"SID","null"),pe.T=!0,Ks(pe,D,null)):Ks(pe,D,_),this.G=2}}else this.G==3&&(f?Z(this,f):this.i.length==0||vl(this.h)||Z(this))};function Z(f,_){var D;_?D=_.l:D=f.U++;const W=oi(f.I);Mt(W,"SID",f.K),Mt(W,"RID",D),Mt(W,"AID",f.T),le(f,W),f.m&&f.o&&Al(W,f.m,f.o),D=new Xn(f,f.j,D,f.B+1),f.m===null&&(D.H=f.o),_&&(f.i=_.D.concat(f.i)),_=de(f,D,1e3),D.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),xl(f.h,D),Ks(D,W,_)}function le(f,_){f.H&&Q(f.H,function(D,W){Mt(_,W,D)}),f.l&&Xs({},function(D,W){Mt(_,W,D)})}function de(f,_,D){D=Math.min(f.i.length,D);var W=f.l?m(f.l.Na,f.l,f):null;e:{var pe=f.i;let _e=-1;for(;;){const Oe=["count="+D];_e==-1?0<D?(_e=pe[0].g,Oe.push("ofs="+_e)):_e=0:Oe.push("ofs="+_e);let Vt=!0;for(let Rn=0;Rn<D;Rn++){let Rt=pe[Rn].g;const It=pe[Rn].map;if(Rt-=_e,0>Rt)_e=Math.max(0,pe[Rn].g-100),Vt=!1;else try{Gc(It,Oe,"req"+Rt+"_")}catch{W&&W(It)}}if(Vt){W=Oe.join("&");break e}}}return f=f.i.splice(0,D),_.D=f,W}function Ne(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;re||fe(),$||(re(),$=!0),ae.add(_,f),f.v=0}}function Le(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=xr(m(f.Fa,f),zt(f,f.v)),f.v++,!0)}t.Fa=function(){if(this.u=null,Qe(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=xr(m(this.ab,this),f)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wn(10),as(this),Qe(this))};function $e(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function Qe(f){f.g=new Xn(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=oi(f.qa);Mt(_,"RID","rpc"),Mt(_,"SID",f.K),Mt(_,"AID",f.T),Mt(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&Mt(_,"TO",f.ja),Mt(_,"TYPE","xmlhttp"),le(f,_),f.m&&f.o&&Al(_,f.m,f.o),f.L&&(f.g.I=f.L);var D=f.g;f=f.ia,D.L=1,D.v=Co(oi(_)),D.m=null,D.P=!0,Eo(D,f)}t.Za=function(){this.C!=null&&(this.C=null,as(this),Le(this),wn(19))};function ct(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function yt(f,_){var D=null;if(f.g==_){ct(f),$e(f),f.g=null;var W=2}else if(Ys(f.h,_))D=_.D,kn(f.h,_),W=1;else return;if(f.G!=0){if(_.o)if(W==1){D=_.m?_.m.length:0,_=Date.now()-_.F;var pe=f.B;W=Yn(),St(W,new is(W,D)),v(f)}else Ne(f);else if(pe=_.s,pe==3||pe==0&&0<_.X||!(W==1&&F(f,_)||W==2&&Le(f)))switch(D&&0<D.length&&(_=f.h,_.i=_.i.concat(D)),pe){case 1:Xt(f,5);break;case 4:Xt(f,10);break;case 3:Xt(f,6);break;default:Xt(f,2)}}}function zt(f,_){let D=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(D*=2),D*_}function Xt(f,_){if(f.j.info("Error code "+_),_==2){var D=m(f.fb,f),W=f.Xa;const pe=!W;W=new en(W||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||aa(W,"https"),Co(W),pe?Hc(W.toString(),D):Wc(W.toString(),D)}else wn(2);f.G=0,f.l&&f.l.sa(_),In(f),Cl(f)}t.fb=function(f){f?(this.j.info("Successfully pinged google.com"),wn(2)):(this.j.info("Failed to ping google.com"),wn(1))};function In(f){if(f.G=0,f.ka=[],f.l){const _=bl(f.h);(_.length!=0||f.i.length!=0)&&(C(f.ka,_),C(f.ka,f.i),f.h.i.length=0,E(f.i),f.i.length=0),f.l.ra()}}function tn(f,_,D){var W=D instanceof en?oi(D):new en(D);if(W.g!="")_&&(W.g=_+"."+W.g),la(W,W.s);else{var pe=a.location;W=pe.protocol,_=_?_+"."+pe.hostname:pe.hostname,pe=+pe.port;var _e=new en(null);W&&aa(_e,W),_&&(_e.g=_),pe&&la(_e,pe),D&&(_e.l=D),W=_e}return D=f.D,_=f.ya,D&&_&&Mt(W,D,_),Mt(W,"VER",f.la),le(f,W),W}function Bn(f,_,D){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new cn(new ca({eb:D})):new cn(f.pa),_.Ha(f.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ln(){}t=Ln.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Un(){}Un.prototype.g=function(f,_){return new pn(f,_)};function pn(f,_){et.call(this),this.g=new Tl(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!A(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!A(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new Oi(this)}x(pn,et),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){da(this.g)},pn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var D={};D.__data__=f,f=D}else this.u&&(D={},D.__data__=gt(f),f=D);_.i.push(new gl(_.Ya++,f)),_.G==3&&v(_)},pn.prototype.N=function(){this.g.l=null,delete this.j,da(this.g),delete this.g,pn.aa.N.call(this)};function Cr(f){Yt.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){e:{for(const D in _){f=D;break e}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}x(Cr,Yt);function Pl(){ft.call(this),this.status=1}x(Pl,ft);function Oi(f){this.g=f}x(Oi,Ln),Oi.prototype.ua=function(){St(this.g,"a")},Oi.prototype.ta=function(f){St(this.g,new Cr(f))},Oi.prototype.sa=function(f){St(this.g,new Pl)},Oi.prototype.ra=function(){St(this.g,"b")},Un.prototype.createWebChannel=Un.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,n8=function(){return new Un},t8=function(){return Yn()},e8=Lt,s2={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zr.NO_ERROR=0,zr.TIMEOUT=8,zr.HTTP_ERROR=6,yp=zr,ji.COMPLETE="complete",ZS=ji,En.EventType=vn,vn.OPEN="a",vn.CLOSE="b",vn.ERROR="c",vn.MESSAGE="d",et.prototype.listen=et.prototype.K,Ah=En,cn.prototype.listenOnce=cn.prototype.L,cn.prototype.getLastError=cn.prototype.Ka,cn.prototype.getLastErrorCode=cn.prototype.Ba,cn.prototype.getStatus=cn.prototype.Z,cn.prototype.getResponseJson=cn.prototype.Oa,cn.prototype.getResponseText=cn.prototype.oa,cn.prototype.send=cn.prototype.ea,cn.prototype.setWithCredentials=cn.prototype.Ha,JS=cn}).apply(typeof zd<"u"?zd:typeof self<"u"?self:typeof window<"u"?window:{});const Vx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu=new HS("@firebase/firestore");function gh(){return iu.logLevel}function Ye(t,...e){if(iu.logLevel<=Wt.DEBUG){const n=e.map(ev);iu.debug(`Firestore (${jc}): ${t}`,...n)}}function Zo(t,...e){if(iu.logLevel<=Wt.ERROR){const n=e.map(ev);iu.error(`Firestore (${jc}): ${t}`,...n)}}function wc(t,...e){if(iu.logLevel<=Wt.WARN){const n=e.map(ev);iu.warn(`Firestore (${jc}): ${t}`,...n)}}function ev(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(t="Unexpected state"){const e=`FIRESTORE (${jc}) INTERNAL ASSERTION FAILED: `+t;throw Zo(e),new Error(e)}function un(t,e){t||bt()}function Nt(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qe extends Rc{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zr.UNAUTHENTICATED))}shutdown(){}}class UL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class zL{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){un(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Go;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Go,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Go)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(un(typeof r.accessToken=="string"),new r8(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return un(e===null||typeof e=="string"),new Zr(e)}}class qL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $L{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new qL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){un(this.o===void 0);const r=s=>{s.error!=null&&Ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Ye("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(un(typeof n.token=="string"),this.R=n.token,new HL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=GL(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Qt(t,e){return t<e?-1:t>e?1:0}function xc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new qe(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new qe(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new qe(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qe(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Qn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qt(this.nanoseconds,e.nanoseconds):Qt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Qn(0,0))}static max(){return new Et(new Qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n,r){n===void 0?n=0:n>e.length&&bt(),r===void 0?r=e.length-n:r>e.length-n&&bt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return vf.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vf?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class _n extends vf{construct(e,n,r){return new _n(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new qe(ke.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new _n(n)}static emptyPath(){return new _n([])}}const KL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Mr extends vf{construct(e,n,r){return new Mr(e,n,r)}static isValidIdentifier(e){return KL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Mr(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new qe(ke.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new qe(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new qe(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new qe(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Mr(n)}static emptyPath(){return new Mr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.path=e}static fromPath(e){return new at(_n.fromString(e))}static fromName(e){return new at(_n.fromString(e).popFirst(5))}static empty(){return new at(_n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_n.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return _n.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new at(new _n(e.slice()))}}function QL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(r===1e9?new Qn(n+1,0):new Qn(n,r));return new tl(i,at.empty(),e)}function YL(t){return new tl(t.readTime,t.key,-1)}class tl{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new tl(Et.min(),at.empty(),-1)}static max(){return new tl(Et.max(),at.empty(),-1)}}function XL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=at.comparator(t.documentKey,e.documentKey),n!==0?n:Qt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uf(t){if(t.code!==ke.FAILED_PRECONDITION||t.message!==JL)throw t;Ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&bt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new De((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof De?n:De.resolve(n)}catch(n){return De.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):De.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):De.reject(n)}static resolve(e){return new De((n,r)=>{n(e)})}static reject(e){return new De((n,r)=>{r(e)})}static waitFor(e){return new De((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=De.resolve(!1);for(const r of e)n=n.next(i=>i?De.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new De((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(e,n){return new De((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function eR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function zf(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}tv.oe=-1;function Ym(t){return t==null}function um(t){return t===0&&1/t==-1/0}function tR(t){return typeof t=="number"&&Number.isInteger(t)&&!um(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function du(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function s8(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n){this.comparator=e,this.root=n||Dr.EMPTY}insert(e,n){return new Vn(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Dr.BLACK,null,null))}remove(e){return new Vn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qd(this.root,e,this.comparator,!1)}getReverseIterator(){return new qd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qd(this.root,e,this.comparator,!0)}}class qd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Dr.RED,this.left=i??Dr.EMPTY,this.right=s??Dr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Dr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Dr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Dr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bt();const e=this.left.check();if(e!==this.right.check())throw bt();return e+(this.isRed()?0:1)}}Dr.EMPTY=null,Dr.RED=!0,Dr.BLACK=!1;Dr.EMPTY=new class{constructor(){this.size=0}get key(){throw bt()}get value(){throw bt()}get color(){throw bt()}get left(){throw bt()}get right(){throw bt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Dr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e){this.comparator=e,this.data=new Vn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ux(this.data.getIterator())}getIteratorFrom(e){return new Ux(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Or)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Or(this.comparator);return n.data=e,n}}class Ux{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e){this.fields=e,e.sort(Mr.comparator)}static empty(){return new Xi([])}unionWith(e){let n=new Or(Mr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Xi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return xc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new o8("Invalid base64 string: "+s):s}}(e);return new Br(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Br(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Br.EMPTY_BYTE_STRING=new Br("");const nR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nl(t){if(un(!!t),typeof t=="string"){let e=0;const n=nR.exec(t);if(un(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:rr(t.seconds),nanos:rr(t.nanos)}}function rr(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function su(t){return typeof t=="string"?Br.fromBase64String(t):Br.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function rv(t){const e=t.mapValue.fields.__previous_value__;return nv(e)?rv(e):e}function wf(t){const e=nl(t.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class xf{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new xf("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof xf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d={mapValue:{}};function ou(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?nv(t)?4:sR(t)?9007199254740991:iR(t)?10:11:bt()}function bo(t,e){if(t===e)return!0;const n=ou(t);if(n!==ou(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wf(t).isEqual(wf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=nl(i.timestampValue),a=nl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return su(i.bytesValue).isEqual(su(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return rr(i.geoPointValue.latitude)===rr(s.geoPointValue.latitude)&&rr(i.geoPointValue.longitude)===rr(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return rr(i.integerValue)===rr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=rr(i.doubleValue),a=rr(s.doubleValue);return o===a?um(o)===um(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return xc(t.arrayValue.values||[],e.arrayValue.values||[],bo);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Bx(o)!==Bx(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!bo(o[l],a[l])))return!1;return!0}(t,e);default:return bt()}}function bf(t,e){return(t.values||[]).find(n=>bo(n,e))!==void 0}function bc(t,e){if(t===e)return 0;const n=ou(t),r=ou(e);if(n!==r)return Qt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qt(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=rr(s.integerValue||s.doubleValue),l=rr(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return zx(t.timestampValue,e.timestampValue);case 4:return zx(wf(t),wf(e));case 5:return Qt(t.stringValue,e.stringValue);case 6:return function(s,o){const a=su(s),l=su(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Qt(a[u],l[u]);if(c!==0)return c}return Qt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Qt(rr(s.latitude),rr(o.latitude));return a!==0?a:Qt(rr(s.longitude),rr(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return qx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,c;const d=s.fields||{},m=o.fields||{},p=(a=d.value)===null||a===void 0?void 0:a.arrayValue,x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,E=Qt(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((c=x==null?void 0:x.values)===null||c===void 0?void 0:c.length)||0);return E!==0?E:qx(p,x)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===$d.mapValue&&o===$d.mapValue)return 0;if(s===$d.mapValue)return 1;if(o===$d.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const m=Qt(l[d],c[d]);if(m!==0)return m;const p=bc(a[l[d]],u[c[d]]);if(p!==0)return p}return Qt(l.length,c.length)}(t.mapValue,e.mapValue);default:throw bt()}}function zx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qt(t,e);const n=nl(t),r=nl(e),i=Qt(n.seconds,r.seconds);return i!==0?i:Qt(n.nanos,r.nanos)}function qx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=bc(n[i],r[i]);if(s)return s}return Qt(n.length,r.length)}function _c(t){return o2(t)}function o2(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=nl(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return su(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return at.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=o2(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${o2(n.fields[o])}`;return i+"}"}(t.mapValue):bt()}function $x(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function a2(t){return!!t&&"integerValue"in t}function iv(t){return!!t&&"arrayValue"in t}function Hx(t){return!!t&&"nullValue"in t}function Wx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vp(t){return!!t&&"mapValue"in t}function iR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Oh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return du(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Oh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.value=e}static empty(){return new Ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oh(n)}setAll(e){let n=Mr.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Oh(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());vp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return bo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];vp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){du(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ti(Oh(this.value))}}function a8(t){const e=[];return du(t.fields,(n,r)=>{const i=new Mr([n]);if(vp(r)){const s=a8(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Xi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ti(e,0,Et.min(),Et.min(),Et.min(),Ti.empty(),0)}static newFoundDocument(e,n,r,i){return new ti(e,1,n,Et.min(),r,i,0)}static newNoDocument(e,n){return new ti(e,2,n,Et.min(),Et.min(),Ti.empty(),0)}static newUnknownDocument(e,n){return new ti(e,3,n,Et.min(),Et.min(),Ti.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ti&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ti(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,n){this.position=e,this.inclusive=n}}function Gx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=at.comparator(at.fromName(o.referenceValue),n.key):r=bc(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Kx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!bo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n="asc"){this.field=e,this.dir=n}}function oR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{}class dr extends l8{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lR(e,n,r):n==="array-contains"?new hR(e,r):n==="in"?new fR(e,r):n==="not-in"?new dR(e,r):n==="array-contains-any"?new pR(e,r):new dr(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uR(e,r):new cR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(bc(n,this.value)):n!==null&&ou(this.value)===ou(n)&&this.matchesComparison(bc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return bt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Bs extends l8{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Bs(e,n)}matches(e){return u8(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function u8(t){return t.op==="and"}function c8(t){return aR(t)&&u8(t)}function aR(t){for(const e of t.filters)if(e instanceof Bs)return!1;return!0}function l2(t){if(t instanceof dr)return t.field.canonicalString()+t.op.toString()+_c(t.value);if(c8(t))return t.filters.map(e=>l2(e)).join(",");{const e=t.filters.map(n=>l2(n)).join(",");return`${t.op}(${e})`}}function h8(t,e){return t instanceof dr?function(r,i){return i instanceof dr&&r.op===i.op&&r.field.isEqual(i.field)&&bo(r.value,i.value)}(t,e):t instanceof Bs?function(r,i){return i instanceof Bs&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&h8(o,i.filters[a]),!0):!1}(t,e):void bt()}function f8(t){return t instanceof dr?function(n){return`${n.field.canonicalString()} ${n.op} ${_c(n.value)}`}(t):t instanceof Bs?function(n){return n.op.toString()+" {"+n.getFilters().map(f8).join(" ,")+"}"}(t):"Filter"}class lR extends dr{constructor(e,n,r){super(e,n,r),this.key=at.fromName(r.referenceValue)}matches(e){const n=at.comparator(e.key,this.key);return this.matchesComparison(n)}}class uR extends dr{constructor(e,n){super(e,"in",n),this.keys=d8("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cR extends dr{constructor(e,n){super(e,"not-in",n),this.keys=d8("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function d8(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>at.fromName(r.referenceValue))}class hR extends dr{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return iv(n)&&bf(n.arrayValue,this.value)}}class fR extends dr{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bf(this.value.arrayValue,n)}}class dR extends dr{constructor(e,n){super(e,"not-in",n)}matches(e){if(bf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!bf(this.value.arrayValue,n)}}class pR extends dr{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!iv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>bf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Qx(t,e=null,n=[],r=[],i=null,s=null,o=null){return new mR(t,e,n,r,i,s,o)}function sv(t){const e=Nt(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>l2(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ym(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>_c(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>_c(r)).join(",")),e.ue=n}return e.ue}function ov(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h8(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Kx(t.startAt,e.startAt)&&Kx(t.endAt,e.endAt)}function u2(t){return at.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gR(t,e,n,r,i,s,o,a){return new qf(t,e,n,r,i,s,o,a)}function Xm(t){return new qf(t)}function Yx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function p8(t){return t.collectionGroup!==null}function Vh(t){const e=Nt(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Or(Mr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new hm(s,r))}),n.has(Mr.keyField().canonicalString())||e.ce.push(new hm(Mr.keyField(),r))}return e.ce}function go(t){const e=Nt(t);return e.le||(e.le=yR(e,Vh(t))),e.le}function yR(t,e){if(t.limitType==="F")return Qx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new hm(i.field,s)});const n=t.endAt?new cm(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cm(t.startAt.position,t.startAt.inclusive):null;return Qx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function c2(t,e){const n=t.filters.concat([e]);return new qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function h2(t,e,n){return new qf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Jm(t,e){return ov(go(t),go(e))&&t.limitType===e.limitType}function m8(t){return`${sv(go(t))}|lt:${t.limitType}`}function Cu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>f8(i)).join(", ")}]`),Ym(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>_c(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>_c(i)).join(",")),`Target(${r})`}(go(t))}; limitType=${t.limitType})`}function Zm(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):at.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Vh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=Gx(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,Vh(r),i)||r.endAt&&!function(o,a,l){const u=Gx(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,Vh(r),i))}(t,e)}function vR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function g8(t){return(e,n)=>{let r=!1;for(const i of Vh(t)){const s=wR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function wR(t,e,n){const r=t.field.isKeyField()?at.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?bc(l,u):bt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return bt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){du(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return s8(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=new Vn(at.comparator);function ea(){return xR}const y8=new Vn(at.comparator);function Eh(...t){let e=y8;for(const n of t)e=e.insert(n.key,n);return e}function v8(t){let e=y8;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $l(){return Bh()}function w8(){return Bh()}function Bh(){return new Dc(t=>t.toString(),(t,e)=>t.isEqual(e))}const bR=new Vn(at.comparator),_R=new Or(at.comparator);function Ft(...t){let e=_R;for(const n of t)e=e.add(n);return e}const SR=new Or(Qt);function AR(){return SR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:um(e)?"-0":e}}function x8(t){return{integerValue:""+t}}function ER(t,e){return tR(e)?x8(e):av(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(){this._=void 0}}function NR(t,e,n){return t instanceof fm?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&nv(s)&&(s=rv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof _f?_8(t,e):t instanceof Sf?S8(t,e):function(i,s){const o=b8(i,s),a=Xx(o)+Xx(i.Pe);return a2(o)&&a2(i.Pe)?x8(a):av(i.serializer,a)}(t,e)}function TR(t,e,n){return t instanceof _f?_8(t,e):t instanceof Sf?S8(t,e):n}function b8(t,e){return t instanceof dm?function(r){return a2(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class fm extends e0{}class _f extends e0{constructor(e){super(),this.elements=e}}function _8(t,e){const n=A8(e);for(const r of t.elements)n.some(i=>bo(i,r))||n.push(r);return{arrayValue:{values:n}}}class Sf extends e0{constructor(e){super(),this.elements=e}}function S8(t,e){let n=A8(e);for(const r of t.elements)n=n.filter(i=>!bo(i,r));return{arrayValue:{values:n}}}class dm extends e0{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Xx(t){return rr(t.integerValue||t.doubleValue)}function A8(t){return iv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function CR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof _f&&i instanceof _f||r instanceof Sf&&i instanceof Sf?xc(r.elements,i.elements,bo):r instanceof dm&&i instanceof dm?bo(r.Pe,i.Pe):r instanceof fm&&i instanceof fm}(t.transform,e.transform)}class PR{constructor(e,n){this.version=e,this.transformResults=n}}class pi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pi}static exists(e){return new pi(void 0,e)}static updateTime(e){return new pi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class t0{}function E8(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new n0(t.key,pi.none()):new $f(t.key,t.data,pi.none());{const n=t.data,r=Ti.empty();let i=new Or(Mr.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hl(t.key,r,new Xi(i.toArray()),pi.none())}}function kR(t,e,n){t instanceof $f?function(i,s,o){const a=i.value.clone(),l=Zx(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof hl?function(i,s,o){if(!wp(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Zx(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(N8(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Uh(t,e,n,r){return t instanceof $f?function(s,o,a,l){if(!wp(s.precondition,o))return a;const u=s.value.clone(),c=e4(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof hl?function(s,o,a,l){if(!wp(s.precondition,o))return a;const u=e4(s.fieldTransforms,l,o),c=o.data;return c.setAll(N8(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return wp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function IR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=b8(r.transform,i||null);s!=null&&(n===null&&(n=Ti.empty()),n.set(r.field,s))}return n||null}function Jx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&xc(r,i,(s,o)=>CR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class $f extends t0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hl extends t0{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function N8(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Zx(t,e,n){const r=new Map;un(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,TR(o,a,n[i]))}return r}function e4(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,NR(s,o,e))}return r}class n0 extends t0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LR extends t0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&kR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Uh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Uh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=w8();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=E8(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ft())}isEqual(e){return this.batchId===e.batchId&&xc(this.mutations,e.mutations,(n,r)=>Jx(n,r))&&xc(this.baseMutations,e.baseMutations,(n,r)=>Jx(n,r))}}class lv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){un(e.mutations.length===r.length);let i=function(){return bR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new lv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cr,$t;function MR(t){switch(t){default:return bt();case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0}}function T8(t){if(t===void 0)return Zo("GRPC error has no .code"),ke.UNKNOWN;switch(t){case cr.OK:return ke.OK;case cr.CANCELLED:return ke.CANCELLED;case cr.UNKNOWN:return ke.UNKNOWN;case cr.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case cr.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case cr.INTERNAL:return ke.INTERNAL;case cr.UNAVAILABLE:return ke.UNAVAILABLE;case cr.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case cr.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case cr.NOT_FOUND:return ke.NOT_FOUND;case cr.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case cr.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case cr.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case cr.ABORTED:return ke.ABORTED;case cr.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case cr.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case cr.DATA_LOSS:return ke.DATA_LOSS;default:return bt()}}($t=cr||(cr={}))[$t.OK=0]="OK",$t[$t.CANCELLED=1]="CANCELLED",$t[$t.UNKNOWN=2]="UNKNOWN",$t[$t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$t[$t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$t[$t.NOT_FOUND=5]="NOT_FOUND",$t[$t.ALREADY_EXISTS=6]="ALREADY_EXISTS",$t[$t.PERMISSION_DENIED=7]="PERMISSION_DENIED",$t[$t.UNAUTHENTICATED=16]="UNAUTHENTICATED",$t[$t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$t[$t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$t[$t.ABORTED=10]="ABORTED",$t[$t.OUT_OF_RANGE=11]="OUT_OF_RANGE",$t[$t.UNIMPLEMENTED=12]="UNIMPLEMENTED",$t[$t.INTERNAL=13]="INTERNAL",$t[$t.UNAVAILABLE=14]="UNAVAILABLE",$t[$t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=new Ql([4294967295,4294967295],0);function t4(t){const e=FR().encode(t),n=new XS;return n.update(e),new Uint8Array(n.digest())}function n4(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ql([n,r],0),new Ql([i,s],0)]}class uv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Nh(`Invalid padding: ${n}`);if(r<0)throw new Nh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Nh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Nh(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ql.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ql.fromNumber(r)));return i.compare(OR)===1&&(i=new Ql([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=t4(e),[r,i]=n4(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new uv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=t4(e),[r,i]=n4(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Nh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Hf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new r0(Et.min(),i,new Vn(Qt),ea(),Ft())}}class Hf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Hf(r,n,Ft(),Ft(),Ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class C8{constructor(e,n){this.targetId=e,this.me=n}}class P8{constructor(e,n,r=Br.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class r4{constructor(){this.fe=0,this.ge=s4(),this.pe=Br.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ft(),n=Ft(),r=Ft();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:bt()}}),new Hf(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=s4()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,un(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VR{constructor(e){this.Le=e,this.Be=new Map,this.ke=ea(),this.qe=i4(),this.Qe=new Vn(Qt)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:bt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(u2(s))if(r===0){const o=new at(s.path);this.Ue(n,o,ti.newNoDocument(o,Et.min()))}else un(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=su(r).toUint8Array()}catch(l){if(l instanceof o8)return wc("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new uv(o,i,s)}catch(l){return wc(l instanceof Nh?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&u2(a.target)){const l=new at(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ti.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ft();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new r0(e,n,this.Qe,this.ke,r);return this.ke=ea(),this.qe=i4(),this.Qe=new Vn(Qt),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new r4,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Or(Qt),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||Ye("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new r4),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function i4(){return new Vn(at.comparator)}function s4(){return new Vn(at.comparator)}const BR={asc:"ASCENDING",desc:"DESCENDING"},UR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zR={and:"AND",or:"OR"};class qR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function f2(t,e){return t.useProto3Json||Ym(e)?e:{value:e}}function pm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function k8(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $R(t,e){return pm(t,e.toTimestamp())}function yo(t){return un(!!t),Et.fromTimestamp(function(n){const r=nl(n);return new Qn(r.seconds,r.nanos)}(t))}function cv(t,e){return d2(t,e).canonicalString()}function d2(t,e){const n=function(i){return new _n(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function I8(t){const e=_n.fromString(t);return un(M8(e)),e}function p2(t,e){return cv(t.databaseId,e.path)}function cg(t,e){const n=I8(e);if(n.get(1)!==t.databaseId.projectId)throw new qe(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new qe(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new at(R8(n))}function L8(t,e){return cv(t.databaseId,e)}function HR(t){const e=I8(t);return e.length===4?_n.emptyPath():R8(e)}function m2(t){return new _n(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function R8(t){return un(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function o4(t,e,n){return{name:p2(t,e),fields:n.value.mapValue.fields}}function WR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:bt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(un(c===void 0||typeof c=="string"),Br.fromBase64String(c||"")):(un(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Br.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const c=u.code===void 0?ke.UNKNOWN:T8(u.code);return new qe(c,u.message||"")}(o);n=new P8(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=cg(t,r.document.name),s=yo(r.document.updateTime),o=r.document.createTime?yo(r.document.createTime):Et.min(),a=new Ti({mapValue:{fields:r.document.fields}}),l=ti.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new xp(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=cg(t,r.document),s=r.readTime?yo(r.readTime):Et.min(),o=ti.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xp([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=cg(t,r.document),s=r.removedTargetIds||[];n=new xp([],s,i,null)}else{if(!("filter"in e))return bt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new DR(i,s),a=r.targetId;n=new C8(a,o)}}return n}function GR(t,e){let n;if(e instanceof $f)n={update:o4(t,e.key,e.value)};else if(e instanceof n0)n={delete:p2(t,e.key)};else if(e instanceof hl)n={update:o4(t,e.key,e.data),updateMask:nj(e.fieldMask)};else{if(!(e instanceof LR))return bt();n={verify:p2(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof fm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _f)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Sf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof dm)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw bt()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$R(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:bt()}(t,e.precondition)),n}function KR(t,e){return t&&t.length>0?(un(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?yo(i.updateTime):yo(s);return o.isEqual(Et.min())&&(o=yo(s)),new PR(o,i.transformResults||[])}(n,e))):[]}function QR(t,e){return{documents:[L8(t,e.path)]}}function YR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=L8(t,i);const s=function(u){if(u.length!==0)return D8(Bs.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(m){return{field:Pu(m.field),direction:ZR(m.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=f2(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function XR(t){let e=HR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){un(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let s=[];n.where&&(s=function(d){const m=j8(d);return m instanceof Bs&&c8(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(m=>function(x){return new hm(ku(x.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(d){let m;return m=typeof d=="object"?d.value:d,Ym(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(d){const m=!!d.before,p=d.values||[];return new cm(p,m)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const m=!d.before,p=d.values||[];return new cm(p,m)}(n.endAt)),gR(e,i,o,s,a,"F",l,u)}function JR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function j8(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ku(n.unaryFilter.field);return dr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ku(n.unaryFilter.field);return dr.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ku(n.unaryFilter.field);return dr.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ku(n.unaryFilter.field);return dr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return bt()}}(t):t.fieldFilter!==void 0?function(n){return dr.create(ku(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Bs.create(n.compositeFilter.filters.map(r=>j8(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return bt()}}(n.compositeFilter.op))}(t):bt()}function ZR(t){return BR[t]}function ej(t){return UR[t]}function tj(t){return zR[t]}function Pu(t){return{fieldPath:t.canonicalString()}}function ku(t){return Mr.fromServerFormat(t.fieldPath)}function D8(t){return t instanceof dr?function(n){if(n.op==="=="){if(Wx(n.value))return{unaryFilter:{field:Pu(n.field),op:"IS_NAN"}};if(Hx(n.value))return{unaryFilter:{field:Pu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Wx(n.value))return{unaryFilter:{field:Pu(n.field),op:"IS_NOT_NAN"}};if(Hx(n.value))return{unaryFilter:{field:Pu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pu(n.field),op:ej(n.op),value:n.value}}}(t):t instanceof Bs?function(n){const r=n.getFilters().map(i=>D8(i));return r.length===1?r[0]:{compositeFilter:{op:tj(n.op),filters:r}}}(t):bt()}function nj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function M8(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n,r,i,s=Et.min(),o=Et.min(),a=Br.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Oa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Oa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.ct=e}}function ij(t){const e=XR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?h2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(){this.un=new oj}addToCollectionParentIndex(e,n){return this.un.add(n),De.resolve()}getCollectionParents(e,n){return De.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return De.resolve()}deleteFieldIndex(e,n){return De.resolve()}deleteAllFieldIndexes(e){return De.resolve()}createTargetIndexes(e,n){return De.resolve()}getDocumentsMatchingTarget(e,n){return De.resolve(null)}getIndexType(e,n){return De.resolve(0)}getFieldIndexes(e,n){return De.resolve([])}getNextCollectionGroupToUpdate(e){return De.resolve(null)}getMinOffset(e,n){return De.resolve(tl.min())}getMinOffsetFromCollectionGroup(e,n){return De.resolve(tl.min())}updateCollectionGroup(e,n,r){return De.resolve()}updateIndexEntries(e,n){return De.resolve()}}class oj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Or(_n.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Or(_n.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Sc(0)}static kn(){return new Sc(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this.changes=new Dc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ti.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?De.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Uh(r.mutation,i,Xi.empty(),Qn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ft()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ft()){const i=$l();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Eh();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=$l();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ft()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ea();const o=Bh(),a=function(){return Bh()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof hl)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),Uh(c.mutation,u,c.mutation.getFieldMask(),Qn.now())):o.set(u.key,Xi.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new lj(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Bh();let i=new Vn((o,a)=>o-a),s=Ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||Xi.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||Ft()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=w8();c.forEach(m=>{if(!s.has(m)){const p=E8(n.get(m),r.get(m));p!==null&&d.set(m,p),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return De.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return at.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):p8(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):De.resolve($l());let a=-1,l=s;return o.next(u=>De.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?De.resolve():this.remoteDocumentCache.getEntry(e,c).next(m=>{l=l.insert(c,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Ft())).next(c=>({batchId:a,changes:v8(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new at(n)).next(r=>{let i=Eh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Eh();return this.indexManager.getCollectionParents(e,s).next(a=>De.forEach(a,l=>{const u=function(d,m){return new qf(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(c=>{c.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,ti.newInvalidDocument(c)))});let a=Eh();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&Uh(c.mutation,u,Xi.empty(),Qn.now()),Zm(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return De.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:yo(i.createTime)}}(n)),De.resolve()}getNamedQuery(e,n){return De.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:ij(i.bundledQuery),readTime:yo(i.readTime)}}(n)),De.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(){this.overlays=new Vn(at.comparator),this.Ir=new Map}getOverlay(e,n){return De.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$l();return De.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),De.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),De.resolve()}getOverlaysForCollection(e,n,r){const i=$l(),s=n.length+1,o=new at(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return De.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Vn((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=$l(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=$l(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return De.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new jR(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ft(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(){this.sessionToken=Br.EMPTY_BYTE_STRING}getSessionToken(e){return De.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,De.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this.Tr=new Or(Ar.Er),this.dr=new Or(Ar.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ar(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ar(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new at(new _n([])),r=new Ar(n,e),i=new Ar(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new at(new _n([])),r=new Ar(n,e),i=new Ar(n,e+1);let s=Ft();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ar(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ar{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return at.comparator(e.key,n.key)||Qt(e.wr,n.wr)}static Ar(e,n){return Qt(e.wr,n.wr)||at.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Or(Ar.Er)}checkEmpty(e){return De.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new RR(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Ar(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return De.resolve(o)}lookupMutationBatch(e,n){return De.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return De.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return De.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return De.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ar(n,0),i=new Ar(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),De.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Or(Qt);return n.forEach(i=>{const s=new Ar(i,0),o=new Ar(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),De.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;at.isDocumentKey(s)||(s=s.child(""));const o=new Ar(new at(s),0);let a=new Or(Qt);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),De.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){un(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return De.forEach(n.mutations,i=>{const s=new Ar(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ar(n,0),i=this.br.firstAfterOrEqual(r);return De.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,De.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.Mr=e,this.docs=function(){return new Vn(at.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return De.resolve(r?r.document.mutableCopy():ti.newInvalidDocument(n))}getEntries(e,n){let r=ea();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ti.newInvalidDocument(i))}),De.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ea();const o=n.path,a=new at(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||XL(YL(c),r)<=0||(i.has(c.key)||Zm(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return De.resolve(s)}getAllFromCollectionGroup(e,n,r,i){bt()}Or(e,n){return De.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new mj(this)}getSize(e){return De.resolve(this.size)}}class mj extends aj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),De.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.persistence=e,this.Nr=new Dc(n=>sv(n),ov),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hv,this.targetCount=0,this.kr=Sc.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),De.resolve()}getLastRemoteSnapshotVersion(e){return De.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return De.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),De.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),De.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Sc(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,De.resolve()}updateTargetData(e,n){return this.Kn(n),De.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,De.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),De.waitFor(s).next(()=>i)}getTargetCount(e){return De.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return De.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),De.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),De.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),De.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return De.resolve(r)}containsKey(e,n){return De.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new tv(0),this.Kr=!1,this.Kr=!0,this.$r=new fj,this.referenceDelegate=e(this),this.Ur=new gj(this),this.indexManager=new sj,this.remoteDocumentCache=function(i){return new pj(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new rj(n),this.Gr=new cj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new hj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new dj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){Ye("MemoryPersistence","Starting transaction:",e);const i=new vj(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return De.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class vj extends ZL{constructor(e){super(),this.currentSequenceNumber=e}}class fv{constructor(e){this.persistence=e,this.Jr=new hv,this.Yr=null}static Zr(e){return new fv(e)}get Xr(){if(this.Yr)return this.Yr;throw bt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),De.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),De.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),De.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.Xr,r=>{const i=at.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Et.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return De.or([()=>De.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ft(),i=Ft();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new dv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _I()?8:eR(xI())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new wj;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(gh()<=Wt.DEBUG&&Ye("QueryEngine","SDK will not create cache indexes for query:",Cu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),De.resolve()):(gh()<=Wt.DEBUG&&Ye("QueryEngine","Query:",Cu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(gh()<=Wt.DEBUG&&Ye("QueryEngine","The SDK decides to create cache indexes for query:",Cu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,go(n))):De.resolve())}Yi(e,n){if(Yx(n))return De.resolve(null);let r=go(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=h2(n,null,"F"),r=go(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ft(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,h2(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return Yx(n)||i.isEqual(Et.min())?De.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?De.resolve(null):(gh()<=Wt.DEBUG&&Ye("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Cu(n)),this.rs(e,o,n,QL(i,-1)).next(a=>a))})}ts(e,n){let r=new Or(g8(e));return n.forEach((i,s)=>{Zm(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return gh()<=Wt.DEBUG&&Ye("QueryEngine","Using full collection scan to execute query:",Cu(n)),this.Ji.getDocumentsMatchingQuery(e,n,tl.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Vn(Qt),this._s=new Dc(s=>sv(s),ov),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function _j(t,e,n,r){return new bj(t,e,n,r)}async function F8(t,e){const n=Nt(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ft();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function Sj(t,e){const n=Nt(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,m=d.keys();let p=De.resolve();return m.forEach(x=>{p=p.next(()=>c.getEntry(l,x)).next(E=>{const C=u.docVersions.get(x);un(C!==null),E.version.compareTo(C)<0&&(d.applyToRemoteDocument(E,u),E.isValidDocument()&&(E.setReadTime(u.commitVersion),c.addEntry(E)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ft();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function O8(t){const e=Nt(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Aj(t,e){const n=Nt(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((c,d)=>{const m=i.get(d);if(!m)return;a.push(n.Ur.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,c.addedDocuments,d)));let p=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(Br.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),i=i.insert(d,p),function(E,C,w){return E.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,p,c)&&a.push(n.Ur.updateTargetData(s,p))});let l=ea(),u=Ft();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Ej(s,o,e.documentUpdates).next(c=>{l=c.Ps,u=c.Is})),!r.isEqual(Et.min())){const c=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return De.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function Ej(t,e,n){let r=Ft(),i=Ft();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ea();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Et.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ye("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function Nj(t,e){const n=Nt(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Tj(t,e){const n=Nt(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,De.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Oa(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function g2(t,e,n){const r=Nt(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!zf(o))throw o;Ye("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function a4(t,e,n){const r=Nt(t);let i=Et.min(),s=Ft();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=Nt(l),m=d._s.get(c);return m!==void 0?De.resolve(d.os.get(m)):d.Ur.getTargetData(u,c)}(r,o,go(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Et.min(),n?s:Ft())).next(a=>(Cj(r,vR(e),a),{documents:a,Ts:s})))}function Cj(t,e,n){let r=t.us.get(e)||Et.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class l4{constructor(){this.activeTargetIds=AR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pj{constructor(){this.so=new l4,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new l4,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ye("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ye("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd=null;function hg(){return Hd===null?Hd=function(){return 268435456+Math.round(2147483648*Math.random())}():Hd++,"0x"+Hd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="WebChannelConnection";class Rj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=hg(),l=this.xo(n,r.toUriEncodedString());Ye("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(c=>(Ye("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw wc("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Ij[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=hg();return new Promise((o,a)=>{const l=new JS;l.setWithCredentials(!0),l.listenOnce(ZS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case yp.NO_ERROR:const c=l.getResponseJson();Ye(Kr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(c)),o(c);break;case yp.TIMEOUT:Ye(Kr,`RPC '${e}' ${s} timed out`),a(new qe(ke.DEADLINE_EXCEEDED,"Request time out"));break;case yp.HTTP_ERROR:const d=l.getStatus();if(Ye(Kr,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const x=function(C){const w=C.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(w)>=0?w:ke.UNKNOWN}(p.status);a(new qe(x,p.message))}else a(new qe(ke.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new qe(ke.UNAVAILABLE,"Connection failed."));break;default:bt()}}finally{Ye(Kr,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Ye(Kr,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=hg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=n8(),a=t8(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Ye(Kr,`Creating RPC '${e}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);let m=!1,p=!1;const x=new Lj({Io:C=>{p?Ye(Kr,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(m||(Ye(Kr,`Opening RPC '${e}' stream ${i} transport.`),d.open(),m=!0),Ye(Kr,`RPC '${e}' stream ${i} sending:`,C),d.send(C))},To:()=>d.close()}),E=(C,w,A)=>{C.listen(w,N=>{try{A(N)}catch(R){setTimeout(()=>{throw R},0)}})};return E(d,Ah.EventType.OPEN,()=>{p||(Ye(Kr,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),E(d,Ah.EventType.CLOSE,()=>{p||(p=!0,Ye(Kr,`RPC '${e}' stream ${i} transport closed`),x.So())}),E(d,Ah.EventType.ERROR,C=>{p||(p=!0,wc(Kr,`RPC '${e}' stream ${i} transport errored:`,C),x.So(new qe(ke.UNAVAILABLE,"The operation could not be completed")))}),E(d,Ah.EventType.MESSAGE,C=>{var w;if(!p){const A=C.data[0];un(!!A);const N=A,R=N.error||((w=N[0])===null||w===void 0?void 0:w.error);if(R){Ye(Kr,`RPC '${e}' stream ${i} received error:`,R);const z=R.status;let Q=function(k){const M=cr[k];if(M!==void 0)return T8(M)}(z),L=R.message;Q===void 0&&(Q=ke.INTERNAL,L="Unknown error status: "+z+" with message "+R.message),p=!0,x.So(new qe(Q,L)),d.close()}else Ye(Kr,`RPC '${e}' stream ${i} received:`,A),x.bo(A)}}),E(a,e8.STAT_EVENT,C=>{C.stat===s2.PROXY?Ye(Kr,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===s2.NOPROXY&&Ye(Kr,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function fg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t){return new qR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Ye("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new V8(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===ke.RESOURCE_EXHAUSTED?(Zo(n.toString()),Zo("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===ke.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new qe(ke.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ye("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(Ye("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jj extends B8{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=WR(this.serializer,e),r=function(s){if(!("targetChange"in s))return Et.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Et.min():o.readTime?yo(o.readTime):Et.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=m2(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=u2(l)?{documents:QR(s,l)}:{query:YR(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=k8(s,o.resumeToken);const u=f2(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Et.min())>0){a.readTime=pm(s,o.snapshotVersion.toTimestamp());const u=f2(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=JR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=m2(this.serializer),n.removeTarget=e,this.a_(n)}}class Dj extends B8{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return un(!!e.streamToken),this.lastStreamToken=e.streamToken,un(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){un(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=KR(e.writeResults,e.commitTime),r=yo(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=m2(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>GR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new qe(ke.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,d2(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new qe(ke.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,d2(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new qe(ke.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Fj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Zo(n),this.D_=!1):Ye("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{pu(this)&&(Ye("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Nt(l);u.L_.add(4),await Wf(u),u.q_.set("Unknown"),u.L_.delete(4),await s0(u)}(this))})}),this.q_=new Fj(r,i)}}async function s0(t){if(pu(t))for(const e of t.B_)await e(!0)}async function Wf(t){for(const e of t.B_)await e(!1)}function U8(t,e){const n=Nt(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),yv(n)?gv(n):Mc(n).r_()&&mv(n,e))}function pv(t,e){const n=Nt(t),r=Mc(n);n.N_.delete(e),r.r_()&&z8(n,e),n.N_.size===0&&(r.r_()?r.o_():pu(n)&&n.q_.set("Unknown"))}function mv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mc(t).A_(e)}function z8(t,e){t.Q_.xe(e),Mc(t).R_(e)}function gv(t){t.Q_=new VR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Mc(t).start(),t.q_.v_()}function yv(t){return pu(t)&&!Mc(t).n_()&&t.N_.size>0}function pu(t){return Nt(t).L_.size===0}function q8(t){t.Q_=void 0}async function Vj(t){t.q_.set("Online")}async function Bj(t){t.N_.forEach((e,n)=>{mv(t,e)})}async function Uj(t,e){q8(t),yv(t)?(t.q_.M_(e),gv(t)):t.q_.set("Unknown")}async function zj(t,e,n){if(t.q_.set("Online"),e instanceof P8&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){Ye("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await mm(t,r)}else if(e instanceof xp?t.Q_.Ke(e):e instanceof C8?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Et.min()))try{const r=await O8(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.N_.get(u);c&&s.N_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.N_.get(l);if(!c)return;s.N_.set(l,c.withResumeToken(Br.EMPTY_BYTE_STRING,c.snapshotVersion)),z8(s,l);const d=new Oa(c.target,l,u,c.sequenceNumber);mv(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Ye("RemoteStore","Failed to raise snapshot:",r),await mm(t,r)}}async function mm(t,e,n){if(!zf(e))throw e;t.L_.add(1),await Wf(t),t.q_.set("Offline"),n||(n=()=>O8(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ye("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await s0(t)})}function $8(t,e){return e().catch(n=>mm(t,n,e))}async function o0(t){const e=Nt(t),n=rl(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qj(e);)try{const i=await Nj(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,$j(e,i)}catch(i){await mm(e,i)}H8(e)&&W8(e)}function qj(t){return pu(t)&&t.O_.length<10}function $j(t,e){t.O_.push(e);const n=rl(t);n.r_()&&n.V_&&n.m_(e.mutations)}function H8(t){return pu(t)&&!rl(t).n_()&&t.O_.length>0}function W8(t){rl(t).start()}async function Hj(t){rl(t).p_()}async function Wj(t){const e=rl(t);for(const n of t.O_)e.m_(n.mutations)}async function Gj(t,e,n){const r=t.O_.shift(),i=lv.from(r,e,n);await $8(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await o0(t)}async function Kj(t,e){e&&rl(t).V_&&await async function(r,i){if(function(o){return MR(o)&&o!==ke.ABORTED}(i.code)){const s=r.O_.shift();rl(r).s_(),await $8(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await o0(r)}}(t,e),H8(t)&&W8(t)}async function c4(t,e){const n=Nt(t);n.asyncQueue.verifyOperationInProgress(),Ye("RemoteStore","RemoteStore received new credentials");const r=pu(n);n.L_.add(3),await Wf(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await s0(n)}async function Qj(t,e){const n=Nt(t);e?(n.L_.delete(2),await s0(n)):e||(n.L_.add(2),await Wf(n),n.q_.set("Unknown"))}function Mc(t){return t.K_||(t.K_=function(n,r,i){const s=Nt(n);return s.w_(),new jj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Vj.bind(null,t),Ro:Bj.bind(null,t),mo:Uj.bind(null,t),d_:zj.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),yv(t)?gv(t):t.q_.set("Unknown")):(await t.K_.stop(),q8(t))})),t.K_}function rl(t){return t.U_||(t.U_=function(n,r,i){const s=Nt(n);return s.w_(),new Dj(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Hj.bind(null,t),mo:Kj.bind(null,t),f_:Wj.bind(null,t),g_:Gj.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await o0(t)):(await t.U_.stop(),t.O_.length>0&&(Ye("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new vv(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new qe(ke.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wv(t,e){if(Zo("AsyncQueue",`${e}: ${t}`),zf(t))return new qe(ke.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e){this.comparator=e?(n,r)=>e(n,r)||at.comparator(n.key,r.key):(n,r)=>at.comparator(n.key,r.key),this.keyedMap=Eh(),this.sortedSet=new Vn(this.comparator)}static emptySet(e){return new sc(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new sc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4{constructor(){this.W_=new Vn(at.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):bt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ac{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Ac(e,n,sc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Xj{constructor(){this.queries=f4(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Nt(n),s=i.queries;i.queries=f4(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new qe(ke.ABORTED,"Firestore shutting down"))}}function f4(){return new Dc(t=>m8(t),Jm)}async function xv(t,e){const n=Nt(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Yj,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=wv(o,`Initialization of query '${Cu(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&_v(n)}async function bv(t,e){const n=Nt(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Jj(t,e){const n=Nt(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&_v(n)}function Zj(t,e,n){const r=Nt(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function _v(t){t.Y_.forEach(e=>{e.next()})}var y2,d4;(d4=y2||(y2={})).ea="default",d4.Cache="cache";class Sv{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ac(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==y2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e){this.key=e}}class K8{constructor(e){this.key=e}}class e9{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ft(),this.mutatedKeys=Ft(),this.Aa=g8(e),this.Ra=new sc(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new h4,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const m=i.get(c),p=Zm(this.query,d)?d:null,x=!!m&&this.mutatedKeys.has(m.key),E=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let C=!1;m&&p?m.data.isEqual(p.data)?x!==E&&(r.track({type:3,doc:p}),C=!0):this.ga(m,p)||(r.track({type:2,doc:p}),C=!0,(l&&this.Aa(p,l)>0||u&&this.Aa(p,u)<0)&&(a=!0)):!m&&p?(r.track({type:0,doc:p}),C=!0):m&&!p&&(r.track({type:1,doc:m}),C=!0,(l||u)&&(a=!0)),C&&(p?(o=o.add(p),s=E?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((c,d)=>function(p,x){const E=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bt()}};return E(p)-E(x)}(c.type,d.type)||this.Aa(c.doc,d.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Ac(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new h4,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ft(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new K8(r))}),this.da.forEach(r=>{e.has(r)||n.push(new G8(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ft();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ac.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class t9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class n9{constructor(e){this.key=e,this.va=!1}}class r9{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Dc(a=>m8(a),Jm),this.Ma=new Map,this.xa=new Set,this.Oa=new Vn(at.comparator),this.Na=new Map,this.La=new hv,this.Ba={},this.ka=new Map,this.qa=Sc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function i9(t,e,n=!0){const r=eA(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Q8(r,e,n,!0),i}async function s9(t,e){const n=eA(t);await Q8(n,e,!0,!1)}async function Q8(t,e,n,r){const i=await Tj(t.localStore,go(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await o9(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&U8(t.remoteStore,i),a}async function o9(t,e,n,r,i){t.Ka=(d,m,p)=>async function(E,C,w,A){let N=C.view.ma(w);N.ns&&(N=await a4(E.localStore,C.query,!1).then(({documents:L})=>C.view.ma(L,N)));const R=A&&A.targetChanges.get(C.targetId),z=A&&A.targetMismatches.get(C.targetId)!=null,Q=C.view.applyChanges(N,E.isPrimaryClient,R,z);return m4(E,C.targetId,Q.wa),Q.snapshot}(t,d,m,p);const s=await a4(t.localStore,e,!0),o=new e9(e,s.Ts),a=o.ma(s.documents),l=Hf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);m4(t,n,u.wa);const c=new t9(e,n,o);return t.Fa.set(e,c),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function a9(t,e,n){const r=Nt(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Jm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await g2(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&pv(r.remoteStore,i.targetId),v2(r,i.targetId)}).catch(Uf)):(v2(r,i.targetId),await g2(r.localStore,i.targetId,!0))}async function l9(t,e){const n=Nt(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pv(n.remoteStore,r.targetId))}async function u9(t,e,n){const r=g9(t);try{const i=await function(o,a){const l=Nt(o),u=Qn.now(),c=a.reduce((p,x)=>p.add(x.key),Ft());let d,m;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let x=ea(),E=Ft();return l.cs.getEntries(p,c).next(C=>{x=C,x.forEach((w,A)=>{A.isValidDocument()||(E=E.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,x)).next(C=>{d=C;const w=[];for(const A of a){const N=IR(A,d.get(A.key).overlayedDocument);N!=null&&w.push(new hl(A.key,N,a8(N.value.mapValue),pi.exists(!0)))}return l.mutationQueue.addMutationBatch(p,u,w,a)}).next(C=>{m=C;const w=C.applyToLocalDocumentSet(d,E);return l.documentOverlayCache.saveOverlays(p,C.batchId,w)})}).then(()=>({batchId:m.batchId,changes:v8(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Vn(Qt)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Gf(r,i.changes),await o0(r.remoteStore)}catch(i){const s=wv(i,"Failed to persist write");n.reject(s)}}async function Y8(t,e){const n=Nt(t);try{const r=await Aj(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(un(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?un(o.va):i.removedDocuments.size>0&&(un(o.va),o.va=!1))}),await Gf(n,r,e)}catch(r){await Uf(r)}}function p4(t,e,n){const r=Nt(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Nt(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const m of d.j_)m.Z_(a)&&(u=!0)}),u&&_v(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function c9(t,e,n){const r=Nt(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Vn(at.comparator);o=o.insert(s,ti.newNoDocument(s,Et.min()));const a=Ft().add(s),l=new r0(Et.min(),new Map,new Vn(Qt),o,a);await Y8(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Av(r)}else await g2(r.localStore,e,!1).then(()=>v2(r,e,n)).catch(Uf)}async function h9(t,e){const n=Nt(t),r=e.batch.batchId;try{const i=await Sj(n.localStore,e);J8(n,r,null),X8(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Gf(n,i)}catch(i){await Uf(i)}}async function f9(t,e,n){const r=Nt(t);try{const i=await function(o,a){const l=Nt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(un(d!==null),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);J8(r,e,n),X8(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Gf(r,i)}catch(i){await Uf(i)}}function X8(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function J8(t,e,n){const r=Nt(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function v2(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Z8(t,r)})}function Z8(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(pv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Av(t))}function m4(t,e,n){for(const r of n)r instanceof G8?(t.La.addReference(r.key,e),d9(t,r)):r instanceof K8?(Ye("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Z8(t,r.key)):bt()}function d9(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(Ye("SyncEngine","New document in limbo: "+n),t.xa.add(r),Av(t))}function Av(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new at(_n.fromString(e)),r=t.qa.next();t.Na.set(r,new n9(n)),t.Oa=t.Oa.insert(n,r),U8(t.remoteStore,new Oa(go(Xm(n.path)),r,"TargetPurposeLimboResolution",tv.oe))}}async function Gf(t,e,n){const r=Nt(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=dv.Wi(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const c=Nt(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>De.forEach(u,m=>De.forEach(m.$i,p=>c.persistence.referenceDelegate.addReference(d,m.targetId,p)).next(()=>De.forEach(m.Ui,p=>c.persistence.referenceDelegate.removeReference(d,m.targetId,p)))))}catch(d){if(!zf(d))throw d;Ye("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const m=d.targetId;if(!d.fromCache){const p=c.os.get(m),x=p.snapshotVersion,E=p.withLastLimboFreeSnapshotVersion(x);c.os=c.os.insert(m,E)}}}(r.localStore,s))}async function p9(t,e){const n=Nt(t);if(!n.currentUser.isEqual(e)){Ye("SyncEngine","User change. New user:",e.toKey());const r=await F8(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new qe(ke.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gf(n,r.hs)}}function m9(t,e){const n=Nt(t),r=n.Na.get(e);if(r&&r.va)return Ft().add(r.key);{let i=Ft();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function eA(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=m9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c9.bind(null,e),e.Ca.d_=Jj.bind(null,e.eventManager),e.Ca.$a=Zj.bind(null,e.eventManager),e}function g9(t){const e=Nt(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=h9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=f9.bind(null,e),e}class gm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=i0(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return _j(this.persistence,new xj,e.initialUser,this.serializer)}Ga(e){return new yj(fv.Zr,this.serializer)}Wa(e){return new Pj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gm.provider={build:()=>new gm};class w2{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>p4(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=p9.bind(null,this.syncEngine),await Qj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Xj}()}createDatastore(e){const n=i0(e.databaseInfo.databaseId),r=function(s){return new Rj(s)}(e.databaseInfo);return function(s,o,a,l){return new Mj(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Oj(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>p4(this.syncEngine,n,0),function(){return u4.D()?new u4:new kj}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,c){const d=new r9(i,s,o,a,l,u);return c&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Nt(i);Ye("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Wf(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}w2.provider={build:()=>new w2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Zo("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y9{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Zr.UNAUTHENTICATED,this.clientId=i8.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{Ye("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Ye("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=wv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dg(t,e){t.asyncQueue.verifyOperationInProgress(),Ye("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await F8(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function g4(t,e){t.asyncQueue.verifyOperationInProgress();const n=await v9(t);Ye("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>c4(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>c4(e.remoteStore,i)),t._onlineComponents=e}async function v9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ye("FirestoreClient","Using user provided OfflineComponentProvider");try{await dg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===ke.FAILED_PRECONDITION||i.code===ke.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;wc("Error using user provided cache. Falling back to memory cache: "+n),await dg(t,new gm)}}else Ye("FirestoreClient","Using default OfflineComponentProvider"),await dg(t,new gm);return t._offlineComponents}async function tA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ye("FirestoreClient","Using user provided OnlineComponentProvider"),await g4(t,t._uninitializedComponentsProvider._online)):(Ye("FirestoreClient","Using default OnlineComponentProvider"),await g4(t,new w2))),t._onlineComponents}function w9(t){return tA(t).then(e=>e.syncEngine)}async function ym(t){const e=await tA(t),n=e.eventManager;return n.onListen=i9.bind(null,e.syncEngine),n.onUnlisten=a9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=s9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=l9.bind(null,e.syncEngine),n}function x9(t,e,n={}){const r=new Go;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Ev({next:m=>{c.Za(),o.enqueueAndForget(()=>bv(s,d));const p=m.docs.has(a);!p&&m.fromCache?u.reject(new qe(ke.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&l&&l.source==="server"?u.reject(new qe(ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new Sv(Xm(a.path),c,{includeMetadataChanges:!0,_a:!0});return xv(s,d)}(await ym(t),t.asyncQueue,e,n,r)),r.promise}function b9(t,e,n={}){const r=new Go;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new Ev({next:m=>{c.Za(),o.enqueueAndForget(()=>bv(s,d)),m.fromCache&&l.source==="server"?u.reject(new qe(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),d=new Sv(a,c,{includeMetadataChanges:!0,_a:!0});return xv(s,d)}(await ym(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y4=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t,e,n){if(!n)throw new qe(ke.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _9(t,e,n,r){if(e===!0&&r===!0)throw new qe(ke.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function v4(t){if(!at.isDocumentKey(t))throw new qe(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function w4(t){if(at.isDocumentKey(t))throw new qe(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function a0(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":bt()}function mi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new qe(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=a0(t);throw new qe(ke.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new qe(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new qe(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new qe(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new qe(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new qe(ke.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class l0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new x4({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new qe(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new qe(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new x4(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BL;switch(r.type){case"firstParty":return new $L(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new qe(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=y4.get(n);r&&(Ye("ComponentProvider","Removing Datastore"),y4.delete(n),r.terminate())}(this),Promise.resolve()}}function S9(t,e,n,r={}){var i;const s=(t=mi(t,l0))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&wc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Zr.MOCK_USER;else{a=wI(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new qe(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Zr(u)}t._authCredentials=new UL(new r8(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mu(this.firestore,e,this._query)}}class ri{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ri(this.firestore,e,this._key)}}class Ja extends mu{constructor(e,n,r){super(e,n,Xm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ri(this.firestore,null,new at(e))}withConverter(e){return new Ja(this.firestore,e,this._path)}}function fl(t,e,...n){if(t=xs(t),rA("collection","path",e),t instanceof l0){const r=_n.fromString(e,...n);return w4(r),new Ja(t,null,r)}{if(!(t instanceof ri||t instanceof Ja))throw new qe(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_n.fromString(e,...n));return w4(r),new Ja(t.firestore,null,r)}}function zs(t,e,...n){if(t=xs(t),arguments.length===1&&(e=i8.newId()),rA("doc","path",e),t instanceof l0){const r=_n.fromString(e,...n);return v4(r),new ri(t,null,new at(r))}{if(!(t instanceof ri||t instanceof Ja))throw new qe(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(_n.fromString(e,...n));return v4(r),new ri(t.firestore,t instanceof Ja?t.converter:null,new at(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new V8(this,"async_queue_retry"),this.Vu=()=>{const r=fg();r&&Ye("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=fg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=fg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Go;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!zf(e))throw e;Ye("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Zo("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=vv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&bt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function _4(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class _o extends l0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new b4,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new b4(e),this._firestoreClient=void 0,await e}}}function A9(t,e){const n=typeof t=="object"?t:CL(),r=typeof t=="string"?t:"(default)",i=AL(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=yI("firestore");s&&S9(i,...s)}return i}function Kf(t){if(t._terminated)throw new qe(ke.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||E9(t),t._firestoreClient}function E9(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,c){return new rR(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,nA(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new y9(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ec(Br.fromBase64String(e))}catch(n){throw new qe(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ec(Br.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new qe(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new qe(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new qe(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qt(this._lat,e._lat)||Qt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N9=/^__.*__$/;class T9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hl(e,this.data,this.fieldMask,n,this.fieldTransforms):new $f(e,this.data,n,this.fieldTransforms)}}class iA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new hl(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function sA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bt()}}class Pv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Pv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return vm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(sA(this.Cu)&&N9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class C9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||i0(e)}Qu(e,n,r,i=!1){return new Pv({Cu:e,methodName:n,qu:r,path:Mr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yf(t){const e=t._freezeSettings(),n=i0(t._databaseId);return new C9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kv(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Iv("Data must be an object, but it was:",o,r);const a=lA(r,o);let l,u;if(s.merge)l=new Xi(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const m=x2(e,d,n);if(!o.contains(m))throw new qe(ke.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);cA(c,m)||c.push(m)}l=new Xi(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new T9(new Ti(a),l,u)}class u0 extends Nv{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof u0}}function oA(t,e,n,r){const i=t.Qu(1,e,n);Iv("Data must be an object, but it was:",i,r);const s=[],o=Ti.empty();du(r,(l,u)=>{const c=Lv(e,l,n);u=xs(u);const d=i.Nu(c);if(u instanceof u0)s.push(c);else{const m=Xf(u,d);m!=null&&(s.push(c),o.set(c,m))}});const a=new Xi(s);return new iA(o,a,i.fieldTransforms)}function aA(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[x2(e,r,n)],l=[i];if(s.length%2!=0)throw new qe(ke.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(x2(e,s[m])),l.push(s[m+1]);const u=[],c=Ti.empty();for(let m=a.length-1;m>=0;--m)if(!cA(u,a[m])){const p=a[m];let x=l[m];x=xs(x);const E=o.Nu(p);if(x instanceof u0)u.push(p);else{const C=Xf(x,E);C!=null&&(u.push(p),c.set(p,C))}}const d=new Xi(u);return new iA(c,d,o.fieldTransforms)}function P9(t,e,n,r=!1){return Xf(n,t.Qu(r?4:3,e))}function Xf(t,e){if(uA(t=xs(t)))return Iv("Unsupported field value:",e,t),lA(t,e);if(t instanceof Nv)return function(r,i){if(!sA(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Xf(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=xs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ER(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Qn.fromDate(r);return{timestampValue:pm(i.serializer,s)}}if(r instanceof Qn){const s=new Qn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pm(i.serializer,s)}}if(r instanceof Tv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ec)return{bytesValue:k8(i.serializer,r._byteString)};if(r instanceof ri){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Cv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return av(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${a0(r)}`)}(t,e)}function lA(t,e){const n={};return s8(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):du(t,(r,i)=>{const s=Xf(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function uA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Qn||t instanceof Tv||t instanceof Ec||t instanceof ri||t instanceof Nv||t instanceof Cv)}function Iv(t,e,n){if(!uA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=a0(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function x2(t,e,n){if((e=xs(e))instanceof Qf)return e._internalPath;if(typeof e=="string")return Lv(t,e);throw vm("Field path arguments must be of type string or ",t,!1,void 0,n)}const k9=new RegExp("[~\\*/\\[\\]]");function Lv(t,e,n){if(e.search(k9)>=0)throw vm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qf(...e.split("."))._internalPath}catch{throw vm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vm(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new qe(ke.INVALID_ARGUMENT,a+t+l)}function cA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ri(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new I9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class I9 extends hA{data(){return super.data()}}function Rv(t,e){return typeof e=="string"?Lv(t,e):e instanceof Qf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new qe(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jv{}class L9 extends jv{}function R9(t,e,...n){let r=[];e instanceof jv&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Dv).length,a=s.filter(l=>l instanceof c0).length;if(o>1||o>0&&a>0)throw new qe(ke.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class c0 extends L9{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new c0(e,n,r)}_apply(e){const n=this._parse(e);return dA(e._query,n),new mu(e.firestore,e.converter,c2(e._query,n))}_parse(e){const n=Yf(e.firestore);return function(s,o,a,l,u,c,d){let m;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new qe(ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){E4(d,c);const p=[];for(const x of d)p.push(A4(l,s,x));m={arrayValue:{values:p}}}else m=A4(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||E4(d,c),m=P9(a,o,d,c==="in"||c==="not-in");return dr.create(u,c,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function S4(t,e,n){const r=e,i=Rv("where",t);return c0._create(i,r,n)}class Dv extends jv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Bs.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)dA(o,l),o=c2(o,l)}(e._query,n),new mu(e.firestore,e.converter,c2(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function A4(t,e,n){if(typeof(n=xs(n))=="string"){if(n==="")throw new qe(ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!p8(e)&&n.indexOf("/")!==-1)throw new qe(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(_n.fromString(n));if(!at.isDocumentKey(r))throw new qe(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $x(t,new at(r))}if(n instanceof ri)return $x(t,n._key);throw new qe(ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${a0(n)}.`)}function E4(t,e){if(!Array.isArray(t)||t.length===0)throw new qe(ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dA(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new qe(ke.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new qe(ke.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class j9{convertValue(e,n="none"){switch(ou(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(su(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw bt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return du(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>rr(o.doubleValue));return new Cv(s)}convertGeoPoint(e){return new Tv(rr(e.latitude),rr(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=rv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wf(e));default:return null}}convertTimestamp(e){const n=nl(e);return new Qn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=_n.fromString(e);un(M8(r));const i=new xf(r.get(1),r.get(3)),s=new at(r.popFirst(5));return i.isEqual(n)||Zo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pA extends hA{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new bp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class bp extends pA{data(e={}){return super.data(e)}}class mA{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Th(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bp(this._firestore,this._userDataWriter,r.key,r,new Th(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new qe(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new bp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Th(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new bp(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Th(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:D9(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function D9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(t){t=mi(t,ri);const e=mi(t.firestore,_o);return x9(Kf(e),t._key).then(n=>vA(e,t,n))}class Fv extends j9{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ec(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ri(this.firestore,null,n)}}function Jf(t){t=mi(t,mu);const e=mi(t.firestore,_o),n=Kf(e),r=new Fv(e);return fA(t._query),b9(n,t._query).then(i=>new mA(e,r,t,i))}function F9(t,e,n){t=mi(t,ri);const r=mi(t.firestore,_o),i=Mv(t.converter,e,n);return ed(r,[kv(Yf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,pi.none())])}function gA(t,e,n,...r){t=mi(t,ri);const i=mi(t.firestore,_o),s=Yf(i);let o;return o=typeof(e=xs(e))=="string"||e instanceof Qf?aA(s,"updateDoc",t._key,e,n,r):oA(s,"updateDoc",t._key,e),ed(i,[o.toMutation(t._key,pi.exists(!0))])}function yA(t){return ed(mi(t.firestore,_o),[new n0(t._key,pi.none())])}function Zf(t,e){const n=mi(t.firestore,_o),r=zs(t),i=Mv(t.converter,e);return ed(n,[kv(Yf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,pi.exists(!1))]).then(()=>r)}function Ov(t,...e){var n,r,i;t=xs(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||_4(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(_4(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let l,u,c;if(t instanceof ri)u=mi(t.firestore,_o),c=Xm(t._key.path),l={next:d=>{e[o]&&e[o](vA(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=mi(t,mu);u=mi(d.firestore,_o),c=d._query;const m=new Fv(u);l={next:p=>{e[o]&&e[o](new mA(u,m,d,p))},error:e[o+1],complete:e[o+2]},fA(t._query)}return function(m,p,x,E){const C=new Ev(E),w=new Sv(p,C,x);return m.asyncQueue.enqueueAndForget(async()=>xv(await ym(m),w)),()=>{C.Za(),m.asyncQueue.enqueueAndForget(async()=>bv(await ym(m),w))}}(Kf(u),c,a,l)}function ed(t,e){return function(r,i){const s=new Go;return r.asyncQueue.enqueueAndForget(async()=>u9(await w9(r),i,s)),s.promise}(Kf(t),e)}function vA(t,e,n){const r=n.docs.get(e._key),i=new Fv(t);return new pA(t,i,e._key,r,new Th(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O9{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Yf(e)}set(e,n,r){this._verifyNotCommitted();const i=pg(e,this._firestore),s=Mv(i.converter,n,r),o=kv(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,pi.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=pg(e,this._firestore);let o;return o=typeof(n=xs(n))=="string"||n instanceof Qf?aA(this._dataReader,"WriteBatch.update",s._key,n,r,i):oA(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,pi.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=pg(e,this._firestore);return this._mutations=this._mutations.concat(new n0(n._key,pi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qe(ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pg(t,e){if((t=xs(t)).firestore!==e)throw new qe(ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(t){return Kf(t=mi(t,_o)),new O9(t,e=>ed(t,e))}(function(e,n=!0){(function(i){jc=i})(TL),lm(new gf("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new _o(new zL(r.getProvider("auth-internal")),new WL(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new qe(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xf(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ic(Vx,"4.7.3",e),ic(Vx,"4.7.3","esm2017")})();const V9={apiKey:"AIzaSyDXKdnkxtgKARc0fWiA1BD5ok3qc8AqCVc",authDomain:"syncserve-dev.firebaseapp.com",databaseURL:"https://syncserve-dev-default-rtdb.firebaseio.com",projectId:"syncserve-dev",storageBucket:"syncserve-dev.firebasestorage.app",messagingSenderId:"1029186931798",appId:"1:1029186931798:web:ec31db4513af2edc057ff7",measurementId:"G-LX9Z2Y6SN9"},B9=KS(V9),lr=A9(B9),Vv=fl(lr,"tables"),Bv=fl(lr,"menuItems"),wA=fl(lr,"staff"),Uv=fl(lr,"orders");fl(lr,"settings");const xA=fl(lr,"salesRecords"),dl=async()=>{try{const t=zs(lr,"settings","appSettings"),e=await M9(t);return e.exists()?e.data():(console.warn("Settings document 'appSettings' not found."),null)}catch(t){throw console.error("Error fetching settings:",t),t}},U9=async t=>{try{const e=zs(lr,"settings","appSettings");await F9(e,t,{merge:!0})}catch(e){throw console.error("Error updating settings:",e),e}},z9=async t=>{try{return{id:(await Zf(Vv,{name:t,status:"available"})).id,name:t,status:"available"}}catch(e){throw console.error("Error adding table:",e),e}},q9=async t=>{if(!t||t.length===0)throw new Error("addTablesInBulk: tableNames array is required and cannot be empty.");try{const e=td(lr);t.forEach(n=>{const r=zs(fl(lr,"tables"));e.set(r,{name:n,status:"available"})}),await e.commit()}catch(e){throw console.error("Error adding tables in bulk:",e),e}},bA=async()=>{try{return(await Jf(Vv)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error fetching tables:",t),t}},_A=(t,e)=>Ov(Vv,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)},n=>{console.error("onTablesRealtime error:",n),e&&e(n)}),SA=async(t,e)=>{if(!t)throw new Error("updateTableStatus: tableId is required");try{const n=zs(lr,"tables",t);return await gA(n,{status:e}),!0}catch(n){throw console.error("Error updating table status:",n),n}},$9=async t=>{if(!t)throw new Error("deleteTable: tableId is required");try{return await yA(zs(lr,"tables",t)),!0}catch(e){throw console.error("Error deleting table:",e),e}},H9=async t=>{if(!t||t.length===0)throw new Error("deleteTablesInBulk: tableIds array is required and cannot be empty.");try{const e=td(lr);t.forEach(n=>{const r=zs(lr,"tables",n);e.delete(r)}),await e.commit()}catch(e){throw console.error("Error deleting tables in bulk:",e),e}},N4=async t=>{try{if(!t||!t.name||t.fullPrice==null)throw new Error("addMenuItem: item must have a name and a fullPrice.");return{id:(await Zf(Bv,t)).id,...t}}catch(e){throw console.error("Error adding menu item:",e),e}},zv=async()=>{try{return(await Jf(Bv)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error fetching menu items:",t),t}},W9=async t=>{if(!t||t.length===0)throw new Error("deleteMenuItemsInBulk: itemIds array is required and cannot be empty.");try{const e=td(lr);t.forEach(n=>{const r=zs(lr,"menuItems",n);e.delete(r)}),await e.commit()}catch(e){throw console.error("Error deleting menu items in bulk:",e),e}},G9=(t,e)=>Ov(Bv,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)},n=>{console.error("onMenuItemsRealtime error:",n)}),K9=async t=>{try{if(!t||!t.name)throw new Error("addStaff: Staff data must include a name.");return{id:(await Zf(wA,t)).id,...t}}catch(e){throw console.error("Error adding staff:",e),e}},Q9=async t=>{if(!t||t.length===0)throw new Error("addStaffInBulk: staffArray is required and cannot be empty.");try{const e=td(lr);t.forEach(n=>{if(n.name&&n.name.trim()!==""){const r=zs(fl(lr,"staff"));e.set(r,{name:n.name||"",contact:n.contact||"",address:n.address||""})}}),await e.commit()}catch(e){throw console.error("Error adding staff in bulk:",e),e}},Af=async()=>{try{return(await Jf(wA)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error fetching staff:",t),t}},Y9=async t=>{try{return{id:(await Zf(Uv,t)).id,...t}}catch(e){throw console.error("Error adding order:",e),e}},X9=async t=>{if(!t)throw new Error("deleteOrder: orderId is required");try{return await yA(zs(lr,"orders",t)),!0}catch(e){throw console.error("Error deleting order:",e),e}},J9=async(t,e)=>{if(!t||!e)throw new Error("updateOrderStatus: orderId and newStatus are required.");try{const n=zs(lr,"orders",t);await gA(n,{status:e})}catch(n){throw console.error(`Error updating order status for order ${t}:`,n),n}},AA=(t,e)=>Ov(Uv,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)},n=>{console.error("onOrdersRealtime error:",n),e&&e(n)}),Z9=async()=>{try{const t=await Jf(Uv);if(t.empty){console.log("No orders to delete.");return}const e=td(lr);t.docs.forEach(n=>{e.delete(n.ref)}),await e.commit(),console.log("All orders successfully deleted.")}catch(t){throw console.error("Error clearing all orders:",t),t}},eD=async t=>{try{const e={...t,finalizedAt:Qn.now()};await Zf(xA,e)}catch(e){throw console.error("Error adding sale record:",e),e}},Ef=async(t,e)=>{try{const n=new Date(e);n.setHours(23,59,59,999);const r=R9(xA,S4("finalizedAt",">=",Qn.fromDate(t)),S4("finalizedAt","<=",Qn.fromDate(n)));return(await Jf(r)).docs.map(s=>{const o=s.data();return{id:s.id,...o,finalizedAt:o.finalizedAt.toDate()}})}catch(n){throw console.error("Error fetching sales by date range:",n),n}},Va=({isOpen:t,onClose:e,children:n,size:r="md"})=>{const i=G.useRef(null);G.useEffect(()=>{const a=l=>{l.key==="Escape"&&e()};return t&&(document.body.style.overflow="hidden",window.addEventListener("keydown",a)),()=>{document.body.style.overflow="unset",window.removeEventListener("keydown",a)}},[t,e]);const s=a=>{i.current&&!i.current.contains(a.target)&&e()},o={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl"};return y.jsxs("div",{className:`fixed inset-0 z-50 overflow-y-auto transition-opacity duration-300 ease-in-out ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:s,"aria-modal":"true",role:"dialog",children:[y.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75"}),y.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:y.jsxs("div",{ref:i,className:`relative w-full transform rounded-xl bg-white text-left shadow-xl transition-all duration-300 ease-in-out ${o[r]||o.md} ${t?"translate-y-0 scale-100 opacity-100":"translate-y-4 scale-95 opacity-0"}`,children:[y.jsx("button",{onClick:e,className:"absolute top-4 right-4 z-10 rounded-full p-1 text-gray-400 transition-colors hover:bg-gray-100 hover:text-gray-700","aria-label":"Close modal",children:y.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),y.jsx("div",{className:"p-6",children:n})]})})]})},EA=G.createContext({});function tD(t){const e=G.useRef(null);return e.current===null&&(e.current=t()),e.current}const qv=typeof window<"u",nD=qv?G.useLayoutEffect:G.useEffect,$v=G.createContext(null);function Hv(t,e){t.indexOf(e)===-1&&t.push(e)}function Wv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ta=(t,e,n)=>n>e?e:n<t?t:n;let Gv=()=>{};const na={},NA=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function TA(t){return typeof t=="object"&&t!==null}const CA=t=>/^0[^.\s]+$/u.test(t);function Kv(t){let e;return()=>(e===void 0&&(e=t()),e)}const ys=t=>t,rD=(t,e)=>n=>e(t(n)),nd=(...t)=>t.reduce(rD),Nf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Qv{constructor(){this.subscriptions=[]}add(e){return Hv(this.subscriptions,e),()=>Wv(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vo=t=>t*1e3,wo=t=>t/1e3;function PA(t,e){return e?t*(1e3/e):0}const kA=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,iD=1e-7,sD=12;function oD(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=kA(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>iD&&++a<sD);return o}function rd(t,e,n,r){if(t===e&&n===r)return ys;const i=s=>oD(s,0,1,t,n);return s=>s===0||s===1?s:kA(i(s),e,r)}const IA=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,LA=t=>e=>1-t(1-e),RA=rd(.33,1.53,.69,.99),Yv=LA(RA),jA=IA(Yv),DA=t=>(t*=2)<1?.5*Yv(t):.5*(2-Math.pow(2,-10*(t-1))),Xv=t=>1-Math.sin(Math.acos(t)),MA=LA(Xv),FA=IA(Xv),aD=rd(.42,0,1,1),lD=rd(0,0,.58,1),OA=rd(.42,0,.58,1),uD=t=>Array.isArray(t)&&typeof t[0]!="number",VA=t=>Array.isArray(t)&&typeof t[0]=="number",cD={linear:ys,easeIn:aD,easeInOut:OA,easeOut:lD,circIn:Xv,circInOut:FA,circOut:MA,backIn:Yv,backInOut:jA,backOut:RA,anticipate:DA},hD=t=>typeof t=="string",T4=t=>{if(VA(t)){Gv(t.length===4);const[e,n,r,i]=t;return rd(e,n,r,i)}else if(hD(t))return cD[t];return t},Wd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],C4={value:null};function fD(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function u(d){o.has(d)&&(c.schedule(d),t()),l++,d(a)}const c={schedule:(d,m=!1,p=!1)=>{const E=p&&i?n:r;return m&&o.add(d),E.has(d)||E.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(a=d,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),e&&C4.value&&C4.value.frameloop[e].push(l),l=0,n.clear(),i=!1,s&&(s=!1,c.process(d))}};return c}const dD=40;function BA(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Wd.reduce((N,R)=>(N[R]=fD(s,e?R:void 0),N),{}),{setup:a,read:l,resolveKeyframes:u,preUpdate:c,update:d,preRender:m,render:p,postRender:x}=o,E=()=>{const N=na.useManualTiming?i.timestamp:performance.now();n=!1,na.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(N-i.timestamp,dD),1)),i.timestamp=N,i.isProcessing=!0,a.process(i),l.process(i),u.process(i),c.process(i),d.process(i),m.process(i),p.process(i),x.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(E))},C=()=>{n=!0,r=!0,i.isProcessing||t(E)};return{schedule:Wd.reduce((N,R)=>{const z=o[R];return N[R]=(Q,L=!1,T=!1)=>(n||C(),z.schedule(Q,L,T)),N},{}),cancel:N=>{for(let R=0;R<Wd.length;R++)o[Wd[R]].cancel(N)},state:i,steps:o}}const{schedule:Fn,cancel:il,state:jr,steps:mg}=BA(typeof requestAnimationFrame<"u"?requestAnimationFrame:ys,!0);let _p;function pD(){_p=void 0}const Pi={now:()=>(_p===void 0&&Pi.set(jr.isProcessing||na.useManualTiming?jr.timestamp:performance.now()),_p),set:t=>{_p=t,queueMicrotask(pD)}},UA=t=>e=>typeof e=="string"&&e.startsWith(t),Jv=UA("--"),mD=UA("var(--"),Zv=t=>mD(t)?gD.test(t.split("/*")[0].trim()):!1,gD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Fc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Tf={...Fc,transform:t=>ta(0,1,t)},Gd={...Fc,default:1},zh=t=>Math.round(t*1e5)/1e5,e5=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function yD(t){return t==null}const vD=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,t5=(t,e)=>n=>!!(typeof n=="string"&&vD.test(n)&&n.startsWith(t)||e&&!yD(n)&&Object.prototype.hasOwnProperty.call(n,e)),zA=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(e5);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},wD=t=>ta(0,255,t),gg={...Fc,transform:t=>Math.round(wD(t))},Hl={test:t5("rgb","red"),parse:zA("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+gg.transform(t)+", "+gg.transform(e)+", "+gg.transform(n)+", "+zh(Tf.transform(r))+")"};function xD(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const b2={test:t5("#"),parse:xD,transform:Hl.transform},id=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ka=id("deg"),xo=id("%"),pt=id("px"),bD=id("vh"),_D=id("vw"),P4={...xo,parse:t=>xo.parse(t)/100,transform:t=>xo.transform(t*100)},Hu={test:t5("hsl","hue"),parse:zA("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+xo.transform(zh(e))+", "+xo.transform(zh(n))+", "+zh(Tf.transform(r))+")"},hr={test:t=>Hl.test(t)||b2.test(t)||Hu.test(t),parse:t=>Hl.test(t)?Hl.parse(t):Hu.test(t)?Hu.parse(t):b2.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Hl.transform(t):Hu.transform(t),getAnimatableNone:t=>{const e=hr.parse(t);return e.alpha=0,hr.transform(e)}},SD=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function AD(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(e5))==null?void 0:e.length)||0)+(((n=t.match(SD))==null?void 0:n.length)||0)>0}const qA="number",$A="color",ED="var",ND="var(",k4="${}",TD=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Cf(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(TD,l=>(hr.test(l)?(r.color.push(s),i.push($A),n.push(hr.parse(l))):l.startsWith(ND)?(r.var.push(s),i.push(ED),n.push(l)):(r.number.push(s),i.push(qA),n.push(parseFloat(l))),++s,k4)).split(k4);return{values:n,split:a,indexes:r,types:i}}function HA(t){return Cf(t).values}function WA(t){const{split:e,types:n}=Cf(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===qA?s+=zh(i[o]):a===$A?s+=hr.transform(i[o]):s+=i[o]}return s}}const CD=t=>typeof t=="number"?0:hr.test(t)?hr.getAnimatableNone(t):t;function PD(t){const e=HA(t);return WA(t)(e.map(CD))}const sl={test:AD,parse:HA,createTransformer:WA,getAnimatableNone:PD};function yg(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function kD({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=yg(l,a,t+1/3),s=yg(l,a,t),o=yg(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function wm(t,e){return n=>n>0?e:t}const Dn=(t,e,n)=>t+(e-t)*n,vg=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},ID=[b2,Hl,Hu],LD=t=>ID.find(e=>e.test(t));function I4(t){const e=LD(t);if(!e)return!1;let n=e.parse(t);return e===Hu&&(n=kD(n)),n}const L4=(t,e)=>{const n=I4(t),r=I4(e);if(!n||!r)return wm(t,e);const i={...n};return s=>(i.red=vg(n.red,r.red,s),i.green=vg(n.green,r.green,s),i.blue=vg(n.blue,r.blue,s),i.alpha=Dn(n.alpha,r.alpha,s),Hl.transform(i))},_2=new Set(["none","hidden"]);function RD(t,e){return _2.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function jD(t,e){return n=>Dn(t,e,n)}function n5(t){return typeof t=="number"?jD:typeof t=="string"?Zv(t)?wm:hr.test(t)?L4:FD:Array.isArray(t)?GA:typeof t=="object"?hr.test(t)?L4:DD:wm}function GA(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>n5(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function DD(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=n5(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function MD(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const FD=(t,e)=>{const n=sl.createTransformer(e),r=Cf(t),i=Cf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?_2.has(t)&&!i.values.length||_2.has(e)&&!r.values.length?RD(t,e):nd(GA(MD(r,i),i.values),n):wm(t,e)};function KA(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Dn(t,e,n):n5(t)(t,e)}const OD=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Fn.update(e,n),stop:()=>il(e),now:()=>jr.isProcessing?jr.timestamp:Pi.now()}},QA=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},xm=2e4;function r5(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<xm;)e+=n,r=t.next(e);return e>=xm?1/0:e}function VD(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(r5(r),xm);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:wo(i)}}const BD=5;function YA(t,e,n){const r=Math.max(e-BD,0);return PA(n-t(r),e-r)}const Wn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},wg=.001;function UD({duration:t=Wn.duration,bounce:e=Wn.bounce,velocity:n=Wn.velocity,mass:r=Wn.mass}){let i,s,o=1-e;o=ta(Wn.minDamping,Wn.maxDamping,o),t=ta(Wn.minDuration,Wn.maxDuration,wo(t)),o<1?(i=u=>{const c=u*o,d=c*t,m=c-n,p=S2(u,o),x=Math.exp(-d);return wg-m/p*x},s=u=>{const d=u*o*t,m=d*n+n,p=Math.pow(o,2)*Math.pow(u,2)*t,x=Math.exp(-d),E=S2(Math.pow(u,2),o);return(-i(u)+wg>0?-1:1)*((m-p)*x)/E}):(i=u=>{const c=Math.exp(-u*t),d=(u-n)*t+1;return-wg+c*d},s=u=>{const c=Math.exp(-u*t),d=(n-u)*(t*t);return c*d});const a=5/t,l=qD(i,s,a);if(t=vo(t),isNaN(l))return{stiffness:Wn.stiffness,damping:Wn.damping,duration:t};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const zD=12;function qD(t,e,n){let r=n;for(let i=1;i<zD;i++)r=r-t(r)/e(r);return r}function S2(t,e){return t*Math.sqrt(1-e*e)}const $D=["duration","bounce"],HD=["stiffness","damping","mass"];function R4(t,e){return e.some(n=>t[n]!==void 0)}function WD(t){let e={velocity:Wn.velocity,stiffness:Wn.stiffness,damping:Wn.damping,mass:Wn.mass,isResolvedFromDuration:!1,...t};if(!R4(t,HD)&&R4(t,$D))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*ta(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Wn.mass,stiffness:i,damping:s}}else{const n=UD(t);e={...e,...n,mass:Wn.mass},e.isResolvedFromDuration=!0}return e}function bm(t=Wn.visualDuration,e=Wn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:u,mass:c,duration:d,velocity:m,isResolvedFromDuration:p}=WD({...n,velocity:-wo(n.velocity||0)}),x=m||0,E=u/(2*Math.sqrt(l*c)),C=o-s,w=wo(Math.sqrt(l/c)),A=Math.abs(C)<5;r||(r=A?Wn.restSpeed.granular:Wn.restSpeed.default),i||(i=A?Wn.restDelta.granular:Wn.restDelta.default);let N;if(E<1){const z=S2(w,E);N=Q=>{const L=Math.exp(-E*w*Q);return o-L*((x+E*w*C)/z*Math.sin(z*Q)+C*Math.cos(z*Q))}}else if(E===1)N=z=>o-Math.exp(-w*z)*(C+(x+w*C)*z);else{const z=w*Math.sqrt(E*E-1);N=Q=>{const L=Math.exp(-E*w*Q),T=Math.min(z*Q,300);return o-L*((x+E*w*C)*Math.sinh(T)+z*C*Math.cosh(T))/z}}const R={calculatedDuration:p&&d||null,next:z=>{const Q=N(z);if(p)a.done=z>=d;else{let L=z===0?x:0;E<1&&(L=z===0?vo(x):YA(N,z,Q));const T=Math.abs(L)<=r,k=Math.abs(o-Q)<=i;a.done=T&&k}return a.value=a.done?o:Q,a},toString:()=>{const z=Math.min(r5(R),xm),Q=QA(L=>R.next(z*L).value,z,30);return z+"ms "+Q},toTransition:()=>{}};return R}bm.applyToOptions=t=>{const e=VD(t,100,bm);return t.ease=e.ease,t.duration=vo(e.duration),t.type="keyframes",t};function A2({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:u=.5,restSpeed:c}){const d=t[0],m={done:!1,value:d},p=T=>a!==void 0&&T<a||l!==void 0&&T>l,x=T=>a===void 0?l:l===void 0||Math.abs(a-T)<Math.abs(l-T)?a:l;let E=n*e;const C=d+E,w=o===void 0?C:o(C);w!==C&&(E=w-d);const A=T=>-E*Math.exp(-T/r),N=T=>w+A(T),R=T=>{const k=A(T),M=N(T);m.done=Math.abs(k)<=u,m.value=m.done?w:M};let z,Q;const L=T=>{p(m.value)&&(z=T,Q=bm({keyframes:[m.value,x(m.value)],velocity:YA(N,T,m.value),damping:i,stiffness:s,restDelta:u,restSpeed:c}))};return L(0),{calculatedDuration:null,next:T=>{let k=!1;return!Q&&z===void 0&&(k=!0,R(T),L(T)),z!==void 0&&T>=z?Q.next(T-z):(!k&&R(T),m)}}}function GD(t,e,n){const r=[],i=n||na.mix||KA,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||ys:e;a=nd(l,a)}r.push(a)}return r}function KD(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Gv(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=GD(e,r,i),l=a.length,u=c=>{if(o&&c<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const m=Nf(t[d],t[d+1],c);return a[d](m)};return n?c=>u(ta(t[0],t[s-1],c)):u}function QD(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Nf(0,e,r);t.push(Dn(n,1,i))}}function YD(t){const e=[0];return QD(e,t.length-1),e}function XD(t,e){return t.map(n=>n*e)}function JD(t,e){return t.map(()=>e||OA).splice(0,t.length-1)}function qh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=uD(r)?r.map(T4):T4(r),s={done:!1,value:e[0]},o=XD(n&&n.length===e.length?n:YD(e),t),a=KD(o,e,{ease:Array.isArray(i)?i:JD(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const ZD=t=>t!==null;function i5(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(ZD),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const eM={decay:A2,inertia:A2,tween:qh,keyframes:qh,spring:bm};function XA(t){typeof t.type=="string"&&(t.type=eM[t.type])}class s5{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const tM=t=>t/100;class o5 extends s5{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Pi.now()&&this.tick(Pi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;XA(e);const{type:n=qh,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||qh;l!==qh&&typeof a[0]!="number"&&(this.mixKeyframes=nd(tM,KA(a[0],a[1])),a=[0,100]);const u=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=r5(u));const{calculatedDuration:c}=u;this.calculatedDuration=c,this.resolvedDuration=c+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:c,repeat:d,repeatType:m,repeatDelay:p,type:x,onUpdate:E,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-u*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let N=this.currentTime,R=r;if(d){const T=Math.min(this.currentTime,i)/a;let k=Math.floor(T),M=T%1;!M&&T>=1&&(M=1),M===1&&k--,k=Math.min(k,d+1),!!(k%2)&&(m==="reverse"?(M=1-M,p&&(M-=p/a)):m==="mirror"&&(R=o)),N=ta(0,1,M)*a}const z=A?{done:!1,value:c[0]}:R.next(N);s&&(z.value=s(z.value));let{done:Q}=z;!A&&l!==null&&(Q=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Q);return L&&x!==A2&&(z.value=i5(c,this.options,C,this.speed)),E&&E(z.value),L&&this.finish(),z}then(e,n){return this.finished.then(e,n)}get duration(){return wo(this.calculatedDuration)}get time(){return wo(this.currentTime)}set time(e){var n;e=vo(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Pi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=wo(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=OD,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function nM(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Wl=t=>t*180/Math.PI,E2=t=>{const e=Wl(Math.atan2(t[1],t[0]));return N2(e)},rM={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:E2,rotateZ:E2,skewX:t=>Wl(Math.atan(t[1])),skewY:t=>Wl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},N2=t=>(t=t%360,t<0&&(t+=360),t),j4=E2,D4=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),M4=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),iM={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:D4,scaleY:M4,scale:t=>(D4(t)+M4(t))/2,rotateX:t=>N2(Wl(Math.atan2(t[6],t[5]))),rotateY:t=>N2(Wl(Math.atan2(-t[2],t[0]))),rotateZ:j4,rotate:j4,skewX:t=>Wl(Math.atan(t[4])),skewY:t=>Wl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function T2(t){return t.includes("scale")?1:0}function C2(t,e){if(!t||t==="none")return T2(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=iM,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=rM,i=a}if(!i)return T2(e);const s=r[e],o=i[1].split(",").map(oM);return typeof s=="function"?s(o):o[s]}const sM=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return C2(n,e)};function oM(t){return parseFloat(t.trim())}const Oc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vc=new Set(Oc),F4=t=>t===Fc||t===pt,aM=new Set(["x","y","z"]),lM=Oc.filter(t=>!aM.has(t));function uM(t){const e=[];return lM.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Yl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>C2(e,"x"),y:(t,{transform:e})=>C2(e,"y")};Yl.translateX=Yl.x;Yl.translateY=Yl.y;const Xl=new Set;let P2=!1,k2=!1,I2=!1;function JA(){if(k2){const t=Array.from(Xl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=uM(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}k2=!1,P2=!1,Xl.forEach(t=>t.complete(I2)),Xl.clear()}function ZA(){Xl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(k2=!0)})}function cM(){I2=!0,ZA(),JA(),I2=!1}class a5{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Xl.add(this),P2||(P2=!0,Fn.read(ZA),Fn.resolveKeyframes(JA))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}nM(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Xl.delete(this)}cancel(){this.state==="scheduled"&&(Xl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const hM=t=>t.startsWith("--");function fM(t,e,n){hM(e)?t.style.setProperty(e,n):t.style[e]=n}const dM=Kv(()=>window.ScrollTimeline!==void 0),pM={};function mM(t,e){const n=Kv(t);return()=>pM[e]??n()}const eE=mM(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ch=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,O4={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ch([0,.65,.55,1]),circOut:Ch([.55,0,1,.45]),backIn:Ch([.31,.01,.66,-.59]),backOut:Ch([.33,1.53,.69,.99])};function tE(t,e){if(t)return typeof t=="function"?eE()?QA(t,e):"ease-out":VA(t)?Ch(t):Array.isArray(t)?t.map(n=>tE(n,e)||O4.easeOut):O4[t]}function gM(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},u=void 0){const c={[e]:n};l&&(c.offset=l);const d=tE(a,i);Array.isArray(d)&&(c.easing=d);const m={delay:r,duration:i,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),t.animate(c,m)}function nE(t){return typeof t=="function"&&"applyToOptions"in t}function yM({type:t,...e}){return nE(t)&&eE()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class vM extends s5{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Gv(typeof e.type!="string");const u=yM(e);this.animation=gM(n,r,i,u,s),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const c=i5(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(c):fM(n,r,c),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return wo(Number(e))}get time(){return wo(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=vo(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&dM()?(this.animation.timeline=e,ys):n(this)}}const rE={anticipate:DA,backInOut:jA,circInOut:FA};function wM(t){return t in rE}function xM(t){typeof t.ease=="string"&&wM(t.ease)&&(t.ease=rE[t.ease])}const V4=10;class bM extends vM{constructor(e){xM(e),XA(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new o5({...o,autoplay:!1}),l=vo(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-V4).value,a.sample(l).value,V4),a.stop()}}const B4=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(sl.test(t)||t==="0")&&!t.startsWith("url("));function _M(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function SM(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=B4(i,e),a=B4(s,e);return!o||!a?!1:_M(t)||(n==="spring"||nE(n))&&r}function iE(t){return TA(t)&&"offsetHeight"in t}const AM=new Set(["opacity","clipPath","filter","transform"]),EM=Kv(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function NM(t){var u;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!iE((u=e==null?void 0:e.owner)==null?void 0:u.current))return!1;const{onUpdate:a,transformTemplate:l}=e.owner.getProps();return EM()&&n&&AM.has(n)&&(n!=="transform"||!l)&&!a&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const TM=40;class CM extends s5{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:u,element:c,...d}){var x;super(),this.stop=()=>{var E,C;this._animation&&(this._animation.stop(),(E=this.stopTimeline)==null||E.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=Pi.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:u,element:c,...d},p=(c==null?void 0:c.KeyframeResolver)||a5;this.keyframeResolver=new p(a,(E,C,w)=>this.onKeyframesResolved(E,C,m,!w),l,u,c),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:u,onUpdate:c}=r;this.resolvedAt=Pi.now(),SM(e,s,o,a)||((na.instantAnimations||!l)&&(c==null||c(i5(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>TM?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},p=!u&&NM(m)?new bM({...m,element:m.motionValue.owner.current}):new o5(m);p.finished.then(()=>this.notifyFinished()).catch(ys),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),cM()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const PM=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function kM(t){const e=PM.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function sE(t,e,n=1){const[r,i]=kM(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return NA(o)?parseFloat(o):o}return Zv(i)?sE(i,e,n+1):i}function l5(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const oE=new Set(["width","height","top","left","right","bottom",...Oc]),IM={test:t=>t==="auto",parse:t=>t},aE=t=>e=>e.test(t),lE=[Fc,pt,xo,ka,_D,bD,IM],U4=t=>lE.find(aE(t));function LM(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||CA(t):!0}const RM=new Set(["brightness","contrast","saturate","opacity"]);function jM(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(e5)||[];if(!r)return t;const i=n.replace(r,"");let s=RM.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const DM=/\b([a-z-]*)\(.*?\)/gu,L2={...sl,getAnimatableNone:t=>{const e=t.match(DM);return e?e.map(jM).join(" "):t}},z4={...Fc,transform:Math.round},MM={rotate:ka,rotateX:ka,rotateY:ka,rotateZ:ka,scale:Gd,scaleX:Gd,scaleY:Gd,scaleZ:Gd,skew:ka,skewX:ka,skewY:ka,distance:pt,translateX:pt,translateY:pt,translateZ:pt,x:pt,y:pt,z:pt,perspective:pt,transformPerspective:pt,opacity:Tf,originX:P4,originY:P4,originZ:pt},u5={borderWidth:pt,borderTopWidth:pt,borderRightWidth:pt,borderBottomWidth:pt,borderLeftWidth:pt,borderRadius:pt,radius:pt,borderTopLeftRadius:pt,borderTopRightRadius:pt,borderBottomRightRadius:pt,borderBottomLeftRadius:pt,width:pt,maxWidth:pt,height:pt,maxHeight:pt,top:pt,right:pt,bottom:pt,left:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,backgroundPositionX:pt,backgroundPositionY:pt,...MM,zIndex:z4,fillOpacity:Tf,strokeOpacity:Tf,numOctaves:z4},FM={...u5,color:hr,backgroundColor:hr,outlineColor:hr,fill:hr,stroke:hr,borderColor:hr,borderTopColor:hr,borderRightColor:hr,borderBottomColor:hr,borderLeftColor:hr,filter:L2,WebkitFilter:L2},uE=t=>FM[t];function cE(t,e){let n=uE(t);return n!==L2&&(n=sl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const OM=new Set(["auto","none","0"]);function VM(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!OM.has(s)&&Cf(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=cE(n,i)}class BM extends a5{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),Zv(u))){const c=sE(u,n.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!oE.has(r)||e.length!==2)return;const[i,s]=e,o=U4(i),a=U4(s);if(o!==a)if(F4(o)&&F4(a))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else Yl[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||LM(e[i]))&&r.push(i);r.length&&VM(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yl[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Yl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,u])=>{e.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function UM(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const hE=(t,e)=>e&&typeof t=="number"?e.transform(t):t,q4=30,zM=t=>!isNaN(parseFloat(t));class qM{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var o,a;const s=Pi.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&((a=this.events.renderRequest)==null||a.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Pi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=zM(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Qv);const r=this.events[e].add(n);return e==="change"?()=>{r(),Fn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Pi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>q4)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,q4);return PA(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Nc(t,e){return new qM(t,e)}const{schedule:c5}=BA(queueMicrotask,!1),Rs={x:!1,y:!1};function fE(){return Rs.x||Rs.y}function $M(t){return t==="x"||t==="y"?Rs[t]?null:(Rs[t]=!0,()=>{Rs[t]=!1}):Rs.x||Rs.y?null:(Rs.x=Rs.y=!0,()=>{Rs.x=Rs.y=!1})}function dE(t,e){const n=UM(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function $4(t){return!(t.pointerType==="touch"||fE())}function HM(t,e,n={}){const[r,i,s]=dE(t,n),o=a=>{if(!$4(a))return;const{target:l}=a,u=e(l,a);if(typeof u!="function"||!l)return;const c=d=>{$4(d)&&(u(d),l.removeEventListener("pointerleave",c))};l.addEventListener("pointerleave",c,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const pE=(t,e)=>e?t===e?!0:pE(t,e.parentElement):!1,h5=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,WM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function GM(t){return WM.has(t.tagName)||t.tabIndex!==-1}const Sp=new WeakSet;function H4(t){return e=>{e.key==="Enter"&&t(e)}}function xg(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const KM=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=H4(()=>{if(Sp.has(n))return;xg(n,"down");const i=H4(()=>{xg(n,"up")}),s=()=>xg(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function W4(t){return h5(t)&&!fE()}function QM(t,e,n={}){const[r,i,s]=dE(t,n),o=a=>{const l=a.currentTarget;if(!W4(a))return;Sp.add(l);const u=e(l,a),c=(p,x)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",m),Sp.has(l)&&Sp.delete(l),W4(p)&&typeof u=="function"&&u(p,{success:x})},d=p=>{c(p,l===window||l===document||n.useGlobalTarget||pE(l,p.target))},m=p=>{c(p,!1)};window.addEventListener("pointerup",d,i),window.addEventListener("pointercancel",m,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),iE(a)&&(a.addEventListener("focus",u=>KM(u,i)),!GM(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function mE(t){return TA(t)&&"ownerSVGElement"in t}function YM(t){return mE(t)&&t.tagName==="svg"}const ni=t=>!!(t&&t.getVelocity),XM=[...lE,hr,sl],JM=t=>XM.find(aE(t)),gE=G.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function ZM(t=!0){const e=G.useContext($v);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=G.useId();G.useEffect(()=>{if(t)return i(s)},[t]);const o=G.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const yE=G.createContext({strict:!1}),G4={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Tc={};for(const t in G4)Tc[t]={isEnabled:e=>G4[t].some(n=>!!e[n])};function eF(t){for(const e in t)Tc[e]={...Tc[e],...t[e]}}const tF=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _m(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||tF.has(t)}let vE=t=>!_m(t);function nF(t){typeof t=="function"&&(vE=e=>e.startsWith("on")?!_m(e):t(e))}try{nF(require("@emotion/is-prop-valid").default)}catch{}function rF(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(vE(i)||n===!0&&_m(i)||!e&&!_m(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function iF(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const h0=G.createContext({});function f0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Pf(t){return typeof t=="string"||Array.isArray(t)}const f5=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],d5=["initial",...f5];function d0(t){return f0(t.animate)||d5.some(e=>Pf(t[e]))}function wE(t){return!!(d0(t)||t.variants)}function sF(t,e){if(d0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Pf(n)?n:void 0,animate:Pf(r)?r:void 0}}return t.inherit!==!1?e:{}}function oF(t){const{initial:e,animate:n}=sF(t,G.useContext(h0));return G.useMemo(()=>({initial:e,animate:n}),[K4(e),K4(n)])}function K4(t){return Array.isArray(t)?t.join(" "):t}const aF=Symbol.for("motionComponentSymbol");function Wu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function lF(t,e,n){return G.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Wu(n)&&(n.current=r))},[e])}const p5=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),uF="framerAppearId",xE="data-"+p5(uF),bE=G.createContext({});function cF(t,e,n,r,i){var E,C;const{visualElement:s}=G.useContext(h0),o=G.useContext(yE),a=G.useContext($v),l=G.useContext(gE).reducedMotion,u=G.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const c=u.current,d=G.useContext(bE);c&&!c.projection&&i&&(c.type==="html"||c.type==="svg")&&hF(u.current,n,i,d);const m=G.useRef(!1);G.useInsertionEffect(()=>{c&&m.current&&c.update(n,a)});const p=n[xE],x=G.useRef(!!p&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,p))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,p)));return nD(()=>{c&&(m.current=!0,window.MotionIsMounted=!0,c.updateFeatures(),c5.render(c.render),x.current&&c.animationState&&c.animationState.animateChanges())}),G.useEffect(()=>{c&&(!x.current&&c.animationState&&c.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,p)}),x.current=!1))}),c}function hF(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:u,layoutCrossfade:c}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:_E(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Wu(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:c,layoutScroll:l,layoutRoot:u})}function _E(t){if(t)return t.options.allowProjection!==!1?t.projection:_E(t.parent)}function fF({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&eF(t);function s(a,l){let u;const c={...G.useContext(gE),...a,layoutId:dF(a)},{isStatic:d}=c,m=oF(a),p=r(a,d);if(!d&&qv){pF();const x=mF(c);u=x.MeasureLayout,m.visualElement=cF(i,p,c,e,x.ProjectionNode)}return y.jsxs(h0.Provider,{value:m,children:[u&&m.visualElement?y.jsx(u,{visualElement:m.visualElement,...c}):null,n(i,a,lF(p,m.visualElement,l),p,d,m.visualElement)]})}s.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=G.forwardRef(s);return o[aF]=i,o}function dF({layoutId:t}){const e=G.useContext(EA).id;return e&&t!==void 0?e+"-"+t:t}function pF(t,e){G.useContext(yE).strict}function mF(t){const{drag:e,layout:n}=Tc;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const kf={};function gF(t){for(const e in t)kf[e]=t[e],Jv(e)&&(kf[e].isCSSVariable=!0)}function SE(t,{layout:e,layoutId:n}){return Vc.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!kf[t]||t==="opacity")}const yF={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},vF=Oc.length;function wF(t,e,n){let r="",i=!0;for(let s=0;s<vF;s++){const o=Oc[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const u=hE(a,u5[o]);if(!l){i=!1;const c=yF[o]||o;r+=`${c}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function m5(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const u=e[l];if(Vc.has(l)){o=!0;continue}else if(Jv(l)){i[l]=u;continue}else{const c=hE(u,u5[l]);l.startsWith("origin")?(a=!0,s[l]=c):r[l]=c}}if(e.transform||(o||n?r.transform=wF(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;r.transformOrigin=`${l} ${u} ${c}`}}const g5=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function AE(t,e,n){for(const r in e)!ni(e[r])&&!SE(r,n)&&(t[r]=e[r])}function xF({transformTemplate:t},e){return G.useMemo(()=>{const n=g5();return m5(n,e,t),Object.assign({},n.vars,n.style)},[e])}function bF(t,e){const n=t.style||{},r={};return AE(r,n,t),Object.assign(r,xF(t,e)),r}function _F(t,e){const n={},r=bF(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const SF={offset:"stroke-dashoffset",array:"stroke-dasharray"},AF={offset:"strokeDashoffset",array:"strokeDasharray"};function EF(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?SF:AF;t[s.offset]=pt.transform(-r);const o=pt.transform(e),a=pt.transform(n);t[s.array]=`${o} ${a}`}function EE(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,u,c){if(m5(t,a,u),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:m}=t;d.transform&&(m.transform=d.transform,delete d.transform),(m.transform||d.transformOrigin)&&(m.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),m.transform&&(m.transformBox=(c==null?void 0:c.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),i!==void 0&&EF(d,i,s,o,!1)}const NE=()=>({...g5(),attrs:{}}),TE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function NF(t,e,n,r){const i=G.useMemo(()=>{const s=NE();return EE(s,e,TE(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};AE(s,t.style,t),i.style={...s,...i.style}}return i}const TF=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function y5(t){return typeof t!="string"||t.includes("-")?!1:!!(TF.indexOf(t)>-1||/[A-Z]/u.test(t))}function CF(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(y5(n)?NF:_F)(r,s,o,n),u=rF(r,typeof n=="string",t),c=n!==G.Fragment?{...u,...l,ref:i}:{},{children:d}=r,m=G.useMemo(()=>ni(d)?d.get():d,[d]);return G.createElement(n,{...c,children:m})}}function Q4(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function v5(t,e,n,r){if(typeof e=="function"){const[i,s]=Q4(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=Q4(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Ap(t){return ni(t)?t.get():t}function PF({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:kF(n,r,i,t),renderState:e()}}const CE=t=>(e,n)=>{const r=G.useContext(h0),i=G.useContext($v),s=()=>PF(t,e,r,i);return n?s():tD(s)};function kF(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=Ap(s[m]);let{initial:o,animate:a}=t;const l=d0(t),u=wE(t);e&&u&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let c=n?n.initial===!1:!1;c=c||o===!1;const d=c?a:o;if(d&&typeof d!="boolean"&&!f0(d)){const m=Array.isArray(d)?d:[d];for(let p=0;p<m.length;p++){const x=v5(t,m[p]);if(x){const{transitionEnd:E,transition:C,...w}=x;for(const A in w){let N=w[A];if(Array.isArray(N)){const R=c?N.length-1:0;N=N[R]}N!==null&&(i[A]=N)}for(const A in E)i[A]=E[A]}}}return i}function w5(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(ni(r[o])||e.style&&ni(e.style[o])||SE(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const IF={useVisualState:CE({scrapeMotionValuesFromProps:w5,createRenderState:g5})};function PE(t,e,n){const r=w5(t,e,n);for(const i in t)if(ni(t[i])||ni(e[i])){const s=Oc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const LF={useVisualState:CE({scrapeMotionValuesFromProps:PE,createRenderState:NE})};function RF(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...y5(r)?LF:IF,preloadedFeatures:t,useRender:CF(i),createVisualElement:e,Component:r};return fF(o)}}function If(t,e,n){const r=t.getProps();return v5(r,e,n!==void 0?n:r.custom,t)}const R2=t=>Array.isArray(t);function jF(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Nc(n))}function DF(t){return R2(t)?t[t.length-1]||0:t}function MF(t,e){const n=If(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=DF(s[o]);jF(t,o,a)}}function FF(t){return!!(ni(t)&&t.add)}function j2(t,e){const n=t.getValue("willChange");if(FF(n))return n.add(e);if(!n&&na.WillChange){const r=new na.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function kE(t){return t.props[xE]}const OF=t=>t!==null;function VF(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(OF),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const BF={type:"spring",stiffness:500,damping:25,restSpeed:10},UF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),zF={type:"keyframes",duration:.8},qF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$F=(t,{keyframes:e})=>e.length>2?zF:Vc.has(t)?t.startsWith("scale")?UF(e[1]):BF:qF;function HF({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const x5=(t,e,n,r={},i,s)=>o=>{const a=l5(r,t)||{},l=a.delay||r.delay||0;let{elapsed:u=0}=r;u=u-vo(l);const c={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-u,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};HF(a)||Object.assign(c,$F(t,c)),c.duration&&(c.duration=vo(c.duration)),c.repeatDelay&&(c.repeatDelay=vo(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),(na.instantAnimations||na.skipAnimations)&&(d=!0,c.duration=0,c.delay=0),c.allowFlatten=!a.type&&!a.ease,d&&!s&&e.get()!==void 0){const m=VF(c.keyframes,a);if(m!==void 0){Fn.update(()=>{c.onUpdate(m),c.onComplete()});return}}return a.isSync?new o5(c):new CM(c)};function WF({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function IE(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const c in a){const d=t.getValue(c,t.latestValues[c]??null),m=a[c];if(m===void 0||u&&WF(u,c))continue;const p={delay:n,...l5(s||{},c)},x=d.get();if(x!==void 0&&!d.isAnimating&&!Array.isArray(m)&&m===x&&!p.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const w=kE(t);if(w){const A=window.MotionHandoffAnimation(w,c,Fn);A!==null&&(p.startTime=A,E=!0)}}j2(t,c),d.start(x5(c,d,m,t.shouldReduceMotion&&oE.has(c)?{type:!1}:p,t,E));const C=d.animation;C&&l.push(C)}return o&&Promise.all(l).then(()=>{Fn.update(()=>{o&&MF(t,o)})}),l}function D2(t,e,n={}){var l;const r=If(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(IE(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:m}=i;return GF(t,e,c+u,d,m,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[u,c]=a==="beforeChildren"?[s,o]:[o,s];return u().then(()=>c())}else return Promise.all([s(),o(n.delay)])}function GF(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(u=0)=>u*r:(u=0)=>a-u*r;return Array.from(t.variantChildren).sort(KF).forEach((u,c)=>{u.notify("AnimationStart",e),o.push(D2(u,e,{...s,delay:n+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function KF(t,e){return t.sortNodePosition(e)}function QF(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>D2(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=D2(t,e,n);else{const i=typeof e=="function"?If(t,e,n.custom):e;r=Promise.all(IE(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function LE(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const YF=d5.length;function RE(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?RE(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<YF;n++){const r=d5[n],i=t.props[r];(Pf(i)||i===!1)&&(e[r]=i)}return e}const XF=[...f5].reverse(),JF=f5.length;function ZF(t){return e=>Promise.all(e.map(({animation:n,options:r})=>QF(t,n,r)))}function eO(t){let e=ZF(t),n=Y4(),r=!0;const i=l=>(u,c)=>{var m;const d=If(t,c,l==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(d){const{transition:p,transitionEnd:x,...E}=d;u={...u,...E,...x}}return u};function s(l){e=l(t)}function o(l){const{props:u}=t,c=RE(t.parent)||{},d=[],m=new Set;let p={},x=1/0;for(let C=0;C<JF;C++){const w=XF[C],A=n[w],N=u[w]!==void 0?u[w]:c[w],R=Pf(N),z=w===l?A.isActive:null;z===!1&&(x=C);let Q=N===c[w]&&N!==u[w]&&R;if(Q&&r&&t.manuallyAnimateOnMount&&(Q=!1),A.protectedKeys={...p},!A.isActive&&z===null||!N&&!A.prevProp||f0(N)||typeof N=="boolean")continue;const L=tO(A.prevProp,N);let T=L||w===l&&A.isActive&&!Q&&R||C>x&&R,k=!1;const M=Array.isArray(N)?N:[N];let S=M.reduce(i(w),{});z===!1&&(S={});const{prevResolvedValues:P={}}=A,j={...P,...S},B=re=>{T=!0,m.has(re)&&(k=!0,m.delete(re)),A.needsAnimating[re]=!0;const $=t.getValue(re);$&&($.liveStyle=!1)};for(const re in j){const $=S[re],ae=P[re];if(p.hasOwnProperty(re))continue;let fe=!1;R2($)&&R2(ae)?fe=!LE($,ae):fe=$!==ae,fe?$!=null?B(re):m.add(re):$!==void 0&&m.has(re)?B(re):A.protectedKeys[re]=!0}A.prevProp=N,A.prevResolvedValues=S,A.isActive&&(p={...p,...S}),r&&t.blockInitialAnimation&&(T=!1),T&&(!(Q&&L)||k)&&d.push(...M.map(re=>({animation:re,options:{type:w}})))}if(m.size){const C={};if(typeof u.initial!="boolean"){const w=If(t,Array.isArray(u.initial)?u.initial[0]:u.initial);w&&w.transition&&(C.transition=w.transition)}m.forEach(w=>{const A=t.getBaseTarget(w),N=t.getValue(w);N&&(N.liveStyle=!0),C[w]=A??null}),d.push({animation:C})}let E=!!d.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(d):Promise.resolve()}function a(l,u){var d;if(n[l].isActive===u)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(m=>{var p;return(p=m.animationState)==null?void 0:p.setActive(l,u)}),n[l].isActive=u;const c=o(l);for(const m in n)n[m].protectedKeys={};return c}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Y4(),r=!0}}}function tO(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!LE(e,t):!1}function jl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Y4(){return{animate:jl(!0),whileInView:jl(),whileHover:jl(),whileTap:jl(),whileDrag:jl(),whileFocus:jl(),exit:jl()}}class pl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class nO extends pl{constructor(e){super(e),e.animationState||(e.animationState=eO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();f0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let rO=0;class iO extends pl{constructor(){super(...arguments),this.id=rO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const sO={animation:{Feature:nO},exit:{Feature:iO}};function Lf(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function sd(t){return{point:{x:t.pageX,y:t.pageY}}}const oO=t=>e=>h5(e)&&t(e,sd(e));function $h(t,e,n,r){return Lf(t,e,oO(n),r)}function jE({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function aO({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function lO(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const DE=1e-4,uO=1-DE,cO=1+DE,ME=.01,hO=0-ME,fO=0+ME;function fi(t){return t.max-t.min}function dO(t,e,n){return Math.abs(t-e)<=n}function X4(t,e,n,r=.5){t.origin=r,t.originPoint=Dn(e.min,e.max,t.origin),t.scale=fi(n)/fi(e),t.translate=Dn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=uO&&t.scale<=cO||isNaN(t.scale))&&(t.scale=1),(t.translate>=hO&&t.translate<=fO||isNaN(t.translate))&&(t.translate=0)}function Hh(t,e,n,r){X4(t.x,e.x,n.x,r?r.originX:void 0),X4(t.y,e.y,n.y,r?r.originY:void 0)}function J4(t,e,n){t.min=n.min+e.min,t.max=t.min+fi(e)}function pO(t,e,n){J4(t.x,e.x,n.x),J4(t.y,e.y,n.y)}function Z4(t,e,n){t.min=e.min-n.min,t.max=t.min+fi(e)}function Wh(t,e,n){Z4(t.x,e.x,n.x),Z4(t.y,e.y,n.y)}const eb=()=>({translate:0,scale:1,origin:0,originPoint:0}),Gu=()=>({x:eb(),y:eb()}),tb=()=>({min:0,max:0}),nr=()=>({x:tb(),y:tb()});function fs(t){return[t("x"),t("y")]}function bg(t){return t===void 0||t===1}function M2({scale:t,scaleX:e,scaleY:n}){return!bg(t)||!bg(e)||!bg(n)}function Ol(t){return M2(t)||FE(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function FE(t){return nb(t.x)||nb(t.y)}function nb(t){return t&&t!=="0%"}function Sm(t,e,n){const r=t-n,i=e*r;return n+i}function rb(t,e,n,r,i){return i!==void 0&&(t=Sm(t,i,r)),Sm(t,n,r)+e}function F2(t,e=0,n=1,r,i){t.min=rb(t.min,e,n,r,i),t.max=rb(t.max,e,n,r,i)}function OE(t,{x:e,y:n}){F2(t.x,e.translate,e.scale,e.originPoint),F2(t.y,n.translate,n.scale,n.originPoint)}const ib=.999999999999,sb=1.0000000000001;function mO(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Qu(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,OE(t,o)),r&&Ol(s.latestValues)&&Qu(t,s.latestValues))}e.x<sb&&e.x>ib&&(e.x=1),e.y<sb&&e.y>ib&&(e.y=1)}function Ku(t,e){t.min=t.min+e,t.max=t.max+e}function ob(t,e,n,r,i=.5){const s=Dn(t.min,t.max,i);F2(t,e,n,s,r)}function Qu(t,e){ob(t.x,e.x,e.scaleX,e.scale,e.originX),ob(t.y,e.y,e.scaleY,e.scale,e.originY)}function VE(t,e){return jE(lO(t.getBoundingClientRect(),e))}function gO(t,e,n){const r=VE(t,n),{scroll:i}=e;return i&&(Ku(r.x,i.offset.x),Ku(r.y,i.offset.y)),r}const BE=({current:t})=>t?t.ownerDocument.defaultView:null,ab=(t,e)=>Math.abs(t-e);function yO(t,e){const n=ab(t.x,e.x),r=ab(t.y,e.y);return Math.sqrt(n**2+r**2)}class UE{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Sg(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,p=yO(d.offset,{x:0,y:0})>=3;if(!m&&!p)return;const{point:x}=d,{timestamp:E}=jr;this.history.push({...x,timestamp:E});const{onStart:C,onMove:w}=this.handlers;m||(C&&C(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,d)},this.handlePointerMove=(d,m)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=_g(m,this.transformPagePoint),Fn.update(this.updatePoint,!0)},this.handlePointerUp=(d,m)=>{this.end();const{onEnd:p,onSessionEnd:x,resumeAnimation:E}=this.handlers;if(this.dragSnapToOrigin&&E&&E(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=Sg(d.type==="pointercancel"?this.lastMoveEventInfo:_g(m,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,C),x&&x(d,C)},!h5(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=sd(e),a=_g(o,this.transformPagePoint),{point:l}=a,{timestamp:u}=jr;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=n;c&&c(e,Sg(a,this.history)),this.removeListeners=nd($h(this.contextWindow,"pointermove",this.handlePointerMove),$h(this.contextWindow,"pointerup",this.handlePointerUp),$h(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),il(this.updatePoint)}}function _g(t,e){return e?{point:e(t.point)}:t}function lb(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Sg({point:t},e){return{point:t,delta:lb(t,zE(e)),offset:lb(t,vO(e)),velocity:wO(e,.1)}}function vO(t){return t[0]}function zE(t){return t[t.length-1]}function wO(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=zE(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>vo(e)));)n--;if(!r)return{x:0,y:0};const s=wo(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function xO(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Dn(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Dn(n,t,r.max):Math.min(t,n)),t}function ub(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function bO(t,{top:e,left:n,bottom:r,right:i}){return{x:ub(t.x,n,i),y:ub(t.y,e,r)}}function cb(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function _O(t,e){return{x:cb(t.x,e.x),y:cb(t.y,e.y)}}function SO(t,e){let n=.5;const r=fi(t),i=fi(e);return i>r?n=Nf(e.min,e.max-r,t.min):r>i&&(n=Nf(t.min,t.max-i,e.min)),ta(0,1,n)}function AO(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const O2=.35;function EO(t=O2){return t===!1?t=0:t===!0&&(t=O2),{x:hb(t,"left","right"),y:hb(t,"top","bottom")}}function hb(t,e,n){return{min:fb(t,e),max:fb(t,n)}}function fb(t,e){return typeof t=="number"?t:t[e]||0}const NO=new WeakMap;class TO{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nr(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(sd(c).point)},s=(c,d)=>{const{drag:m,dragPropagation:p,onDragStart:x}=this.getProps();if(m&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=$M(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),fs(C=>{let w=this.getAxisMotionValue(C).get()||0;if(xo.test(w)){const{projection:A}=this.visualElement;if(A&&A.layout){const N=A.layout.layoutBox[C];N&&(w=fi(N)*(parseFloat(w)/100))}}this.originPoint[C]=w}),x&&Fn.postRender(()=>x(c,d)),j2(this.visualElement,"transform");const{animationState:E}=this.visualElement;E&&E.setActive("whileDrag",!0)},o=(c,d)=>{const{dragPropagation:m,dragDirectionLock:p,onDirectionLock:x,onDrag:E}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:C}=d;if(p&&this.currentDirection===null){this.currentDirection=CO(C),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",d.point,C),this.updateAxis("y",d.point,C),this.visualElement.render(),E&&E(c,d)},a=(c,d)=>this.stop(c,d),l=()=>fs(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)==null?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new UE(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:BE(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Fn.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Kd(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=xO(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Wu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=bO(r.layoutBox,e):this.constraints=!1,this.elastic=EO(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&fs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=AO(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Wu(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=gO(r,i.root,this.visualElement.getTransformPagePoint());let o=_O(i.layout.layoutBox,s);if(n){const a=n(aO(o));this.hasMutatedConstraints=!!a,a&&(o=jE(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},u=fs(c=>{if(!Kd(c,n,this.currentDirection))return;let d=l&&l[c]||{};o&&(d={min:0,max:0});const m=i?200:1e6,p=i?40:1e7,x={type:"inertia",velocity:r?e[c]:0,bounceStiffness:m,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,x)});return Promise.all(u).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return j2(this.visualElement,e),r.start(x5(e,r,0,n,this.visualElement,!1))}stopAnimation(){fs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){fs(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){fs(n=>{const{drag:r}=this.getProps();if(!Kd(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Dn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Wu(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};fs(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=SO({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),fs(o=>{if(!Kd(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];a.set(Dn(l,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;NO.set(this.visualElement,this);const e=this.visualElement.current,n=$h(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Wu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Fn.read(r);const o=Lf(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(fs(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=O2,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Kd(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function CO(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class PO extends pl{constructor(e){super(e),this.removeGroupControls=ys,this.removeListeners=ys,this.controls=new TO(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ys}unmount(){this.removeGroupControls(),this.removeListeners()}}const db=t=>(e,n)=>{t&&Fn.postRender(()=>t(e,n))};class kO extends pl{constructor(){super(...arguments),this.removePointerDownListener=ys}onPointerDown(e){this.session=new UE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:db(e),onStart:db(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Fn.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=$h(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ep={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pb(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const yh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(pt.test(t))t=parseFloat(t);else return t;const n=pb(t,e.target.x),r=pb(t,e.target.y);return`${n}% ${r}%`}},IO={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=sl.parse(t);if(i.length>5)return r;const s=sl.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const u=Dn(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),s(i)}};class LO extends G.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;gF(RO),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Ep.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Fn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),c5.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function qE(t){const[e,n]=ZM(),r=G.useContext(EA);return y.jsx(LO,{...t,layoutGroup:r,switchLayoutGroup:G.useContext(bE),isPresent:e,safeToRemove:n})}const RO={borderRadius:{...yh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yh,borderTopRightRadius:yh,borderBottomLeftRadius:yh,borderBottomRightRadius:yh,boxShadow:IO};function jO(t,e,n){const r=ni(t)?t:Nc(t);return r.start(x5("",r,e,n)),r.animation}const DO=(t,e)=>t.depth-e.depth;class MO{constructor(){this.children=[],this.isDirty=!1}add(e){Hv(this.children,e),this.isDirty=!0}remove(e){Wv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(DO),this.isDirty=!1,this.children.forEach(e)}}function FO(t,e){const n=Pi.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(il(r),t(s-e))};return Fn.setup(r,!0),()=>il(r)}const $E=["TopLeft","TopRight","BottomLeft","BottomRight"],OO=$E.length,mb=t=>typeof t=="string"?parseFloat(t):t,gb=t=>typeof t=="number"||pt.test(t);function VO(t,e,n,r,i,s){i?(t.opacity=Dn(0,n.opacity??1,BO(r)),t.opacityExit=Dn(e.opacity??1,0,UO(r))):s&&(t.opacity=Dn(e.opacity??1,n.opacity??1,r));for(let o=0;o<OO;o++){const a=`border${$E[o]}Radius`;let l=yb(e,a),u=yb(n,a);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||gb(l)===gb(u)?(t[a]=Math.max(Dn(mb(l),mb(u),r),0),(xo.test(u)||xo.test(l))&&(t[a]+="%")):t[a]=u}(e.rotate||n.rotate)&&(t.rotate=Dn(e.rotate||0,n.rotate||0,r))}function yb(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const BO=HE(0,.5,MA),UO=HE(.5,.95,ys);function HE(t,e,n){return r=>r<t?0:r>e?1:n(Nf(t,e,r))}function vb(t,e){t.min=e.min,t.max=e.max}function hs(t,e){vb(t.x,e.x),vb(t.y,e.y)}function wb(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function xb(t,e,n,r,i){return t-=e,t=Sm(t,1/n,r),i!==void 0&&(t=Sm(t,1/i,r)),t}function zO(t,e=0,n=1,r=.5,i,s=t,o=t){if(xo.test(e)&&(e=parseFloat(e),e=Dn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Dn(s.min,s.max,r);t===s&&(a-=e),t.min=xb(t.min,e,n,a,i),t.max=xb(t.max,e,n,a,i)}function bb(t,e,[n,r,i],s,o){zO(t,e[n],e[r],e[i],e.scale,s,o)}const qO=["x","scaleX","originX"],$O=["y","scaleY","originY"];function _b(t,e,n,r){bb(t.x,e,qO,n?n.x:void 0,r?r.x:void 0),bb(t.y,e,$O,n?n.y:void 0,r?r.y:void 0)}function Sb(t){return t.translate===0&&t.scale===1}function WE(t){return Sb(t.x)&&Sb(t.y)}function Ab(t,e){return t.min===e.min&&t.max===e.max}function HO(t,e){return Ab(t.x,e.x)&&Ab(t.y,e.y)}function Eb(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function GE(t,e){return Eb(t.x,e.x)&&Eb(t.y,e.y)}function Nb(t){return fi(t.x)/fi(t.y)}function Tb(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class WO{constructor(){this.members=[]}add(e){Hv(this.members,e),e.scheduleRender()}remove(e){if(Wv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GO(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:m,skewX:p,skewY:x}=n;u&&(r=`perspective(${u}px) ${r}`),c&&(r+=`rotate(${c}deg) `),d&&(r+=`rotateX(${d}deg) `),m&&(r+=`rotateY(${m}deg) `),p&&(r+=`skewX(${p}deg) `),x&&(r+=`skewY(${x}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const Ag=["","X","Y","Z"],KO={visibility:"hidden"},QO=1e3;let YO=0;function Eg(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function KE(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=kE(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Fn,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&KE(r)}function QE({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=YO++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ZO),this.nodes.forEach(iV),this.nodes.forEach(sV),this.nodes.forEach(eV)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new MO)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Qv),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=mE(o)&&!YM(o),this.instance=o;const{layoutId:a,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let c;const d=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,c&&c(),c=FO(d,250),Ep.hasAnimatedSinceResize&&(Ep.hasAnimatedSinceResize=!1,this.nodes.forEach(Pb))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&u&&(a||l)&&this.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d,hasRelativeLayoutChanged:m,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||cV,{onLayoutAnimationStart:E,onLayoutAnimationComplete:C}=u.getProps(),w=!this.targetLayout||!GE(this.targetLayout,p),A=!d&&m;if(this.options.layoutRoot||this.resumeFrom||A||d&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...l5(x,"layout"),onPlay:E,onComplete:C};(u.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(c,A)}else d||Pb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),il(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oV),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&KE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Cb);return}this.isUpdating||this.nodes.forEach(nV),this.isUpdating=!1,this.nodes.forEach(rV),this.nodes.forEach(XO),this.nodes.forEach(JO),this.clearAllSnapshots();const a=Pi.now();jr.delta=ta(0,1e3/60,a-jr.timestamp),jr.timestamp=a,jr.isProcessing=!0,mg.update.process(jr),mg.preRender.process(jr),mg.render.process(jr),jr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,c5.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(tV),this.sharedNodes.forEach(aV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!fi(this.snapshot.measuredBox.x)&&!fi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=nr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!WE(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;o&&this.instance&&(a||Ol(this.latestValues)||c)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),hV(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return nr();const a=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(fV))){const{scroll:c}=this.root;c&&(Ku(a.x,c.offset.x),Ku(a.y,c.offset.y))}return a}removeElementScroll(o){var l;const a=nr();if(hs(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:m}=c;c!==this.root&&d&&m.layoutScroll&&(d.wasRoot&&hs(a,o),Ku(a.x,d.offset.x),Ku(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=nr();hs(l,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];!a&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Qu(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),Ol(c.latestValues)&&Qu(l,c.latestValues)}return Ol(this.latestValues)&&Qu(l,this.latestValues),l}removeTransform(o){const a=nr();hs(a,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Ol(u.latestValues))continue;M2(u.latestValues)&&u.updateSnapshot();const c=nr(),d=u.measurePageBox();hs(c,d),_b(a,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return Ol(this.latestValues)&&_b(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==jr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var m;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:c,layoutId:d}=this.options;if(!(!this.layout||!(c||d))){if(this.resolvedRelativeTargetAt=jr.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nr(),this.relativeTargetOrigin=nr(),Wh(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),hs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=nr(),this.targetWithTransforms=nr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),pO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hs(this.target,this.layout.layoutBox),OE(this.target,this.targetDelta)):hs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nr(),this.relativeTargetOrigin=nr(),Wh(this.relativeTargetOrigin,this.target,p.target),hs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||M2(this.parent.latestValues)||FE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===jr.timestamp&&(l=!1),l)return;const{layout:u,layoutId:c}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||c))return;hs(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,m=this.treeScale.y;mO(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=nr());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(wb(this.prevProjectionDelta.x,this.projectionDelta.x),wb(this.prevProjectionDelta.y,this.projectionDelta.y)),Hh(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==m||!Tb(this.projectionDelta.x,this.prevProjectionDelta.x)||!Tb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Gu(),this.projectionDelta=Gu(),this.projectionDeltaWithTransform=Gu()}setAnimationOrigin(o,a=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=Gu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=nr(),p=l?l.source:void 0,x=this.layout?this.layout.source:void 0,E=p!==x,C=this.getStack(),w=!C||C.members.length<=1,A=!!(E&&!w&&this.options.crossfade===!0&&!this.path.some(uV));this.animationProgress=0;let N;this.mixTargetDelta=R=>{const z=R/1e3;kb(d.x,o.x,z),kb(d.y,o.y,z),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wh(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lV(this.relativeTarget,this.relativeTargetOrigin,m,z),N&&HO(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=nr()),hs(N,this.relativeTarget)),E&&(this.animationValues=c,VO(c,u,this.latestValues,z,A,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,u;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(u=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||u.stop(),this.pendingAnimation&&(il(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fn.update(()=>{Ep.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Nc(0)),this.currentAnimation=jO(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),o.onUpdate&&o.onUpdate(c)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(QO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:u,latestValues:c}=o;if(!(!a||!l||!u)){if(this!==o&&this.layout&&u&&YE(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||nr();const d=fi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const m=fi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}hs(a,l),Qu(a,c),Hh(this.projectionDeltaWithTransform,this.layoutCorrected,a,c)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new WO),this.sharedNodes.get(o).add(a);const u=a.options.initialPromotionConfig;a.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const u={};l.z&&Eg("z",o,u,this.animationValues);for(let c=0;c<Ag.length;c++)Eg(`rotate${Ag[c]}`,o,u,this.animationValues),Eg(`skew${Ag[c]}`,o,u,this.animationValues);o.render();for(const c in u)o.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return KO;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=Ap(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=Ap(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ol(this.latestValues)&&(p.transform=l?l({},""):"none",this.hasProjected=!1),p}const c=u.animationValues||u.latestValues;this.applyTransformsToTarget(),a.transform=GO(this.projectionDeltaWithTransform,this.treeScale,c),l&&(a.transform=l(c,a.transform));const{x:d,y:m}=this.projectionDelta;a.transformOrigin=`${d.origin*100}% ${m.origin*100}% 0`,u.animationValues?a.opacity=u===this?c.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:c.opacityExit:a.opacity=u===this?c.opacity!==void 0?c.opacity:"":c.opacityExit!==void 0?c.opacityExit:0;for(const p in kf){if(c[p]===void 0)continue;const{correct:x,applyTo:E,isCSSVariable:C}=kf[p],w=a.transform==="none"?c[p]:x(c[p],u);if(E){const A=E.length;for(let N=0;N<A;N++)a[E[N]]=w}else C?this.options.visualElement.renderState.vars[p]=w:a[p]=w}return this.options.layoutId&&(a.pointerEvents=u===this?Ap(o==null?void 0:o.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Cb),this.root.sharedNodes.clear()}}}function XO(t){t.updateLayout()}function JO(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?fs(d=>{const m=o?e.measuredBox[d]:e.layoutBox[d],p=fi(m);m.min=r[d].min,m.max=m.min+p}):YE(s,e.layoutBox,r)&&fs(d=>{const m=o?e.measuredBox[d]:e.layoutBox[d],p=fi(r[d]);m.max=m.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+p)});const a=Gu();Hh(a,r,e.layoutBox);const l=Gu();o?Hh(l,t.applyTransform(i,!0),e.measuredBox):Hh(l,r,e.layoutBox);const u=!WE(a);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:p}=d;if(m&&p){const x=nr();Wh(x,e.layoutBox,m.layoutBox);const E=nr();Wh(E,r,p.layoutBox),GE(x,E)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=E,t.relativeTargetOrigin=x,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:u,hasRelativeLayoutChanged:c})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function ZO(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function eV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function tV(t){t.clearSnapshot()}function Cb(t){t.clearMeasurements()}function nV(t){t.isLayoutDirty=!1}function rV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Pb(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function iV(t){t.resolveTargetDelta()}function sV(t){t.calcProjection()}function oV(t){t.resetSkewAndRotation()}function aV(t){t.removeLeadSnapshot()}function kb(t,e,n){t.translate=Dn(e.translate,0,n),t.scale=Dn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Ib(t,e,n,r){t.min=Dn(e.min,n.min,r),t.max=Dn(e.max,n.max,r)}function lV(t,e,n,r){Ib(t.x,e.x,n.x,r),Ib(t.y,e.y,n.y,r)}function uV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const cV={duration:.45,ease:[.4,0,.1,1]},Lb=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Rb=Lb("applewebkit/")&&!Lb("chrome/")?Math.round:ys;function jb(t){t.min=Rb(t.min),t.max=Rb(t.max)}function hV(t){jb(t.x),jb(t.y)}function YE(t,e,n){return t==="position"||t==="preserve-aspect"&&!dO(Nb(e),Nb(n),.2)}function fV(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const dV=QE({attachResizeListener:(t,e)=>Lf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ng={current:void 0},XE=QE({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ng.current){const t=new dV({});t.mount(window),t.setOptions({layoutScroll:!0}),Ng.current=t}return Ng.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),pV={pan:{Feature:kO},drag:{Feature:PO,ProjectionNode:XE,MeasureLayout:qE}};function Db(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Fn.postRender(()=>s(e,sd(e)))}class mV extends pl{mount(){const{current:e}=this.node;e&&(this.unmount=HM(e,(n,r)=>(Db(this.node,r,"Start"),i=>Db(this.node,i,"End"))))}unmount(){}}class gV extends pl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=nd(Lf(this.node.current,"focus",()=>this.onFocus()),Lf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Mb(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Fn.postRender(()=>s(e,sd(e)))}class yV extends pl{mount(){const{current:e}=this.node;e&&(this.unmount=QM(e,(n,r)=>(Mb(this.node,r,"Start"),(i,{success:s})=>Mb(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const V2=new WeakMap,Tg=new WeakMap,vV=t=>{const e=V2.get(t.target);e&&e(t)},wV=t=>{t.forEach(vV)};function xV({root:t,...e}){const n=t||document;Tg.has(n)||Tg.set(n,{});const r=Tg.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(wV,{root:t,...e})),r[i]}function bV(t,e,n){const r=xV(e);return V2.set(t,n),r.observe(t),()=>{V2.delete(t),r.unobserve(t)}}const _V={some:0,all:1};class SV extends pl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:_V[i]},a=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),m=u?c:d;m&&m(l)};return bV(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(AV(e,n))&&this.startObserver()}unmount(){}}function AV({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const EV={inView:{Feature:SV},tap:{Feature:yV},focus:{Feature:gV},hover:{Feature:mV}},NV={layout:{ProjectionNode:XE,MeasureLayout:qE}},B2={current:null},JE={current:!1};function TV(){if(JE.current=!0,!!qv)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>B2.current=t.matches;t.addListener(e),e()}else B2.current=!1}const CV=new WeakMap;function PV(t,e,n){for(const r in e){const i=e[r],s=n[r];if(ni(i))t.addValue(r,i);else if(ni(s))t.addValue(r,Nc(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Nc(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Fb=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kV{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=a5,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Pi.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Fn.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=d0(n),this.isVariantNode=wE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in d){const p=d[m];l[m]!==void 0&&ni(p)&&p.set(l[m],!1)}}mount(e){this.current=e,CV.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),JE.current||TV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:B2.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),il(this.notifyUpdate),il(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Vc.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Fn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Tc){const n=Tc[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Fb.length;r++){const i=Fb[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=PV(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Nc(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(NA(r)||CA(r))?r=parseFloat(r):!JM(r)&&sl.test(n)&&(r=cE(e,n)),this.setBaseTarget(e,ni(r)?r.get():r)),ni(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=v5(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ni(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Qv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class ZE extends kV{constructor(){super(...arguments),this.KeyframeResolver=BM}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ni(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function eN(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}function IV(t){return window.getComputedStyle(t)}class LV extends ZE{constructor(){super(...arguments),this.type="html",this.renderInstance=eN}readValueFromInstance(e,n){var r;if(Vc.has(n))return(r=this.projection)!=null&&r.isProjecting?T2(n):sM(e,n);{const i=IV(e),s=(Jv(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return VE(e,n)}build(e,n,r){m5(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return w5(e,n,r)}}const tN=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function RV(t,e,n,r){eN(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(tN.has(i)?i:p5(i),e.attrs[i])}class jV extends ZE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=nr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Vc.has(n)){const r=uE(n);return r&&r.default||0}return n=tN.has(n)?n:p5(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return PE(e,n,r)}build(e,n,r){EE(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){RV(e,n,r,i)}mount(e){this.isSVGTag=TE(e.tagName),super.mount(e)}}const DV=(t,e)=>y5(t)?new jV(e):new LV(e,{allowProjection:t!==G.Fragment}),MV=RF({...sO,...EV,...pV,...NV},DV),Ob=iF(MV),FV=300,Vb=({table:t,isSelected:e,isAddButton:n,onClick:r,onDoubleClick:i,onEnterSelectionMode:s,onDelete:o,isSelectionMode:a})=>{const l=G.useRef(null),u=G.useRef(0),[c,d]=G.useState(!1),m=G.useRef(null);G.useEffect(()=>{const w=A=>{m.current&&!m.current.contains(A.target)&&d(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[]),G.useEffect(()=>{const w=l.current;if(!w)return;const A=N=>{var Q;const R=Date.now(),z=R-(u.current||0);if(z>0&&z<=FV){N.preventDefault(),(Q=N.stopPropagation)==null||Q.call(N),i==null||i(),u.current=0;return}u.current=R};return w.addEventListener("touchend",A,{passive:!1}),()=>{w.removeEventListener("touchend",A)}},[i]);const p=w=>{w.stopPropagation(),d(A=>!A)},x=w=>{w.stopPropagation(),s==null||s(),d(!1)},E=w=>{w.stopPropagation(),o==null||o(),d(!1)};if(n)return y.jsx(Ob.button,{onClick:r,whileHover:{scale:1.03},whileTap:{scale:.97},className:"h-40 rounded-2xl border-2 border-dashed border-gray-300 flex items-center justify-center transition hover:border-blue-500 hover:text-blue-600 bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Add Table",children:y.jsx("span",{className:"text-gray-500 font-medium text-lg",children:"+ Add Table"})});const C=(t==null?void 0:t.status)==="occupied";return y.jsxs(Ob.div,{ref:l,role:"button",tabIndex:0,whileHover:{scale:1.02},whileTap:{scale:.98},onClick:r,onDoubleClick:()=>i==null?void 0:i(),onKeyDown:w=>{w.key==="Enter"&&(i==null||i())},className:`relative h-40 rounded-2xl shadow-md hover:shadow-lg transition cursor-pointer flex flex-col items-center justify-center border p-4
        ${e?"border-blue-600 border-2 ring-2 ring-blue-300 bg-blue-50":C?"bg-green-100 border-green-400 text-green-900":"bg-white border-gray-200 text-gray-800"}`,"aria-pressed":e||C,children:[e&&y.jsx("div",{className:"absolute top-2 right-2 bg-blue-600 text-white rounded-full h-6 w-6 flex items-center justify-center z-20",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(o||s)&&!e&&y.jsxs("div",{ref:m,className:"absolute top-1 right-1 z-10",children:[y.jsx("button",{onClick:p,className:"p-2 rounded-full hover:bg-black/10 transition-colors","aria-label":"Table options",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),c&&y.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5",children:y.jsxs("div",{className:"py-1",children:[!a&&s&&y.jsxs("button",{onClick:x,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center gap-2",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-10.707a1 1 0 00-1.414-1.414L9 9.586 7.707 8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Select"]}),o&&y.jsxs("button",{onClick:E,className:"w-full text-left px-4 py-2 text-sm text-red-700 hover:bg-red-50 hover:text-red-800 flex items-center gap-2",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),"Delete Table"]})]})})]}),(t==null?void 0:t.status)&&y.jsx("div",{className:`absolute top-2 left-2 h-3 w-3 rounded-full ${t.status==="available"?"bg-green-500":t.status==="occupied"?"bg-red-500":"bg-yellow-400"}`,title:t.status}),y.jsx("span",{className:"text-xl font-semibold",children:(t==null?void 0:t.name)??"Table"}),(t==null?void 0:t.status)&&y.jsx("span",{className:"text-sm mt-1 capitalize",children:t.status})]})},OV=()=>{const[t,e]=G.useState([]),[n,r]=G.useState(!1),[i,s]=G.useState(!0),[o,a]=G.useState(!1),l=jS(),[u,c]=G.useState(!1),[d,m]=G.useState(new Set),[p,x]=G.useState("single"),[E,C]=G.useState(""),[w,A]=G.useState(""),[N,R]=G.useState("T");G.useEffect(()=>{s(!0);const B=_A(X=>{e(X||[]),s(!1)},X=>{console.error("Error fetching tables in real-time:",X),s(!1)});return()=>B()},[]);const z=B=>{u||!B||l(`/order?tableId=${encodeURIComponent(B)}`)},Q=()=>{r(!1),x("single"),C(""),A(""),R("T")},L=B=>{c(!0),m(X=>new Set(X).add(B))},T=B=>{u&&m(X=>{const se=new Set(X);return se.has(B)?se.delete(B):se.add(B),se.size===0&&c(!1),se})},k=()=>{m(new Set),c(!1)},M=async()=>{if(d.size===0)return;if(window.confirm(`Are you sure you want to delete ${d.size} selected table(s)? This action cannot be undone.`))try{await H9(Array.from(d)),k()}catch(X){console.error("Error deleting selected tables:",X),alert("Failed to delete the selected tables. Please try again.")}},S=async()=>{const B=E.trim();if(B){if(t.some(X=>X.name.toLowerCase()===B.toLowerCase())){alert(`A table with the name "${B}" already exists.`);return}a(!0);try{await z9(B),Q()}catch(X){console.error("Error adding table:",X),alert("Failed to add table.")}finally{a(!1)}}},P=async()=>{const B=w.trim();if(!B)return;let X=[];const se=B.match(/^(\d+)-(\d+)$/);if(se){const fe=parseInt(se[1],10),ve=parseInt(se[2],10);if(isNaN(fe)||isNaN(ve)||fe>ve){alert("Invalid range. The start number must be less than or equal to the end number.");return}for(let V=fe;V<=ve;V++)X.push(`${N.trim()}${V}`)}else{const fe=B.split(",").map(ve=>ve.trim()).filter(Boolean);X.push(...fe)}if(X.length===0){alert("No valid table names found. Please check your input.");return}const re=new Set(t.map(fe=>fe.name.toLowerCase())),$=[],ae=[];if(X.forEach(fe=>{re.has(fe.toLowerCase())||$.some(ve=>ve.toLowerCase()===fe.toLowerCase())?ae.push(fe):$.push(fe)}),$.length===0){alert(`All proposed tables already exist or were duplicates in your input: ${ae.join(", ")}.`);return}a(!0);try{await q9($);let fe=`Successfully added ${$.length} new table(s).`;ae.length>0&&(fe+=`
${ae.length} duplicate(s) were ignored: ${ae.join(", ")}.`),alert(fe),Q()}catch(fe){console.error("Error adding tables in bulk:",fe),alert("Failed to add tables in bulk. Please try again.")}finally{a(!1)}},j=async B=>{if(!B)return;if(window.confirm("Are you sure you want to delete this table? This action cannot be undone.")){d.has(B)&&m(se=>{const re=new Set(se);return re.delete(B),re.size===0&&c(!1),re});try{await $9(B)}catch(se){console.error("Error deleting table:",se),alert("Failed to delete table. Please try again.")}}};return y.jsxs("div",{className:"min-h-screen bg-gray-100 px-4 py-8 md:px-8",children:[y.jsxs("div",{className:"max-w-6xl mx-auto",children:[y.jsxs("header",{className:"mb-8",children:[y.jsx("h1",{className:"text-4xl font-semibold text-gray-900",children:"Tables"}),y.jsx("p",{className:"text-gray-600 mt-2",children:u?`${d.size} table(s) selected`:"Manage all your restaurant tables from here."})]}),i?y.jsx("div",{className:"text-gray-500 mb-6",children:"Loading tables..."}):null,y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:[[...t].sort((B,X)=>{const se=parseInt(B.name.replace(/\D/g,""),10)||1/0,re=parseInt(X.name.replace(/\D/g,""),10)||1/0;return se!==re?se-re:B.name.localeCompare(X.name)}).map(B=>{const X=B.id??B.name;return y.jsx(Vb,{table:B,isSelected:d.has(X),isSelectionMode:u,onClick:()=>T(X),onDoubleClick:()=>z(X),onEnterSelectionMode:()=>L(X),onDelete:()=>j(X)},X)}),y.jsx(Vb,{isAddButton:!0,onClick:()=>r(!0)})]})]}),u&&y.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex items-center gap-3 bg-white p-3 rounded-2xl shadow-lg border animate-fade-in-up",children:[y.jsxs("button",{onClick:M,className:"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition flex items-center gap-2 disabled:bg-red-300",disabled:d.size===0,children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),"Delete"]}),y.jsx("button",{onClick:k,className:"p-2 rounded-full text-gray-600 hover:bg-gray-200 transition","aria-label":"Cancel selection",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),y.jsx(Va,{isOpen:n,onClose:Q,children:y.jsxs("div",{className:"p-4",children:[y.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Add Table(s)"}),y.jsxs("div",{className:"flex border-b mb-4",children:[y.jsx("button",{onClick:()=>x("single"),className:`px-4 py-2 text-sm font-medium ${p==="single"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Single"}),y.jsx("button",{onClick:()=>x("bulk"),className:`px-4 py-2 text-sm font-medium ${p==="bulk"?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"}`,children:"Bulk"})]}),p==="single"?y.jsx("div",{children:y.jsx("input",{type:"text",value:E,onChange:B=>C(B.target.value),placeholder:"Enter table name (e.g. T1)",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4",onKeyDown:B=>B.key==="Enter"&&S()})}):y.jsxs("div",{children:[y.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Use a range (e.g., ",y.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"1-10"}),") or comma-separated names (e.g., ",y.jsx("code",{className:"bg-gray-200 px-1 rounded",children:"A1, B2, C3"}),")."]}),y.jsxs("div",{className:"flex gap-2 mb-4",children:[y.jsx("input",{type:"text",value:N,onChange:B=>R(B.target.value),placeholder:"Prefix",className:"w-1/4 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",title:"Prefix for range-based creation"}),y.jsx("input",{type:"text",value:w,onChange:B=>A(B.target.value),placeholder:"e.g. 1-10 or T1, B2, C3",className:"w-3/4 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",onKeyDown:B=>B.key==="Enter"&&P()})]})]}),y.jsxs("div",{className:"flex justify-end gap-2",children:[y.jsx("button",{onClick:Q,className:"px-4 py-2 rounded-lg border disabled:opacity-50",disabled:o,children:"Cancel"}),y.jsx("button",{onClick:p==="single"?S:P,className:"bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition disabled:bg-blue-300 disabled:cursor-not-allowed",disabled:o,children:o?"Adding...":"Done"})]})]})})]})},Cg=({quantity:t,onDecrease:e,onIncrease:n})=>y.jsxs("div",{className:"flex items-center justify-center gap-2",children:[y.jsx("button",{onClick:e,className:"w-8 h-8 rounded-full bg-gray-200 text-gray-800 font-bold text-lg hover:bg-gray-300 transition-colors disabled:opacity-50",disabled:t<=0,children:"-"}),y.jsx("span",{className:"text-lg font-semibold w-10 text-center",children:t}),y.jsx("button",{onClick:n,className:"w-8 h-8 rounded-full bg-blue-600 text-white font-bold text-lg hover:bg-blue-700 transition-colors",children:"+"})]}),VV=()=>{var P,j;const[t,e]=G.useState([]),[n,r]=G.useState([]),[i,s]=G.useState([]),[o,a]=G.useState(""),[l,u]=G.useState(""),[c,d]=G.useState(!0),[m,p]=G.useState(!1),[x,E]=G.useState(!1),[C,w]=G.useState({currencySymbol:""}),[A,N]=G.useState(null),[R,z]=G.useState({}),Q=Lc();G.useEffect(()=>{let B=!0;return(async()=>{p(!0);try{const[se,re,$,ae]=await Promise.all([bA(),Af(),zv(),dl()]);if(!B)return;if(se){const Y=[...se.filter(ie=>ie.status==="available")].sort((ie,ne)=>ie.name.localeCompare(ne.name,void 0,{numeric:!0}));e(Y)}else e([]);r(re||[]),s($||[]),ae&&w(ae);const ve=new URLSearchParams(Q.search).get("tableId");ve&&(a(ve),d(!0)),re&&re.length>0&&!l&&u(re[0].id??re[0]._id??"")}catch(se){console.error("Error fetching order data:",se),alert("Failed to load order data. Please try again.")}finally{p(!1)}})(),()=>{B=!1}},[Q.search]);const L=B=>{N(X=>X===B?null:B)},T=(B,X,se)=>{z(re=>{const $={...re};$[B]||($[B]={full:0,half:0,quarter:0});const ae=$[B][X]||0;return $[B][X]=Math.max(0,ae+se),$[B].full===0&&$[B].half===0&&$[B].quarter===0&&delete $[B],$})},k=Object.keys(R).reduce((B,X)=>{const se=R[X],re=i.find(fe=>(fe.id??fe._id)===X);if(!re)return B;let $=0;const ae=re.fullPrice??re.price??0;return se.full>0&&($+=ae*se.full),se.half>0&&re.halfPrice&&($+=re.halfPrice*se.half),se.quarter>0&&re.quarterPrice&&($+=re.quarterPrice*se.quarter),B+$},0),M=B=>{const X=R[B];return X?(X.full||0)+(X.half||0)+(X.quarter||0):0},S=async()=>{if(!o){alert("Please select a table before submitting the order."),d(!0);return}const B=Object.entries(R).flatMap(([X,se])=>{const re=i.find(fe=>(fe.id??fe._id)===X);if(!re)return[];const $=[],ae=re.fullPrice??re.price??0;return se.full>0&&$.push({itemId:X,quantity:se.full,portion:"full",price:ae}),se.half>0&&re.halfPrice&&$.push({itemId:X,quantity:se.half,portion:"half",price:re.halfPrice}),se.quarter>0&&re.quarterPrice&&$.push({itemId:X,quantity:se.quarter,portion:"quarter",price:re.quarterPrice}),$});if(!(B.length===0&&!confirm("You have no items in the order. Submit empty order?"))){E(!0);try{await Y9({tableId:o,staffId:l||null,items:B,total:k,createdAt:new Date().toISOString()}),await SA(o,"occupied"),window.dispatchEvent(new CustomEvent("tablesUpdated")),alert("Order submitted successfully!"),z({}),N(null)}catch(X){console.error("Error submitting order:",X),alert("Failed to submit order. Try again.")}finally{E(!1)}}};return y.jsxs("div",{className:"container mx-auto py-6 px-4",children:[y.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Place Order"}),y.jsxs(Va,{isOpen:c,onClose:()=>d(!1),children:[y.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Select Table and Staff"}),y.jsx("label",{className:"block text-sm font-medium mb-1",children:"Table"}),y.jsxs("select",{value:o,onChange:B=>a(B.target.value),className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[y.jsx("option",{value:"",children:"Select Table"}),t.map(B=>y.jsx("option",{value:B.id??B._id,children:B.name},B.id??B._id))]}),y.jsx("label",{className:"block text-sm font-medium mb-1",children:"Staff (optional)"}),y.jsxs("select",{value:l,onChange:B=>u(B.target.value),className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[y.jsx("option",{value:"",children:"Select Staff (Optional)"}),n.map(B=>y.jsx("option",{value:B.id??B._id,children:B.name},B.id??B._id))]}),y.jsx("div",{className:"flex justify-end",children:y.jsx("button",{onClick:()=>d(!1),disabled:!o,className:`px-4 py-2 rounded-lg transition-colors ${o?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600"}`,children:"Done"})})]}),m&&y.jsx("div",{className:"text-gray-500 mb-4 text-center",children:"Loading menu & data..."}),o&&y.jsxs("div",{className:"mb-4 p-4 bg-white rounded-lg shadow flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-lg font-medium text-gray-800",children:((P=t.find(B=>(B.id??B._id)===o))==null?void 0:P.name)||"Selected Table"}),y.jsxs("div",{className:"text-sm text-gray-500",children:["Staff: ",((j=n.find(B=>(B.id??B._id)===l))==null?void 0:j.name)||"Not assigned"]})]}),y.jsx("div",{children:y.jsx("button",{onClick:()=>d(!0),className:"px-3 py-2 bg-gray-100 rounded border hover:bg-gray-200",children:"Change"})})]}),y.jsx("div",{className:"space-y-2 mb-24",children:i.map(B=>{const X=B.id??B._id,se=A===X,re=R[X],$=M(X);return y.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden transition-shadow duration-300 hover:shadow-md",children:[y.jsxs("div",{className:"flex justify-between items-center p-4 cursor-pointer",onClick:()=>L(X),children:[y.jsx("span",{className:"font-semibold text-gray-800",children:B.name}),y.jsxs("div",{className:"flex items-center gap-4",children:[$>0&&y.jsx("span",{className:"bg-blue-600 text-white text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full",children:$}),y.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform duration-300 ${se?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]})]}),y.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${se?"max-h-96":"max-h-0"}`,children:y.jsxs("div",{className:"p-4 border-t border-gray-200 bg-gray-50/50 space-y-3",children:[y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-medium",children:"Full"}),y.jsxs("p",{className:"text-sm text-gray-600",children:[C.currencySymbol,(B.fullPrice??B.price).toFixed(2)]})]}),y.jsx(Cg,{quantity:(re==null?void 0:re.full)||0,onDecrease:()=>T(X,"full",-1),onIncrease:()=>T(X,"full",1)})]}),B.halfPrice!=null&&y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-medium",children:"Half"}),y.jsxs("p",{className:"text-sm text-gray-600",children:[C.currencySymbol,B.halfPrice.toFixed(2)]})]}),y.jsx(Cg,{quantity:(re==null?void 0:re.half)||0,onDecrease:()=>T(X,"half",-1),onIncrease:()=>T(X,"half",1)})]}),B.quarterPrice!=null&&y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-medium",children:"Quarter"}),y.jsxs("p",{className:"text-sm text-gray-600",children:[C.currencySymbol,B.quarterPrice.toFixed(2)]})]}),y.jsx(Cg,{quantity:(re==null?void 0:re.quarter)||0,onDecrease:()=>T(X,"quarter",-1),onIncrease:()=>T(X,"quarter",1)})]})]})})]},X)})}),y.jsxs("div",{className:`fixed bottom-0 right-0 bg-white shadow-lg rounded-t-lg p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 border-t z-10 transition-all duration-300 ease-in-out 
        left-0 md:left-64`,children:[y.jsxs("div",{className:"text-xl font-semibold text-gray-800",children:["Total: ",C.currencySymbol,k.toFixed(2)]}),y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("button",{onClick:()=>d(!0),className:"px-3 py-2 rounded border hover:bg-gray-50 text-sm font-medium",children:"Table/Staff"}),y.jsx("button",{onClick:S,disabled:x||!o,className:`px-6 py-2 rounded-lg transition-colors font-semibold ${o?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,children:x?"Submitting...":"Submit Order"})]})]})]})},BV=({item:t,currencySymbol:e="",quantity:n=0,onCardClick:r,selectionMode:i=!1,isSelected:s=!1,onSelect:o})=>{if(!t)return null;const a=()=>{i?o==null||o():r==null||r(t)},l=["bg-white rounded-xl shadow-md p-4 flex flex-col justify-between transition-all duration-200 relative border",r||i?"cursor-pointer":"",s?"ring-2 ring-blue-600 border-blue-500 shadow-lg":"border-gray-200 hover:shadow-lg"].join(" ");return y.jsxs("div",{className:l,onClick:a,children:[n>0&&!i&&y.jsx("div",{className:"absolute top-[-10px] right-[-10px] bg-blue-600 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center shadow-lg z-10",children:n}),i&&s&&y.jsx("div",{className:"absolute inset-0 bg-blue-500 bg-opacity-10 rounded-xl pointer-events-none flex items-center justify-center",children:y.jsx("div",{className:"bg-white rounded-full p-1 shadow",children:y.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})})}),y.jsxs("div",{className:"flex-grow",children:[y.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2 truncate",children:t.name}),y.jsx("div",{className:"text-sm font-semibold mb-3",children:t.fullPrice||t.halfPrice||t.quarterPrice?y.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-3 gap-y-1 text-gray-700",children:[t.fullPrice!=null&&y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"font-medium text-gray-500",children:"Full:"}),y.jsxs("span",{children:[e,t.fullPrice.toFixed(2)]})]}),t.halfPrice!=null&&y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"font-medium text-gray-500",children:"Half:"}),y.jsxs("span",{children:[e,t.halfPrice.toFixed(2)]})]}),t.quarterPrice!=null&&y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"font-medium text-gray-500",children:"Qtr:"}),y.jsxs("span",{children:[e,t.quarterPrice.toFixed(2)]})]})]}):t.price&&y.jsxs("div",{className:"text-gray-700",children:[e,t.price.toFixed(2)]})}),t.ingredients&&y.jsx("p",{className:"text-xs text-gray-600 mb-2",children:t.ingredients})]}),t.specialNote&&y.jsxs("p",{className:"text-xs italic text-blue-600 mt-auto pt-2 border-t border-gray-100",children:["Note: ",t.specialNote]})]})},UV=()=>{const[t,e]=G.useState([]),[n,r]=G.useState(!1),[i,s]=G.useState(!1),[o,a]=G.useState(!1),[l,u]=G.useState(!1),[c,d]=G.useState([]),[m,p]=G.useState(!1),[x,E]=G.useState(!1),[C,w]=G.useState({name:"",fullPrice:"",halfPrice:"",quarterPrice:"",ingredients:"",specialNote:""}),[A,N]=G.useState([{name:"",fullPrice:"",halfPrice:"",quarterPrice:"",ingredients:"",specialNote:""}]),[R,z]=G.useState(!1),Q=G.useRef([]);G.useEffect(()=>{const ne=G9(oe=>{e(oe||[])});return()=>{typeof ne=="function"&&ne()}},[]);const L=()=>u(!0),T=()=>{u(!1),d([])},k=ne=>{d(oe=>oe.includes(ne)?oe.filter(ue=>ue!==ne):[...oe,ne])},M=()=>{c.length===t.length?d([]):d(t.map(ne=>ne.id))},S=async()=>{if(c.length!==0){p(!0);try{await W9(c),alert("Selected items deleted successfully."),T()}catch(ne){console.error("Error deleting selected items:",ne),alert("Failed to delete items. Please check the console for details.")}finally{p(!1),E(!1)}}},P=ne=>{const{name:oe,value:ue}=ne.target;w(we=>({...we,[oe]:ue}))},j=async()=>{if(!C.name||!C.fullPrice){alert("Item name and Full Portion price are required.");return}const ne=parseFloat(C.fullPrice);if(isNaN(ne)){alert("Full Portion price must be a valid number.");return}const oe=C.halfPrice?parseFloat(C.halfPrice):null,ue=C.quarterPrice?parseFloat(C.quarterPrice):null;try{await N4({name:C.name.trim(),fullPrice:ne,halfPrice:oe,quarterPrice:ue,ingredients:C.ingredients.trim(),specialNote:C.specialNote.trim()}),w({name:"",fullPrice:"",halfPrice:"",quarterPrice:"",ingredients:"",specialNote:""}),r(!1)}catch(we){console.error("Error adding menu item:",we),alert("Failed to add menu item.")}},B=()=>{s(!1),a(!0),Q.current=[]},X="w-full p-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow",se=(ne,oe)=>(Q.current[ne]||(Q.current[ne]=[]),Q.current[ne][oe]||(Q.current[ne][oe]=on.createRef()),Q.current[ne][oe]),re=ne=>{!Q.current||!Q.current.length||Q.current.splice(ne,1)},$=(ne,oe,ue)=>{let be=oe,Se=ue;switch(ne.key){case"ArrowUp":be=Math.max(0,oe-1);break;case"ArrowDown":be=Math.min(A.length-1,oe+1);break;case"ArrowLeft":Se=Math.max(0,ue-1);break;case"ArrowRight":Se=Math.min(5,ue+1);break;default:return}ne.preventDefault();const Re=se(be,Se);if(Re&&Re.current){Re.current.focus();const Ae=Re.current;Ae.setSelectionRange&&typeof Ae.value=="string"&&Ae.setSelectionRange(Ae.value.length,Ae.value.length)}},ae=(ne,oe,ue)=>{N(we=>{const be=[...we];return be[ne]={...be[ne],[oe]:ue},be})},fe=()=>{N(ne=>[...ne,{name:"",fullPrice:"",halfPrice:"",quarterPrice:"",ingredients:"",specialNote:""}])},ve=ne=>{N(oe=>oe.filter((ue,we)=>we!==ne)),re(ne)},V=()=>{N([{name:"",fullPrice:"",halfPrice:"",quarterPrice:"",ingredients:"",specialNote:""}]),Q.current=[]},Y=async()=>{const ne=A.map(ue=>({...ue,fullPriceParsed:parseFloat(ue.fullPrice),halfPriceParsed:ue.halfPrice?parseFloat(ue.halfPrice):null,quarterPriceParsed:ue.quarterPrice?parseFloat(ue.quarterPrice):null})).filter(ue=>ue.name&&!isNaN(ue.fullPriceParsed));if(ne.length===0){alert("No valid rows to add.");return}z(!0);const oe=ne.map(ue=>N4({name:ue.name.trim(),fullPrice:ue.fullPriceParsed,halfPrice:ue.halfPriceParsed,quarterPrice:ue.quarterPriceParsed,ingredients:ue.ingredients?ue.ingredients.trim():"",specialNote:ue.specialNote?ue.specialNote.trim():""}));try{const ue=await Promise.allSettled(oe),we=ue.filter(be=>be.status==="rejected");we.length===0?(alert(`Successfully added ${ue.length} item(s).`),V(),a(!1)):(console.error("Bulk add failures:",we),alert(`${ue.length-we.length} added, ${we.length} failed.`))}catch(ue){console.error("Unexpected bulk add error:",ue),alert("Bulk add failed.")}finally{z(!1)}},ie=ne=>ne.name&&ne.fullPrice&&!isNaN(parseFloat(ne.fullPrice));return y.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[y.jsxs("div",{className:"container mx-auto px-4 lg:px-8 py-8",children:[y.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8",children:[y.jsx("div",{children:l?y.jsxs(y.Fragment,{children:[y.jsxs("h1",{className:"text-2xl font-bold text-blue-700",children:[c.length," of ",t.length," selected"]}),y.jsx("p",{className:"mt-1 text-gray-500",children:"Select items from the list below to delete."})]}):y.jsxs(y.Fragment,{children:[y.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"Menu"}),y.jsx("p",{className:"mt-1 text-gray-500",children:"Manage your restaurant's menu items."})]})}),y.jsx("div",{className:"flex items-center gap-2 mt-4 sm:mt-0",children:l?y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:M,className:"px-4 py-2 text-sm font-semibold text-blue-700 bg-blue-100 rounded-lg hover:bg-blue-200 transition-colors",children:c.length===t.length?"Deselect All":"Select All"}),y.jsx("button",{onClick:()=>E(!0),disabled:c.length===0,className:"px-4 py-2 text-sm font-semibold text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:bg-red-300 disabled:cursor-not-allowed transition-colors",children:"Delete"}),y.jsx("button",{onClick:T,className:"px-4 py-2 text-sm font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]}):y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>s(!0),className:"px-5 py-2.5 text-sm font-semibold text-gray-800 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 transition-colors",children:"Bulk Actions"}),y.jsx("button",{onClick:L,className:"px-5 py-2.5 text-sm font-semibold text-white bg-blue-600 rounded-lg shadow-md hover:bg-blue-700 transition-all",children:"Select Items"})]})})]}),y.jsxs("main",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[!l&&y.jsxs("button",{onClick:()=>r(!0),className:"group border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center h-full min-h-[180px] hover:border-blue-500 hover:bg-blue-50 transition-all duration-200",children:[y.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:y.jsx("span",{className:"text-2xl text-gray-500 group-hover:text-blue-600",children:"+"})}),y.jsx("span",{className:"mt-3 text-gray-600 font-semibold group-hover:text-blue-700",children:"Add New Item"})]}),t.map(ne=>y.jsx(BV,{item:ne,selectionMode:l,isSelected:c.includes(ne.id),onSelect:()=>k(ne.id)},ne.id))]})]}),y.jsxs(Va,{isOpen:x,onClose:()=>E(!1),children:[y.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Confirm Deletion"}),y.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to permanently delete ",c.length," item(s)? This action cannot be undone."]}),y.jsxs("div",{className:"flex justify-end gap-4",children:[y.jsx("button",{onClick:()=>E(!1),className:"px-6 py-2 font-semibold text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"}),y.jsx("button",{onClick:S,disabled:m,className:"px-6 py-2 font-semibold text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:bg-red-400 disabled:cursor-wait transition-colors",children:m?"Deleting...":"Delete"})]})]}),y.jsxs(Va,{isOpen:n,onClose:()=>r(!1),children:[y.jsx("h2",{className:"text-2xl font-bold mb-5 text-gray-900",children:"Add New Menu Item"}),y.jsxs("div",{className:"space-y-4",children:[y.jsx("input",{type:"text",name:"name",value:C.name,onChange:P,placeholder:"Item Name",className:X}),y.jsx("input",{type:"text",name:"fullPrice",value:C.fullPrice,onChange:P,placeholder:"Full Portion Price",className:X}),y.jsx("input",{type:"text",name:"halfPrice",value:C.halfPrice,onChange:P,placeholder:"Half Portion Price",className:X}),y.jsx("input",{type:"text",name:"quarterPrice",value:C.quarterPrice,onChange:P,placeholder:"Quarter Portion Price",className:X}),y.jsx("input",{type:"text",name:"ingredients",value:C.ingredients,onChange:P,placeholder:"Ingredients (comma-separated)",className:X}),y.jsx("textarea",{name:"specialNote",value:C.specialNote,onChange:P,placeholder:"Special Note (optional)",rows:3,className:X})]}),y.jsx("div",{className:"flex justify-end mt-6",children:y.jsx("button",{onClick:j,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"Done"})})]}),y.jsxs(Va,{isOpen:i,onClose:()=>s(!1),children:[y.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Bulk Actions"}),y.jsx("p",{className:"text-gray-600 mb-6",children:"Add multiple new items using a spreadsheet-like interface."}),y.jsxs("div",{className:"space-y-4",children:[y.jsx("button",{onClick:B,className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Add New Items"}),y.jsx("button",{className:"w-full bg-gray-200 text-gray-500 px-6 py-3 rounded-lg transition-colors cursor-not-allowed",disabled:!0,children:"Update Existing Items"})]})]}),y.jsx(Va,{isOpen:o,onClose:()=>a(!1),size:"5xl",children:y.jsxs("div",{className:"flex flex-col h-full",children:[y.jsxs("div",{className:"mb-4",children:[y.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Bulk Add New Items"}),y.jsx("p",{className:"text-gray-600 mt-1",children:"Use arrow keys to navigate. Rows missing a name or valid price for the full portion will be skipped."})]}),y.jsx("div",{className:"flex-grow overflow-hidden rounded-lg border border-gray-200",children:y.jsx("div",{className:"max-h-[55vh] overflow-y-auto",children:y.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[y.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 sticky top-0",children:y.jsxs("tr",{children:[y.jsx("th",{className:"px-4 py-3 w-1/12 text-center",children:"Status"}),y.jsx("th",{className:"px-4 py-3 w-2/12",children:"Item Name*"}),y.jsx("th",{className:"px-4 py-3 w-1/12",children:"Full Portion Price*"}),y.jsx("th",{className:"px-4 py-3 w-1/12",children:"Half Portion Price"}),y.jsx("th",{className:"px-4 py-3 w-1/12",children:"Quarter Portion Price"}),y.jsx("th",{className:"px-4 py-3 w-2/12",children:"Ingredients"}),y.jsx("th",{className:"px-4 py-3 w-2/12",children:"Special Note"}),y.jsx("th",{className:"px-4 py-3 w-1/12 text-center"})]})}),y.jsx("tbody",{children:A.map((ne,oe)=>{const ue=ie(ne),we=ne.fullPrice&&isNaN(parseFloat(ne.fullPrice)),be=!ne.name&&!ne.fullPrice?"empty":ue?"ok":"invalid";return y.jsxs("tr",{className:"group bg-white border-b hover:bg-gray-50",children:[y.jsxs("td",{className:"px-4 py-1 text-center",children:[be==="ok"&&y.jsx("span",{title:"Valid row",className:"inline-block h-2.5 w-2.5 rounded-full bg-green-500"}),be==="invalid"&&y.jsx("span",{title:"Invalid row",className:"inline-block h-2.5 w-2.5 rounded-full bg-red-500"}),be==="empty"&&y.jsx("span",{title:"Empty row",className:"inline-block h-2.5 w-2.5 rounded-full bg-gray-300"})]}),y.jsx("td",{children:y.jsx("input",{ref:se(oe,0),type:"text",placeholder:"e.g., Veg Biryani",value:ne.name,onChange:Se=>ae(oe,"name",Se.target.value),onKeyDown:Se=>$(Se,oe,0),className:"w-full bg-transparent p-2 border-0 focus:outline-none focus:ring-2 focus:ring-blue-300 rounded"})}),y.jsx("td",{children:y.jsx("input",{ref:se(oe,1),type:"text",placeholder:"e.g., 150.00",value:ne.fullPrice,onChange:Se=>ae(oe,"fullPrice",Se.target.value),onKeyDown:Se=>$(Se,oe,1),className:`w-full bg-transparent p-2 border-0 focus:outline-none focus:ring-2 ${we?"ring-red-400":"focus:ring-blue-300"} rounded`})}),y.jsx("td",{children:y.jsx("input",{ref:se(oe,2),type:"text",placeholder:"e.g., 80.00",value:ne.halfPrice,onChange:Se=>ae(oe,"halfPrice",Se.target.value),onKeyDown:Se=>$(Se,oe,2),className:"w-full bg-transparent p-2 border-0 focus:outline-none focus:ring-2 focus:ring-blue-300 rounded"})}),y.jsx("td",{children:y.jsx("input",{ref:se(oe,3),type:"text",placeholder:"e.g., 45.00",value:ne.quarterPrice,onChange:Se=>ae(oe,"quarterPrice",Se.target.value),onKeyDown:Se=>$(Se,oe,3),className:"w-full bg-transparent p-2 border-0 focus:outline-none focus:ring-2 focus:ring-blue-300 rounded"})}),y.jsx("td",{children:y.jsx("input",{ref:se(oe,4),type:"text",placeholder:"e.g., rice, carrot, beans",value:ne.ingredients,onChange:Se=>ae(oe,"ingredients",Se.target.value),onKeyDown:Se=>$(Se,oe,4),className:"w-full bg-transparent p-2 border-0 focus:outline-none focus:ring-2 focus:ring-blue-300 rounded"})}),y.jsx("td",{children:y.jsx("input",{ref:se(oe,5),type:"text",placeholder:"Optional note",value:ne.specialNote,onChange:Se=>ae(oe,"specialNote",Se.target.value),onKeyDown:Se=>$(Se,oe,5),className:"w-full bg-transparent p-2 border-0 focus:outline-none focus:ring-2 focus:ring-blue-300 rounded"})}),y.jsx("td",{className:"px-4 py-1 text-center",children:y.jsx("button",{title:"Delete row",onClick:()=>ve(oe),className:"px-2 py-1 text-gray-400 rounded-full hover:bg-red-100 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity",children:""})})]},oe)})})]})})}),y.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-6",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:fe,className:"bg-green-100 text-green-800 font-semibold px-4 py-2 rounded-lg hover:bg-green-200 transition-colors",children:"+ Add Row"}),y.jsx("button",{onClick:V,className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Clear All"})]}),y.jsx("div",{className:"mt-4 sm:mt-0",children:y.jsx("button",{onClick:Y,disabled:R,className:`px-6 py-2.5 rounded-lg text-white font-semibold transition-colors w-32 ${R?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:R?"Adding...":"Add Items"})})]})]})})]})},zV=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),qV=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3 text-slate-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),$V=()=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-3 text-slate-400 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.657 16.657l-4.243 4.243a2 2 0 01-2.828 0l-4.242-4.242a8 8 0 1111.313 0z"}),y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),Bb=()=>y.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),HV=()=>y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0 M3 21v-2a4 4 0 0 1 4 -4h4c.96 0 1.84 .338 2.53 .901 M16 3.13a4 4 0 0 1 0 7.75 M16 19h6 M19 16v6"})}),Ub={name:"",contact:"",address:""},Pg={name:"",contact:"",address:""},WV=()=>{const[t,e]=G.useState([]),[n,r]=G.useState(!1),[i,s]=G.useState(Ub),[o,a]=G.useState(!1),[l,u]=G.useState([Pg]),[c,d]=G.useState(!1);G.useEffect(()=>{(async()=>{try{const N=await Af();e(N)}catch(N){console.error("Error loading staff:",N)}})()},[]);const m=A=>{const{name:N,value:R}=A.target;s(z=>({...z,[N]:R}))},p=async()=>{if(!i.name.trim()){alert("Staff name is required.");return}d(!0);try{const A=await K9(i);e([...t,A]),s(Ub),r(!1)}catch(A){console.error("Error adding staff:",A),alert("Failed to add staff member.")}finally{d(!1)}},x=(A,N)=>{const{name:R,value:z}=N.target,Q=[...l];Q[A][R]=z,u(Q)},E=()=>{u([...l,{...Pg}])},C=async()=>{const A=l.filter(N=>N.name.trim()!=="");if(A.length===0){alert("Please enter a name for at least one staff member.");return}d(!0);try{await Q9(A);const N=await Af();e(N),u([Pg]),a(!1)}catch(N){console.error("Error adding staff in bulk:",N),alert("Failed to add staff members in bulk.")}finally{d(!1)}},w=(A,N,R)=>{const{key:z,shiftKey:Q}=A,L={ArrowDown:{r:1,c:0},Enter:{r:1,c:0,cond:!Q},ArrowUp:{r:-1,c:0},ArrowRight:{r:0,c:1},Tab:{r:0,c:1,cond:!Q},ArrowLeft:{r:0,c:-1}};let T=null;if(z==="Tab"&&Q?T={r:0,c:-1}:L[z]&&L[z].cond!==!1&&(T=L[z]),!T)return;A.preventDefault();let k=N+T.r,M=R+T.c;if(M>2&&(M=0,k++),M<0&&(M=2,k--),(z==="ArrowDown"||z==="Enter"&&!Q)&&N===l.length-1){E(),setTimeout(()=>{var P;(P=document.querySelector(`[data-row='${k}'][data-col='${R}']`))==null||P.focus()},0);return}const S=document.querySelector(`[data-row='${k}'][data-col='${M}']`);S&&(S.focus(),S.select())};return y.jsx("div",{className:"bg-slate-50 min-h-full p-4 sm:p-6 lg:p-8",children:y.jsxs("div",{className:"container mx-auto",children:[y.jsxs("div",{className:"mb-8",children:[y.jsx("h1",{className:"text-4xl font-bold text-slate-800",children:"Staff Management"}),y.jsx("p",{className:"text-slate-500 mt-1",children:"Add, view, and manage your team members."})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[y.jsxs("button",{onClick:()=>r(!0),className:"group bg-white border-2 border-dashed border-slate-300 rounded-xl flex flex-col items-center justify-center min-h-[16rem] text-center p-6 hover:border-indigo-500 hover:text-indigo-600 transition-all duration-300",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-slate-400 group-hover:text-indigo-500 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),y.jsx("span",{className:"font-semibold mt-2",children:"Add New Staff"})]}),t.map(A=>y.jsxs("div",{className:"bg-white rounded-xl shadow-md min-h-[16rem] p-6 flex flex-col justify-between transition-all duration-300 hover:shadow-xl hover:-translate-y-1",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-full bg-slate-100 flex items-center justify-center",children:y.jsx(zV,{})}),y.jsx("div",{className:"ml-4",children:y.jsx("h3",{className:"text-xl font-bold text-slate-800 break-words",children:A.name})})]}),y.jsxs("div",{className:"space-y-3 text-sm text-slate-600 mt-4",children:[A.contact&&y.jsxs("p",{className:"flex items-center break-all",children:[y.jsx(qV,{}),A.contact]}),A.address&&y.jsxs("p",{className:"flex items-start break-all",children:[y.jsx($V,{}),A.address]})]})]},A.id))]}),y.jsxs(Va,{isOpen:n,onClose:()=>!c&&r(!1),children:[y.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-slate-200",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Add New Staff"}),y.jsx("button",{onClick:()=>r(!1),className:"text-slate-400 hover:text-slate-600 disabled:opacity-50",disabled:c,children:""})]}),y.jsxs("div",{className:"mt-6 space-y-4",children:[y.jsx("input",{type:"text",name:"name",value:i.name,onChange:m,placeholder:"Enter staff name *",className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:bg-slate-100",disabled:c}),y.jsx("input",{type:"text",name:"contact",value:i.contact,onChange:m,placeholder:"Contact Details (e.g., phone)",className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:bg-slate-100",disabled:c}),y.jsx("input",{type:"text",name:"address",value:i.address,onChange:m,placeholder:"Address",className:"w-full p-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:bg-slate-100",disabled:c})]}),y.jsxs("div",{className:"flex justify-end mt-6 space-x-4",children:[y.jsx("button",{onClick:()=>r(!1),className:"px-4 py-2 rounded-lg text-slate-600 bg-slate-100 hover:bg-slate-200 transition-colors disabled:opacity-50",disabled:c,children:"Cancel"}),y.jsx("button",{onClick:p,className:"bg-indigo-600 text-white font-semibold px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors shadow-sm flex items-center disabled:bg-indigo-400",disabled:c,children:c?y.jsxs(y.Fragment,{children:[y.jsx(Bb,{})," Saving..."]}):"Save Staff"})]})]}),y.jsxs(Va,{isOpen:o,onClose:()=>!c&&a(!1),size:"xl",children:[y.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-slate-200",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Bulk Add Staff"}),y.jsx("button",{onClick:()=>a(!1),className:"text-slate-400 hover:text-slate-600 disabled:opacity-50",disabled:c,children:""})]}),y.jsx("p",{className:"text-sm text-slate-500 my-4",children:"Use Arrow Keys, Tab, or Enter to navigate. A new row is added automatically."}),y.jsx("div",{className:"w-full max-h-[60vh] overflow-auto border border-slate-200 rounded-lg",children:y.jsxs("table",{className:"w-full text-sm",children:[y.jsx("thead",{className:"sticky top-0 bg-slate-100 z-10",children:y.jsxs("tr",{children:[y.jsx("th",{className:"p-3 font-semibold text-left text-slate-600",children:"Name *"}),y.jsx("th",{className:"p-3 font-semibold text-left text-slate-600",children:"Contact Details"}),y.jsx("th",{className:"p-3 font-semibold text-left text-slate-600",children:"Address"})]})}),y.jsx("tbody",{children:l.map((A,N)=>y.jsxs("tr",{className:"even:bg-slate-50",children:[y.jsx("td",{children:y.jsx("input",{type:"text",name:"name",value:A.name,onChange:R=>x(N,R),onKeyDown:R=>w(R,N,0),"data-row":N,"data-col":0,placeholder:`Staff ${N+1}`,className:"w-full p-3 bg-transparent focus:outline-none focus:bg-white focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-100",disabled:c})}),y.jsx("td",{children:y.jsx("input",{type:"text",name:"contact",value:A.contact,onChange:R=>x(N,R),onKeyDown:R=>w(R,N,1),"data-row":N,"data-col":1,placeholder:"Contact",className:"w-full p-3 bg-transparent focus:outline-none focus:bg-white focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-100",disabled:c})}),y.jsx("td",{children:y.jsx("input",{type:"text",name:"address",value:A.address,onChange:R=>x(N,R),onKeyDown:R=>w(R,N,2),"data-row":N,"data-col":2,placeholder:"Address",className:"w-full p-3 bg-transparent focus:outline-none focus:bg-white focus:ring-1 focus:ring-indigo-500 disabled:bg-slate-100",disabled:c})})]},N))})]})}),y.jsxs("div",{className:"flex justify-between items-center mt-6",children:[y.jsx("button",{onClick:E,className:"text-indigo-600 font-semibold hover:text-indigo-800 transition-colors disabled:opacity-50",disabled:c,children:"+ Add Row"}),y.jsxs("div",{className:"flex space-x-4",children:[y.jsx("button",{onClick:()=>a(!1),className:"px-6 py-2 rounded-lg text-slate-600 bg-slate-100 hover:bg-slate-200 transition-colors disabled:opacity-50",disabled:c,children:"Cancel"}),y.jsx("button",{onClick:C,className:"bg-indigo-600 text-white font-semibold px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors shadow-sm flex items-center disabled:bg-indigo-400",disabled:c,children:c?y.jsxs(y.Fragment,{children:[y.jsx(Bb,{})," Saving..."]}):"Save All"})]})]})]}),y.jsx("button",{onClick:()=>a(!0),className:"fixed bottom-8 right-8 bg-indigo-600 text-white p-4 rounded-full shadow-lg hover:bg-indigo-700 transition-transform transform hover:scale-110",children:y.jsx(HV,{})})]})})},GV=()=>y.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),Qd=()=>y.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[y.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),y.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),zb=()=>y.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),KV=()=>y.jsx("svg",{className:"w-5 h-5 mr-1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:y.jsx("path",{d:"M15.362 5.214A8.252 8.252 0 0012 3a8.25 8.25 0 00-3.362 2.214c-1.121 2.3-.11 4.701 2.362 7.048-2.472 2.347-3.483 4.749-2.362 7.048A8.252 8.252 0 0012 21a8.25 8.25 0 003.362-2.214c1.121-2.3.11-4.701-2.362-7.048 2.472-2.347 3.483-4.749 2.362-7.048z"})}),QV=({onComplete:t,holdTime:e=2e3,children:n})=>{const[r,i]=G.useState(0),s=G.useRef(null),o=G.useRef(null),a=()=>{o.current=Date.now();const c=()=>{const d=Date.now()-o.current,m=Math.min(d/e*100,100);i(m),m<100?s.current=requestAnimationFrame(c):(t(),setTimeout(()=>i(0),500))};s.current=requestAnimationFrame(c)},l=()=>{s.current&&cancelAnimationFrame(s.current),i(0)},u={background:`linear-gradient(to right, #b91c1c ${r}%, #ef4444 ${r}%)`,transition:"background 0.1s linear"};return y.jsx("button",{onMouseDown:a,onMouseUp:l,onMouseLeave:l,onTouchStart:a,onTouchEnd:l,className:"bg-red-600 text-white font-bold py-2 px-4 rounded shadow-md select-none focus:outline-none",style:u,children:n})},YV=()=>{const[t,e]=G.useState([]),[n,r]=G.useState([]),[i,s]=G.useState([]),[o,a]=G.useState([]),[l,u]=G.useState({currencySymbol:""}),[c,d]=G.useState(null),[m,p]=G.useState(!1),[x,E]=G.useState(!1),[C,w]=G.useState(null),A=G.useCallback(async()=>{if(!(!m||x)){E(!0);try{await Z9(),d({type:"success",message:"All orders have been cleared successfully."})}catch(M){console.error("Failed to clear orders:",M),d({type:"error",message:"An error occurred while clearing orders."})}finally{E(!1),p(!1)}}},[m,x]),N=async(M,S)=>{if(!C){w(M);try{await J9(M,S)}catch(P){console.error(`Failed to update order ${M} to ${S}:`,P),d({type:"error",message:"Failed to update order status."})}finally{w(null)}}};G.useEffect(()=>{if(c){const M=setTimeout(()=>d(null),5e3);return()=>clearTimeout(M)}},[c]),G.useEffect(()=>{(async()=>{try{const[P,j,B,X]=await Promise.all([bA(),zv(),Af(),dl()]);r(P||[]),s(j||[]),a(B||[]),X&&u(X)}catch(P){console.error("Error fetching static data:",P),d({type:"error",message:"Could not load initial app data."})}})();const S=AA(P=>{const B=P.filter(X=>X.status!=="Served").map(X=>({...X,createdAt:new Date(X.createdAt),status:X.status||"Pending"})).sort((X,se)=>new Date(X.createdAt)-new Date(se.createdAt));e(B)},P=>{console.error("Realtime orders error:",P),d({type:"error",message:"Error connecting to real-time orders."})});return()=>S()},[]);const R=M=>{var S;return((S=n.find(P=>(P.id??P._id)===M))==null?void 0:S.name)||"Unknown"},z=M=>{var S;return((S=i.find(P=>(P.id??P._id)===M))==null?void 0:S.name)||"Unknown"},Q=M=>{var S;return((S=o.find(P=>(P.id??P._id)===M))==null?void 0:S.name)||"N/A"},L=M=>{switch(M){case"Preparing":return{borderColor:"border-yellow-400",badgeBg:"bg-yellow-100",badgeText:"text-yellow-800"};case"Ready":return{borderColor:"border-green-400",badgeBg:"bg-green-100",badgeText:"text-green-800"};case"Pending":default:return{borderColor:"border-blue-400",badgeBg:"bg-blue-100",badgeText:"text-blue-800"}}},T=()=>{if(!c)return null;const M=c.type==="error";return y.jsxs("div",{className:`fixed top-5 right-5 flex items-center p-4 mb-4 text-sm rounded-lg shadow-lg z-50 ${M?"text-red-800 bg-red-50":"text-green-800 bg-green-50"}`,role:"alert",children:[y.jsx(GV,{}),y.jsx("span",{className:"sr-only",children:M?"Error":"Success"}),y.jsx("div",{className:"ml-3 font-medium",children:c.message})]})},k=()=>m?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:y.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl",children:[y.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Action"}),y.jsx("p",{className:"mb-6",children:"Are you sure you want to clear all orders? This action cannot be undone."}),y.jsxs("div",{className:"flex justify-end gap-4",children:[y.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),y.jsxs("button",{onClick:A,disabled:x,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-red-400 flex items-center",children:[x&&y.jsx(Qd,{}),x?"Clearing...":"Clear All"]})]})]})}):null;return y.jsxs(y.Fragment,{children:[y.jsx(k,{}),y.jsxs("div",{className:"container mx-auto py-6 px-4",children:[y.jsx(T,{}),y.jsxs("div",{className:"flex justify-between items-center mb-6",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Kitchen Orders"}),t.length>0&&y.jsxs("div",{className:"text-right",children:[y.jsx(QV,{onComplete:()=>p(!0),children:"Press & Hold to Clear Orders"}),y.jsxs("div",{className:"flex items-center justify-end mt-2 text-red-600",children:[y.jsx("div",{className:"w-4 h-4 mr-1",children:y.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.636-1.21 2.273-1.21 2.91 0l5.396 10.297c.63 1.202-.288 2.653-1.64 2.653H4.5c-1.352 0-2.27-1.451-1.64-2.653l5.396-10.297zM9 8a1 1 0 011 1v3a1 1 0 11-2 0V9a1 1 0 011-1zm1 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),y.jsx("p",{className:"text-xs font-semibold",children:"Warning: This will permanently delete all active orders."})]})]})]}),t.length===0?y.jsx("p",{className:"text-gray-600 text-center text-lg mt-8",children:"No active orders."}):y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(M=>{const S=L(M.status),P=C===M.id;return y.jsxs("div",{className:`bg-white p-4 rounded-lg shadow-md border-l-4 ${S.borderColor} flex flex-col`,children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 pb-2 border-b",children:[y.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Table: ",R(M.tableId)]}),y.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${S.badgeBg} ${S.badgeText}`,children:M.status})]}),y.jsx("ul",{className:"text-gray-700 mb-3 space-y-1 flex-grow",children:M.items.map((j,B)=>y.jsxs("li",{className:"flex justify-between items-start",children:[y.jsxs("span",{className:"flex-1 pr-2",children:[z(j.itemId),j.portion&&y.jsxs("span",{className:"text-sm text-gray-500 capitalize ml-1",children:["(",j.portion,")"]})]}),y.jsxs("span",{className:"font-semibold",children:["x ",j.quantity]})]},B))}),y.jsxs("div",{className:"mt-auto pt-2 border-t",children:[y.jsxs("p",{className:"text-gray-800 font-semibold",children:["Total: ",l.currencySymbol,M.total.toFixed(2)]}),M.staffId&&y.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Staff: ",Q(M.staffId)]}),y.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[M.status==="Pending"&&y.jsxs("button",{onClick:()=>N(M.id,"Preparing"),disabled:P,className:"w-full flex justify-center items-center px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 disabled:bg-yellow-300 font-semibold",children:[P?y.jsx(Qd,{}):y.jsx(KV,{}),P?"Starting...":"Start Cooking"]}),M.status==="Preparing"&&y.jsxs("button",{onClick:()=>N(M.id,"Ready"),disabled:P,className:"w-full flex justify-center items-center px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:bg-green-300 font-semibold",children:[P?y.jsx(Qd,{}):y.jsx(zb,{}),P?"Finishing...":"Mark as Ready"]}),M.status==="Ready"&&y.jsxs("button",{onClick:()=>N(M.id,"Served"),disabled:P,className:"w-full flex justify-center items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:bg-gray-400 font-semibold",children:[P?y.jsx(Qd,{}):y.jsx(zb,{}),P?"Serving...":"Mark as Served"]})]})]})]},M.id)})})]})]})};var XV=Object.defineProperty,Am=Object.getOwnPropertySymbols,nN=Object.prototype.hasOwnProperty,rN=Object.prototype.propertyIsEnumerable,qb=(t,e,n)=>e in t?XV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U2=(t,e)=>{for(var n in e||(e={}))nN.call(e,n)&&qb(t,n,e[n]);if(Am)for(var n of Am(e))rN.call(e,n)&&qb(t,n,e[n]);return t},z2=(t,e)=>{var n={};for(var r in t)nN.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Am)for(var r of Am(t))e.indexOf(r)<0&&rN.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var au;(t=>{const e=class jt{constructor(l,u,c,d){if(this.version=l,this.errorCorrectionLevel=u,this.modules=[],this.isFunction=[],l<jt.MIN_VERSION||l>jt.MAX_VERSION)throw new RangeError("Version value out of range");if(d<-1||d>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let m=[];for(let x=0;x<this.size;x++)m.push(!1);for(let x=0;x<this.size;x++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const p=this.addEccAndInterleave(c);if(this.drawCodewords(p),d==-1){let x=1e9;for(let E=0;E<8;E++){this.applyMask(E),this.drawFormatBits(E);const C=this.getPenaltyScore();C<x&&(d=E,x=C),this.applyMask(E)}}i(0<=d&&d<=7),this.mask=d,this.applyMask(d),this.drawFormatBits(d),this.isFunction=[]}static encodeText(l,u){const c=t.QrSegment.makeSegments(l);return jt.encodeSegments(c,u)}static encodeBinary(l,u){const c=t.QrSegment.makeBytes(l);return jt.encodeSegments([c],u)}static encodeSegments(l,u,c=1,d=40,m=-1,p=!0){if(!(jt.MIN_VERSION<=c&&c<=d&&d<=jt.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let x,E;for(x=c;;x++){const N=jt.getNumDataCodewords(x,u)*8,R=o.getTotalBits(l,x);if(R<=N){E=R;break}if(x>=d)throw new RangeError("Data too long")}for(const N of[jt.Ecc.MEDIUM,jt.Ecc.QUARTILE,jt.Ecc.HIGH])p&&E<=jt.getNumDataCodewords(x,N)*8&&(u=N);let C=[];for(const N of l){n(N.mode.modeBits,4,C),n(N.numChars,N.mode.numCharCountBits(x),C);for(const R of N.getData())C.push(R)}i(C.length==E);const w=jt.getNumDataCodewords(x,u)*8;i(C.length<=w),n(0,Math.min(4,w-C.length),C),n(0,(8-C.length%8)%8,C),i(C.length%8==0);for(let N=236;C.length<w;N^=253)n(N,8,C);let A=[];for(;A.length*8<C.length;)A.push(0);return C.forEach((N,R)=>A[R>>>3]|=N<<7-(R&7)),new jt(x,u,A,m)}getModule(l,u){return 0<=l&&l<this.size&&0<=u&&u<this.size&&this.modules[u][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let c=0;c<this.size;c++)this.setFunctionModule(6,c,c%2==0),this.setFunctionModule(c,6,c%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),u=l.length;for(let c=0;c<u;c++)for(let d=0;d<u;d++)c==0&&d==0||c==0&&d==u-1||c==u-1&&d==0||this.drawAlignmentPattern(l[c],l[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const u=this.errorCorrectionLevel.formatBits<<3|l;let c=u;for(let m=0;m<10;m++)c=c<<1^(c>>>9)*1335;const d=(u<<10|c)^21522;i(d>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,r(d,m));this.setFunctionModule(8,7,r(d,6)),this.setFunctionModule(8,8,r(d,7)),this.setFunctionModule(7,8,r(d,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,r(d,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,r(d,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,r(d,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let c=0;c<12;c++)l=l<<1^(l>>>11)*7973;const u=this.version<<12|l;i(u>>>18==0);for(let c=0;c<18;c++){const d=r(u,c),m=this.size-11+c%3,p=Math.floor(c/3);this.setFunctionModule(m,p,d),this.setFunctionModule(p,m,d)}}drawFinderPattern(l,u){for(let c=-4;c<=4;c++)for(let d=-4;d<=4;d++){const m=Math.max(Math.abs(d),Math.abs(c)),p=l+d,x=u+c;0<=p&&p<this.size&&0<=x&&x<this.size&&this.setFunctionModule(p,x,m!=2&&m!=4)}}drawAlignmentPattern(l,u){for(let c=-2;c<=2;c++)for(let d=-2;d<=2;d++)this.setFunctionModule(l+d,u+c,Math.max(Math.abs(d),Math.abs(c))!=1)}setFunctionModule(l,u,c){this.modules[u][l]=c,this.isFunction[u][l]=!0}addEccAndInterleave(l){const u=this.version,c=this.errorCorrectionLevel;if(l.length!=jt.getNumDataCodewords(u,c))throw new RangeError("Invalid argument");const d=jt.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][u],m=jt.ECC_CODEWORDS_PER_BLOCK[c.ordinal][u],p=Math.floor(jt.getNumRawDataModules(u)/8),x=d-p%d,E=Math.floor(p/d);let C=[];const w=jt.reedSolomonComputeDivisor(m);for(let N=0,R=0;N<d;N++){let z=l.slice(R,R+E-m+(N<x?0:1));R+=z.length;const Q=jt.reedSolomonComputeRemainder(z,w);N<x&&z.push(0),C.push(z.concat(Q))}let A=[];for(let N=0;N<C[0].length;N++)C.forEach((R,z)=>{(N!=E-m||z>=x)&&A.push(R[N])});return i(A.length==p),A}drawCodewords(l){if(l.length!=Math.floor(jt.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let u=0;for(let c=this.size-1;c>=1;c-=2){c==6&&(c=5);for(let d=0;d<this.size;d++)for(let m=0;m<2;m++){const p=c-m,E=(c+1&2)==0?this.size-1-d:d;!this.isFunction[E][p]&&u<l.length*8&&(this.modules[E][p]=r(l[u>>>3],7-(u&7)),u++)}}i(u==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let u=0;u<this.size;u++)for(let c=0;c<this.size;c++){let d;switch(l){case 0:d=(c+u)%2==0;break;case 1:d=u%2==0;break;case 2:d=c%3==0;break;case 3:d=(c+u)%3==0;break;case 4:d=(Math.floor(c/3)+Math.floor(u/2))%2==0;break;case 5:d=c*u%2+c*u%3==0;break;case 6:d=(c*u%2+c*u%3)%2==0;break;case 7:d=((c+u)%2+c*u%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[u][c]&&d&&(this.modules[u][c]=!this.modules[u][c])}}getPenaltyScore(){let l=0;for(let m=0;m<this.size;m++){let p=!1,x=0,E=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[m][C]==p?(x++,x==5?l+=jt.PENALTY_N1:x>5&&l++):(this.finderPenaltyAddHistory(x,E),p||(l+=this.finderPenaltyCountPatterns(E)*jt.PENALTY_N3),p=this.modules[m][C],x=1);l+=this.finderPenaltyTerminateAndCount(p,x,E)*jt.PENALTY_N3}for(let m=0;m<this.size;m++){let p=!1,x=0,E=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[C][m]==p?(x++,x==5?l+=jt.PENALTY_N1:x>5&&l++):(this.finderPenaltyAddHistory(x,E),p||(l+=this.finderPenaltyCountPatterns(E)*jt.PENALTY_N3),p=this.modules[C][m],x=1);l+=this.finderPenaltyTerminateAndCount(p,x,E)*jt.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let p=0;p<this.size-1;p++){const x=this.modules[m][p];x==this.modules[m][p+1]&&x==this.modules[m+1][p]&&x==this.modules[m+1][p+1]&&(l+=jt.PENALTY_N2)}let u=0;for(const m of this.modules)u=m.reduce((p,x)=>p+(x?1:0),u);const c=this.size*this.size,d=Math.ceil(Math.abs(u*20-c*10)/c)-1;return i(0<=d&&d<=9),l+=d*jt.PENALTY_N4,i(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,u=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let c=[6];for(let d=this.size-7;c.length<l;d-=u)c.splice(1,0,d);return c}}static getNumRawDataModules(l){if(l<jt.MIN_VERSION||l>jt.MAX_VERSION)throw new RangeError("Version number out of range");let u=(16*l+128)*l+64;if(l>=2){const c=Math.floor(l/7)+2;u-=(25*c-10)*c-55,l>=7&&(u-=36)}return i(208<=u&&u<=29648),u}static getNumDataCodewords(l,u){return Math.floor(jt.getNumRawDataModules(l)/8)-jt.ECC_CODEWORDS_PER_BLOCK[u.ordinal][l]*jt.NUM_ERROR_CORRECTION_BLOCKS[u.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let u=[];for(let d=0;d<l-1;d++)u.push(0);u.push(1);let c=1;for(let d=0;d<l;d++){for(let m=0;m<u.length;m++)u[m]=jt.reedSolomonMultiply(u[m],c),m+1<u.length&&(u[m]^=u[m+1]);c=jt.reedSolomonMultiply(c,2)}return u}static reedSolomonComputeRemainder(l,u){let c=u.map(d=>0);for(const d of l){const m=d^c.shift();c.push(0),u.forEach((p,x)=>c[x]^=jt.reedSolomonMultiply(p,m))}return c}static reedSolomonMultiply(l,u){if(l>>>8||u>>>8)throw new RangeError("Byte out of range");let c=0;for(let d=7;d>=0;d--)c=c<<1^(c>>>7)*285,c^=(u>>>d&1)*l;return i(c>>>8==0),c}finderPenaltyCountPatterns(l){const u=l[1];i(u<=this.size*3);const c=u>0&&l[2]==u&&l[3]==u*3&&l[4]==u&&l[5]==u;return(c&&l[0]>=u*4&&l[6]>=u?1:0)+(c&&l[6]>=u*4&&l[0]>=u?1:0)}finderPenaltyTerminateAndCount(l,u,c){return l&&(this.finderPenaltyAddHistory(u,c),u=0),u+=this.size,this.finderPenaltyAddHistory(u,c),this.finderPenaltyCountPatterns(c)}finderPenaltyAddHistory(l,u){u[0]==0&&(l+=this.size),u.pop(),u.unshift(l)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(a,l,u){if(l<0||l>31||a>>>l)throw new RangeError("Value out of range");for(let c=l-1;c>=0;c--)u.push(a>>>c&1)}function r(a,l){return(a>>>l&1)!=0}function i(a){if(!a)throw new Error("Assertion error")}const s=class $n{constructor(l,u,c){if(this.mode=l,this.numChars=u,this.bitData=c,u<0)throw new RangeError("Invalid argument");this.bitData=c.slice()}static makeBytes(l){let u=[];for(const c of l)n(c,8,u);return new $n($n.Mode.BYTE,l.length,u)}static makeNumeric(l){if(!$n.isNumeric(l))throw new RangeError("String contains non-numeric characters");let u=[];for(let c=0;c<l.length;){const d=Math.min(l.length-c,3);n(parseInt(l.substring(c,c+d),10),d*3+1,u),c+=d}return new $n($n.Mode.NUMERIC,l.length,u)}static makeAlphanumeric(l){if(!$n.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let u=[],c;for(c=0;c+2<=l.length;c+=2){let d=$n.ALPHANUMERIC_CHARSET.indexOf(l.charAt(c))*45;d+=$n.ALPHANUMERIC_CHARSET.indexOf(l.charAt(c+1)),n(d,11,u)}return c<l.length&&n($n.ALPHANUMERIC_CHARSET.indexOf(l.charAt(c)),6,u),new $n($n.Mode.ALPHANUMERIC,l.length,u)}static makeSegments(l){return l==""?[]:$n.isNumeric(l)?[$n.makeNumeric(l)]:$n.isAlphanumeric(l)?[$n.makeAlphanumeric(l)]:[$n.makeBytes($n.toUtf8ByteArray(l))]}static makeEci(l){let u=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)n(l,8,u);else if(l<16384)n(2,2,u),n(l,14,u);else if(l<1e6)n(6,3,u),n(l,21,u);else throw new RangeError("ECI assignment value out of range");return new $n($n.Mode.ECI,0,u)}static isNumeric(l){return $n.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return $n.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,u){let c=0;for(const d of l){const m=d.mode.numCharCountBits(u);if(d.numChars>=1<<m)return 1/0;c+=4+m+d.bitData.length}return c}static toUtf8ByteArray(l){l=encodeURI(l);let u=[];for(let c=0;c<l.length;c++)l.charAt(c)!="%"?u.push(l.charCodeAt(c)):(u.push(parseInt(l.substring(c+1,c+3),16)),c+=2);return u}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;t.QrSegment=s})(au||(au={}));(t=>{(e=>{const n=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(au||(au={}));(t=>{(e=>{const n=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(au||(au={}));var Yu=au;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var JV={L:Yu.QrCode.Ecc.LOW,M:Yu.QrCode.Ecc.MEDIUM,Q:Yu.QrCode.Ecc.QUARTILE,H:Yu.QrCode.Ecc.HIGH},iN=128,sN="L",oN="#FFFFFF",aN="#000000",lN=!1,uN=1,ZV=4,eB=0,tB=.1;function cN(t,e=0){const n=[];return t.forEach(function(r,i){let s=null;r.forEach(function(o,a){if(!o&&s!==null){n.push(`M${s+e} ${i+e}h${a-s}v1H${s+e}z`),s=null;return}if(a===r.length-1){if(!o)return;s===null?n.push(`M${a+e},${i+e} h1v1H${a+e}z`):n.push(`M${s+e},${i+e} h${a+1-s}v1H${s+e}z`);return}o&&s===null&&(s=a)})}),n.join("")}function hN(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((i,s)=>s<e.x||s>=e.x+e.w?i:!1))}function nB(t,e,n,r){if(r==null)return null;const i=t.length+n*2,s=Math.floor(e*tB),o=i/e,a=(r.width||s)*o,l=(r.height||s)*o,u=r.x==null?t.length/2-a/2:r.x*o,c=r.y==null?t.length/2-l/2:r.y*o,d=r.opacity==null?1:r.opacity;let m=null;if(r.excavate){let x=Math.floor(u),E=Math.floor(c),C=Math.ceil(a+u-x),w=Math.ceil(l+c-E);m={x,y:E,w:C,h:w}}const p=r.crossOrigin;return{x:u,y:c,h:l,w:a,excavation:m,opacity:d,crossOrigin:p}}function rB(t,e){return e!=null?Math.max(Math.floor(e),0):t?ZV:eB}function fN({value:t,level:e,minVersion:n,includeMargin:r,marginSize:i,imageSettings:s,size:o,boostLevel:a}){let l=on.useMemo(()=>{const x=(Array.isArray(t)?t:[t]).reduce((E,C)=>(E.push(...Yu.QrSegment.makeSegments(C)),E),[]);return Yu.QrCode.encodeSegments(x,JV[e],n,void 0,void 0,a)},[t,e,n,a]);const{cells:u,margin:c,numCells:d,calculatedImageSettings:m}=on.useMemo(()=>{let p=l.getModules();const x=rB(r,i),E=p.length+x*2,C=nB(p,o,x,s);return{cells:p,margin:x,numCells:E,calculatedImageSettings:C}},[l,o,s,r,i]);return{qrcode:l,margin:c,cells:u,numCells:d,calculatedImageSettings:m}}var iB=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),sB=on.forwardRef(function(e,n){const r=e,{value:i,size:s=iN,level:o=sN,bgColor:a=oN,fgColor:l=aN,includeMargin:u=lN,minVersion:c=uN,boostLevel:d,marginSize:m,imageSettings:p}=r,E=z2(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:C}=E,w=z2(E,["style"]),A=p==null?void 0:p.src,N=on.useRef(null),R=on.useRef(null),z=on.useCallback(B=>{N.current=B,typeof n=="function"?n(B):n&&(n.current=B)},[n]),[Q,L]=on.useState(!1),{margin:T,cells:k,numCells:M,calculatedImageSettings:S}=fN({value:i,level:o,minVersion:c,boostLevel:d,includeMargin:u,marginSize:m,imageSettings:p,size:s});on.useEffect(()=>{if(N.current!=null){const B=N.current,X=B.getContext("2d");if(!X)return;let se=k;const re=R.current,$=S!=null&&re!==null&&re.complete&&re.naturalHeight!==0&&re.naturalWidth!==0;$&&S.excavation!=null&&(se=hN(k,S.excavation));const ae=window.devicePixelRatio||1;B.height=B.width=s*ae;const fe=s/M*ae;X.scale(fe,fe),X.fillStyle=a,X.fillRect(0,0,M,M),X.fillStyle=l,iB?X.fill(new Path2D(cN(se,T))):k.forEach(function(ve,V){ve.forEach(function(Y,ie){Y&&X.fillRect(ie+T,V+T,1,1)})}),S&&(X.globalAlpha=S.opacity),$&&X.drawImage(re,S.x+T,S.y+T,S.w,S.h)}}),on.useEffect(()=>{L(!1)},[A]);const P=U2({height:s,width:s},C);let j=null;return A!=null&&(j=on.createElement("img",{src:A,key:A,style:{display:"none"},onLoad:()=>{L(!0)},ref:R,crossOrigin:S==null?void 0:S.crossOrigin})),on.createElement(on.Fragment,null,on.createElement("canvas",U2({style:P,height:s,width:s,ref:z,role:"img"},w)),j)});sB.displayName="QRCodeCanvas";var dN=on.forwardRef(function(e,n){const r=e,{value:i,size:s=iN,level:o=sN,bgColor:a=oN,fgColor:l=aN,includeMargin:u=lN,minVersion:c=uN,boostLevel:d,title:m,marginSize:p,imageSettings:x}=r,E=z2(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:C,cells:w,numCells:A,calculatedImageSettings:N}=fN({value:i,level:o,minVersion:c,boostLevel:d,includeMargin:u,marginSize:p,imageSettings:x,size:s});let R=w,z=null;x!=null&&N!=null&&(N.excavation!=null&&(R=hN(w,N.excavation)),z=on.createElement("image",{href:x.src,height:N.h,width:N.w,x:N.x+C,y:N.y+C,preserveAspectRatio:"none",opacity:N.opacity,crossOrigin:N.crossOrigin}));const Q=cN(R,C);return on.createElement("svg",U2({height:s,width:s,viewBox:`0 0 ${A} ${A}`,ref:n,role:"img"},E),!!m&&on.createElement("title",null,m),on.createElement("path",{fill:a,d:`M0,0 h${A}v${A}H0z`,shapeRendering:"crispEdges"}),on.createElement("path",{fill:l,d:Q,shapeRendering:"crispEdges"}),z)});dN.displayName="QRCodeSVG";const oB=G.forwardRef(({details:t,settings:e,discount:n=0,onDiscountChange:r,onPrint:i},s)=>{if(!t)return null;const{order:o={},items:a=[],tableName:l="N/A",staffName:u="N/A"}=t,c=(e==null?void 0:e.restaurantName)||"SyncServe Restaurant",d=(e==null?void 0:e.address)||"123 Culinary Lane, Edakkara, Kerala",m=(e==null?void 0:e.upiId)||"your-upi@id",p=(e==null?void 0:e.currencySymbol)||"",x=(e==null?void 0:e.currencyCode)||"INR",E=G.useMemo(()=>(Array.isArray(a)?a:[]).map(Q=>{const L=Number(Q.quantity??Q.qty??1),T=Number(Q.price??Q.rate??0);return{itemId:Q.itemId??Math.random(),name:String(Q.name??Q.itemName??"Item"),notes:String(Q.notes??Q.modifiers??Q.description??""),quantity:Number.isFinite(L)?L:1,price:Number.isFinite(T)?T:0,amount:Number.isFinite(L)&&Number.isFinite(T)?L*T:0}}),[a]),{subTotal:C,grandTotal:w}=G.useMemo(()=>{const z=E.reduce((k,M)=>k+M.amount,0),Q=Number(o.total??z),L=Number(n||0),T=Math.max(0,Q-L);return{subTotal:Q,grandTotal:T}},[E,o.total,n]),{dateStr:A,timeStr:N}=G.useMemo(()=>{const z=new Date;try{const Q=new Date(o.createdAt??o.date);return isNaN(Q.getTime())?{dateStr:z.toLocaleDateString("en-IN"),timeStr:z.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}:{dateStr:Q.toLocaleDateString("en-IN"),timeStr:Q.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}}catch{return{dateStr:z.toLocaleDateString("en-IN"),timeStr:z.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}}},[o.createdAt,o.date]),R=G.useMemo(()=>{const z=c.replace(/\s/g,"%20"),Q=`Bill%20for%20${l}`.replace(/\s/g,"%20");return`upi://pay?pa=${m}&pn=${z}&am=${w.toFixed(2)}&cu=${x}&tn=${Q}`},[w,l,c,m,x]);return y.jsxs("div",{ref:s,className:"thermal-print","aria-label":`Bill for ${l}`,children:[y.jsxs("header",{className:"header",children:[y.jsx("div",{className:"logo-placeholder",children:"[Your Logo Here]"}),y.jsx("h1",{className:"business-name",children:c}),y.jsx("p",{className:"business-details",children:d}),y.jsx("p",{className:"invoice-title",children:"--- INVOICE ---"})]}),y.jsxs("section",{className:"meta-info",children:[y.jsxs("div",{className:"meta-row",children:[y.jsxs("span",{children:["Table: ",y.jsx("strong",{children:l})]}),y.jsxs("span",{children:["Date: ",A]})]}),y.jsxs("div",{className:"meta-row",children:[y.jsxs("span",{children:["Staff: ",y.jsx("strong",{children:u})]}),y.jsxs("span",{children:["Time: ",N]})]})]}),y.jsxs("table",{className:"items-table",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{className:"col-sno",children:"#"}),y.jsx("th",{className:"col-item",children:"ITEM"}),y.jsx("th",{className:"col-qty",children:"QTY"}),y.jsx("th",{className:"col-price",children:"RATE"}),y.jsx("th",{className:"col-total",children:"TOTAL"})]})}),y.jsx("tbody",{children:E.length===0?y.jsx("tr",{children:y.jsx("td",{colSpan:"5",className:"no-items",children:"No items in this order."})}):E.map((z,Q)=>y.jsxs("tr",{children:[y.jsx("td",{className:"col-sno",children:Q+1}),y.jsxs("td",{className:"col-item",children:[y.jsx("span",{className:"item-name",children:z.name}),z.notes&&y.jsx("span",{className:"item-notes",children:z.notes})]}),y.jsx("td",{className:"col-qty",children:z.quantity}),y.jsx("td",{className:"col-price",children:z.price.toFixed(2)}),y.jsx("td",{className:"col-total",children:z.amount.toFixed(2)})]},z.itemId))})]}),y.jsxs("section",{className:"totals",children:[y.jsxs("div",{className:"total-row",children:[y.jsx("span",{children:"Sub Total"}),y.jsxs("span",{children:[p,C.toFixed(2)]})]}),y.jsxs("div",{className:"total-row no-print",children:[y.jsx("span",{children:"Discount"}),y.jsxs("div",{className:"discount-control",children:[y.jsxs("span",{children:[p,Number(n).toFixed(2)]}),y.jsx("input",{type:"number",value:n,onChange:r,className:"discount-input","aria-label":"Discount amount"})]})]}),y.jsxs("div",{className:"total-row print-only",children:[y.jsx("span",{children:"Discount"}),y.jsxs("span",{children:[p,Number(n).toFixed(2)]})]}),y.jsxs("div",{className:"total-row grand-total",children:[y.jsx("span",{children:"Grand Total"}),y.jsxs("span",{children:[p,w.toFixed(2)]})]})]}),y.jsx("div",{className:"actions no-print",children:y.jsx("button",{onClick:i,className:"print-button",children:"Print / Finalize Bill"})}),y.jsxs("footer",{className:"footer",children:[y.jsx("div",{className:"qr-code-container",children:w>0&&m?y.jsx(dN,{value:R,size:110,bgColor:"#ffffff",fgColor:"#000000",level:"L",includeMargin:!1}):y.jsx("div",{className:"qr-placeholder",children:"[QR Code Here]"})}),y.jsx("p",{className:"footer-message",children:"Thank you for your visit!"}),o.id&&y.jsxs("p",{className:"order-id",children:["Order ID: ",String(o.id)]})]})]})}),aB=".thermal-print{width:100%;max-width:76mm;margin:0 auto;padding:12px;background-color:#fff;color:#000;font-family:Courier New,Courier,monospace;font-size:12px;line-height:1.4;box-sizing:border-box}.thermal-print *{box-sizing:border-box}.header{text-align:center;margin-bottom:10px}.logo-placeholder{font-size:10px;color:#888;margin-bottom:8px}.business-name{font-size:16px;font-weight:700;margin:0}.business-details{font-size:10px;margin:2px 0}.invoice-title{font-size:10px;margin:8px 0 0;font-weight:700}.meta-info{font-size:10px;margin-bottom:10px;border-top:1px dashed #000;border-bottom:1px dashed #000;padding:5px 0}.meta-row{display:flex;justify-content:space-between}.items-table{width:100%;border-collapse:collapse;margin-bottom:10px}.items-table thead{border-bottom:1px solid #000}.items-table th{font-size:10px;font-weight:700;padding:5px 2px}.items-table td{padding:5px 2px;vertical-align:top;border-bottom:1px dotted #888}.no-items{text-align:center;padding:15px 0;color:#888}.item-name{display:block}.item-notes{display:block;font-size:9px;color:#555;padding-left:5px}.col-sno{width:8%;text-align:left;padding-right:4px}.col-item{width:37%;text-align:left}.col-qty,.col-price,.col-total{text-align:right;white-space:nowrap;font-variant-numeric:tabular-nums}.col-qty{width:15%}.col-price,.col-total{width:20%}.totals{font-size:12px;border-top:1px solid #000;padding-top:5px}.total-row{display:flex;justify-content:space-between;margin-bottom:3px}.grand-total{font-weight:700;font-size:15px;margin-top:5px;padding-top:5px;border-top:1px dashed #000}.discount-control{display:flex;align-items:center;gap:8px}.discount-input{width:70px;border:1px solid #ccc;text-align:right;padding:2px}.actions{margin:15px 0}.print-button{width:100%;padding:10px;background-color:#333;color:#fff;border:none;cursor:pointer;font-family:inherit;font-size:14px}.footer{text-align:center;margin-top:15px;border-top:1px dashed #000;padding-top:10px}.qr-placeholder{width:90px;height:90px;border:1px solid #888;margin:0 auto 10px;display:flex;align-items:center;justify-content:center;font-size:9px;color:#888}.footer-message{font-weight:700}.order-id{font-size:9px;color:#555;margin-top:5px}.qr-code-container{margin:0 auto 10px;width:110px;height:110px}.print-only{display:none}@media print{.no-print{display:none!important}.print-only{display:flex}.thermal-print{max-width:100%;padding:0;box-shadow:none}.qr-code-container{display:block}}",lB=()=>{var X;const[t,e]=G.useState([]),[n,r]=G.useState([]),[i,s]=G.useState([]),[o,a]=G.useState([]),[l,u]=G.useState(null),[c,d]=G.useState(""),[m,p]=G.useState(-1),[x,E]=G.useState(null),[C,w]=G.useState(0),[A,N]=G.useState(!1),[R,z]=G.useState(""),[Q,L]=G.useState("Dine-In"),[T,k]=G.useState("Cash"),M=G.useRef(null),S=G.useRef(null),P=t.filter(se=>se.status==="occupied");G.useEffect(()=>{var re;(async()=>{N(!0);try{const[$,ae,fe]=await Promise.all([zv(),Af(),dl()]);s($||[]),a(ae||[]),u(fe||{})}catch($){console.error("Failed to fetch initial data:",$),z("Could not load necessary data. Please refresh.")}finally{N(!1)}})(),(re=M.current)==null||re.focus()},[]);const j=G.useCallback(()=>{if(!S.current){alert("Nothing to print  make sure a table is selected and the bill is visible.");return}const se=S.current.innerHTML||S.current.outerHTML||"",re=`
      <!doctype html>
      <html>
        <head>
          <meta charset="utf-8"/>
          <meta name="viewport" content="width=device-width,initial-scale=1"/>
          <title>Receipt</title>
          <style>${aB}</style>
        </head>
        <body>
          <div class="receipt-print-container">
            <div class="receipt">
              ${se}
            </div>
          </div>
        </body>
      </html>
    `,$=document.createElement("iframe");$.style.position="fixed",$.style.right="0",$.style.bottom="0",$.style.width="0",$.style.height="0",$.style.border="0",$.style.visibility="hidden",document.body.appendChild($);const ae=$.contentDocument||$.contentWindow.document;ae.open(),ae.write(re),ae.close();const fe=()=>{const ve=$.contentWindow;if(ve)try{ve.focus(),setTimeout(()=>{try{ve.print()}catch(V){console.error("Print error:",V)}setTimeout(()=>{try{document.body.removeChild($)}catch{}},600)},250)}catch(V){console.error("Print error:",V)}};$.contentWindow&&$.contentDocument.readyState==="complete"?fe():($.onload=fe,setTimeout(()=>{document.body.contains($)&&fe()},900))},[S]),B=G.useCallback(async()=>{var se;if(!x||!c){alert("Please select a table with a bill to finalize.");return}j();try{const re=x.items.reduce((ve,V)=>ve+V.price*V.quantity,0),$=Number(C)||0,ae=re-$,fe={tableName:x.tableName,staffName:x.staffName,subTotal:re,discount:$,grandTotal:ae,items:x.items,originalOrderId:x.order.id,orderType:Q,paymentMode:T};await eD(fe),await SA(c,"available"),await X9(x.order.id),alert(`Bill for table ${x.tableName} (${Q} / ${T}) has been processed and recorded.`),E(null),d(""),p(-1),w(0),L("Dine-In"),k("Cash"),(se=M.current)==null||se.focus()}catch(re){console.error("Failed to finalize bill:",re),alert("An error occurred while finalizing the bill. Check console.")}},[x,c,C,Q,T,j]);return G.useEffect(()=>{const se=re=>{if(re.ctrlKey&&re.key.toLowerCase()==="p"){re.preventDefault(),x?B():alert("Please select a table first to finalize and print.");return}switch(re.key){case"F3":re.preventDefault(),L("Dine-In");break;case"F4":re.preventDefault(),L("Takeaway");break;case"F7":re.preventDefault(),k("Cash");break;case"F8":re.preventDefault(),k("Card");break;case"F9":re.preventDefault(),k("UPI");break;case"ArrowDown":re.preventDefault(),P.length>0&&p($=>($+1)%P.length);break;case"ArrowUp":re.preventDefault(),P.length>0&&p($=>($-1+P.length)%P.length);break;case"Enter":re.preventDefault(),m>=0&&m<P.length&&d(P[m].id);break}};return document.addEventListener("keydown",se),()=>document.removeEventListener("keydown",se)},[P,m,x,B]),G.useEffect(()=>{const se=_A(re=>{e(re||[]),N(!1)},re=>{console.error("Tables real-time listener error:",re),z("Failed to load table data. Please try again."),N(!1)});return()=>{try{se()}catch{}}},[]),G.useEffect(()=>{const se=AA(re=>{r(re||[]),N(!1)},re=>{console.error("Orders real-time listener error:",re),z("Failed to load order data. Please try again."),N(!1)});return()=>{try{se()}catch{}}},[]),G.useEffect(()=>{var ve,V;if(!c){E(null);return}const se=n.filter(Y=>Y.tableId===c).sort((Y,ie)=>new Date(ie.createdAt)-new Date(Y.createdAt));if(se.length===0){z("No active orders found for this table."),E(null);return}const re=se[0],$=(re.items||[]).map(Y=>{const ie=i.find(ne=>ne.id===Y.itemId);return{...Y,name:(ie==null?void 0:ie.name)||Y.name||"Unknown Item",price:Number((ie==null?void 0:ie.price)??Y.price??0)}}),ae=((ve=t.find(Y=>Y.id===re.tableId))==null?void 0:ve.name)||"N/A",fe=((V=o.find(Y=>Y.id===re.staffId))==null?void 0:V.name)||"N/A";E({order:re,items:$,tableName:ae,staffName:fe}),w(0),z("")},[c,n,i,o,t]),y.jsxs("div",{className:"container mx-auto py-6 px-4",children:[y.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Billing"}),y.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6 no-print",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Type"}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsx("button",{onClick:()=>L("Dine-In"),className:`w-full transition-colors duration-200 px-4 py-2 rounded-lg text-sm font-semibold ${Q==="Dine-In"?"bg-blue-600 text-white shadow":"bg-gray-200 hover:bg-gray-300"}`,children:"Dine-In (F3)"}),y.jsx("button",{onClick:()=>L("Takeaway"),className:`w-full transition-colors duration-200 px-4 py-2 rounded-lg text-sm font-semibold ${Q==="Takeaway"?"bg-blue-600 text-white shadow":"bg-gray-200 hover:bg-gray-300"}`,children:"Takeaway (F4)"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Mode"}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsx("button",{onClick:()=>k("Cash"),className:`w-full transition-colors duration-200 px-4 py-2 rounded-lg text-sm font-semibold ${T==="Cash"?"bg-green-600 text-white shadow":"bg-gray-200 hover:bg-gray-300"}`,children:"Cash (F7)"}),y.jsx("button",{onClick:()=>k("Card"),className:`w-full transition-colors duration-200 px-4 py-2 rounded-lg text-sm font-semibold ${T==="Card"?"bg-green-600 text-white shadow":"bg-gray-200 hover:bg-gray-300"}`,children:"Card (F8)"}),y.jsx("button",{onClick:()=>k("UPI"),className:`w-full transition-colors duration-200 px-4 py-2 rounded-lg text-sm font-semibold ${T==="UPI"?"bg-green-600 text-white shadow":"bg-gray-200 hover:bg-gray-300"}`,children:"UPI (F9)"})]})]})]}),y.jsxs("div",{className:"mt-6 pt-6 border-t",children:[y.jsx("label",{htmlFor:"table-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select an Occupied Table (Use  & Enter)"}),y.jsxs("select",{id:"table-select",ref:M,value:((X=P[m])==null?void 0:X.id)||"",onChange:se=>{const re=se.target.value,$=P.findIndex(ae=>ae.id===re);p($),d(re)},className:"w-full md:w-1/2 p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:A,children:[y.jsx("option",{value:"",children:A?"Loading tables...":"Select a Table"}),P.map(se=>y.jsx("option",{value:se.id,children:se.name},se.id))]})]})]}),R&&y.jsx("p",{className:"text-red-500 text-center mb-4 no-print",children:R}),x&&y.jsx(y.Fragment,{children:y.jsx(oB,{ref:S,details:{...x,orderType:Q,paymentMode:T},settings:l,discount:C,onDiscountChange:se=>w(se.target.value),onPrint:B})})]})},uB=[{symbol:"",code:"INR",name:"Indian Rupee"},{symbol:"$",code:"USD",name:"United States Dollar"},{symbol:"",code:"EUR",name:"Euro"},{symbol:"",code:"GBP",name:"British Pound Sterling"},{symbol:"",code:"JPY",name:"Japanese Yen"},{symbol:"A$",code:"AUD",name:"Australian Dollar"},{symbol:"C$",code:"CAD",name:"Canadian Dollar"},{symbol:"CHF",code:"CHF",name:"Swiss Franc"},{symbol:"AED",code:"AED",name:"UAE Dirham"},{symbol:"SAR",code:"SAR",name:"Saudi Riyal"},{symbol:"SGD",code:"SGD",name:"Singapore Dollar"}],cB=()=>{const[t,e]=G.useState({restaurantName:"",address:"",upiId:"",currencySymbol:"",currencyCode:"INR"}),[n,r]=G.useState(!0),[i,s]=G.useState(""),[o,a]=G.useState(!1);G.useEffect(()=>{(async()=>{try{r(!0);const d=await dl();d&&e({currencySymbol:"",currencyCode:"INR",...d})}catch(d){console.error("Error fetching settings:",d),s("Could not load settings."),a(!0)}finally{r(!1)}})()},[]);const l=c=>{const{name:d,value:m}=c.target;if(d==="currency")try{const{symbol:p,code:x}=JSON.parse(m);e(E=>({...E,currencySymbol:p,currencyCode:x}))}catch(p){console.error("Could not parse currency data",p)}else e(p=>({...p,[d]:m}))},u=async c=>{if(c.preventDefault(),!t.restaurantName||!t.upiId){s("Restaurant Name and UPI ID are required."),a(!0);return}try{s("Saving..."),a(!1),await U9(t),s("Settings saved successfully!")}catch(d){console.error("Error updating settings:",d),s("Failed to save settings. Please try again."),a(!0)}};return n?y.jsx("div",{className:"text-center p-10",children:"Loading settings..."}):y.jsxs("div",{className:"container mx-auto py-6 px-4",children:[y.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Application Settings"}),y.jsx("p",{className:"text-center text-red-700 font-semibold text-lg mb-8 italic",children:'"Palestine is the anvil of our consciousness." - Edward Said'}),y.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto",children:y.jsxs("form",{onSubmit:u,children:[y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"restaurantName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Restaurant Name"}),y.jsx("input",{type:"text",id:"restaurantName",name:"restaurantName",value:t.restaurantName,onChange:l,className:"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., The Grand Eatery",required:!0})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),y.jsx("input",{type:"text",id:"address",name:"address",value:t.address,onChange:l,className:"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 123 Culinary Lane, Food Town"})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("label",{htmlFor:"upiId",className:"block text-sm font-medium text-gray-700 mb-1",children:"UPI ID (for QR Code Payments)"}),y.jsx("input",{type:"text",id:"upiId",name:"upiId",value:t.upiId,onChange:l,className:"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., yourname@oksbi",required:!0})]}),y.jsxs("div",{className:"mb-6",children:[y.jsx("label",{htmlFor:"currency",className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),y.jsx("select",{id:"currency",name:"currency",value:JSON.stringify({symbol:t.currencySymbol,code:t.currencyCode}),onChange:l,className:"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:uB.map(({symbol:c,code:d,name:m})=>y.jsxs("option",{value:JSON.stringify({symbol:c,code:d}),children:[m," (",c,")"]},d))})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Save Settings"}),i&&y.jsx("p",{className:`text-sm ${o?"text-red-600":"text-green-600"}`,children:i})]})]})})]})};function hB({title:t,titleId:e,...n},r){return G.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?G.createElement("title",{id:e},t):null,G.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const pN=G.forwardRef(hB);function fB({title:t,titleId:e,...n},r){return G.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?G.createElement("title",{id:e},t):null,G.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const dB=G.forwardRef(fB);function pB({title:t,titleId:e,...n},r){return G.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?G.createElement("title",{id:e},t):null,G.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const mB=G.forwardRef(pB);function gB({title:t,titleId:e,...n},r){return G.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?G.createElement("title",{id:e},t):null,G.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25M9 16.5v.75m3-3v3M15 12v5.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const yB=G.forwardRef(gB);function vB({title:t,titleId:e,...n},r){return G.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?G.createElement("title",{id:e},t):null,G.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const wB=G.forwardRef(vB);function xB({title:t,titleId:e,...n},r){return G.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?G.createElement("title",{id:e},t):null,G.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 16.875h3.375m0 0h3.375m-3.375 0V13.5m0 3.375v3.375M6 10.5h2.25a2.25 2.25 0 0 0 2.25-2.25V6a2.25 2.25 0 0 0-2.25-2.25H6A2.25 2.25 0 0 0 3.75 6v2.25A2.25 2.25 0 0 0 6 10.5Zm0 9.75h2.25A2.25 2.25 0 0 0 10.5 18v-2.25a2.25 2.25 0 0 0-2.25-2.25H6a2.25 2.25 0 0 0-2.25 2.25V18A2.25 2.25 0 0 0 6 20.25Zm9.75-9.75H18a2.25 2.25 0 0 0 2.25-2.25V6A2.25 2.25 0 0 0 18 3.75h-2.25A2.25 2.25 0 0 0 13.5 6v2.25a2.25 2.25 0 0 0 2.25 2.25Z"}))}const bB=G.forwardRef(xB);function _B({title:t,titleId:e,...n},r){return G.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?G.createElement("title",{id:e},t):null,G.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const SB=G.forwardRef(_B);function AB({title:t,titleId:e,...n},r){return G.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?G.createElement("title",{id:e},t):null,G.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const EB=G.forwardRef(AB),NB=[{isLink:!0,to:"/reports/sales-and-revenue",title:"Sales & Revenue Reports",description:"Track daily, weekly, and monthly sales performance and revenue streams.",icon:y.jsx(pN,{className:"h-8 w-8 text-blue-500"}),color:"blue"},{title:"Profit & Financial Reports",description:"Analyze profit margins, costs of goods sold, and overall financial health.",icon:y.jsx(dB,{className:"h-8 w-8 text-green-500"}),color:"green"},{title:"Customer Reports",description:"Gain insights into customer behavior, order frequency, and popular items.",icon:y.jsx(EB,{className:"h-8 w-8 text-purple-500"}),color:"purple"},{title:"Staff & HR Reports",description:"Monitor staff performance, work hours, tips, and payroll data.",icon:y.jsx(SB,{className:"h-8 w-8 text-red-500"}),color:"red"},{title:"Analytical & Comparative Reports",description:"Compare performance across different time periods or menu items.",icon:y.jsx(yB,{className:"h-8 w-8 text-indigo-500"}),color:"indigo"}],TB=()=>y.jsxs("div",{className:"p-6 bg-gray-50 min-h-full",children:[y.jsxs("div",{className:"mb-8",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Reports Dashboard"}),y.jsx("p",{className:"text-gray-500 mt-1",children:"Select a category to view detailed reports."})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:NB.map(t=>t.isLink?y.jsxs(Xy,{to:t.to,className:"group bg-white rounded-xl shadow-md p-6 flex flex-col justify-between hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer border border-gray-200",children:[y.jsxs("div",{children:[y.jsx("div",{className:"mb-4",children:t.icon}),y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:t.title}),y.jsx("p",{className:"text-gray-600 text-sm",children:t.description})]}),y.jsx("div",{className:"mt-6",children:y.jsx("span",{className:`font-semibold text-${t.color}-600 group-hover:text-${t.color}-800 transition-colors`,children:"View Reports "})})]},t.title):y.jsxs("div",{className:"group bg-white rounded-xl shadow-md p-6 flex flex-col justify-between border border-gray-200",children:[y.jsxs("div",{children:[y.jsx("div",{className:"mb-4",children:t.icon}),y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:t.title}),y.jsx("p",{className:"text-gray-600 text-sm",children:t.description})]}),y.jsx("div",{className:"mt-6",children:y.jsx("span",{className:"font-semibold text-gray-400",children:"Coming Soon"})})]},t.title))})]}),CB="modulepreload",PB=function(t){return"/"+t},$b={},kg=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=PB(l),l in $b)return;$b[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":CB,u||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),u)return new Promise((m,p)=>{d.addEventListener("load",m),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function an(t){"@babel/helpers - typeof";return an=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(t)}var Us=Uint8Array,Ji=Uint16Array,b5=Int32Array,_5=new Us([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),S5=new Us([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Hb=new Us([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),mN=function(t,e){for(var n=new Ji(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new b5(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},gN=mN(_5,2),kB=gN.b,q2=gN.r;kB[28]=258,q2[258]=28;var IB=mN(S5,0),Wb=IB.r,$2=new Ji(32768);for(var Sn=0;Sn<32768;++Sn){var Ca=(Sn&43690)>>1|(Sn&21845)<<1;Ca=(Ca&52428)>>2|(Ca&13107)<<2,Ca=(Ca&61680)>>4|(Ca&3855)<<4,$2[Sn]=((Ca&65280)>>8|(Ca&255)<<8)>>1}var Gh=function(t,e,n){for(var r=t.length,i=0,s=new Ji(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Ji(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Ji(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],c=e-t[i],d=o[t[i]-1]++<<c,m=d|(1<<c)-1;d<=m;++d)a[$2[d]>>l]=u}else for(a=new Ji(r),i=0;i<r;++i)t[i]&&(a[i]=$2[o[t[i]-1]++]>>15-t[i]);return a},lu=new Us(288);for(var Sn=0;Sn<144;++Sn)lu[Sn]=8;for(var Sn=144;Sn<256;++Sn)lu[Sn]=9;for(var Sn=256;Sn<280;++Sn)lu[Sn]=7;for(var Sn=280;Sn<288;++Sn)lu[Sn]=8;var Em=new Us(32);for(var Sn=0;Sn<32;++Sn)Em[Sn]=5;var LB=Gh(lu,9,0),RB=Gh(Em,5,0),yN=function(t){return(t+7)/8|0},jB=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new Us(t.subarray(e,n))},Oo=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},vh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},Ig=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:wN,l:0};if(i==1){var o=new Us(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(z,Q){return z.f-Q.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,d=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=n[n[u].f<n[d].f?u++:d++],l=n[u!=c&&n[u].f<n[d].f?u++:d++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};for(var m=s[0].s,r=1;r<i;++r)s[r].s>m&&(m=s[r].s);var p=new Ji(m+1),x=H2(n[c-1],p,0);if(x>e){var r=0,E=0,C=x-e,w=1<<C;for(s.sort(function(Q,L){return p[L.s]-p[Q.s]||Q.f-L.f});r<i;++r){var A=s[r].s;if(p[A]>e)E+=w-(1<<x-p[A]),p[A]=e;else break}for(E>>=C;E>0;){var N=s[r].s;p[N]<e?E-=1<<e-p[N]++-1:++r}for(;r>=0&&E;--r){var R=s[r].s;p[R]==e&&(--p[R],++E)}x=e}return{t:new Us(p),l:x}},H2=function(t,e,n){return t.s==-1?Math.max(H2(t.l,e,n+1),H2(t.r,e,n+1)):e[t.s]=n},Gb=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Ji(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},wh=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},vN=function(t,e,n){var r=n.length,i=yN(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},Kb=function(t,e,n,r,i,s,o,a,l,u,c){Oo(e,c++,n),++i[256];for(var d=Ig(i,15),m=d.t,p=d.l,x=Ig(s,15),E=x.t,C=x.l,w=Gb(m),A=w.c,N=w.n,R=Gb(E),z=R.c,Q=R.n,L=new Ji(19),T=0;T<A.length;++T)++L[A[T]&31];for(var T=0;T<z.length;++T)++L[z[T]&31];for(var k=Ig(L,7),M=k.t,S=k.l,P=19;P>4&&!M[Hb[P-1]];--P);var j=u+5<<3,B=wh(i,lu)+wh(s,Em)+o,X=wh(i,m)+wh(s,E)+o+14+3*P+wh(L,M)+2*L[16]+3*L[17]+7*L[18];if(l>=0&&j<=B&&j<=X)return vN(e,c,t.subarray(l,l+u));var se,re,$,ae;if(Oo(e,c,1+(X<B)),c+=2,X<B){se=Gh(m,p,0),re=m,$=Gh(E,C,0),ae=E;var fe=Gh(M,S,0);Oo(e,c,N-257),Oo(e,c+5,Q-1),Oo(e,c+10,P-4),c+=14;for(var T=0;T<P;++T)Oo(e,c+3*T,M[Hb[T]]);c+=3*P;for(var ve=[A,z],V=0;V<2;++V)for(var Y=ve[V],T=0;T<Y.length;++T){var ie=Y[T]&31;Oo(e,c,fe[ie]),c+=M[ie],ie>15&&(Oo(e,c,Y[T]>>5&127),c+=Y[T]>>12)}}else se=LB,re=lu,$=RB,ae=Em;for(var T=0;T<a;++T){var ne=r[T];if(ne>255){var ie=ne>>18&31;vh(e,c,se[ie+257]),c+=re[ie+257],ie>7&&(Oo(e,c,ne>>23&31),c+=_5[ie]);var oe=ne&31;vh(e,c,$[oe]),c+=ae[oe],oe>3&&(vh(e,c,ne>>5&8191),c+=S5[oe])}else vh(e,c,se[ne]),c+=re[ne]}return vh(e,c,se[256]),c+re[256]},DB=new b5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),wN=new Us(0),MB=function(t,e,n,r,i,s){var o=s.z||t.length,a=new Us(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),u=s.l,c=(s.r||0)&7;if(e){c&&(l[0]=s.r>>3);for(var d=DB[e-1],m=d>>13,p=d&8191,x=(1<<n)-1,E=s.p||new Ji(32768),C=s.h||new Ji(x+1),w=Math.ceil(n/3),A=2*w,N=function(ge){return(t[ge]^t[ge+1]<<w^t[ge+2]<<A)&x},R=new b5(25e3),z=new Ji(288),Q=new Ji(32),L=0,T=0,k=s.i||0,M=0,S=s.w||0,P=0;k+2<o;++k){var j=N(k),B=k&32767,X=C[j];if(E[B]=X,C[j]=B,S<=k){var se=o-k;if((L>7e3||M>24576)&&(se>423||!u)){c=Kb(t,l,0,R,z,Q,T,M,P,k-P,c),M=L=T=0,P=k;for(var re=0;re<286;++re)z[re]=0;for(var re=0;re<30;++re)Q[re]=0}var $=2,ae=0,fe=p,ve=B-X&32767;if(se>2&&j==N(k-ve))for(var V=Math.min(m,se)-1,Y=Math.min(32767,k),ie=Math.min(258,se);ve<=Y&&--fe&&B!=X;){if(t[k+$]==t[k+$-ve]){for(var ne=0;ne<ie&&t[k+ne]==t[k+ne-ve];++ne);if(ne>$){if($=ne,ae=ve,ne>V)break;for(var oe=Math.min(ve,ne-2),ue=0,re=0;re<oe;++re){var we=k-ve+re&32767,be=E[we],Se=we-be&32767;Se>ue&&(ue=Se,X=we)}}}B=X,X=E[B],ve+=B-X&32767}if(ae){R[M++]=268435456|q2[$]<<18|Wb[ae];var Re=q2[$]&31,Ae=Wb[ae]&31;T+=_5[Re]+S5[Ae],++z[257+Re],++Q[Ae],S=k+$,++L}else R[M++]=t[k],++z[t[k]]}}for(k=Math.max(k,S);k<o;++k)R[M++]=t[k],++z[t[k]];c=Kb(t,l,u,R,z,Q,T,M,P,k-P,c),u||(s.r=c&7|l[c/8|0]<<3,c-=7,s.h=C,s.p=E,s.i=k,s.w=S)}else{for(var k=s.w||0;k<o+u;k+=65535){var Pe=k+65535;Pe>=o&&(l[c/8|0]=u,Pe=o),c=vN(l,c+1,t.subarray(k,Pe))}s.i=o}return jB(a,0,r+yN(c)+i)},xN=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},FB=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Us(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return MB(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},bN=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},OB=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=xN();i.p(e.dictionary),bN(t,2,i.d())}};function W2(t,e){e||(e={});var n=xN();n.p(t);var r=FB(t,e,e.dictionary?6:2,4);return OB(r,e),bN(r,r.length-4,n.d()),r}var VB=typeof TextDecoder<"u"&&new TextDecoder,BB=0;try{VB.decode(wN,{stream:!0}),BB=1}catch{}function UB(t){if(Array.isArray(t))return t}function zB(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e!==0)for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==e);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return a}}function Qb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function qB(t,e){if(t){if(typeof t=="string")return Qb(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qb(t,e):void 0}}function $B(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yb(t,e){return UB(t)||zB(t,e)||qB(t,e)||$B()}function Xb(t,e="utf8"){return new TextDecoder(e).decode(t)}const HB=new TextEncoder;function WB(t){return HB.encode(t)}const GB=1024*8,KB=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),Lg={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class A5{constructor(e=GB,n={}){sn(this,"buffer");sn(this,"byteLength");sn(this,"byteOffset");sn(this,"length");sn(this,"offset");sn(this,"lastWrittenByte");sn(this,"littleEndian");sn(this,"_data");sn(this,"_mark");sn(this,"_marks");let r=!1;typeof e=="number"?e=new ArrayBuffer(e):(r=!0,this.lastWrittenByte=e.byteLength);const i=n.offset?n.offset>>>0:0,s=e.byteLength-i;let o=i;(ArrayBuffer.isView(e)||e instanceof A5)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+i),e=e.buffer),r?this.lastWrittenByte=s:this.lastWrittenByte=0,this.buffer=e,this.length=s,this.byteLength=s,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,s),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const r=(this.offset+e)*2,i=new Uint8Array(r);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=r,this.byteLength=r,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const r=Lg[n].BYTES_PER_ELEMENT*e,i=this.byteOffset+this.offset,s=this.buffer.slice(i,i+r);if(this.littleEndian===KB&&n!=="uint8"&&n!=="int8"){const a=new Uint8Array(this.buffer.slice(i,i+r));a.reverse();const l=new Lg[n](a.buffer);return this.offset+=r,l.reverse(),l}const o=new Lg[n](s);return this.offset+=r,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let r=0;r<e;r++)n+=this.readChar();return n}readUtf8(e=1){return Xb(this.readBytes(e))}decodeText(e=1,n="utf8"){return Xb(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(WB(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Bc(t){let e=t.length;for(;--e>=0;)t[e]=0}const QB=3,YB=258,_N=29,XB=256,JB=XB+1+_N,SN=30,ZB=512,eU=new Array((JB+2)*2);Bc(eU);const tU=new Array(SN*2);Bc(tU);const nU=new Array(ZB);Bc(nU);const rU=new Array(YB-QB+1);Bc(rU);const iU=new Array(_N);Bc(iU);const sU=new Array(SN);Bc(sU);const oU=(t,e,n,r)=>{let i=t&65535|0,s=t>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+e[r++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0};var G2=oU;const aU=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},lU=new Uint32Array(aU()),uU=(t,e,n,r)=>{const i=lU,s=r+n;t^=-1;for(let o=r;o<s;o++)t=t>>>8^i[(t^e[o])&255];return t^-1};var lo=uU,K2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},AN={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const cU=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var hU=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)cU(n,r)&&(t[r]=n[r])}}return t},fU=t=>{let e=0;for(let r=0,i=t.length;r<i;r++)e+=t[r].length;const n=new Uint8Array(e);for(let r=0,i=0,s=t.length;r<s;r++){let o=t[r];n.set(o,i),i+=o.length}return n},EN={assign:hU,flattenChunks:fU};let NN=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{NN=!1}const Rf=new Uint8Array(256);for(let t=0;t<256;t++)Rf[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Rf[254]=Rf[254]=1;var dU=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,r,i,s,o=t.length,a=0;for(i=0;i<o;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),s=0,i=0;s<a;i++)n=t.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=t.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|n&63):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|n&63):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|n&63);return e};const pU=(t,e)=>{if(e<65534&&t.subarray&&NN)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let r=0;r<e;r++)n+=String.fromCharCode(t[r]);return n};var mU=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let r,i;const s=new Array(n*2);for(i=0,r=0;r<n;){let o=t[r++];if(o<128){s[i++]=o;continue}let a=Rf[o];if(a>4){s[i++]=65533,r+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&r<n;)o=o<<6|t[r++]&63,a--;if(a>1){s[i++]=65533;continue}o<65536?s[i++]=o:(o-=65536,s[i++]=55296|o>>10&1023,s[i++]=56320|o&1023)}return pU(s,i)},gU=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Rf[t[n]]>e?n:e},Q2={string2buf:dU,buf2string:mU,utf8border:gU};function yU(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var vU=yU;const Yd=16209,wU=16191;var xU=function(e,n){let r,i,s,o,a,l,u,c,d,m,p,x,E,C,w,A,N,R,z,Q,L,T,k,M;const S=e.state;r=e.next_in,k=e.input,i=r+(e.avail_in-5),s=e.next_out,M=e.output,o=s-(n-e.avail_out),a=s+(e.avail_out-257),l=S.dmax,u=S.wsize,c=S.whave,d=S.wnext,m=S.window,p=S.hold,x=S.bits,E=S.lencode,C=S.distcode,w=(1<<S.lenbits)-1,A=(1<<S.distbits)-1;e:do{x<15&&(p+=k[r++]<<x,x+=8,p+=k[r++]<<x,x+=8),N=E[p&w];t:for(;;){if(R=N>>>24,p>>>=R,x-=R,R=N>>>16&255,R===0)M[s++]=N&65535;else if(R&16){z=N&65535,R&=15,R&&(x<R&&(p+=k[r++]<<x,x+=8),z+=p&(1<<R)-1,p>>>=R,x-=R),x<15&&(p+=k[r++]<<x,x+=8,p+=k[r++]<<x,x+=8),N=C[p&A];n:for(;;){if(R=N>>>24,p>>>=R,x-=R,R=N>>>16&255,R&16){if(Q=N&65535,R&=15,x<R&&(p+=k[r++]<<x,x+=8,x<R&&(p+=k[r++]<<x,x+=8)),Q+=p&(1<<R)-1,Q>l){e.msg="invalid distance too far back",S.mode=Yd;break e}if(p>>>=R,x-=R,R=s-o,Q>R){if(R=Q-R,R>c&&S.sane){e.msg="invalid distance too far back",S.mode=Yd;break e}if(L=0,T=m,d===0){if(L+=u-R,R<z){z-=R;do M[s++]=m[L++];while(--R);L=s-Q,T=M}}else if(d<R){if(L+=u+d-R,R-=d,R<z){z-=R;do M[s++]=m[L++];while(--R);if(L=0,d<z){R=d,z-=R;do M[s++]=m[L++];while(--R);L=s-Q,T=M}}}else if(L+=d-R,R<z){z-=R;do M[s++]=m[L++];while(--R);L=s-Q,T=M}for(;z>2;)M[s++]=T[L++],M[s++]=T[L++],M[s++]=T[L++],z-=3;z&&(M[s++]=T[L++],z>1&&(M[s++]=T[L++]))}else{L=s-Q;do M[s++]=M[L++],M[s++]=M[L++],M[s++]=M[L++],z-=3;while(z>2);z&&(M[s++]=M[L++],z>1&&(M[s++]=M[L++]))}}else if(R&64){e.msg="invalid distance code",S.mode=Yd;break e}else{N=C[(N&65535)+(p&(1<<R)-1)];continue n}break}}else if(R&64)if(R&32){S.mode=wU;break e}else{e.msg="invalid literal/length code",S.mode=Yd;break e}else{N=E[(N&65535)+(p&(1<<R)-1)];continue t}break}}while(r<i&&s<a);z=x>>3,r-=z,x-=z<<3,p&=(1<<x)-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?5+(i-r):5-(r-i),e.avail_out=s<a?257+(a-s):257-(s-a),S.hold=p,S.bits=x};const Eu=15,Jb=852,Zb=592,e3=0,Rg=1,t3=2,bU=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),_U=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),SU=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),AU=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),EU=(t,e,n,r,i,s,o,a)=>{const l=a.bits;let u=0,c=0,d=0,m=0,p=0,x=0,E=0,C=0,w=0,A=0,N,R,z,Q,L,T=null,k;const M=new Uint16Array(Eu+1),S=new Uint16Array(Eu+1);let P=null,j,B,X;for(u=0;u<=Eu;u++)M[u]=0;for(c=0;c<r;c++)M[e[n+c]]++;for(p=l,m=Eu;m>=1&&M[m]===0;m--);if(p>m&&(p=m),m===0)return i[s++]=1<<24|64<<16|0,i[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<m&&M[d]===0;d++);for(p<d&&(p=d),C=1,u=1;u<=Eu;u++)if(C<<=1,C-=M[u],C<0)return-1;if(C>0&&(t===e3||m!==1))return-1;for(S[1]=0,u=1;u<Eu;u++)S[u+1]=S[u]+M[u];for(c=0;c<r;c++)e[n+c]!==0&&(o[S[e[n+c]]++]=c);if(t===e3?(T=P=o,k=20):t===Rg?(T=bU,P=_U,k=257):(T=SU,P=AU,k=0),A=0,c=0,u=d,L=s,x=p,E=0,z=-1,w=1<<p,Q=w-1,t===Rg&&w>Jb||t===t3&&w>Zb)return 1;for(;;){j=u-E,o[c]+1<k?(B=0,X=o[c]):o[c]>=k?(B=P[o[c]-k],X=T[o[c]-k]):(B=96,X=0),N=1<<u-E,R=1<<x,d=R;do R-=N,i[L+(A>>E)+R]=j<<24|B<<16|X|0;while(R!==0);for(N=1<<u-1;A&N;)N>>=1;if(N!==0?(A&=N-1,A+=N):A=0,c++,--M[u]===0){if(u===m)break;u=e[n+o[c]]}if(u>p&&(A&Q)!==z){for(E===0&&(E=p),L+=d,x=u-E,C=1<<x;x+E<m&&(C-=M[x+E],!(C<=0));)x++,C<<=1;if(w+=1<<x,t===Rg&&w>Jb||t===t3&&w>Zb)return 1;z=A&Q,i[z]=p<<24|x<<16|L-s|0}}return A!==0&&(i[L+A]=u-E<<24|64<<16|0),a.bits=p,0};var Kh=EU;const NU=0,TN=1,CN=2,{Z_FINISH:n3,Z_BLOCK:TU,Z_TREES:Xd,Z_OK:uu,Z_STREAM_END:CU,Z_NEED_DICT:PU,Z_STREAM_ERROR:bs,Z_DATA_ERROR:PN,Z_MEM_ERROR:kN,Z_BUF_ERROR:kU,Z_DEFLATED:r3}=AN,p0=16180,i3=16181,s3=16182,o3=16183,a3=16184,l3=16185,u3=16186,c3=16187,h3=16188,f3=16189,Nm=16190,Vo=16191,jg=16192,d3=16193,Dg=16194,p3=16195,m3=16196,g3=16197,y3=16198,Jd=16199,Zd=16200,v3=16201,w3=16202,x3=16203,b3=16204,_3=16205,Mg=16206,S3=16207,A3=16208,Cn=16209,IN=16210,LN=16211,IU=852,LU=592,RU=15,jU=RU,E3=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function DU(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const gu=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<p0||e.mode>LN?1:0},RN=t=>{if(gu(t))return bs;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=p0,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(IU),e.distcode=e.distdyn=new Int32Array(LU),e.sane=1,e.back=-1,uu},jN=t=>{if(gu(t))return bs;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,RN(t)},DN=(t,e)=>{let n;if(gu(t))return bs;const r=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?bs:(r.window!==null&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,jN(t))},MN=(t,e)=>{if(!t)return bs;const n=new DU;t.state=n,n.strm=t,n.window=null,n.mode=p0;const r=DN(t,e);return r!==uu&&(t.state=null),r},MU=t=>MN(t,jU);let N3=!0,Fg,Og;const FU=t=>{if(N3){Fg=new Int32Array(512),Og=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Kh(TN,t.lens,0,288,Fg,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Kh(CN,t.lens,0,32,Og,0,t.work,{bits:5}),N3=!1}t.lencode=Fg,t.lenbits=9,t.distcode=Og,t.distbits=5},FN=(t,e,n,r)=>{let i;const s=t.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(e.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(i=s.wsize-s.wnext,i>r&&(i=r),s.window.set(e.subarray(n-r,n-r+i),s.wnext),r-=i,r?(s.window.set(e.subarray(n-r,n),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=i,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=i))),0},OU=(t,e)=>{let n,r,i,s,o,a,l,u,c,d,m,p,x,E,C=0,w,A,N,R,z,Q,L,T;const k=new Uint8Array(4);let M,S;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(gu(t)||!t.output||!t.input&&t.avail_in!==0)return bs;n=t.state,n.mode===Vo&&(n.mode=jg),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,u=n.hold,c=n.bits,d=a,m=l,T=uu;e:for(;;)switch(n.mode){case p0:if(n.wrap===0){n.mode=jg;break}for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.wrap&2&&u===35615){n.wbits===0&&(n.wbits=15),n.check=0,k[0]=u&255,k[1]=u>>>8&255,n.check=lo(n.check,k,2,0),u=0,c=0,n.mode=i3;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=Cn;break}if((u&15)!==r3){t.msg="unknown compression method",n.mode=Cn;break}if(u>>>=4,c-=4,L=(u&15)+8,n.wbits===0&&(n.wbits=L),L>15||L>n.wbits){t.msg="invalid window size",n.mode=Cn;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=u&512?f3:Vo,u=0,c=0;break;case i3:for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.flags=u,(n.flags&255)!==r3){t.msg="unknown compression method",n.mode=Cn;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Cn;break}n.head&&(n.head.text=u>>8&1),n.flags&512&&n.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,n.check=lo(n.check,k,2,0)),u=0,c=0,n.mode=s3;case s3:for(;c<32;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.head&&(n.head.time=u),n.flags&512&&n.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,k[2]=u>>>16&255,k[3]=u>>>24&255,n.check=lo(n.check,k,4,0)),u=0,c=0,n.mode=o3;case o3:for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.head&&(n.head.xflags=u&255,n.head.os=u>>8),n.flags&512&&n.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,n.check=lo(n.check,k,2,0)),u=0,c=0,n.mode=a3;case a3:if(n.flags&1024){for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),n.flags&512&&n.wrap&4&&(k[0]=u&255,k[1]=u>>>8&255,n.check=lo(n.check,k,2,0)),u=0,c=0}else n.head&&(n.head.extra=null);n.mode=l3;case l3:if(n.flags&1024&&(p=n.length,p>a&&(p=a),p&&(n.head&&(L=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(s,s+p),L)),n.flags&512&&n.wrap&4&&(n.check=lo(n.check,r,p,s)),a-=p,s+=p,n.length-=p),n.length))break e;n.length=0,n.mode=u3;case u3:if(n.flags&2048){if(a===0)break e;p=0;do L=r[s+p++],n.head&&L&&n.length<65536&&(n.head.name+=String.fromCharCode(L));while(L&&p<a);if(n.flags&512&&n.wrap&4&&(n.check=lo(n.check,r,p,s)),a-=p,s+=p,L)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=c3;case c3:if(n.flags&4096){if(a===0)break e;p=0;do L=r[s+p++],n.head&&L&&n.length<65536&&(n.head.comment+=String.fromCharCode(L));while(L&&p<a);if(n.flags&512&&n.wrap&4&&(n.check=lo(n.check,r,p,s)),a-=p,s+=p,L)break e}else n.head&&(n.head.comment=null);n.mode=h3;case h3:if(n.flags&512){for(;c<16;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.wrap&4&&u!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Cn;break}u=0,c=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Vo;break;case f3:for(;c<32;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}t.adler=n.check=E3(u),u=0,c=0,n.mode=Nm;case Nm:if(n.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=c,PU;t.adler=n.check=1,n.mode=Vo;case Vo:if(e===TU||e===Xd)break e;case jg:if(n.last){u>>>=c&7,c-=c&7,n.mode=Mg;break}for(;c<3;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}switch(n.last=u&1,u>>>=1,c-=1,u&3){case 0:n.mode=d3;break;case 1:if(FU(n),n.mode=Jd,e===Xd){u>>>=2,c-=2;break e}break;case 2:n.mode=m3;break;case 3:t.msg="invalid block type",n.mode=Cn}u>>>=2,c-=2;break;case d3:for(u>>>=c&7,c-=c&7;c<32;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Cn;break}if(n.length=u&65535,u=0,c=0,n.mode=Dg,e===Xd)break e;case Dg:n.mode=p3;case p3:if(p=n.length,p){if(p>a&&(p=a),p>l&&(p=l),p===0)break e;i.set(r.subarray(s,s+p),o),a-=p,s+=p,l-=p,o+=p,n.length-=p;break}n.mode=Vo;break;case m3:for(;c<14;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.nlen=(u&31)+257,u>>>=5,c-=5,n.ndist=(u&31)+1,u>>>=5,c-=5,n.ncode=(u&15)+4,u>>>=4,c-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Cn;break}n.have=0,n.mode=g3;case g3:for(;n.have<n.ncode;){for(;c<3;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.lens[P[n.have++]]=u&7,u>>>=3,c-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,M={bits:n.lenbits},T=Kh(NU,n.lens,0,19,n.lencode,0,n.work,M),n.lenbits=M.bits,T){t.msg="invalid code lengths set",n.mode=Cn;break}n.have=0,n.mode=y3;case y3:for(;n.have<n.nlen+n.ndist;){for(;C=n.lencode[u&(1<<n.lenbits)-1],w=C>>>24,A=C>>>16&255,N=C&65535,!(w<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(N<16)u>>>=w,c-=w,n.lens[n.have++]=N;else{if(N===16){for(S=w+2;c<S;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(u>>>=w,c-=w,n.have===0){t.msg="invalid bit length repeat",n.mode=Cn;break}L=n.lens[n.have-1],p=3+(u&3),u>>>=2,c-=2}else if(N===17){for(S=w+3;c<S;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}u>>>=w,c-=w,L=0,p=3+(u&7),u>>>=3,c-=3}else{for(S=w+7;c<S;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}u>>>=w,c-=w,L=0,p=11+(u&127),u>>>=7,c-=7}if(n.have+p>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Cn;break}for(;p--;)n.lens[n.have++]=L}}if(n.mode===Cn)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Cn;break}if(n.lenbits=9,M={bits:n.lenbits},T=Kh(TN,n.lens,0,n.nlen,n.lencode,0,n.work,M),n.lenbits=M.bits,T){t.msg="invalid literal/lengths set",n.mode=Cn;break}if(n.distbits=6,n.distcode=n.distdyn,M={bits:n.distbits},T=Kh(CN,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,M),n.distbits=M.bits,T){t.msg="invalid distances set",n.mode=Cn;break}if(n.mode=Jd,e===Xd)break e;case Jd:n.mode=Zd;case Zd:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=c,xU(t,m),o=t.next_out,i=t.output,l=t.avail_out,s=t.next_in,r=t.input,a=t.avail_in,u=n.hold,c=n.bits,n.mode===Vo&&(n.back=-1);break}for(n.back=0;C=n.lencode[u&(1<<n.lenbits)-1],w=C>>>24,A=C>>>16&255,N=C&65535,!(w<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(A&&!(A&240)){for(R=w,z=A,Q=N;C=n.lencode[Q+((u&(1<<R+z)-1)>>R)],w=C>>>24,A=C>>>16&255,N=C&65535,!(R+w<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}u>>>=R,c-=R,n.back+=R}if(u>>>=w,c-=w,n.back+=w,n.length=N,A===0){n.mode=_3;break}if(A&32){n.back=-1,n.mode=Vo;break}if(A&64){t.msg="invalid literal/length code",n.mode=Cn;break}n.extra=A&15,n.mode=v3;case v3:if(n.extra){for(S=n.extra;c<S;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=w3;case w3:for(;C=n.distcode[u&(1<<n.distbits)-1],w=C>>>24,A=C>>>16&255,N=C&65535,!(w<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(!(A&240)){for(R=w,z=A,Q=N;C=n.distcode[Q+((u&(1<<R+z)-1)>>R)],w=C>>>24,A=C>>>16&255,N=C&65535,!(R+w<=c);){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}u>>>=R,c-=R,n.back+=R}if(u>>>=w,c-=w,n.back+=w,A&64){t.msg="invalid distance code",n.mode=Cn;break}n.offset=N,n.extra=A&15,n.mode=x3;case x3:if(n.extra){for(S=n.extra;c<S;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Cn;break}n.mode=b3;case b3:if(l===0)break e;if(p=m-l,n.offset>p){if(p=n.offset-p,p>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Cn;break}p>n.wnext?(p-=n.wnext,x=n.wsize-p):x=n.wnext-p,p>n.length&&(p=n.length),E=n.window}else E=i,x=o-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do i[o++]=E[x++];while(--p);n.length===0&&(n.mode=Zd);break;case _3:if(l===0)break e;i[o++]=n.length,l--,n.mode=Zd;break;case Mg:if(n.wrap){for(;c<32;){if(a===0)break e;a--,u|=r[s++]<<c,c+=8}if(m-=l,t.total_out+=m,n.total+=m,n.wrap&4&&m&&(t.adler=n.check=n.flags?lo(n.check,i,m,o-m):G2(n.check,i,m,o-m)),m=l,n.wrap&4&&(n.flags?u:E3(u))!==n.check){t.msg="incorrect data check",n.mode=Cn;break}u=0,c=0}n.mode=S3;case S3:if(n.wrap&&n.flags){for(;c<32;){if(a===0)break e;a--,u+=r[s++]<<c,c+=8}if(n.wrap&4&&u!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Cn;break}u=0,c=0}n.mode=A3;case A3:T=CU;break e;case Cn:T=PN;break e;case IN:return kN;case LN:default:return bs}return t.next_out=o,t.avail_out=l,t.next_in=s,t.avail_in=a,n.hold=u,n.bits=c,(n.wsize||m!==t.avail_out&&n.mode<Cn&&(n.mode<Mg||e!==n3))&&FN(t,t.output,t.next_out,m-t.avail_out),d-=t.avail_in,m-=t.avail_out,t.total_in+=d,t.total_out+=m,n.total+=m,n.wrap&4&&m&&(t.adler=n.check=n.flags?lo(n.check,i,m,t.next_out-m):G2(n.check,i,m,t.next_out-m)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Vo?128:0)+(n.mode===Jd||n.mode===Dg?256:0),(d===0&&m===0||e===n3)&&T===uu&&(T=kU),T},VU=t=>{if(gu(t))return bs;let e=t.state;return e.window&&(e.window=null),t.state=null,uu},BU=(t,e)=>{if(gu(t))return bs;const n=t.state;return n.wrap&2?(n.head=e,e.done=!1,uu):bs},UU=(t,e)=>{const n=e.length;let r,i,s;return gu(t)||(r=t.state,r.wrap!==0&&r.mode!==Nm)?bs:r.mode===Nm&&(i=1,i=G2(i,e,n,0),i!==r.check)?PN:(s=FN(t,e,n,n),s?(r.mode=IN,kN):(r.havedict=1,uu))};var zU=jN,qU=DN,$U=RN,HU=MU,WU=MN,GU=OU,KU=VU,QU=BU,YU=UU,XU="pako inflate (from Nodeca project)",zo={inflateReset:zU,inflateReset2:qU,inflateResetKeep:$U,inflateInit:HU,inflateInit2:WU,inflate:GU,inflateEnd:KU,inflateGetHeader:QU,inflateSetDictionary:YU,inflateInfo:XU};function JU(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ZU=JU;const ON=Object.prototype.toString,{Z_NO_FLUSH:ez,Z_FINISH:tz,Z_OK:jf,Z_STREAM_END:Vg,Z_NEED_DICT:Bg,Z_STREAM_ERROR:nz,Z_DATA_ERROR:T3,Z_MEM_ERROR:rz}=AN;function od(t){this.options=EN.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vU,this.strm.avail_out=0;let n=zo.inflateInit2(this.strm,e.windowBits);if(n!==jf)throw new Error(K2[n]);if(this.header=new ZU,zo.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=Q2.string2buf(e.dictionary):ON.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=zo.inflateSetDictionary(this.strm,e.dictionary),n!==jf)))throw new Error(K2[n])}od.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?tz:ez,ON.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),s=zo.inflate(n,o),s===Bg&&i&&(s=zo.inflateSetDictionary(n,i),s===jf?s=zo.inflate(n,o):s===T3&&(s=Bg));n.avail_in>0&&s===Vg&&n.state.wrap>0&&t[n.next_in]!==0;)zo.inflateReset(n),s=zo.inflate(n,o);switch(s){case nz:case T3:case Bg:case rz:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===Vg))if(this.options.to==="string"){let l=Q2.utf8border(n.output,n.next_out),u=n.next_out-l,c=Q2.buf2string(n.output,l);n.next_out=u,n.avail_out=r-u,u&&n.output.set(n.output.subarray(l,l+u),0),this.onData(c)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===jf&&a===0)){if(s===Vg)return s=zo.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};od.prototype.onData=function(t){this.chunks.push(t)};od.prototype.onEnd=function(t){t===jf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=EN.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function iz(t,e){const n=new od(e);if(n.push(t),n.err)throw n.msg||K2[n.err];return n.result}var sz=od,oz=iz,az={Inflate:sz,inflate:oz};const{Inflate:lz,inflate:uz}=az;var C3=lz,cz=uz;const VN=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;VN[t]=e}const P3=4294967295;function hz(t,e,n){let r=t;for(let i=0;i<n;i++)r=VN[(r^e[i])&255]^r>>>8;return r}function fz(t,e){return(hz(P3,t,e)^P3)>>>0}function k3(t,e,n){const r=t.readUint32(),i=fz(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(i!==r)throw new Error(`CRC mismatch for chunk ${n}. Expected ${r}, found ${i}`)}function BN(t,e,n){for(let r=0;r<n;r++)e[r]=t[r]}function UN(t,e,n,r){let i=0;for(;i<r;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-r]&255}function zN(t,e,n,r){let i=0;if(n.length===0)for(;i<r;i++)e[i]=t[i];else for(;i<r;i++)e[i]=t[i]+n[i]&255}function qN(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+(e[s-i]>>1)&255}else{for(;s<i;s++)e[s]=t[s]+(n[s]>>1)&255;for(;s<r;s++)e[s]=t[s]+(e[s-i]+n[s]>>1)&255}}function $N(t,e,n,r,i){let s=0;if(n.length===0){for(;s<i;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-i]&255}else{for(;s<i;s++)e[s]=t[s]+n[s]&255;for(;s<r;s++)e[s]=t[s]+dz(e[s-i],n[s],n[s-i])&255}}function dz(t,e,n){const r=t+e-n,i=Math.abs(r-t),s=Math.abs(r-e),o=Math.abs(r-n);return i<=s&&i<=o?t:s<=o?e:n}function pz(t,e,n,r,i,s){switch(t){case 0:BN(e,n,i);break;case 1:UN(e,n,i,s);break;case 2:zN(e,n,r,i);break;case 3:qN(e,n,r,i,s);break;case 4:$N(e,n,r,i,s);break;default:throw new Error(`Unsupported filter: ${t}`)}}const mz=new Uint16Array([255]),gz=new Uint8Array(mz.buffer),yz=gz[0]===255;function vz(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(s/8)*i,l=new Uint8Array(r*n*a);let u=0;for(let c=0;c<7;c++){const d=o[c],m=Math.ceil((n-d.x)/d.xStep),p=Math.ceil((r-d.y)/d.yStep);if(m<=0||p<=0)continue;const x=m*a,E=new Uint8Array(x);for(let C=0;C<p;C++){const w=e[u++],A=e.subarray(u,u+x);u+=x;const N=new Uint8Array(x);pz(w,A,N,E,x,a),E.set(N);for(let R=0;R<m;R++){const z=d.x+R*d.xStep,Q=d.y+C*d.yStep;if(!(z>=n||Q>=r))for(let L=0;L<a;L++)l[(Q*n+z)*a+L]=N[R*a+L]}}}if(s===16){const c=new Uint16Array(l.buffer);if(yz)for(let d=0;d<c.length;d++)c[d]=wz(c[d]);return c}else return l}function wz(t){return(t&255)<<8|t>>8&255}const xz=new Uint16Array([255]),bz=new Uint8Array(xz.buffer),_z=bz[0]===255,Sz=new Uint8Array(0);function I3(t){const{data:e,width:n,height:r,channels:i,depth:s}=t,o=Math.ceil(s/8)*i,a=Math.ceil(s/8*i*n),l=new Uint8Array(r*a);let u=Sz,c=0,d,m;for(let p=0;p<r;p++){switch(d=e.subarray(c+1,c+1+a),m=l.subarray(p*a,(p+1)*a),e[c]){case 0:BN(d,m,a);break;case 1:UN(d,m,a,o);break;case 2:zN(d,m,u,a);break;case 3:qN(d,m,u,a,o);break;case 4:$N(d,m,u,a,o);break;default:throw new Error(`Unsupported filter: ${e[c]}`)}u=m,c+=a+1}if(s===16){const p=new Uint16Array(l.buffer);if(_z)for(let x=0;x<p.length;x++)p[x]=Az(p[x]);return p}else return l}function Az(t){return(t&255)<<8|t>>8&255}const Np=Uint8Array.of(137,80,78,71,13,10,26,10);function L3(t){if(!Ez(t.readBytes(Np.length)))throw new Error("wrong PNG signature")}function Ez(t){if(t.length<Np.length)return!1;for(let e=0;e<Np.length;e++)if(t[e]!==Np[e])return!1;return!0}const Nz="tEXt",Tz=0,HN=new TextDecoder("latin1");function Cz(t){if(kz(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const Pz=/^[\u0000-\u00FF]*$/;function kz(t){if(!Pz.test(t))throw new Error("invalid latin1 text")}function Iz(t,e,n){const r=WN(e);t[r]=Lz(e,n-r.length-1)}function WN(t){for(t.mark();t.readByte()!==Tz;);const e=t.offset;t.reset();const n=HN.decode(t.readBytes(e-t.offset-1));return t.skip(1),Cz(n),n}function Lz(t,e){return HN.decode(t.readBytes(e))}const Ki={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},Ug={UNKNOWN:-1,DEFLATE:0},R3={UNKNOWN:-1,ADAPTIVE:0},zg={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},ep={NONE:0,BACKGROUND:1,PREVIOUS:2},qg={SOURCE:0,OVER:1};class Rz extends A5{constructor(n,r={}){super(n);sn(this,"_checkCrc");sn(this,"_inflator");sn(this,"_png");sn(this,"_apng");sn(this,"_end");sn(this,"_hasPalette");sn(this,"_palette");sn(this,"_hasTransparency");sn(this,"_transparency");sn(this,"_compressionMethod");sn(this,"_filterMethod");sn(this,"_interlaceMethod");sn(this,"_colorType");sn(this,"_isAnimated");sn(this,"_numberOfFrames");sn(this,"_numberOfPlays");sn(this,"_frames");sn(this,"_writingDataChunks");const{checkCrc:i=!1}=r;this._checkCrc=i,this._inflator=new C3,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=Ug.UNKNOWN,this._filterMethod=R3.UNKNOWN,this._interlaceMethod=zg.UNKNOWN,this._colorType=Ki.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(L3(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeChunk(n,r)}return this.decodeImage(),this._png}decodeApng(){for(L3(this);!this._end;){const n=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(n,r)}return this.decodeApngImage(),this._apng}decodeChunk(n,r){const i=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case Nz:Iz(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?k3(this,n+4,r):this.skip(4)}decodeApngChunk(n,r){const i=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,r),this.offset=i+n;break}if(this.offset-i!==n)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?k3(this,n+4,r):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=jz(this.readUint8());const r=this.readUint8();this._colorType=r;let i;switch(r){case Ki.GREYSCALE:i=1;break;case Ki.TRUECOLOUR:i=3;break;case Ki.INDEXED_COLOUR:i=1;break;case Ki.GREYSCALE_ALPHA:i=2;break;case Ki.TRUECOLOUR_ALPHA:i=4;break;case Ki.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==Ug.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const r=n/3;this._hasPalette=!0;const i=[];this._palette=i;for(let s=0;s<r;s++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const r=n,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let r=n,i=this.offset+this.byteOffset;if(i+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,i,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case Ki.GREYSCALE:case Ki.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let r=0;r<n/2;r++)this._transparency[r]=this.readUint16();break}case Ki.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let r=0;for(;r<n;r++){const i=this.readByte();this._palette[r].push(i)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Ki.UNKNOWN:case Ki.GREYSCALE_ALPHA:case Ki.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const r=WN(this),i=this.readUint8();if(i!==Ug.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const s=this.readBytes(n-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:cz(s)}}decodepHYs(){const n=this.readUint32(),r=this.readUint32(),i=this.readByte();this._png.resolution={x:n,y:r,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const r={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(n);if(i){if(i.data=I3({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)r.data=i.data;else{const s=this._apng.frames.at(n-1);this.disposeFrame(i,s,r),this.addFrameDataToCanvas(r,i)}this._apng.frames.push(r)}}return this._apng}disposeFrame(n,r,i){switch(n.disposeOp){case ep.NONE:break;case ep.BACKGROUND:for(let s=0;s<this._png.height;s++)for(let o=0;o<this._png.width;o++){const a=(s*n.width+o)*this._png.channels;for(let l=0;l<this._png.channels;l++)i.data[a+l]=0}break;case ep.PREVIOUS:i.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,r){const i=1<<this._png.depth,s=(o,a)=>{const l=((o+r.yOffset)*this._png.width+r.xOffset+a)*this._png.channels,u=(o*r.width+a)*this._png.channels;return{index:l,frameIndex:u}};switch(r.blendOp){case qg.SOURCE:for(let o=0;o<r.height;o++)for(let a=0;a<r.width;a++){const{index:l,frameIndex:u}=s(o,a);for(let c=0;c<this._png.channels;c++)n.data[l+c]=r.data[u+c]}break;case qg.OVER:for(let o=0;o<r.height;o++)for(let a=0;a<r.width;a++){const{index:l,frameIndex:u}=s(o,a);for(let c=0;c<this._png.channels;c++){const d=r.data[u+this._png.channels-1]/i,m=c%(this._png.channels-1)===0?1:r.data[u+c],p=Math.floor(d*m+(1-d)*n.data[l+c]);n.data[l+c]+=p}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var r;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?((r=this._frames)==null?void 0:r.at(0)).data:this._inflator.result;if(this._filterMethod!==R3.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===zg.NO_INTERLACE)this._png.data=I3({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===zg.ADAM7)this._png.data=vz({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,r=this._frames.at(-1);r?r.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:ep.NONE,blendOp:qg.SOURCE,data:n}),this._inflator=new C3,this._writingDataChunks=!1}}function jz(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var j3;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(j3||(j3={}));function Dz(t,e){return new Rz(t,e).decode()}var vt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function $g(){vt.console&&typeof vt.console.log=="function"&&vt.console.log.apply(vt.console,arguments)}var dn={log:$g,warn:function(t){vt.console&&(typeof vt.console.warn=="function"?vt.console.warn.apply(vt.console,arguments):$g.call(null,arguments))},error:function(t){vt.console&&(typeof vt.console.error=="function"?vt.console.error.apply(vt.console,arguments):$g(t))}};function Hg(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Vl(r.response,e,n)},r.onerror=function(){dn.error("could not download file")},r.send()}function D3(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function tp(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Vl=vt.saveAs||((typeof window>"u"?"undefined":an(window))!=="object"||window!==vt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=vt.URL||vt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?D3(i.href)?Hg(t,e,n):tp(i,i.target="_blank"):tp(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){tp(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(D3(t))Hg(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){tp(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:an(s)!=="object"&&(dn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return Hg(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(vt.HTMLElement)||vt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":an(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var c=a.result;c=o?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},a.readAsDataURL(t)}else{var l=vt.URL||vt.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function GN(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}var Tp=vt.atob.bind(vt),M3=vt.btoa.bind(vt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Wg(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Qr(n,r,i,s,e[0],7,-680876936),s=Qr(s,n,r,i,e[1],12,-389564586),i=Qr(i,s,n,r,e[2],17,606105819),r=Qr(r,i,s,n,e[3],22,-1044525330),n=Qr(n,r,i,s,e[4],7,-176418897),s=Qr(s,n,r,i,e[5],12,1200080426),i=Qr(i,s,n,r,e[6],17,-1473231341),r=Qr(r,i,s,n,e[7],22,-45705983),n=Qr(n,r,i,s,e[8],7,1770035416),s=Qr(s,n,r,i,e[9],12,-1958414417),i=Qr(i,s,n,r,e[10],17,-42063),r=Qr(r,i,s,n,e[11],22,-1990404162),n=Qr(n,r,i,s,e[12],7,1804603682),s=Qr(s,n,r,i,e[13],12,-40341101),i=Qr(i,s,n,r,e[14],17,-1502002290),n=Yr(n,r=Qr(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Yr(s,n,r,i,e[6],9,-1069501632),i=Yr(i,s,n,r,e[11],14,643717713),r=Yr(r,i,s,n,e[0],20,-373897302),n=Yr(n,r,i,s,e[5],5,-701558691),s=Yr(s,n,r,i,e[10],9,38016083),i=Yr(i,s,n,r,e[15],14,-660478335),r=Yr(r,i,s,n,e[4],20,-405537848),n=Yr(n,r,i,s,e[9],5,568446438),s=Yr(s,n,r,i,e[14],9,-1019803690),i=Yr(i,s,n,r,e[3],14,-187363961),r=Yr(r,i,s,n,e[8],20,1163531501),n=Yr(n,r,i,s,e[13],5,-1444681467),s=Yr(s,n,r,i,e[2],9,-51403784),i=Yr(i,s,n,r,e[7],14,1735328473),n=Xr(n,r=Yr(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Xr(s,n,r,i,e[8],11,-2022574463),i=Xr(i,s,n,r,e[11],16,1839030562),r=Xr(r,i,s,n,e[14],23,-35309556),n=Xr(n,r,i,s,e[1],4,-1530992060),s=Xr(s,n,r,i,e[4],11,1272893353),i=Xr(i,s,n,r,e[7],16,-155497632),r=Xr(r,i,s,n,e[10],23,-1094730640),n=Xr(n,r,i,s,e[13],4,681279174),s=Xr(s,n,r,i,e[0],11,-358537222),i=Xr(i,s,n,r,e[3],16,-722521979),r=Xr(r,i,s,n,e[6],23,76029189),n=Xr(n,r,i,s,e[9],4,-640364487),s=Xr(s,n,r,i,e[12],11,-421815835),i=Xr(i,s,n,r,e[15],16,530742520),n=Jr(n,r=Xr(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Jr(s,n,r,i,e[7],10,1126891415),i=Jr(i,s,n,r,e[14],15,-1416354905),r=Jr(r,i,s,n,e[5],21,-57434055),n=Jr(n,r,i,s,e[12],6,1700485571),s=Jr(s,n,r,i,e[3],10,-1894986606),i=Jr(i,s,n,r,e[10],15,-1051523),r=Jr(r,i,s,n,e[1],21,-2054922799),n=Jr(n,r,i,s,e[8],6,1873313359),s=Jr(s,n,r,i,e[15],10,-30611744),i=Jr(i,s,n,r,e[6],15,-1560198380),r=Jr(r,i,s,n,e[13],21,1309151649),n=Jr(n,r,i,s,e[4],6,-145523070),s=Jr(s,n,r,i,e[11],10,-1120210379),i=Jr(i,s,n,r,e[2],15,718787259),r=Jr(r,i,s,n,e[9],21,-343485551),t[0]=Ba(n,t[0]),t[1]=Ba(r,t[1]),t[2]=Ba(i,t[2]),t[3]=Ba(s,t[3])}function m0(t,e,n,r,i,s){return e=Ba(Ba(e,t),Ba(r,s)),Ba(e<<i|e>>>32-i,n)}function Qr(t,e,n,r,i,s,o){return m0(e&n|~e&r,t,e,i,s,o)}function Yr(t,e,n,r,i,s,o){return m0(e&r|n&~r,t,e,i,s,o)}function Xr(t,e,n,r,i,s,o){return m0(e^n^r,t,e,i,s,o)}function Jr(t,e,n,r,i,s,o){return m0(n^(e|~r),t,e,i,s,o)}function KN(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Wg(r,Mz(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Wg(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,Wg(r,i),r}function Mz(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var F3="0123456789abcdef".split("");function Fz(t){for(var e="",n=0;n<4;n++)e+=F3[t>>8*n+4&15]+F3[t>>8*n&15];return e}function Oz(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Y2(t){return KN(t).map(Oz).join("")}var Vz=function(t){for(var e=0;e<t.length;e++)t[e]=Fz(t[e]);return t.join("")}(KN("hello"))!="5d41402abc4b2a76b9719d911017c592";function Ba(t,e){if(Vz){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function X2(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length|0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var c=a[l];u=(u+c+o.charCodeAt(l))%256,a[l]=a[u],a[u]=c}n=t,r=a}else a=r;var d=e.length,m=0,p=0,x="";for(l=0;l<d;l++)p=(p+(c=a[m=(m+1)%256]))%256,a[m]=a[p],a[p]=c,o=a[(a[m]+a[p])%256],x+=String.fromCharCode(e.charCodeAt(l)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var O3={print:4,modify:8,copy:16,"annot-forms":32};function Iu(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(O3.perm!==void 0)throw new Error("Invalid permission: "+a);i+=O3[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Y2(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=X2(this.encryptionKey,this.padding)}function Lu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);e+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):t[r]}return e}function V3(t){if(an(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){vt.console&&dn.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Tm(t){if(!(this instanceof Tm))return new Tm(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function QN(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Bl(t,e,n,r,i){if(!(this instanceof Bl))return new Bl(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,QN.call(this,r,i)}function Xu(t,e,n,r,i){if(!(this instanceof Xu))return new Xu(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,QN.call(this,r,i)}function it(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",c=null;an(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(c=t.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=V3;var x="1.3",E=p.__private__.getPdfVersion=function(){return x};p.__private__.setPdfVersion=function(v){x=v};var C={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return C};var w=p.__private__.getPageFormat=function(v){return C[v]};i=i||"a4";var A="compat",N="advanced",R=A;function z(){this.saveGraphicsState(),J(new lt(ht,0,0,-ht,0,as()*ht).toString()+" cm"),this.setFontSize(this.getFontSize()/ht),u="n",R=N}function Q(){this.restoreGraphicsState(),u="S",R=A}var L=p.__private__.combineFontStyleAndFontWeight=function(v,F){if(v=="bold"&&F=="normal"||v=="bold"&&F==400||v=="normal"&&F=="italic"||v=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(v=F==400||F==="normal"?v==="italic"?"italic":"normal":F!=700&&F!=="bold"||v!=="normal"?(F==700?"bold":F)+""+v:"bold"),v};p.advancedAPI=function(v){var F=R===A;return F&&z.call(this),typeof v!="function"||(v(this),F&&Q.call(this)),this},p.compatAPI=function(v){var F=R===N;return F&&Q.call(this),typeof v!="function"||(v(this),F&&z.call(this)),this},p.isAdvancedAPI=function(){return R===N};var T,k=function(v){if(R!==N)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},M=p.roundToPrecision=p.__private__.roundToPrecision=function(v,F){var Z=e||F;if(isNaN(v)||isNaN(Z))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(Z).replace(/0+$/,"")};T=p.hpf=p.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return M(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return M(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return M(v,16)};var S=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return M(v,2)},P=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return M(v,3)},j=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return R===A?v*ht:R===N?v:void 0},B=function(v){return j(function(F){return R===A?as()-F:R===N?F:void 0}(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var X,se="00000000000000000000000000000000",re=p.__private__.getFileId=function(){return se},$=p.__private__.setFileId=function(v){return se=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(en=new Iu(c.userPermissions,c.userPassword,c.ownerPassword,se)),se};p.setFileId=function(v){return $(v),this},p.getFileId=function(){return re()};var ae=p.__private__.convertDateToPDFDate=function(v){var F=v.getTimezoneOffset(),Z=F<0?"+":"-",le=Math.floor(Math.abs(F/60)),de=Math.abs(F%60),Ne=[Z,ie(le),"'",ie(de),"'"].join("");return["D:",v.getFullYear(),ie(v.getMonth()+1),ie(v.getDate()),ie(v.getHours()),ie(v.getMinutes()),ie(v.getSeconds()),Ne].join("")},fe=p.__private__.convertPDFDateToDate=function(v){var F=parseInt(v.substr(2,4),10),Z=parseInt(v.substr(6,2),10)-1,le=parseInt(v.substr(8,2),10),de=parseInt(v.substr(10,2),10),Ne=parseInt(v.substr(12,2),10),Le=parseInt(v.substr(14,2),10);return new Date(F,Z,le,de,Ne,Le,0)},ve=p.__private__.setCreationDate=function(v){var F;if(v===void 0&&(v=new Date),v instanceof Date)F=ae(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=v}return X=F},V=p.__private__.getCreationDate=function(v){var F=X;return v==="jsDate"&&(F=fe(X)),F};p.setCreationDate=function(v){return ve(v),this},p.getCreationDate=function(v){return V(v)};var Y,ie=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},ne=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},oe=0,ue=[],we=[],be=0,Se=[],Re=[],Ae=!1,Pe=we;p.__private__.setCustomOutputDestination=function(v){Ae=!0,Pe=v};var ge=function(v){Ae||(Pe=v)};p.__private__.resetCustomOutputDestination=function(){Ae=!1,Pe=we};var J=p.__private__.out=function(v){return v=v.toString(),be+=v.length+1,Pe.push(v),Pe},Ke=p.__private__.write=function(v){return J(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},ot=p.__private__.getArrayBuffer=function(v){for(var F=v.length,Z=new ArrayBuffer(F),le=new Uint8Array(Z);F--;)le[F]=v.charCodeAt(F);return Z},Ue=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ue};var Ie=t.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return Ie=R===N?v/ht:v,this};var ze,Be=p.__private__.getFontSize=p.getFontSize=function(){return R===A?Ie:Ie*ht},_t=t.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return _t=v,this},p.__private__.getR2L=p.getR2L=function(){return _t};var tt,Ot=p.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))ze=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');ze=v}else ze=parseInt(v,10)};p.__private__.getZoomMode=function(){return ze};var wt,et=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');tt=v};p.__private__.getPageMode=function(){return tt};var St=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');wt=v};p.__private__.getLayoutMode=function(){return wt},p.__private__.setDisplayMode=p.setDisplayMode=function(v,F,Z){return Ot(v),St(F),et(Z),this};var mt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(mt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return mt[v]},p.__private__.getDocumentProperties=function(){return mt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var F in mt)mt.hasOwnProperty(F)&&v[F]&&(mt[F]=v[F]);return this},p.__private__.setDocumentProperty=function(v,F){if(Object.keys(mt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return mt[v]=F};var nt,ht,st,Kt,Ut,Xe={},gt={},Zt=[],ut={},kt={},xt={},En={},vn=null,Yt=0,ft=[],Lt=new V3(p),Hs=t.hotfixes||[],Yn={},rs={},Ur=[],lt=function v(F,Z,le,de,Ne,Le){if(!(this instanceof v))return new v(F,Z,le,de,Ne,Le);isNaN(F)&&(F=1),isNaN(Z)&&(Z=0),isNaN(le)&&(le=0),isNaN(de)&&(de=1),isNaN(Ne)&&(Ne=0),isNaN(Le)&&(Le=0),this._matrix=[F,Z,le,de,Ne,Le]};Object.defineProperty(lt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(lt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(lt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(lt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(lt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(lt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(lt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(lt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(lt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(lt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(lt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(lt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(lt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(lt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(lt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(lt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),lt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(v)},lt.prototype.multiply=function(v){var F=v.sx*this.sx+v.shy*this.shx,Z=v.sx*this.shy+v.shy*this.sy,le=v.shx*this.sx+v.sy*this.shx,de=v.shx*this.shy+v.sy*this.sy,Ne=v.tx*this.sx+v.ty*this.shx+this.tx,Le=v.tx*this.shy+v.ty*this.sy+this.ty;return new lt(F,Z,le,de,Ne,Le)},lt.prototype.decompose=function(){var v=this.sx,F=this.shy,Z=this.shx,le=this.sy,de=this.tx,Ne=this.ty,Le=Math.sqrt(v*v+F*F),$e=(v/=Le)*Z+(F/=Le)*le;Z-=v*$e,le-=F*$e;var Qe=Math.sqrt(Z*Z+le*le);return $e/=Qe,v*(le/=Qe)<F*(Z/=Qe)&&(v=-v,F=-F,$e=-$e,Le=-Le),{scale:new lt(Le,0,0,Qe,0,0),translate:new lt(1,0,0,1,de,Ne),rotate:new lt(v,F,-F,v,0,0),skew:new lt(1,0,$e,1,0,0)}},lt.prototype.toString=function(v){return this.join(" ")},lt.prototype.inversed=function(){var v=this.sx,F=this.shy,Z=this.shx,le=this.sy,de=this.tx,Ne=this.ty,Le=1/(v*le-F*Z),$e=le*Le,Qe=-F*Le,ct=-Z*Le,yt=v*Le;return new lt($e,Qe,ct,yt,-$e*de-ct*Ne,-Qe*de-yt*Ne)},lt.prototype.applyToPoint=function(v){var F=v.x*this.sx+v.y*this.shx+this.tx,Z=v.x*this.shy+v.y*this.sy+this.ty;return new to(F,Z)},lt.prototype.applyToRectangle=function(v){var F=this.applyToPoint(v),Z=this.applyToPoint(new to(v.x+v.w,v.y+v.h));return new fa(F.x,F.y,Z.x-F.x,Z.y-F.y)},lt.prototype.clone=function(){var v=this.sx,F=this.shy,Z=this.shx,le=this.sy,de=this.tx,Ne=this.ty;return new lt(v,F,Z,le,de,Ne)},p.Matrix=lt;var wn=p.matrixMult=function(v,F){return F.multiply(v)},is=new lt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=is;var xr=function(v,F){if(!kt[v]){var Z=(F instanceof Bl?"Sh":"P")+(Object.keys(ut).length+1).toString(10);F.id=Z,kt[v]=Z,ut[Z]=F,Lt.publish("addPattern",F)}};p.ShadingPattern=Bl,p.TilingPattern=Xu,p.addShadingPattern=function(v,F){return k("addShadingPattern()"),xr(v,F),this},p.beginTilingPattern=function(v){k("beginTilingPattern()"),no(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,F){k("endTilingPattern()"),F.stream=Re[Y].join(`
`),xr(v,F),Lt.publish("endTilingPattern",F),Ur.pop().restore()};var br,Nn=p.__private__.newObject=function(){var v=ur();return Tn(v,!0),v},ur=p.__private__.newObjectDeferred=function(){return oe++,ue[oe]=function(){return be},oe},Tn=function(v,F){return F=typeof F=="boolean"&&F,ue[v]=be,F&&J(v+" 0 obj"),v},Ao=p.__private__.newAdditionalObject=function(){var v={objId:ur(),content:""};return Se.push(v),v},Ws=ur(),zr=ur(),ji=p.__private__.decodeColorString=function(v){var F=v.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length!==5||F[4]!=="k"&&F[4]!=="K"||(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var Z=parseFloat(F[0]);F=[Z,Z,Z,"r"]}for(var le="#",de=0;de<3;de++)le+=("0"+Math.floor(255*parseFloat(F[de])).toString(16)).slice(-2);return le},si=p.__private__.encodeColorString=function(v){var F;typeof v=="string"&&(v={ch1:v});var Z=v.ch1,le=v.ch2,de=v.ch3,Ne=v.ch4,Le=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Z=="string"&&Z.charAt(0)!=="#"){var $e=new GN(Z);if($e.ok)Z=$e.toHex();else if(!/^\d*\.?\d*$/.test(Z))throw new Error('Invalid color "'+Z+'" passed to jsPDF.encodeColorString.')}if(typeof Z=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Z)&&(Z="#"+Z[1]+Z[1]+Z[2]+Z[2]+Z[3]+Z[3]),typeof Z=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Z)){var Qe=parseInt(Z.substr(1),16);Z=Qe>>16&255,le=Qe>>8&255,de=255&Qe}if(le===void 0||Ne===void 0&&Z===le&&le===de)F=typeof Z=="string"?Z+" "+Le[0]:v.precision===2?S(Z/255)+" "+Le[0]:P(Z/255)+" "+Le[0];else if(Ne===void 0||an(Ne)==="object"){if(Ne&&!isNaN(Ne.a)&&Ne.a===0)return["1.","1.","1.",Le[1]].join(" ");F=typeof Z=="string"?[Z,le,de,Le[1]].join(" "):v.precision===2?[S(Z/255),S(le/255),S(de/255),Le[1]].join(" "):[P(Z/255),P(le/255),P(de/255),Le[1]].join(" ")}else F=typeof Z=="string"?[Z,le,de,Ne,Le[2]].join(" "):v.precision===2?[S(Z),S(le),S(de),S(Ne),Le[2]].join(" "):[P(Z),P(le),P(de),P(Ne),Le[2]].join(" ");return F},qr=p.__private__.getFilters=function(){return o},Xn=p.__private__.putStream=function(v){var F=(v=v||{}).data||"",Z=v.filters||qr(),le=v.alreadyAppliedFilters||[],de=v.addLength1||!1,Ne=F.length,Le=v.objectId,$e=function(Bn){return Bn};if(c!==null&&Le===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&($e=en.encryptor(Le,0));var Qe={};Z===!0&&(Z=["FlateEncode"]);var ct=v.additionalKeyValues||[],yt=(Qe=it.API.processDataByFilters!==void 0?it.API.processDataByFilters(F,Z):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(le)?le.join(" "):le.toString());if(Qe.data.length!==0&&(ct.push({key:"Length",value:Qe.data.length}),de===!0&&ct.push({key:"Length1",value:Ne})),yt.length!=0)if(yt.split("/").length-1==1)ct.push({key:"Filter",value:yt});else{ct.push({key:"Filter",value:"["+yt+"]"});for(var zt=0;zt<ct.length;zt+=1)if(ct[zt].key==="DecodeParms"){for(var Xt=[],In=0;In<Qe.reverseChain.split("/").length-1;In+=1)Xt.push("null");Xt.push(ct[zt].value),ct[zt].value="["+Xt.join(" ")+"]"}}J("<<");for(var tn=0;tn<ct.length;tn++)J("/"+ct[tn].key+" "+ct[tn].value);J(">>"),Qe.data.length!==0&&(J("stream"),J($e(Qe.data)),J("endstream"))},Gs=p.__private__.putPage=function(v){var F=v.number,Z=v.data,le=v.objId,de=v.contentsObjId;Tn(le,!0),J("<</Type /Page"),J("/Parent "+v.rootDictionaryObjId+" 0 R"),J("/Resources "+v.resourceDictionaryObjId+" 0 R"),J("/MediaBox ["+parseFloat(T(v.mediaBox.bottomLeftX))+" "+parseFloat(T(v.mediaBox.bottomLeftY))+" "+T(v.mediaBox.topRightX)+" "+T(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&J("/CropBox ["+T(v.cropBox.bottomLeftX)+" "+T(v.cropBox.bottomLeftY)+" "+T(v.cropBox.topRightX)+" "+T(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&J("/BleedBox ["+T(v.bleedBox.bottomLeftX)+" "+T(v.bleedBox.bottomLeftY)+" "+T(v.bleedBox.topRightX)+" "+T(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&J("/TrimBox ["+T(v.trimBox.bottomLeftX)+" "+T(v.trimBox.bottomLeftY)+" "+T(v.trimBox.topRightX)+" "+T(v.trimBox.topRightY)+"]"),v.artBox!==null&&J("/ArtBox ["+T(v.artBox.bottomLeftX)+" "+T(v.artBox.bottomLeftY)+" "+T(v.artBox.topRightX)+" "+T(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&J("/UserUnit "+v.userUnit),Lt.publish("putPage",{objId:le,pageContext:ft[F],pageNumber:F,page:Z}),J("/Contents "+de+" 0 R"),J(">>"),J("endobj");var Ne=Z.join(`
`);return R===N&&(Ne+=`
Q`),Tn(de,!0),Xn({data:Ne,filters:qr(),objectId:de}),J("endobj"),le},Di=p.__private__.putPages=function(){var v,F,Z=[];for(v=1;v<=Yt;v++)ft[v].objId=ur(),ft[v].contentsObjId=ur();for(v=1;v<=Yt;v++)Z.push(Gs({number:v,data:Re[v],objId:ft[v].objId,contentsObjId:ft[v].contentsObjId,mediaBox:ft[v].mediaBox,cropBox:ft[v].cropBox,bleedBox:ft[v].bleedBox,trimBox:ft[v].trimBox,artBox:ft[v].artBox,userUnit:ft[v].userUnit,rootDictionaryObjId:Ws,resourceDictionaryObjId:zr}));Tn(Ws,!0),J("<</Type /Pages");var le="/Kids [";for(F=0;F<Yt;F++)le+=Z[F]+" 0 R ";J(le+"]"),J("/Count "+Yt),J(">>"),J("endobj"),Lt.publish("postPutPages")},_s=function(v){Lt.publish("putFont",{font:v,out:J,newObject:Nn,putStream:Xn}),v.isAlreadyPutted!==!0&&(v.objectNumber=Nn(),J("<<"),J("/Type /Font"),J("/BaseFont /"+Lu(v.postScriptName)),J("/Subtype /Type1"),typeof v.encoding=="string"&&J("/Encoding /"+v.encoding),J("/FirstChar 32"),J("/LastChar 255"),J(">>"),J("endobj"))},Ks=function(v){v.objectNumber=Nn();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[T(v.x),T(v.y),T(v.x+v.width),T(v.y+v.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var Z=v.pages[1].join(`
`);Xn({data:Z,additionalKeyValues:F,objectId:v.objectNumber}),J("endobj")},Eo=function(v,F){F||(F=21);var Z=Nn(),le=function(Le,$e){var Qe,ct=[],yt=1/($e-1);for(Qe=0;Qe<1;Qe+=yt)ct.push(Qe);if(ct.push(1),Le[0].offset!=0){var zt={offset:0,color:Le[0].color};Le.unshift(zt)}if(Le[Le.length-1].offset!=1){var Xt={offset:1,color:Le[Le.length-1].color};Le.push(Xt)}for(var In="",tn=0,Bn=0;Bn<ct.length;Bn++){for(Qe=ct[Bn];Qe>Le[tn+1].offset;)tn++;var Ln=Le[tn].offset,Un=(Qe-Ln)/(Le[tn+1].offset-Ln),pn=Le[tn].color,Cr=Le[tn+1].color;In+=ne(Math.round((1-Un)*pn[0]+Un*Cr[0]).toString(16))+ne(Math.round((1-Un)*pn[1]+Un*Cr[1]).toString(16))+ne(Math.round((1-Un)*pn[2]+Un*Cr[2]).toString(16))}return In.trim()}(v.colors,F),de=[];de.push({key:"FunctionType",value:"0"}),de.push({key:"Domain",value:"[0.0 1.0]"}),de.push({key:"Size",value:"["+F+"]"}),de.push({key:"BitsPerSample",value:"8"}),de.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),de.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Xn({data:le,additionalKeyValues:de,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Z}),J("endobj"),v.objectNumber=Nn(),J("<< /ShadingType "+v.type),J("/ColorSpace /DeviceRGB");var Ne="/Coords ["+T(parseFloat(v.coords[0]))+" "+T(parseFloat(v.coords[1]))+" ";v.type===2?Ne+=T(parseFloat(v.coords[2]))+" "+T(parseFloat(v.coords[3])):Ne+=T(parseFloat(v.coords[2]))+" "+T(parseFloat(v.coords[3]))+" "+T(parseFloat(v.coords[4]))+" "+T(parseFloat(v.coords[5])),J(Ne+="]"),v.matrix&&J("/Matrix ["+v.matrix.toString()+"]"),J("/Function "+Z+" 0 R"),J("/Extend [true true]"),J(">>"),J("endobj")},No=function(v,F){var Z=ur(),le=Nn();F.push({resourcesOid:Z,objectOid:le}),v.objectNumber=le;var de=[];de.push({key:"Type",value:"/Pattern"}),de.push({key:"PatternType",value:"1"}),de.push({key:"PaintType",value:"1"}),de.push({key:"TilingType",value:"1"}),de.push({key:"BBox",value:"["+v.boundingBox.map(T).join(" ")+"]"}),de.push({key:"XStep",value:T(v.xStep)}),de.push({key:"YStep",value:T(v.yStep)}),de.push({key:"Resources",value:Z+" 0 R"}),v.matrix&&de.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Xn({data:v.stream,additionalKeyValues:de,objectId:v.objectNumber}),J("endobj")},Uc=function(v){for(var F in v.objectNumber=Nn(),J("<<"),v)switch(F){case"opacity":J("/ca "+S(v[F]));break;case"stroke-opacity":J("/CA "+S(v[F]))}J(">>"),J("endobj")},Qs=function(v){Tn(v.resourcesOid,!0),J("<<"),J("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var F in J("/Font <<"),Xe)Xe.hasOwnProperty(F)&&(d===!1||d===!0&&m.hasOwnProperty(F))&&J("/"+F+" "+Xe[F].objectNumber+" 0 R");J(">>")}(),function(){if(Object.keys(ut).length>0){for(var F in J("/Shading <<"),ut)ut.hasOwnProperty(F)&&ut[F]instanceof Bl&&ut[F].objectNumber>=0&&J("/"+F+" "+ut[F].objectNumber+" 0 R");Lt.publish("putShadingPatternDict"),J(">>")}}(),function(F){if(Object.keys(ut).length>0){for(var Z in J("/Pattern <<"),ut)ut.hasOwnProperty(Z)&&ut[Z]instanceof p.TilingPattern&&ut[Z].objectNumber>=0&&ut[Z].objectNumber<F&&J("/"+Z+" "+ut[Z].objectNumber+" 0 R");Lt.publish("putTilingPatternDict"),J(">>")}}(v.objectOid),function(){if(Object.keys(xt).length>0){var F;for(F in J("/ExtGState <<"),xt)xt.hasOwnProperty(F)&&xt[F].objectNumber>=0&&J("/"+F+" "+xt[F].objectNumber+" 0 R");Lt.publish("putGStateDict"),J(">>")}}(),function(){for(var F in J("/XObject <<"),Yn)Yn.hasOwnProperty(F)&&Yn[F].objectNumber>=0&&J("/"+F+" "+Yn[F].objectNumber+" 0 R");Lt.publish("putXobjectDict"),J(">>")}(),J(">>"),J("endobj")},ml=function(v){gt[v.fontName]=gt[v.fontName]||{},gt[v.fontName][v.fontStyle]=v.id},sa=function(v,F,Z,le,de){var Ne={id:"F"+(Object.keys(Xe).length+1).toString(10),postScriptName:v,fontName:F,fontStyle:Z,encoding:le,isStandardFont:de||!1,metadata:{}};return Lt.publish("addFont",{font:Ne,instance:this}),Xe[Ne.id]=Ne,ml(Ne),Ne.id},_r=p.__private__.pdfEscape=p.pdfEscape=function(v,F){return function(Z,le){var de,Ne,Le,$e,Qe,ct,yt,zt,Xt;if(Le=(le=le||{}).sourceEncoding||"Unicode",Qe=le.outputEncoding,(le.autoencode||Qe)&&Xe[nt].metadata&&Xe[nt].metadata[Le]&&Xe[nt].metadata[Le].encoding&&($e=Xe[nt].metadata[Le].encoding,!Qe&&Xe[nt].encoding&&(Qe=Xe[nt].encoding),!Qe&&$e.codePages&&(Qe=$e.codePages[0]),typeof Qe=="string"&&(Qe=$e[Qe]),Qe)){for(yt=!1,ct=[],de=0,Ne=Z.length;de<Ne;de++)(zt=Qe[Z.charCodeAt(de)])?ct.push(String.fromCharCode(zt)):ct.push(Z[de]),ct[de].charCodeAt(0)>>8&&(yt=!0);Z=ct.join("")}for(de=Z.length;yt===void 0&&de!==0;)Z.charCodeAt(de-1)>>8&&(yt=!0),de--;if(!yt)return Z;for(ct=le.noBOM?[]:[254,255],de=0,Ne=Z.length;de<Ne;de++){if((Xt=(zt=Z.charCodeAt(de))>>8)>>8)throw new Error("Character at position "+de+" of string '"+Z+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");ct.push(Xt),ct.push(zt-(Xt<<8))}return String.fromCharCode.apply(void 0,ct)}(v,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Mi=p.__private__.beginPage=function(v){Re[++Yt]=[],ft[Yt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},yl(Yt),ge(Re[Y])},oa=function(v,F){var Z,le,de;switch(n=F||n,typeof v=="string"&&(Z=w(v.toLowerCase()),Array.isArray(Z)&&(le=Z[0],de=Z[1])),Array.isArray(v)&&(le=v[0]*ht,de=v[1]*ht),isNaN(le)&&(le=i[0],de=i[1]),(le>14400||de>14400)&&(dn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),le=Math.min(14400,le),de=Math.min(14400,de)),i=[le,de],n.substr(0,1)){case"l":de>le&&(i=[de,le]);break;case"p":le>de&&(i=[de,le])}Mi(i),eo(ua),J(Es),cn!==0&&J(cn+" J"),El!==0&&J(El+" j"),Lt.publish("addPage",{pageNumber:Yt})},gl=function(v){v>0&&v<=Yt&&(Re.splice(v,1),ft.splice(v,1),Yt--,Y>Yt&&(Y=Yt),this.setPage(Y))},yl=function(v){v>0&&v<=Yt&&(Y=v)},vl=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Re.length-1},wl=function(v,F,Z){var le,de=void 0;return Z=Z||{},v=v!==void 0?v:Xe[nt].fontName,F=F!==void 0?F:Xe[nt].fontStyle,le=v.toLowerCase(),gt[le]!==void 0&&gt[le][F]!==void 0?de=gt[le][F]:gt[v]!==void 0&&gt[v][F]!==void 0?de=gt[v][F]:Z.disableWarning===!1&&dn.warn("Unable to look up font label for font '"+v+"', '"+F+"'. Refer to getFontList() for available fonts."),de||Z.noFallback||(de=gt.times[F])==null&&(de=gt.times.normal),de},Ys=p.__private__.putInfo=function(){var v=Nn(),F=function(le){return le};for(var Z in c!==null&&(F=en.encryptor(v,0)),J("<<"),J("/Producer ("+_r(F("jsPDF "+it.version))+")"),mt)mt.hasOwnProperty(Z)&&mt[Z]&&J("/"+Z.substr(0,1).toUpperCase()+Z.substr(1)+" ("+_r(F(mt[Z]))+")");J("/CreationDate ("+_r(F(X))+")"),J(">>"),J("endobj")},xl=p.__private__.putCatalog=function(v){var F=(v=v||{}).rootDictionaryObjId||Ws;switch(Nn(),J("<<"),J("/Type /Catalog"),J("/Pages "+F+" 0 R"),ze||(ze="fullwidth"),ze){case"fullwidth":J("/OpenAction [3 0 R /FitH null]");break;case"fullheight":J("/OpenAction [3 0 R /FitV null]");break;case"fullpage":J("/OpenAction [3 0 R /Fit]");break;case"original":J("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Z=""+ze;Z.substr(Z.length-1)==="%"&&(ze=parseInt(ze)/100),typeof ze=="number"&&J("/OpenAction [3 0 R /XYZ null null "+S(ze)+"]")}switch(wt||(wt="continuous"),wt){case"continuous":J("/PageLayout /OneColumn");break;case"single":J("/PageLayout /SinglePage");break;case"two":case"twoleft":J("/PageLayout /TwoColumnLeft");break;case"tworight":J("/PageLayout /TwoColumnRight")}tt&&J("/PageMode /"+tt),Lt.publish("putCatalog"),J(">>"),J("endobj")},kn=p.__private__.putTrailer=function(){J("trailer"),J("<<"),J("/Size "+(oe+1)),J("/Root "+oe+" 0 R"),J("/Info "+(oe-1)+" 0 R"),c!==null&&J("/Encrypt "+en.oid+" 0 R"),J("/ID [ <"+se+"> <"+se+"> ]"),J(">>")},bl=p.__private__.putHeader=function(){J("%PDF-"+x),J("%")},vu=p.__private__.putXRef=function(){var v="0000000000";J("xref"),J("0 "+(oe+1)),J("0000000000 65535 f ");for(var F=1;F<=oe;F++)typeof ue[F]=="function"?J((v+ue[F]()).slice(-10)+" 00000 n "):ue[F]!==void 0?J((v+ue[F]).slice(-10)+" 00000 n "):J("0000000000 00000 n ")},Ss=p.__private__.buildDocument=function(){var v;oe=0,be=0,we=[],ue=[],Se=[],Ws=ur(),zr=ur(),ge(we),Lt.publish("buildDocument"),bl(),Di(),function(){Lt.publish("putAdditionalObjects");for(var Z=0;Z<Se.length;Z++){var le=Se[Z];Tn(le.objId,!0),J(le.content),J("endobj")}Lt.publish("postPutAdditionalObjects")}(),v=[],function(){for(var Z in Xe)Xe.hasOwnProperty(Z)&&(d===!1||d===!0&&m.hasOwnProperty(Z))&&_s(Xe[Z])}(),function(){var Z;for(Z in xt)xt.hasOwnProperty(Z)&&Uc(xt[Z])}(),function(){for(var Z in Yn)Yn.hasOwnProperty(Z)&&Ks(Yn[Z])}(),function(Z){var le;for(le in ut)ut.hasOwnProperty(le)&&(ut[le]instanceof Bl?Eo(ut[le]):ut[le]instanceof Xu&&No(ut[le],Z))}(v),Lt.publish("putResources"),v.forEach(Qs),Qs({resourcesOid:zr,objectOid:Number.MAX_SAFE_INTEGER}),Lt.publish("postPutResources"),c!==null&&(en.oid=Nn(),J("<<"),J("/Filter /Standard"),J("/V "+en.v),J("/R "+en.r),J("/U <"+en.toHexString(en.U)+">"),J("/O <"+en.toHexString(en.O)+">"),J("/P "+en.P),J(">>"),J("endobj")),Ys(),xl();var F=be;return vu(),kn(),J("startxref"),J(""+F),J("%%EOF"),ge(Re[Y]),we.join(`
`)},Xs=p.__private__.getBlob=function(v){return new Blob([ot(v)],{type:"application/pdf"})},wi=p.output=p.__private__.output=(br=function(v,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",v){case void 0:return Ss();case"save":p.save(F.filename);break;case"arraybuffer":return ot(Ss());case"blob":return Xs(Ss());case"bloburi":case"bloburl":if(vt.URL!==void 0&&typeof vt.URL.createObjectURL=="function")return vt.URL&&vt.URL.createObjectURL(Xs(Ss()))||void 0;dn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Z="",le=Ss();try{Z=M3(le)}catch{Z=M3(unescape(encodeURIComponent(le)))}return"data:application/pdf;filename="+F.filename+";base64,"+Z;case"pdfobjectnewwindow":if(Object.prototype.toString.call(vt)==="[object Window]"){var de="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ne=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(de=F.pdfObjectUrl,Ne="");var Le='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+de+'"'+Ne+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",$e=vt.open();return $e!==null&&$e.document.write(Le),$e}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(vt)==="[object Window]"){var Qe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',ct=vt.open();if(ct!==null){ct.document.write(Qe);var yt=this;ct.document.documentElement.querySelector("#pdfViewer").onload=function(){ct.document.title=F.filename,ct.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(yt.output("bloburl"))}}return ct}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(vt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',Xt=vt.open();if(Xt!==null&&(Xt.document.write(zt),Xt.document.title=F.filename),Xt||typeof safari>"u")return Xt;break;case"datauri":case"dataurl":return vt.document.location.href=this.output("datauristring",F);default:return null}},br.foo=function(){try{return br.apply(this,arguments)}catch(Z){var v=Z.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var F="Error in function "+v.split(`
`)[0].split("<")[0]+": "+Z.message;if(!vt.console)throw new Error(F);vt.console.error(F,Z),vt.alert&&alert(F)}},br.foo.bar=br,br.foo),To=function(v){return Array.isArray(Hs)===!0&&Hs.indexOf(v)>-1};switch(r){case"pt":ht=1;break;case"mm":ht=72/25.4;break;case"cm":ht=72/2.54;break;case"in":ht=72;break;case"px":ht=To("px_scaling")==1?.75:96/72;break;case"pc":case"em":ht=12;break;case"ex":ht=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);ht=r}var en=null;ve(),$();var oi=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ft[v].objId,pageNumber:v,pageContext:ft[v]}},aa=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in ft)if(ft[F].objId===v)break;return oi(F)},la=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:ft[Y].objId,pageNumber:Y,pageContext:ft[Y]}};p.addPage=function(){return oa.apply(this,arguments),this},p.setPage=function(){return yl.apply(this,arguments),ge.call(this,Re[Y]),this},p.insertPage=function(v){return this.addPage(),this.movePage(Y,v),this},p.movePage=function(v,F){var Z,le;if(v>F){Z=Re[v],le=ft[v];for(var de=v;de>F;de--)Re[de]=Re[de-1],ft[de]=ft[de-1];Re[F]=Z,ft[F]=le,this.setPage(F)}else if(v<F){Z=Re[v],le=ft[v];for(var Ne=v;Ne<F;Ne++)Re[Ne]=Re[Ne+1],ft[Ne]=ft[Ne+1];Re[F]=Z,ft[F]=le,this.setPage(F)}return this},p.deletePage=function(){return gl.apply(this,arguments),this},p.__private__.text=p.text=function(v,F,Z,le,de){var Ne,Le,$e,Qe,ct,yt,zt,Xt,In,tn=(le=le||{}).scope||this;if(typeof v=="number"&&typeof F=="number"&&(typeof Z=="string"||Array.isArray(Z))){var Bn=Z;Z=F,F=v,v=Bn}if(arguments[3]instanceof lt==0?($e=arguments[4],Qe=arguments[5],an(zt=arguments[3])==="object"&&zt!==null||(typeof $e=="string"&&(Qe=$e,$e=null),typeof zt=="string"&&(Qe=zt,zt=null),typeof zt=="number"&&($e=zt,zt=null),le={flags:zt,angle:$e,align:Qe})):(k("The transform parameter of text() with a Matrix value"),In=de),isNaN(F)||isNaN(Z)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return tn;var Ln,Un="",pn=typeof le.lineHeightFactor=="number"?le.lineHeightFactor:Zs,Cr=tn.internal.scaleFactor;function Pl(Jt){return Jt=Jt.split("	").join(Array(le.TabLen||9).join(" ")),_r(Jt,zt)}function Oi(Jt){for(var hn,Zn=Jt.concat(),pr=[],jo=Zn.length;jo--;)typeof(hn=Zn.shift())=="string"?pr.push(hn):Array.isArray(Jt)&&(hn.length===1||hn[1]===void 0&&hn[2]===void 0)?pr.push(hn[0]):pr.push([hn[0],hn[1],hn[2]]);return pr}function f(Jt,hn){var Zn;if(typeof Jt=="string")Zn=hn(Jt)[0];else if(Array.isArray(Jt)){for(var pr,jo,th=Jt.concat(),_u=[],ld=th.length;ld--;)typeof(pr=th.shift())=="string"?_u.push(hn(pr)[0]):Array.isArray(pr)&&typeof pr[0]=="string"&&(jo=hn(pr[0],pr[1],pr[2]),_u.push([jo[0],jo[1],jo[2]]));Zn=_u}return Zn}var _=!1,D=!0;if(typeof v=="string")_=!0;else if(Array.isArray(v)){var W=v.concat();Le=[];for(var pe,_e=W.length;_e--;)(typeof(pe=W.shift())!="string"||Array.isArray(pe)&&typeof pe[0]!="string")&&(D=!1);_=D}if(_===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Oe=Ie/tn.internal.scaleFactor,Vt=Oe*(pn-1);switch(le.baseline){case"bottom":Z-=Vt;break;case"top":Z+=Oe-Vt;break;case"hanging":Z+=Oe-2*Vt;break;case"middle":Z+=Oe/2-Vt}if((yt=le.maxWidth||0)>0&&(typeof v=="string"?v=tn.splitTextToSize(v,yt):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Jt,hn){return Jt.concat(tn.splitTextToSize(hn,yt))},[]))),Ne={text:v,x:F,y:Z,options:le,mutex:{pdfEscape:_r,activeFontKey:nt,fonts:Xe,activeFontSize:Ie}},Lt.publish("preProcessText",Ne),v=Ne.text,$e=(le=Ne.options).angle,In instanceof lt==0&&$e&&typeof $e=="number"){$e*=Math.PI/180,le.rotationDirection===0&&($e=-$e),R===N&&($e=-$e);var Rn=Math.cos($e),Rt=Math.sin($e);In=new lt(Rn,Rt,-Rt,Rn,0,0)}else $e&&$e instanceof lt&&(In=$e);R!==N||In||(In=is),(ct=le.charSpace||ko)!==void 0&&(Un+=T(j(ct))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Xt=le.horizontalScale)!==void 0&&(Un+=T(100*Xt)+` Tz
`),le.lang;var It=-1,mn=le.renderingMode!==void 0?le.renderingMode:le.stroke,Vi=tn.internal.getCurrentPageInfo().pageContext;switch(mn){case 0:case!1:case"fill":It=0;break;case 1:case!0:case"stroke":It=1;break;case 2:case"fillThenStroke":It=2;break;case 3:case"invisible":It=3;break;case 4:case"fillAndAddForClipping":It=4;break;case 5:case"strokeAndAddPathForClipping":It=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":It=6;break;case 7:case"addToPathForClipping":It=7}var $r=Vi.usedRenderingMode!==void 0?Vi.usedRenderingMode:-1;It!==-1?Un+=It+` Tr
`:$r!==-1&&(Un+=`0 Tr
`),It!==-1&&(Vi.usedRenderingMode=It),Qe=le.align||"left";var Pr,Ts=Ie*pn,Kc=tn.internal.pageSize.getWidth(),Qc=Xe[nt];ct=le.charSpace||ko,yt=le.maxWidth||0,zt=Object.assign({autoencode:!0,noBOM:!0},le.flags);var pa=[],kl=function(Jt){return tn.getStringUnitWidth(Jt,{font:Qc,charSpace:ct,fontSize:Ie,doKerning:!1})*Ie/Cr};if(Object.prototype.toString.call(v)==="[object Array]"){var Bi;Le=Oi(v),Qe!=="left"&&(Pr=Le.map(kl));var Ui,ma=0;if(Qe==="right"){F-=Pr[0],v=[],_e=Le.length;for(var Ro=0;Ro<_e;Ro++)Ro===0?(Ui=Sr(F),Bi=As(Z)):(Ui=j(ma-Pr[Ro]),Bi=-Ts),v.push([Le[Ro],Ui,Bi]),ma=Pr[Ro]}else if(Qe==="center"){F-=Pr[0]/2,v=[],_e=Le.length;for(var ga=0;ga<_e;ga++)ga===0?(Ui=Sr(F),Bi=As(Z)):(Ui=j((ma-Pr[ga])/2),Bi=-Ts),v.push([Le[ga],Ui,Bi]),ma=Pr[ga]}else if(Qe==="left"){v=[],_e=Le.length;for(var Yc=0;Yc<_e;Yc++)v.push(Le[Yc])}else if(Qe==="justify"&&Qc.encoding==="Identity-H"){v=[],_e=Le.length,yt=yt!==0?yt:Kc;for(var bu=0,Jn=0;Jn<_e;Jn++)if(Bi=Jn===0?As(Z):-Ts,Ui=Jn===0?Sr(F):bu,Jn<_e-1){var ad=j((yt-Pr[Jn])/(Le[Jn].split(" ").length-1)),io=Le[Jn].split(" ");v.push([io[0]+" ",Ui,Bi]),bu=0;for(var so=1;so<io.length;so++){var Xc=(kl(io[so-1]+" "+io[so])-kl(io[so]))*Cr+ad;so==io.length-1?v.push([io[so],Xc,0]):v.push([io[so]+" ",Xc,0]),bu-=Xc}}else v.push([Le[Jn],Ui,Bi]);v.push(["",bu,0])}else{if(Qe!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],_e=Le.length,yt=yt!==0?yt:Kc,Jn=0;Jn<_e;Jn++){Bi=Jn===0?As(Z):-Ts,Ui=Jn===0?Sr(F):0;var Jc=Le[Jn].split(" ").length-1,Zc=Jc>0?(yt-Pr[Jn])/Jc:0;Jn<_e-1?pa.push(T(j(Zc))):pa.push(0),v.push([Le[Jn],Ui,Bi])}}}(typeof le.R2L=="boolean"?le.R2L:_t)===!0&&(v=f(v,function(Jt,hn,Zn){return[Jt.split("").reverse().join(""),hn,Zn]})),Ne={text:v,x:F,y:Z,options:le,mutex:{pdfEscape:_r,activeFontKey:nt,fonts:Xe,activeFontSize:Ie}},Lt.publish("postProcessText",Ne),v=Ne.text,Ln=Ne.mutex.isHex||!1;var eh=Xe[nt].encoding;eh!=="WinAnsiEncoding"&&eh!=="StandardEncoding"||(v=f(v,function(Jt,hn,Zn){return[Pl(Jt),hn,Zn]})),Le=Oi(v),v=[];for(var ya,va,wa,Il=Array.isArray(Le[0])?1:0,xa="",Ll=function(Jt,hn,Zn){var pr="";return Zn instanceof lt?(Zn=typeof le.angle=="number"?wn(Zn,new lt(1,0,0,1,Jt,hn)):wn(new lt(1,0,0,1,Jt,hn),Zn),R===N&&(Zn=wn(new lt(1,0,0,-1,0,0),Zn)),pr=Zn.join(" ")+` Tm
`):pr=T(Jt)+" "+T(hn)+` Td
`,pr},ls=0;ls<Le.length;ls++){switch(xa="",Il){case 1:wa=(Ln?"<":"(")+Le[ls][0]+(Ln?">":")"),ya=parseFloat(Le[ls][1]),va=parseFloat(Le[ls][2]);break;case 0:wa=(Ln?"<":"(")+Le[ls]+(Ln?">":")"),ya=Sr(F),va=As(Z)}pa!==void 0&&pa[ls]!==void 0&&(xa=pa[ls]+` Tw
`),ls===0?v.push(xa+Ll(ya,va,In)+wa):Il===0?v.push(xa+wa):Il===1&&v.push(xa+Ll(ya,va,In)+wa)}v=Il===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var oo=`BT
/`;return oo+=nt+" "+Ie+` Tf
`,oo+=T(Ie*pn)+` TL
`,oo+=Fi+`
`,oo+=Un,oo+=v,J(oo+="ET"),m[nt]=!0,tn};var wu=p.__private__.clip=p.clip=function(v){return J(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return wu("evenodd")},p.__private__.discardPath=p.discardPath=function(){return J("n"),this};var Mt=p.__private__.isValidStyle=function(v){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(F=!0),F};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return Mt(v)&&(u=v),this};var Co=p.__private__.getStyle=p.getStyle=function(v){var F=u;switch(v){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=v}return F},Js=p.close=function(){return J("h"),this};p.stroke=function(){return J("S"),this},p.fill=function(v){return xi("f",v),this},p.fillEvenOdd=function(v){return xi("f*",v),this},p.fillStroke=function(v){return xi("B",v),this},p.fillStrokeEvenOdd=function(v){return xi("B*",v),this};var xi=function(v,F){an(F)==="object"?zc(F,v):J(v)},_l=function(v){v===null||R===N&&v===void 0||(v=Co(v),J(v))};function xu(v,F,Z,le,de){var Ne=new Xu(F||this.boundingBox,Z||this.xStep,le||this.yStep,this.gState,de||this.matrix);Ne.stream=this.stream;var Le=v+"$$"+this.cloneIndex+++"$$";return xr(Le,Ne),Ne}var zc=function(v,F){var Z=kt[v.key],le=ut[Z];if(le instanceof Bl)J("q"),J(qc(F)),le.gState&&p.setGState(le.gState),J(v.matrix.toString()+" cm"),J("/"+Z+" sh"),J("Q");else if(le instanceof Xu){var de=new lt(1,0,0,-1,0,as());v.matrix&&(de=de.multiply(v.matrix||is),Z=xu.call(le,v.key,v.boundingBox,v.xStep,v.yStep,de).id),J("q"),J("/Pattern cs"),J("/"+Z+" scn"),le.gState&&p.setGState(le.gState),J(F),J("Q")}},qc=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Sl=p.moveTo=function(v,F){return J(T(j(v))+" "+T(B(F))+" m"),this},Po=p.lineTo=function(v,F){return J(T(j(v))+" "+T(B(F))+" l"),this},bi=p.curveTo=function(v,F,Z,le,de,Ne){return J([T(j(v)),T(B(F)),T(j(Z)),T(B(le)),T(j(de)),T(B(Ne)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,F,Z,le,de){if(isNaN(v)||isNaN(F)||isNaN(Z)||isNaN(le)||!Mt(de))throw new Error("Invalid arguments passed to jsPDF.line");return R===A?this.lines([[Z-v,le-F]],v,F,[1,1],de||"S"):this.lines([[Z-v,le-F]],v,F,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,F,Z,le,de,Ne){var Le,$e,Qe,ct,yt,zt,Xt,In,tn,Bn,Ln,Un;if(typeof v=="number"&&(Un=Z,Z=F,F=v,v=Un),le=le||[1,1],Ne=Ne||!1,isNaN(F)||isNaN(Z)||!Array.isArray(v)||!Array.isArray(le)||!Mt(de)||typeof Ne!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Sl(F,Z),Le=le[0],$e=le[1],ct=v.length,Bn=F,Ln=Z,Qe=0;Qe<ct;Qe++)(yt=v[Qe]).length===2?(Bn=yt[0]*Le+Bn,Ln=yt[1]*$e+Ln,Po(Bn,Ln)):(zt=yt[0]*Le+Bn,Xt=yt[1]*$e+Ln,In=yt[2]*Le+Bn,tn=yt[3]*$e+Ln,Bn=yt[4]*Le+Bn,Ln=yt[5]*$e+Ln,bi(zt,Xt,In,tn,Bn,Ln));return Ne&&Js(),_l(de),this},p.path=function(v){for(var F=0;F<v.length;F++){var Z=v[F],le=Z.c;switch(Z.op){case"m":Sl(le[0],le[1]);break;case"l":Po(le[0],le[1]);break;case"c":bi.apply(this,le);break;case"h":Js()}}return this},p.__private__.rect=p.rect=function(v,F,Z,le,de){if(isNaN(v)||isNaN(F)||isNaN(Z)||isNaN(le)||!Mt(de))throw new Error("Invalid arguments passed to jsPDF.rect");return R===A&&(le=-le),J([T(j(v)),T(B(F)),T(j(Z)),T(j(le)),"re"].join(" ")),_l(de),this},p.__private__.triangle=p.triangle=function(v,F,Z,le,de,Ne,Le){if(isNaN(v)||isNaN(F)||isNaN(Z)||isNaN(le)||isNaN(de)||isNaN(Ne)||!Mt(Le))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Z-v,le-F],[de-Z,Ne-le],[v-de,F-Ne]],v,F,[1,1],Le,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,F,Z,le,de,Ne,Le){if(isNaN(v)||isNaN(F)||isNaN(Z)||isNaN(le)||isNaN(de)||isNaN(Ne)||!Mt(Le))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var $e=4/3*(Math.SQRT2-1);return de=Math.min(de,.5*Z),Ne=Math.min(Ne,.5*le),this.lines([[Z-2*de,0],[de*$e,0,de,Ne-Ne*$e,de,Ne],[0,le-2*Ne],[0,Ne*$e,-de*$e,Ne,-de,Ne],[2*de-Z,0],[-de*$e,0,-de,-Ne*$e,-de,-Ne],[0,2*Ne-le],[0,-Ne*$e,de*$e,-Ne,de,-Ne]],v+de,F,[1,1],Le,!0),this},p.__private__.ellipse=p.ellipse=function(v,F,Z,le,de){if(isNaN(v)||isNaN(F)||isNaN(Z)||isNaN(le)||!Mt(de))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ne=4/3*(Math.SQRT2-1)*Z,Le=4/3*(Math.SQRT2-1)*le;return Sl(v+Z,F),bi(v+Z,F-Le,v+Ne,F-le,v,F-le),bi(v-Ne,F-le,v-Z,F-Le,v-Z,F),bi(v-Z,F+Le,v-Ne,F+le,v,F+le),bi(v+Ne,F+le,v+Z,F+Le,v+Z,F),_l(de),this},p.__private__.circle=p.circle=function(v,F,Z,le){if(isNaN(v)||isNaN(F)||isNaN(Z)||!Mt(le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,F,Z,Z,le)},p.setFont=function(v,F,Z){return Z&&(F=L(F,Z)),nt=wl(v,F,{disableWarning:!1}),this};var ss=p.__private__.getFont=p.getFont=function(){return Xe[wl.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,F,Z={};for(v in gt)if(gt.hasOwnProperty(v))for(F in Z[v]=[],gt[v])gt[v].hasOwnProperty(F)&&Z[v].push(F);return Z},p.addFont=function(v,F,Z,le,de){var Ne=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ne.indexOf(arguments[3])!==-1?de=arguments[3]:arguments[3]&&Ne.indexOf(arguments[3])==-1&&(Z=L(Z,le)),sa.call(this,v,F,Z,de=de||"Identity-H")};var Zs,ua=t.lineWidth||.200025,dt=p.__private__.getLineWidth=p.getLineWidth=function(){return ua},eo=p.__private__.setLineWidth=p.setLineWidth=function(v){return ua=v,J(T(j(v))+" w"),this};p.__private__.setLineDash=it.API.setLineDash=it.API.setLineDashPattern=function(v,F){if(v=v||[],F=F||0,isNaN(F)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(Z){return T(j(Z))}).join(" "),F=T(j(F)),J("["+v+"] "+F+" d"),this};var $c=p.__private__.getLineHeight=p.getLineHeight=function(){return Ie*Zs};p.__private__.getLineHeight=p.getLineHeight=function(){return Ie*Zs};var Hc=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(Zs=v),this},Wc=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Zs};Hc(t.lineHeight);var Sr=p.__private__.getHorizontalCoordinate=function(v){return j(v)},As=p.__private__.getVerticalCoordinate=function(v){return R===N?v:ft[Y].mediaBox.topRightY-ft[Y].mediaBox.bottomLeftY-j(v)},Gc=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return T(Sr(v))},ca=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return T(As(v))},Es=t.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return ji(Es)},p.__private__.setStrokeColor=p.setDrawColor=function(v,F,Z,le){return Es=si({ch1:v,ch2:F,ch3:Z,ch4:le,pdfColorType:"draw",precision:2}),J(Es),this};var ha=t.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return ji(ha)},p.__private__.setFillColor=p.setFillColor=function(v,F,Z,le){return ha=si({ch1:v,ch2:F,ch3:Z,ch4:le,pdfColorType:"fill",precision:2}),J(ha),this};var Fi=t.textColor||"0 g",os=p.__private__.getTextColor=p.getTextColor=function(){return ji(Fi)};p.__private__.setTextColor=p.setTextColor=function(v,F,Z,le){return Fi=si({ch1:v,ch2:F,ch3:Z,ch4:le,pdfColorType:"text",precision:3}),this};var ko=t.charSpace,Al=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(ko||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ko=v,this};var cn=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var F=p.CapJoinStyles[v];if(F===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return cn=F,J(F+" J"),this};var El=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var F=p.CapJoinStyles[v];if(F===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return El=F,J(F+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return J(T(j(v))+" M"),this},p.GState=Tm,p.setGState=function(v){(v=typeof v=="string"?xt[En[v]]:Io(null,v)).equals(vn)||(J("/"+v.id+" gs"),vn=v)};var Io=function(v,F){if(!v||!En[v]){var Z=!1;for(var le in xt)if(xt.hasOwnProperty(le)&&xt[le].equals(F)){Z=!0;break}if(Z)F=xt[le];else{var de="GS"+(Object.keys(xt).length+1).toString(10);xt[de]=F,F.id=de}return v&&(En[v]=F.id),Lt.publish("addGState",F),F}};p.addGState=function(v,F){return Io(v,F),this},p.saveGraphicsState=function(){return J("q"),Zt.push({key:nt,size:Ie,color:Fi}),this},p.restoreGraphicsState=function(){J("Q");var v=Zt.pop();return nt=v.key,Ie=v.size,Fi=v.color,vn=null,this},p.setCurrentTransformationMatrix=function(v){return J(v.toString()+" cm"),this},p.comment=function(v){return J("#"+v),this};var to=function(v,F){var Z=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Z},set:function(Ne){isNaN(Ne)||(Z=parseFloat(Ne))}});var le=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return le},set:function(Ne){isNaN(Ne)||(le=parseFloat(Ne))}});var de="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return de},set:function(Ne){de=Ne.toString()}}),this},fa=function(v,F,Z,le){to.call(this,v,F),this.type="rect";var de=Z||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return de},set:function(Le){isNaN(Le)||(de=parseFloat(Le))}});var Ne=le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ne},set:function(Le){isNaN(Le)||(Ne=parseFloat(Le))}}),this},Lo=function(){this.page=Yt,this.currentPage=Y,this.pages=Re.slice(0),this.pagesContext=ft.slice(0),this.x=st,this.y=Kt,this.matrix=Ut,this.width=_i(Y),this.height=Ns(Y),this.outputDestination=Pe,this.id="",this.objectNumber=-1};Lo.prototype.restore=function(){Yt=this.page,Y=this.currentPage,ft=this.pagesContext,Re=this.pages,st=this.x,Kt=this.y,Ut=this.matrix,Nl(Y,this.width),ai(Y,this.height),Pe=this.outputDestination};var no=function(v,F,Z,le,de){Ur.push(new Lo),Yt=Y=0,Re=[],st=v,Kt=F,Ut=de,Mi([Z,le])};for(var ro in p.beginFormObject=function(v,F,Z,le,de){return no(v,F,Z,le,de),this},p.endFormObject=function(v){return function(F){if(rs[F])Ur.pop().restore();else{var Z=new Lo,le="Xo"+(Object.keys(Yn).length+1).toString(10);Z.id=le,rs[F]=le,Yn[le]=Z,Lt.publish("addFormObject",Z),Ur.pop().restore()}}(v),this},p.doFormObject=function(v,F){var Z=Yn[rs[v]];return J("q"),J(F.toString()+" cm"),J("/"+Z.id+" Do"),J("Q"),this},p.getFormObject=function(v){var F=Yn[rs[v]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},p.save=function(v,F){return v=v||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(Vl(Xs(Ss()),v),typeof Vl.unload=="function"&&vt.setTimeout&&setTimeout(Vl.unload,911),this):new Promise(function(Z,le){try{var de=Vl(Xs(Ss()),v);typeof Vl.unload=="function"&&vt.setTimeout&&setTimeout(Vl.unload,911),Z(de)}catch(Ne){le(Ne.message)}})},it.API)it.API.hasOwnProperty(ro)&&(ro==="events"&&it.API.events.length?function(v,F){var Z,le,de;for(de=F.length-1;de!==-1;de--)Z=F[de][0],le=F[de][1],v.subscribe.apply(v,[Z].concat(typeof le=="function"?[le]:le))}(Lt,it.API.events):p[ro]=it.API[ro]);function _i(v){return ft[v].mediaBox.topRightX-ft[v].mediaBox.bottomLeftX}function Nl(v,F){ft[v].mediaBox.topRightX=F+ft[v].mediaBox.bottomLeftX}function Ns(v){return ft[v].mediaBox.topRightY-ft[v].mediaBox.bottomLeftY}function ai(v,F){ft[v].mediaBox.topRightY=F+ft[v].mediaBox.bottomLeftY}var Tl=p.getPageWidth=function(v){return _i(v=v||Y)/ht},da=p.setPageWidth=function(v,F){Nl(v,F*ht)},as=p.getPageHeight=function(v){return Ns(v=v||Y)/ht},Cl=p.setPageHeight=function(v,F){ai(v,F*ht)};return p.internal={pdfEscape:_r,getStyle:Co,getFont:ss,getFontSize:Be,getCharSpace:Al,getTextColor:os,getLineHeight:$c,getLineHeightFactor:Wc,getLineWidth:dt,write:Ke,getHorizontalCoordinate:Sr,getVerticalCoordinate:As,getCoordinateString:Gc,getVerticalCoordinateString:ca,collections:{},newObject:Nn,newAdditionalObject:Ao,newObjectDeferred:ur,newObjectDeferredBegin:Tn,getFilters:qr,putStream:Xn,events:Lt,scaleFactor:ht,pageSize:{getWidth:function(){return Tl(Y)},setWidth:function(v){da(Y,v)},getHeight:function(){return as(Y)},setHeight:function(v){Cl(Y,v)}},encryptionOptions:c,encryption:en,getEncryptor:function(v){return c!==null?en.encryptor(v,0):function(F){return F}},output:wi,getNumberOfPages:vl,pages:Re,out:J,f2:S,f3:P,getPageInfo:oi,getPageInfoByObjId:aa,getCurrentPageInfo:la,getPDFVersion:E,Point:to,Rectangle:fa,Matrix:lt,hasHotfix:To},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Tl(Y)},set:function(v){da(Y,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return as(Y)},set:function(v){Cl(Y,v)},enumerable:!0,configurable:!0}),(function(v){for(var F=0,Z=Ue.length;F<Z;F++){var le=sa.call(this,v[F][0],v[F][1],v[F][2],Ue[F][3],!0);d===!1&&(m[le]=!0);var de=v[F][0].split("-");ml({id:le,fontName:de[0],fontStyle:de[1]||""})}Lt.publish("addFonts",{fonts:Xe,dictionary:gt})}).call(p,Ue),nt="F1",oa(i,n),Lt.publish("initialized"),p}Iu.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},Iu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Iu.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Iu.prototype.processOwnerPassword=function(t,e){return X2(Y2(e).substr(0,5),t)},Iu.prototype.encryptor=function(t,e){var n=Y2(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return X2(n,r)}},Tm.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||an(t)!==an(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},it.API={events:[]},it.version="3.0.3";var Hn=it.API,E5=1,yu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Nu=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},At=function(t){return t.toFixed(2)},Pa=function(t){return t.toFixed(5)};Hn.__acroform__={};var Ri=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},B3=function(t){return t*E5},uo=function(t){var e=new XN,n=Ge.internal.getHeight(t)||0,r=Ge.internal.getWidth(t)||0;return e.BBox=[0,0,Number(At(r)),Number(At(n))],e},Bz=Hn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},Uz=Hn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},zz=Hn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},sr=Hn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return zz(t,e-1)},or=Hn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Bz(t,e-1)},ar=Hn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Uz(t,e-1)},qz=Hn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(At(l.lowerLeft_X)),Number(At(l.lowerLeft_Y)),Number(At(l.upperRight_X)),Number(At(l.upperRight_Y))]},$z=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=J2(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+At(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=uo(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},J2=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(S){return S.split(`
`)}):i.map(function(S){return[S]});var s=n,o=Ge.internal.getHeight(t)||0;o=o<0?-o:o;var a=Ge.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(S,P,j){if(S+1<i.length){var B=P+" "+i[S+1][0];return np(B,t,j).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,c,d=np("3",t,s).height,m=t.multiline?o-s:(o-d)/2,p=m+=2,x=0,E=0,C=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+np(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var w="",A=0,N=0;N<i.length;N++)if(i.hasOwnProperty(N)){var R=!1;if(i[N].length!==1&&C!==i[N].length-1){if((d+2)*(A+2)+2>o)continue e;w+=i[N][C],R=!0,E=N,N--}else{w=(w+=i[N][C]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var z=parseInt(N),Q=l(z,w,s),L=N>=i.length-1;if(Q&&!L){w+=" ",C=0;continue}if(Q||L){if(L)E=z;else if(t.multiline&&(d+2)*(A+2)+2>o)continue e}else{if(!t.multiline||(d+2)*(A+2)+2>o)continue e;E=z}}for(var T="",k=x;k<=E;k++){var M=i[k];if(t.multiline){if(k===E){T+=M[C]+" ",C=(C+1)%M.length;continue}if(k===x){T+=M[M.length-1]+" ";continue}}T+=M[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,c=np(T,t,s).width,t.textAlign){case"right":u=a-c-2;break;case"center":u=(a-c)/2;break;default:u=2}e+=At(u)+" "+At(p)+` Td
`,e+="("+yu(T)+`) Tj
`,e+=-At(u)+` 0 Td
`,p=-(s+2),c=0,x=R?E:E+1,A++,w=""}break}return r.text=e,r.fontSize=s,r},np=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},Hz={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Wz=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},Gz=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(qs.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Hz)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");E5=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new JN,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&Wz(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=qz(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Ge.createDefaultAppearanceStream(a),an(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var c=$z(a);l.push({key:"AP",value:"<</N "+c+">>"}),i.internal.acroformPlugin.xForms.push(c)}if(a.appearanceStreamContent){var d="";for(var m in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(m)){var p=a.appearanceStreamContent[m];if(d+="/"+m+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var x=p[o];typeof x=="function"&&(x=x.call(i,a)),d+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=p)=="function"&&(x=x.call(i,a)),d+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);d+=">>"}l.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&function(E,C){for(var w in E)if(E.hasOwnProperty(w)){var A=w,N=E[w];C.internal.newObjectDeferredBegin(N.objId,!0),an(N)==="object"&&typeof N.putStream=="function"&&N.putStream(),delete E[A]}}(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},YN=Hn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),an(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+yu(r(t[s].toString()))+")"):i+=t[s].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Gg=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+yu(r(t))+")"},fo=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fo.prototype.toString=function(){return this.objId+" 0 R"},fo.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},fo.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:YN(i,this.objId,this.scope)}):i instanceof fo?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var XN=function(){fo.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Ri(XN,fo);var JN=function(){fo.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+yu(n(t))+")"}},set:function(n){t=n}})};Ri(JN,fo);var qs=function t(){fo.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');e=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!sr(e,3)},set:function(w){w?this.F=or(e,3):this.F=ar(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');n=w}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(w){r=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(w){r[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(w){r[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(w){r[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(w){r[3]=w}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Cm)return;s="FieldObject"+t.FieldNum++}var w=function(A){return A};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+yu(w(s))+")"},set:function(w){s=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(w){s=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(w){a=w}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/E5:u},set:function(w){u=w}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(w){c=w}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Cm||this instanceof Jl))return Gg(d,this.objId,this.scope)},set:function(w){w=w.toString(),d=w}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Nr==0?Gg(m,this.objId,this.scope):m},set:function(w){w=w.toString(),m=this instanceof Nr==0?w.substr(0,1)==="("?Nu(w.substr(1,w.length-2)):Nu(w):w}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Nr==1?Nu(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof Nr==1?"/"+w:w}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Nr==0?Gg(p,this.objId,this.scope):p},set:function(w){w=w.toString(),p=this instanceof Nr==0?w.substr(0,1)==="("?Nu(w.substr(1,w.length-2)):Nu(w):w}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Nr==1?Nu(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof Nr==1?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(w){w=!!w,E=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(w){x=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,1)},set:function(w){w?this.Ff=or(this.Ff,1):this.Ff=ar(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,2)},set:function(w){w?this.Ff=or(this.Ff,2):this.Ff=ar(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,3)},set:function(w){w?this.Ff=or(this.Ff,3):this.Ff=ar(this.Ff,3)}});var C=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(C!==null)return C},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');C=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(C){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:C=2;break;case"center":case 1:C=1;break;default:C=0}}})};Ri(qs,fo);var oc=function(){qs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return YN(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,18)},set:function(n){n?this.Ff=or(this.Ff,18):this.Ff=ar(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=or(this.Ff,19):this.Ff=ar(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,20)},set:function(n){n?(this.Ff=or(this.Ff,20),e.sort()):this.Ff=ar(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,22)},set:function(n){n?this.Ff=or(this.Ff,22):this.Ff=ar(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,23)},set:function(n){n?this.Ff=or(this.Ff,23):this.Ff=ar(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,27)},set:function(n){n?this.Ff=or(this.Ff,27):this.Ff=ar(this.Ff,27)}}),this.hasAppearanceStream=!1};Ri(oc,qs);var ac=function(){oc.call(this),this.fontName="helvetica",this.combo=!1};Ri(ac,oc);var lc=function(){ac.call(this),this.combo=!0};Ri(lc,ac);var Cp=function(){lc.call(this),this.edit=!0};Ri(Cp,lc);var Nr=function(){qs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,15)},set:function(n){n?this.Ff=or(this.Ff,15):this.Ff=ar(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,16)},set:function(n){n?this.Ff=or(this.Ff,16):this.Ff=ar(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,17)},set:function(n){n?this.Ff=or(this.Ff,17):this.Ff=ar(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,26)},set:function(n){n?this.Ff=or(this.Ff,26):this.Ff=ar(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+yu(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){an(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Ri(Nr,qs);var Pp=function(){Nr.call(this),this.pushButton=!0};Ri(Pp,Nr);var uc=function(){Nr.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ri(uc,Nr);var Cm=function(){var t,e;qs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+yu(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){an(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ge.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ri(Cm,qs),uc.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},uc.prototype.createOption=function(t){var e=new Cm;return e.Parent=this,e.optionName=t,this.Kids.push(e),Kz.call(this.scope,e),e};var kp=function(){Nr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ge.CheckBox.createAppearanceStream()};Ri(kp,Nr);var Jl=function(){qs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,13)},set:function(e){e?this.Ff=or(this.Ff,13):this.Ff=ar(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,21)},set:function(e){e?this.Ff=or(this.Ff,21):this.Ff=ar(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,23)},set:function(e){e?this.Ff=or(this.Ff,23):this.Ff=ar(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,24)},set:function(e){e?this.Ff=or(this.Ff,24):this.Ff=ar(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,25)},set:function(e){e?this.Ff=or(this.Ff,25):this.Ff=ar(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,26)},set:function(e){e?this.Ff=or(this.Ff,26):this.Ff=ar(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ri(Jl,qs);var Ip=function(){Jl.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!sr(this.Ff,14)},set:function(t){t?this.Ff=or(this.Ff,14):this.Ff=ar(this.Ff,14)}}),this.password=!0};Ri(Ip,Jl);var Ge={CheckBox:{createAppearanceStream:function(){return{N:{On:Ge.CheckBox.YesNormal},D:{On:Ge.CheckBox.YesPushDown,Off:Ge.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=uo(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=J2(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+At(Ge.internal.getWidth(t))+" "+At(Ge.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+At(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=uo(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Ge.internal.getHeight(t),o=Ge.internal.getWidth(t),a=J2(t,t.caption);return i.push("1 g"),i.push("0 0 "+At(o)+" "+At(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+At(o-1)+" "+At(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+At(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=uo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+At(Ge.internal.getWidth(t))+" "+At(Ge.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Ge.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Ge.RadioButton.Circle.YesNormal,e.D[t]=Ge.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=uo(t);e.scope=t.scope;var n=[],r=Ge.internal.getWidth(t)<=Ge.internal.getHeight(t)?Ge.internal.getWidth(t)/4:Ge.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Ge.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Pa(Ge.internal.getWidth(t)/2)+" "+Pa(Ge.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=uo(t);e.scope=t.scope;var n=[],r=Ge.internal.getWidth(t)<=Ge.internal.getHeight(t)?Ge.internal.getWidth(t)/4:Ge.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ge.internal.Bezier_C).toFixed(5)),o=Number((r*Ge.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Pa(Ge.internal.getWidth(t)/2)+" "+Pa(Ge.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Pa(Ge.internal.getWidth(t)/2)+" "+Pa(Ge.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=uo(t);e.scope=t.scope;var n=[],r=Ge.internal.getWidth(t)<=Ge.internal.getHeight(t)?Ge.internal.getWidth(t)/4:Ge.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Ge.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Pa(Ge.internal.getWidth(t)/2)+" "+Pa(Ge.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Ge.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Ge.RadioButton.Cross.YesNormal,e.D[t]=Ge.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=uo(t);e.scope=t.scope;var n=[],r=Ge.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+At(Ge.internal.getWidth(t)-2)+" "+At(Ge.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(At(r.x1.x)+" "+At(r.x1.y)+" m"),n.push(At(r.x2.x)+" "+At(r.x2.y)+" l"),n.push(At(r.x4.x)+" "+At(r.x4.y)+" m"),n.push(At(r.x3.x)+" "+At(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=uo(t);e.scope=t.scope;var n=Ge.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+At(Ge.internal.getWidth(t))+" "+At(Ge.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+At(Ge.internal.getWidth(t)-2)+" "+At(Ge.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(At(n.x1.x)+" "+At(n.x1.y)+" m"),r.push(At(n.x2.x)+" "+At(n.x2.y)+" l"),r.push(At(n.x4.x)+" "+At(n.x4.y)+" m"),r.push(At(n.x3.x)+" "+At(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=uo(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+At(Ge.internal.getWidth(t))+" "+At(Ge.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Ge.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Ge.internal.getWidth(t),n=Ge.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Ge.internal.getWidth=function(t){var e=0;return an(t)==="object"&&(e=B3(t.Rect[2])),e},Ge.internal.getHeight=function(t){var e=0;return an(t)==="object"&&(e=B3(t.Rect[3])),e};var Kz=Hn.addField=function(t){if(Gz(this,t),!(t instanceof qs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Hn.AcroFormChoiceField=oc,Hn.AcroFormListBox=ac,Hn.AcroFormComboBox=lc,Hn.AcroFormEditBox=Cp,Hn.AcroFormButton=Nr,Hn.AcroFormPushButton=Pp,Hn.AcroFormRadioButton=uc,Hn.AcroFormCheckBox=kp,Hn.AcroFormTextField=Jl,Hn.AcroFormPasswordField=Ip,Hn.AcroFormAppearance=Ge,Hn.AcroForm={ChoiceField:oc,ListBox:ac,ComboBox:lc,EditBox:Cp,Button:Nr,PushButton:Pp,RadioButton:uc,CheckBox:kp,TextField:Jl,PasswordField:Ip,Appearance:Ge},it.AcroForm={ChoiceField:oc,ListBox:ac,ComboBox:lc,EditBox:Cp,Button:Nr,PushButton:Pp,RadioButton:uc,CheckBox:kp,TextField:Jl,PasswordField:Ip,Appearance:Ge};it.AcroForm;function ZN(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(S,P){var j,B,X,se,re,$=n;if((P=P||n)==="RGBA"||S.data!==void 0&&S.data instanceof Uint8ClampedArray&&"height"in S&&"width"in S)return"RGBA";if(Q(S))for(re in r)for(X=r[re],j=0;j<X.length;j+=1){for(se=!0,B=0;B<X[j].length;B+=1)if(X[j][B]!==void 0&&X[j][B]!==S[B]){se=!1;break}if(se===!0){$=re;break}}else for(re in r)for(X=r[re],j=0;j<X.length;j+=1){for(se=!0,B=0;B<X[j].length;B+=1)if(X[j][B]!==void 0&&X[j][B]!==S.charCodeAt(B)){se=!1;break}if(se===!0){$=re;break}}return $===n&&P!==n&&($=P),$},s=function S(P){for(var j=this.internal.write,B=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:P.width}),se.push({key:"Height",value:P.height}),P.colorSpace===w.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===w.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)&&P.transparency.length>0){for(var re="",$=0,ae=P.transparency.length;$<ae;$++)re+=P.transparency[$]+" "+P.transparency[$]+" ";se.push({key:"Mask",value:"["+re+"]"})}P.sMask!==void 0&&se.push({key:"SMask",value:P.objectId+1+" 0 R"});var fe=P.filter!==void 0?["/"+P.filter]:void 0;if(B({data:P.data,additionalKeyValues:se,alreadyAppliedFilters:fe,objectId:P.objectId}),j("endobj"),"sMask"in P&&P.sMask!==void 0){var ve,V=(ve=P.sMaskBitsPerComponent)!==null&&ve!==void 0?ve:P.bitsPerComponent,Y={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:V,data:P.sMask};"filter"in P&&(Y.decodeParameters="/Predictor ".concat(P.predictor," /Colors 1 /BitsPerComponent ").concat(V," /Columns ").concat(P.width),Y.filter=P.filter),S.call(this,Y)}if(P.colorSpace===w.INDEXED){var ie=this.internal.newObject();B({data:T(new Uint8Array(P.palette)),objectId:ie}),j("endobj")}},o=function(){var S=this.internal.collections[e+"images"];for(var P in S)s.call(this,S[P])},a=function(){var S,P=this.internal.collections[e+"images"],j=this.internal.write;for(var B in P)j("/I"+(S=P[B]).index,S.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},u=function(){var S=this.internal.collections[e+"images"];return l.call(this),S},c=function(){return Object.keys(this.internal.collections[e+"images"]).length},d=function(S){return typeof t["process"+S.toUpperCase()]=="function"},m=function(S){return an(S)==="object"&&S.nodeType===1},p=function(S,P){if(S.nodeName==="IMG"&&S.hasAttribute("src")){var j=""+S.getAttribute("src");if(j.indexOf("data:image/")===0)return Tp(unescape(j).split("base64,").pop());var B=t.loadFile(j,!0);if(B!==void 0)return B}if(S.nodeName==="CANVAS"){if(S.width===0||S.height===0)throw new Error("Given canvas must have data. Canvas width: "+S.width+", height: "+S.height);var X;switch(P){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;default:X="image/jpeg"}return Tp(S.toDataURL(X,1).split("base64,").pop())}},x=function(S){var P=this.internal.collections[e+"images"];if(P){for(var j in P)if(S===P[j].alias)return P[j]}},E=function(S,P,j){return S||P||(S=-96,P=-96),S<0&&(S=-1*j.width*72/S/this.internal.scaleFactor),P<0&&(P=-1*j.height*72/P/this.internal.scaleFactor),S===0&&(S=P*j.width/j.height),P===0&&(P=S*j.height/j.width),[S,P]},C=function(S,P,j,B,X,se){var re=E.call(this,j,B,X),$=this.internal.getCoordinateString,ae=this.internal.getVerticalCoordinateString,fe=u.call(this);if(j=re[0],B=re[1],fe[X.index]=X,se){se*=Math.PI/180;var ve=Math.cos(se),V=Math.sin(se),Y=function(ne){return ne.toFixed(4)},ie=[Y(ve),Y(V),Y(-1*V),Y(ve),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,$(S),ae(P+B),"cm"].join(" ")),this.internal.write(ie.join(" ")),this.internal.write([$(j),"0","0",$(B),"0","0","cm"].join(" "))):this.internal.write([$(j),"0","0",$(B),$(S),ae(P+B),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},w=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=t.__addimage__.sHashCode=function(S){var P,j,B=0;if(typeof S=="string")for(j=S.length,P=0;P<j;P++)B=(B<<5)-B+S.charCodeAt(P),B|=0;else if(Q(S))for(j=S.byteLength/2,P=0;P<j;P++)B=(B<<5)-B+S[P],B|=0;return B},R=t.__addimage__.validateStringAsBase64=function(S){(S=S||"").toString().trim();var P=!0;return S.length===0&&(P=!1),S.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(S.substr(0,S.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(S.substr(-2))===!1&&(P=!1),P},z=t.__addimage__.extractImageFromDataUrl=function(S){if(S==null||!(S=S.trim()).startsWith("data:"))return null;var P=S.indexOf(",");return P<0?null:S.substring(0,P).trim().endsWith("base64")?S.substring(P+1):null};t.__addimage__.isArrayBuffer=function(S){return S instanceof ArrayBuffer};var Q=t.__addimage__.isArrayBufferView=function(S){return S instanceof Int8Array||S instanceof Uint8Array||S instanceof Uint8ClampedArray||S instanceof Int16Array||S instanceof Uint16Array||S instanceof Int32Array||S instanceof Uint32Array||S instanceof Float32Array||S instanceof Float64Array},L=t.__addimage__.binaryStringToUint8Array=function(S){for(var P=S.length,j=new Uint8Array(P),B=0;B<P;B++)j[B]=S.charCodeAt(B);return j},T=t.__addimage__.arrayBufferToBinaryString=function(S){for(var P="",j=Q(S)?S:new Uint8Array(S),B=0;B<j.length;B+=8192)P+=String.fromCharCode.apply(null,j.subarray(B,B+8192));return P};t.addImage=function(){var S,P,j,B,X,se,re,$,ae;if(typeof arguments[1]=="number"?(P=n,j=arguments[1],B=arguments[2],X=arguments[3],se=arguments[4],re=arguments[5],$=arguments[6],ae=arguments[7]):(P=arguments[1],j=arguments[2],B=arguments[3],X=arguments[4],se=arguments[5],re=arguments[6],$=arguments[7],ae=arguments[8]),an(S=arguments[0])==="object"&&!m(S)&&"imageData"in S){var fe=S;S=fe.imageData,P=fe.format||P||n,j=fe.x||j||0,B=fe.y||B||0,X=fe.w||fe.width||X,se=fe.h||fe.height||se,re=fe.alias||re,$=fe.compression||$,ae=fe.rotation||fe.angle||ae}var ve=this.internal.getFilters();if($===void 0&&ve.indexOf("FlateEncode")!==-1&&($="SLOW"),isNaN(j)||isNaN(B))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var V=k.call(this,S,P,re,$);return C.call(this,j,B,X,se,V,ae),this};var k=function(S,P,j,B){var X,se,re;if(typeof S=="string"&&i(S)===n){S=unescape(S);var $=M(S,!1);($!==""||($=t.loadFile(S,!0))!==void 0)&&(S=$)}if(m(S)&&(S=p(S,P)),P=i(S,P),!d(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((re=j)==null||re.length===0)&&(j=function(ae){return typeof ae=="string"||Q(ae)?N(ae):Q(ae.data)?N(ae.data):null}(S)),(X=x.call(this,j))||(S instanceof Uint8Array||P==="RGBA"||(se=S,S=L(S)),X=this["process"+P.toUpperCase()](S,c.call(this),j,function(ae){return ae&&typeof ae=="string"&&(ae=ae.toUpperCase()),ae in t.image_compression?ae:A.NONE}(B),se)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},M=t.__addimage__.convertBase64ToBinaryString=function(S,P){P=typeof P!="boolean"||P;var j,B="";if(typeof S=="string"){var X;j=(X=z(S))!==null&&X!==void 0?X:S;try{B=Tp(j)}catch(se){if(P)throw R(j)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return B};t.getImageProperties=function(S){var P,j,B="";if(m(S)&&(S=p(S)),typeof S=="string"&&i(S)===n&&((B=M(S,!1))===""&&(B=t.loadFile(S)||""),S=B),j=i(S),!d(j))throw new Error("addImage does not support files of type '"+j+"', please ensure that a plugin for '"+j+"' support is added.");if(S instanceof Uint8Array||(S=L(S)),!(P=this["process"+j.toUpperCase()](S)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=j,P}})(it.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};it.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,c=!1,d=0;d<u.length&&!c;d++)switch((r=u[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){r=u[m];var p=this.internal.pdfEscape,x=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),C=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(E.objId),A=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+p(w(r.contents))+")",s+=" /Popup "+C.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+p(w(A))+") >>",E.content=s;var N=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+N,r.open&&(s+=" /Open true"),s+=" >>",C.content=s,this.internal.write(E.objId,"0 R",C.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var R=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+R+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var z=this.annotations._nameMap[r.options.name];r.options.pageNumber=z.page,r.options.top=z.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;default:var Q=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+Q+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var c=this.splitTextToSize(n,a).length;o=Math.ceil(u*c)}else a=l,o=u;return this.text(n,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(it.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=t.__arabicParser__.isArabicEndLetter=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(E){return o(E)&&i.indexOf(E.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var c=t.__arabicParser__.arabicLetterHasMedialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length==4},d=t.__arabicParser__.resolveLigatures=function(E){var C=0,w=n,A="",N=0;for(C=0;C<E.length;C+=1)w[E.charCodeAt(C)]!==void 0?(N++,typeof(w=w[E.charCodeAt(C)])=="number"&&(A+=String.fromCharCode(w),w=n,N=0),C===E.length-1&&(w=n,A+=E.charAt(C-(N-1)),C-=N-1,N=0)):(w=n,A+=E.charAt(C-N),C-=N,N=0);return A};t.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(E,C,w){return o(E)?s(E)===!1?-1:!u(E)||!o(C)&&!o(w)||!o(w)&&a(C)||a(E)&&!o(C)||a(E)&&l(C)||a(E)&&a(C)?0:c(E)&&o(C)&&!a(C)&&o(w)&&u(w)?3:a(E)||!o(w)?1:2:-1},p=function(E){var C=0,w=0,A=0,N="",R="",z="",Q=(E=E||"").split("\\s+"),L=[];for(C=0;C<Q.length;C+=1){for(L.push(""),w=0;w<Q[C].length;w+=1)N=Q[C][w],R=Q[C][w-1],z=Q[C][w+1],o(N)?(A=m(N,R,z),L[C]+=A!==-1?String.fromCharCode(e[N.charCodeAt(0)][A]):N):L[C]+=N;L[C]=d(L[C])}return L.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var E,C=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(C)){var A=0;for(w=[],A=0;A<C.length;A+=1)Array.isArray(C[A])?w.push([p(C[A][0]),C[A][1],C[A][2]]):w.push([p(C[A])]);E=w}else E=p(C);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};t.events.push(["preProcessText",x])}(it.API),it.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(it.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(E){u=E}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(E){c=E}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(E){d=E}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(E){m=E}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(E){x=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var c=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,p=0,x=0,E=0,C=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var w=u.maxWidth;w>0?typeof l=="string"?l=this.splitTextToSize(l,w):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(N,R){return N.concat(C.splitTextToSize(R,w))},[])):l=Array.isArray(l)?l:[l];for(var A=0;A<l.length;A++)p<(E=this.getStringUnitWidth(l[A],{font:d})*c)&&(p=E);return p!==0&&(x=l.length),{w:p/=m,h:Math.max((x*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=d.top,p&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,c,d,m){if(r.call(this),!c)throw new Error("No data for PDF table.");var p,x,E,C,w=[],A=[],N=[],R={},z={},Q=[],L=[],T=(m=m||{}).autoSize||!1,k=m.printHeaders!==!1,M=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,S=m.margins||Object.assign({width:this.getPageWidth()},e),P=typeof m.padding=="number"?m.padding:3,j=m.headerBackgroundColor||"#c8c8c8",B=m.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=S,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=j,this.internal.__cell__.headerTextColor=B,this.setFontSize(M),d==null)A=w=Object.keys(c[0]),N=w.map(function(){return"left"});else if(Array.isArray(d)&&an(d[0])==="object")for(w=d.map(function(fe){return fe.name}),A=d.map(function(fe){return fe.prompt||fe.name||""}),N=d.map(function(fe){return fe.align||"left"}),p=0;p<d.length;p+=1)z[d[p].name]=.7499990551181103*d[p].width;else Array.isArray(d)&&typeof d[0]=="string"&&(A=w=d,N=w.map(function(){return"left"}));if(T||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<w.length;p+=1){for(R[C=w[p]]=c.map(function(fe){return fe[C]}),this.setFont(void 0,"bold"),Q.push(this.getTextDimensions(A[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=R[C],this.setFont(void 0,"normal"),E=0;E<x.length;E+=1)Q.push(this.getTextDimensions(x[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);z[C]=Math.max.apply(null,Q)+P+P,Q=[]}if(k){var X={};for(p=0;p<w.length;p+=1)X[w[p]]={},X[w[p]].text=A[p],X[w[p]].align=N[p];var se=a.call(this,X,z);L=w.map(function(fe){return new s(l,u,z[fe],se,X[fe].text,void 0,X[fe].align)}),this.setTableHeaderRow(L),this.printHeaderRow(1,!1)}var re=d.reduce(function(fe,ve){return fe[ve.name]=ve.align,fe},{});for(p=0;p<c.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:c[p]},this);var $=a.call(this,c[p],z);for(E=0;E<w.length;E+=1){var ae=c[p][w[E]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:E,data:ae},this),o.call(this,new s(l,u,z[w[E]],$,ae,p+2,re[w[E]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var c=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(p){var x=l[p];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,u[p]-c-c)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/m+c+c},this).reduce(function(p,x){return Math.max(p,x)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){c=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(c.y=this.internal.__cell__.margins.top||0,m.push(c)),c.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,c),this.setTextColor(x)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),n=!1}}(it.API);var eT={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},tT=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Z2=ZN(tT),nT=[100,200,300,400,500,600,700,800,900],Qz=ZN(nT);function Kg(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return eT[s=s||"normal"]?s:"normal"}(t.style),r=function(s){return s?typeof s=="number"?s>=100&&s<=900&&s%100==0?s:400:/^\d00$/.test(s)?parseInt(s):s==="bold"?700:400:400}(t.weight),i=function(s){return typeof Z2[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function U3(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var Yz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},z3={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function q3(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function $3(t){return t.trimLeft()}function Xz(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function Jz(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var rp,H3,W3,Tu,ip,G3,K3,Q3,Qg=["times"];function Y3(t,e,n,r,i){var s=4,o=J3;switch(i){case it.API.image_compression.FAST:s=1,o=X3;break;case it.API.image_compression.MEDIUM:s=6,o=Z3;break;case it.API.image_compression.SLOW:s=9,o=e_}t=function(l,u,c,d){for(var m,p=l.length/u,x=new Uint8Array(l.length+p),E=[Zz,X3,J3,Z3,e_],C=0;C<p;C+=1){var w=C*u,A=l.subarray(w,w+u);if(d)x.set(d(A,c,m),w+C);else{for(var N=E.length,R=[],z=0;z<N;z+=1)R[z]=E[z](A,c,m);var Q=tq(R.concat());x.set(R[Q],w+C)}m=A}return x}(t,e,Math.ceil(n*r/8),o);var a=W2(t,{level:s});return it.API.__addimage__.arrayBufferToBinaryString(a)}function Zz(t){var e=Array.apply([],t);return e.unshift(0),e}function X3(t,e){var n=t.length,r=[];r[0]=1;for(var i=0;i<n;i+=1){var s=t[i-e]||0;r[i+1]=t[i]-s+256&255}return r}function J3(t,e,n){var r=t.length,i=[];i[0]=2;for(var s=0;s<r;s+=1){var o=n&&n[s]||0;i[s+1]=t[s]-o+256&255}return i}function Z3(t,e,n){var r=t.length,i=[];i[0]=3;for(var s=0;s<r;s+=1){var o=t[s-e]||0,a=n&&n[s]||0;i[s+1]=t[s]+256-(o+a>>>1)&255}return i}function e_(t,e,n){var r=t.length,i=[];i[0]=4;for(var s=0;s<r;s+=1){var o=eq(t[s-e]||0,n&&n[s]||0,n&&n[s-e]||0);i[s+1]=t[s]-o+256&255}return i}function eq(t,e,n){if(t===e&&e===n)return t;var r=Math.abs(e-n),i=Math.abs(t-n),s=Math.abs(t+e-n-n);return r<=i&&r<=s?t:i<=s?e:n}function tq(t){var e=t.map(function(n){return n.reduce(function(r,i){return r+Math.abs(i)},0)});return e.indexOf(Math.min.apply(null,e))}function Yg(t,e,n){var r=e*n,i=Math.floor(r/8),s=16-(r-8*i+n),o=(1<<n)-1;return rT(t,i)>>s&o}function t_(t,e,n,r){var i=n*r,s=Math.floor(i/8),o=16-(i-8*s+r),a=(1<<r)-1,l=(e&a)<<o;(function(u,c,d){if(c+1<u.byteLength)u.setUint16(c,d,!1);else{var m=d>>8&255;u.setUint8(c,m)}})(t,s,rT(t,s)&~(a<<o)&65535|l)}function rT(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function nq(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<1+(7&i);t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,c=[],d=0,m=null,p=0,x=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=t[e++];d=t[e++]|t[e++]<<8,m=t[e++],1&E||(m=null),p=E>>2&7,e++;break;case 254:for(;;){if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var C=t[e++]|t[e++]<<8,w=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,N=t[e++]|t[e++]<<8,R=t[e++],z=R>>6&1,Q=1<<1+(7&R),L=a,T=l,k=!1;R>>7&&(k=!0,L=e,T=Q,e+=3*Q);var M=e;for(e++;;){var S;if(!((S=t[e++])>=0))throw Error("Invalid block size");if(S===0)break;e+=S}c.push({x:C,y:w,width:A,height:N,has_local_palette:k,palette_offset:L,palette_size:T,data_offset:M,data_length:e-M,transparent_index:m,interlaced:!!z,delay:d,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return x},this.frameInfo=function(P){if(P<0||P>=c.length)throw new Error("Frame index out of range.");return c[P]},this.decodeAndBlitFrameBGRA=function(P,j){var B=this.frameInfo(P),X=B.width*B.height,se=new Uint8Array(X);n_(t,B.data_offset,se,X);var re=B.palette_offset,$=B.transparent_index;$===null&&($=256);var ae=B.width,fe=n-ae,ve=ae,V=4*(B.y*n+B.x),Y=4*((B.y+B.height)*n+B.x),ie=V,ne=4*fe;B.interlaced===!0&&(ne+=4*n*7);for(var oe=8,ue=0,we=se.length;ue<we;++ue){var be=se[ue];if(ve===0&&(ve=ae,(ie+=ne)>=Y&&(ne=4*fe+4*n*(oe-1),ie=V+(ae+fe)*(oe<<1),oe>>=1)),be===$)ie+=4;else{var Se=t[re+3*be],Re=t[re+3*be+1],Ae=t[re+3*be+2];j[ie++]=Ae,j[ie++]=Re,j[ie++]=Se,j[ie++]=255}--ve}},this.decodeAndBlitFrameRGBA=function(P,j){var B=this.frameInfo(P),X=B.width*B.height,se=new Uint8Array(X);n_(t,B.data_offset,se,X);var re=B.palette_offset,$=B.transparent_index;$===null&&($=256);var ae=B.width,fe=n-ae,ve=ae,V=4*(B.y*n+B.x),Y=4*((B.y+B.height)*n+B.x),ie=V,ne=4*fe;B.interlaced===!0&&(ne+=4*n*7);for(var oe=8,ue=0,we=se.length;ue<we;++ue){var be=se[ue];if(ve===0&&(ve=ae,(ie+=ne)>=Y&&(ne=4*fe+4*n*(oe-1),ie=V+(ae+fe)*(oe<<1),oe>>=1)),be===$)ie+=4;else{var Se=t[re+3*be],Re=t[re+3*be+1],Ae=t[re+3*be+2];j[ie++]=Se,j[ie++]=Re,j[ie++]=Ae,j[ie++]=255}--ve}}}function n_(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,c=0,d=0,m=0,p=t[e++],x=new Int32Array(4096),E=null;;){for(;c<16&&p!==0;)d|=t[e++]<<c,c+=8,p===1?p=t[e++]:--p;if(c<l)break;var C=d&u;if(d>>=l,c-=l,C!==s){if(C===o)break;for(var w=C<a?C:E,A=0,N=w;N>s;)N=x[N]>>8,++A;var R=N;if(m+A+(w!==C?1:0)>r)return void dn.log("Warning, gif stream longer than expected.");n[m++]=R;var z=m+=A;for(w!==C&&(n[m++]=R),N=w;A--;)N=x[N],n[--z]=255&N,N>>=8;E!==null&&a<4096&&(x[a++]=E<<8|R,a>=u+1&&l<12&&(++l,u=u<<1|1)),E=C}else a=o+1,u=(1<<(l=i+1))-1,E=null}return m!==r&&dn.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Xg(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),d=new Array(65535),m=new Array(65535),p=new Array(64),x=new Array(64),E=[],C=0,w=7,A=new Array(64),N=new Array(64),R=new Array(64),z=new Array(256),Q=new Array(2048),L=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],S=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(V,Y){for(var ie=0,ne=0,oe=new Array,ue=1;ue<=16;ue++){for(var we=1;we<=V[ue];we++)oe[Y[ne]]=[],oe[Y[ne]][0]=ie,oe[Y[ne]][1]=ue,ne++,ie++;ie*=2}return oe}function re(V){for(var Y=V[0],ie=V[1]-1;ie>=0;)Y&1<<ie&&(C|=1<<w),ie--,--w<0&&(C==255?($(255),$(0)):$(C),w=7,C=0)}function $(V){E.push(V)}function ae(V){$(V>>8&255),$(255&V)}function fe(V,Y,ie,ne,oe){for(var ue,we=oe[0],be=oe[240],Se=function(Ie,ze){var Be,_t,tt,Ot,wt,et,St,mt,nt,ht,st=0;for(nt=0;nt<8;++nt){Be=Ie[st],_t=Ie[st+1],tt=Ie[st+2],Ot=Ie[st+3],wt=Ie[st+4],et=Ie[st+5],St=Ie[st+6];var Kt=Be+(mt=Ie[st+7]),Ut=Be-mt,Xe=_t+St,gt=_t-St,Zt=tt+et,ut=tt-et,kt=Ot+wt,xt=Ot-wt,En=Kt+kt,vn=Kt-kt,Yt=Xe+Zt,ft=Xe-Zt;Ie[st]=En+Yt,Ie[st+4]=En-Yt;var Lt=.707106781*(ft+vn);Ie[st+2]=vn+Lt,Ie[st+6]=vn-Lt;var Hs=.382683433*((En=xt+ut)-(ft=gt+Ut)),Yn=.5411961*En+Hs,rs=1.306562965*ft+Hs,Ur=.707106781*(Yt=ut+gt),lt=Ut+Ur,wn=Ut-Ur;Ie[st+5]=wn+Yn,Ie[st+3]=wn-Yn,Ie[st+1]=lt+rs,Ie[st+7]=lt-rs,st+=8}for(st=0,nt=0;nt<8;++nt){Be=Ie[st],_t=Ie[st+8],tt=Ie[st+16],Ot=Ie[st+24],wt=Ie[st+32],et=Ie[st+40],St=Ie[st+48];var is=Be+(mt=Ie[st+56]),xr=Be-mt,br=_t+St,Nn=_t-St,ur=tt+et,Tn=tt-et,Ao=Ot+wt,Ws=Ot-wt,zr=is+Ao,ji=is-Ao,si=br+ur,qr=br-ur;Ie[st]=zr+si,Ie[st+32]=zr-si;var Xn=.707106781*(qr+ji);Ie[st+16]=ji+Xn,Ie[st+48]=ji-Xn;var Gs=.382683433*((zr=Ws+Tn)-(qr=Nn+xr)),Di=.5411961*zr+Gs,_s=1.306562965*qr+Gs,Ks=.707106781*(si=Tn+Nn),Eo=xr+Ks,No=xr-Ks;Ie[st+40]=No+Di,Ie[st+24]=No-Di,Ie[st+8]=Eo+_s,Ie[st+56]=Eo-_s,st++}for(nt=0;nt<64;++nt)ht=Ie[nt]*ze[nt],p[nt]=ht>0?ht+.5|0:ht-.5|0;return p}(V,Y),Re=0;Re<64;++Re)x[L[Re]]=Se[Re];var Ae=x[0]-ie;ie=x[0],Ae==0?re(ne[0]):(re(ne[m[ue=32767+Ae]]),re(d[ue]));for(var Pe=63;Pe>0&&x[Pe]==0;)Pe--;if(Pe==0)return re(we),ie;for(var ge,J=1;J<=Pe;){for(var Ke=J;x[J]==0&&J<=Pe;)++J;var ot=J-Ke;if(ot>=16){ge=ot>>4;for(var Ue=1;Ue<=ge;++Ue)re(be);ot&=15}ue=32767+x[J],re(oe[(ot<<4)+m[ue]]),re(d[ue]),J++}return Pe!=63&&re(we),ie}function ve(V){V=Math.min(Math.max(V,1),100),s!=V&&(function(Y){for(var ie=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var oe=o((ie[ne]*Y+50)/100);oe=Math.min(Math.max(oe,1),255),a[L[ne]]=oe}for(var ue=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],we=0;we<64;we++){var be=o((ue[we]*Y+50)/100);be=Math.min(Math.max(be,1),255),l[L[we]]=be}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Re=0,Ae=0;Ae<8;Ae++)for(var Pe=0;Pe<8;Pe++)u[Re]=1/(a[L[Re]]*Se[Ae]*Se[Pe]*8),c[Re]=1/(l[L[Re]]*Se[Ae]*Se[Pe]*8),Re++}(V<50?Math.floor(5e3/V):Math.floor(200-2*V)),s=V)}this.encode=function(V,Y){Y&&ve(Y),E=new Array,C=0,w=7,ae(65496),ae(65504),ae(16),$(74),$(70),$(73),$(70),$(0),$(1),$(1),$(0),ae(1),ae(1),$(0),$(0),function(){ae(65499),ae(132),$(0);for(var _t=0;_t<64;_t++)$(a[_t]);$(1);for(var tt=0;tt<64;tt++)$(l[tt])}(),function(_t,tt){ae(65472),ae(17),$(8),ae(tt),ae(_t),$(3),$(1),$(17),$(0),$(2),$(17),$(1),$(3),$(17),$(1)}(V.width,V.height),function(){ae(65476),ae(418),$(0);for(var _t=0;_t<16;_t++)$(T[_t+1]);for(var tt=0;tt<=11;tt++)$(k[tt]);$(16);for(var Ot=0;Ot<16;Ot++)$(M[Ot+1]);for(var wt=0;wt<=161;wt++)$(S[wt]);$(1);for(var et=0;et<16;et++)$(P[et+1]);for(var St=0;St<=11;St++)$(j[St]);$(17);for(var mt=0;mt<16;mt++)$(B[mt+1]);for(var nt=0;nt<=161;nt++)$(X[nt])}(),ae(65498),ae(12),$(3),$(1),$(0),$(2),$(17),$(3),$(17),$(0),$(63),$(0);var ie=0,ne=0,oe=0;C=0,w=7,this.encode.displayName="_encode_";for(var ue,we,be,Se,Re,Ae,Pe,ge,J,Ke=V.data,ot=V.width,Ue=V.height,Ie=4*ot,ze=0;ze<Ue;){for(ue=0;ue<Ie;){for(Re=Ie*ze+ue,Pe=-1,ge=0,J=0;J<64;J++)Ae=Re+(ge=J>>3)*Ie+(Pe=4*(7&J)),ze+ge>=Ue&&(Ae-=Ie*(ze+1+ge-Ue)),ue+Pe>=Ie&&(Ae-=ue+Pe-Ie+4),we=Ke[Ae++],be=Ke[Ae++],Se=Ke[Ae++],A[J]=(Q[we]+Q[be+256|0]+Q[Se+512|0]>>16)-128,N[J]=(Q[we+768|0]+Q[be+1024|0]+Q[Se+1280|0]>>16)-128,R[J]=(Q[we+1280|0]+Q[be+1536|0]+Q[Se+1792|0]>>16)-128;ie=fe(A,u,ie,e,r),ne=fe(N,c,ne,n,i),oe=fe(R,c,oe,n,i),ue+=32}ze+=8}if(w>=0){var Be=[];Be[1]=w+1,Be[0]=(1<<w+1)-1,re(Be)}return ae(65497),new Uint8Array(E)},t=t||50,function(){for(var V=String.fromCharCode,Y=0;Y<256;Y++)z[Y]=V(Y)}(),e=se(T,k),n=se(P,j),r=se(M,S),i=se(B,X),function(){for(var V=1,Y=2,ie=1;ie<=15;ie++){for(var ne=V;ne<Y;ne++)m[32767+ne]=ie,d[32767+ne]=[],d[32767+ne][1]=ie,d[32767+ne][0]=ne;for(var oe=-(Y-1);oe<=-V;oe++)m[32767+oe]=ie,d[32767+oe]=[],d[32767+oe][1]=ie,d[32767+oe][0]=Y-1+oe;V<<=1,Y<<=1}}(),function(){for(var V=0;V<256;V++)Q[V]=19595*V,Q[V+256|0]=38470*V,Q[V+512|0]=7471*V+32768,Q[V+768|0]=-11059*V,Q[V+1024|0]=-21709*V,Q[V+1280|0]=32768*V+8421375,Q[V+1536|0]=-27439*V,Q[V+1792|0]=-5329*V}(),ve(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ls(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function r_(t){function e(k){if(!k)throw Error("assert :P")}function n(k,M,S){for(var P=0;4>P;P++)if(k[M+P]!=S.charCodeAt(P))return!0;return!1}function r(k,M,S,P,j){for(var B=0;B<j;B++)k[M+B]=S[P+B]}function i(k,M,S,P){for(var j=0;j<P;j++)k[M+j]=S}function s(k){return new Int32Array(k)}function o(k,M){for(var S=[],P=0;P<k;P++)S.push(new M);return S}function a(k,M){var S=[];return function P(j,B,X){for(var se=X[B],re=0;re<se&&(j.push(X.length>B+1?[]:new M),!(X.length<B+1));re++)P(j[re],B+1,X)}(S,0,k),S}var l=function(){var k=this;function M(h,g){for(var b=1<<g-1>>>0;h&b;)b>>>=1;return b?(h&b-1)+b:h}function S(h,g,b,I,O){e(!(I%b));do h[g+(I-=b)]=O;while(0<I)}function P(h,g,b,I,O){if(e(2328>=O),512>=O)var U=s(512);else if((U=s(O))==null)return 0;return function(q,H,K,ee,ce,xe){var te,he,me=H,Ee=1<<K,ye=s(16),Te=s(16);for(e(ce!=0),e(ee!=null),e(q!=null),e(0<K),he=0;he<ce;++he){if(15<ee[he])return 0;++ye[ee[he]]}if(ye[0]==ce)return 0;for(Te[1]=0,te=1;15>te;++te){if(ye[te]>1<<te)return 0;Te[te+1]=Te[te]+ye[te]}for(he=0;he<ce;++he)te=ee[he],0<ee[he]&&(xe[Te[te]++]=he);if(Te[15]==1)return(ee=new j).g=0,ee.value=xe[0],S(q,me,1,Ee,ee),Ee;var Ce,Me=-1,je=Ee-1,rt=0,We=1,Ct=1,Je=1<<K;for(he=0,te=1,ce=2;te<=K;++te,ce<<=1){if(We+=Ct<<=1,0>(Ct-=ye[te]))return 0;for(;0<ye[te];--ye[te])(ee=new j).g=te,ee.value=xe[he++],S(q,me+rt,ce,Je,ee),rt=M(rt,te)}for(te=K+1,ce=2;15>=te;++te,ce<<=1){if(We+=Ct<<=1,0>(Ct-=ye[te]))return 0;for(;0<ye[te];--ye[te]){if(ee=new j,(rt&je)!=Me){for(me+=Je,Ce=1<<(Me=te)-K;15>Me&&!(0>=(Ce-=ye[Me]));)++Me,Ce<<=1;Ee+=Je=1<<(Ce=Me-K),q[H+(Me=rt&je)].g=Ce+K,q[H+Me].value=me-H-Me}ee.g=te-K,ee.value=xe[he++],S(q,me+(rt>>K),ce,Je,ee),rt=M(rt,te)}}return We!=2*Te[15]-1?0:Ee}(h,g,b,I,O,U)}function j(){this.value=this.g=0}function B(){this.value=this.g=0}function X(){this.G=o(5,j),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(kl,B)}function se(h,g,b,I){e(h!=null),e(g!=null),e(2147483648>I),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=g,h.pa=b,h.Jd=g,h.Yc=b+I,h.Zc=4<=I?b+I-4+1:b,we(h)}function re(h,g){for(var b=0;0<g--;)b|=Se(h,128)<<g;return b}function $(h,g){var b=re(h,g);return be(h)?-b:b}function ae(h,g,b,I){var O,U=0;for(e(h!=null),e(g!=null),e(4294967288>I),h.Sb=I,h.Ra=0,h.u=0,h.h=0,4<I&&(I=4),O=0;O<I;++O)U+=g[b+O]<<8*O;h.Ra=U,h.bb=I,h.oa=g,h.pa=b}function fe(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<ma-8>>>0,++h.bb,h.u-=8;ne(h)&&(h.h=1,h.u=0)}function ve(h,g){if(e(0<=g),!h.h&&g<=Ui){var b=ie(h)&Bi[g];return h.u+=g,fe(h),b}return h.h=1,h.u=0}function V(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Y(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ie(h){return h.Ra>>>(h.u&ma-1)>>>0}function ne(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>ma}function oe(h,g){h.u=g,h.h=ne(h)}function ue(h){h.u>=Ro&&(e(h.u>=Ro),fe(h))}function we(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function be(h){return re(h,1)}function Se(h,g){var b=h.Ca;0>h.b&&we(h);var I=h.b,O=b*g>>>8,U=(h.I>>>I>O)+0;for(U?(b-=O,h.I-=O+1<<I>>>0):b=O+1,I=b,O=0;256<=I;)O+=8,I>>=8;return I=7^O+ga[I],h.b-=I,h.Ca=(b<<I)-1,U}function Re(h,g,b){h[g+0]=b>>24&255,h[g+1]=b>>16&255,h[g+2]=b>>8&255,h[g+3]=255&b}function Ae(h,g){return h[g+0]|h[g+1]<<8}function Pe(h,g){return Ae(h,g)|h[g+2]<<16}function ge(h,g){return Ae(h,g)|Ae(h,g+2)<<16}function J(h,g){var b=1<<g;return e(h!=null),e(0<g),h.X=s(b),h.X==null?0:(h.Mb=32-g,h.Xa=g,1)}function Ke(h,g){e(h!=null),e(g!=null),e(h.Xa==g.Xa),r(g.X,0,h.X,0,1<<g.Xa)}function ot(){this.X=[],this.Xa=this.Mb=0}function Ue(h,g,b,I){e(b!=null),e(I!=null);var O=b[0],U=I[0];return O==0&&(O=(h*U+g/2)/g),U==0&&(U=(g*O+h/2)/h),0>=O||0>=U?0:(b[0]=O,I[0]=U,1)}function Ie(h,g){return h+(1<<g)-1>>>g}function ze(h,g){return((4278255360&h)+(4278255360&g)>>>0&4278255360)+((16711935&h)+(16711935&g)>>>0&16711935)>>>0}function Be(h,g){k[g]=function(b,I,O,U,q,H,K){var ee;for(ee=0;ee<q;++ee){var ce=k[h](H[K+ee-1],O,U+ee);H[K+ee]=ze(b[I+ee],ce)}}}function _t(){this.ud=this.hd=this.jd=0}function tt(h,g){return((4278124286&(h^g))>>>1)+(h&g)>>>0}function Ot(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function wt(h,g){return Ot(h+(h-g+.5>>1))}function et(h,g,b){return Math.abs(g-b)-Math.abs(h-b)}function St(h,g,b,I,O,U,q){for(I=U[q-1],b=0;b<O;++b)U[q+b]=I=ze(h[g+b],I)}function mt(h,g,b,I,O){var U;for(U=0;U<b;++U){var q=h[g+U],H=q>>8&255,K=16711935&(K=(K=16711935&q)+((H<<16)+H));I[O+U]=(4278255360&q)+K>>>0}}function nt(h,g){g.jd=255&h,g.hd=h>>8&255,g.ud=h>>16&255}function ht(h,g,b,I,O,U){var q;for(q=0;q<I;++q){var H=g[b+q],K=H>>>8,ee=H,ce=255&(ce=(ce=H>>>16)+((h.jd<<24>>24)*(K<<24>>24)>>>5));ee=255&(ee=(ee+=(h.hd<<24>>24)*(K<<24>>24)>>>5)+((h.ud<<24>>24)*(ce<<24>>24)>>>5)),O[U+q]=(4278255360&H)+(ce<<16)+ee}}function st(h,g,b,I,O){k[g]=function(U,q,H,K,ee,ce,xe,te,he){for(K=xe;K<te;++K)for(xe=0;xe<he;++xe)ee[ce++]=O(H[I(U[q++])])},k[h]=function(U,q,H,K,ee,ce,xe){var te=8>>U.b,he=U.Ea,me=U.K[0],Ee=U.w;if(8>te)for(U=(1<<U.b)-1,Ee=(1<<te)-1;q<H;++q){var ye,Te=0;for(ye=0;ye<he;++ye)ye&U||(Te=I(K[ee++])),ce[xe++]=O(me[Te&Ee]),Te>>=te}else k["VP8LMapColor"+b](K,ee,me,Ee,ce,xe,q,H,he)}}function Kt(h,g,b,I,O){for(b=g+b;g<b;){var U=h[g++];I[O++]=U>>16&255,I[O++]=U>>8&255,I[O++]=255&U}}function Ut(h,g,b,I,O){for(b=g+b;g<b;){var U=h[g++];I[O++]=U>>16&255,I[O++]=U>>8&255,I[O++]=255&U,I[O++]=U>>24&255}}function Xe(h,g,b,I,O){for(b=g+b;g<b;){var U=(q=h[g++])>>16&240|q>>12&15,q=240&q|q>>28&15;I[O++]=U,I[O++]=q}}function gt(h,g,b,I,O){for(b=g+b;g<b;){var U=(q=h[g++])>>16&248|q>>13&7,q=q>>5&224|q>>3&31;I[O++]=U,I[O++]=q}}function Zt(h,g,b,I,O){for(b=g+b;g<b;){var U=h[g++];I[O++]=255&U,I[O++]=U>>8&255,I[O++]=U>>16&255}}function ut(h,g,b,I,O,U){if(U==0)for(b=g+b;g<b;)Re(I,((U=h[g++])[0]>>24|U[1]>>8&65280|U[2]<<8&16711680|U[3]<<24)>>>0),O+=32;else r(I,O,h,g,b)}function kt(h,g){k[g][0]=k[h+"0"],k[g][1]=k[h+"1"],k[g][2]=k[h+"2"],k[g][3]=k[h+"3"],k[g][4]=k[h+"4"],k[g][5]=k[h+"5"],k[g][6]=k[h+"6"],k[g][7]=k[h+"7"],k[g][8]=k[h+"8"],k[g][9]=k[h+"9"],k[g][10]=k[h+"10"],k[g][11]=k[h+"11"],k[g][12]=k[h+"12"],k[g][13]=k[h+"13"],k[g][14]=k[h+"0"],k[g][15]=k[h+"0"]}function xt(h){return h==w0||h==x0||h==pd||h==b0}function En(){this.eb=[],this.size=this.A=this.fb=0}function vn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Yt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new En,this.f.kb=new vn,this.sd=null}function ft(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Hs(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Yn(h,g){var b=h.T,I=g.ba.f.RGBA,O=I.eb,U=I.fb+h.ka*I.A,q=cs[g.ba.S],H=h.y,K=h.O,ee=h.f,ce=h.N,xe=h.ea,te=h.W,he=g.cc,me=g.dc,Ee=g.Mc,ye=g.Nc,Te=h.ka,Ce=h.ka+h.T,Me=h.U,je=Me+1>>1;for(Te==0?q(H,K,null,null,ee,ce,xe,te,ee,ce,xe,te,O,U,null,null,Me):(q(g.ec,g.fc,H,K,he,me,Ee,ye,ee,ce,xe,te,O,U-I.A,O,U,Me),++b);Te+2<Ce;Te+=2)he=ee,me=ce,Ee=xe,ye=te,ce+=h.Rc,te+=h.Rc,U+=2*I.A,q(H,(K+=2*h.fa)-h.fa,H,K,he,me,Ee,ye,ee,ce,xe,te,O,U-I.A,O,U,Me);return K+=h.fa,h.j+Ce<h.o?(r(g.ec,g.fc,H,K,Me),r(g.cc,g.dc,ee,ce,je),r(g.Mc,g.Nc,xe,te,je),b--):1&Ce||q(H,K,null,null,ee,ce,xe,te,ee,ce,xe,te,O,U+I.A,null,null,Me),b}function rs(h,g,b){var I=h.F,O=[h.J];if(I!=null){var U=h.U,q=g.ba.S,H=q==dd||q==pd;g=g.ba.f.RGBA;var K=[0],ee=h.ka;K[0]=h.T,h.Kb&&(ee==0?--K[0]:(--ee,O[0]-=h.width),h.j+h.ka+h.T==h.o&&(K[0]=h.o-h.j-ee));var ce=g.eb;ee=g.fb+ee*g.A,h=R5(I,O[0],h.width,U,K,ce,ee+(H?0:3),g.A),e(b==K),h&&xt(q)&&nh(ce,ee,H,U,K,g.A)}return 0}function Ur(h){var g=h.ma,b=g.ba.S,I=11>b,O=b==hd||b==fd||b==dd||b==v0||b==12||xt(b);if(g.memory=null,g.Ib=null,g.Jb=null,g.Nd=null,!Kc(g.Oa,h,O?11:12))return 0;if(O&&xt(b)&&Pl(),h.da)alert("todo:use_scaling");else{if(I){if(g.Ib=Hs,h.Kb){if(b=h.U+1>>1,g.memory=s(h.U+2*b),g.memory==null)return 0;g.ec=g.memory,g.fc=0,g.cc=g.ec,g.dc=g.fc+h.U,g.Mc=g.cc,g.Nc=g.dc+b,g.Ib=Yn,Pl()}}else alert("todo:EmitYUV");O&&(g.Jb=rs,I&&pn())}if(I&&!Q5){for(h=0;256>h;++h)VT[h]=89858*(h-128)+gd>>md,zT[h]=-22014*(h-128)+gd,UT[h]=-45773*(h-128),BT[h]=113618*(h-128)+gd>>md;for(h=ih;h<A0;++h)g=76283*(h-16)+gd>>md,qT[h-ih]=It(g,255),$T[h-ih]=It(g+8>>4,15);Q5=1}return 1}function lt(h){var g=h.ma,b=h.U,I=h.T;return e(!(1&h.ka)),0>=b||0>=I?0:(b=g.Ib(h,g),g.Jb!=null&&g.Jb(h,g,b),g.Dc+=b,1)}function wn(h){h.ma.memory=null}function is(h,g,b,I){return ve(h,8)!=47?0:(g[0]=ve(h,14)+1,b[0]=ve(h,14)+1,I[0]=ve(h,1),ve(h,3)!=0?0:!h.h)}function xr(h,g){if(4>h)return h+1;var b=h-2>>1;return(2+(1&h)<<b)+ve(g,b)+1}function br(h,g){return 120<g?g-120:1<=(b=((b=ET[g-1])>>4)*h+(8-(15&b)))?b:1;var b}function Nn(h,g,b){var I=ie(b),O=h[g+=255&I].g-8;return 0<O&&(oe(b,b.u+8),I=ie(b),g+=h[g].value,g+=I&(1<<O)-1),oe(b,b.u+h[g].g),h[g].value}function ur(h,g,b){return b.g+=h.g,b.value+=h.value<<g>>>0,e(8>=b.g),h.g}function Tn(h,g,b){var I=h.xc;return e((g=I==0?0:h.vc[h.md*(b>>I)+(g>>I)])<h.Wb),h.Ya[g]}function Ao(h,g,b,I){var O=h.ab,U=h.c*g,q=h.C;g=q+g;var H=b,K=I;for(I=h.Ta,b=h.Ua;0<O--;){var ee=h.gc[O],ce=q,xe=g,te=H,he=K,me=(K=I,H=b,ee.Ea);switch(e(ce<xe),e(xe<=ee.nc),ee.hc){case 2:Jn(te,he,(xe-ce)*me,K,H);break;case 0:var Ee=ce,ye=xe,Te=K,Ce=H,Me=(Je=ee).Ea;Ee==0&&(Yc(te,he,null,null,1,Te,Ce),St(te,he+1,0,0,Me-1,Te,Ce+1),he+=Me,Ce+=Me,++Ee);for(var je=1<<Je.b,rt=je-1,We=Ie(Me,Je.b),Ct=Je.K,Je=Je.w+(Ee>>Je.b)*We;Ee<ye;){var Bt=Ct,mr=Je,Pt=1;for(bu(te,he,Te,Ce-Me,1,Te,Ce);Pt<Me;){var Ze=(Pt&~rt)+je;Ze>Me&&(Ze=Me),(0,Jc[Bt[mr++]>>8&15])(te,he+ +Pt,Te,Ce+Pt-Me,Ze-Pt,Te,Ce+Pt),Pt=Ze}he+=Me,Ce+=Me,++Ee&rt||(Je+=We)}xe!=ee.nc&&r(K,H-me,K,H+(xe-ce-1)*me,me);break;case 1:for(me=te,ye=he,Me=(te=ee.Ea)-(Ce=te&~(Te=(he=1<<ee.b)-1)),Ee=Ie(te,ee.b),je=ee.K,ee=ee.w+(ce>>ee.b)*Ee;ce<xe;){for(rt=je,We=ee,Ct=new _t,Je=ye+Ce,Bt=ye+te;ye<Je;)nt(rt[We++],Ct),Zc(Ct,me,ye,he,K,H),ye+=he,H+=he;ye<Bt&&(nt(rt[We++],Ct),Zc(Ct,me,ye,Me,K,H),ye+=Me,H+=Me),++ce&Te||(ee+=Ee)}break;case 3:if(te==K&&he==H&&0<ee.b){for(ye=K,te=me=H+(xe-ce)*me-(Ce=(xe-ce)*Ie(ee.Ea,ee.b)),he=K,Te=H,Ee=[],Ce=(Me=Ce)-1;0<=Ce;--Ce)Ee[Ce]=he[Te+Ce];for(Ce=Me-1;0<=Ce;--Ce)ye[te+Ce]=Ee[Ce];ad(ee,ce,xe,K,me,K,H)}else ad(ee,ce,xe,te,he,K,H)}H=I,K=b}K!=b&&r(I,b,H,K,U)}function Ws(h,g){var b=h.V,I=h.Ba+h.c*h.C,O=g-h.C;if(e(g<=h.l.o),e(16>=O),0<O){var U=h.l,q=h.Ta,H=h.Ua,K=U.width;if(Ao(h,O,b,I),O=H=[H],e((b=h.C)<(I=g)),e(U.v<U.va),I>U.o&&(I=U.o),b<U.j){var ee=U.j-b;b=U.j,O[0]+=ee*K}if(b>=I?b=0:(O[0]+=4*U.v,U.ka=b-U.j,U.U=U.va-U.v,U.T=I-b,b=1),b){if(H=H[0],11>(b=h.ca).S){var ce=b.f.RGBA,xe=(I=b.S,O=U.U,U=U.T,ee=ce.eb,ce.A),te=U;for(ce=ce.fb+h.Ma*ce.A;0<te--;){var he=q,me=H,Ee=O,ye=ee,Te=ce;switch(I){case cd:eh(he,me,Ee,ye,Te);break;case hd:ya(he,me,Ee,ye,Te);break;case w0:ya(he,me,Ee,ye,Te),nh(ye,Te,0,Ee,1,0);break;case B5:Il(he,me,Ee,ye,Te);break;case fd:ut(he,me,Ee,ye,Te,1);break;case x0:ut(he,me,Ee,ye,Te,1),nh(ye,Te,0,Ee,1,0);break;case dd:ut(he,me,Ee,ye,Te,0);break;case pd:ut(he,me,Ee,ye,Te,0),nh(ye,Te,1,Ee,1,0);break;case v0:va(he,me,Ee,ye,Te);break;case b0:va(he,me,Ee,ye,Te),L5(ye,Te,Ee,1,0);break;case U5:wa(he,me,Ee,ye,Te);break;default:e(0)}H+=K,ce+=xe}h.Ma+=U}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=b.height)}}h.C=g,e(h.C<=h.i)}function zr(h){var g;if(0<h.ua)return 0;for(g=0;g<h.Wb;++g){var b=h.Ya[g].G,I=h.Ya[g].H;if(0<b[1][I[1]+0].g||0<b[2][I[2]+0].g||0<b[3][I[3]+0].g)return 0}return 1}function ji(h,g,b,I,O,U){if(h.Z!=0){var q=h.qd,H=h.rd;for(e(_a[h.Z]!=null);g<b;++g)_a[h.Z](q,H,I,O,I,O,U),q=I,H=O,O+=U;h.qd=q,h.rd=H}}function si(h,g){var b=h.l.ma,I=b.Z==0||b.Z==1?h.l.j:h.C;if(I=h.C<I?I:h.C,e(g<=h.l.o),g>I){var O=h.l.width,U=b.ca,q=b.tb+O*I,H=h.V,K=h.Ba+h.c*I,ee=h.gc;e(h.ab==1),e(ee[0].hc==3),so(ee[0],I,g,H,K,U,q),ji(b,I,g,U,q,O)}h.C=h.Ma=g}function qr(h,g,b,I,O,U,q){var H=h.$/I,K=h.$%I,ee=h.m,ce=h.s,xe=b+h.$,te=xe;O=b+I*O;var he=b+I*U,me=280+ce.ua,Ee=h.Pb?H:16777216,ye=0<ce.ua?ce.Wa:null,Te=ce.wc,Ce=xe<he?Tn(ce,K,H):null;e(h.C<U),e(he<=O);var Me=!1;e:for(;;){for(;Me||xe<he;){var je=0;if(H>=Ee){var rt=xe-b;e((Ee=h).Pb),Ee.wd=Ee.m,Ee.xd=rt,0<Ee.s.ua&&Ke(Ee.s.Wa,Ee.s.vb),Ee=H+TT}if(K&Te||(Ce=Tn(ce,K,H)),e(Ce!=null),Ce.Qb&&(g[xe]=Ce.qb,Me=!0),!Me)if(ue(ee),Ce.jc){je=ee,rt=g;var We=xe,Ct=Ce.pd[ie(je)&kl-1];e(Ce.jc),256>Ct.g?(oe(je,je.u+Ct.g),rt[We]=Ct.value,je=0):(oe(je,je.u+Ct.g-256),e(256<=Ct.value),je=Ct.value),je==0&&(Me=!0)}else je=Nn(Ce.G[0],Ce.H[0],ee);if(ee.h)break;if(Me||256>je){if(!Me)if(Ce.nd)g[xe]=(Ce.qb|je<<8)>>>0;else{if(ue(ee),Me=Nn(Ce.G[1],Ce.H[1],ee),ue(ee),rt=Nn(Ce.G[2],Ce.H[2],ee),We=Nn(Ce.G[3],Ce.H[3],ee),ee.h)break;g[xe]=(We<<24|Me<<16|je<<8|rt)>>>0}if(Me=!1,++xe,++K>=I&&(K=0,++H,q!=null&&H<=U&&!(H%16)&&q(h,H),ye!=null))for(;te<xe;)je=g[te++],ye.X[(506832829*je&4294967295)>>>ye.Mb]=je}else if(280>je){if(je=xr(je-256,ee),rt=Nn(Ce.G[4],Ce.H[4],ee),ue(ee),rt=br(I,rt=xr(rt,ee)),ee.h)break;if(xe-b<rt||O-xe<je)break e;for(We=0;We<je;++We)g[xe+We]=g[xe+We-rt];for(xe+=je,K+=je;K>=I;)K-=I,++H,q!=null&&H<=U&&!(H%16)&&q(h,H);if(e(xe<=O),K&Te&&(Ce=Tn(ce,K,H)),ye!=null)for(;te<xe;)je=g[te++],ye.X[(506832829*je&4294967295)>>>ye.Mb]=je}else{if(!(je<me))break e;for(Me=je-280,e(ye!=null);te<xe;)je=g[te++],ye.X[(506832829*je&4294967295)>>>ye.Mb]=je;je=xe,e(!(Me>>>(rt=ye).Xa)),g[je]=rt.X[Me],Me=!0}Me||e(ee.h==ne(ee))}if(h.Pb&&ee.h&&xe<O)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Ke(h.s.vb,h.s.Wa);else{if(ee.h)break e;q!=null&&q(h,H>U?U:H),h.a=0,h.$=xe-b}return 1}return h.a=3,0}function Xn(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var g=h.Wa;g!=null&&(g.X=null),h.vb=null,e(h!=null)}function Gs(){var h=new Qe;return h==null?null:(h.a=0,h.xb=$5,kt("Predictor","VP8LPredictors"),kt("Predictor","VP8LPredictors_C"),kt("PredictorAdd","VP8LPredictorsAdd"),kt("PredictorAdd","VP8LPredictorsAdd_C"),Jn=mt,Zc=ht,eh=Kt,ya=Ut,va=Xe,wa=gt,Il=Zt,k.VP8LMapColor32b=io,k.VP8LMapColor8b=Xc,h)}function Di(h,g,b,I,O){var U=1,q=[h],H=[g],K=I.m,ee=I.s,ce=null,xe=0;e:for(;;){if(b)for(;U&&ve(K,1);){var te=q,he=H,me=I,Ee=1,ye=me.m,Te=me.gc[me.ab],Ce=ve(ye,2);if(me.Oc&1<<Ce)U=0;else{switch(me.Oc|=1<<Ce,Te.hc=Ce,Te.Ea=te[0],Te.nc=he[0],Te.K=[null],++me.ab,e(4>=me.ab),Ce){case 0:case 1:Te.b=ve(ye,3)+2,Ee=Di(Ie(Te.Ea,Te.b),Ie(Te.nc,Te.b),0,me,Te.K),Te.K=Te.K[0];break;case 3:var Me,je=ve(ye,8)+1,rt=16<je?0:4<je?1:2<je?2:3;if(te[0]=Ie(Te.Ea,rt),Te.b=rt,Me=Ee=Di(je,1,0,me,Te.K)){var We,Ct=je,Je=Te,Bt=1<<(8>>Je.b),mr=s(Bt);if(mr==null)Me=0;else{var Pt=Je.K[0],Ze=Je.w;for(mr[0]=Je.K[0][0],We=1;We<1*Ct;++We)mr[We]=ze(Pt[Ze+We],mr[We-1]);for(;We<4*Bt;++We)mr[We]=0;Je.K[0]=null,Je.K[0]=mr,Me=1}}Ee=Me;break;case 2:break;default:e(0)}U=Ee}}if(q=q[0],H=H[0],U&&ve(K,1)&&!(U=1<=(xe=ve(K,4))&&11>=xe)){I.a=3;break e}var Ve;if(Ve=U)t:{var er,Tt,qt,xn=I,kr=q,li=H,zn=xe,Hr=b,ui=xn.m,gr=xn.s,Ht=[null],nn=1,qn=0,rn=NT[zn];n:for(;;){if(Hr&&ve(ui,1)){var Ir=ve(ui,3)+2,Ps=Ie(kr,Ir),tr=Ie(li,Ir),Si=Ps*tr;if(!Di(Ps,tr,0,xn,Ht))break n;for(Ht=Ht[0],gr.xc=Ir,er=0;er<Si;++er){var fn=Ht[er]>>8&65535;Ht[er]=fn,fn>=nn&&(nn=fn+1)}}if(ui.h)break n;for(Tt=0;5>Tt;++Tt){var yr=z5[Tt];!Tt&&0<zn&&(yr+=1<<zn),qn<yr&&(qn=yr)}var qi=o(nn*rn,j),ci=nn,$i=o(ci,X);if($i==null)var Hi=null;else e(65536>=ci),Hi=$i;var Ai=s(qn);if(Hi==null||Ai==null||qi==null){xn.a=1;break n}var Wi=qi;for(er=qt=0;er<nn;++er){var gn=Hi[er],Gi=gn.G,ks=gn.H,Rl=0,Mo=1,Lr=0;for(Tt=0;5>Tt;++Tt){yr=z5[Tt],Gi[Tt]=Wi,ks[Tt]=qt,!Tt&&0<zn&&(yr+=1<<zn);i:{var vd,E0=yr,wd=xn,sh=Ai,GT=Wi,KT=qt,N0=0,Sa=wd.m,QT=ve(Sa,1);if(i(sh,0,0,E0),QT){var YT=ve(Sa,1)+1,XT=ve(Sa,1),J5=ve(Sa,XT==0?1:8);sh[J5]=1,YT==2&&(sh[J5=ve(Sa,8)]=1);var xd=1}else{var Z5=s(19),ew=ve(Sa,4)+4;if(19<ew){wd.a=3;var bd=0;break i}for(vd=0;vd<ew;++vd)Z5[AT[vd]]=ve(Sa,3);var T0=void 0,oh=void 0,tw=wd,JT=Z5,_d=E0,nw=sh,C0=0,Aa=tw.m,rw=8,iw=o(128,j);r:for(;P(iw,0,7,JT,19);){if(ve(Aa,1)){var ZT=2+2*ve(Aa,3);if((T0=2+ve(Aa,ZT))>_d)break r}else T0=_d;for(oh=0;oh<_d&&T0--;){ue(Aa);var sw=iw[0+(127&ie(Aa))];oe(Aa,Aa.u+sw.g);var Su=sw.value;if(16>Su)nw[oh++]=Su,Su!=0&&(rw=Su);else{var eC=Su==16,ow=Su-16,tC=_T[ow],aw=ve(Aa,bT[ow])+tC;if(oh+aw>_d)break r;for(var nC=eC?rw:0;0<aw--;)nw[oh++]=nC}}C0=1;break r}C0||(tw.a=3),xd=C0}(xd=xd&&!Sa.h)&&(N0=P(GT,KT,8,sh,E0)),xd&&N0!=0?bd=N0:(wd.a=3,bd=0)}if(bd==0)break n;if(Mo&&ST[Tt]==1&&(Mo=Wi[qt].g==0),Rl+=Wi[qt].g,qt+=bd,3>=Tt){var ah,P0=Ai[0];for(ah=1;ah<yr;++ah)Ai[ah]>P0&&(P0=Ai[ah]);Lr+=P0}}if(gn.nd=Mo,gn.Qb=0,Mo&&(gn.qb=(Gi[3][ks[3]+0].value<<24|Gi[1][ks[1]+0].value<<16|Gi[2][ks[2]+0].value)>>>0,Rl==0&&256>Gi[0][ks[0]+0].value&&(gn.Qb=1,gn.qb+=Gi[0][ks[0]+0].value<<8)),gn.jc=!gn.Qb&&6>Lr,gn.jc){var Sd,Fo=gn;for(Sd=0;Sd<kl;++Sd){var Ea=Sd,Na=Fo.pd[Ea],Ad=Fo.G[0][Fo.H[0]+Ea];256<=Ad.value?(Na.g=Ad.g+256,Na.value=Ad.value):(Na.g=0,Na.value=0,Ea>>=ur(Ad,8,Na),Ea>>=ur(Fo.G[1][Fo.H[1]+Ea],16,Na),Ea>>=ur(Fo.G[2][Fo.H[2]+Ea],0,Na),ur(Fo.G[3][Fo.H[3]+Ea],24,Na))}}}gr.vc=Ht,gr.Wb=nn,gr.Ya=Hi,gr.yc=qi,Ve=1;break t}Ve=0}if(!(U=Ve)){I.a=3;break e}if(0<xe){if(ee.ua=1<<xe,!J(ee.Wa,xe)){I.a=1,U=0;break e}}else ee.ua=0;var k0=I,lw=q,rC=H,I0=k0.s,L0=I0.xc;if(k0.c=lw,k0.i=rC,I0.md=Ie(lw,L0),I0.wc=L0==0?-1:(1<<L0)-1,b){I.xb=jT;break e}if((ce=s(q*H))==null){I.a=1,U=0;break e}U=(U=qr(I,ce,0,q,H,H,null))&&!K.h;break e}return U?(O!=null?O[0]=ce:(e(ce==null),e(b)),I.$=0,b||Xn(ee)):Xn(ee),U}function _s(h,g){var b=h.c*h.i,I=b+g+16*g;return e(h.c<=g),h.V=s(I),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+b+g,1)}function Ks(h,g){var b=h.C,I=g-b,O=h.V,U=h.Ba+h.c*b;for(e(g<=h.l.o);0<I;){var q=16<I?16:I,H=h.l.ma,K=h.l.width,ee=K*q,ce=H.ca,xe=H.tb+K*b,te=h.Ta,he=h.Ua;Ao(h,q,O,U),j5(te,he,ce,xe,ee),ji(H,b,b+q,ce,xe,K),I-=q,O+=q*h.c,b+=q}e(b==g),h.C=h.Ma=g}function Eo(){this.ub=this.yd=this.td=this.Rb=0}function No(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Uc(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Qs(){this.Yb=function(){var h=[];return function g(b,I,O){for(var U=O[I],q=0;q<U&&(b.push(O.length>I+1?[]:0),!(O.length<I+1));q++)g(b[q],I+1,O)}(h,0,[3,11]),h}()}function ml(){this.jb=s(3),this.Wc=a([4,8],Qs),this.Xc=a([4,17],Qs)}function sa(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function _r(){this.ld=this.La=this.dd=this.tc=0}function Mi(){this.Na=this.la=0}function oa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function gl(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function yl(){this.uc=this.M=this.Nb=0,this.wa=Array(new _r),this.Y=0,this.ya=Array(new gl),this.aa=0,this.l=new Ys}function vl(){this.y=s(16),this.f=s(8),this.ea=s(8)}function wl(){this.cb=this.a=0,this.sc="",this.m=new V,this.Od=new Eo,this.Kc=new No,this.ed=new sa,this.Qa=new Uc,this.Ic=this.$c=this.Aa=0,this.D=new yl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,V),this.ia=0,this.pb=o(4,oa),this.Pa=new ml,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new vl),this.Hd=0,this.rb=Array(new Mi),this.sb=0,this.wa=Array(new _r),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new gl),this.L=this.aa=0,this.gd=a([4,2],_r),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ys(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function xl(){var h=new wl;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,rh||(rh=Ss)),h}function kn(h,g,b){return h.a==0&&(h.a=g,h.sc=b,h.cb=0),0}function bl(h,g,b){return 3<=b&&h[g+0]==157&&h[g+1]==1&&h[g+2]==42}function vu(h,g){if(h==null)return 0;if(h.a=0,h.sc="OK",g==null)return kn(h,2,"null VP8Io passed to VP8GetHeaders()");var b=g.data,I=g.w,O=g.ha;if(4>O)return kn(h,7,"Truncated header.");var U=b[I+0]|b[I+1]<<8|b[I+2]<<16,q=h.Od;if(q.Rb=!(1&U),q.td=U>>1&7,q.yd=U>>4&1,q.ub=U>>5,3<q.td)return kn(h,3,"Incorrect keyframe parameters.");if(!q.yd)return kn(h,4,"Frame not displayable.");I+=3,O-=3;var H=h.Kc;if(q.Rb){if(7>O)return kn(h,7,"cannot parse picture header");if(!bl(b,I,O))return kn(h,3,"Bad code word");H.c=16383&(b[I+4]<<8|b[I+3]),H.Td=b[I+4]>>6,H.i=16383&(b[I+6]<<8|b[I+5]),H.Ud=b[I+6]>>6,I+=7,O-=7,h.za=H.c+15>>4,h.Ub=H.i+15>>4,g.width=H.c,g.height=H.i,g.Da=0,g.j=0,g.v=0,g.va=g.width,g.o=g.height,g.da=0,g.ib=g.width,g.hb=g.height,g.U=g.width,g.T=g.height,i((U=h.Pa).jb,0,255,U.jb.length),e((U=h.Qa)!=null),U.Cb=0,U.Bb=0,U.Fb=1,i(U.Zb,0,0,U.Zb.length),i(U.Lb,0,0,U.Lb)}if(q.ub>O)return kn(h,7,"bad partition length");se(U=h.m,b,I,q.ub),I+=q.ub,O-=q.ub,q.Rb&&(H.Ld=be(U),H.Kd=be(U)),H=h.Qa;var K,ee=h.Pa;if(e(U!=null),e(H!=null),H.Cb=be(U),H.Cb){if(H.Bb=be(U),be(U)){for(H.Fb=be(U),K=0;4>K;++K)H.Zb[K]=be(U)?$(U,7):0;for(K=0;4>K;++K)H.Lb[K]=be(U)?$(U,6):0}if(H.Bb)for(K=0;3>K;++K)ee.jb[K]=be(U)?re(U,8):255}else H.Bb=0;if(U.Ka)return kn(h,3,"cannot parse segment header");if((H=h.ed).zd=be(U),H.Tb=re(U,6),H.wb=re(U,3),H.Pc=be(U),H.Pc&&be(U)){for(ee=0;4>ee;++ee)be(U)&&(H.vd[ee]=$(U,6));for(ee=0;4>ee;++ee)be(U)&&(H.od[ee]=$(U,6))}if(h.L=H.Tb==0?0:H.zd?1:2,U.Ka)return kn(h,3,"cannot parse filter header");var ce=O;if(O=K=I,I=K+ce,H=ce,h.Xb=(1<<re(h.m,2))-1,ce<3*(ee=h.Xb))b=7;else{for(K+=3*ee,H-=3*ee,ce=0;ce<ee;++ce){var xe=b[O+0]|b[O+1]<<8|b[O+2]<<16;xe>H&&(xe=H),se(h.Jc[+ce],b,K,xe),K+=xe,H-=xe,O+=3}se(h.Jc[+ee],b,K,H),b=K<I?0:5}if(b!=0)return kn(h,b,"cannot parse partitions");for(b=re(K=h.m,7),O=be(K)?$(K,4):0,I=be(K)?$(K,4):0,H=be(K)?$(K,4):0,ee=be(K)?$(K,4):0,K=be(K)?$(K,4):0,ce=h.Qa,xe=0;4>xe;++xe){if(ce.Cb){var te=ce.Zb[xe];ce.Fb||(te+=b)}else{if(0<xe){h.pb[xe]=h.pb[0];continue}te=b}var he=h.pb[xe];he.Sc[0]=_0[It(te+O,127)],he.Sc[1]=S0[It(te+0,127)],he.Eb[0]=2*_0[It(te+I,127)],he.Eb[1]=101581*S0[It(te+H,127)]>>16,8>he.Eb[1]&&(he.Eb[1]=8),he.Qc[0]=_0[It(te+ee,117)],he.Qc[1]=S0[It(te+K,127)],he.lc=te+K}if(!q.Rb)return kn(h,4,"Not a key frame.");for(be(U),q=h.Pa,b=0;4>b;++b){for(O=0;8>O;++O)for(I=0;3>I;++I)for(H=0;11>H;++H)ee=Se(U,LT[b][O][I][H])?re(U,8):kT[b][O][I][H],q.Wc[b][O].Yb[I][H]=ee;for(O=0;17>O;++O)q.Xc[b][O]=q.Wc[b][RT[O]]}return h.kc=be(U),h.kc&&(h.Bd=re(U,8)),h.cb=1}function Ss(h,g,b,I,O,U,q){var H=g[O].Yb[b];for(b=0;16>O;++O){if(!Se(h,H[b+0]))return O;for(;!Se(h,H[b+1]);)if(H=g[++O].Yb[0],b=0,O==16)return 16;var K=g[O+1].Yb;if(Se(h,H[b+2])){var ee=h,ce=0;if(Se(ee,(te=H)[(xe=b)+3]))if(Se(ee,te[xe+6])){for(H=0,xe=2*(ce=Se(ee,te[xe+8]))+(te=Se(ee,te[xe+9+ce])),ce=0,te=CT[xe];te[H];++H)ce+=ce+Se(ee,te[H]);ce+=3+(8<<xe)}else Se(ee,te[xe+7])?(ce=7+2*Se(ee,165),ce+=Se(ee,145)):ce=5+Se(ee,159);else ce=Se(ee,te[xe+4])?3+Se(ee,te[xe+5]):2;H=K[2]}else ce=1,H=K[1];K=q+PT[O],0>(ee=h).b&&we(ee);var xe,te=ee.b,he=(xe=ee.Ca>>1)-(ee.I>>te)>>31;--ee.b,ee.Ca+=he,ee.Ca|=1,ee.I-=(xe+1&he)<<te,U[K]=((ce^he)-he)*I[(0<O)+0]}return 16}function Xs(h){var g=h.rb[h.sb-1];g.la=0,g.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function wi(h,g,b,I,O){O=h[g+b+32*I]+(O>>3),h[g+b+32*I]=-256&O?0>O?0:255:O}function To(h,g,b,I,O,U){wi(h,g,0,b,I+O),wi(h,g,1,b,I+U),wi(h,g,2,b,I-U),wi(h,g,3,b,I-O)}function en(h){return(20091*h>>16)+h}function oi(h,g,b,I){var O,U=0,q=s(16);for(O=0;4>O;++O){var H=h[g+0]+h[g+8],K=h[g+0]-h[g+8],ee=(35468*h[g+4]>>16)-en(h[g+12]),ce=en(h[g+4])+(35468*h[g+12]>>16);q[U+0]=H+ce,q[U+1]=K+ee,q[U+2]=K-ee,q[U+3]=H-ce,U+=4,g++}for(O=U=0;4>O;++O)H=(h=q[U+0]+4)+q[U+8],K=h-q[U+8],ee=(35468*q[U+4]>>16)-en(q[U+12]),wi(b,I,0,0,H+(ce=en(q[U+4])+(35468*q[U+12]>>16))),wi(b,I,1,0,K+ee),wi(b,I,2,0,K-ee),wi(b,I,3,0,H-ce),U++,I+=32}function aa(h,g,b,I){var O=h[g+0]+4,U=35468*h[g+4]>>16,q=en(h[g+4]),H=35468*h[g+1]>>16;To(b,I,0,O+q,h=en(h[g+1]),H),To(b,I,1,O+U,h,H),To(b,I,2,O-U,h,H),To(b,I,3,O-q,h,H)}function la(h,g,b,I,O){oi(h,g,b,I),O&&oi(h,g+16,b,I+4)}function wu(h,g,b,I){Ll(h,g+0,b,I,1),Ll(h,g+32,b,I+128,1)}function Mt(h,g,b,I){var O;for(h=h[g+0]+4,O=0;4>O;++O)for(g=0;4>g;++g)wi(b,I,g,O,h)}function Co(h,g,b,I){h[g+0]&&Jt(h,g+0,b,I),h[g+16]&&Jt(h,g+16,b,I+4),h[g+32]&&Jt(h,g+32,b,I+128),h[g+48]&&Jt(h,g+48,b,I+128+4)}function Js(h,g,b,I){var O,U=s(16);for(O=0;4>O;++O){var q=h[g+0+O]+h[g+12+O],H=h[g+4+O]+h[g+8+O],K=h[g+4+O]-h[g+8+O],ee=h[g+0+O]-h[g+12+O];U[0+O]=q+H,U[8+O]=q-H,U[4+O]=ee+K,U[12+O]=ee-K}for(O=0;4>O;++O)q=(h=U[0+4*O]+3)+U[3+4*O],H=U[1+4*O]+U[2+4*O],K=U[1+4*O]-U[2+4*O],ee=h-U[3+4*O],b[I+0]=q+H>>3,b[I+16]=ee+K>>3,b[I+32]=q-H>>3,b[I+48]=ee-K>>3,I+=64}function xi(h,g,b){var I,O=g-32,U=zi,q=255-h[O-1];for(I=0;I<b;++I){var H,K=U,ee=q+h[g-1];for(H=0;H<b;++H)h[g+H]=K[ee+h[O+H]];g+=32}}function _l(h,g){xi(h,g,4)}function xu(h,g){xi(h,g,8)}function zc(h,g){xi(h,g,16)}function qc(h,g){var b;for(b=0;16>b;++b)r(h,g+32*b,h,g-32,16)}function Sl(h,g){var b;for(b=16;0<b;--b)i(h,g,h[g-1],16),g+=32}function Po(h,g,b){var I;for(I=0;16>I;++I)i(g,b+32*I,h,16)}function bi(h,g){var b,I=16;for(b=0;16>b;++b)I+=h[g-1+32*b]+h[g+b-32];Po(I>>5,h,g)}function ss(h,g){var b,I=8;for(b=0;16>b;++b)I+=h[g-1+32*b];Po(I>>4,h,g)}function Zs(h,g){var b,I=8;for(b=0;16>b;++b)I+=h[g+b-32];Po(I>>4,h,g)}function ua(h,g){Po(128,h,g)}function dt(h,g,b){return h+2*g+b+2>>2}function eo(h,g){var b,I=g-32;for(I=new Uint8Array([dt(h[I-1],h[I+0],h[I+1]),dt(h[I+0],h[I+1],h[I+2]),dt(h[I+1],h[I+2],h[I+3]),dt(h[I+2],h[I+3],h[I+4])]),b=0;4>b;++b)r(h,g+32*b,I,0,I.length)}function $c(h,g){var b=h[g-1],I=h[g-1+32],O=h[g-1+64],U=h[g-1+96];Re(h,g+0,16843009*dt(h[g-1-32],b,I)),Re(h,g+32,16843009*dt(b,I,O)),Re(h,g+64,16843009*dt(I,O,U)),Re(h,g+96,16843009*dt(O,U,U))}function Hc(h,g){var b,I=4;for(b=0;4>b;++b)I+=h[g+b-32]+h[g-1+32*b];for(I>>=3,b=0;4>b;++b)i(h,g+32*b,I,4)}function Wc(h,g){var b=h[g-1+0],I=h[g-1+32],O=h[g-1+64],U=h[g-1-32],q=h[g+0-32],H=h[g+1-32],K=h[g+2-32],ee=h[g+3-32];h[g+0+96]=dt(I,O,h[g-1+96]),h[g+1+96]=h[g+0+64]=dt(b,I,O),h[g+2+96]=h[g+1+64]=h[g+0+32]=dt(U,b,I),h[g+3+96]=h[g+2+64]=h[g+1+32]=h[g+0+0]=dt(q,U,b),h[g+3+64]=h[g+2+32]=h[g+1+0]=dt(H,q,U),h[g+3+32]=h[g+2+0]=dt(K,H,q),h[g+3+0]=dt(ee,K,H)}function Sr(h,g){var b=h[g+1-32],I=h[g+2-32],O=h[g+3-32],U=h[g+4-32],q=h[g+5-32],H=h[g+6-32],K=h[g+7-32];h[g+0+0]=dt(h[g+0-32],b,I),h[g+1+0]=h[g+0+32]=dt(b,I,O),h[g+2+0]=h[g+1+32]=h[g+0+64]=dt(I,O,U),h[g+3+0]=h[g+2+32]=h[g+1+64]=h[g+0+96]=dt(O,U,q),h[g+3+32]=h[g+2+64]=h[g+1+96]=dt(U,q,H),h[g+3+64]=h[g+2+96]=dt(q,H,K),h[g+3+96]=dt(H,K,K)}function As(h,g){var b=h[g-1+0],I=h[g-1+32],O=h[g-1+64],U=h[g-1-32],q=h[g+0-32],H=h[g+1-32],K=h[g+2-32],ee=h[g+3-32];h[g+0+0]=h[g+1+64]=U+q+1>>1,h[g+1+0]=h[g+2+64]=q+H+1>>1,h[g+2+0]=h[g+3+64]=H+K+1>>1,h[g+3+0]=K+ee+1>>1,h[g+0+96]=dt(O,I,b),h[g+0+64]=dt(I,b,U),h[g+0+32]=h[g+1+96]=dt(b,U,q),h[g+1+32]=h[g+2+96]=dt(U,q,H),h[g+2+32]=h[g+3+96]=dt(q,H,K),h[g+3+32]=dt(H,K,ee)}function Gc(h,g){var b=h[g+0-32],I=h[g+1-32],O=h[g+2-32],U=h[g+3-32],q=h[g+4-32],H=h[g+5-32],K=h[g+6-32],ee=h[g+7-32];h[g+0+0]=b+I+1>>1,h[g+1+0]=h[g+0+64]=I+O+1>>1,h[g+2+0]=h[g+1+64]=O+U+1>>1,h[g+3+0]=h[g+2+64]=U+q+1>>1,h[g+0+32]=dt(b,I,O),h[g+1+32]=h[g+0+96]=dt(I,O,U),h[g+2+32]=h[g+1+96]=dt(O,U,q),h[g+3+32]=h[g+2+96]=dt(U,q,H),h[g+3+64]=dt(q,H,K),h[g+3+96]=dt(H,K,ee)}function ca(h,g){var b=h[g-1+0],I=h[g-1+32],O=h[g-1+64],U=h[g-1+96];h[g+0+0]=b+I+1>>1,h[g+2+0]=h[g+0+32]=I+O+1>>1,h[g+2+32]=h[g+0+64]=O+U+1>>1,h[g+1+0]=dt(b,I,O),h[g+3+0]=h[g+1+32]=dt(I,O,U),h[g+3+32]=h[g+1+64]=dt(O,U,U),h[g+3+64]=h[g+2+64]=h[g+0+96]=h[g+1+96]=h[g+2+96]=h[g+3+96]=U}function Es(h,g){var b=h[g-1+0],I=h[g-1+32],O=h[g-1+64],U=h[g-1+96],q=h[g-1-32],H=h[g+0-32],K=h[g+1-32],ee=h[g+2-32];h[g+0+0]=h[g+2+32]=b+q+1>>1,h[g+0+32]=h[g+2+64]=I+b+1>>1,h[g+0+64]=h[g+2+96]=O+I+1>>1,h[g+0+96]=U+O+1>>1,h[g+3+0]=dt(H,K,ee),h[g+2+0]=dt(q,H,K),h[g+1+0]=h[g+3+32]=dt(b,q,H),h[g+1+32]=h[g+3+64]=dt(I,b,q),h[g+1+64]=h[g+3+96]=dt(O,I,b),h[g+1+96]=dt(U,O,I)}function ha(h,g){var b;for(b=0;8>b;++b)r(h,g+32*b,h,g-32,8)}function Fi(h,g){var b;for(b=0;8>b;++b)i(h,g,h[g-1],8),g+=32}function os(h,g,b){var I;for(I=0;8>I;++I)i(g,b+32*I,h,8)}function ko(h,g){var b,I=8;for(b=0;8>b;++b)I+=h[g+b-32]+h[g-1+32*b];os(I>>4,h,g)}function Al(h,g){var b,I=4;for(b=0;8>b;++b)I+=h[g+b-32];os(I>>3,h,g)}function cn(h,g){var b,I=4;for(b=0;8>b;++b)I+=h[g-1+32*b];os(I>>3,h,g)}function El(h,g){os(128,h,g)}function Io(h,g,b){var I=h[g-b],O=h[g+0],U=3*(O-I)+y0[1020+h[g-2*b]-h[g+b]],q=ud[112+(U+4>>3)];h[g-b]=zi[255+I+ud[112+(U+3>>3)]],h[g+0]=zi[255+O-q]}function to(h,g,b,I){var O=h[g+0],U=h[g+b];return us[255+h[g-2*b]-h[g-b]]>I||us[255+U-O]>I}function fa(h,g,b,I){return 4*us[255+h[g-b]-h[g+0]]+us[255+h[g-2*b]-h[g+b]]<=I}function Lo(h,g,b,I,O){var U=h[g-3*b],q=h[g-2*b],H=h[g-b],K=h[g+0],ee=h[g+b],ce=h[g+2*b],xe=h[g+3*b];return 4*us[255+H-K]+us[255+q-ee]>I?0:us[255+h[g-4*b]-U]<=O&&us[255+U-q]<=O&&us[255+q-H]<=O&&us[255+xe-ce]<=O&&us[255+ce-ee]<=O&&us[255+ee-K]<=O}function no(h,g,b,I){var O=2*I+1;for(I=0;16>I;++I)fa(h,g+I,b,O)&&Io(h,g+I,b)}function ro(h,g,b,I){var O=2*I+1;for(I=0;16>I;++I)fa(h,g+I*b,1,O)&&Io(h,g+I*b,1)}function _i(h,g,b,I){var O;for(O=3;0<O;--O)no(h,g+=4*b,b,I)}function Nl(h,g,b,I){var O;for(O=3;0<O;--O)ro(h,g+=4,b,I)}function Ns(h,g,b,I,O,U,q,H){for(U=2*U+1;0<O--;){if(Lo(h,g,b,U,q))if(to(h,g,b,H))Io(h,g,b);else{var K=h,ee=g,ce=b,xe=K[ee-2*ce],te=K[ee-ce],he=K[ee+0],me=K[ee+ce],Ee=K[ee+2*ce],ye=27*(Ce=y0[1020+3*(he-te)+y0[1020+xe-me]])+63>>7,Te=18*Ce+63>>7,Ce=9*Ce+63>>7;K[ee-3*ce]=zi[255+K[ee-3*ce]+Ce],K[ee-2*ce]=zi[255+xe+Te],K[ee-ce]=zi[255+te+ye],K[ee+0]=zi[255+he-ye],K[ee+ce]=zi[255+me-Te],K[ee+2*ce]=zi[255+Ee-Ce]}g+=I}}function ai(h,g,b,I,O,U,q,H){for(U=2*U+1;0<O--;){if(Lo(h,g,b,U,q))if(to(h,g,b,H))Io(h,g,b);else{var K=h,ee=g,ce=b,xe=K[ee-ce],te=K[ee+0],he=K[ee+ce],me=ud[112+(4+(Ee=3*(te-xe))>>3)],Ee=ud[112+(Ee+3>>3)],ye=me+1>>1;K[ee-2*ce]=zi[255+K[ee-2*ce]+ye],K[ee-ce]=zi[255+xe+Ee],K[ee+0]=zi[255+te-me],K[ee+ce]=zi[255+he-ye]}g+=I}}function Tl(h,g,b,I,O,U){Ns(h,g,b,1,16,I,O,U)}function da(h,g,b,I,O,U){Ns(h,g,1,b,16,I,O,U)}function as(h,g,b,I,O,U){var q;for(q=3;0<q;--q)ai(h,g+=4*b,b,1,16,I,O,U)}function Cl(h,g,b,I,O,U){var q;for(q=3;0<q;--q)ai(h,g+=4,1,b,16,I,O,U)}function v(h,g,b,I,O,U,q,H){Ns(h,g,O,1,8,U,q,H),Ns(b,I,O,1,8,U,q,H)}function F(h,g,b,I,O,U,q,H){Ns(h,g,1,O,8,U,q,H),Ns(b,I,1,O,8,U,q,H)}function Z(h,g,b,I,O,U,q,H){ai(h,g+4*O,O,1,8,U,q,H),ai(b,I+4*O,O,1,8,U,q,H)}function le(h,g,b,I,O,U,q,H){ai(h,g+4,1,O,8,U,q,H),ai(b,I+4,1,O,8,U,q,H)}function de(){this.ba=new Yt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ne(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Le(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function $e(){this.ua=0,this.Wa=new ot,this.vb=new ot,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new X,this.yc=new j}function Qe(){this.xb=this.a=0,this.l=new Ys,this.ca=new Yt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Y,this.Pb=0,this.wd=new Y,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new $e,this.ab=0,this.gc=o(4,Le),this.Oc=0}function ct(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ys,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yt(h,g,b,I,O,U,q){for(h=h==null?0:h[g+0],g=0;g<q;++g)O[U+g]=h+b[I+g]&255,h=O[U+g]}function zt(h,g,b,I,O,U,q){var H;if(h==null)yt(null,null,b,I,O,U,q);else for(H=0;H<q;++H)O[U+H]=h[g+H]+b[I+H]&255}function Xt(h,g,b,I,O,U,q){if(h==null)yt(null,null,b,I,O,U,q);else{var H,K=h[g+0],ee=K,ce=K;for(H=0;H<q;++H)ee=ce+(K=h[g+H])-ee,ce=b[I+H]+(-256&ee?0>ee?0:255:ee)&255,ee=K,O[U+H]=ce}}function In(h,g,b,I){var O=g.width,U=g.o;if(e(h!=null&&g!=null),0>b||0>=I||b+I>U)return null;if(!h.Cc){if(h.ga==null){var q;if(h.ga=new ct,(q=h.ga==null)||(q=g.width*g.o,e(h.Gb.length==0),h.Gb=s(q),h.Uc=0,h.Gb==null?q=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,q=1),q=!q),!q){q=h.ga;var H=h.Fa,K=h.P,ee=h.qc,ce=h.mb,xe=h.nb,te=K+1,he=ee-1,me=q.l;if(e(H!=null&&ce!=null&&g!=null),_a[0]=null,_a[1]=yt,_a[2]=zt,_a[3]=Xt,q.ca=ce,q.tb=xe,q.c=g.width,q.i=g.height,e(0<q.c&&0<q.i),1>=ee)g=0;else if(q.$a=3&H[K+0],q.Z=H[K+0]>>2&3,q.Lc=H[K+0]>>4&3,K=H[K+0]>>6&3,0>q.$a||1<q.$a||4<=q.Z||1<q.Lc||K)g=0;else if(me.put=lt,me.ac=Ur,me.bc=wn,me.ma=q,me.width=g.width,me.height=g.height,me.Da=g.Da,me.v=g.v,me.va=g.va,me.j=g.j,me.o=g.o,q.$a)e:{e(q.$a==1),g=Gs();t:for(;;){if(g==null){g=0;break e}if(e(q!=null),q.mc=g,g.c=q.c,g.i=q.i,g.l=q.l,g.l.ma=q,g.l.width=q.c,g.l.height=q.i,g.a=0,ae(g.m,H,te,he),!Di(q.c,q.i,1,g,null)||(g.ab==1&&g.gc[0].hc==3&&zr(g.s)?(q.ic=1,H=g.c*g.i,g.Ta=null,g.Ua=0,g.V=s(H),g.Ba=0,g.V==null?(g.a=1,g=0):g=1):(q.ic=0,g=_s(g,q.c)),!g))break t;g=1;break e}q.mc=null,g=0}else g=he>=q.c*q.i;q=!g}if(q)return null;h.ga.Lc!=1?h.Ga=0:I=U-b}e(h.ga!=null),e(b+I<=U);e:{if(g=(H=h.ga).c,U=H.l.o,H.$a==0){if(te=h.rc,he=h.Vc,me=h.Fa,K=h.P+1+b*g,ee=h.mb,ce=h.nb+b*g,e(K<=h.P+h.qc),H.Z!=0)for(e(_a[H.Z]!=null),q=0;q<I;++q)_a[H.Z](te,he,me,K,ee,ce,g),te=ee,he=ce,ce+=g,K+=g;else for(q=0;q<I;++q)r(ee,ce,me,K,g),te=ee,he=ce,ce+=g,K+=g;h.rc=te,h.Vc=he}else{if(e(H.mc!=null),g=b+I,e((q=H.mc)!=null),e(g<=q.i),q.C>=g)g=1;else if(H.ic||pn(),H.ic){H=q.V,te=q.Ba,he=q.c;var Ee=q.i,ye=(me=1,K=q.$/he,ee=q.$%he,ce=q.m,xe=q.s,q.$),Te=he*Ee,Ce=he*g,Me=xe.wc,je=ye<Ce?Tn(xe,ee,K):null;e(ye<=Te),e(g<=Ee),e(zr(xe));t:for(;;){for(;!ce.h&&ye<Ce;){if(ee&Me||(je=Tn(xe,ee,K)),e(je!=null),ue(ce),256>(Ee=Nn(je.G[0],je.H[0],ce)))H[te+ye]=Ee,++ye,++ee>=he&&(ee=0,++K<=g&&!(K%16)&&si(q,K));else{if(!(280>Ee)){me=0;break t}Ee=xr(Ee-256,ce);var rt,We=Nn(je.G[4],je.H[4],ce);if(ue(ce),!(ye>=(We=br(he,We=xr(We,ce)))&&Te-ye>=Ee)){me=0;break t}for(rt=0;rt<Ee;++rt)H[te+ye+rt]=H[te+ye+rt-We];for(ye+=Ee,ee+=Ee;ee>=he;)ee-=he,++K<=g&&!(K%16)&&si(q,K);ye<Ce&&ee&Me&&(je=Tn(xe,ee,K))}e(ce.h==ne(ce))}si(q,K>g?g:K);break t}!me||ce.h&&ye<Te?(me=0,q.a=ce.h?5:3):q.$=ye,g=me}else g=qr(q,q.V,q.Ba,q.c,q.i,g,Ks);if(!g){I=0;break e}}b+I>=U&&(h.Cc=1),I=1}if(!I)return null;if(h.Cc&&((I=h.ga)!=null&&(I.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+b*O}function tn(h,g,b,I,O,U){for(;0<O--;){var q,H=h,K=g+(b?1:0),ee=h,ce=g+(b?0:3);for(q=0;q<I;++q){var xe=ee[ce+4*q];xe!=255&&(xe*=32897,H[K+4*q+0]=H[K+4*q+0]*xe>>23,H[K+4*q+1]=H[K+4*q+1]*xe>>23,H[K+4*q+2]=H[K+4*q+2]*xe>>23)}g+=U}}function Bn(h,g,b,I,O){for(;0<I--;){var U;for(U=0;U<b;++U){var q=h[g+2*U+0],H=15&(ee=h[g+2*U+1]),K=4369*H,ee=(240&ee|ee>>4)*K>>16;h[g+2*U+0]=(240&q|q>>4)*K>>16&240|(15&q|q<<4)*K>>16>>4&15,h[g+2*U+1]=240&ee|H}g+=O}}function Ln(h,g,b,I,O,U,q,H){var K,ee,ce=255;for(ee=0;ee<O;++ee){for(K=0;K<I;++K){var xe=h[g+K];U[q+4*K]=xe,ce&=xe}g+=b,q+=H}return ce!=255}function Un(h,g,b,I,O){var U;for(U=0;U<O;++U)b[I+U]=h[g+U]>>8}function pn(){nh=tn,L5=Bn,R5=Ln,j5=Un}function Cr(h,g,b){k[h]=function(I,O,U,q,H,K,ee,ce,xe,te,he,me,Ee,ye,Te,Ce,Me){var je,rt=Me-1>>1,We=H[K+0]|ee[ce+0]<<16,Ct=xe[te+0]|he[me+0]<<16;e(I!=null);var Je=3*We+Ct+131074>>2;for(g(I[O+0],255&Je,Je>>16,Ee,ye),U!=null&&(Je=3*Ct+We+131074>>2,g(U[q+0],255&Je,Je>>16,Te,Ce)),je=1;je<=rt;++je){var Bt=H[K+je]|ee[ce+je]<<16,mr=xe[te+je]|he[me+je]<<16,Pt=We+Bt+Ct+mr+524296,Ze=Pt+2*(Bt+Ct)>>3;Je=Ze+We>>1,We=(Pt=Pt+2*(We+mr)>>3)+Bt>>1,g(I[O+2*je-1],255&Je,Je>>16,Ee,ye+(2*je-1)*b),g(I[O+2*je-0],255&We,We>>16,Ee,ye+(2*je-0)*b),U!=null&&(Je=Pt+Ct>>1,We=Ze+mr>>1,g(U[q+2*je-1],255&Je,Je>>16,Te,Ce+(2*je-1)*b),g(U[q+2*je+0],255&We,We>>16,Te,Ce+(2*je+0)*b)),We=Bt,Ct=mr}1&Me||(Je=3*We+Ct+131074>>2,g(I[O+Me-1],255&Je,Je>>16,Ee,ye+(Me-1)*b),U!=null&&(Je=3*Ct+We+131074>>2,g(U[q+Me-1],255&Je,Je>>16,Te,Ce+(Me-1)*b)))}}function Pl(){cs[cd]=DT,cs[hd]=H5,cs[B5]=MT,cs[fd]=W5,cs[dd]=G5,cs[v0]=K5,cs[U5]=FT,cs[w0]=H5,cs[x0]=W5,cs[pd]=G5,cs[b0]=K5}function Oi(h){return h&-16384?0>h?0:255:h>>OT}function f(h,g){return Oi((19077*h>>8)+(26149*g>>8)-14234)}function _(h,g,b){return Oi((19077*h>>8)-(6419*g>>8)-(13320*b>>8)+8708)}function D(h,g){return Oi((19077*h>>8)+(33050*g>>8)-17685)}function W(h,g,b,I,O){I[O+0]=f(h,b),I[O+1]=_(h,g,b),I[O+2]=D(h,g)}function pe(h,g,b,I,O){I[O+0]=D(h,g),I[O+1]=_(h,g,b),I[O+2]=f(h,b)}function _e(h,g,b,I,O){var U=_(h,g,b);g=U<<3&224|D(h,g)>>3,I[O+0]=248&f(h,b)|U>>5,I[O+1]=g}function Oe(h,g,b,I,O){var U=240&D(h,g)|15;I[O+0]=240&f(h,b)|_(h,g,b)>>4,I[O+1]=U}function Vt(h,g,b,I,O){I[O+0]=255,W(h,g,b,I,O+1)}function Rn(h,g,b,I,O){pe(h,g,b,I,O),I[O+3]=255}function Rt(h,g,b,I,O){W(h,g,b,I,O),I[O+3]=255}function It(h,g){return 0>h?0:h>g?g:h}function mn(h,g,b){k[h]=function(I,O,U,q,H,K,ee,ce,xe){for(var te=ce+(-2&xe)*b;ce!=te;)g(I[O+0],U[q+0],H[K+0],ee,ce),g(I[O+1],U[q+0],H[K+0],ee,ce+b),O+=2,++q,++K,ce+=2*b;1&xe&&g(I[O+0],U[q+0],H[K+0],ee,ce)}}function Vi(h,g,b){return b==0?h==0?g==0?6:5:g==0?4:0:b}function $r(h,g,b,I,O){switch(h>>>30){case 3:Ll(g,b,I,O,0);break;case 2:ls(g,b,I,O);break;case 1:Jt(g,b,I,O)}}function Pr(h,g){var b,I,O=g.M,U=g.Nb,q=h.oc,H=h.pc+40,K=h.oc,ee=h.pc+584,ce=h.oc,xe=h.pc+600;for(b=0;16>b;++b)q[H+32*b-1]=129;for(b=0;8>b;++b)K[ee+32*b-1]=129,ce[xe+32*b-1]=129;for(0<O?q[H-1-32]=K[ee-1-32]=ce[xe-1-32]=129:(i(q,H-32-1,127,21),i(K,ee-32-1,127,9),i(ce,xe-32-1,127,9)),I=0;I<h.za;++I){var te=g.ya[g.aa+I];if(0<I){for(b=-1;16>b;++b)r(q,H+32*b-4,q,H+32*b+12,4);for(b=-1;8>b;++b)r(K,ee+32*b-4,K,ee+32*b+4,4),r(ce,xe+32*b-4,ce,xe+32*b+4,4)}var he=h.Gd,me=h.Hd+I,Ee=te.ad,ye=te.Hc;if(0<O&&(r(q,H-32,he[me].y,0,16),r(K,ee-32,he[me].f,0,8),r(ce,xe-32,he[me].ea,0,8)),te.Za){var Te=q,Ce=H-32+16;for(0<O&&(I>=h.za-1?i(Te,Ce,he[me].y[15],4):r(Te,Ce,he[me+1].y,0,4)),b=0;4>b;b++)Te[Ce+128+b]=Te[Ce+256+b]=Te[Ce+384+b]=Te[Ce+0+b];for(b=0;16>b;++b,ye<<=2)Te=q,Ce=H+Y5[b],Cs[te.Ob[b]](Te,Ce),$r(ye,Ee,16*+b,Te,Ce)}else if(Te=Vi(I,O,te.Ob[0]),ba[Te](q,H),ye!=0)for(b=0;16>b;++b,ye<<=2)$r(ye,Ee,16*+b,q,H+Y5[b]);for(b=te.Gc,Te=Vi(I,O,te.Dd),Do[Te](K,ee),Do[Te](ce,xe),ye=Ee,Te=K,Ce=ee,255&(te=0|b)&&(170&te?oo(ye,256,Te,Ce):hn(ye,256,Te,Ce)),te=ce,ye=xe,255&(b>>=8)&&(170&b?oo(Ee,320,te,ye):hn(Ee,320,te,ye)),O<h.Ub-1&&(r(he[me].y,0,q,H+480,16),r(he[me].f,0,K,ee+224,8),r(he[me].ea,0,ce,xe+224,8)),b=8*U*h.B,he=h.sa,me=h.ta+16*I+16*U*h.R,Ee=h.qa,te=h.ra+8*I+b,ye=h.Ha,Te=h.Ia+8*I+b,b=0;16>b;++b)r(he,me+b*h.R,q,H+32*b,16);for(b=0;8>b;++b)r(Ee,te+b*h.B,K,ee+32*b,8),r(ye,Te+b*h.B,ce,xe+32*b,8)}}function Ts(h,g,b,I,O,U,q,H,K){var ee=[0],ce=[0],xe=0,te=K!=null?K.kd:0,he=K??new Ne;if(h==null||12>b)return 7;he.data=h,he.w=g,he.ha=b,g=[g],b=[b],he.gb=[he.gb];e:{var me=g,Ee=b,ye=he.gb;if(e(h!=null),e(Ee!=null),e(ye!=null),ye[0]=0,12<=Ee[0]&&!n(h,me[0],"RIFF")){if(n(h,me[0]+8,"WEBP")){ye=3;break e}var Te=ge(h,me[0]+4);if(12>Te||4294967286<Te){ye=3;break e}if(te&&Te>Ee[0]-8){ye=7;break e}ye[0]=Te,me[0]+=12,Ee[0]-=12}ye=0}if(ye!=0)return ye;for(Te=0<he.gb[0],b=b[0];;){e:{var Ce=h;Ee=g,ye=b;var Me=ee,je=ce,rt=me=[0];if((Je=xe=[xe])[0]=0,8>ye[0])ye=7;else{if(!n(Ce,Ee[0],"VP8X")){if(ge(Ce,Ee[0]+4)!=10){ye=3;break e}if(18>ye[0]){ye=7;break e}var We=ge(Ce,Ee[0]+8),Ct=1+Pe(Ce,Ee[0]+12);if(2147483648<=Ct*(Ce=1+Pe(Ce,Ee[0]+15))){ye=3;break e}rt!=null&&(rt[0]=We),Me!=null&&(Me[0]=Ct),je!=null&&(je[0]=Ce),Ee[0]+=18,ye[0]-=18,Je[0]=1}ye=0}}if(xe=xe[0],me=me[0],ye!=0)return ye;if(Ee=!!(2&me),!Te&&xe)return 3;if(U!=null&&(U[0]=!!(16&me)),q!=null&&(q[0]=Ee),H!=null&&(H[0]=0),q=ee[0],me=ce[0],xe&&Ee&&K==null){ye=0;break}if(4>b){ye=7;break}if(Te&&xe||!Te&&!xe&&!n(h,g[0],"ALPH")){b=[b],he.na=[he.na],he.P=[he.P],he.Sa=[he.Sa];e:{We=h,ye=g,Te=b;var Je=he.gb;Me=he.na,je=he.P,rt=he.Sa,Ct=22,e(We!=null),e(Te!=null),Ce=ye[0];var Bt=Te[0];for(e(Me!=null),e(rt!=null),Me[0]=null,je[0]=null,rt[0]=0;;){if(ye[0]=Ce,Te[0]=Bt,8>Bt){ye=7;break e}var mr=ge(We,Ce+4);if(4294967286<mr){ye=3;break e}var Pt=8+mr+1&-2;if(Ct+=Pt,0<Je&&Ct>Je){ye=3;break e}if(!n(We,Ce,"VP8 ")||!n(We,Ce,"VP8L")){ye=0;break e}if(Bt[0]<Pt){ye=7;break e}n(We,Ce,"ALPH")||(Me[0]=We,je[0]=Ce+8,rt[0]=mr),Ce+=Pt,Bt-=Pt}}if(b=b[0],he.na=he.na[0],he.P=he.P[0],he.Sa=he.Sa[0],ye!=0)break}b=[b],he.Ja=[he.Ja],he.xa=[he.xa];e:if(Je=h,ye=g,Te=b,Me=he.gb[0],je=he.Ja,rt=he.xa,We=ye[0],Ce=!n(Je,We,"VP8 "),Ct=!n(Je,We,"VP8L"),e(Je!=null),e(Te!=null),e(je!=null),e(rt!=null),8>Te[0])ye=7;else{if(Ce||Ct){if(Je=ge(Je,We+4),12<=Me&&Je>Me-12){ye=3;break e}if(te&&Je>Te[0]-8){ye=7;break e}je[0]=Je,ye[0]+=8,Te[0]-=8,rt[0]=Ct}else rt[0]=5<=Te[0]&&Je[We+0]==47&&!(Je[We+4]>>5),je[0]=Te[0];ye=0}if(b=b[0],he.Ja=he.Ja[0],he.xa=he.xa[0],g=g[0],ye!=0)break;if(4294967286<he.Ja)return 3;if(H==null||Ee||(H[0]=he.xa?2:1),q=[q],me=[me],he.xa){if(5>b){ye=7;break}H=q,te=me,Ee=U,h==null||5>b?h=0:5<=b&&h[g+0]==47&&!(h[g+4]>>5)?(Te=[0],Je=[0],Me=[0],ae(je=new Y,h,g,b),is(je,Te,Je,Me)?(H!=null&&(H[0]=Te[0]),te!=null&&(te[0]=Je[0]),Ee!=null&&(Ee[0]=Me[0]),h=1):h=0):h=0}else{if(10>b){ye=7;break}H=me,h==null||10>b||!bl(h,g+3,b-3)?h=0:(te=h[g+0]|h[g+1]<<8|h[g+2]<<16,Ee=16383&(h[g+7]<<8|h[g+6]),h=16383&(h[g+9]<<8|h[g+8]),1&te||3<(te>>1&7)||!(te>>4&1)||te>>5>=he.Ja||!Ee||!h?h=0:(q&&(q[0]=Ee),H&&(H[0]=h),h=1))}if(!h||(q=q[0],me=me[0],xe&&(ee[0]!=q||ce[0]!=me)))return 3;K!=null&&(K[0]=he,K.offset=g-K.w,e(4294967286>g-K.w),e(K.offset==K.ha-b));break}return ye==0||ye==7&&xe&&K==null?(U!=null&&(U[0]|=he.na!=null&&0<he.na.length),I!=null&&(I[0]=q),O!=null&&(O[0]=me),0):ye}function Kc(h,g,b){var I=g.width,O=g.height,U=0,q=0,H=I,K=O;if(g.Da=h!=null&&0<h.Da,g.Da&&(H=h.cd,K=h.bd,U=h.v,q=h.j,11>b||(U&=-2,q&=-2),0>U||0>q||0>=H||0>=K||U+H>I||q+K>O))return 0;if(g.v=U,g.j=q,g.va=U+H,g.o=q+K,g.U=H,g.T=K,g.da=h!=null&&0<h.da,g.da){if(!Ue(H,K,b=[h.ib],U=[h.hb]))return 0;g.ib=b[0],g.hb=U[0]}return g.ob=h!=null&&h.ob,g.Kb=h==null||!h.Sd,g.da&&(g.ob=g.ib<3*I/4&&g.hb<3*O/4,g.Kb=0),1}function Qc(h){if(h==null)return 2;if(11>h.S){var g=h.f.RGBA;g.fb+=(h.height-1)*g.A,g.A=-g.A}else g=h.f.kb,h=h.height,g.O+=(h-1)*g.fa,g.fa=-g.fa,g.N+=(h-1>>1)*g.Ab,g.Ab=-g.Ab,g.W+=(h-1>>1)*g.Db,g.Db=-g.Db,g.F!=null&&(g.J+=(h-1)*g.lb,g.lb=-g.lb);return 0}function pa(h,g,b,I){if(I==null||0>=h||0>=g)return 2;if(b!=null){if(b.Da){var O=b.cd,U=b.bd,q=-2&b.v,H=-2&b.j;if(0>q||0>H||0>=O||0>=U||q+O>h||H+U>g)return 2;h=O,g=U}if(b.da){if(!Ue(h,g,O=[b.ib],U=[b.hb]))return 2;h=O[0],g=U[0]}}I.width=h,I.height=g;e:{var K=I.width,ee=I.height;if(h=I.S,0>=K||0>=ee||!(h>=cd&&13>h))h=2;else{if(0>=I.Rd&&I.sd==null){q=U=O=g=0;var ce=(H=K*X5[h])*ee;if(11>h||(U=(ee+1)/2*(g=(K+1)/2),h==12&&(q=(O=K)*ee)),(ee=s(ce+2*U+q))==null){h=1;break e}I.sd=ee,11>h?((K=I.f.RGBA).eb=ee,K.fb=0,K.A=H,K.size=ce):((K=I.f.kb).y=ee,K.O=0,K.fa=H,K.Fd=ce,K.f=ee,K.N=0+ce,K.Ab=g,K.Cd=U,K.ea=ee,K.W=0+ce+U,K.Db=g,K.Ed=U,h==12&&(K.F=ee,K.J=0+ce+2*U),K.Tc=q,K.lb=O)}if(g=1,O=I.S,U=I.width,q=I.height,O>=cd&&13>O)if(11>O)h=I.f.RGBA,g&=(H=Math.abs(h.A))*(q-1)+U<=h.size,g&=H>=U*X5[O],g&=h.eb!=null;else{h=I.f.kb,H=(U+1)/2,ce=(q+1)/2,K=Math.abs(h.fa),ee=Math.abs(h.Ab);var xe=Math.abs(h.Db),te=Math.abs(h.lb),he=te*(q-1)+U;g&=K*(q-1)+U<=h.Fd,g&=ee*(ce-1)+H<=h.Cd,g=(g&=xe*(ce-1)+H<=h.Ed)&K>=U&ee>=H&xe>=H,g&=h.y!=null,g&=h.f!=null,g&=h.ea!=null,O==12&&(g&=te>=U,g&=he<=h.Tc,g&=h.F!=null)}else g=0;h=g?0:2}}return h!=0||b!=null&&b.fd&&(h=Qc(I)),h}var kl=64,Bi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ui=24,ma=32,Ro=8,ga=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Be("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(h){return h},k.Predictor2=function(h,g,b){return g[b+0]},k.Predictor3=function(h,g,b){return g[b+1]},k.Predictor4=function(h,g,b){return g[b-1]},k.Predictor5=function(h,g,b){return tt(tt(h,g[b+1]),g[b+0])},k.Predictor6=function(h,g,b){return tt(h,g[b-1])},k.Predictor7=function(h,g,b){return tt(h,g[b+0])},k.Predictor8=function(h,g,b){return tt(g[b-1],g[b+0])},k.Predictor9=function(h,g,b){return tt(g[b+0],g[b+1])},k.Predictor10=function(h,g,b){return tt(tt(h,g[b-1]),tt(g[b+0],g[b+1]))},k.Predictor11=function(h,g,b){var I=g[b+0];return 0>=et(I>>24&255,h>>24&255,(g=g[b-1])>>24&255)+et(I>>16&255,h>>16&255,g>>16&255)+et(I>>8&255,h>>8&255,g>>8&255)+et(255&I,255&h,255&g)?I:h},k.Predictor12=function(h,g,b){var I=g[b+0];return(Ot((h>>24&255)+(I>>24&255)-((g=g[b-1])>>24&255))<<24|Ot((h>>16&255)+(I>>16&255)-(g>>16&255))<<16|Ot((h>>8&255)+(I>>8&255)-(g>>8&255))<<8|Ot((255&h)+(255&I)-(255&g)))>>>0},k.Predictor13=function(h,g,b){var I=g[b-1];return(wt((h=tt(h,g[b+0]))>>24&255,I>>24&255)<<24|wt(h>>16&255,I>>16&255)<<16|wt(h>>8&255,I>>8&255)<<8|wt(255&h,255&I))>>>0};var Yc=k.PredictorAdd0;k.PredictorAdd1=St,Be("Predictor2","PredictorAdd2"),Be("Predictor3","PredictorAdd3"),Be("Predictor4","PredictorAdd4"),Be("Predictor5","PredictorAdd5"),Be("Predictor6","PredictorAdd6"),Be("Predictor7","PredictorAdd7"),Be("Predictor8","PredictorAdd8"),Be("Predictor9","PredictorAdd9"),Be("Predictor10","PredictorAdd10"),Be("Predictor11","PredictorAdd11"),Be("Predictor12","PredictorAdd12"),Be("Predictor13","PredictorAdd13");var bu=k.PredictorAdd2;st("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),st("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Jn,ad=k.ColorIndexInverseTransform,io=k.MapARGB,so=k.VP8LColorIndexInverseTransformAlpha,Xc=k.MapAlpha,Jc=k.VP8LPredictorsAdd=[];Jc.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var Zc,eh,ya,va,wa,Il,xa,Ll,ls,oo,Jt,hn,Zn,pr,jo,th,_u,ld,N5,T5,C5,P5,k5,I5,nh,L5,R5,j5,D5=s(511),M5=s(2041),F5=s(225),O5=s(767),V5=0,y0=M5,ud=F5,zi=O5,us=D5,cd=0,hd=1,B5=2,fd=3,dd=4,v0=5,U5=6,w0=7,x0=8,pd=9,b0=10,bT=[2,3,7],_T=[3,3,11],z5=[280,256,256,256,40],ST=[0,1,1,1,0],AT=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ET=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],NT=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],TT=8,_0=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],S0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],rh=null,CT=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],PT=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],q5=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],kT=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],IT=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],LT=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],RT=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ba=[],Cs=[],Do=[],jT=1,$5=2,_a=[],cs=[];Cr("UpsampleRgbLinePair",W,3),Cr("UpsampleBgrLinePair",pe,3),Cr("UpsampleRgbaLinePair",Rt,4),Cr("UpsampleBgraLinePair",Rn,4),Cr("UpsampleArgbLinePair",Vt,4),Cr("UpsampleRgba4444LinePair",Oe,2),Cr("UpsampleRgb565LinePair",_e,2);var DT=k.UpsampleRgbLinePair,MT=k.UpsampleBgrLinePair,H5=k.UpsampleRgbaLinePair,W5=k.UpsampleBgraLinePair,G5=k.UpsampleArgbLinePair,K5=k.UpsampleRgba4444LinePair,FT=k.UpsampleRgb565LinePair,md=16,gd=1<<md-1,ih=-227,A0=482,OT=6,Q5=0,VT=s(256),BT=s(256),UT=s(256),zT=s(256),qT=s(A0-ih),$T=s(A0-ih);mn("YuvToRgbRow",W,3),mn("YuvToBgrRow",pe,3),mn("YuvToRgbaRow",Rt,4),mn("YuvToBgraRow",Rn,4),mn("YuvToArgbRow",Vt,4),mn("YuvToRgba4444Row",Oe,2),mn("YuvToRgb565Row",_e,2);var Y5=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],yd=[0,2,8],HT=[8,7,6,4,4,2,2,2,1,1,1,1],WT=1;this.WebPDecodeRGBA=function(h,g,b,I,O){var U=hd,q=new de,H=new Yt;q.ba=H,H.S=U,H.width=[H.width],H.height=[H.height];var K=H.width,ee=H.height,ce=new ft;if(ce==null||h==null)var xe=2;else e(ce!=null),xe=Ts(h,g,b,ce.width,ce.height,ce.Pd,ce.Qd,ce.format,null);if(xe!=0?K=0:(K!=null&&(K[0]=ce.width[0]),ee!=null&&(ee[0]=ce.height[0]),K=1),K){H.width=H.width[0],H.height=H.height[0],I!=null&&(I[0]=H.width),O!=null&&(O[0]=H.height);e:{if(I=new Ys,(O=new Ne).data=h,O.w=g,O.ha=b,O.kd=1,g=[0],e(O!=null),((h=Ts(O.data,O.w,O.ha,null,null,null,g,null,O))==0||h==7)&&g[0]&&(h=4),(g=h)==0){if(e(q!=null),I.data=O.data,I.w=O.w+O.offset,I.ha=O.ha-O.offset,I.put=lt,I.ac=Ur,I.bc=wn,I.ma=q,O.xa){if((h=Gs())==null){q=1;break e}if(function(te,he){var me=[0],Ee=[0],ye=[0];t:for(;;){if(te==null)return 0;if(he==null)return te.a=2,0;if(te.l=he,te.a=0,ae(te.m,he.data,he.w,he.ha),!is(te.m,me,Ee,ye)){te.a=3;break t}if(te.xb=$5,he.width=me[0],he.height=Ee[0],!Di(me[0],Ee[0],1,te,null))break t;return 1}return e(te.a!=0),0}(h,I)){if(I=(g=pa(I.width,I.height,q.Oa,q.ba))==0){t:{I=h;n:for(;;){if(I==null){I=0;break t}if(e(I.s.yc!=null),e(I.s.Ya!=null),e(0<I.s.Wb),e((b=I.l)!=null),e((O=b.ma)!=null),I.xb!=0){if(I.ca=O.ba,I.tb=O.tb,e(I.ca!=null),!Kc(O.Oa,b,fd)){I.a=2;break n}if(!_s(I,b.width)||b.da)break n;if((b.da||xt(I.ca.S))&&pn(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&pn()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!J(I.s.vb,I.s.Wa.Xa)){I.a=1;break n}I.xb=0}if(!qr(I,I.V,I.Ba,I.c,I.i,b.o,Ws))break n;O.Dc=I.Ma,I=1;break t}e(I.a!=0),I=0}I=!I}I&&(g=h.a)}else g=h.a}else{if((h=new xl)==null){q=1;break e}if(h.Fa=O.na,h.P=O.P,h.qc=O.Sa,vu(h,I)){if((g=pa(I.width,I.height,q.Oa,q.ba))==0){if(h.Aa=0,b=q.Oa,e((O=h)!=null),b!=null){if(0<(K=0>(K=b.Md)?0:100<K?255:255*K/100)){for(ee=ce=0;4>ee;++ee)12>(xe=O.pb[ee]).lc&&(xe.ia=K*HT[0>xe.lc?0:xe.lc]>>3),ce|=xe.ia;ce&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=b.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}(function(te,he){if(te==null)return 0;if(he==null)return kn(te,2,"NULL VP8Io parameter in VP8Decode().");if(!te.cb&&!vu(te,he))return 0;if(e(te.cb),he.ac==null||he.ac(he)){he.ob&&(te.L=0);var me=yd[te.L];if(te.L==2?(te.yb=0,te.zb=0):(te.yb=he.v-me>>4,te.zb=he.j-me>>4,0>te.yb&&(te.yb=0),0>te.zb&&(te.zb=0)),te.Va=he.o+15+me>>4,te.Hb=he.va+15+me>>4,te.Hb>te.za&&(te.Hb=te.za),te.Va>te.Ub&&(te.Va=te.Ub),0<te.L){var Ee=te.ed;for(me=0;4>me;++me){var ye;if(te.Qa.Cb){var Te=te.Qa.Lb[me];te.Qa.Fb||(Te+=Ee.Tb)}else Te=Ee.Tb;for(ye=0;1>=ye;++ye){var Ce=te.gd[me][ye],Me=Te;if(Ee.Pc&&(Me+=Ee.vd[0],ye&&(Me+=Ee.od[0])),0<(Me=0>Me?0:63<Me?63:Me)){var je=Me;0<Ee.wb&&(je=4<Ee.wb?je>>2:je>>1)>9-Ee.wb&&(je=9-Ee.wb),1>je&&(je=1),Ce.dd=je,Ce.tc=2*Me+je,Ce.ld=40<=Me?2:15<=Me?1:0}else Ce.tc=0;Ce.La=ye}}}me=0}else kn(te,6,"Frame setup failed"),me=te.a;if(me=me==0){if(me){te.$c=0,0<te.Aa||(te.Ic=WT);t:{me=te.Ic,Ee=4*(je=te.za);var rt=32*je,We=je+1,Ct=0<te.L?je*(0<te.Aa?2:1):0,Je=(te.Aa==2?2:1)*je;if((Ce=Ee+832+(ye=3*(16*me+yd[te.L])/2*rt)+(Te=te.Fa!=null&&0<te.Fa.length?te.Kc.c*te.Kc.i:0))!=Ce)me=0;else{if(Ce>te.Vb){if(te.Vb=0,te.Ec=s(Ce),te.Fc=0,te.Ec==null){me=kn(te,1,"no memory during frame initialization.");break t}te.Vb=Ce}Ce=te.Ec,Me=te.Fc,te.Ac=Ce,te.Bc=Me,Me+=Ee,te.Gd=o(rt,vl),te.Hd=0,te.rb=o(We+1,Mi),te.sb=1,te.wa=Ct?o(Ct,_r):null,te.Y=0,te.D.Nb=0,te.D.wa=te.wa,te.D.Y=te.Y,0<te.Aa&&(te.D.Y+=je),e(!0),te.oc=Ce,te.pc=Me,Me+=832,te.ya=o(Je,gl),te.aa=0,te.D.ya=te.ya,te.D.aa=te.aa,te.Aa==2&&(te.D.aa+=je),te.R=16*je,te.B=8*je,je=(rt=yd[te.L])*te.R,rt=rt/2*te.B,te.sa=Ce,te.ta=Me+je,te.qa=te.sa,te.ra=te.ta+16*me*te.R+rt,te.Ha=te.qa,te.Ia=te.ra+8*me*te.B+rt,te.$c=0,Me+=ye,te.mb=Te?Ce:null,te.nb=Te?Me:null,e(Me+Te<=te.Fc+te.Vb),Xs(te),i(te.Ac,te.Bc,0,Ee),me=1}}if(me){if(he.ka=0,he.y=te.sa,he.O=te.ta,he.f=te.qa,he.N=te.ra,he.ea=te.Ha,he.Vd=te.Ia,he.fa=te.R,he.Rc=te.B,he.F=null,he.J=0,!V5){for(me=-255;255>=me;++me)D5[255+me]=0>me?-me:me;for(me=-1020;1020>=me;++me)M5[1020+me]=-128>me?-128:127<me?127:me;for(me=-112;112>=me;++me)F5[112+me]=-16>me?-16:15<me?15:me;for(me=-255;510>=me;++me)O5[255+me]=0>me?0:255<me?255:me;V5=1}xa=Js,Ll=la,oo=wu,Jt=Mt,hn=Co,ls=aa,Zn=Tl,pr=da,jo=v,th=F,_u=as,ld=Cl,N5=Z,T5=le,C5=no,P5=ro,k5=_i,I5=Nl,Cs[0]=Hc,Cs[1]=_l,Cs[2]=eo,Cs[3]=$c,Cs[4]=Wc,Cs[5]=As,Cs[6]=Sr,Cs[7]=Gc,Cs[8]=Es,Cs[9]=ca,ba[0]=bi,ba[1]=zc,ba[2]=qc,ba[3]=Sl,ba[4]=ss,ba[5]=Zs,ba[6]=ua,Do[0]=ko,Do[1]=xu,Do[2]=ha,Do[3]=Fi,Do[4]=cn,Do[5]=Al,Do[6]=El,me=1}else me=0}me&&(me=function(Bt,mr){for(Bt.M=0;Bt.M<Bt.Va;++Bt.M){var Pt,Ze=Bt.Jc[Bt.M&Bt.Xb],Ve=Bt.m,er=Bt;for(Pt=0;Pt<er.za;++Pt){var Tt=Ve,qt=er,xn=qt.Ac,kr=qt.Bc+4*Pt,li=qt.zc,zn=qt.ya[qt.aa+Pt];if(qt.Qa.Bb?zn.$b=Se(Tt,qt.Pa.jb[0])?2+Se(Tt,qt.Pa.jb[2]):Se(Tt,qt.Pa.jb[1]):zn.$b=0,qt.kc&&(zn.Ad=Se(Tt,qt.Bd)),zn.Za=!Se(Tt,145)+0,zn.Za){var Hr=zn.Ob,ui=0;for(qt=0;4>qt;++qt){var gr,Ht=li[0+qt];for(gr=0;4>gr;++gr){Ht=IT[xn[kr+gr]][Ht];for(var nn=q5[Se(Tt,Ht[0])];0<nn;)nn=q5[2*nn+Se(Tt,Ht[nn])];Ht=-nn,xn[kr+gr]=Ht}r(Hr,ui,xn,kr,4),ui+=4,li[0+qt]=Ht}}else Ht=Se(Tt,156)?Se(Tt,128)?1:3:Se(Tt,163)?2:0,zn.Ob[0]=Ht,i(xn,kr,Ht,4),i(li,0,Ht,4);zn.Dd=Se(Tt,142)?Se(Tt,114)?Se(Tt,183)?1:3:2:0}if(er.m.Ka)return kn(Bt,7,"Premature end-of-partition0 encountered.");for(;Bt.ja<Bt.za;++Bt.ja){if(er=Ze,Tt=(Ve=Bt).rb[Ve.sb-1],xn=Ve.rb[Ve.sb+Ve.ja],Pt=Ve.ya[Ve.aa+Ve.ja],kr=Ve.kc?Pt.Ad:0)Tt.la=xn.la=0,Pt.Za||(Tt.Na=xn.Na=0),Pt.Hc=0,Pt.Gc=0,Pt.ia=0;else{var qn,rn;if(Tt=xn,xn=er,kr=Ve.Pa.Xc,li=Ve.ya[Ve.aa+Ve.ja],zn=Ve.pb[li.$b],qt=li.ad,Hr=0,ui=Ve.rb[Ve.sb-1],Ht=gr=0,i(qt,Hr,0,384),li.Za)var Ir=0,Ps=kr[3];else{nn=s(16);var tr=Tt.Na+ui.Na;if(tr=rh(xn,kr[1],tr,zn.Eb,0,nn,0),Tt.Na=ui.Na=(0<tr)+0,1<tr)xa(nn,0,qt,Hr);else{var Si=nn[0]+3>>3;for(nn=0;256>nn;nn+=16)qt[Hr+nn]=Si}Ir=1,Ps=kr[0]}var fn=15&Tt.la,yr=15&ui.la;for(nn=0;4>nn;++nn){var qi=1&yr;for(Si=rn=0;4>Si;++Si)fn=fn>>1|(qi=(tr=rh(xn,Ps,tr=qi+(1&fn),zn.Sc,Ir,qt,Hr))>Ir)<<7,rn=rn<<2|(3<tr?3:1<tr?2:qt[Hr+0]!=0),Hr+=16;fn>>=4,yr=yr>>1|qi<<7,gr=(gr<<8|rn)>>>0}for(Ps=fn,Ir=yr>>4,qn=0;4>qn;qn+=2){for(rn=0,fn=Tt.la>>4+qn,yr=ui.la>>4+qn,nn=0;2>nn;++nn){for(qi=1&yr,Si=0;2>Si;++Si)tr=qi+(1&fn),fn=fn>>1|(qi=0<(tr=rh(xn,kr[2],tr,zn.Qc,0,qt,Hr)))<<3,rn=rn<<2|(3<tr?3:1<tr?2:qt[Hr+0]!=0),Hr+=16;fn>>=2,yr=yr>>1|qi<<5}Ht|=rn<<4*qn,Ps|=fn<<4<<qn,Ir|=(240&yr)<<qn}Tt.la=Ps,ui.la=Ir,li.Hc=gr,li.Gc=Ht,li.ia=43690&Ht?0:zn.ia,kr=!(gr|Ht)}if(0<Ve.L&&(Ve.wa[Ve.Y+Ve.ja]=Ve.gd[Pt.$b][Pt.Za],Ve.wa[Ve.Y+Ve.ja].La|=!kr),er.Ka)return kn(Bt,7,"Premature end-of-file encountered.")}if(Xs(Bt),Ve=mr,er=1,Pt=(Ze=Bt).D,Tt=0<Ze.L&&Ze.M>=Ze.zb&&Ze.M<=Ze.Va,Ze.Aa==0)t:{if(Pt.M=Ze.M,Pt.uc=Tt,Pr(Ze,Pt),er=1,Pt=(rn=Ze.D).Nb,Tt=(Ht=yd[Ze.L])*Ze.R,xn=Ht/2*Ze.B,nn=16*Pt*Ze.R,Si=8*Pt*Ze.B,kr=Ze.sa,li=Ze.ta-Tt+nn,zn=Ze.qa,qt=Ze.ra-xn+Si,Hr=Ze.Ha,ui=Ze.Ia-xn+Si,yr=(fn=rn.M)==0,gr=fn>=Ze.Va-1,Ze.Aa==2&&Pr(Ze,rn),rn.uc)for(qi=(tr=Ze).D.M,e(tr.D.uc),rn=tr.yb;rn<tr.Hb;++rn){Ir=rn,Ps=qi;var ci=($i=(Lr=tr).D).Nb;qn=Lr.R;var $i=$i.wa[$i.Y+Ir],Hi=Lr.sa,Ai=Lr.ta+16*ci*qn+16*Ir,Wi=$i.dd,gn=$i.tc;if(gn!=0)if(e(3<=gn),Lr.L==1)0<Ir&&P5(Hi,Ai,qn,gn+4),$i.La&&I5(Hi,Ai,qn,gn),0<Ps&&C5(Hi,Ai,qn,gn+4),$i.La&&k5(Hi,Ai,qn,gn);else{var Gi=Lr.B,ks=Lr.qa,Rl=Lr.ra+8*ci*Gi+8*Ir,Mo=Lr.Ha,Lr=Lr.Ia+8*ci*Gi+8*Ir;ci=$i.ld,0<Ir&&(pr(Hi,Ai,qn,gn+4,Wi,ci),th(ks,Rl,Mo,Lr,Gi,gn+4,Wi,ci)),$i.La&&(ld(Hi,Ai,qn,gn,Wi,ci),T5(ks,Rl,Mo,Lr,Gi,gn,Wi,ci)),0<Ps&&(Zn(Hi,Ai,qn,gn+4,Wi,ci),jo(ks,Rl,Mo,Lr,Gi,gn+4,Wi,ci)),$i.La&&(_u(Hi,Ai,qn,gn,Wi,ci),N5(ks,Rl,Mo,Lr,Gi,gn,Wi,ci))}}if(Ze.ia&&alert("todo:DitherRow"),Ve.put!=null){if(rn=16*fn,fn=16*(fn+1),yr?(Ve.y=Ze.sa,Ve.O=Ze.ta+nn,Ve.f=Ze.qa,Ve.N=Ze.ra+Si,Ve.ea=Ze.Ha,Ve.W=Ze.Ia+Si):(rn-=Ht,Ve.y=kr,Ve.O=li,Ve.f=zn,Ve.N=qt,Ve.ea=Hr,Ve.W=ui),gr||(fn-=Ht),fn>Ve.o&&(fn=Ve.o),Ve.F=null,Ve.J=null,Ze.Fa!=null&&0<Ze.Fa.length&&rn<fn&&(Ve.J=In(Ze,Ve,rn,fn-rn),Ve.F=Ze.mb,Ve.F==null&&Ve.F.length==0)){er=kn(Ze,3,"Could not decode alpha data.");break t}rn<Ve.j&&(Ht=Ve.j-rn,rn=Ve.j,e(!(1&Ht)),Ve.O+=Ze.R*Ht,Ve.N+=Ze.B*(Ht>>1),Ve.W+=Ze.B*(Ht>>1),Ve.F!=null&&(Ve.J+=Ve.width*Ht)),rn<fn&&(Ve.O+=Ve.v,Ve.N+=Ve.v>>1,Ve.W+=Ve.v>>1,Ve.F!=null&&(Ve.J+=Ve.v),Ve.ka=rn-Ve.j,Ve.U=Ve.va-Ve.v,Ve.T=fn-rn,er=Ve.put(Ve))}Pt+1!=Ze.Ic||gr||(r(Ze.sa,Ze.ta-Tt,kr,li+16*Ze.R,Tt),r(Ze.qa,Ze.ra-xn,zn,qt+8*Ze.B,xn),r(Ze.Ha,Ze.Ia-xn,Hr,ui+8*Ze.B,xn))}if(!er)return kn(Bt,6,"Output aborted.")}return 1}(te,he)),he.bc!=null&&he.bc(he),me&=1}return me?(te.cb=0,me):0})(h,I)||(g=h.a)}}else g=h.a}g==0&&q.Oa!=null&&q.Oa.fd&&(g=Qc(q.ba))}q=g}U=q!=0?null:11>U?H.f.RGBA.eb:H.f.kb.y}else U=null;return U};var X5=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(k,M){for(var S="",P=0;P<4;P++)S+=String.fromCharCode(k[M++]);return S}function c(k,M){return k[M+0]|k[M+1]<<8}function d(k,M){return(k[M+0]|k[M+1]<<8|k[M+2]<<16)>>>0}function m(k,M){return(k[M+0]|k[M+1]<<8|k[M+2]<<16|k[M+3]<<24)>>>0}new l;var p=[0],x=[0],E=[],C=new l,w=t,A=function(k,M){var S={},P=0,j=!1,B=0,X=0;if(S.frames=[],!function(V,Y){for(var ie=0;ie<4;ie++)if(V[Y+ie]!="RIFF".charCodeAt(ie))return!0;return!1}(k,M)){for(m(k,M+=4),M+=8;M<k.length;){var se=u(k,M),re=m(k,M+=4);M+=4;var $=re+(1&re);switch(se){case"VP8 ":case"VP8L":S.frames[P]===void 0&&(S.frames[P]={}),(ve=S.frames[P]).src_off=j?X:M-8,ve.src_size=B+re+8,P++,j&&(j=!1,B=0,X=0);break;case"VP8X":(ve=S.header={}).feature_flags=k[M];var ae=M+4;ve.canvas_width=1+d(k,ae),ae+=3,ve.canvas_height=1+d(k,ae),ae+=3;break;case"ALPH":j=!0,B=$+8,X=M-8;break;case"ANIM":(ve=S.header).bgcolor=m(k,M),ae=M+4,ve.loop_count=c(k,ae),ae+=2;break;case"ANMF":var fe,ve;(ve=S.frames[P]={}).offset_x=2*d(k,M),M+=3,ve.offset_y=2*d(k,M),M+=3,ve.width=1+d(k,M),M+=3,ve.height=1+d(k,M),M+=3,ve.duration=d(k,M),M+=3,fe=k[M++],ve.dispose=1&fe,ve.blend=fe>>1&1}se!="ANMF"&&(M+=$)}return S}}(w,0);A.response=w,A.rgbaoutput=!0,A.dataurl=!1;var N=A.header?A.header:null,R=A.frames?A.frames:null;if(N){N.loop_counter=N.loop_count,p=[N.canvas_height],x=[N.canvas_width];for(var z=0;z<R.length&&R[z].blend!=0;z++);}var Q=R[0],L=C.WebPDecodeRGBA(w,Q.src_off,Q.src_size,x,p);Q.rgba=L,Q.imgwidth=x[0],Q.imgheight=p[0];for(var T=0;T<x[0]*p[0]*4;T++)E[T]=L[T];return this.width=x,this.height=p,this.data=E,this}(function(t){var e,n,r,i,s,o,a,l,u,c=function(V){return V=V||{},this.isStrokeTransparent=V.isStrokeTransparent||!1,this.strokeOpacity=V.strokeOpacity||1,this.strokeStyle=V.strokeStyle||"#000000",this.fillStyle=V.fillStyle||"#000000",this.isFillTransparent=V.isFillTransparent||!1,this.fillOpacity=V.fillOpacity||1,this.font=V.font||"10px sans-serif",this.textBaseline=V.textBaseline||"alphabetic",this.textAlign=V.textAlign||"left",this.lineWidth=V.lineWidth||1,this.lineJoin=V.lineJoin||"miter",this.lineCap=V.lineCap||"butt",this.path=V.path||[],this.transform=V.transform!==void 0?V.transform.clone():new l,this.globalCompositeOperation=V.globalCompositeOperation||"normal",this.globalAlpha=V.globalAlpha||1,this.clip_path=V.clip_path||[],this.currentPoint=V.currentPoint||new o,this.miterLimit=V.miterLimit||10,this.lastPoint=V.lastPoint||new o,this.lineDashOffset=V.lineDashOffset||0,this.lineDash=V.lineDash||[],this.margin=V.margin||[0,0,0,0],this.prevPageLastElemOffset=V.prevPageLastElemOffset||0,this.ignoreClearRect=typeof V.ignoreClearRect!="boolean"||V.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var d=function(V){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=V;Object.defineProperty(this,"pdf",{get:function(){return Y}});var ie=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ie},set:function(ge){ie=!!ge}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(ge){ne=!!ge}});var oe=0;Object.defineProperty(this,"posX",{get:function(){return oe},set:function(ge){isNaN(ge)||(oe=ge)}});var ue=0;Object.defineProperty(this,"posY",{get:function(){return ue},set:function(ge){isNaN(ge)||(ue=ge)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ge){var J;typeof ge=="number"?J=[ge,ge,ge,ge]:((J=new Array(4))[0]=ge[0],J[1]=ge.length>=2?ge[1]:J[0],J[2]=ge.length>=3?ge[2]:J[0],J[3]=ge.length>=4?ge[3]:J[1]),u.margin=J}});var we=!1;Object.defineProperty(this,"autoPaging",{get:function(){return we},set:function(ge){we=ge}});var be=0;Object.defineProperty(this,"lastBreak",{get:function(){return be},set:function(ge){be=ge}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(ge){Se=ge}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ge){ge instanceof c&&(u=ge)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ge){u.path=ge}});var Re=[];Object.defineProperty(this,"ctxStack",{get:function(){return Re},set:function(ge){Re=ge}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ge){var J;J=m(ge),this.ctx.fillStyle=J.style,this.ctx.isFillTransparent=J.a===0,this.ctx.fillOpacity=J.a,this.pdf.setFillColor(J.r,J.g,J.b,{a:J.a}),this.pdf.setTextColor(J.r,J.g,J.b,{a:J.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ge){var J=m(ge);this.ctx.strokeStyle=J.style,this.ctx.isStrokeTransparent=J.a===0,this.ctx.strokeOpacity=J.a,J.a===0?this.pdf.setDrawColor(255,255,255):(J.a,this.pdf.setDrawColor(J.r,J.g,J.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ge){["butt","round","square"].indexOf(ge)!==-1&&(this.ctx.lineCap=ge,this.pdf.setLineCap(ge))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ge){isNaN(ge)||(this.ctx.lineWidth=ge,this.pdf.setLineWidth(ge))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ge){["bevel","round","miter"].indexOf(ge)!==-1&&(this.ctx.lineJoin=ge,this.pdf.setLineJoin(ge))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ge){isNaN(ge)||(this.ctx.miterLimit=ge,this.pdf.setMiterLimit(ge))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ge){this.ctx.textBaseline=ge}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ge){["right","end","center","left","start"].indexOf(ge)!==-1&&(this.ctx.textAlign=ge)}});var Ae=null,Pe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Pe},set:function(ge){Ae=null,Pe=ge}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ge){var J;if(this.ctx.font=ge,(J=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ge))!==null){var Ke=J[1];J[2];var ot=J[3],Ue=J[4];J[5];var Ie=J[6],ze=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ue)[2];Ue=Math.floor(ze==="px"?parseFloat(Ue)*this.pdf.internal.scaleFactor:ze==="em"?parseFloat(Ue)*this.pdf.getFontSize():parseFloat(Ue)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ue);var Be=function(ht){var st,Kt,Ut=[],Xe=ht.trim();if(Xe==="")return Qg;if(Xe in z3)return[z3[Xe]];for(;Xe!=="";){switch(Kt=null,st=(Xe=$3(Xe)).charAt(0)){case'"':case"'":Kt=Xz(Xe.substring(1),st);break;default:Kt=Jz(Xe)}if(Kt===null||(Ut.push(Kt[0]),(Xe=$3(Kt[1]))!==""&&Xe.charAt(0)!==","))return Qg;Xe=Xe.replace(/^,/,"")}return Ut}(Ie);if(this.fontFaces){var _t=function(ht,st){if(Ae===null){var Kt=function(Ut){var Xe=[];return Object.keys(Ut).forEach(function(gt){Ut[gt].forEach(function(Zt){var ut=null;switch(Zt){case"bold":ut={family:gt,weight:"bold"};break;case"italic":ut={family:gt,style:"italic"};break;case"bolditalic":ut={family:gt,weight:"bold",style:"italic"};break;case"":case"normal":ut={family:gt}}ut!==null&&(ut.ref={name:gt,style:Zt},Xe.push(ut))})}),Xe}(ht.getFontList());Ae=function(Ut){for(var Xe={},gt=0;gt<Ut.length;++gt){var Zt=Kg(Ut[gt]),ut=Zt.family,kt=Zt.stretch,xt=Zt.style,En=Zt.weight;Xe[ut]=Xe[ut]||{},Xe[ut][kt]=Xe[ut][kt]||{},Xe[ut][kt][xt]=Xe[ut][kt][xt]||{},Xe[ut][kt][xt][En]=Zt}return Xe}(Kt.concat(st))}return Ae}(this.pdf,this.fontFaces),tt=Be.map(function(ht){return{family:ht,stretch:"normal",weight:ot,style:Ke}}),Ot=function(ht,st,Kt){for(var Ut=(Kt=Kt||{}).defaultFontFamily||"times",Xe=Object.assign({},Yz,Kt.genericFontFamilies||{}),gt=null,Zt=null,ut=0;ut<st.length;++ut)if(Xe[(gt=Kg(st[ut])).family]&&(gt.family=Xe[gt.family]),ht.hasOwnProperty(gt.family)){Zt=ht[gt.family];break}if(!(Zt=Zt||ht[Ut]))throw new Error("Could not find a font-family for the rule '"+q3(gt)+"' and default family '"+Ut+"'.");if(Zt=function(kt,xt){if(xt[kt])return xt[kt];var En=Z2[kt],vn=En<=Z2.normal?-1:1,Yt=U3(xt,tT,En,vn);if(!Yt)throw new Error("Could not find a matching font-stretch value for "+kt);return Yt}(gt.stretch,Zt),Zt=function(kt,xt){if(xt[kt])return xt[kt];for(var En=eT[kt],vn=0;vn<En.length;++vn)if(xt[En[vn]])return xt[En[vn]];throw new Error("Could not find a matching font-style for "+kt)}(gt.style,Zt),!(Zt=function(kt,xt){if(xt[kt])return xt[kt];if(kt===400&&xt[500])return xt[500];if(kt===500&&xt[400])return xt[400];var En=Qz[kt],vn=U3(xt,nT,En,kt<400?-1:1);if(!vn)throw new Error("Could not find a matching font-weight for value "+kt);return vn}(gt.weight,Zt)))throw new Error("Failed to resolve a font for the rule '"+q3(gt)+"'.");return Zt}(_t,tt);this.pdf.setFont(Ot.ref.name,Ot.ref.style)}else{var wt="";(ot==="bold"||parseInt(ot,10)>=700||Ke==="bold")&&(wt="bold"),Ke==="italic"&&(wt+="italic"),wt.length===0&&(wt="normal");for(var et="",St={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},mt=0;mt<Be.length;mt++){if(this.pdf.internal.getFont(Be[mt],wt,{noFallback:!0,disableWarning:!0})!==void 0){et=Be[mt];break}if(wt==="bolditalic"&&this.pdf.internal.getFont(Be[mt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)et=Be[mt],wt="bold";else if(this.pdf.internal.getFont(Be[mt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){et=Be[mt],wt="normal";break}}if(et===""){for(var nt=0;nt<Be.length;nt++)if(St[Be[nt]]){et=St[Be[nt]];break}}et=et===""?"Times":et,this.pdf.setFont(et,wt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ge){this.ctx.globalCompositeOperation=ge}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ge){this.ctx.globalAlpha=ge}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ge){this.ctx.lineDashOffset=ge,ve.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ge){this.ctx.lineDash=ge,ve.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ge){this.ctx.ignoreClearRect=!!ge}})};d.prototype.setLineDash=function(V){this.lineDash=V},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){R.call(this,"fill",!1)},d.prototype.stroke=function(){R.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(V,Y){if(isNaN(V)||isNaN(Y))throw dn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ie=this.ctx.transform.applyToPoint(new o(V,Y));this.path.push({type:"mt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(V,Y)},d.prototype.closePath=function(){var V=new o(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&an(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){V=new o(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(V.x,V.y)},d.prototype.lineTo=function(V,Y){if(isNaN(V)||isNaN(Y))throw dn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ie=this.ctx.transform.applyToPoint(new o(V,Y));this.path.push({type:"lt",x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),R.call(this,null,!0)},d.prototype.quadraticCurveTo=function(V,Y,ie,ne){if(isNaN(ie)||isNaN(ne)||isNaN(V)||isNaN(Y))throw dn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var oe=this.ctx.transform.applyToPoint(new o(ie,ne)),ue=this.ctx.transform.applyToPoint(new o(V,Y));this.path.push({type:"qct",x1:ue.x,y1:ue.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new o(oe.x,oe.y)},d.prototype.bezierCurveTo=function(V,Y,ie,ne,oe,ue){if(isNaN(oe)||isNaN(ue)||isNaN(V)||isNaN(Y)||isNaN(ie)||isNaN(ne))throw dn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var we=this.ctx.transform.applyToPoint(new o(oe,ue)),be=this.ctx.transform.applyToPoint(new o(V,Y)),Se=this.ctx.transform.applyToPoint(new o(ie,ne));this.path.push({type:"bct",x1:be.x,y1:be.y,x2:Se.x,y2:Se.y,x:we.x,y:we.y}),this.ctx.lastPoint=new o(we.x,we.y)},d.prototype.arc=function(V,Y,ie,ne,oe,ue){if(isNaN(V)||isNaN(Y)||isNaN(ie)||isNaN(ne)||isNaN(oe))throw dn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ue=!!ue,!this.ctx.transform.isIdentity){var we=this.ctx.transform.applyToPoint(new o(V,Y));V=we.x,Y=we.y;var be=this.ctx.transform.applyToPoint(new o(0,ie)),Se=this.ctx.transform.applyToPoint(new o(0,0));ie=Math.sqrt(Math.pow(be.x-Se.x,2)+Math.pow(be.y-Se.y,2))}Math.abs(oe-ne)>=2*Math.PI&&(ne=0,oe=2*Math.PI),this.path.push({type:"arc",x:V,y:Y,radius:ie,startAngle:ne,endAngle:oe,counterclockwise:ue})},d.prototype.arcTo=function(V,Y,ie,ne,oe){throw new Error("arcTo not implemented.")},d.prototype.rect=function(V,Y,ie,ne){if(isNaN(V)||isNaN(Y)||isNaN(ie)||isNaN(ne))throw dn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(V,Y),this.lineTo(V+ie,Y),this.lineTo(V+ie,Y+ne),this.lineTo(V,Y+ne),this.lineTo(V,Y),this.lineTo(V+ie,Y),this.lineTo(V,Y)},d.prototype.fillRect=function(V,Y,ie,ne){if(isNaN(V)||isNaN(Y)||isNaN(ie)||isNaN(ne))throw dn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var oe={};this.lineCap!=="butt"&&(oe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(oe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(V,Y,ie,ne),this.fill(),oe.hasOwnProperty("lineCap")&&(this.lineCap=oe.lineCap),oe.hasOwnProperty("lineJoin")&&(this.lineJoin=oe.lineJoin)}},d.prototype.strokeRect=function(V,Y,ie,ne){if(isNaN(V)||isNaN(Y)||isNaN(ie)||isNaN(ne))throw dn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(V,Y,ie,ne),this.stroke())},d.prototype.clearRect=function(V,Y,ie,ne){if(isNaN(V)||isNaN(Y)||isNaN(ie)||isNaN(ne))throw dn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(V,Y,ie,ne))},d.prototype.save=function(V){V=typeof V!="boolean"||V;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),V){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},d.prototype.restore=function(V){V=typeof V!="boolean"||V;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,ie=0;ie<this.pdf.internal.getNumberOfPages();ie++)this.pdf.setPage(ie+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),V&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(V){var Y,ie,ne,oe;if(V.isCanvasGradient===!0&&(V=V.getColor()),!V)return{r:0,g:0,b:0,a:0,style:V};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(V))Y=0,ie=0,ne=0,oe=0;else{var ue=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(V);if(ue!==null)Y=parseInt(ue[1]),ie=parseInt(ue[2]),ne=parseInt(ue[3]),oe=1;else if((ue=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(V))!==null)Y=parseInt(ue[1]),ie=parseInt(ue[2]),ne=parseInt(ue[3]),oe=parseFloat(ue[4]);else{if(oe=1,typeof V=="string"&&V.charAt(0)!=="#"){var we=new GN(V);V=we.ok?we.toHex():"#000000"}V.length===4?(Y=V.substring(1,2),Y+=Y,ie=V.substring(2,3),ie+=ie,ne=V.substring(3,4),ne+=ne):(Y=V.substring(1,3),ie=V.substring(3,5),ne=V.substring(5,7)),Y=parseInt(Y,16),ie=parseInt(ie,16),ne=parseInt(ne,16)}}return{r:Y,g:ie,b:ne,a:oe,style:V}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(V,Y,ie,ne){if(isNaN(Y)||isNaN(ie)||typeof V!="string")throw dn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!p.call(this)){var oe=$(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;P.call(this,{text:V,x:Y,y:ie,scale:ue,angle:oe,align:this.textAlign,maxWidth:ne})}},d.prototype.strokeText=function(V,Y,ie,ne){if(isNaN(Y)||isNaN(ie)||typeof V!="string")throw dn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){ne=isNaN(ne)?void 0:ne;var oe=$(this.ctx.transform.rotation),ue=this.ctx.transform.scaleX;P.call(this,{text:V,x:Y,y:ie,scale:ue,renderingMode:"stroke",angle:oe,align:this.textAlign,maxWidth:ne})}},d.prototype.measureText=function(V){if(typeof V!="string")throw dn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,ie=this.pdf.internal.scaleFactor,ne=Y.internal.getFontSize(),oe=Y.getStringUnitWidth(V)*ne/Y.internal.scaleFactor;return new function(ue){var we=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return we}}),this}({width:oe*=Math.round(96*ie/72*1e4)/1e4})},d.prototype.scale=function(V,Y){if(isNaN(V)||isNaN(Y))throw dn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ie=new l(V,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(ie)},d.prototype.rotate=function(V){if(isNaN(V))throw dn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new l(Math.cos(V),Math.sin(V),-Math.sin(V),Math.cos(V),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},d.prototype.translate=function(V,Y){if(isNaN(V)||isNaN(Y))throw dn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ie=new l(1,0,0,1,V,Y);this.ctx.transform=this.ctx.transform.multiply(ie)},d.prototype.transform=function(V,Y,ie,ne,oe,ue){if(isNaN(V)||isNaN(Y)||isNaN(ie)||isNaN(ne)||isNaN(oe)||isNaN(ue))throw dn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var we=new l(V,Y,ie,ne,oe,ue);this.ctx.transform=this.ctx.transform.multiply(we)},d.prototype.setTransform=function(V,Y,ie,ne,oe,ue){V=isNaN(V)?1:V,Y=isNaN(Y)?0:Y,ie=isNaN(ie)?0:ie,ne=isNaN(ne)?1:ne,oe=isNaN(oe)?0:oe,ue=isNaN(ue)?0:ue,this.ctx.transform=new l(V,Y,ie,ne,oe,ue)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(V,Y,ie,ne,oe,ue,we,be,Se){var Re=this.pdf.getImageProperties(V),Ae=1,Pe=1,ge=1,J=1;ne!==void 0&&be!==void 0&&(ge=be/ne,J=Se/oe,Ae=Re.width/ne*be/ne,Pe=Re.height/oe*Se/oe),ue===void 0&&(ue=Y,we=ie,Y=0,ie=0),ne!==void 0&&be===void 0&&(be=ne,Se=oe),ne===void 0&&be===void 0&&(be=Re.width,Se=Re.height);for(var Ke,ot=this.ctx.transform.decompose(),Ue=$(ot.rotate.shx),Ie=new l,ze=(Ie=(Ie=(Ie=Ie.multiply(ot.translate)).multiply(ot.skew)).multiply(ot.scale)).applyToRectangle(new a(ue-Y*ge,we-ie*J,ne*Ae,oe*Pe)),Be=C.call(this,ze),_t=[],tt=0;tt<Be.length;tt+=1)_t.indexOf(Be[tt])===-1&&_t.push(Be[tt]);if(N(_t),this.autoPaging)for(var Ot=_t[0],wt=_t[_t.length-1],et=Ot;et<wt+1;et++){this.pdf.setPage(et);var St=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],mt=et===1?this.posY+this.margin[0]:this.margin[0],nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],st=et===1?0:nt+(et-2)*ht;if(this.ctx.clip_path.length!==0){var Kt=this.path;Ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Ke,this.posX+this.margin[3],-st+mt+this.ctx.prevPageLastElemOffset),z.call(this,"fill",!0),this.path=Kt}var Ut=JSON.parse(JSON.stringify(ze));Ut=A([Ut],this.posX+this.margin[3],-st+mt+this.ctx.prevPageLastElemOffset)[0];var Xe=(et>Ot||et<wt)&&E.call(this);Xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],St,ht,null).clip().discardPath()),this.pdf.addImage(V,"JPEG",Ut.x,Ut.y,Ut.w,Ut.h,null,null,Ue),Xe&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(V,"JPEG",ze.x,ze.y,ze.w,ze.h,null,null,Ue)};var C=function(V,Y,ie){var ne=[];Y=Y||this.pdf.internal.pageSize.width,ie=ie||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var oe=this.posY+this.ctx.prevPageLastElemOffset;switch(V.type){default:case"mt":case"lt":ne.push(Math.floor((V.y+oe)/ie)+1);break;case"arc":ne.push(Math.floor((V.y+oe-V.radius)/ie)+1),ne.push(Math.floor((V.y+oe+V.radius)/ie)+1);break;case"qct":var ue=ae(this.ctx.lastPoint.x,this.ctx.lastPoint.y,V.x1,V.y1,V.x,V.y);ne.push(Math.floor((ue.y+oe)/ie)+1),ne.push(Math.floor((ue.y+ue.h+oe)/ie)+1);break;case"bct":var we=fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,V.x1,V.y1,V.x2,V.y2,V.x,V.y);ne.push(Math.floor((we.y+oe)/ie)+1),ne.push(Math.floor((we.y+we.h+oe)/ie)+1);break;case"rect":ne.push(Math.floor((V.y+oe)/ie)+1),ne.push(Math.floor((V.y+V.h+oe)/ie)+1)}for(var be=0;be<ne.length;be+=1)for(;this.pdf.internal.getNumberOfPages()<ne[be];)w.call(this);return ne},w=function(){var V=this.fillStyle,Y=this.strokeStyle,ie=this.font,ne=this.lineCap,oe=this.lineWidth,ue=this.lineJoin;this.pdf.addPage(),this.fillStyle=V,this.strokeStyle=Y,this.font=ie,this.lineCap=ne,this.lineWidth=oe,this.lineJoin=ue},A=function(V,Y,ie){for(var ne=0;ne<V.length;ne++)switch(V[ne].type){case"bct":V[ne].x2+=Y,V[ne].y2+=ie;case"qct":V[ne].x1+=Y,V[ne].y1+=ie;default:V[ne].x+=Y,V[ne].y+=ie}return V},N=function(V){return V.sort(function(Y,ie){return Y-ie})},R=function(V,Y){for(var ie,ne,oe=this.fillStyle,ue=this.strokeStyle,we=this.lineCap,be=this.lineWidth,Se=Math.abs(be*this.ctx.transform.scaleX),Re=this.lineJoin,Ae=JSON.parse(JSON.stringify(this.path)),Pe=JSON.parse(JSON.stringify(this.path)),ge=[],J=0;J<Pe.length;J++)if(Pe[J].x!==void 0)for(var Ke=C.call(this,Pe[J]),ot=0;ot<Ke.length;ot+=1)ge.indexOf(Ke[ot])===-1&&ge.push(Ke[ot]);for(var Ue=0;Ue<ge.length;Ue++)for(;this.pdf.internal.getNumberOfPages()<ge[Ue];)w.call(this);if(N(ge),this.autoPaging)for(var Ie=ge[0],ze=ge[ge.length-1],Be=Ie;Be<ze+1;Be++){this.pdf.setPage(Be),this.fillStyle=oe,this.strokeStyle=ue,this.lineCap=we,this.lineWidth=Se,this.lineJoin=Re;var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],tt=Be===1?this.posY+this.margin[0]:this.margin[0],Ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=Be===1?0:Ot+(Be-2)*wt;if(this.ctx.clip_path.length!==0){var St=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(ie,this.posX+this.margin[3],-et+tt+this.ctx.prevPageLastElemOffset),z.call(this,V,!0),this.path=St}if(ne=JSON.parse(JSON.stringify(Ae)),this.path=A(ne,this.posX+this.margin[3],-et+tt+this.ctx.prevPageLastElemOffset),Y===!1||Be===0){var mt=(Be>Ie||Be<ze)&&E.call(this);mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,wt,null).clip().discardPath()),z.call(this,V,Y),mt&&this.pdf.restoreGraphicsState()}this.lineWidth=be}else this.lineWidth=Se,z.call(this,V,Y),this.lineWidth=be;this.path=Ae},z=function(V,Y){if((V!=="stroke"||Y||!x.call(this))&&(V==="stroke"||Y||!p.call(this))){for(var ie,ne,oe=[],ue=this.path,we=0;we<ue.length;we++){var be=ue[we];switch(be.type){case"begin":oe.push({begin:!0});break;case"close":oe.push({close:!0});break;case"mt":oe.push({start:be,deltas:[],abs:[]});break;case"lt":var Se=oe.length;if(ue[we-1]&&!isNaN(ue[we-1].x)&&(ie=[be.x-ue[we-1].x,be.y-ue[we-1].y],Se>0)){for(;Se>=0;Se--)if(oe[Se-1].close!==!0&&oe[Se-1].begin!==!0){oe[Se-1].deltas.push(ie),oe[Se-1].abs.push(be);break}}break;case"bct":ie=[be.x1-ue[we-1].x,be.y1-ue[we-1].y,be.x2-ue[we-1].x,be.y2-ue[we-1].y,be.x-ue[we-1].x,be.y-ue[we-1].y],oe[oe.length-1].deltas.push(ie);break;case"qct":var Re=ue[we-1].x+2/3*(be.x1-ue[we-1].x),Ae=ue[we-1].y+2/3*(be.y1-ue[we-1].y),Pe=be.x+2/3*(be.x1-be.x),ge=be.y+2/3*(be.y1-be.y),J=be.x,Ke=be.y;ie=[Re-ue[we-1].x,Ae-ue[we-1].y,Pe-ue[we-1].x,ge-ue[we-1].y,J-ue[we-1].x,Ke-ue[we-1].y],oe[oe.length-1].deltas.push(ie);break;case"arc":oe.push({deltas:[],abs:[],arc:!0}),Array.isArray(oe[oe.length-1].abs)&&oe[oe.length-1].abs.push(be)}}ne=Y?null:V==="stroke"?"stroke":"fill";for(var ot=!1,Ue=0;Ue<oe.length;Ue++)if(oe[Ue].arc)for(var Ie=oe[Ue].abs,ze=0;ze<Ie.length;ze++){var Be=Ie[ze];Be.type==="arc"?T.call(this,Be.x,Be.y,Be.radius,Be.startAngle,Be.endAngle,Be.counterclockwise,void 0,Y,!ot):j.call(this,Be.x,Be.y),ot=!0}else if(oe[Ue].close===!0)this.pdf.internal.out("h"),ot=!1;else if(oe[Ue].begin!==!0){var _t=oe[Ue].start.x,tt=oe[Ue].start.y;B.call(this,oe[Ue].deltas,_t,tt),ot=!0}ne&&k.call(this,ne),Y&&M.call(this)}},Q=function(V){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ie=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return V-ie;case"top":return V+Y-ie;case"hanging":return V+Y-2*ie;case"middle":return V+Y/2-ie;default:return V}},L=function(V){return V+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var V=function(){};return V.colorStops=[],V.addColorStop=function(Y,ie){this.colorStops.push([Y,ie])},V.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},V.isCanvasGradient=!0,V},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(V,Y,ie,ne,oe,ue,we,be,Se){for(var Re=se.call(this,ie,ne,oe,ue),Ae=0;Ae<Re.length;Ae++){var Pe=Re[Ae];Ae===0&&(Se?S.call(this,Pe.x1+V,Pe.y1+Y):j.call(this,Pe.x1+V,Pe.y1+Y)),X.call(this,V,Y,Pe.x2,Pe.y2,Pe.x3,Pe.y3,Pe.x4,Pe.y4)}be?M.call(this):k.call(this,we)},k=function(V){switch(V){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},S=function(V,Y){this.pdf.internal.out(n(V)+" "+r(Y)+" m")},P=function(V){var Y;switch(V.align){case"right":case"end":Y="right";break;case"center":Y="center";break;default:Y="left"}var ie=this.pdf.getTextDimensions(V.text),ne=Q.call(this,V.y),oe=L.call(this,ne)-ie.h,ue=this.ctx.transform.applyToPoint(new o(V.x,ne)),we=this.ctx.transform.decompose(),be=new l;be=(be=(be=be.multiply(we.translate)).multiply(we.skew)).multiply(we.scale);for(var Se,Re,Ae,Pe=this.ctx.transform.applyToRectangle(new a(V.x,ne,ie.w,ie.h)),ge=be.applyToRectangle(new a(V.x,oe,ie.w,ie.h)),J=C.call(this,ge),Ke=[],ot=0;ot<J.length;ot+=1)Ke.indexOf(J[ot])===-1&&Ke.push(J[ot]);if(N(Ke),this.autoPaging)for(var Ue=Ke[0],Ie=Ke[Ke.length-1],ze=Ue;ze<Ie+1;ze++){this.pdf.setPage(ze);var Be=ze===1?this.posY+this.margin[0]:this.margin[0],_t=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],tt=this.pdf.internal.pageSize.height-this.margin[2],Ot=tt-this.margin[0],wt=this.pdf.internal.pageSize.width-this.margin[1],et=wt-this.margin[3],St=ze===1?0:_t+(ze-2)*Ot;if(this.ctx.clip_path.length!==0){var mt=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=A(Se,this.posX+this.margin[3],-1*St+Be),z.call(this,"fill",!0),this.path=mt}var nt=A([JSON.parse(JSON.stringify(ge))],this.posX+this.margin[3],-St+Be+this.ctx.prevPageLastElemOffset)[0];V.scale>=.01&&(Re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Re*V.scale),Ae=this.lineWidth,this.lineWidth=Ae*V.scale);var ht=this.autoPaging!=="text";if(ht||nt.y+nt.h<=tt){if(ht||nt.y>=Be&&nt.x<=wt){var st=ht?V.text:this.pdf.splitTextToSize(V.text,V.maxWidth||wt-nt.x)[0],Kt=A([JSON.parse(JSON.stringify(Pe))],this.posX+this.margin[3],-St+Be+this.ctx.prevPageLastElemOffset)[0],Ut=ht&&(ze>Ue||ze<Ie)&&E.call(this);Ut&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,Ot,null).clip().discardPath()),this.pdf.text(st,Kt.x,Kt.y,{angle:V.angle,align:Y,renderingMode:V.renderingMode}),Ut&&this.pdf.restoreGraphicsState()}}else nt.y<tt&&(this.ctx.prevPageLastElemOffset+=tt-nt.y);V.scale>=.01&&(this.pdf.setFontSize(Re),this.lineWidth=Ae)}else V.scale>=.01&&(Re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Re*V.scale),Ae=this.lineWidth,this.lineWidth=Ae*V.scale),this.pdf.text(V.text,ue.x+this.posX,ue.y+this.posY,{angle:V.angle,align:Y,renderingMode:V.renderingMode,maxWidth:V.maxWidth}),V.scale>=.01&&(this.pdf.setFontSize(Re),this.lineWidth=Ae)},j=function(V,Y,ie,ne){ie=ie||0,ne=ne||0,this.pdf.internal.out(n(V+ie)+" "+r(Y+ne)+" l")},B=function(V,Y,ie){return this.pdf.lines(V,Y,ie,null,null)},X=function(V,Y,ie,ne,oe,ue,we,be){this.pdf.internal.out([e(i(ie+V)),e(s(ne+Y)),e(i(oe+V)),e(s(ue+Y)),e(i(we+V)),e(s(be+Y)),"c"].join(" "))},se=function(V,Y,ie,ne){for(var oe=2*Math.PI,ue=Math.PI/2;Y>ie;)Y-=oe;var we=Math.abs(ie-Y);we<oe&&ne&&(we=oe-we);for(var be=[],Se=ne?-1:1,Re=Y;we>1e-5;){var Ae=Re+Se*Math.min(we,ue);be.push(re.call(this,V,Re,Ae)),we-=Math.abs(Ae-Re),Re=Ae}return be},re=function(V,Y,ie){var ne=(ie-Y)/2,oe=V*Math.cos(ne),ue=V*Math.sin(ne),we=oe,be=-ue,Se=we*we+be*be,Re=Se+we*oe+be*ue,Ae=4/3*(Math.sqrt(2*Se*Re)-Re)/(we*ue-be*oe),Pe=we-Ae*be,ge=be+Ae*we,J=Pe,Ke=-ge,ot=ne+Y,Ue=Math.cos(ot),Ie=Math.sin(ot);return{x1:V*Math.cos(Y),y1:V*Math.sin(Y),x2:Pe*Ue-ge*Ie,y2:Pe*Ie+ge*Ue,x3:J*Ue-Ke*Ie,y3:J*Ie+Ke*Ue,x4:V*Math.cos(ie),y4:V*Math.sin(ie)}},$=function(V){return 180*V/Math.PI},ae=function(V,Y,ie,ne,oe,ue){var we=V+.5*(ie-V),be=Y+.5*(ne-Y),Se=oe+.5*(ie-oe),Re=ue+.5*(ne-ue),Ae=Math.min(V,oe,we,Se),Pe=Math.max(V,oe,we,Se),ge=Math.min(Y,ue,be,Re),J=Math.max(Y,ue,be,Re);return new a(Ae,ge,Pe-Ae,J-ge)},fe=function(V,Y,ie,ne,oe,ue,we,be){var Se,Re,Ae,Pe,ge,J,Ke,ot,Ue,Ie,ze,Be,_t,tt,Ot=ie-V,wt=ne-Y,et=oe-ie,St=ue-ne,mt=we-oe,nt=be-ue;for(Re=0;Re<41;Re++)Ue=(Ke=(Ae=V+(Se=Re/40)*Ot)+Se*((ge=ie+Se*et)-Ae))+Se*(ge+Se*(oe+Se*mt-ge)-Ke),Ie=(ot=(Pe=Y+Se*wt)+Se*((J=ne+Se*St)-Pe))+Se*(J+Se*(ue+Se*nt-J)-ot),Re==0?(ze=Ue,Be=Ie,_t=Ue,tt=Ie):(ze=Math.min(ze,Ue),Be=Math.min(Be,Ie),_t=Math.max(_t,Ue),tt=Math.max(tt,Ie));return new a(Math.round(ze),Math.round(Be),Math.round(_t-ze),Math.round(tt-Be))},ve=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var V,Y,ie=(V=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:V,lineDashOffset:Y}));this.prevLineDash!==ie&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ie)}}})(it.API),function(t){var e=function(o){var a,l,u,c,d,m,p,x,E,C;for(l=[],u=0,c=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;c>u;u+=4)(d=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(m=(d=((d=((d=((d=(d-(C=d%85))/85)-(E=d%85))/85)-(x=d%85))/85)-(p=d%85))/85)%85,l.push(m+33,p+33,x+33,E+33,C+33)):l.push(122);return function(w,A){for(var N=A;N>0;N--)w.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},n=function(o){var a,l,u,c,d,m=String,p="length",x=255,E="charCodeAt",C="slice",w="replace";for(o[C](-2),o=o[C](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),u=[],c=0,d=(o+=a="uuuuu"[C](o[p]%5||5))[p];d>c;c+=5)l=52200625*(o[E](c)-33)+614125*(o[E](c+1)-33)+7225*(o[E](c+2)-33)+85*(o[E](c+3)-33)+(o[E](c+4)-33),u.push(x&l>>24,x&l>>16,x&l>>8,x&l);return function(A,N){for(var R=N;R>0;R--)A.pop()}(u,a[p]),m.fromCharCode.apply(m,u)},r=function(o){return o.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var l="",u=0;u<o.length;u+=2)l+=String.fromCharCode("0x"+(o[u]+o[u+1]));return l},s=function(o){for(var a=new Uint8Array(o.length),l=o.length;l--;)a[l]=o.charCodeAt(l);return(a=W2(a)).reduce(function(u,c){return u+String.fromCharCode(c)},"")};t.processDataByFilters=function(o,a){var l=0,u=o||"",c=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":u=n(u),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=i(u),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=r(u),c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=s(u),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:u,reverseChain:c.reverse().join(" ")}}}(it.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,c){var d=new XMLHttpRequest,m=0,p=function(x){var E=x.length,C=[],w=String.fromCharCode;for(m=0;m<E;m+=1)C.push(w(255&x.charCodeAt(m)));return C.join("")};if(d.open("GET",l,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?c(p(this.responseText)):c(void 0)}),d.send(null),u&&d.status===200)return p(d.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(it.API),function(t){function e(){return(vt.html2canvas?Promise.resolve(vt.html2canvas):kg(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function n(){return(vt.DOMPurify?Promise.resolve(vt.DOMPurify):kg(()=>import("./purify.es-aGzT-_H7.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=an(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},i=function(a,l){var u=document.createElement(a);for(var c in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[c]=l.style[c];return u},s=function a(l,u){for(var c=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),d=l.firstChild;d;d=d.nextSibling)u!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||c.appendChild(a(d,u));return l.nodeType===1&&(l.nodeName==="CANVAS"?(c.width=l.width,c.height=l.height,c.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(c.value=l.value),c.addEventListener("load",function(){c.scrollTop=l.scrollTop,c.scrollLeft=l.scrollLeft},!0)),c},o=function a(l){var u=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),c=a.convert(Promise.resolve(),u);return(c=c.setProgress(1,a,1,[a])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,l){return a.__proto__=l||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(u){switch(r(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a),l){case"string":return this.then(n).then(function(u){return this.set({src:i("div",{innerHTML:a,dompurify:u})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=s(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var u=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,m=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete m.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=c,c)for(var p=0;p<c.length;++p){var x=c[p],E=x.src.find(function(C){return C.format==="truetype"});E&&u.addFont(E.url,x.ref.name,x.ref.style)}return m.windowHeight=m.windowHeight||0,m.windowHeight=m.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):m.windowHeight,u.context2d.save(!0),l(this.prop.container,m)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},o.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=a[u]};switch(u){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[u]=a[u]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(a,l){return this.then(function(){var u=a in o.template.prop?this.prop[a]:this.opt[a];return l?l(u):u})},o.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function l(u,c){return Math.floor(u*c/72*96)}return this.then(function(){(a=a||it.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,l,u,c){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,l,u,c){return this.setProgress(a?this.progress.val+a:null,l||null,u?this.progress.n+u:null,c?this.progress.stack.concat(c):null)},o.prototype.then=function(a,l){var u=this;return this.thenCore(a,l,function(c,d){return u.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(m){return u.updateProgress(null,c),m}).then(c,d).then(function(m){return u.updateProgress(1),m})})},o.prototype.thenCore=function(a,l,u){u=u||Promise.prototype.then;var c=this;a&&(a=a.bind(c)),l&&(l=l.bind(c));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?c:o.convert(Object.assign({},c),Promise.prototype),m=u.call(d,a,l);return o.convert(m,c.__proto__)},o.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},o.prototype.thenList=function(a){var l=this;return a.forEach(function(u){l=l.thenCore(u)}),l},o.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return o.convert(l,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,it.getPageSize=function(a,l,u){if(an(a)==="object"){var c=a;a=c.orientation,l=c.unit||l,u=c.format||u}l=l||"mm",u=u||"a4",a=(""+(a||"P")).toLowerCase();var d,m=(""+u).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+l}var x,E=0,C=0;if(p.hasOwnProperty(m))E=p[m][1]/d,C=p[m][0]/d;else try{E=u[1],C=u[0]}catch{throw new Error("Invalid format: "+u)}if(a==="p"||a==="portrait")a="p",C>E&&(x=C,C=E,E=x);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",E>C&&(x=C,C=E,E=x)}return{width:C,height:E,unit:l,k:d,orientation:a}},t.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Kg):null;var u=new o(l);return l.worker?u:u.from(a).doCallback()}}(it.API),it.API.addJS=function(t){return W3=t,this.internal.events.subscribe("postPutResources",function(){rp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(rp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),H3=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+W3+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){rp!==void 0&&H3!==void 0&&this.internal.out("/Names <</JavaScript "+rp+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,c=[];for(s=0;s<u;s++){var d=n.internal.newObject();c.push(d);var m=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<c.length;s++)n.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+p+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(it.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,c=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,l=function(d){for(var m,p=256*d.charCodeAt(4)+d.charCodeAt(5),x=d.length,E={width:0,height:0,numcomponents:1},C=4;C<x;C+=2){if(C+=p,e.indexOf(d.charCodeAt(C+1))!==-1){m=256*d.charCodeAt(C+5)+d.charCodeAt(C+6),E={width:256*d.charCodeAt(C+7)+d.charCodeAt(C+8),height:m,numcomponents:d.charCodeAt(C+9)};break}p=256*d.charCodeAt(C+2)+d.charCodeAt(C+3)}return E}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),l.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return c}}(it.API),it.API.processPNG=function(t,e,n,r){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var i,s=Dz(t,{checkCrc:!0}),o=s.width,a=s.height,l=s.channels,u=s.palette,c=s.depth;i=u&&l===1?function(T){for(var k=T.width,M=T.height,S=T.data,P=T.palette,j=T.depth,B=!1,X=[],se=[],re=void 0,$=!1,ae=0,fe=0;fe<P.length;fe++){var ve=Yb(P[fe],4),V=ve[0],Y=ve[1],ie=ve[2],ne=ve[3];X.push(V,Y,ie),ne!=null&&(ne===0?(ae++,se.length<1&&se.push(fe)):ne<255&&($=!0))}if($||ae>1){B=!0,se=void 0;var oe=k*M;re=new Uint8Array(oe);for(var ue=new DataView(S.buffer),we=0;we<oe;we++){var be=Yg(ue,we,j),Se=Yb(P[be],4)[3];re[we]=Se}}else ae===0&&(se=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:B?8:void 0,colorBytes:S,alphaBytes:re,needSMask:B,palette:X,mask:se}}(s):l===2||l===4?function(T){for(var k=T.data,M=T.width,S=T.height,P=T.channels,j=T.depth,B=P===2?"DeviceGray":"DeviceRGB",X=P-1,se=M*S,re=X,$=se*re,ae=1*se,fe=Math.ceil($*j/8),ve=Math.ceil(ae*j/8),V=new Uint8Array(fe),Y=new Uint8Array(ve),ie=new DataView(k.buffer),ne=new DataView(V.buffer),oe=new DataView(Y.buffer),ue=!1,we=0;we<se;we++){for(var be=we*P,Se=0;Se<re;Se++)t_(ne,Yg(ie,be+Se,j),we*re+Se,j);var Re=Yg(ie,be+re,j);Re<(1<<j)-1&&(ue=!0),t_(oe,Re,1*we,j)}return{colorSpace:B,colorsPerPixel:X,sMaskBitsPerComponent:ue?j:void 0,colorBytes:V,alphaBytes:Y,needSMask:ue}}(s):function(T){var k=T.data,M=T.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:M,colorsPerPixel:M==="DeviceGray"?1:3,colorBytes:k instanceof Uint16Array?function(S){for(var P=S.length,j=new Uint8Array(2*P),B=new DataView(j.buffer,j.byteOffset,j.byteLength),X=0;X<P;X++)B.setUint16(2*X,S[X],!1);return j}(k):k,needSMask:!1}}(s);var d,m,p,x=i,E=x.colorSpace,C=x.colorsPerPixel,w=x.sMaskBitsPerComponent,A=x.colorBytes,N=x.alphaBytes,R=x.needSMask,z=x.palette,Q=x.mask,L=null;return r!==it.API.image_compression.NONE&&typeof W2=="function"?(L=function(T){var k;switch(T){case it.API.image_compression.FAST:k=11;break;case it.API.image_compression.MEDIUM:k=13;break;case it.API.image_compression.SLOW:k=14;break;default:k=12}return k}(r),d=this.decode.FLATE_DECODE,m="/Predictor ".concat(L," /Colors ").concat(C," /BitsPerComponent ").concat(c," /Columns ").concat(o),t=Y3(A,Math.ceil(o*C*c/8),C,c,r),R&&(p=Y3(N,Math.ceil(o*w/8),1,w,r))):(d=void 0,m=void 0,t=A,R&&(p=N)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:n,data:t,index:e,filter:d,decodeParameters:m,transparency:Q,palette:z,sMask:p,predictor:L,width:o,height:a,bitsPerComponent:c,sMaskBitsPerComponent:w,colorSpace:E}}},function(t){t.processGIF89A=function(e,n,r,i){var s=new nq(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},c=new Xg(100).encode(u,100);return t.processJPEG.call(this,c,n,r,i)},t.processGIF87A=t.processGIF89A}(it.API),Ls.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ls.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){dn.log("bit decode error:"+n)}},Ls.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Ls.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Ls.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Ls.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,c=r*this.width*4+4*i;this.data[c]=l,this.data[c+1]=a,this.data[c+2]=o,this.data[c+3]=u}this.pos+=t}},Ls.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,u=(o>>11)/e*255|0,c=i*this.width*4+4*s;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=a,this.data[c+3]=255}this.pos+=t}},Ls.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Ls.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Ls.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new Ls(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new Xg(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(it.API),r_.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new r_(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new Xg(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(it.API),it.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var c=r[u],d=r[u+1],m=r[u+2],p=r[u+3];s[a++]=c,s[a++]=d,s[a++]=m,o[l++]=p}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},it.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Tu=it.API,ip=Tu.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=u.fof?u.fof:1,d=e.doKerning!==!1,m=0,p=t.length,x=0,E=a[0]||l,C=[];for(n=0;n<p;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?C.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(m=d&&an(u[r])==="object"&&!isNaN(parseInt(u[r][x],10))?u[r][x]/c:0,C.push((a[r]||E)/l+m)),x=r;return C},G3=Tu.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Tu.processArabic&&(t=Tu.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:ip.apply(this,arguments).reduce(function(s,o){return s+o},0)},K3=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},Q3=function(t,e,n){n||(n={});var r,i,s,o,a,l,u,c=[],d=[c],m=n.textIndent||0,p=0,x=0,E=t.split(" "),C=ip.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?E[0].length+2:n.lineIndent||0){var w=Array(l).join(" "),A=[];E.map(function(R){(R=R.split(/\s*\n/)).length>1?A=A.concat(R.map(function(z,Q){return(Q&&z.length?`
`:"")+z})):A.push(R[0])}),E=A,l=G3.apply(this,[w,n])}for(s=0,o=E.length;s<o;s++){var N=0;if(r=E[s],l&&r[0]==`
`&&(r=r.substr(1),N=1),m+p+(x=(i=ip.apply(this,[r,n])).reduce(function(R,z){return R+z},0))>e||N){if(x>e){for(a=K3.apply(this,[r,i,e-(m+p),e]),c.push(a.shift()),c=[a.pop()];a.length;)d.push([a.shift()]);x=i.slice(r.length-(c[0]?c[0].length:0)).reduce(function(R,z){return R+z},0)}else c=[r];d.push(c),m=x+l,p=C}else c.push(r),m+=p+x,p=C}return u=l?function(R,z){return(z?w:"")+R.join(" ")}:function(R){return R.join(" ")},d.map(u)},Tu.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var d=this.internal.getFont(c.fontName,c.fontStyle),m="Unicode";return d.metadata[m]?{widths:d.metadata[m].widths||{0:1},kerning:d.metadata[m].kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(Q3.apply(this,[r[a],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",r={},i={},s=0;s<16;s++)r[n[s]]=e[s],i[e[s]]=n[s];var o=function(m){return"0x"+parseInt(m,10).toString(16)},a=t.__fontmetrics__.compress=function(m){var p,x,E,C,w=["{"];for(var A in m){if(p=m[A],isNaN(parseInt(A,10))?x="'"+A+"'":(A=parseInt(A,10),x=(x=o(A).slice(2)).slice(0,-1)+i[x.slice(-1)]),typeof p=="number")p<0?(E=o(p).slice(3),C="-"):(E=o(p).slice(2),C=""),E=C+E.slice(0,-1)+i[E.slice(-1)];else{if(an(p)!=="object")throw new Error("Don't know what to do with value type "+an(p)+".");E=a(p)}w.push(x+E)}return w.push("}"),w.join("")},l=t.__fontmetrics__.uncompress=function(m){if(typeof m!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,x,E,C,w={},A=1,N=w,R=[],z="",Q="",L=m.length-1,T=1;T<L;T+=1)(C=m[T])=="'"?p?(E=p.join(""),p=void 0):p=[]:p?p.push(C):C=="{"?(R.push([N,E]),N={},E=void 0):C=="}"?((x=R.pop())[0][x[1]]=N,E=void 0,N=x[0]):C=="-"?A=-1:E===void 0?r.hasOwnProperty(C)?(z+=r[C],E=parseInt(z,16)*A,A=1,z=""):z+=C:r.hasOwnProperty(C)?(Q+=r[C],N[E]=parseInt(Q,16)*A,A=1,E=void 0,Q=""):Q+=C;return w},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},d={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(m){var p=m.font,x=d.Unicode[p.postScriptName];x&&(p.metadata.Unicode={},p.metadata.Unicode.widths=x.widths,p.metadata.Unicode.kerning=x.kerning);var E=c.Unicode[p.postScriptName];E&&(p.metadata.Unicode.encoding=E,p.encoding=E.codePages[0])}])}(it.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Tp(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(it),it.API.addSvgAsImage=function(t,e,n,r,i,s,o,a){if(isNaN(e)||isNaN(n))throw dn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(i))throw dn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=r,l.height=i;var u=l.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);var c={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return(vt.canvg?Promise.resolve(vt.canvg):kg(()=>import("./index.es-B15AHXC_.js"),[])).catch(function(m){return Promise.reject(new Error("Could not load canvg: "+m))}).then(function(m){return m.default?m.default:m}).then(function(m){return m.fromString(u,t,c)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(c)}).then(function(){d.addImage(l.toDataURL("image/jpeg",1),e,n,r,i,o,a)})},it.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},it.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,c=0,d=0;function m(x,E){var C,w=!1;for(C=0;C<x.length;C+=1)x[C]===E&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var p=a.length;for(d=0;d<p;d+=1)n[a[d]].value=n[a[d]].defaultValue,n[a[d]].explicitSet=!1}if(an(t)==="object"){for(i in t)if(s=t[i],m(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&m(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(c=0;c<s[u].length;c+=1)typeof s[u][c]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,E=[];for(x in n)n[x].explicitSet===!0&&(n[x].type==="name"?E.push("/"+x+" /"+n[x].value):E.push("/"+x+" "+n[x].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(it.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],c=[""],d=0,m=s.length;d<m;++d){if(a=o.metadata.characterToGlyph(s.charCodeAt(d)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(d),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return c.join("");a=a.toString(16),c.push(u[4-a.length],a)}return c.join("")},r=function(s){var o,a,l,u,c,d,m;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],d=0,m=(a=Object.keys(s).sort(function(p,x){return p-x})).length;d<m;d++)o=a[d],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,c=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var d=a.metadata.Unicode.widths,m=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),p="",x=0;x<m.length;x++)p+=String.fromCharCode(m[x]);var E=u();c({data:p,addLength1:!0,objectId:E}),l("endobj");var C=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:C}),l("endobj");var w=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+Lu(a.fontName)),l("/FontFile2 "+E+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var A=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+Lu(a.fontName)),l("/FontDescriptor "+w+" 0 R"),l("/W "+t.API.PDFObject.convert(d)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+C+" 0 R"),l("/BaseFont /"+Lu(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+A+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,c=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var d=a.metadata.rawData,m="",p=0;p<d.length;p++)m+=String.fromCharCode(d[p]);var x=u();c({data:m,addLength1:!0,objectId:x}),l("endobj");var E=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var C=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+Lu(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var w=0;w<a.metadata.hmtx.widths.length;w++)a.metadata.hmtx.widths[w]=parseInt(a.metadata.hmtx.widths[w]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+Lu(a.fontName)+"/FontDescriptor "+C+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,c=s.options||{},d=s.mutex||{},m=d.pdfEscape,p=d.activeFontKey,x=d.fonts,E=p,C="",w=0,A="",N=x[E].encoding;if(x[E].encoding!=="Identity-H")return{text:a,x:l,y:u,options:c,mutex:d};for(A=a,E=p,Array.isArray(a)&&(A=a[0]),w=0;w<A.length;w+=1)x[E].metadata.hasOwnProperty("cmap")&&(o=x[E].metadata.cmap.unicode.codeMap[A[w].charCodeAt(0)]),o||A[w].charCodeAt(0)<256&&x[E].metadata.hasOwnProperty("Unicode")?C+=A[w]:C+="";var R="";return parseInt(E.slice(1))<14||N==="WinAnsiEncoding"?R=m(C,E).split("").map(function(z){return z.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(R=n(C,x[E])),d.isHex=!0,{text:R,x:l,y:u,options:c,mutex:d}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(it),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(it.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,c,d=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},C=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),A=!1,N=0;this.__bidiEngine__={};var R=function(S){var P=S.charCodeAt(),j=P>>8,B=E[j];return B!==void 0?d[256*B+(255&P)]:j===252||j===253?"AL":w.test(j)?"L":j===8?"R":"N"},z=function(S){for(var P,j=0;j<S.length;j++){if((P=R(S.charAt(j)))==="L")return!1;if(P==="R")return!0}return!1},Q=function(S,P,j,B){var X,se,re,$,ae=P[B];switch(ae){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":A=!1;break;case"N":case"AN":break;case"EN":A&&(ae="AN");break;case"AL":A=!0,ae="R";break;case"WS":case"BN":ae="N";break;case"CS":B<1||B+1>=P.length||(X=j[B-1])!=="EN"&&X!=="AN"||(se=P[B+1])!=="EN"&&se!=="AN"?ae="N":A&&(se="AN"),ae=se===X?se:"N";break;case"ES":ae=(X=B>0?j[B-1]:"B")==="EN"&&B+1<P.length&&P[B+1]==="EN"?"EN":"N";break;case"ET":if(B>0&&j[B-1]==="EN"){ae="EN";break}if(A){ae="N";break}for(re=B+1,$=P.length;re<$&&P[re]==="ET";)re++;ae=re<$&&P[re]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for($=P.length,re=B+1;re<$&&P[re]==="NSM";)re++;if(re<$){var fe=S[B],ve=fe>=1425&&fe<=2303||fe===64286;if(X=P[re],ve&&(X==="R"||X==="AL")){ae="R";break}}}ae=B<1||(X=P[B-1])==="B"?"N":j[B-1];break;case"B":A=!1,i=!0,ae=N;break;case"S":s=!0,ae="N"}return ae},L=function(S,P,j){var B=S.split("");return j&&T(B,j,{hiLevel:N}),B.reverse(),P&&P.reverse(),B.join("")},T=function(S,P,j){var B,X,se,re,$,ae=-1,fe=S.length,ve=0,V=[],Y=N?p:m,ie=[];for(A=!1,i=!1,s=!1,X=0;X<fe;X++)ie[X]=R(S[X]);for(se=0;se<fe;se++){if($=ve,V[se]=Q(S,ie,V,se),B=240&(ve=Y[$][x[V[se]]]),ve&=15,P[se]=re=Y[ve][5],B>0)if(B===16){for(X=ae;X<se;X++)P[X]=1;ae=-1}else ae=-1;if(Y[ve][6])ae===-1&&(ae=se);else if(ae>-1){for(X=ae;X<se;X++)P[X]=re;ae=-1}ie[se]==="B"&&(P[se]=0),j.hiLevel|=re}s&&function(ne,oe,ue){for(var we=0;we<ue;we++)if(ne[we]==="S"){oe[we]=N;for(var be=we-1;be>=0&&ne[be]==="WS";be--)oe[be]=N}}(ie,P,fe)},k=function(S,P,j,B,X){if(!(X.hiLevel<S)){if(S===1&&N===1&&!i)return P.reverse(),void(j&&j.reverse());for(var se,re,$,ae,fe=P.length,ve=0;ve<fe;){if(B[ve]>=S){for($=ve+1;$<fe&&B[$]>=S;)$++;for(ae=ve,re=$-1;ae<re;ae++,re--)se=P[ae],P[ae]=P[re],P[re]=se,j&&(se=j[ae],j[ae]=j[re],j[re]=se);ve=$}ve++}}},M=function(S,P,j){var B=S.split(""),X={hiLevel:N};return j||(j=[]),T(B,j,X),function(se,re,$){if($.hiLevel!==0&&c)for(var ae,fe=0;fe<se.length;fe++)re[fe]===1&&(ae=C.indexOf(se[fe]))>=0&&(se[fe]=C[ae+1])}(B,j,X),k(2,B,P,j,X),k(1,B,P,j,X),B.join("")};return this.__bidiEngine__.doBidiReorder=function(S,P,j){if(function(X,se){if(se)for(var re=0;re<X.length;re++)se[re]=re;a===void 0&&(a=z(X)),u===void 0&&(u=z(X))}(S,P),o||!l||u)if(o&&l&&a^u)N=a?1:0,S=L(S,P,j);else if(!o&&l&&u)N=a?1:0,S=M(S,P,j),S=L(S,P);else if(!o||a||l||u){if(o&&!l&&a^u)S=L(S,P),a?(N=0,S=M(S,P,j)):(N=1,S=M(S,P,j),S=L(S,P));else if(o&&a&&!l&&u)N=1,S=M(S,P,j),S=L(S,P);else if(!o&&!l&&a^u){var B=c;a?(N=1,S=M(S,P,j),N=0,c=!1,S=M(S,P,j),c=B):(N=0,S=M(S,P,j),S=L(S,P),N=1,c=!1,S=M(S,P,j),c=B,S=L(S,P))}}else N=0,S=M(S,P,j);else N=a?1:0,S=M(S,P,j);return S},this.__bidiEngine__.setOptions=function(S){S&&(o=S.isInputVisual,l=S.isOutputVisual,a=S.isInputRtl,u=S.isOutputRtl,c=S.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(it),it.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new ol(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new yq(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new rq(this.contents),this.head=new sq(this),this.name=new cq(this),this.cmap=new iT(this),this.toUnicode={},this.hhea=new oq(this),this.maxp=new hq(this),this.hmtx=new fq(this),this.post=new lq(this),this.os2=new aq(this),this.loca=new gq(this),this.glyf=new dq(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var $s,ol=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),rq=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,u,c,d,m,p,x,E;for(E in p=Object.keys(n).length,l=Math.log(2),d=16*Math.floor(Math.log(p)/l),o=Math.floor(d/l),c=16*p-d,(i=new ol).writeInt(this.scalarType),i.writeShort(p),i.writeShort(d),i.writeShort(o),i.writeShort(c),s=16*p,u=i.pos+s,a=null,x=[],n)for(m=n[E],i.writeString(E),i.writeInt(t(m)),i.writeInt(u),i.writeInt(m.length),x=x.concat(m),E==="head"&&(a=u),u+=m.length;u%4;)x.push(0),u++;return i.write(x),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=sT.call(n);n.length%4;)n.push(0);for(s=new ol(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),iq={}.hasOwnProperty,So=function(t,e){for(var n in e)iq.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};$s=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var sq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,$s),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new ol).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t}(),i_=function(){function t(e,n){var r,i,s,o,a,l,u,c,d,m,p,x,E,C,w,A,N;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(p=e.readUInt16(),m=p/2,e.pos+=6,s=function(){var R,z;for(z=[],l=R=0;0<=m?R<m:R>m;l=0<=m?++R:--R)z.push(e.readUInt16());return z}(),e.pos+=2,E=function(){var R,z;for(z=[],l=R=0;0<=m?R<m:R>m;l=0<=m?++R:--R)z.push(e.readUInt16());return z}(),u=function(){var R,z;for(z=[],l=R=0;0<=m?R<m:R>m;l=0<=m?++R:--R)z.push(e.readUInt16());return z}(),c=function(){var R,z;for(z=[],l=R=0;0<=m?R<m:R>m;l=0<=m?++R:--R)z.push(e.readUInt16());return z}(),i=(this.length-e.pos+this.offset)/2,a=function(){var R,z;for(z=[],l=R=0;0<=i?R<i:R>i;l=0<=i?++R:--R)z.push(e.readUInt16());return z}(),l=w=0,N=s.length;w<N;l=++w)for(C=s[l],r=A=x=E[l];x<=C?A<=C:A>=C;r=x<=C?++A:--A)c[l]===0?o=r+u[l]:(o=a[c[l]/2+(r-x)-(m-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=d}return t.encode=function(e,n){var r,i,s,o,a,l,u,c,d,m,p,x,E,C,w,A,N,R,z,Q,L,T,k,M,S,P,j,B,X,se,re,$,ae,fe,ve,V,Y,ie,ne,oe,ue,we,be,Se,Re,Ae;switch(B=new ol,o=Object.keys(e).sort(function(Pe,ge){return Pe-ge}),n){case"macroman":for(E=0,C=function(){var Pe=[];for(x=0;x<256;++x)Pe.push(0);return Pe}(),A={0:0},s={},X=0,ae=o.length;X<ae;X++)A[be=e[i=o[X]]]==null&&(A[be]=++E),s[i]={old:e[i],new:A[e[i]]},C[i]=A[e[i]];return B.writeUInt16(1),B.writeUInt16(0),B.writeUInt32(12),B.writeUInt16(0),B.writeUInt16(262),B.writeUInt16(0),B.write(C),{charMap:s,subtable:B.data,maxGlyphID:E+1};case"unicode":for(P=[],d=[],N=0,A={},r={},w=u=null,se=0,fe=o.length;se<fe;se++)A[z=e[i=o[se]]]==null&&(A[z]=++N),r[i]={old:z,new:A[z]},a=A[z]-i,w!=null&&a===u||(w&&d.push(w),P.push(i),u=a),w=i;for(w&&d.push(w),d.push(65535),P.push(65535),M=2*(k=P.length),T=2*Math.pow(Math.log(k)/Math.LN2,2),m=Math.log(T/2)/Math.LN2,L=2*k-T,l=[],Q=[],p=[],x=re=0,ve=P.length;re<ve;x=++re){if(S=P[x],c=d[x],S===65535){l.push(0),Q.push(0);break}if(S-(j=r[S].new)>=32768)for(l.push(0),Q.push(2*(p.length+k-x)),i=$=S;S<=c?$<=c:$>=c;i=S<=c?++$:--$)p.push(r[i].new);else l.push(j-S),Q.push(0)}for(B.writeUInt16(3),B.writeUInt16(1),B.writeUInt32(12),B.writeUInt16(4),B.writeUInt16(16+8*k+2*p.length),B.writeUInt16(0),B.writeUInt16(M),B.writeUInt16(T),B.writeUInt16(m),B.writeUInt16(L),ue=0,V=d.length;ue<V;ue++)i=d[ue],B.writeUInt16(i);for(B.writeUInt16(0),we=0,Y=P.length;we<Y;we++)i=P[we],B.writeUInt16(i);for(Se=0,ie=l.length;Se<ie;Se++)a=l[Se],B.writeUInt16(a);for(Re=0,ne=Q.length;Re<ne;Re++)R=Q[Re],B.writeUInt16(R);for(Ae=0,oe=p.length;Ae<oe;Ae++)E=p[Ae],B.writeUInt16(E);return{charMap:r,subtable:B.data,maxGlyphID:N+1}}},t}(),iT=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,$s),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,r,i;for(e.pos=this.offset,this.version=e.readUInt16(),i=e.readUInt16(),this.tables=[],this.unicode=null,r=0;0<=i?r<i:r>i;r=0<=i?++r:--r)n=new i_(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var r,i;return n==null&&(n="macroman"),r=i_.encode(e,n),(i=new ol).writeUInt16(0),i.writeUInt16(1),r.table=i.data.concat(r.subtable),r},t}(),oq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,$s),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),aq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,$s),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var n,r;for(r=[],n=0;n<10;++n)r.push(e.readByte());return r}(),this.charRange=function(){var n,r;for(r=[],n=0;n<4;++n)r.push(e.readInt());return r}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var n,r;for(r=[],n=0;n<2;n=++n)r.push(e.readInt());return r}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),lq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,$s),t.prototype.tag="post",t.prototype.parse=function(e){var n,r,i;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var s;for(r=e.readUInt16(),this.glyphNameIndex=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],i=[];e.pos<this.offset+this.length;)n=e.readByte(),i.push(this.names.push(e.readString(n)));return i;case 151552:return r=e.readUInt16(),this.offsets=e.read(r);case 262144:return this.map=(function(){var o,a,l;for(l=[],s=o=0,a=this.file.maxp.numGlyphs;0<=a?o<a:o>a;s=0<=a?++o:--o)l.push(e.readUInt32());return l}).call(this)}},t}(),uq=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},cq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,$s),t.prototype.tag="name",t.prototype.parse=function(e){var n,r,i,s,o,a,l,u,c,d,m;for(e.pos=this.offset,e.readShort(),n=e.readShort(),a=e.readShort(),r=[],s=0;0<=n?s<n:s>n;s=0<=n?++s:--s)r.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(l={},s=c=0,d=r.length;c<d;s=++c)i=r[s],e.pos=i.offset,u=e.readString(i.length),o=new uq(u,i),l[m=i.nameID]==null&&(l[m]=[]),l[i.nameID].push(o);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),hq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,$s),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),fq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,$s),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,r,i,s,o,a,l;for(e.pos=this.offset,this.metrics=[],n=0,a=this.file.hhea.numberOfMetrics;0<=a?n<a:n>a;n=0<=a?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,c;for(c=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)c.push(e.readInt16());return c}(),this.widths=(function(){var u,c,d,m;for(m=[],u=0,c=(d=this.metrics).length;u<c;u++)s=d[u],m.push(s.advance);return m}).call(this),r=this.widths[this.widths.length-1],l=[],n=o=0;0<=i?o<i:o>i;n=0<=i?++o:--o)l.push(this.widths.push(r));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),sT=[].slice,dq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,$s),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,r,i,s,o,a,l,u,c,d;return e in this.cache?this.cache[e]:(s=this.file.loca,n=this.file.contents,r=s.indexOf(e),(i=s.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+r,o=(a=new ol(n.read(i))).readShort(),u=a.readShort(),d=a.readShort(),l=a.readShort(),c=a.readShort(),this.cache[e]=o===-1?new mq(a,u,d,l,c):new pq(a,o,u,d,l,c),this.cache[e]))},t.prototype.encode=function(e,n,r){var i,s,o,a,l;for(o=[],s=[],a=0,l=n.length;a<l;a++)i=e[n[a]],s.push(o.length),i&&(o=o.concat(i.encode(r)));return s.push(o.length),{table:o,offsets:s}},t}(),pq=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),mq=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new ol(sT.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),gq=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return So(t,$s),t.prototype.tag="loca",t.prototype.parse=function(e){var n,r;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=2)s.push(2*e.readUInt16());return s}).call(this):(function(){var i,s;for(s=[],r=0,i=this.length;r<i;r+=4)s.push(e.readUInt32());return s}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var r=new Uint32Array(this.offsets.length),i=0,s=0,o=0;o<r.length;++o)if(r[o]=i,s<n.length&&n[s]==o){++s,r[o]=i;var a=this.offsets[o],l=this.offsets[o+1]-a;l>0&&(i+=l)}for(var u=new Array(4*r.length),c=0;c<r.length;++c)u[4*c+3]=255&r[c],u[4*c+2]=(65280&r[c])>>8,u[4*c+1]=(16711680&r[c])>>16,u[4*c]=(4278190080&r[c])>>24;return u},t}(),yq=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,u,c,d,m,p,x,E,C,w;for(i in r=iT.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),p={0:0},w=r.charMap)p[(l=w[i]).old]=l.new;for(x in m=r.maxGlyphID,o)x in p||(p[x]=m++);return c=function(A){var N,R;for(N in R={},A)R[A[N]]=N;return R}(p),d=Object.keys(c).sort(function(A,N){return A-N}),E=function(){var A,N,R;for(R=[],A=0,N=d.length;A<N;A++)a=d[A],R.push(c[a]);return R}(),s=this.font.glyf.encode(o,E,p),u=this.font.loca.encode(s.offsets,E),C={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(C["OS/2"]=this.font.os2.raw()),this.font.directory.encode(C)},t}();it.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,u;for(u=[],a=0,l=n.length;a<l;a++)r=n[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();function oT(t,e,n,r,i){r=r||{};var s=1.15,o=i.internal.scaleFactor,a=i.internal.getFontSize()/o,l=i.getLineHeightFactor?i.getLineHeightFactor():s,u=a*l,c=/\r\n|\r|\n/g,d="",m=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(d=typeof t=="string"?t.split(c):t,m=d.length||1),n+=a*(2-s),r.valign==="middle"?n-=m/2*u:r.valign==="bottom"&&(n-=m*u),r.halign==="center"||r.halign==="right"){var p=a;if(r.halign==="center"&&(p*=.5),d&&m>=1){for(var x=0;x<d.length;x++)i.text(d[x],e-i.getStringUnitWidth(d[x])*p,n),n+=u;return i}e-=i.getStringUnitWidth(t)*p}return r.halign==="justify"?i.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(t,e,n),i}var s_={},cc=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:s_=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,i,s;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),a=o.fontStyle,l=o.fontName;if(e.font&&(l=e.font),e.fontStyle){a=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),a=u[0])}if(this.jsPDFDocument.setFont(l,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var c=t.unifyColor(e.fillColor);c&&(r=this.jsPDFDocument).setFillColor.apply(r,c),c=t.unifyColor(e.textColor),c&&(i=this.jsPDFDocument).setTextColor.apply(i,c),c=t.unifyColor(e.lineColor),c&&(s=this.jsPDFDocument).setDrawColor.apply(s,c),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,i,s){return this.jsPDFDocument.rect(e,n,r,i,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return s_||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),ey=function(t,e){return ey=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},ey(t,e)};function aT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");ey(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var lT=function(t){aT(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function vq(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function wq(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Pm(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],i=r.map(function(s){return n.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return i}function uT(t,e,n,r){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:s});var o=cT(i,!1);o&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,o)}function cT(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function g0(t,e){var n,r,i,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function hT(t,e){var n=g0(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function xq(t,e,n,r,i){var s={},o=1.3333333333333333,a=Jg(e,function(N){return i.getComputedStyle(N).backgroundColor});a!=null&&(s.fillColor=a);var l=Jg(e,function(N){return i.getComputedStyle(N).color});l!=null&&(s.textColor=l);var u=_q(r,n);u&&(s.cellPadding=u);var c="borderTopColor",d=o*n,m=r.borderTopWidth;if(r.borderBottomWidth===m&&r.borderRightWidth===m&&r.borderLeftWidth===m){var p=(parseFloat(m)||0)/d;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/d,right:(parseFloat(r.borderRightWidth)||0)/d,bottom:(parseFloat(r.borderBottomWidth)||0)/d,left:(parseFloat(r.borderLeftWidth)||0)/d},s.lineWidth.top||(s.lineWidth.right?c="borderRightColor":s.lineWidth.bottom?c="borderBottomColor":s.lineWidth.left&&(c="borderLeftColor"));var x=Jg(e,function(N){return i.getComputedStyle(N)[c]});x!=null&&(s.lineColor=x);var E=["left","right","center","justify"];E.indexOf(r.textAlign)!==-1&&(s.halign=r.textAlign),E=["middle","bottom","top"],E.indexOf(r.verticalAlign)!==-1&&(s.valign=r.verticalAlign);var C=parseInt(r.fontSize||"");isNaN(C)||(s.fontSize=C/o);var w=bq(r);w&&(s.fontStyle=w);var A=(r.fontFamily||"").toLowerCase();return t.indexOf(A)!==-1&&(s.font=A),s}function bq(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function Jg(t,e){var n=fT(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],s=parseInt(r[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function fT(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:fT(t.parentElement,e):n}function _q(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=n.map(function(a){return parseInt(a||"0")/r}),o=g0(s,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function dT(t,e,n,r,i){var s,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var a;typeof e=="string"?a=n.document.querySelector(e):a=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),c=[],d=[],m=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:c,body:d,foot:m};for(var p=0;p<a.rows.length;p++){var x=a.rows[p],E=(o=(s=x==null?void 0:x.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),C=Sq(l,u,n,x,r,i);C&&(E==="thead"?c.push(C):E==="tfoot"?m.push(C):d.push(C))}return{head:c,body:d,foot:m}}function Sq(t,e,n,r,i,s){for(var o=new lT(r),a=0;a<r.cells.length;a++){var l=r.cells[a],u=n.getComputedStyle(l);if(i||u.display!=="none"){var c=void 0;s&&(c=xq(t,l,e,u,n)),o.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:c,_element:l,content:Aq(l)})}}var d=n.getComputedStyle(r);if(o.length>0&&(i||d.display!=="none"))return o}function Aq(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function Eq(t,e,n){for(var r=0,i=[t,e,n];r<i.length;r++){var s=i[r];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Ho(t,e,n,r,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),o=1;o<arguments.length;o++){var a=arguments[o];if(a!=null)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s}function pT(t,e){var n=new cc(t),r=n.getDocumentOptions(),i=n.getGlobalOptions();Eq(i,r,e);var s=Ho({},i,r,e),o;typeof window<"u"&&(o=window);var a=Nq(i,r,e),l=Tq(i,r,e),u=Cq(n,s),c=kq(n,s,o);return{id:e.tableId,content:c,hooks:l,styles:a,settings:u}}function Nq(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var u=t[l],c=e[l],d=n[l];r.columnStyles=Ho({},u,c,d)}else{var m=[t,e,n],p=m.map(function(x){return x[l]||{}});r[l]=Ho({},p[0],p[1],p[2])}},s=0,o=Object.keys(r);s<o.length;s++){var a=o[s];i(a)}return r}function Tq(t,e,n){for(var r=[t,e,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=r;s<o.length;s++){var a=o[s];a.didParseCell&&i.didParseCell.push(a.didParseCell),a.willDrawCell&&i.willDrawCell.push(a.willDrawCell),a.didDrawCell&&i.didDrawCell.push(a.didDrawCell),a.willDrawPage&&i.willDrawPage.push(a.willDrawPage),a.didDrawPage&&i.didDrawPage.push(a.didDrawPage)}return i}function Cq(t,e){var n,r,i,s,o,a,l,u,c,d,m,p,x=g0(e.margin,40/t.scaleFactor()),E=(n=Pq(t,e.startY))!==null&&n!==void 0?n:x.top,C;e.showFoot===!0?C="everyPage":e.showFoot===!1?C="never":C=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var w;e.showHead===!0?w="everyPage":e.showHead===!1?w="never":w=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var A=(s=e.useCss)!==null&&s!==void 0?s:!1,N=e.theme||(A?"plain":"striped"),R=!!e.horizontalPageBreak,z=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:A,theme:N,startY:E,margin:x,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(c=e.tableWidth)!==null&&c!==void 0?c:"auto",showHead:w,showFoot:C,tableLineWidth:(d=e.tableLineWidth)!==null&&d!==void 0?d:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:R,horizontalPageBreakRepeat:z,horizontalPageBreakBehaviour:(p=e.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function Pq(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),i=t.pageNumber(),s=!1;if(n&&n.startPageNumber){var o=n.startPageNumber+n.pageNumber-1;s=o===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function kq(t,e,n){var r=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(n){var a=dT(t,e.html,n,o,e.useCss)||{};r=a.head||r,i=a.body||r,s=a.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||Iq(r,i,s);return{columns:l,head:r,body:i,foot:s}}function Iq(t,e,n){var r=t[0]||e[0]||n[0]||[],i=[];return Object.keys(r).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,a;Array.isArray(r)?a=r[parseInt(s)]:a=r[s],typeof a=="object"&&!Array.isArray(a)&&(o=(a==null?void 0:a.colSpan)||1);for(var l=0;l<o;l++){var u=void 0;Array.isArray(r)?u=i.length:u=s+(l>0?"_".concat(l):"");var c={dataKey:u};i.push(c)}}),i}var ty=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),Lq=function(t){aT(e,t);function e(n,r,i,s,o,a){var l=t.call(this,n,r,a)||this;return l.cell=i,l.row=s,l.column=o,l.section=s.section,l}return e}(ty),Rq=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,i,s,o){for(var a=0,l=n;a<l.length;a++){var u=l[a],c=new Lq(e,this,r,i,s,o),d=u(c)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],d)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var s=i[r];s(new ty(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var s=i[r];s(new ty(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),mT=function(){function t(e,n,r,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof lT&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=i,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,i){var s;return Math.max(r,((s=n.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var i=n.cells[r.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(i,s){var o=r.cells[s.index];if(!o)return 0;var a=n.getLineHeight(o.styles.fontSize),l=o.padding("vertical"),u=l+a;return u>i?u:i},0)},t}(),gT=function(){function t(e,n,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",a=/\r\n|\r|\n/g;this.text=o.split(a)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*n,s=r*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=g0(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),jq=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,i=e.allRows();r<i.length;r++){var s=i[r],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(n=Math.max(n,o.styles.cellWidth))}return n},t}();function Dq(t,e){Mq(t,e);var n=[],r=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,n.push(s)),r+=s.width});var i=e.getWidth(t.pageSize().width)-r;i&&(i=ny(n,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=ny(n,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Oq(e),Vq(e,t),Fq(e)}function Mq(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,i=hT(t,e);e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u){var c=e.hooks.didParseCell;e.callCellHooks(t,c,u,s,l,null);var d=u.padding("horizontal");u.contentWidth=Pm(u.text,u.styles,t)+d;var m=Pm(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=m+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/n;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var c=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},d=c.cellWidth||c.minCellWidth;d&&typeof d=="number"&&(l.minWidth=d,l.wrappedWidth=d)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function ny(t,e,n){for(var r=e,i=t.reduce(function(p,x){return p+x.wrappedWidth},0),s=0;s<t.length;s++){var o=t[s],a=o.wrappedWidth/i,l=r*a,u=o.width+l,c=n(o),d=u<c?c:u;e-=d-o.width,o.width=d}if(e=Math.round(e*1e10)/1e10,e){var m=t.filter(function(p){return e<0?p.width>n(p):!0});m.length&&(e=ny(m,e,n))}return e}function Fq(t){for(var e={},n=1,r=t.allRows(),i=0;i<r.length;i++)for(var s=r[i],o=0,a=t.columns;o<a.length;o++){var l=a[o],u=e[l.index];if(n>1)n--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,n=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var c=s.cells[l.index];if(!c)continue;if(c.height=s.height,c.rowSpan>1){var d=r.length-i,m=c.rowSpan>d?d:c.rowSpan;e[l.index]={cell:c,left:m,row:s}}}}}function Oq(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],i=null,s=0,o=0,a=0;a<t.columns.length;a++){var l=t.columns[a];if(o-=1,o>1&&t.columns[a+1])s+=l.width,delete r.cells[l.index];else if(i){var u=i;delete r.cells[l.index],i=null,u.width=l.width+s}else{var u=r.cells[l.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){i=u,s+=l.width;continue}u.width=l.width+s}}}function Vq(t,e){for(var n={count:0,height:0},r=0,i=t.allRows();r<i.length;r++){for(var s=i[r],o=0,a=t.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u){e.applyStyles(u.styles,!0);var c=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,c+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=o_(u.text,c,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=o_(u.text,c,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var d=u.styles.overflow(u.text,c);typeof d=="string"?u.text=[d]:u.text=d}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=u.contentHeight/u.rowSpan;u.rowSpan>1&&n.count*n.height<m*u.rowSpan?n={height:m,count:u.rowSpan}:n&&n.count>0&&n.height>m&&(m=n.height),m>s.height&&(s.height=m)}}n.count--}}function o_(t,e,n,r,i){return t.map(function(s){return Bq(s,e,n,r,i)})}function Bq(t,e,n,r,i){var s=1e4*r.scaleFactor();if(e=Math.ceil(e*s)/s,e>=Pm(t,n,r))return t;for(;e<Pm(t+i,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function yT(t,e){var n=new cc(t),r=Uq(e,n.scaleFactor()),i=new Rq(e,r);return Dq(n,i),n.applyStyles(n.userStyles),i}function Uq(t,e){var n=t.content,r=qq(n.columns);if(n.head.length===0){var i=a_(r,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=a_(r,"foot");i&&n.foot.push(i)}var s=t.settings.theme,o=t.styles;return{columns:r,head:Zg("head",n.head,r,o,s,e),body:Zg("body",n.body,r,o,s,e),foot:Zg("foot",n.foot,r,o,s,e)}}function Zg(t,e,n,r,i,s){var o={},a=e.map(function(l,u){for(var c=0,d={},m=0,p=0,x=0,E=n;x<E.length;x++){var C=E[x];if(o[C.index]==null||o[C.index].left===0)if(p===0){var w=void 0;Array.isArray(l)?w=l[C.index-m-c]:w=l[C.dataKey];var A={};typeof w=="object"&&!Array.isArray(w)&&(A=(w==null?void 0:w.styles)||{});var N=$q(t,C,u,i,r,s,A),R=new gT(w,N,t);d[C.dataKey]=R,d[C.index]=R,p=R.colSpan-1,o[C.index]={left:R.rowSpan-1,times:p}}else p--,m++;else o[C.index].left--,p=o[C.index].times,c++}return new mT(l,u,t,d)});return a}function a_(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var i=zq(e,r.raw);i!=null&&(n[r.dataKey]=i)}}),Object.keys(n).length>0?n:null}function zq(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function qq(t){return t.map(function(e,n){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:n:i=n,new jq(i,e,n)})}function $q(t,e,n,r,i,s,o){var a=wq(r),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var u=Ho({},a.table,a[t],i.styles,l),c=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},d=t==="body"?c:{},m=t==="body"&&n%2===0?Ho({},a.alternateRow,i.alternateRowStyles):{},p=vq(s),x=Ho({},p,u,m,d);return Ho(x,o)}function Hq(t,e,n){var r;n===void 0&&(n={});var i=hT(t,e),s=new Map,o=[],a=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(m){var p=e.columns.find(function(x){return x.dataKey===m||x.index===m});p&&!s.has(p.index)&&(s.set(p.index,!0),o.push(p.index),a.push(e.columns[p.index]),i-=p.wrappedWidth)});for(var u=!0,c=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;c<e.columns.length;){if(s.has(c)){c++;continue}var d=e.columns[c].wrappedWidth;if(u||i>=d)u=!1,o.push(c),a.push(e.columns[c]),i-=d;else break;c++}return{colIndexes:o,columns:a,lastIndex:c-1}}function Wq(t,e){for(var n=[],r=0;r<e.columns.length;r++){var i=Hq(t,e,{start:r});i.columns.length&&(n.push(i),r=i.lastIndex)}return n}function vT(t,e){var n=e.settings,r=n.startY,i=n.margin,s={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=r+i.bottom+o;if(n.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(m,p){return m+p.height},0);a+=u}var c=new cc(t);(n.pageBreak==="always"||n.startY!=null&&a>c.pageSize().height)&&(xT(c),s.y=i.top),e.callWillDrawPageHooks(c,s);var d=Ho({},s);e.startPageNumber=c.pageNumber(),n.horizontalPageBreak?Gq(c,e,d,s):(c.applyStyles(c.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(m){return ra(c,e,m,s,e.columns)}),c.applyStyles(c.userStyles),e.body.forEach(function(m,p){var x=p===e.body.length-1;km(c,e,m,x,d,s,e.columns)}),c.applyStyles(c.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(m){return ra(c,e,m,s,e.columns)})),uT(c,e,d,s),e.callEndPageHooks(c,s),e.finalY=s.y,t.lastAutoTable=e,c.applyStyles(c.userStyles)}function Gq(t,e,n,r){var i=Wq(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,c){t.applyStyles(t.userStyles),c>0?Qh(t,e,n,r,u.columns,!0):l_(t,e,r,u.columns),Kq(t,e,n,r,u.columns),e1(t,e,r,u.columns)});else for(var o=-1,a=i[0],l=function(){var u=o;if(a){t.applyStyles(t.userStyles);var c=a.columns;o>=0?Qh(t,e,n,r,c,!0):l_(t,e,r,c),u=u_(t,e,o+1,r,c),e1(t,e,r,c)}var d=u-o;i.slice(1).forEach(function(m){t.applyStyles(t.userStyles),Qh(t,e,n,r,m.columns,!0),u_(t,e,o+1,r,m.columns,d),e1(t,e,r,m.columns)}),o=u};o<e.body.length-1;)l()}function l_(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return ra(t,e,s,n,r)})}function Kq(t,e,n,r,i){t.applyStyles(t.userStyles),e.body.forEach(function(s,o){var a=o===e.body.length-1;km(t,e,s,a,n,r,i)})}function u_(t,e,n,r,i,s){t.applyStyles(t.userStyles),s=s??e.body.length;var o=Math.min(n+s,e.body.length),a=-1;return e.body.slice(n,o).forEach(function(l,u){var c=n+u===e.body.length-1,d=wT(t,e,c,r);l.canEntireRowFit(d,i)&&(ra(t,e,l,r,i),a=n+u)}),a}function e1(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return ra(t,e,s,n,r)})}function Qq(t,e,n){var r=n.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),s=Math.floor((e-i)/r);return Math.max(0,s)}function Yq(t,e,n,r){var i={};t.spansMultiplePages=!0,t.height=0;for(var s=0,o=0,a=n.columns;o<a.length;o++){var l=a[o],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var c=new gT(u.raw,u.styles,u.section);c=Ho(c,u),c.text=[];var d=Qq(u,e,r);u.text.length>d&&(c.text=u.text.splice(d,u.text.length));var m=r.scaleFactor(),p=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(m,p),u.contentHeight>=e&&(u.contentHeight=e,c.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),c.contentHeight=c.getContentHeight(m,p),c.contentHeight>s&&(s=c.contentHeight),i[l.index]=c}}var x=new mT(t.raw,-1,t.section,i,!0);x.height=s;for(var E=0,C=n.columns;E<C.length;E++){var l=C[E],c=x.cells[l.index];c&&(c.height=x.height);var u=t.cells[l.index];u&&(u.height=t.height)}return x}function Xq(t,e,n,r){var i=t.pageSize().height,s=r.settings.margin,o=s.top+s.bottom,a=i-o;e.section==="body"&&(a-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),u=l<n;if(l>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var c=e.hasRowSpan(r.columns),d=e.getMaxCellHeight(r.columns)>a;return d?(c&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(c||r.settings.rowPageBreak==="avoid")}function km(t,e,n,r,i,s,o){var a=wT(t,e,r,s);if(n.canEntireRowFit(a,o))ra(t,e,n,s,o);else if(Xq(t,n,a,e)){var l=Yq(n,a,e,t);ra(t,e,n,s,o),Qh(t,e,i,s,o),km(t,e,l,r,i,s,o)}else Qh(t,e,i,s,o),km(t,e,n,r,i,s,o)}function ra(t,e,n,r,i){r.x=e.settings.margin.left;for(var s=0,o=i;s<o.length;s++){var a=o[s],l=n.cells[a.index];if(!l){r.x+=a.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,n,a,r);if(u===!1){r.x+=a.width;continue}Jq(t,l,r);var c=l.getTextPos();oT(l.text,c.x,c.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,a,r),r.x+=a.width}r.y+=n.height}function Jq(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=cT(r.lineWidth,r.fillColor);i&&t.rect(e.x,n.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),Zq(t,e,n,r.lineWidth))}function Zq(t,e,n,r){var i,s,o,a;r.top&&(i=n.x,s=n.y,o=n.x+e.width,a=n.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,s,o,a)),r.bottom&&(i=n.x,s=n.y+e.height,o=n.x+e.width,a=n.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,s,o,a)),r.left&&(i=n.x,s=n.y,o=n.x,a=n.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.left,i,s,o,a)),r.right&&(i=n.x+e.width,s=n.y,o=n.x+e.width,a=n.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.right,i,s,o,a));function l(u,c,d,m,p){t.getDocument().setLineWidth(u),t.getDocument().line(c,d,m,p,"S")}}function wT(t,e,n,r){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&n)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-i}function Qh(t,e,n,r,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(a){return ra(t,e,a,r,i)}),e.callEndPageHooks(t,r);var o=e.settings.margin;uT(t,e,n,r),xT(t),e.pageNumber++,r.x=o.left,r.y=o.top,n.y=o.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return ra(t,e,a,r,i)}),t.applyStyles(t.userStyles))}function xT(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function e$(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=pT(this,r),s=yT(this,i);return vT(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,i){oT(e,n,r,i,this)},t.API.autoTableSetDefaults=function(e){return cc.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){cc.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new cc(this),s=dT(i,e,window,n,!1),o=s.head,a=s.body,l=((r=o[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:a,data:a}}}var t1;function t$(t,e){var n=pT(t,e),r=yT(t,n);vT(t,r)}try{if(typeof window<"u"&&window){var c_=window,h_=c_.jsPDF||((t1=c_.jspdf)===null||t1===void 0?void 0:t1.jsPDF);h_&&e$(h_)}}catch(t){console.error("Could not apply autoTable plugin",t)}const n$=()=>{const[t,e]=G.useState(!0),[n,r]=G.useState(""),[i,s]=G.useState(""),[o,a]=G.useState([]),[l,u]=G.useState(!1),[c,d]=G.useState(null),m=G.useRef(null),p=G.useRef(null),x=G.useRef(null),E=L=>L?(L instanceof Date?L:new Date(L)).toLocaleDateString("en-CA"):"-",C=L=>L?(L instanceof Date?L:new Date(L)).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"}):"-";G.useEffect(()=>{(async()=>{const T=await dl();if(d(T||{}),n&&i){u(!0);try{const M=(await Ef(new Date(n),new Date(i))).map(S=>({...S,table:S.tableName||"-",servedBy:S.staffName||"-",total:S.subTotal||0,discount:S.discount||0,grandTotal:S.grandTotal||0}));a(M)}catch(k){console.error("Error fetching sales:",k)}u(!1)}})()},[n,i]);const w=o.reduce((L,T)=>(L.total+=T.total,L.discount+=T.discount,L.grandTotal+=T.grandTotal,L),{total:0,discount:0,grandTotal:0}),A="",N=()=>{if(!m.current.value||!p.current.value){alert("Please select both a start and end date.");return}r(m.current.value),s(p.current.value),e(!1)},R=L=>{L.key==="Enter"&&(L.preventDefault(),p.current.focus())},z=L=>{L.key==="Enter"&&(L.preventDefault(),x.current.click())},Q=()=>{if(o.length===0){alert("No data available to export.");return}const L=new it,T=L.internal.pageSize.height||L.internal.pageSize.getHeight(),k=L.internal.pageSize.width||L.internal.pageSize.getWidth(),M=(c==null?void 0:c.restaurantName)||"SyncServe Restaurant",S=new Date().toLocaleString("en-IN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});L.setFontSize(20),L.setFont("helvetica","bold"),L.text(M,k/2,20,{align:"center"}),L.setFontSize(12),L.setFont("helvetica","normal"),L.text("Sales Report",k/2,28,{align:"center"}),L.setFontSize(10),L.setTextColor(100),L.text(`Date Range: ${n} to ${i}`,14,40),L.text(`Generated on: ${S}`,k-14,40,{align:"right"});const P=o.length,j=P>0?w.grandTotal/P:0;L.setFontSize(10),L.text("Report Summary",14,52),L.setDrawColor(220,220,220),L.line(14,53,k-14,53);let B=62;L.setFontSize(12),L.setTextColor(0),L.text("Total Gross Sales:",14,B),L.setFont("helvetica","bold"),L.text(`${A}${w.grandTotal.toFixed(2)}`,60,B),L.setFont("helvetica","normal"),L.text("Total Transactions:",14,B+8),L.setFont("helvetica","bold"),L.text(`${P}`,60,B+8),L.setFont("helvetica","normal"),L.text("Total Discounts:",k/2,B),L.setFont("helvetica","bold"),L.text(`${A}${w.discount.toFixed(2)}`,k/2+40,B),L.setFont("helvetica","normal"),L.text("Average Sale Value:",k/2,B+8),L.setFont("helvetica","bold"),L.text(`${A}${j.toFixed(2)}`,k/2+40,B+8);const X=["#","Date & Time","Table","Served By","Total","Discount","Grand Total"],se=o.map(($,ae)=>[ae+1,`${E($.finalizedAt)}
${C($.finalizedAt)}`,$.table,$.servedBy,`${A}${$.total.toFixed(2)}`,`${A}${$.discount.toFixed(2)}`,`${A}${$.grandTotal.toFixed(2)}`]),re=[{content:""},{content:""},{content:""},{content:"TOTALS",styles:{fontStyle:"bold"}},{content:`${A}${w.total.toFixed(2)}`,styles:{fontStyle:"bold"}},{content:`${A}${w.discount.toFixed(2)}`,styles:{fontStyle:"bold"}},{content:`${A}${w.grandTotal.toFixed(2)}`,styles:{fontStyle:"bold"}}];t$(L,{startY:B+20,head:[X],body:se,foot:[re],theme:"grid",styles:{cellPadding:3,halign:"center",valign:"middle"},headStyles:{fillColor:[44,62,80],textColor:255,fontStyle:"bold"},bodyStyles:{lineWidth:0},footStyles:{fillColor:[236,240,241],textColor:[44,62,80],fontStyle:"bold",lineWidth:0},columnStyles:{0:{halign:"center",cellWidth:10},1:{halign:"center",cellWidth:30}},didDrawPage:function($){const ae=L.internal.getNumberOfPages();L.setFontSize(9),L.setTextColor(150),L.text(`Page ${$.pageNumber} of ${ae}`,k/2,T-10,{align:"center"})}}),L.save(`SalesReport_${M.replace(/\s+/g,"")}_${n}_to_${i}.pdf`)};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-md animate-fade-in-up",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6 text-center",children:"Select Date Range"}),y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Start Date"}),y.jsx("input",{ref:m,type:"date",onKeyDown:R,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition",autoFocus:!0})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"End Date"}),y.jsx("input",{ref:p,type:"date",onKeyDown:z,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition"})]})]}),y.jsxs("button",{ref:x,onClick:N,className:"w-full mt-8 flex items-center justify-center gap-2 bg-indigo-600 text-white px-4 py-3 rounded-lg shadow-md hover:bg-indigo-700 transition-all duration-300 ease-in-out transform hover:scale-105",children:[y.jsx(eI,{size:14})," Generate Report"]})]})}):y.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 bg-slate-50 min-h-screen",children:[y.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Sales Report"}),y.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Showing results for: ",y.jsx("span",{className:"font-semibold",children:n})," to ",y.jsx("span",{className:"font-semibold",children:i})]})]}),y.jsxs("button",{onClick:Q,disabled:o.length===0,className:"flex items-center gap-2 bg-rose-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-rose-700 transition-all duration-300 ease-in-out transform hover:scale-105 disabled:bg-gray-400 disabled:scale-100 disabled:cursor-not-allowed mt-4 sm:mt-0",children:[y.jsx(X7,{size:18})," Export as PDF"]})]}),y.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow-lg",children:l?y.jsxs("div",{className:"flex justify-center items-center py-20",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"}),y.jsx("p",{className:"ml-4 text-slate-600",children:"Loading sales records..."})]}):y.jsxs("table",{className:"min-w-full",children:[y.jsx("thead",{className:"bg-slate-100",children:y.jsx("tr",{children:[{title:"#",align:"text-left"},{title:"Date",align:"text-left"},{title:"Time",align:"text-left"},{title:"Table",align:"text-left"},{title:"Served By",align:"text-left"},{title:"Total",align:"text-right"},{title:"Discount",align:"text-right"},{title:"Grand Total",align:"text-right"}].map(L=>y.jsx("th",{className:`px-6 py-3 ${L.align} text-xs font-bold text-slate-600 uppercase tracking-wider`,children:L.title},L.title))})}),y.jsx("tbody",{className:"divide-y divide-gray-200",children:o.length>0?o.map((L,T)=>y.jsxs("tr",{className:"hover:bg-indigo-50 transition-colors duration-200",children:[y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 text-left",children:T+1}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 text-left",children:E(L.finalizedAt)}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 text-left",children:C(L.finalizedAt)}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 text-left",children:L.table}),y.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 text-left",children:L.servedBy}),y.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-800 text-right",children:[A,L.total.toFixed(2)]}),y.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 text-right",children:[A,L.discount.toFixed(2)]}),y.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-indigo-700 text-right",children:[A,L.grandTotal.toFixed(2)]})]},L.id)):y.jsx("tr",{children:y.jsx("td",{colSpan:8,className:"text-center py-16",children:y.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-500",children:[y.jsx(Z7,{className:"w-16 h-16 mb-4 text-slate-300"}),y.jsx("h3",{className:"text-xl font-semibold",children:"No Sales Records Found"}),y.jsx("p",{className:"text-sm mt-1",children:"There were no sales in the selected date range."})]})})})}),o.length>0&&y.jsx("tfoot",{className:"bg-slate-200 font-bold text-slate-800",children:y.jsxs("tr",{children:[y.jsx("td",{colSpan:5,className:"px-6 py-3 text-right text-sm",children:"TOTALS"}),y.jsxs("td",{className:"px-6 py-3 text-right text-sm",children:[A,w.total.toFixed(2)]}),y.jsxs("td",{className:"px-6 py-3 text-right text-sm text-red-700",children:[A,w.discount.toFixed(2)]}),y.jsxs("td",{className:"px-6 py-3 text-right text-sm text-indigo-800",children:[A,w.grandTotal.toFixed(2)]})]})})]})})]})},r$=[{to:"/reports/sales",title:"Sales Report",description:"View overall sales transactions within a specific date range.",icon:y.jsx(pN,{className:"h-8 w-8 text-blue-500"}),color:"blue"},{to:"/reports/item-wise-sales",title:"Item-wise Sales Report",description:"Analyze sales performance by individual menu items.",icon:y.jsx(wB,{className:"h-8 w-8 text-green-500"}),color:"green"},{to:"/reports/table-wise-sales",title:"Table-wise Sales Report",description:"Track sales and revenue generated by each table.",icon:y.jsx(bB,{className:"h-8 w-8 text-purple-500"}),color:"purple"},{to:"/reports/payment-mode",title:"Payment Mode Report",description:"Breakdown of sales by payment method like cash, card, etc.",icon:y.jsx(mB,{className:"h-8 w-8 text-yellow-500"}),color:"yellow"}],i$=()=>y.jsxs("div",{className:"p-6 bg-gray-50 min-h-full",children:[y.jsxs("div",{className:"mb-8",children:[y.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Sales & Revenue Reports"}),y.jsx("p",{className:"text-gray-500 mt-1",children:"Select a report type to view details."})]}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r$.map(t=>y.jsxs(Xy,{to:t.to,className:"group bg-white rounded-xl shadow-md p-6 flex flex-col justify-between hover:shadow-xl hover:-translate-y-1 transition-all duration-300 cursor-pointer border border-gray-200",children:[y.jsxs("div",{children:[y.jsx("div",{className:"mb-4",children:t.icon}),y.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:t.title}),y.jsx("p",{className:"text-gray-600 text-sm",children:t.description})]}),y.jsx("div",{className:"mt-6",children:y.jsx("span",{className:`font-semibold text-${t.color}-600 group-hover:text-${t.color}-800 transition-colors`,children:"View Report "})})]},t.title))})]}),s$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M416 224V64c0-8.8-7.2-16-16-16H112c-8.8 0-16 7.2-16 16v160h320zM96 256H32v176c0 13.3 10.7 24 24 24h32v-80c0-26.5 21.5-48 48-48h160c26.5 0 48 21.5 48 48v80h32c13.3 0 24-10.7 24-24V256H96zM480 96h-32v128h32c8.8 0 16-7.2 16-16V112c0-8.8-7.2-16-16-16zM288 352h-64c-8.8 0-16 7.2-16 16v64c0 8.8 7.2 16 16 16h64c8.8 0 16-7.2 16-16v-64c0-8.8-7.2-16-16-16z"})}),o$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M512 288c0 44.2-35.8 80-80 80s-80-35.8-80-80 35.8-80 80-80 80 35.8 80 80zM400 288c0 22.1 17.9 40 40 40s40-17.9 40-40-17.9-40-40-40-40 17.9-40 40zM192 288c0 44.2-35.8 80-80 80s-80-35.8-80-80 35.8-80 80-80 80 35.8 80 80zM32 288c0 22.1 17.9 40 40 40s40-17.9 40-40-17.9-40-40-40-40 17.9-40 40zM320 128c0 44.2-35.8 80-80 80s-80-35.8-80-80 35.8-80 80-80 80 35.8 80 80zM160 128c0 22.1 17.9 40 40 40s40-17.9 40-40-17.9-40-40-40-40 17.9-40 40zM256 0C114.6 0 0 114.6 0 256s114.6 256 256 256 256-114.6 256-256S397.4 0 256 0zM256 480c-123.5 0-224-100.5-224-224S132.5 32 256 32s224 100.5 224 224-100.5 224-224 224z"})}),a$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 576 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M528 224H48.8c-10.7 0-20.8 5.1-26.9 13.2L0 273.4V464c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V273.4l-21.9-36.2c-6-8.1-16.1-13.2-26.9-13.2zM48 352h160v64H48v-64zm192 0h160v64H240v-64zm336-48.4l19.2 31.8-19.2 31.8V303.6zM48 0h480c26.5 0 48 21.5 48 48v80H0V48C0 21.5 21.5 0 48 0z"})}),l$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 448 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"})}),u$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M32 32v448h448V32H32zm240 344h-32V200h32v176zm88 0h-32V136h32v240zm-176 0h-32V280h32v96z"})}),c$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 544 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M527.79 288H290.51a15.95 15.95 0 0 1-15.95-16V16.21a15.95 15.95 0 0 1 15.95-16c2.65 0 5.26.65 7.64 1.86A256.06 256.06 0 0 1 527.79 288zm-288-16a15.95 15.95 0 0 1 15.95-16H528a16 16 0 0 1 16 16v16a256 256 0 0 1-256 256H21.53c-11.21 0-19.18-11.45-14.45-21.53A256.06 256.06 0 0 1 239.79 272z"})}),h$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M500 384c6.6 0 12-5.4 12-12V108c0-6.6-5.4-12-12-12h-20c-6.6 0-12 5.4-12 12v33.3L339.5 280.8 223.7 125.5c-4.5-5.8-12.3-7.5-18.7-4.4l-112 56C85.7 180.1 80 186.8 80 194.5V320c0 6.6 5.4 12 12 12h20c6.6 0 12-5.4 12-12v-33.3l128.5-160.6 115.7 154.3c4.5 5.8 12.3 7.5 18.7 4.4l112-56c6.4-3.1 13.2-2.3 18.7 2.2l20 20V372c0 6.6 5.4 12 12 12z"})}),f$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 576 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 66.5 77.9 130.7 171.9 142.4C203.3 392.4 256 464 256 464v48H176c-13.3 0-24 10.7-24 24s10.7 24 24 24h224c13.3 0 24-10.7 24-24s-10.7-24-24-24H320v-48s52.7-71.6 84.1-177.6C502.1 274.7 576 210.5 576 144V88c0-13.3-10.7-24-24-24zM128 128c0-17.7 14.3-32 32-32h192c17.7 0 32 14.3 32 32v32H128v-32z"})}),d$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M283.211 512c78.962 0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954 0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156 0 0 0 283.211 0c-141.309 0-256 114.51-256 256 0 141.309 114.51 256 256 256z"})}),p$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M256 160c-52.9 0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5l-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.3-94.7c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7-100.4-33.5c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.3c-12.8 6.4-12.8 24.6 0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1z"})}),f_=(t=0,e=1500)=>{const[n,r]=G.useState(0),i=1e3/60,s=Math.round(e/i);return G.useEffect(()=>{let o=0;const a=setInterval(()=>{o++;const l=o/s;r(t*l),o===s&&(clearInterval(a),r(t))},i);return()=>clearInterval(a)},[t,e]),n},m$=()=>{const[t,e]=G.useState(!0),[n,r]=G.useState(""),[i,s]=G.useState(""),[o,a]=G.useState([]),[l,u]=G.useState([]),[c,d]=G.useState(!1),[m,p]=G.useState(null),[x,E]=G.useState("bar"),[C,w]=G.useState(""),[A,N]=G.useState({key:"totalRevenue",direction:"descending"}),[R,z]=G.useState(1),[Q,L]=G.useState(!1),T=10,k=G.useRef(null),M=G.useRef(null),S=G.useRef(null),P=G.useRef(null),j=G.useRef(null),B=Ae=>{const Pe=Ae.reduce((J,Ke)=>((Ke.items||[]).forEach(ot=>{const Ue=ot.name||"Unknown Item";J[Ue]||(J[Ue]={quantity:0,totalRevenue:0,price:Number(ot.price)||0});const Ie=Number(ot.quantity)||0;J[Ue].quantity+=Ie,J[Ue].totalRevenue+=Ie*(Number(ot.price)||0)}),J),{}),ge=Object.values(Pe).reduce((J,Ke)=>J+Ke.totalRevenue,0);return Object.entries(Pe).map(([J,Ke])=>({name:J,...Ke,contribution:ge>0?Ke.totalRevenue/ge*100:0}))};G.useEffect(()=>{const Ae=new URLSearchParams(window.location.search),Pe=Ae.get("startDate"),ge=Ae.get("endDate");Pe&&ge&&(r(Pe),s(ge),e(!1))},[]),G.useEffect(()=>{(async()=>{if(n&&i){d(!0);const Pe=new Date(n),ge=new Date(i),J=ge.getTime()-Pe.getTime(),Ke=new Date(Pe.getTime()-1),ot=new Date(Ke.getTime()-J);try{const[Ue,Ie,ze]=await Promise.all([dl(),Ef(Pe,ge),Ef(ot,Ke)]);p(Ue||{}),a(B(Ie)),u(B(ze));const Be=new URLSearchParams({startDate:n,endDate:i});window.history.pushState(null,"",`?${Be.toString()}`)}catch(Ue){console.error("Error processing item-wise sales report:",Ue)}d(!1)}})()},[n,i]),G.useEffect(()=>{Q?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[Q]);const X=G.useMemo(()=>{let Ae=[...o];return C&&(Ae=Ae.filter(Pe=>Pe.name.toLowerCase().includes(C.toLowerCase()))),Ae.sort((Pe,ge)=>Pe[A.key]<ge[A.key]?A.direction==="ascending"?-1:1:Pe[A.key]>ge[A.key]?A.direction==="ascending"?1:-1:0),Ae},[o,C,A]),se=G.useMemo(()=>{const Ae=(R-1)*T;return X.slice(Ae,Ae+T)},[X,R]),re=G.useMemo(()=>o.reduce((Ae,Pe)=>(Ae.totalRevenue+=Pe.totalRevenue,Ae.totalQuantity+=Pe.quantity,Ae),{totalRevenue:0,totalQuantity:0}),[o]),$=G.useMemo(()=>l.reduce((Ae,Pe)=>(Ae.totalRevenue+=Pe.totalRevenue,Ae.totalQuantity+=Pe.quantity,Ae),{totalRevenue:0,totalQuantity:0}),[l]),ae=(Ae,Pe)=>Pe===0?Ae>0?100:0:(Ae-Pe)/Pe*100,fe=ae(re.totalRevenue,$.totalRevenue),ve=ae(re.totalQuantity,$.totalQuantity),V=X.length>0?X[0].name:"N/A",Y="",ie=f_(re.totalRevenue),ne=f_(re.totalQuantity);G.useEffect(()=>{if(M.current&&M.current.destroy(),se.length===0||!k.current)return;const Ae=()=>{const Pe=k.current.getContext("2d"),ge=x==="pie"?X.slice(0,7):se,J=ge.map(ze=>ze.name),Ke=ge.map(ze=>ze.totalRevenue),ot=Q?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",Ue=Q?"#e2e8f0":"#334155",Ie=Q?"#f1f5f9":"#1e293b";M.current=new window.Chart(Pe,{type:x,data:{labels:J,datasets:[{label:"Total Revenue",data:Ke,backgroundColor:x==="pie"?["#4f46e5","#6366f1","#818cf8","#a5b4fc","#c7d2fe","#e0e7ff"]:"#4f46e5",borderColor:Q?"#374151":"#fff",borderWidth:1}]},options:{indexAxis:x==="bar"?"y":"x",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:x==="pie",labels:{color:Ue}},title:{display:!0,text:"Item Revenue",color:Ie}},scales:{x:{beginAtZero:!0,ticks:{color:Ue},grid:{color:ot}},y:{beginAtZero:!0,ticks:{color:Ue},grid:{color:ot}}}}})};if(window.Chart)Ae();else{const Pe=document.createElement("script");Pe.src="https://cdn.jsdelivr.net/npm/chart.js",Pe.onload=Ae,document.body.appendChild(Pe)}},[se,X,x,Q]);const oe=Ae=>{const Pe=new Date;let ge=new Date;Ae==="today"?ge.setHours(0,0,0,0):Ae==="week"?ge.setDate(Pe.getDate()-6):Ae==="month"&&ge.setDate(1);const J=Ke=>Ke.toISOString().split("T")[0];r(J(ge)),s(J(Pe)),e(!1)},ue=()=>{!S.current.value||!P.current.value||(r(S.current.value),s(P.current.value),e(!1))},we=Ae=>{let Pe="ascending";A.key===Ae&&A.direction==="ascending"&&(Pe="descending"),N({key:Ae,direction:Pe})},be=G.useCallback(()=>{if(X.length===0)return;const Ae=()=>{const{jsPDF:ge}=window.jspdf,J=new ge,Ke=(m==null?void 0:m.restaurantName)||"Restaurant";J.setFontSize(18),J.text(`${Ke} - Item-Wise Sales Report`,14,22),J.setFontSize(11),J.setTextColor(100),J.text(`Date Range: ${n} to ${i}`,14,30);const ot=["#","Item Name","Qty Sold","Unit Price","Total Revenue","% of Total"],Ue=X.map((Ie,ze)=>[ze+1,Ie.name,Ie.quantity,`${Y}${Ie.price.toFixed(2)}`,`${Y}${Ie.totalRevenue.toFixed(2)}`,`${Ie.contribution.toFixed(2)}%`]);J.autoTable({startY:40,head:[ot],body:Ue,foot:[["","TOTALS",re.totalQuantity,"",`${Y}${re.totalRevenue.toFixed(2)}`,"100.00%"]],theme:"striped",headStyles:{fillColor:[44,62,80]},footStyles:{fillColor:[236,240,241],textColor:[44,62,80],fontStyle:"bold"}}),J.save(`ItemWiseSalesReport_${n}_to_${i}.pdf`)},Pe=()=>{if(window.jspdf&&window.jspdf.autoTable)Ae();else if(window.jspdf){const ge=document.createElement("script");ge.src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js",ge.onload=Ae,document.body.appendChild(ge)}else{const ge=document.createElement("script");ge.src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js",ge.onload=()=>Pe(),document.body.appendChild(ge)}};Pe()},[X,m,n,i,re]),Se=()=>{if(X.length===0)return;const Ae=["Item Name","Qty Sold","Unit Price","Total Revenue","% of Total"],Pe=X.map(Ke=>[`"${Ke.name.replace(/"/g,'""')}"`,Ke.quantity,Ke.price,Ke.totalRevenue,Ke.contribution.toFixed(2)]),ge="data:text/csv;charset=utf-8,"+[Ae.join(","),...Pe.map(Ke=>Ke.join(","))].join(`
`),J=document.createElement("a");J.setAttribute("href",encodeURI(ge)),J.setAttribute("download",`ItemWiseSalesReport_${n}_to_${i}.csv`),document.body.appendChild(J),J.click(),document.body.removeChild(J)},Re=({value:Ae})=>y.jsxs("span",{className:`text-xs ml-2 font-bold ${Ae>=0?"text-green-500":"text-red-500"}`,children:[Ae>=0?"":""," ",Math.abs(Ae).toFixed(1),"%"]});return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-md animate-fade-in-up",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6 text-center",children:"Select Date Range"}),y.jsxs("div",{className:"flex justify-center gap-2 mb-4",children:[y.jsx("button",{onClick:()=>oe("today"),className:"px-3 py-1 text-sm bg-slate-200 rounded-full hover:bg-slate-300",children:"Today"}),y.jsx("button",{onClick:()=>oe("week"),className:"px-3 py-1 text-sm bg-slate-200 rounded-full hover:bg-slate-300",children:"This Week"}),y.jsx("button",{onClick:()=>oe("month"),className:"px-3 py-1 text-sm bg-slate-200 rounded-full hover:bg-slate-300",children:"This Month"})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsx("input",{ref:S,type:"date",className:"w-full border-gray-300 rounded-md p-2"}),y.jsx("input",{ref:P,type:"date",className:"w-full border-gray-300 rounded-md p-2"})]}),y.jsxs("button",{ref:j,onClick:ue,className:"w-full mt-8 flex items-center justify-center gap-2 bg-indigo-600 text-white px-4 py-3 rounded-lg shadow-md hover:bg-indigo-700",children:[y.jsx(l$,{})," Generate Report"]})]})}):y.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 bg-slate-50 dark:bg-slate-900 min-h-screen text-slate-800 dark:text-slate-200 transition-colors duration-300",children:[y.jsxs("header",{className:"flex flex-wrap justify-between items-center mb-6 gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold",children:"Item-Wise Sales Report"}),y.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[n," to ",i]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("button",{onClick:()=>L(!Q),className:"p-2 rounded-full bg-slate-200 dark:bg-slate-700 hover:bg-slate-300 dark:hover:bg-slate-600",children:Q?y.jsx(p$,{}):y.jsx(d$,{})}),y.jsxs("button",{onClick:Se,disabled:o.length===0,className:"flex items-center gap-2 bg-green-600 text-white px-3 py-2 rounded-lg shadow hover:bg-green-700 disabled:bg-gray-400",children:[y.jsx(o$,{})," CSV"]}),y.jsxs("button",{onClick:be,disabled:o.length===0,className:"flex items-center gap-2 bg-rose-600 text-white px-3 py-2 rounded-lg shadow hover:bg-rose-700 disabled:bg-gray-400",children:[y.jsx(s$,{})," PDF"]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[y.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-lg shadow text-center",children:[y.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Revenue"}),y.jsxs("p",{className:"text-2xl font-bold flex items-center justify-center",children:[Y,ie.toFixed(2)," ",y.jsx(Re,{value:fe})]})]}),y.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-lg shadow text-center",children:[y.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Total Items Sold"}),y.jsxs("p",{className:"text-2xl font-bold flex items-center justify-center",children:[Math.round(ne)," ",y.jsx(Re,{value:ve})]})]}),y.jsxs("div",{className:"bg-white dark:bg-slate-800 p-5 rounded-lg shadow text-center",children:[y.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 flex items-center justify-center gap-1",children:[y.jsx(f$,{className:"text-amber-400"}),"Best Seller"]}),y.jsx("p",{className:"text-2xl font-bold text-indigo-600 dark:text-indigo-400 truncate",children:V})]})]}),y.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-lg mb-6",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 flex-wrap gap-2",children:[y.jsx("input",{type:"text",placeholder:"Search items...",value:C,onChange:Ae=>w(Ae.target.value),className:"p-2 border rounded-md bg-transparent dark:border-slate-600"}),y.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[y.jsx("button",{onClick:()=>E("bar"),className:`p-2 rounded-md ${x==="bar"?"bg-indigo-600 text-white":""}`,children:y.jsx(u$,{})}),y.jsx("button",{onClick:()=>E("pie"),className:`p-2 rounded-md ${x==="pie"?"bg-indigo-600 text-white":""}`,children:y.jsx(c$,{})}),y.jsx("button",{onClick:()=>E("line"),className:`p-2 rounded-md ${x==="line"?"bg-indigo-600 text-white":""}`,children:y.jsx(h$,{})})]})]}),y.jsx("div",{className:"h-96",children:y.jsx("canvas",{ref:k})})]}),y.jsx("div",{className:"overflow-x-auto bg-white dark:bg-slate-800 rounded-lg shadow-lg",children:c?y.jsx("div",{className:"text-center p-20",children:"Loading..."}):y.jsxs("table",{className:"min-w-full",children:[y.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300",children:y.jsxs("tr",{children:[y.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider",children:"#"}),y.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",children:y.jsxs("button",{onClick:()=>we("name"),className:"w-full flex items-center justify-start gap-1",children:[y.jsx("span",{children:"Item Name"}),A.key==="name"&&(A.direction==="ascending"?"":"")]})}),y.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider",children:y.jsxs("button",{onClick:()=>we("quantity"),className:"w-full flex items-center justify-end gap-1",children:[y.jsx("span",{children:"Qty Sold"}),A.key==="quantity"&&(A.direction==="ascending"?"":"")]})}),y.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider",children:y.jsxs("button",{onClick:()=>we("price"),className:"w-full flex items-center justify-end gap-1",children:[y.jsx("span",{children:"Unit Price"}),A.key==="price"&&(A.direction==="ascending"?"":"")]})}),y.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider",children:y.jsxs("button",{onClick:()=>we("totalRevenue"),className:"w-full flex items-center justify-end gap-1",children:[y.jsx("span",{children:"Total Revenue"}),A.key==="totalRevenue"&&(A.direction==="ascending"?"":"")]})}),y.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium uppercase tracking-wider",children:y.jsxs("button",{onClick:()=>we("contribution"),className:"w-full flex items-center justify-end gap-1",children:[y.jsx("span",{children:"% of Total"}),A.key==="contribution"&&(A.direction==="ascending"?"":"")]})})]})}),y.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-slate-600",children:se.length>0?se.map((Ae,Pe)=>y.jsxs("tr",{className:"hover:bg-indigo-50 dark:hover:bg-slate-700",children:[y.jsx("td",{className:"px-6 py-4 text-right",children:(R-1)*T+Pe+1}),y.jsx("td",{className:"px-6 py-4 font-medium text-left",children:Ae.name}),y.jsx("td",{className:"px-6 py-4 text-right",children:Ae.quantity}),y.jsxs("td",{className:"px-6 py-4 text-right",children:[Y,Ae.price.toFixed(2)]}),y.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-700 dark:text-indigo-400 text-right",children:[Y,Ae.totalRevenue.toFixed(2)]}),y.jsxs("td",{className:"px-6 py-4 text-right text-sm",children:[Ae.contribution.toFixed(1),"%"]})]},Ae.name)):y.jsx("tr",{children:y.jsx("td",{colSpan:6,className:"text-center py-16",children:y.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-500 dark:text-slate-400",children:[y.jsx(a$,{className:"w-16 h-16 mb-4"}),y.jsx("h3",{className:"text-xl font-semibold",children:"No Item Data Found"}),y.jsx("p",{className:"text-sm mt-1",children:"There were no items sold in this date range."})]})})})})]})}),y.jsxs("div",{className:"flex justify-between items-center mt-4",children:[y.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Showing ",se.length," of ",X.length," items"]}),y.jsxs("div",{children:[y.jsx("button",{onClick:()=>z(Ae=>Math.max(1,Ae-1)),disabled:R===1,className:"px-3 py-1 border rounded-md disabled:opacity-50 dark:border-slate-600",children:"Prev"}),y.jsxs("span",{className:"mx-2",children:[R," / ",Math.max(1,Math.ceil(X.length/T))]}),y.jsx("button",{onClick:()=>z(Ae=>Math.min(Math.ceil(X.length/T),Ae+1)),disabled:R*T>=X.length,className:"px-3 py-1 border rounded-md disabled:opacity-50 dark:border-slate-600",children:"Next"})]})]})]})},g$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M416 224V64c0-8.8-7.2-16-16-16H112c-8.8 0-16 7.2-16 16v160h320zM96 256H32v176c0 13.3 10.7 24 24 24h32v-80c0-26.5 21.5-48 48-48h160c26.5 0 48 21.5 48 48v80h32c13.3 0 24-10.7 24-24V256H96zM480 96h-32v128h32c8.8 0 16-7.2 16-16V112c0-8.8-7.2-16-16-16zM288 352h-64c-8.8 0-16 7.2-16 16v64c0 8.8 7.2 16 16 16h64c8.8 0 16-7.2 16-16v-64c0-8.8-7.2-16-16-16z"})}),y$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM332.1 128H256V51.9l76.1 76.1zM48 464V48h160v104c0 13.3 10.7 24 24 24h104v288H48zm212-240h-28.8c-4.4 0-8.4 2.4-10.5 6.3-18 33.1-22.2 42.4-28.6 57.7-13.9-29.1-6.9-17.3-28.6-57.7-2.1-3.9-6.2-6.3-10.6-6.3H124c-9.8 0-15.6 10-10.8 18.3l48 85.3c-22.3 20.4-44.5 44.9-66.2 73.3-4.5 5.9-2.2 14.3 4.9 16.3h28.3c4.5 0 8.5-2.5 10.6-6.3 22.4-40 44.8-80 67.2-120 10.1 18.6 20.8 38.2 32 59.2 2.9 5.5 8.7 9.1 14.8 9.1h28.3c7.1-1.9 9.4-10.3 4.9-16.3-21.2-27.6-43-55.5-65.3-84.8l48-85.3c4.9-8.3-.9-18.3-10.8-18.3z"})}),v$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 576 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M528 224H48.8c-10.7 0-20.8 5.1-26.9 13.2L0 273.4V464c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V273.4l-21.9-36.2c-6-8.1-16.1-13.2-26.9-13.2zM48 352h160v64H48v-64zm192 0h160v64H240v-64zm336-48.4l19.2 31.8-19.2 31.8V303.6zM48 0h480c26.5 0 48 21.5 48 48v80H0V48C0 21.5 21.5 0 48 0z"})}),w$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 448 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"})}),x$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 448 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M32 32v448h448V32H32zm240 344h-32V200h32v176zm88 0h-32V136h32v240zm-176 0h-32V280h32v96z"})}),b$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 576 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 66.5 77.9 130.7 171.9 142.4C203.3 392.4 256 464 256 464v48H176c-13.3 0-24 10.7-24 24s10.7 24 24 24h224c13.3 0 24-10.7 24-24s-10.7-24-24-24H320v-48s52.7-71.6 84.1-177.6C502.1 274.7 576 210.5 576 144V88c0-13.3-10.7-24-24-24zM128 128c0-17.7 14.3-32 32-32h192c17.7 0 32 14.3 32 32v32H128v-32z"})}),_$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 544 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M527.79 288H290.51a15.95 15.95 0 0 1-15.95-16V16.21a15.95 15.95 0 0 1 15.95-16c2.65 0 5.26.65 7.64 1.86A256.06 256.06 0 0 1 527.79 288zm-288-16a15.95 15.95 0 0 1 15.95-16H528a16 16 0 0 1 16 16v16a256 256 0 0 1-256 256H21.53c-11.21 0-19.18-11.45-14.45-21.53A256.06 256.06 0 0 1 239.79 272z"})}),S$=()=>{const[t,e]=G.useState(!0),[n,r]=G.useState(""),[i,s]=G.useState(""),[o,a]=G.useState([]),[l,u]=G.useState(!1),[c,d]=G.useState(null),[m,p]=G.useState("bar"),x=G.useRef(null),E=G.useRef(null),C=G.useRef(null),w=G.useRef(null),A=G.useRef(null),N=S=>{const P=S.reduce((se,re)=>{const $=re.tableName||"Unknown Table";return se[$]||(se[$]={orders:0,total:0,discount:0,grandTotal:0,items:{}}),se[$].orders+=1,se[$].total+=re.subTotal||0,se[$].discount+=re.discount||0,se[$].grandTotal+=re.grandTotal||0,(re.items||[]).forEach(ae=>{se[$].items[ae.name]||(se[$].items[ae.name]=0),se[$].items[ae.name]+=ae.quantity}),se},{});let j={name:null,value:-1},B={name:null,value:1/0};const X=Object.keys(P).map(se=>{const re=P[se],$=re.orders>0?re.grandTotal/re.orders:0;re.grandTotal>j.value&&(j={name:se,value:re.grandTotal}),re.grandTotal<B.value&&(B={name:se,value:re.grandTotal});const ae=Object.entries(re.items).sort((fe,ve)=>ve[1]-fe[1]).slice(0,2).map(fe=>`${fe[0]} (x${fe[1]})`).join(", ");return{name:se,turnover:re.orders,aov:$,topItems:ae||"N/A",...re}});return X.map(se=>({...se,isBest:se.name===j.name&&X.length>1,isWorst:se.name===B.name&&X.length>1}))};G.useEffect(()=>{(async()=>{if(n&&i){u(!0);try{const P=await dl();d(P||{});const j=await Ef(new Date(n),new Date(i));a(N(j))}catch(P){console.error("Error processing table sales report:",P)}u(!1)}})()},[n,i]),G.useEffect(()=>{const S=()=>{E.current&&E.current.destroy();const P=x.current.getContext("2d"),j=o.map(X=>X.name),B=o.map(X=>X.grandTotal);E.current=new window.Chart(P,{type:m,data:{labels:j,datasets:[{label:"Total Sales",data:B,backgroundColor:m==="pie"?["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40"]:"#36A2EB",borderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:m==="pie",position:"top"},title:{display:!0,text:"Sales Revenue by Table"}}}})};if(o.length>0&&x.current)if(window.Chart)S();else{const P=document.createElement("script");P.src="https://cdn.jsdelivr.net/npm/chart.js",P.onload=S,document.body.appendChild(P)}},[o,m]);const R=o.reduce((S,P)=>(S.orders+=P.turnover,S.total+=P.total,S.discount+=P.discount,S.grandTotal+=P.grandTotal,S),{orders:0,total:0,discount:0,grandTotal:0}),z=R.orders>0?R.grandTotal/R.orders:0,Q="",L=S=>{const P=new Date;let j=new Date;S==="today"?j.setHours(0,0,0,0):S==="week"?j.setDate(P.getDate()-P.getDay()):S==="month"&&j.setDate(1);const B=X=>X.toISOString().split("T")[0];r(B(j)),s(B(P)),e(!1)},T=()=>{!C.current.value||!w.current.value||(r(C.current.value),s(w.current.value),e(!1))},k=()=>{if(o.length===0)return;const S=()=>{const P=()=>{const{jsPDF:j}=window.jspdf,B=new j;B.text("Table-wise Sales Report",14,15),B.autoTable({startY:20,head:[["Table","Turnover","AOV","Top Items","Net Sales"]],body:o.map(X=>[X.name,X.turnover,X.aov.toFixed(2),X.topItems,X.grandTotal.toFixed(2)])}),B.save(`TableWiseSalesReport_${n}_to_${i}.pdf`)};if(window.jspdf.autoTable)P();else{const j=document.createElement("script");j.src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js",j.onload=P,document.body.appendChild(j)}};if(window.jspdf)S();else{const P=document.createElement("script");P.src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js",P.onload=S,document.body.appendChild(P)}},M=()=>{if(o.length===0)return;const S=()=>{const P=window.XLSX.utils.book_new(),j=[["Table Name","Turnover","Avg. Order Value","Gross Sales","Discounts","Net Sales","Top Items"],...o.map(X=>[X.name,X.turnover,X.aov.toFixed(2),X.total.toFixed(2),X.discount.toFixed(2),X.grandTotal.toFixed(2),X.topItems])],B=window.XLSX.utils.aoa_to_sheet(j);window.XLSX.utils.book_append_sheet(P,B,"Table-wise Report"),window.XLSX.writeFile(P,`TableWiseSalesReport_${n}_to_${i}.xlsx`)};if(window.XLSX)S();else{const P=document.createElement("script");P.src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js",P.onload=S,document.body.appendChild(P)}};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-md animate-fade-in-up",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6 text-center",children:"Select Date Range"}),y.jsxs("div",{className:"flex justify-center gap-2 mb-4",children:[y.jsx("button",{onClick:()=>L("today"),className:"px-3 py-1 text-sm bg-slate-200 rounded-full hover:bg-slate-300",children:"Today"}),y.jsx("button",{onClick:()=>L("week"),className:"px-3 py-1 text-sm bg-slate-200 rounded-full hover:bg-slate-300",children:"This Week"}),y.jsx("button",{onClick:()=>L("month"),className:"px-3 py-1 text-sm bg-slate-200 rounded-full hover:bg-slate-300",children:"This Month"})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsx("input",{ref:C,type:"date",className:"w-full border border-gray-300 rounded-md px-3 py-2"}),y.jsx("input",{ref:w,type:"date",className:"w-full border border-gray-300 rounded-md px-3 py-2"})]}),y.jsxs("button",{ref:A,onClick:T,className:"w-full mt-8 flex items-center justify-center gap-2 bg-indigo-600 text-white px-4 py-3 rounded-lg shadow-md hover:bg-indigo-700",children:[y.jsx(w$,{})," Generate Report"]})]})}):y.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 bg-slate-50 min-h-screen",children:[y.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Advanced Table-wise Report"}),y.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Results for: ",y.jsx("span",{className:"font-semibold",children:n})," to ",y.jsx("span",{className:"font-semibold",children:i})]})]}),y.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[y.jsxs("button",{onClick:M,disabled:o.length===0,className:"flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-green-700 disabled:bg-gray-400",children:[y.jsx(y$,{})," Excel"]}),y.jsxs("button",{onClick:k,disabled:o.length===0,className:"flex items-center gap-2 bg-rose-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-rose-700 disabled:bg-gray-400",children:[y.jsx(g$,{})," PDF"]})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[y.jsxs("div",{className:"bg-white p-5 rounded-lg shadow",children:[y.jsx("p",{className:"text-sm text-slate-500",children:"Total Revenue"}),y.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:[Q,R.grandTotal.toFixed(2)]})]}),y.jsxs("div",{className:"bg-white p-5 rounded-lg shadow",children:[y.jsx("p",{className:"text-sm text-slate-500",children:"Total Turnovers"}),y.jsx("p",{className:"text-2xl font-bold text-slate-800",children:R.orders})]}),y.jsxs("div",{className:"bg-white p-5 rounded-lg shadow",children:[y.jsx("p",{className:"text-sm text-slate-500",children:"Overall AOV"}),y.jsxs("p",{className:"text-2xl font-bold text-slate-800",children:[Q,z.toFixed(2)]})]}),y.jsxs("div",{className:"bg-white p-5 rounded-lg shadow",children:[y.jsx("p",{className:"text-sm text-slate-500",children:"Active Tables"}),y.jsx("p",{className:"text-2xl font-bold text-slate-800",children:o.length})]})]}),o.length>0&&y.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg mb-6",children:[y.jsxs("div",{className:"flex justify-end gap-2 mb-2",children:[y.jsx("button",{onClick:()=>p("bar"),className:`p-2 rounded-full ${m==="bar"?"bg-indigo-600 text-white":"bg-slate-200"}`,children:y.jsx(x$,{})}),y.jsx("button",{onClick:()=>p("pie"),className:`p-2 rounded-full ${m==="pie"?"bg-indigo-600 text-white":"bg-slate-200"}`,children:y.jsx(_$,{})})]}),y.jsx("div",{className:"h-96",children:y.jsx("canvas",{ref:x})})]}),y.jsx("div",{className:"overflow-x-auto bg-white rounded-lg shadow-lg",children:l?y.jsx("div",{className:"flex justify-center items-center py-20",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):y.jsxs("table",{className:"min-w-full",children:[y.jsx("thead",{className:"bg-slate-100",children:y.jsx("tr",{children:["Table","Turnover","AOV","Top Items","Net Sales"].map(S=>y.jsx("th",{className:`px-6 py-3 text-xs font-bold text-slate-600 uppercase tracking-wider ${S.includes("Sales")||S.includes("AOV")?"text-right":"text-left"}`,children:S},S))})}),y.jsx("tbody",{className:"divide-y divide-gray-200",children:o.length>0?o.map(S=>y.jsxs("tr",{className:`${S.isBest?"bg-green-50":""} ${S.isWorst?"bg-red-50":""} hover:bg-indigo-50`,children:[y.jsxs("td",{className:"px-6 py-4 font-medium text-gray-800",children:[S.name,S.isBest&&y.jsxs("span",{className:"ml-2 text-xs text-green-600 font-bold flex items-center gap-1",children:[y.jsx(b$,{})," Best"]}),S.isWorst&&y.jsx("span",{className:"ml-2 text-xs text-red-600 font-bold",children:"Lowest"})]}),y.jsx("td",{className:"px-6 py-4 text-center",children:S.turnover}),y.jsxs("td",{className:"px-6 py-4 text-right",children:[Q,S.aov.toFixed(2)]}),y.jsx("td",{className:"px-6 py-4 text-sm text-slate-600",children:S.topItems}),y.jsxs("td",{className:"px-6 py-4 font-bold text-indigo-700 text-right",children:[Q,S.grandTotal.toFixed(2)]})]},S.name)):y.jsx("tr",{children:y.jsx("td",{colSpan:5,className:"text-center py-16",children:y.jsxs("div",{className:"flex flex-col items-center justify-center text-slate-500",children:[y.jsx(v$,{className:"w-16 h-16 mb-4"}),y.jsx("h3",{className:"text-xl font-semibold",children:"No Table Data Found"}),y.jsx("p",{className:"text-sm mt-1",children:"There were no sales records for any table in this date range."})]})})})})]})})]})},A$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 576 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M528 224H48.8c-10.7 0-20.8 5.1-26.9 13.2L0 273.4V464c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V273.4l-21.9-36.2c-6-8.1-16.1-13.2-26.9-13.2zM48 352h160v64H48v-64zm192 0h160v64H240v-64zm336-48.4l19.2 31.8-19.2 31.8V303.6zM48 0h480c26.5 0 48 21.5 48 48v80H0V48C0 21.5 21.5 0 48 0z"})}),E$=()=>y.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 448 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"})}),N$=()=>{const[t,e]=G.useState(!0),[n,r]=G.useState(""),[i,s]=G.useState(""),[o,a]=G.useState([]),[l,u]=G.useState(!1),[c,d]=G.useState(null),m=G.useRef(null),p=G.useRef(null),x=G.useRef(null),E=G.useRef(null),C=G.useRef(null),w=R=>{const z=R.reduce((L,T)=>{const k=T.paymentMode||"Unspecified";return L[k]||(L[k]={count:0,total:0}),L[k].count+=1,L[k].total+=T.grandTotal||0,L},{}),Q=Object.values(z).reduce((L,T)=>L+T.total,0);return Object.keys(z).map(L=>({name:L,count:z[L].count,total:z[L].total,percentage:Q>0?z[L].total/Q*100:0})).sort((L,T)=>T.total-L.total)};G.useEffect(()=>{(async()=>{if(n&&i){u(!0);try{const z=await dl();d(z||{});const Q=await Ef(new Date(n),new Date(i));a(w(Q))}catch(z){console.error("Error processing payment mode report:",z)}u(!1)}})()},[n,i]),G.useEffect(()=>{const R=()=>{p.current&&p.current.destroy();const z=m.current.getContext("2d"),Q=o.map(T=>T.name),L=o.map(T=>T.total);p.current=new window.Chart(z,{type:"pie",data:{labels:Q,datasets:[{label:"Sales by Payment Mode",data:L,backgroundColor:["#4BC0C0","#FF6384","#FFCE56","#36A2EB","#9966FF"],borderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1}})};if(o.length>0&&m.current)if(window.Chart)R();else{const z=document.createElement("script");z.src="https://cdn.jsdelivr.net/npm/chart.js",z.onload=R,document.body.appendChild(z)}},[o]);const A=o.reduce((R,z)=>(R.count+=z.count,R.total+=z.total,R),{count:0,total:0}),N=()=>{!x.current.value||!E.current.value||(r(x.current.value),s(E.current.value),e(!1))};return t?y.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-md animate-fade-in-up",children:[y.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-6 text-center",children:"Select Date Range"}),y.jsxs("div",{className:"space-y-4",children:[y.jsx("input",{ref:x,type:"date",className:"w-full border p-2 rounded-md"}),y.jsx("input",{ref:E,type:"date",className:"w-full border p-2 rounded-md"})]}),y.jsxs("button",{ref:C,onClick:N,className:"w-full mt-8 flex items-center justify-center gap-2 bg-indigo-600 text-white py-3 rounded-lg shadow-md hover:bg-indigo-700",children:[y.jsx(E$,{})," Generate Report"]})]})}):y.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 bg-slate-50 min-h-screen",children:[y.jsx("header",{className:"flex flex-col sm:flex-row justify-between items-center mb-6",children:y.jsxs("div",{children:[y.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Payment Mode Report"}),y.jsxs("p",{className:"text-sm text-slate-500 mt-1",children:["Results for: ",y.jsx("span",{className:"font-semibold",children:n})," to ",y.jsx("span",{className:"font-semibold",children:i})]})]})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[y.jsxs("div",{className:"bg-white p-5 rounded-lg shadow",children:[y.jsx("p",{className:"text-sm text-slate-500",children:"Total Revenue"}),y.jsx("p",{className:"text-2xl font-bold text-slate-800",children:A.total.toFixed(2)})]}),y.jsxs("div",{className:"bg-white p-5 rounded-lg shadow",children:[y.jsx("p",{className:"text-sm text-slate-500",children:"Total Transactions"}),y.jsx("p",{className:"text-2xl font-bold text-slate-800",children:A.count})]})]}),y.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-6",children:[y.jsx("div",{className:"lg:col-span-3 bg-white rounded-lg shadow-lg overflow-hidden",children:l?y.jsx("div",{className:"flex justify-center items-center py-20",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"})}):y.jsxs("table",{className:"min-w-full",children:[y.jsx("thead",{className:"bg-slate-100",children:y.jsx("tr",{children:["Payment Mode","Transactions","% of Total","Total Amount"].map(R=>y.jsx("th",{className:`px-6 py-3 text-xs font-bold text-slate-600 uppercase tracking-wider ${R.includes("Amount")||R==="Transactions"?"text-right":"text-left"}`,children:R},R))})}),y.jsx("tbody",{className:"divide-y divide-gray-200",children:o.length>0?o.map(R=>y.jsxs("tr",{className:"hover:bg-indigo-50",children:[y.jsx("td",{className:"px-6 py-4 font-medium text-gray-800",children:R.name}),y.jsx("td",{className:"px-6 py-4 text-right",children:R.count}),y.jsxs("td",{className:"px-6 py-4 text-right",children:[R.percentage.toFixed(2),"%"]}),y.jsx("td",{className:"px-6 py-4 font-bold text-indigo-700 text-right",children:R.total.toFixed(2)})]},R.name)):y.jsx("tr",{children:y.jsxs("td",{colSpan:4,className:"text-center py-16 text-slate-500",children:[y.jsx(A$,{className:"w-16 h-16 mx-auto mb-4"}),y.jsx("h3",{className:"text-xl font-semibold",children:"No Data Found"})]})})})]})}),y.jsxs("div",{className:"lg:col-span-2 bg-white p-4 rounded-lg shadow-lg",children:[y.jsx("h3",{className:"font-bold text-lg text-slate-700 mb-4",children:"Sales Distribution"}),o.length>0?y.jsx("div",{className:"h-80",children:y.jsx("canvas",{ref:m})}):y.jsx("p",{className:"text-center text-slate-500 pt-16",children:"No data to display chart."})]})]})]})},T$=()=>y.jsxs("div",{className:"flex min-h-screen",children:[y.jsx(aI,{}),y.jsx("main",{className:"flex-1 p-4 bg-gray-100 overflow-y-auto",children:y.jsxs(S7,{children:[y.jsx(Ei,{path:"/",element:y.jsx(OV,{})}),y.jsx(Ei,{path:"/order",element:y.jsx(VV,{})}),y.jsx(Ei,{path:"/menu",element:y.jsx(UV,{})}),y.jsx(Ei,{path:"/staff",element:y.jsx(WV,{})}),y.jsx(Ei,{path:"/kitchen",element:y.jsx(YV,{})}),y.jsx(Ei,{path:"/billing",element:y.jsx(lB,{})}),y.jsx(Ei,{path:"/reports",element:y.jsx(TB,{})}),y.jsx(Ei,{path:"/reports/sales",element:y.jsx(n$,{})}),y.jsx(Ei,{path:"/reports/sales-and-revenue",element:y.jsx(i$,{})}),y.jsx(Ei,{path:"/reports/item-wise-sales",element:y.jsx(m$,{})}),y.jsx(Ei,{path:"/reports/table-wise-sales",element:y.jsx(S$,{})}),y.jsx(Ei,{path:"/reports/payment-mode",element:y.jsx(N$,{})})," ",y.jsx(Ei,{path:"/settings",element:y.jsx(cB,{})})]})})]});n1.createRoot(document.getElementById("root")).render(y.jsx(on.StrictMode,{children:y.jsx(I7,{children:y.jsx(T$,{})})}));export{an as _,P$ as c,aC as g};

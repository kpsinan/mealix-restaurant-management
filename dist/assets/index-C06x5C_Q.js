function RS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function NS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zv={exports:{}},vu={},e_={exports:{}},se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xo=Symbol.for("react.element"),kS=Symbol.for("react.portal"),bS=Symbol.for("react.fragment"),VS=Symbol.for("react.strict_mode"),DS=Symbol.for("react.profiler"),MS=Symbol.for("react.provider"),LS=Symbol.for("react.context"),OS=Symbol.for("react.forward_ref"),jS=Symbol.for("react.suspense"),FS=Symbol.for("react.memo"),BS=Symbol.for("react.lazy"),Pg=Symbol.iterator;function US(t){return t===null||typeof t!="object"?null:(t=Pg&&t[Pg]||t["@@iterator"],typeof t=="function"?t:null)}var t_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},n_=Object.assign,r_={};function ai(t,e,n){this.props=t,this.context=e,this.refs=r_,this.updater=n||t_}ai.prototype.isReactComponent={};ai.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ai.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function s_(){}s_.prototype=ai.prototype;function hf(t,e,n){this.props=t,this.context=e,this.refs=r_,this.updater=n||t_}var df=hf.prototype=new s_;df.constructor=hf;n_(df,ai.prototype);df.isPureReactComponent=!0;var Cg=Array.isArray,i_=Object.prototype.hasOwnProperty,ff={current:null},o_={key:!0,ref:!0,__self:!0,__source:!0};function a_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)i_.call(e,r)&&!o_.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Xo,type:t,key:i,ref:o,props:s,_owner:ff.current}}function zS(t,e){return{$$typeof:Xo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xo}function $S(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ig=/\/+/g;function Rc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$S(""+t.key):e.toString(36)}function sl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xo:case kS:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Rc(o,0):r,Cg(s)?(n="",t!=null&&(n=t.replace(Ig,"$&/")+"/"),sl(s,e,n,"",function(c){return c})):s!=null&&(pf(s)&&(s=zS(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ig,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Cg(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Rc(i,a);o+=sl(i,e,n,l,s)}else if(l=US(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Rc(i,a++),o+=sl(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Da(t,e,n){if(t==null)return t;var r=[],s=0;return sl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function WS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},il={transition:null},HS={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:il,ReactCurrentOwner:ff};function l_(){throw Error("act(...) is not supported in production builds of React.")}se.Children={map:Da,forEach:function(t,e,n){Da(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Da(t,function(){e++}),e},toArray:function(t){return Da(t,function(e){return e})||[]},only:function(t){if(!pf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};se.Component=ai;se.Fragment=bS;se.Profiler=DS;se.PureComponent=hf;se.StrictMode=VS;se.Suspense=jS;se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HS;se.act=l_;se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=n_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=ff.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)i_.call(e,l)&&!o_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Xo,type:t.type,key:s,ref:i,props:r,_owner:o}};se.createContext=function(t){return t={$$typeof:LS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MS,_context:t},t.Consumer=t};se.createElement=a_;se.createFactory=function(t){var e=a_.bind(null,t);return e.type=t,e};se.createRef=function(){return{current:null}};se.forwardRef=function(t){return{$$typeof:OS,render:t}};se.isValidElement=pf;se.lazy=function(t){return{$$typeof:BS,_payload:{_status:-1,_result:t},_init:WS}};se.memo=function(t,e){return{$$typeof:FS,type:t,compare:e===void 0?null:e}};se.startTransition=function(t){var e=il.transition;il.transition={};try{t()}finally{il.transition=e}};se.unstable_act=l_;se.useCallback=function(t,e){return St.current.useCallback(t,e)};se.useContext=function(t){return St.current.useContext(t)};se.useDebugValue=function(){};se.useDeferredValue=function(t){return St.current.useDeferredValue(t)};se.useEffect=function(t,e){return St.current.useEffect(t,e)};se.useId=function(){return St.current.useId()};se.useImperativeHandle=function(t,e,n){return St.current.useImperativeHandle(t,e,n)};se.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};se.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};se.useMemo=function(t,e){return St.current.useMemo(t,e)};se.useReducer=function(t,e,n){return St.current.useReducer(t,e,n)};se.useRef=function(t){return St.current.useRef(t)};se.useState=function(t){return St.current.useState(t)};se.useSyncExternalStore=function(t,e,n){return St.current.useSyncExternalStore(t,e,n)};se.useTransition=function(){return St.current.useTransition()};se.version="18.3.1";e_.exports=se;var V=e_.exports;const de=NS(V),KS=RS({__proto__:null,default:de},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qS=V,GS=Symbol.for("react.element"),QS=Symbol.for("react.fragment"),YS=Object.prototype.hasOwnProperty,XS=qS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JS={key:!0,ref:!0,__self:!0,__source:!0};function u_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)YS.call(e,r)&&!JS.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:GS,type:t,key:i,ref:o,props:s,_owner:XS.current}}vu.Fragment=QS;vu.jsx=u_;vu.jsxs=u_;Zv.exports=vu;var E=Zv.exports,Sh={},c_={exports:{}},Bt={},h_={exports:{}},d_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,H){var Q=j.length;j.push(H);e:for(;0<Q;){var ge=Q-1>>>1,he=j[ge];if(0<s(he,H))j[ge]=H,j[Q]=he,Q=ge;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var H=j[0],Q=j.pop();if(Q!==H){j[0]=Q;e:for(var ge=0,he=j.length,ve=he>>>1;ge<ve;){var Pt=2*(ge+1)-1,zt=j[Pt],me=Pt+1,ze=j[me];if(0>s(zt,Q))me<he&&0>s(ze,zt)?(j[ge]=ze,j[me]=Q,ge=me):(j[ge]=zt,j[Pt]=Q,ge=Pt);else if(me<he&&0>s(ze,Q))j[ge]=ze,j[me]=Q,ge=me;else break e}}return H}function s(j,H){var Q=j.sortIndex-H.sortIndex;return Q!==0?Q:j.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,d=null,p=3,g=!1,T=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(j){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=j)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function b(j){if(A=!1,v(j),!T)if(n(l)!==null)T=!0,ne(D);else{var H=n(c);H!==null&&z(b,H.startTime-j)}}function D(j,H){T=!1,A&&(A=!1,_(y),y=-1),g=!0;var Q=p;try{for(v(H),d=n(l);d!==null&&(!(d.expirationTime>H)||j&&!R());){var ge=d.callback;if(typeof ge=="function"){d.callback=null,p=d.priorityLevel;var he=ge(d.expirationTime<=H);H=t.unstable_now(),typeof he=="function"?d.callback=he:d===n(l)&&r(l),v(H)}else r(l);d=n(l)}if(d!==null)var ve=!0;else{var Pt=n(c);Pt!==null&&z(b,Pt.startTime-H),ve=!1}return ve}finally{d=null,p=Q,g=!1}}var O=!1,C=null,y=-1,P=5,N=-1;function R(){return!(t.unstable_now()-N<P)}function k(){if(C!==null){var j=t.unstable_now();N=j;var H=!0;try{H=C(!0,j)}finally{H?S():(O=!1,C=null)}}else O=!1}var S;if(typeof w=="function")S=function(){w(k)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Y=W.port2;W.port1.onmessage=k,S=function(){Y.postMessage(null)}}else S=function(){I(k,0)};function ne(j){C=j,O||(O=!0,S())}function z(j,H){y=I(function(){j(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){T||g||(T=!0,ne(D))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(p){case 1:case 2:case 3:var H=3;break;default:H=p}var Q=p;p=H;try{return j()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,H){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Q=p;p=j;try{return H()}finally{p=Q}},t.unstable_scheduleCallback=function(j,H,Q){var ge=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ge+Q:ge):Q=ge,j){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Q+he,j={id:h++,callback:H,priorityLevel:j,startTime:Q,expirationTime:he,sortIndex:-1},Q>ge?(j.sortIndex=Q,e(c,j),n(l)===null&&j===n(c)&&(A?(_(y),y=-1):A=!0,z(b,Q-ge))):(j.sortIndex=he,e(l,j),T||g||(T=!0,ne(D))),j},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(j){var H=p;return function(){var Q=p;p=H;try{return j.apply(this,arguments)}finally{p=Q}}}})(d_);h_.exports=d_;var ZS=h_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e2=V,Ft=ZS;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f_=new Set,yo={};function ns(t,e){Ws(t,e),Ws(t+"Capture",e)}function Ws(t,e){for(yo[t]=e,t=0;t<e.length;t++)f_.add(e[t])}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ah=Object.prototype.hasOwnProperty,t2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rg={},Ng={};function n2(t){return Ah.call(Ng,t)?!0:Ah.call(Rg,t)?!1:t2.test(t)?Ng[t]=!0:(Rg[t]=!0,!1)}function r2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function s2(t,e,n,r){if(e===null||typeof e>"u"||r2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var mf=/[\-:]([a-z])/g;function gf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mf,gf);rt[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mf,gf);rt[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mf,gf);rt[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function yf(t,e,n,r){var s=rt.hasOwnProperty(e)?rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(s2(e,n,s,r)&&(n=null),r||s===null?n2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Un=e2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ma=Symbol.for("react.element"),ys=Symbol.for("react.portal"),vs=Symbol.for("react.fragment"),vf=Symbol.for("react.strict_mode"),Ph=Symbol.for("react.profiler"),p_=Symbol.for("react.provider"),m_=Symbol.for("react.context"),_f=Symbol.for("react.forward_ref"),Ch=Symbol.for("react.suspense"),Ih=Symbol.for("react.suspense_list"),wf=Symbol.for("react.memo"),Gn=Symbol.for("react.lazy"),g_=Symbol.for("react.offscreen"),kg=Symbol.iterator;function Vi(t){return t===null||typeof t!="object"?null:(t=kg&&t[kg]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Nc;function $i(t){if(Nc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nc=e&&e[1]||""}return`
`+Nc+t}var kc=!1;function bc(t,e){if(!t||kc)return"";kc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{kc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$i(t):""}function i2(t){switch(t.tag){case 5:return $i(t.type);case 16:return $i("Lazy");case 13:return $i("Suspense");case 19:return $i("SuspenseList");case 0:case 2:case 15:return t=bc(t.type,!1),t;case 11:return t=bc(t.type.render,!1),t;case 1:return t=bc(t.type,!0),t;default:return""}}function Rh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vs:return"Fragment";case ys:return"Portal";case Ph:return"Profiler";case vf:return"StrictMode";case Ch:return"Suspense";case Ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case m_:return(t.displayName||"Context")+".Consumer";case p_:return(t._context.displayName||"Context")+".Provider";case _f:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wf:return e=t.displayName||null,e!==null?e:Rh(t.type)||"Memo";case Gn:e=t._payload,t=t._init;try{return Rh(t(e))}catch{}}return null}function o2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rh(e);case 8:return e===vf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function y_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function a2(t){var e=y_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function La(t){t._valueTracker||(t._valueTracker=a2(t))}function v_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=y_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Al(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nh(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function bg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function __(t,e){e=e.checked,e!=null&&yf(t,"checked",e,!1)}function kh(t,e){__(t,e);var n=pr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bh(t,e.type,n):e.hasOwnProperty("defaultValue")&&bh(t,e.type,pr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Vg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function bh(t,e,n){(e!=="number"||Al(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wi=Array.isArray;function Ms(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Vh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Wi(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pr(n)}}function w_(t,e){var n=pr(e.value),r=pr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Mg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function E_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?E_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oa,T_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oa=Oa||document.createElement("div"),Oa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function vo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ji={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},l2=["Webkit","ms","Moz","O"];Object.keys(Ji).forEach(function(t){l2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ji[e]=Ji[t]})});function x_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ji.hasOwnProperty(t)&&Ji[t]?(""+e).trim():e+"px"}function S_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=x_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var u2=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mh(t,e){if(e){if(u2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Lh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oh=null;function Ef(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jh=null,Ls=null,Os=null;function Lg(t){if(t=ea(t)){if(typeof jh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=xu(e),jh(t.stateNode,t.type,e))}}function A_(t){Ls?Os?Os.push(t):Os=[t]:Ls=t}function P_(){if(Ls){var t=Ls,e=Os;if(Os=Ls=null,Lg(t),e)for(t=0;t<e.length;t++)Lg(e[t])}}function C_(t,e){return t(e)}function I_(){}var Vc=!1;function R_(t,e,n){if(Vc)return t(e,n);Vc=!0;try{return C_(t,e,n)}finally{Vc=!1,(Ls!==null||Os!==null)&&(I_(),P_())}}function _o(t,e){var n=t.stateNode;if(n===null)return null;var r=xu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Fh=!1;if(bn)try{var Di={};Object.defineProperty(Di,"passive",{get:function(){Fh=!0}}),window.addEventListener("test",Di,Di),window.removeEventListener("test",Di,Di)}catch{Fh=!1}function c2(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Zi=!1,Pl=null,Cl=!1,Bh=null,h2={onError:function(t){Zi=!0,Pl=t}};function d2(t,e,n,r,s,i,o,a,l){Zi=!1,Pl=null,c2.apply(h2,arguments)}function f2(t,e,n,r,s,i,o,a,l){if(d2.apply(this,arguments),Zi){if(Zi){var c=Pl;Zi=!1,Pl=null}else throw Error(U(198));Cl||(Cl=!0,Bh=c)}}function rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function N_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Og(t){if(rs(t)!==t)throw Error(U(188))}function p2(t){var e=t.alternate;if(!e){if(e=rs(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Og(s),t;if(i===r)return Og(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function k_(t){return t=p2(t),t!==null?b_(t):null}function b_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=b_(t);if(e!==null)return e;t=t.sibling}return null}var V_=Ft.unstable_scheduleCallback,jg=Ft.unstable_cancelCallback,m2=Ft.unstable_shouldYield,g2=Ft.unstable_requestPaint,je=Ft.unstable_now,y2=Ft.unstable_getCurrentPriorityLevel,Tf=Ft.unstable_ImmediatePriority,D_=Ft.unstable_UserBlockingPriority,Il=Ft.unstable_NormalPriority,v2=Ft.unstable_LowPriority,M_=Ft.unstable_IdlePriority,_u=null,pn=null;function _2(t){if(pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(_u,t,void 0,(t.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:T2,w2=Math.log,E2=Math.LN2;function T2(t){return t>>>=0,t===0?32:31-(w2(t)/E2|0)|0}var ja=64,Fa=4194304;function Hi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Hi(a):(i&=o,i!==0&&(r=Hi(i)))}else o=n&~s,o!==0?r=Hi(o):i!==0&&(r=Hi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-sn(e),s=1<<n,r|=t[n],e&=~s;return r}function x2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function S2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-sn(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=x2(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Uh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function L_(){var t=ja;return ja<<=1,!(ja&4194240)&&(ja=64),t}function Dc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sn(e),t[e]=n}function A2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-sn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function xf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-sn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var fe=0;function O_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var j_,Sf,F_,B_,U_,zh=!1,Ba=[],nr=null,rr=null,sr=null,wo=new Map,Eo=new Map,Yn=[],P2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fg(t,e){switch(t){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":rr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":wo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Eo.delete(e.pointerId)}}function Mi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ea(e),e!==null&&Sf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function C2(t,e,n,r,s){switch(e){case"focusin":return nr=Mi(nr,t,e,n,r,s),!0;case"dragenter":return rr=Mi(rr,t,e,n,r,s),!0;case"mouseover":return sr=Mi(sr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return wo.set(i,Mi(wo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Eo.set(i,Mi(Eo.get(i)||null,t,e,n,r,s)),!0}return!1}function z_(t){var e=Lr(t.target);if(e!==null){var n=rs(e);if(n!==null){if(e=n.tag,e===13){if(e=N_(n),e!==null){t.blockedOn=e,U_(t.priority,function(){F_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ol(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$h(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Oh=r,n.target.dispatchEvent(r),Oh=null}else return e=ea(n),e!==null&&Sf(e),t.blockedOn=n,!1;e.shift()}return!0}function Bg(t,e,n){ol(t)&&n.delete(e)}function I2(){zh=!1,nr!==null&&ol(nr)&&(nr=null),rr!==null&&ol(rr)&&(rr=null),sr!==null&&ol(sr)&&(sr=null),wo.forEach(Bg),Eo.forEach(Bg)}function Li(t,e){t.blockedOn===e&&(t.blockedOn=null,zh||(zh=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,I2)))}function To(t){function e(s){return Li(s,t)}if(0<Ba.length){Li(Ba[0],t);for(var n=1;n<Ba.length;n++){var r=Ba[n];r.blockedOn===t&&(r.blockedOn=null)}}for(nr!==null&&Li(nr,t),rr!==null&&Li(rr,t),sr!==null&&Li(sr,t),wo.forEach(e),Eo.forEach(e),n=0;n<Yn.length;n++)r=Yn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yn.length&&(n=Yn[0],n.blockedOn===null);)z_(n),n.blockedOn===null&&Yn.shift()}var js=Un.ReactCurrentBatchConfig,Nl=!0;function R2(t,e,n,r){var s=fe,i=js.transition;js.transition=null;try{fe=1,Af(t,e,n,r)}finally{fe=s,js.transition=i}}function N2(t,e,n,r){var s=fe,i=js.transition;js.transition=null;try{fe=4,Af(t,e,n,r)}finally{fe=s,js.transition=i}}function Af(t,e,n,r){if(Nl){var s=$h(t,e,n,r);if(s===null)Wc(t,e,r,kl,n),Fg(t,r);else if(C2(s,t,e,n,r))r.stopPropagation();else if(Fg(t,r),e&4&&-1<P2.indexOf(t)){for(;s!==null;){var i=ea(s);if(i!==null&&j_(i),i=$h(t,e,n,r),i===null&&Wc(t,e,r,kl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Wc(t,e,r,null,n)}}var kl=null;function $h(t,e,n,r){if(kl=null,t=Ef(r),t=Lr(t),t!==null)if(e=rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=N_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kl=t,null}function $_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(y2()){case Tf:return 1;case D_:return 4;case Il:case v2:return 16;case M_:return 536870912;default:return 16}default:return 16}}var Jn=null,Pf=null,al=null;function W_(){if(al)return al;var t,e=Pf,n=e.length,r,s="value"in Jn?Jn.value:Jn.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return al=s.slice(t,1<r?1-r:void 0)}function ll(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ua(){return!0}function Ug(){return!1}function Ut(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ua:Ug,this.isPropagationStopped=Ug,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),e}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cf=Ut(li),Zo=Re({},li,{view:0,detail:0}),k2=Ut(Zo),Mc,Lc,Oi,wu=Re({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:If,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oi&&(Oi&&t.type==="mousemove"?(Mc=t.screenX-Oi.screenX,Lc=t.screenY-Oi.screenY):Lc=Mc=0,Oi=t),Mc)},movementY:function(t){return"movementY"in t?t.movementY:Lc}}),zg=Ut(wu),b2=Re({},wu,{dataTransfer:0}),V2=Ut(b2),D2=Re({},Zo,{relatedTarget:0}),Oc=Ut(D2),M2=Re({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),L2=Ut(M2),O2=Re({},li,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),j2=Ut(O2),F2=Re({},li,{data:0}),$g=Ut(F2),B2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=z2[t])?!!e[t]:!1}function If(){return $2}var W2=Re({},Zo,{key:function(t){if(t.key){var e=B2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ll(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?U2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:If,charCode:function(t){return t.type==="keypress"?ll(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ll(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),H2=Ut(W2),K2=Re({},wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wg=Ut(K2),q2=Re({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:If}),G2=Ut(q2),Q2=Re({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),Y2=Ut(Q2),X2=Re({},wu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),J2=Ut(X2),Z2=[9,13,27,32],Rf=bn&&"CompositionEvent"in window,eo=null;bn&&"documentMode"in document&&(eo=document.documentMode);var eA=bn&&"TextEvent"in window&&!eo,H_=bn&&(!Rf||eo&&8<eo&&11>=eo),Hg=" ",Kg=!1;function K_(t,e){switch(t){case"keyup":return Z2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _s=!1;function tA(t,e){switch(t){case"compositionend":return q_(e);case"keypress":return e.which!==32?null:(Kg=!0,Hg);case"textInput":return t=e.data,t===Hg&&Kg?null:t;default:return null}}function nA(t,e){if(_s)return t==="compositionend"||!Rf&&K_(t,e)?(t=W_(),al=Pf=Jn=null,_s=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return H_&&e.locale!=="ko"?null:e.data;default:return null}}var rA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!rA[t.type]:e==="textarea"}function G_(t,e,n,r){A_(r),e=bl(e,"onChange"),0<e.length&&(n=new Cf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var to=null,xo=null;function sA(t){i1(t,0)}function Eu(t){var e=Ts(t);if(v_(e))return t}function iA(t,e){if(t==="change")return e}var Q_=!1;if(bn){var jc;if(bn){var Fc="oninput"in document;if(!Fc){var Gg=document.createElement("div");Gg.setAttribute("oninput","return;"),Fc=typeof Gg.oninput=="function"}jc=Fc}else jc=!1;Q_=jc&&(!document.documentMode||9<document.documentMode)}function Qg(){to&&(to.detachEvent("onpropertychange",Y_),xo=to=null)}function Y_(t){if(t.propertyName==="value"&&Eu(xo)){var e=[];G_(e,xo,t,Ef(t)),R_(sA,e)}}function oA(t,e,n){t==="focusin"?(Qg(),to=e,xo=n,to.attachEvent("onpropertychange",Y_)):t==="focusout"&&Qg()}function aA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eu(xo)}function lA(t,e){if(t==="click")return Eu(e)}function uA(t,e){if(t==="input"||t==="change")return Eu(e)}function cA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:cA;function So(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Ah.call(e,s)||!an(t[s],e[s]))return!1}return!0}function Yg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xg(t,e){var n=Yg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yg(n)}}function X_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?X_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function J_(){for(var t=window,e=Al();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Al(t.document)}return e}function Nf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function hA(t){var e=J_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&X_(n.ownerDocument.documentElement,n)){if(r!==null&&Nf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Xg(n,i);var o=Xg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dA=bn&&"documentMode"in document&&11>=document.documentMode,ws=null,Wh=null,no=null,Hh=!1;function Jg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hh||ws==null||ws!==Al(r)||(r=ws,"selectionStart"in r&&Nf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),no&&So(no,r)||(no=r,r=bl(Wh,"onSelect"),0<r.length&&(e=new Cf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ws)))}function za(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Es={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},Bc={},Z_={};bn&&(Z_=document.createElement("div").style,"AnimationEvent"in window||(delete Es.animationend.animation,delete Es.animationiteration.animation,delete Es.animationstart.animation),"TransitionEvent"in window||delete Es.transitionend.transition);function Tu(t){if(Bc[t])return Bc[t];if(!Es[t])return t;var e=Es[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Z_)return Bc[t]=e[n];return t}var e1=Tu("animationend"),t1=Tu("animationiteration"),n1=Tu("animationstart"),r1=Tu("transitionend"),s1=new Map,Zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(t,e){s1.set(t,e),ns(e,[t])}for(var Uc=0;Uc<Zg.length;Uc++){var zc=Zg[Uc],fA=zc.toLowerCase(),pA=zc[0].toUpperCase()+zc.slice(1);Er(fA,"on"+pA)}Er(e1,"onAnimationEnd");Er(t1,"onAnimationIteration");Er(n1,"onAnimationStart");Er("dblclick","onDoubleClick");Er("focusin","onFocus");Er("focusout","onBlur");Er(r1,"onTransitionEnd");Ws("onMouseEnter",["mouseout","mouseover"]);Ws("onMouseLeave",["mouseout","mouseover"]);Ws("onPointerEnter",["pointerout","pointerover"]);Ws("onPointerLeave",["pointerout","pointerover"]);ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ki));function ey(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,f2(r,e,void 0,t),t.currentTarget=null}function i1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;ey(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;ey(s,a,c),i=l}}}if(Cl)throw t=Bh,Cl=!1,Bh=null,t}function Ee(t,e){var n=e[Yh];n===void 0&&(n=e[Yh]=new Set);var r=t+"__bubble";n.has(r)||(o1(e,t,2,!1),n.add(r))}function $c(t,e,n){var r=0;e&&(r|=4),o1(n,t,r,e)}var $a="_reactListening"+Math.random().toString(36).slice(2);function Ao(t){if(!t[$a]){t[$a]=!0,f_.forEach(function(n){n!=="selectionchange"&&(mA.has(n)||$c(n,!1,t),$c(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$a]||(e[$a]=!0,$c("selectionchange",!1,e))}}function o1(t,e,n,r){switch($_(e)){case 1:var s=R2;break;case 4:s=N2;break;default:s=Af}n=s.bind(null,e,n,t),s=void 0,!Fh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Wc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Lr(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}R_(function(){var c=i,h=Ef(n),d=[];e:{var p=s1.get(t);if(p!==void 0){var g=Cf,T=t;switch(t){case"keypress":if(ll(n)===0)break e;case"keydown":case"keyup":g=H2;break;case"focusin":T="focus",g=Oc;break;case"focusout":T="blur",g=Oc;break;case"beforeblur":case"afterblur":g=Oc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=zg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=V2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=G2;break;case e1:case t1:case n1:g=L2;break;case r1:g=Y2;break;case"scroll":g=k2;break;case"wheel":g=J2;break;case"copy":case"cut":case"paste":g=j2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Wg}var A=(e&4)!==0,I=!A&&t==="scroll",_=A?p!==null?p+"Capture":null:p;A=[];for(var w=c,v;w!==null;){v=w;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,_!==null&&(b=_o(w,_),b!=null&&A.push(Po(w,b,v)))),I)break;w=w.return}0<A.length&&(p=new g(p,T,null,n,h),d.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Oh&&(T=n.relatedTarget||n.fromElement)&&(Lr(T)||T[Vn]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(T=n.relatedTarget||n.toElement,g=c,T=T?Lr(T):null,T!==null&&(I=rs(T),T!==I||T.tag!==5&&T.tag!==6)&&(T=null)):(g=null,T=c),g!==T)){if(A=zg,b="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(A=Wg,b="onPointerLeave",_="onPointerEnter",w="pointer"),I=g==null?p:Ts(g),v=T==null?p:Ts(T),p=new A(b,w+"leave",g,n,h),p.target=I,p.relatedTarget=v,b=null,Lr(h)===c&&(A=new A(_,w+"enter",T,n,h),A.target=v,A.relatedTarget=I,b=A),I=b,g&&T)t:{for(A=g,_=T,w=0,v=A;v;v=fs(v))w++;for(v=0,b=_;b;b=fs(b))v++;for(;0<w-v;)A=fs(A),w--;for(;0<v-w;)_=fs(_),v--;for(;w--;){if(A===_||_!==null&&A===_.alternate)break t;A=fs(A),_=fs(_)}A=null}else A=null;g!==null&&ty(d,p,g,A,!1),T!==null&&I!==null&&ty(d,I,T,A,!0)}}e:{if(p=c?Ts(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var D=iA;else if(qg(p))if(Q_)D=uA;else{D=aA;var O=oA}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=lA);if(D&&(D=D(t,c))){G_(d,D,n,h);break e}O&&O(t,p,c),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&bh(p,"number",p.value)}switch(O=c?Ts(c):window,t){case"focusin":(qg(O)||O.contentEditable==="true")&&(ws=O,Wh=c,no=null);break;case"focusout":no=Wh=ws=null;break;case"mousedown":Hh=!0;break;case"contextmenu":case"mouseup":case"dragend":Hh=!1,Jg(d,n,h);break;case"selectionchange":if(dA)break;case"keydown":case"keyup":Jg(d,n,h)}var C;if(Rf)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else _s?K_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(H_&&n.locale!=="ko"&&(_s||y!=="onCompositionStart"?y==="onCompositionEnd"&&_s&&(C=W_()):(Jn=h,Pf="value"in Jn?Jn.value:Jn.textContent,_s=!0)),O=bl(c,y),0<O.length&&(y=new $g(y,t,null,n,h),d.push({event:y,listeners:O}),C?y.data=C:(C=q_(n),C!==null&&(y.data=C)))),(C=eA?tA(t,n):nA(t,n))&&(c=bl(c,"onBeforeInput"),0<c.length&&(h=new $g("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=C))}i1(d,e)})}function Po(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=_o(t,n),i!=null&&r.unshift(Po(t,i,s)),i=_o(t,e),i!=null&&r.push(Po(t,i,s))),t=t.return}return r}function fs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ty(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=_o(n,i),l!=null&&o.unshift(Po(n,l,a))):s||(l=_o(n,i),l!=null&&o.push(Po(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var gA=/\r\n?/g,yA=/\u0000|\uFFFD/g;function ny(t){return(typeof t=="string"?t:""+t).replace(gA,`
`).replace(yA,"")}function Wa(t,e,n){if(e=ny(e),ny(t)!==e&&n)throw Error(U(425))}function Vl(){}var Kh=null,qh=null;function Gh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qh=typeof setTimeout=="function"?setTimeout:void 0,vA=typeof clearTimeout=="function"?clearTimeout:void 0,ry=typeof Promise=="function"?Promise:void 0,_A=typeof queueMicrotask=="function"?queueMicrotask:typeof ry<"u"?function(t){return ry.resolve(null).then(t).catch(wA)}:Qh;function wA(t){setTimeout(function(){throw t})}function Hc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),To(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);To(e)}function ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ui=Math.random().toString(36).slice(2),fn="__reactFiber$"+ui,Co="__reactProps$"+ui,Vn="__reactContainer$"+ui,Yh="__reactEvents$"+ui,EA="__reactListeners$"+ui,TA="__reactHandles$"+ui;function Lr(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vn]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sy(t);t!==null;){if(n=t[fn])return n;t=sy(t)}return e}t=n,n=t.parentNode}return null}function ea(t){return t=t[fn]||t[Vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function xu(t){return t[Co]||null}var Xh=[],xs=-1;function Tr(t){return{current:t}}function Te(t){0>xs||(t.current=Xh[xs],Xh[xs]=null,xs--)}function _e(t,e){xs++,Xh[xs]=t.current,t.current=e}var mr={},mt=Tr(mr),kt=Tr(!1),qr=mr;function Hs(t,e){var n=t.type.contextTypes;if(!n)return mr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bt(t){return t=t.childContextTypes,t!=null}function Dl(){Te(kt),Te(mt)}function iy(t,e,n){if(mt.current!==mr)throw Error(U(168));_e(mt,e),_e(kt,n)}function a1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,o2(t)||"Unknown",s));return Re({},n,r)}function Ml(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||mr,qr=mt.current,_e(mt,t),_e(kt,kt.current),!0}function oy(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=a1(t,e,qr),r.__reactInternalMemoizedMergedChildContext=t,Te(kt),Te(mt),_e(mt,t)):Te(kt),_e(kt,n)}var Cn=null,Su=!1,Kc=!1;function l1(t){Cn===null?Cn=[t]:Cn.push(t)}function xA(t){Su=!0,l1(t)}function xr(){if(!Kc&&Cn!==null){Kc=!0;var t=0,e=fe;try{var n=Cn;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Cn=null,Su=!1}catch(s){throw Cn!==null&&(Cn=Cn.slice(t+1)),V_(Tf,xr),s}finally{fe=e,Kc=!1}}return null}var Ss=[],As=0,Ll=null,Ol=0,Ht=[],Kt=0,Gr=null,In=1,Rn="";function br(t,e){Ss[As++]=Ol,Ss[As++]=Ll,Ll=t,Ol=e}function u1(t,e,n){Ht[Kt++]=In,Ht[Kt++]=Rn,Ht[Kt++]=Gr,Gr=t;var r=In;t=Rn;var s=32-sn(r)-1;r&=~(1<<s),n+=1;var i=32-sn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,In=1<<32-sn(e)+s|n<<s|r,Rn=i+t}else In=1<<i|n<<s|r,Rn=t}function kf(t){t.return!==null&&(br(t,1),u1(t,1,0))}function bf(t){for(;t===Ll;)Ll=Ss[--As],Ss[As]=null,Ol=Ss[--As],Ss[As]=null;for(;t===Gr;)Gr=Ht[--Kt],Ht[Kt]=null,Rn=Ht[--Kt],Ht[Kt]=null,In=Ht[--Kt],Ht[Kt]=null}var jt=null,Lt=null,xe=!1,rn=null;function c1(t,e){var n=qt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ay(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jt=t,Lt=ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jt=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gr!==null?{id:In,overflow:Rn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jt=t,Lt=null,!0):!1;default:return!1}}function Jh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zh(t){if(xe){var e=Lt;if(e){var n=e;if(!ay(t,e)){if(Jh(t))throw Error(U(418));e=ir(n.nextSibling);var r=jt;e&&ay(t,e)?c1(r,n):(t.flags=t.flags&-4097|2,xe=!1,jt=t)}}else{if(Jh(t))throw Error(U(418));t.flags=t.flags&-4097|2,xe=!1,jt=t}}}function ly(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jt=t}function Ha(t){if(t!==jt)return!1;if(!xe)return ly(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gh(t.type,t.memoizedProps)),e&&(e=Lt)){if(Jh(t))throw h1(),Error(U(418));for(;e;)c1(t,e),e=ir(e.nextSibling)}if(ly(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=jt?ir(t.stateNode.nextSibling):null;return!0}function h1(){for(var t=Lt;t;)t=ir(t.nextSibling)}function Ks(){Lt=jt=null,xe=!1}function Vf(t){rn===null?rn=[t]:rn.push(t)}var SA=Un.ReactCurrentBatchConfig;function ji(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Ka(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uy(t){var e=t._init;return e(t._payload)}function d1(t){function e(_,w){if(t){var v=_.deletions;v===null?(_.deletions=[w],_.flags|=16):v.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=ur(_,w),_.index=0,_.sibling=null,_}function i(_,w,v){return _.index=v,t?(v=_.alternate,v!==null?(v=v.index,v<w?(_.flags|=2,w):v):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function a(_,w,v,b){return w===null||w.tag!==6?(w=Zc(v,_.mode,b),w.return=_,w):(w=s(w,v),w.return=_,w)}function l(_,w,v,b){var D=v.type;return D===vs?h(_,w,v.props.children,b,v.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Gn&&uy(D)===w.type)?(b=s(w,v.props),b.ref=ji(_,w,v),b.return=_,b):(b=ml(v.type,v.key,v.props,null,_.mode,b),b.ref=ji(_,w,v),b.return=_,b)}function c(_,w,v,b){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=eh(v,_.mode,b),w.return=_,w):(w=s(w,v.children||[]),w.return=_,w)}function h(_,w,v,b,D){return w===null||w.tag!==7?(w=$r(v,_.mode,b,D),w.return=_,w):(w=s(w,v),w.return=_,w)}function d(_,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Zc(""+w,_.mode,v),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ma:return v=ml(w.type,w.key,w.props,null,_.mode,v),v.ref=ji(_,null,w),v.return=_,v;case ys:return w=eh(w,_.mode,v),w.return=_,w;case Gn:var b=w._init;return d(_,b(w._payload),v)}if(Wi(w)||Vi(w))return w=$r(w,_.mode,v,null),w.return=_,w;Ka(_,w)}return null}function p(_,w,v,b){var D=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return D!==null?null:a(_,w,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ma:return v.key===D?l(_,w,v,b):null;case ys:return v.key===D?c(_,w,v,b):null;case Gn:return D=v._init,p(_,w,D(v._payload),b)}if(Wi(v)||Vi(v))return D!==null?null:h(_,w,v,b,null);Ka(_,v)}return null}function g(_,w,v,b,D){if(typeof b=="string"&&b!==""||typeof b=="number")return _=_.get(v)||null,a(w,_,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ma:return _=_.get(b.key===null?v:b.key)||null,l(w,_,b,D);case ys:return _=_.get(b.key===null?v:b.key)||null,c(w,_,b,D);case Gn:var O=b._init;return g(_,w,v,O(b._payload),D)}if(Wi(b)||Vi(b))return _=_.get(v)||null,h(w,_,b,D,null);Ka(w,b)}return null}function T(_,w,v,b){for(var D=null,O=null,C=w,y=w=0,P=null;C!==null&&y<v.length;y++){C.index>y?(P=C,C=null):P=C.sibling;var N=p(_,C,v[y],b);if(N===null){C===null&&(C=P);break}t&&C&&N.alternate===null&&e(_,C),w=i(N,w,y),O===null?D=N:O.sibling=N,O=N,C=P}if(y===v.length)return n(_,C),xe&&br(_,y),D;if(C===null){for(;y<v.length;y++)C=d(_,v[y],b),C!==null&&(w=i(C,w,y),O===null?D=C:O.sibling=C,O=C);return xe&&br(_,y),D}for(C=r(_,C);y<v.length;y++)P=g(C,_,y,v[y],b),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?y:P.key),w=i(P,w,y),O===null?D=P:O.sibling=P,O=P);return t&&C.forEach(function(R){return e(_,R)}),xe&&br(_,y),D}function A(_,w,v,b){var D=Vi(v);if(typeof D!="function")throw Error(U(150));if(v=D.call(v),v==null)throw Error(U(151));for(var O=D=null,C=w,y=w=0,P=null,N=v.next();C!==null&&!N.done;y++,N=v.next()){C.index>y?(P=C,C=null):P=C.sibling;var R=p(_,C,N.value,b);if(R===null){C===null&&(C=P);break}t&&C&&R.alternate===null&&e(_,C),w=i(R,w,y),O===null?D=R:O.sibling=R,O=R,C=P}if(N.done)return n(_,C),xe&&br(_,y),D;if(C===null){for(;!N.done;y++,N=v.next())N=d(_,N.value,b),N!==null&&(w=i(N,w,y),O===null?D=N:O.sibling=N,O=N);return xe&&br(_,y),D}for(C=r(_,C);!N.done;y++,N=v.next())N=g(C,_,y,N.value,b),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?y:N.key),w=i(N,w,y),O===null?D=N:O.sibling=N,O=N);return t&&C.forEach(function(k){return e(_,k)}),xe&&br(_,y),D}function I(_,w,v,b){if(typeof v=="object"&&v!==null&&v.type===vs&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ma:e:{for(var D=v.key,O=w;O!==null;){if(O.key===D){if(D=v.type,D===vs){if(O.tag===7){n(_,O.sibling),w=s(O,v.props.children),w.return=_,_=w;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Gn&&uy(D)===O.type){n(_,O.sibling),w=s(O,v.props),w.ref=ji(_,O,v),w.return=_,_=w;break e}n(_,O);break}else e(_,O);O=O.sibling}v.type===vs?(w=$r(v.props.children,_.mode,b,v.key),w.return=_,_=w):(b=ml(v.type,v.key,v.props,null,_.mode,b),b.ref=ji(_,w,v),b.return=_,_=b)}return o(_);case ys:e:{for(O=v.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){n(_,w.sibling),w=s(w,v.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=eh(v,_.mode,b),w.return=_,_=w}return o(_);case Gn:return O=v._init,I(_,w,O(v._payload),b)}if(Wi(v))return T(_,w,v,b);if(Vi(v))return A(_,w,v,b);Ka(_,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,v),w.return=_,_=w):(n(_,w),w=Zc(v,_.mode,b),w.return=_,_=w),o(_)):n(_,w)}return I}var qs=d1(!0),f1=d1(!1),jl=Tr(null),Fl=null,Ps=null,Df=null;function Mf(){Df=Ps=Fl=null}function Lf(t){var e=jl.current;Te(jl),t._currentValue=e}function ed(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fs(t,e){Fl=t,Df=Ps=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function Yt(t){var e=t._currentValue;if(Df!==t)if(t={context:t,memoizedValue:e,next:null},Ps===null){if(Fl===null)throw Error(U(308));Ps=t,Fl.dependencies={lanes:0,firstContext:t}}else Ps=Ps.next=t;return e}var Or=null;function Of(t){Or===null?Or=[t]:Or.push(t)}function p1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Of(e)):(n.next=s.next,s.next=n),e.interleaved=n,Dn(t,r)}function Dn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qn=!1;function jf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Nn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Dn(t,n)}return s=r.interleaved,s===null?(e.next=e,Of(r)):(e.next=s.next,s.next=e),r.interleaved=e,Dn(t,n)}function ul(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xf(t,n)}}function cy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bl(t,e,n,r){var s=t.updateQueue;Qn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,h=c=l=null,a=i;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,A=a;switch(p=e,g=n,A.tag){case 1:if(T=A.payload,typeof T=="function"){d=T.call(g,d,p);break e}d=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=A.payload,p=typeof T=="function"?T.call(g,d,p):T,p==null)break e;d=Re({},d,p);break e;case 2:Qn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=d):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;p=a,a=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Yr|=o,t.lanes=o,t.memoizedState=d}}function hy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var ta={},mn=Tr(ta),Io=Tr(ta),Ro=Tr(ta);function jr(t){if(t===ta)throw Error(U(174));return t}function Ff(t,e){switch(_e(Ro,e),_e(Io,t),_e(mn,ta),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dh(e,t)}Te(mn),_e(mn,e)}function Gs(){Te(mn),Te(Io),Te(Ro)}function g1(t){jr(Ro.current);var e=jr(mn.current),n=Dh(e,t.type);e!==n&&(_e(Io,t),_e(mn,n))}function Bf(t){Io.current===t&&(Te(mn),Te(Io))}var Ae=Tr(0);function Ul(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qc=[];function Uf(){for(var t=0;t<qc.length;t++)qc[t]._workInProgressVersionPrimary=null;qc.length=0}var cl=Un.ReactCurrentDispatcher,Gc=Un.ReactCurrentBatchConfig,Qr=0,Ce=null,$e=null,Ge=null,zl=!1,ro=!1,No=0,AA=0;function lt(){throw Error(U(321))}function zf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function $f(t,e,n,r,s,i){if(Qr=i,Ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cl.current=t===null||t.memoizedState===null?RA:NA,t=n(r,s),ro){i=0;do{if(ro=!1,No=0,25<=i)throw Error(U(301));i+=1,Ge=$e=null,e.updateQueue=null,cl.current=kA,t=n(r,s)}while(ro)}if(cl.current=$l,e=$e!==null&&$e.next!==null,Qr=0,Ge=$e=Ce=null,zl=!1,e)throw Error(U(300));return t}function Wf(){var t=No!==0;return No=0,t}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ce.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Xt(){if($e===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ge===null?Ce.memoizedState:Ge.next;if(e!==null)Ge=e,$e=t;else{if(t===null)throw Error(U(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ge===null?Ce.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function ko(t,e){return typeof e=="function"?e(t):e}function Qc(t){var e=Xt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var h=c.lane;if((Qr&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Ce.lanes|=h,Yr|=h}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,an(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ce.lanes|=i,Yr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yc(t){var e=Xt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);an(i,e.memoizedState)||(Rt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function y1(){}function v1(t,e){var n=Ce,r=Xt(),s=e(),i=!an(r.memoizedState,s);if(i&&(r.memoizedState=s,Rt=!0),r=r.queue,Hf(E1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,bo(9,w1.bind(null,n,r,s,e),void 0,null),Qe===null)throw Error(U(349));Qr&30||_1(n,e,s)}return s}function _1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function w1(t,e,n,r){e.value=n,e.getSnapshot=r,T1(e)&&x1(t)}function E1(t,e,n){return n(function(){T1(e)&&x1(t)})}function T1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function x1(t){var e=Dn(t,1);e!==null&&on(e,t,1,-1)}function dy(t){var e=dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:t},e.queue=t,t=t.dispatch=IA.bind(null,Ce,t),[e.memoizedState,t]}function bo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function S1(){return Xt().memoizedState}function hl(t,e,n,r){var s=dn();Ce.flags|=t,s.memoizedState=bo(1|e,n,void 0,r===void 0?null:r)}function Au(t,e,n,r){var s=Xt();r=r===void 0?null:r;var i=void 0;if($e!==null){var o=$e.memoizedState;if(i=o.destroy,r!==null&&zf(r,o.deps)){s.memoizedState=bo(e,n,i,r);return}}Ce.flags|=t,s.memoizedState=bo(1|e,n,i,r)}function fy(t,e){return hl(8390656,8,t,e)}function Hf(t,e){return Au(2048,8,t,e)}function A1(t,e){return Au(4,2,t,e)}function P1(t,e){return Au(4,4,t,e)}function C1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function I1(t,e,n){return n=n!=null?n.concat([t]):null,Au(4,4,C1.bind(null,e,t),n)}function Kf(){}function R1(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function N1(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function k1(t,e,n){return Qr&21?(an(n,e)||(n=L_(),Ce.lanes|=n,Yr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function PA(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=Gc.transition;Gc.transition={};try{t(!1),e()}finally{fe=n,Gc.transition=r}}function b1(){return Xt().memoizedState}function CA(t,e,n){var r=lr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},V1(t))D1(e,n);else if(n=p1(t,e,n,r),n!==null){var s=wt();on(n,t,r,s),M1(n,e,r)}}function IA(t,e,n){var r=lr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(V1(t))D1(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,an(a,o)){var l=e.interleaved;l===null?(s.next=s,Of(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=p1(t,e,s,r),n!==null&&(s=wt(),on(n,t,r,s),M1(n,e,r))}}function V1(t){var e=t.alternate;return t===Ce||e!==null&&e===Ce}function D1(t,e){ro=zl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function M1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xf(t,n)}}var $l={readContext:Yt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},RA={readContext:Yt,useCallback:function(t,e){return dn().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:fy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hl(4194308,4,C1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hl(4194308,4,t,e)},useInsertionEffect:function(t,e){return hl(4,2,t,e)},useMemo:function(t,e){var n=dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=CA.bind(null,Ce,t),[r.memoizedState,t]},useRef:function(t){var e=dn();return t={current:t},e.memoizedState=t},useState:dy,useDebugValue:Kf,useDeferredValue:function(t){return dn().memoizedState=t},useTransition:function(){var t=dy(!1),e=t[0];return t=PA.bind(null,t[1]),dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ce,s=dn();if(xe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Qe===null)throw Error(U(349));Qr&30||_1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,fy(E1.bind(null,r,i,t),[t]),r.flags|=2048,bo(9,w1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=dn(),e=Qe.identifierPrefix;if(xe){var n=Rn,r=In;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=No++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=AA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NA={readContext:Yt,useCallback:R1,useContext:Yt,useEffect:Hf,useImperativeHandle:I1,useInsertionEffect:A1,useLayoutEffect:P1,useMemo:N1,useReducer:Qc,useRef:S1,useState:function(){return Qc(ko)},useDebugValue:Kf,useDeferredValue:function(t){var e=Xt();return k1(e,$e.memoizedState,t)},useTransition:function(){var t=Qc(ko)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:y1,useSyncExternalStore:v1,useId:b1,unstable_isNewReconciler:!1},kA={readContext:Yt,useCallback:R1,useContext:Yt,useEffect:Hf,useImperativeHandle:I1,useInsertionEffect:A1,useLayoutEffect:P1,useMemo:N1,useReducer:Yc,useRef:S1,useState:function(){return Yc(ko)},useDebugValue:Kf,useDeferredValue:function(t){var e=Xt();return $e===null?e.memoizedState=t:k1(e,$e.memoizedState,t)},useTransition:function(){var t=Yc(ko)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:y1,useSyncExternalStore:v1,useId:b1,unstable_isNewReconciler:!1};function tn(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function td(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pu={isMounted:function(t){return(t=t._reactInternals)?rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),s=lr(t),i=Nn(r,s);i.payload=e,n!=null&&(i.callback=n),e=or(t,i,s),e!==null&&(on(e,t,s,r),ul(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),s=lr(t),i=Nn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=or(t,i,s),e!==null&&(on(e,t,s,r),ul(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=lr(t),s=Nn(n,r);s.tag=2,e!=null&&(s.callback=e),e=or(t,s,r),e!==null&&(on(e,t,r,n),ul(e,t,r))}};function py(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!So(n,r)||!So(s,i):!0}function L1(t,e,n){var r=!1,s=mr,i=e.contextType;return typeof i=="object"&&i!==null?i=Yt(i):(s=bt(e)?qr:mt.current,r=e.contextTypes,i=(r=r!=null)?Hs(t,s):mr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function my(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pu.enqueueReplaceState(e,e.state,null)}function nd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},jf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Yt(i):(i=bt(e)?qr:mt.current,s.context=Hs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(td(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Pu.enqueueReplaceState(s,s.state,null),Bl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Qs(t,e){try{var n="",r=e;do n+=i2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Xc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bA=typeof WeakMap=="function"?WeakMap:Map;function O1(t,e,n){n=Nn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Hl||(Hl=!0,fd=r),rd(t,e)},n}function j1(t,e,n){n=Nn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){rd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){rd(t,e),typeof r!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bA;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=KA.bind(null,t,e,n),e.then(t,t))}function yy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Nn(-1,1),e.tag=2,or(n,e,1))),n.lanes|=1),t)}var VA=Un.ReactCurrentOwner,Rt=!1;function vt(t,e,n,r){e.child=t===null?f1(e,null,n,r):qs(e,t.child,n,r)}function _y(t,e,n,r,s){n=n.render;var i=e.ref;return Fs(e,s),r=$f(t,e,n,r,i,s),n=Wf(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mn(t,e,s)):(xe&&n&&kf(e),e.flags|=1,vt(t,e,r,s),e.child)}function wy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ep(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,F1(t,e,i,r,s)):(t=ml(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:So,n(o,r)&&t.ref===e.ref)return Mn(t,e,s)}return e.flags|=1,t=ur(i,r),t.ref=e.ref,t.return=e,e.child=t}function F1(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(So(i,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,Mn(t,e,s)}return sd(t,e,n,r,s)}function B1(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Is,Mt),Mt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(Is,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(Is,Mt),Mt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_e(Is,Mt),Mt|=r;return vt(t,e,s,n),e.child}function U1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sd(t,e,n,r,s){var i=bt(n)?qr:mt.current;return i=Hs(e,i),Fs(e,s),n=$f(t,e,n,r,i,s),r=Wf(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mn(t,e,s)):(xe&&r&&kf(e),e.flags|=1,vt(t,e,n,s),e.child)}function Ey(t,e,n,r,s){if(bt(n)){var i=!0;Ml(e)}else i=!1;if(Fs(e,s),e.stateNode===null)dl(t,e),L1(e,n,r),nd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Yt(c):(c=bt(n)?qr:mt.current,c=Hs(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&my(e,o,r,c),Qn=!1;var p=e.memoizedState;o.state=p,Bl(e,r,o,s),l=e.memoizedState,a!==r||p!==l||kt.current||Qn?(typeof h=="function"&&(td(e,n,h,r),l=e.memoizedState),(a=Qn||py(e,n,a,r,p,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,m1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:tn(e.type,a),o.props=c,d=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Yt(l):(l=bt(n)?qr:mt.current,l=Hs(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||p!==l)&&my(e,o,r,l),Qn=!1,p=e.memoizedState,o.state=p,Bl(e,r,o,s);var T=e.memoizedState;a!==d||p!==T||kt.current||Qn?(typeof g=="function"&&(td(e,n,g,r),T=e.memoizedState),(c=Qn||py(e,n,c,r,p,T,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return id(t,e,n,r,i,s)}function id(t,e,n,r,s,i){U1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&oy(e,n,!1),Mn(t,e,i);r=e.stateNode,VA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=qs(e,t.child,null,i),e.child=qs(e,null,a,i)):vt(t,e,a,i),e.memoizedState=r.state,s&&oy(e,n,!0),e.child}function z1(t){var e=t.stateNode;e.pendingContext?iy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&iy(t,e.context,!1),Ff(t,e.containerInfo)}function Ty(t,e,n,r,s){return Ks(),Vf(s),e.flags|=256,vt(t,e,n,r),e.child}var od={dehydrated:null,treeContext:null,retryLane:0};function ad(t){return{baseLanes:t,cachePool:null,transitions:null}}function $1(t,e,n){var r=e.pendingProps,s=Ae.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Ae,s&1),t===null)return Zh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ru(o,r,0,null),t=$r(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ad(n),e.memoizedState=od,t):qf(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return DA(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ur(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=ur(a,i):(i=$r(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ad(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=od,r}return i=t.child,t=i.sibling,r=ur(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qf(t,e){return e=Ru({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qa(t,e,n,r){return r!==null&&Vf(r),qs(e,t.child,null,n),t=qf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DA(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Xc(Error(U(422))),qa(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ru({mode:"visible",children:r.children},s,0,null),i=$r(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&qs(e,t.child,null,o),e.child.memoizedState=ad(o),e.memoizedState=od,i);if(!(e.mode&1))return qa(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(U(419)),r=Xc(i,r,void 0),qa(t,e,o,r)}if(a=(o&t.childLanes)!==0,Rt||a){if(r=Qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Dn(t,s),on(r,t,s,-1))}return Zf(),r=Xc(Error(U(421))),qa(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=qA.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Lt=ir(s.nextSibling),jt=e,xe=!0,rn=null,t!==null&&(Ht[Kt++]=In,Ht[Kt++]=Rn,Ht[Kt++]=Gr,In=t.id,Rn=t.overflow,Gr=e),e=qf(e,r.children),e.flags|=4096,e)}function xy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ed(t.return,e,n)}function Jc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function W1(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(vt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&xy(t,n,e);else if(t.tag===19)xy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ul(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Jc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ul(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Jc(e,!0,n,null,i);break;case"together":Jc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function MA(t,e,n){switch(e.tag){case 3:z1(e),Ks();break;case 5:g1(e);break;case 1:bt(e.type)&&Ml(e);break;case 4:Ff(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_e(jl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?$1(t,e,n):(_e(Ae,Ae.current&1),t=Mn(t,e,n),t!==null?t.sibling:null);_e(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return W1(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,B1(t,e,n)}return Mn(t,e,n)}var H1,ld,K1,q1;H1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ld=function(){};K1=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,jr(mn.current);var i=null;switch(n){case"input":s=Nh(t,s),r=Nh(t,r),i=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),i=[];break;case"textarea":s=Vh(t,s),r=Vh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vl)}Mh(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(yo.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(yo.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ee("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};q1=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fi(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function LA(t,e,n){var r=e.pendingProps;switch(bf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return bt(e.type)&&Dl(),ut(e),null;case 3:return r=e.stateNode,Gs(),Te(kt),Te(mt),Uf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ha(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rn!==null&&(gd(rn),rn=null))),ld(t,e),ut(e),null;case 5:Bf(e);var s=jr(Ro.current);if(n=e.type,t!==null&&e.stateNode!=null)K1(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ut(e),null}if(t=jr(mn.current),Ha(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[fn]=e,r[Co]=i,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<Ki.length;s++)Ee(Ki[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":bg(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":Dg(r,i),Ee("invalid",r)}Mh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Wa(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Wa(r.textContent,a,t),s=["children",""+a]):yo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":La(r),Vg(r,i,!0);break;case"textarea":La(r),Mg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Vl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=E_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fn]=e,t[Co]=r,H1(t,e,!1,!1),e.stateNode=t;e:{switch(o=Lh(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),s=r;break;case"iframe":case"object":case"embed":Ee("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ki.length;s++)Ee(Ki[s],t);s=r;break;case"source":Ee("error",t),s=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),s=r;break;case"details":Ee("toggle",t),s=r;break;case"input":bg(t,r),s=Nh(t,r),Ee("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":Dg(t,r),s=Vh(t,r),Ee("invalid",t);break;default:s=r}Mh(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?S_(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&T_(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&vo(t,l):typeof l=="number"&&vo(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(yo.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ee("scroll",t):l!=null&&yf(t,i,l,o))}switch(n){case"input":La(t),Vg(t,r,!1);break;case"textarea":La(t),Mg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ms(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ms(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Vl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)q1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=jr(Ro.current),jr(mn.current),Ha(e)){if(r=e.stateNode,n=e.memoizedProps,r[fn]=e,(i=r.nodeValue!==n)&&(t=jt,t!==null))switch(t.tag){case 3:Wa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=e,e.stateNode=r}return ut(e),null;case 13:if(Te(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&Lt!==null&&e.mode&1&&!(e.flags&128))h1(),Ks(),e.flags|=98560,i=!1;else if(i=Ha(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[fn]=e}else Ks(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),i=!1}else rn!==null&&(gd(rn),rn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?He===0&&(He=3):Zf())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return Gs(),ld(t,e),t===null&&Ao(e.stateNode.containerInfo),ut(e),null;case 10:return Lf(e.type._context),ut(e),null;case 17:return bt(e.type)&&Dl(),ut(e),null;case 19:if(Te(Ae),i=e.memoizedState,i===null)return ut(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Fi(i,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ul(t),o!==null){for(e.flags|=128,Fi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Ae,Ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>Ys&&(e.flags|=128,r=!0,Fi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ul(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xe)return ut(e),null}else 2*je()-i.renderingStartTime>Ys&&n!==1073741824&&(e.flags|=128,r=!0,Fi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,n=Ae.current,_e(Ae,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return Jf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function OA(t,e){switch(bf(e),e.tag){case 1:return bt(e.type)&&Dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Gs(),Te(kt),Te(mt),Uf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bf(e),null;case 13:if(Te(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ks()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Ae),null;case 4:return Gs(),null;case 10:return Lf(e.type._context),null;case 22:case 23:return Jf(),null;case 24:return null;default:return null}}var Ga=!1,dt=!1,jA=typeof WeakSet=="function"?WeakSet:Set,K=null;function Cs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function ud(t,e,n){try{n()}catch(r){De(t,e,r)}}var Sy=!1;function FA(t,e){if(Kh=Nl,t=J_(),Nf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,d=t,p=null;t:for(;;){for(var g;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)p=d,d=g;for(;;){if(d===t)break t;if(p===n&&++c===s&&(a=o),p===i&&++h===r&&(l=o),(g=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(qh={focusedElem:t,selectionRange:n},Nl=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var A=T.memoizedProps,I=T.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?A:tn(e.type,A),I);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(b){De(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return T=Sy,Sy=!1,T}function so(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&ud(e,n,i)}s=s.next}while(s!==r)}}function Cu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function cd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function G1(t){var e=t.alternate;e!==null&&(t.alternate=null,G1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[Co],delete e[Yh],delete e[EA],delete e[TA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Q1(t){return t.tag===5||t.tag===3||t.tag===4}function Ay(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Q1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function hd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vl));else if(r!==4&&(t=t.child,t!==null))for(hd(t,e,n),t=t.sibling;t!==null;)hd(t,e,n),t=t.sibling}function dd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(dd(t,e,n),t=t.sibling;t!==null;)dd(t,e,n),t=t.sibling}var Xe=null,nn=!1;function Hn(t,e,n){for(n=n.child;n!==null;)Y1(t,e,n),n=n.sibling}function Y1(t,e,n){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(_u,n)}catch{}switch(n.tag){case 5:dt||Cs(n,e);case 6:var r=Xe,s=nn;Xe=null,Hn(t,e,n),Xe=r,nn=s,Xe!==null&&(nn?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(nn?(t=Xe,n=n.stateNode,t.nodeType===8?Hc(t.parentNode,n):t.nodeType===1&&Hc(t,n),To(t)):Hc(Xe,n.stateNode));break;case 4:r=Xe,s=nn,Xe=n.stateNode.containerInfo,nn=!0,Hn(t,e,n),Xe=r,nn=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&ud(n,e,o),s=s.next}while(s!==r)}Hn(t,e,n);break;case 1:if(!dt&&(Cs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){De(n,e,a)}Hn(t,e,n);break;case 21:Hn(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,Hn(t,e,n),dt=r):Hn(t,e,n);break;default:Hn(t,e,n)}}function Py(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jA),e.forEach(function(r){var s=GA.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xe=a.stateNode,nn=!1;break e;case 3:Xe=a.stateNode.containerInfo,nn=!0;break e;case 4:Xe=a.stateNode.containerInfo,nn=!0;break e}a=a.return}if(Xe===null)throw Error(U(160));Y1(i,o,s),Xe=null,nn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){De(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)X1(e,t),e=e.sibling}function X1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(e,t),hn(t),r&4){try{so(3,t,t.return),Cu(3,t)}catch(A){De(t,t.return,A)}try{so(5,t,t.return)}catch(A){De(t,t.return,A)}}break;case 1:Zt(e,t),hn(t),r&512&&n!==null&&Cs(n,n.return);break;case 5:if(Zt(e,t),hn(t),r&512&&n!==null&&Cs(n,n.return),t.flags&32){var s=t.stateNode;try{vo(s,"")}catch(A){De(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&__(s,i),Lh(a,o);var c=Lh(a,i);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?S_(s,d):h==="dangerouslySetInnerHTML"?T_(s,d):h==="children"?vo(s,d):yf(s,h,d,c)}switch(a){case"input":kh(s,i);break;case"textarea":w_(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?Ms(s,!!i.multiple,g,!1):p!==!!i.multiple&&(i.defaultValue!=null?Ms(s,!!i.multiple,i.defaultValue,!0):Ms(s,!!i.multiple,i.multiple?[]:"",!1))}s[Co]=i}catch(A){De(t,t.return,A)}}break;case 6:if(Zt(e,t),hn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(A){De(t,t.return,A)}}break;case 3:if(Zt(e,t),hn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{To(e.containerInfo)}catch(A){De(t,t.return,A)}break;case 4:Zt(e,t),hn(t);break;case 13:Zt(e,t),hn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Yf=je())),r&4&&Py(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(c=dt)||h,Zt(e,t),dt=c):Zt(e,t),hn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(K=t,h=t.child;h!==null;){for(d=K=h;K!==null;){switch(p=K,g=p.child,p.tag){case 0:case 11:case 14:case 15:so(4,p,p.return);break;case 1:Cs(p,p.return);var T=p.stateNode;if(typeof T.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(A){De(r,n,A)}}break;case 5:Cs(p,p.return);break;case 22:if(p.memoizedState!==null){Iy(d);continue}}g!==null?(g.return=p,K=g):Iy(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=x_("display",o))}catch(A){De(t,t.return,A)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(A){De(t,t.return,A)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Zt(e,t),hn(t),r&4&&Py(t);break;case 21:break;default:Zt(e,t),hn(t)}}function hn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Q1(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(vo(s,""),r.flags&=-33);var i=Ay(t);dd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ay(t);hd(t,a,o);break;default:throw Error(U(161))}}catch(l){De(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BA(t,e,n){K=t,J1(t)}function J1(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var s=K,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ga;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||dt;a=Ga;var c=dt;if(Ga=o,(dt=l)&&!c)for(K=s;K!==null;)o=K,l=o.child,o.tag===22&&o.memoizedState!==null?Ry(s):l!==null?(l.return=o,K=l):Ry(s);for(;i!==null;)K=i,J1(i),i=i.sibling;K=s,Ga=a,dt=c}Cy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,K=i):Cy(t)}}function Cy(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||Cu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&hy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}hy(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&To(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}dt||e.flags&512&&cd(e)}catch(p){De(e,e.return,p)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function Iy(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function Ry(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cu(4,e)}catch(l){De(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){De(e,s,l)}}var i=e.return;try{cd(e)}catch(l){De(e,i,l)}break;case 5:var o=e.return;try{cd(e)}catch(l){De(e,o,l)}}}catch(l){De(e,e.return,l)}if(e===t){K=null;break}var a=e.sibling;if(a!==null){a.return=e.return,K=a;break}K=e.return}}var UA=Math.ceil,Wl=Un.ReactCurrentDispatcher,Gf=Un.ReactCurrentOwner,Gt=Un.ReactCurrentBatchConfig,le=0,Qe=null,Ue=null,tt=0,Mt=0,Is=Tr(0),He=0,Vo=null,Yr=0,Iu=0,Qf=0,io=null,Ct=null,Yf=0,Ys=1/0,Pn=null,Hl=!1,fd=null,ar=null,Qa=!1,Zn=null,Kl=0,oo=0,pd=null,fl=-1,pl=0;function wt(){return le&6?je():fl!==-1?fl:fl=je()}function lr(t){return t.mode&1?le&2&&tt!==0?tt&-tt:SA.transition!==null?(pl===0&&(pl=L_()),pl):(t=fe,t!==0||(t=window.event,t=t===void 0?16:$_(t.type)),t):1}function on(t,e,n,r){if(50<oo)throw oo=0,pd=null,Error(U(185));Jo(t,n,r),(!(le&2)||t!==Qe)&&(t===Qe&&(!(le&2)&&(Iu|=n),He===4&&Xn(t,tt)),Vt(t,r),n===1&&le===0&&!(e.mode&1)&&(Ys=je()+500,Su&&xr()))}function Vt(t,e){var n=t.callbackNode;S2(t,e);var r=Rl(t,t===Qe?tt:0);if(r===0)n!==null&&jg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jg(n),e===1)t.tag===0?xA(Ny.bind(null,t)):l1(Ny.bind(null,t)),_A(function(){!(le&6)&&xr()}),n=null;else{switch(O_(r)){case 1:n=Tf;break;case 4:n=D_;break;case 16:n=Il;break;case 536870912:n=M_;break;default:n=Il}n=ow(n,Z1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Z1(t,e){if(fl=-1,pl=0,le&6)throw Error(U(327));var n=t.callbackNode;if(Bs()&&t.callbackNode!==n)return null;var r=Rl(t,t===Qe?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ql(t,r);else{e=r;var s=le;le|=2;var i=tw();(Qe!==t||tt!==e)&&(Pn=null,Ys=je()+500,zr(t,e));do try{WA();break}catch(a){ew(t,a)}while(!0);Mf(),Wl.current=i,le=s,Ue!==null?e=0:(Qe=null,tt=0,e=He)}if(e!==0){if(e===2&&(s=Uh(t),s!==0&&(r=s,e=md(t,s))),e===1)throw n=Vo,zr(t,0),Xn(t,r),Vt(t,je()),n;if(e===6)Xn(t,r);else{if(s=t.current.alternate,!(r&30)&&!zA(s)&&(e=ql(t,r),e===2&&(i=Uh(t),i!==0&&(r=i,e=md(t,i))),e===1))throw n=Vo,zr(t,0),Xn(t,r),Vt(t,je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Vr(t,Ct,Pn);break;case 3:if(Xn(t,r),(r&130023424)===r&&(e=Yf+500-je(),10<e)){if(Rl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Qh(Vr.bind(null,t,Ct,Pn),e);break}Vr(t,Ct,Pn);break;case 4:if(Xn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-sn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*UA(r/1960))-r,10<r){t.timeoutHandle=Qh(Vr.bind(null,t,Ct,Pn),r);break}Vr(t,Ct,Pn);break;case 5:Vr(t,Ct,Pn);break;default:throw Error(U(329))}}}return Vt(t,je()),t.callbackNode===n?Z1.bind(null,t):null}function md(t,e){var n=io;return t.current.memoizedState.isDehydrated&&(zr(t,e).flags|=256),t=ql(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&gd(e)),t}function gd(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function zA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!an(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xn(t,e){for(e&=~Qf,e&=~Iu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sn(e),r=1<<n;t[n]=-1,e&=~r}}function Ny(t){if(le&6)throw Error(U(327));Bs();var e=Rl(t,0);if(!(e&1))return Vt(t,je()),null;var n=ql(t,e);if(t.tag!==0&&n===2){var r=Uh(t);r!==0&&(e=r,n=md(t,r))}if(n===1)throw n=Vo,zr(t,0),Xn(t,e),Vt(t,je()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vr(t,Ct,Pn),Vt(t,je()),null}function Xf(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Ys=je()+500,Su&&xr())}}function Xr(t){Zn!==null&&Zn.tag===0&&!(le&6)&&Bs();var e=le;le|=1;var n=Gt.transition,r=fe;try{if(Gt.transition=null,fe=1,t)return t()}finally{fe=r,Gt.transition=n,le=e,!(le&6)&&xr()}}function Jf(){Mt=Is.current,Te(Is)}function zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,vA(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(bf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dl();break;case 3:Gs(),Te(kt),Te(mt),Uf();break;case 5:Bf(r);break;case 4:Gs();break;case 13:Te(Ae);break;case 19:Te(Ae);break;case 10:Lf(r.type._context);break;case 22:case 23:Jf()}n=n.return}if(Qe=t,Ue=t=ur(t.current,null),tt=Mt=e,He=0,Vo=null,Qf=Iu=Yr=0,Ct=io=null,Or!==null){for(e=0;e<Or.length;e++)if(n=Or[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Or=null}return t}function ew(t,e){do{var n=Ue;try{if(Mf(),cl.current=$l,zl){for(var r=Ce.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}zl=!1}if(Qr=0,Ge=$e=Ce=null,ro=!1,No=0,Gf.current=null,n===null||n.return===null){He=1,Vo=e,Ue=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=tt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=yy(o);if(g!==null){g.flags&=-257,vy(g,o,a,i,e),g.mode&1&&gy(i,c,e),e=g,l=c;var T=e.updateQueue;if(T===null){var A=new Set;A.add(l),e.updateQueue=A}else T.add(l);break e}else{if(!(e&1)){gy(i,c,e),Zf();break e}l=Error(U(426))}}else if(xe&&a.mode&1){var I=yy(o);if(I!==null){!(I.flags&65536)&&(I.flags|=256),vy(I,o,a,i,e),Vf(Qs(l,a));break e}}i=l=Qs(l,a),He!==4&&(He=2),io===null?io=[i]:io.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=O1(i,l,e);cy(i,_);break e;case 1:a=l;var w=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ar===null||!ar.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=j1(i,a,e);cy(i,b);break e}}i=i.return}while(i!==null)}rw(n)}catch(D){e=D,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function tw(){var t=Wl.current;return Wl.current=$l,t===null?$l:t}function Zf(){(He===0||He===3||He===2)&&(He=4),Qe===null||!(Yr&268435455)&&!(Iu&268435455)||Xn(Qe,tt)}function ql(t,e){var n=le;le|=2;var r=tw();(Qe!==t||tt!==e)&&(Pn=null,zr(t,e));do try{$A();break}catch(s){ew(t,s)}while(!0);if(Mf(),le=n,Wl.current=r,Ue!==null)throw Error(U(261));return Qe=null,tt=0,He}function $A(){for(;Ue!==null;)nw(Ue)}function WA(){for(;Ue!==null&&!m2();)nw(Ue)}function nw(t){var e=iw(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?rw(t):Ue=e,Gf.current=null}function rw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=OA(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Ue=null;return}}else if(n=LA(n,e,Mt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);He===0&&(He=5)}function Vr(t,e,n){var r=fe,s=Gt.transition;try{Gt.transition=null,fe=1,HA(t,e,n,r)}finally{Gt.transition=s,fe=r}return null}function HA(t,e,n,r){do Bs();while(Zn!==null);if(le&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(A2(t,i),t===Qe&&(Ue=Qe=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qa||(Qa=!0,ow(Il,function(){return Bs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Gt.transition,Gt.transition=null;var o=fe;fe=1;var a=le;le|=4,Gf.current=null,FA(t,n),X1(n,t),hA(qh),Nl=!!Kh,qh=Kh=null,t.current=n,BA(n),g2(),le=a,fe=o,Gt.transition=i}else t.current=n;if(Qa&&(Qa=!1,Zn=t,Kl=s),i=t.pendingLanes,i===0&&(ar=null),_2(n.stateNode),Vt(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hl)throw Hl=!1,t=fd,fd=null,t;return Kl&1&&t.tag!==0&&Bs(),i=t.pendingLanes,i&1?t===pd?oo++:(oo=0,pd=t):oo=0,xr(),null}function Bs(){if(Zn!==null){var t=O_(Kl),e=Gt.transition,n=fe;try{if(Gt.transition=null,fe=16>t?16:t,Zn===null)var r=!1;else{if(t=Zn,Zn=null,Kl=0,le&6)throw Error(U(331));var s=le;for(le|=4,K=t.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(K=c;K!==null;){var h=K;switch(h.tag){case 0:case 11:case 15:so(8,h,i)}var d=h.child;if(d!==null)d.return=h,K=d;else for(;K!==null;){h=K;var p=h.sibling,g=h.return;if(G1(h),h===c){K=null;break}if(p!==null){p.return=g,K=p;break}K=g}}}var T=i.alternate;if(T!==null){var A=T.child;if(A!==null){T.child=null;do{var I=A.sibling;A.sibling=null,A=I}while(A!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:so(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,K=_;break e}K=i.return}}var w=t.current;for(K=w;K!==null;){o=K;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,K=v;else e:for(o=w;K!==null;){if(a=K,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Cu(9,a)}}catch(D){De(a,a.return,D)}if(a===o){K=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,K=b;break e}K=a.return}}if(le=s,xr(),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(_u,t)}catch{}r=!0}return r}finally{fe=n,Gt.transition=e}}return!1}function ky(t,e,n){e=Qs(n,e),e=O1(t,e,1),t=or(t,e,1),e=wt(),t!==null&&(Jo(t,1,e),Vt(t,e))}function De(t,e,n){if(t.tag===3)ky(t,t,n);else for(;e!==null;){if(e.tag===3){ky(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ar===null||!ar.has(r))){t=Qs(n,t),t=j1(e,t,1),e=or(e,t,1),t=wt(),e!==null&&(Jo(e,1,t),Vt(e,t));break}}e=e.return}}function KA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(tt&n)===n&&(He===4||He===3&&(tt&130023424)===tt&&500>je()-Yf?zr(t,0):Qf|=n),Vt(t,e)}function sw(t,e){e===0&&(t.mode&1?(e=Fa,Fa<<=1,!(Fa&130023424)&&(Fa=4194304)):e=1);var n=wt();t=Dn(t,e),t!==null&&(Jo(t,e,n),Vt(t,n))}function qA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sw(t,n)}function GA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),sw(t,n)}var iw;iw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,MA(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,xe&&e.flags&1048576&&u1(e,Ol,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dl(t,e),t=e.pendingProps;var s=Hs(e,mt.current);Fs(e,n),s=$f(null,e,r,t,s,n);var i=Wf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(i=!0,Ml(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,jf(e),s.updater=Pu,e.stateNode=s,s._reactInternals=e,nd(e,r,t,n),e=id(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&kf(e),vt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=YA(r),t=tn(r,t),s){case 0:e=sd(null,e,r,t,n);break e;case 1:e=Ey(null,e,r,t,n);break e;case 11:e=_y(null,e,r,t,n);break e;case 14:e=wy(null,e,r,tn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),sd(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Ey(t,e,r,s,n);case 3:e:{if(z1(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,m1(t,e),Bl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Qs(Error(U(423)),e),e=Ty(t,e,r,n,s);break e}else if(r!==s){s=Qs(Error(U(424)),e),e=Ty(t,e,r,n,s);break e}else for(Lt=ir(e.stateNode.containerInfo.firstChild),jt=e,xe=!0,rn=null,n=f1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ks(),r===s){e=Mn(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return g1(e),t===null&&Zh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Gh(r,s)?o=null:i!==null&&Gh(r,i)&&(e.flags|=32),U1(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&Zh(e),null;case 13:return $1(t,e,n);case 4:return Ff(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qs(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),_y(t,e,r,s,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(jl,r._currentValue),r._currentValue=o,i!==null)if(an(i.value,o)){if(i.children===s.children&&!kt.current){e=Mn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Nn(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),ed(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ed(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}vt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Fs(e,n),s=Yt(s),r=r(s),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,s=tn(r,e.pendingProps),s=tn(r.type,s),wy(t,e,r,s,n);case 15:return F1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),dl(t,e),e.tag=1,bt(r)?(t=!0,Ml(e)):t=!1,Fs(e,n),L1(e,r,s),nd(e,r,s,n),id(null,e,r,!0,t,n);case 19:return W1(t,e,n);case 22:return B1(t,e,n)}throw Error(U(156,e.tag))};function ow(t,e){return V_(t,e)}function QA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qt(t,e,n,r){return new QA(t,e,n,r)}function ep(t){return t=t.prototype,!(!t||!t.isReactComponent)}function YA(t){if(typeof t=="function")return ep(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_f)return 11;if(t===wf)return 14}return 2}function ur(t,e){var n=t.alternate;return n===null?(n=qt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ml(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ep(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vs:return $r(n.children,s,i,e);case vf:o=8,s|=8;break;case Ph:return t=qt(12,n,e,s|2),t.elementType=Ph,t.lanes=i,t;case Ch:return t=qt(13,n,e,s),t.elementType=Ch,t.lanes=i,t;case Ih:return t=qt(19,n,e,s),t.elementType=Ih,t.lanes=i,t;case g_:return Ru(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case p_:o=10;break e;case m_:o=9;break e;case _f:o=11;break e;case wf:o=14;break e;case Gn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=qt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function $r(t,e,n,r){return t=qt(7,t,r,e),t.lanes=n,t}function Ru(t,e,n,r){return t=qt(22,t,r,e),t.elementType=g_,t.lanes=n,t.stateNode={isHidden:!1},t}function Zc(t,e,n){return t=qt(6,t,null,e),t.lanes=n,t}function eh(t,e,n){return e=qt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function XA(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dc(0),this.expirationTimes=Dc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tp(t,e,n,r,s,i,o,a,l){return t=new XA(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=qt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jf(i),t}function JA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ys,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function aw(t){if(!t)return mr;t=t._reactInternals;e:{if(rs(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(bt(n))return a1(t,n,e)}return e}function lw(t,e,n,r,s,i,o,a,l){return t=tp(n,r,!0,t,s,i,o,a,l),t.context=aw(null),n=t.current,r=wt(),s=lr(n),i=Nn(r,s),i.callback=e??null,or(n,i,s),t.current.lanes=s,Jo(t,s,r),Vt(t,r),t}function Nu(t,e,n,r){var s=e.current,i=wt(),o=lr(s);return n=aw(n),e.context===null?e.context=n:e.pendingContext=n,e=Nn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=or(s,e,o),t!==null&&(on(t,s,o,i),ul(t,s,o)),o}function Gl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function by(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function np(t,e){by(t,e),(t=t.alternate)&&by(t,e)}function ZA(){return null}var uw=typeof reportError=="function"?reportError:function(t){console.error(t)};function rp(t){this._internalRoot=t}ku.prototype.render=rp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Nu(t,e,null,null)};ku.prototype.unmount=rp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xr(function(){Nu(null,t,null,null)}),e[Vn]=null}};function ku(t){this._internalRoot=t}ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=B_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yn.length&&e!==0&&e<Yn[n].priority;n++);Yn.splice(n,0,t),n===0&&z_(t)}};function sp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vy(){}function eP(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Gl(o);i.call(c)}}var o=lw(e,r,t,0,null,!1,!1,"",Vy);return t._reactRootContainer=o,t[Vn]=o.current,Ao(t.nodeType===8?t.parentNode:t),Xr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Gl(l);a.call(c)}}var l=tp(t,0,!1,null,null,!1,!1,"",Vy);return t._reactRootContainer=l,t[Vn]=l.current,Ao(t.nodeType===8?t.parentNode:t),Xr(function(){Nu(e,l,n,r)}),l}function Vu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Gl(o);a.call(l)}}Nu(e,o,t,s)}else o=eP(n,e,t,s,r);return Gl(o)}j_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hi(e.pendingLanes);n!==0&&(xf(e,n|1),Vt(e,je()),!(le&6)&&(Ys=je()+500,xr()))}break;case 13:Xr(function(){var r=Dn(t,1);if(r!==null){var s=wt();on(r,t,1,s)}}),np(t,1)}};Sf=function(t){if(t.tag===13){var e=Dn(t,134217728);if(e!==null){var n=wt();on(e,t,134217728,n)}np(t,134217728)}};F_=function(t){if(t.tag===13){var e=lr(t),n=Dn(t,e);if(n!==null){var r=wt();on(n,t,e,r)}np(t,e)}};B_=function(){return fe};U_=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};jh=function(t,e,n){switch(e){case"input":if(kh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=xu(r);if(!s)throw Error(U(90));v_(r),kh(r,s)}}}break;case"textarea":w_(t,n);break;case"select":e=n.value,e!=null&&Ms(t,!!n.multiple,e,!1)}};C_=Xf;I_=Xr;var tP={usingClientEntryPoint:!1,Events:[ea,Ts,xu,A_,P_,Xf]},Bi={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nP={bundleType:Bi.bundleType,version:Bi.version,rendererPackageName:Bi.rendererPackageName,rendererConfig:Bi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Un.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=k_(t),t===null?null:t.stateNode},findFiberByHostInstance:Bi.findFiberByHostInstance||ZA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ya=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ya.isDisabled&&Ya.supportsFiber)try{_u=Ya.inject(nP),pn=Ya}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tP;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sp(e))throw Error(U(200));return JA(t,e,null,n)};Bt.createRoot=function(t,e){if(!sp(t))throw Error(U(299));var n=!1,r="",s=uw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=tp(t,1,!1,null,null,n,!1,r,s),t[Vn]=e.current,Ao(t.nodeType===8?t.parentNode:t),new rp(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=k_(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return Xr(t)};Bt.hydrate=function(t,e,n){if(!bu(e))throw Error(U(200));return Vu(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!sp(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=uw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lw(e,null,t,1,n??null,s,!1,i,o),t[Vn]=e.current,Ao(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new ku(e)};Bt.render=function(t,e,n){if(!bu(e))throw Error(U(200));return Vu(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!bu(t))throw Error(U(40));return t._reactRootContainer?(Xr(function(){Vu(null,null,t,!1,function(){t._reactRootContainer=null,t[Vn]=null})}),!0):!1};Bt.unstable_batchedUpdates=Xf;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!bu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Vu(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function cw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cw)}catch(t){console.error(t)}}cw(),c_.exports=Bt;var rP=c_.exports,Dy=rP;Sh.createRoot=Dy.createRoot,Sh.hydrateRoot=Dy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Do(){return Do=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Do.apply(this,arguments)}var er;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(er||(er={}));const My="popstate";function sP(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return yd("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ql(s)}return oP(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function iP(){return Math.random().toString(36).substr(2,8)}function Ly(t,e){return{usr:t.state,key:t.key,idx:e}}function yd(t,e,n,r){return n===void 0&&(n=null),Do({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ci(e):e,{state:n,key:e&&e.key||r||iP()})}function Ql(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ci(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function oP(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=er.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Do({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=er.Pop;let I=h(),_=I==null?null:I-c;c=I,l&&l({action:a,location:A.location,delta:_})}function p(I,_){a=er.Push;let w=yd(A.location,I,_);c=h()+1;let v=Ly(w,c),b=A.createHref(w);try{o.pushState(v,"",b)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(b)}i&&l&&l({action:a,location:A.location,delta:1})}function g(I,_){a=er.Replace;let w=yd(A.location,I,_);c=h();let v=Ly(w,c),b=A.createHref(w);o.replaceState(v,"",b),i&&l&&l({action:a,location:A.location,delta:0})}function T(I){let _=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof I=="string"?I:Ql(I);return w=w.replace(/ $/,"%20"),Me(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let A={get action(){return a},get location(){return t(s,o)},listen(I){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(My,d),l=I,()=>{s.removeEventListener(My,d),l=null}},createHref(I){return e(s,I)},createURL:T,encodeLocation(I){let _=T(I);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:g,go(I){return o.go(I)}};return A}var Oy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Oy||(Oy={}));function aP(t,e,n){return n===void 0&&(n="/"),lP(t,e,n)}function lP(t,e,n,r){let s=typeof e=="string"?ci(e):e,i=Xs(s.pathname||"/",n);if(i==null)return null;let o=dw(t);uP(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=wP(i);a=vP(o[l],c)}return a}function dw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Me(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=cr([r,l.relativePath]),h=n.concat(l);i.children&&i.children.length>0&&(Me(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),dw(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:gP(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of fw(i.path))s(i,o,l)}),e}function fw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=fw(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function uP(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:yP(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cP=/^:[\w-]+$/,hP=3,dP=2,fP=1,pP=10,mP=-2,jy=t=>t==="*";function gP(t,e){let n=t.split("/"),r=n.length;return n.some(jy)&&(r+=mP),e&&(r+=dP),n.filter(s=>!jy(s)).reduce((s,i)=>s+(cP.test(i)?hP:i===""?fP:pP),r)}function yP(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function vP(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",d=vd({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:cr([i,d.pathname]),pathnameBase:SP(cr([i,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(i=cr([i,d.pathnameBase]))}return o}function vd(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=_P(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let A=a[d]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const T=a[d];return g&&!T?c[p]=void 0:c[p]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function _P(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),hw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function wP(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Xs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function EP(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ci(t):t;return{pathname:n?n.startsWith("/")?n:TP(n,e):e,search:AP(r),hash:PP(s)}}function TP(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function th(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function xP(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function pw(t,e){let n=xP(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function mw(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ci(t):(s=Do({},t),Me(!s.pathname||!s.pathname.includes("?"),th("?","pathname","search",s)),Me(!s.pathname||!s.pathname.includes("#"),th("#","pathname","hash",s)),Me(!s.search||!s.search.includes("#"),th("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),d-=1;s.pathname=p.join("/")}a=d>=0?e[d]:"/"}let l=EP(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const cr=t=>t.join("/").replace(/\/\/+/g,"/"),SP=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),AP=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,PP=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function CP(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gw=["post","put","patch","delete"];new Set(gw);const IP=["get",...gw];new Set(IP);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Mo(){return Mo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mo.apply(this,arguments)}const Du=V.createContext(null),yw=V.createContext(null),Sr=V.createContext(null),Mu=V.createContext(null),ss=V.createContext({outlet:null,matches:[],isDataRoute:!1}),vw=V.createContext(null);function RP(t,e){let{relative:n}=e===void 0?{}:e;na()||Me(!1);let{basename:r,navigator:s}=V.useContext(Sr),{hash:i,pathname:o,search:a}=Lu(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:cr([r,o])),s.createHref({pathname:l,search:a,hash:i})}function na(){return V.useContext(Mu)!=null}function hi(){return na()||Me(!1),V.useContext(Mu).location}function _w(t){V.useContext(Sr).static||V.useLayoutEffect(t)}function ww(){let{isDataRoute:t}=V.useContext(ss);return t?zP():NP()}function NP(){na()||Me(!1);let t=V.useContext(Du),{basename:e,future:n,navigator:r}=V.useContext(Sr),{matches:s}=V.useContext(ss),{pathname:i}=hi(),o=JSON.stringify(pw(s,n.v7_relativeSplatPath)),a=V.useRef(!1);return _w(()=>{a.current=!0}),V.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=mw(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:cr([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,i,t])}function Lu(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=V.useContext(Sr),{matches:s}=V.useContext(ss),{pathname:i}=hi(),o=JSON.stringify(pw(s,r.v7_relativeSplatPath));return V.useMemo(()=>mw(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function kP(t,e){return bP(t,e)}function bP(t,e,n,r){na()||Me(!1);let{navigator:s}=V.useContext(Sr),{matches:i}=V.useContext(ss),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=hi(),h;if(e){var d;let I=typeof e=="string"?ci(e):e;l==="/"||(d=I.pathname)!=null&&d.startsWith(l)||Me(!1),h=I}else h=c;let p=h.pathname||"/",g=p;if(l!=="/"){let I=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(I.length).join("/")}let T=aP(t,{pathname:g}),A=OP(T&&T.map(I=>Object.assign({},I,{params:Object.assign({},a,I.params),pathname:cr([l,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?l:cr([l,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),i,n,r);return e&&A?V.createElement(Mu.Provider,{value:{location:Mo({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:er.Pop}},A):A}function VP(){let t=UP(),e=CP(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),n?V.createElement("pre",{style:s},n):null,null)}const DP=V.createElement(VP,null);class MP extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?V.createElement(ss.Provider,{value:this.props.routeContext},V.createElement(vw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function LP(t){let{routeContext:e,match:n,children:r}=t,s=V.useContext(Du);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),V.createElement(ss.Provider,{value:e},r)}function OP(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Me(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:p,errors:g}=n,T=d.route.loader&&p[d.route.id]===void 0&&(!g||g[d.route.id]===void 0);if(d.route.lazy||T){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,p)=>{let g,T=!1,A=null,I=null;n&&(g=a&&d.route.id?a[d.route.id]:void 0,A=d.route.errorElement||DP,l&&(c<0&&p===0?($P("route-fallback"),T=!0,I=null):c===p&&(T=!0,I=d.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),w=()=>{let v;return g?v=A:T?v=I:d.route.Component?v=V.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=h,V.createElement(LP,{match:d,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?V.createElement(MP,{location:n.location,revalidation:n.revalidation,component:A,error:g,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var Ew=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Ew||{}),Tw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Tw||{});function jP(t){let e=V.useContext(Du);return e||Me(!1),e}function FP(t){let e=V.useContext(yw);return e||Me(!1),e}function BP(t){let e=V.useContext(ss);return e||Me(!1),e}function xw(t){let e=BP(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function UP(){var t;let e=V.useContext(vw),n=FP(),r=xw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function zP(){let{router:t}=jP(Ew.UseNavigateStable),e=xw(Tw.UseNavigateStable),n=V.useRef(!1);return _w(()=>{n.current=!0}),V.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Mo({fromRouteId:e},i)))},[t,e])}const Fy={};function $P(t,e,n){Fy[t]||(Fy[t]=!0)}function WP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Kn(t){Me(!1)}function HP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=er.Pop,navigator:i,static:o=!1,future:a}=t;na()&&Me(!1);let l=e.replace(/^\/*/,"/"),c=V.useMemo(()=>({basename:l,navigator:i,static:o,future:Mo({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=ci(r));let{pathname:h="/",search:d="",hash:p="",state:g=null,key:T="default"}=r,A=V.useMemo(()=>{let I=Xs(h,l);return I==null?null:{location:{pathname:I,search:d,hash:p,state:g,key:T},navigationType:s}},[l,h,d,p,g,T,s]);return A==null?null:V.createElement(Sr.Provider,{value:c},V.createElement(Mu.Provider,{children:n,value:A}))}function KP(t){let{children:e,location:n}=t;return kP(_d(e),n)}new Promise(()=>{});function _d(t,e){e===void 0&&(e=[]);let n=[];return V.Children.forEach(t,(r,s)=>{if(!V.isValidElement(r))return;let i=[...e,s];if(r.type===V.Fragment){n.push.apply(n,_d(r.props.children,i));return}r.type!==Kn&&Me(!1),!r.props.index||!r.props.children||Me(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=_d(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yl(){return Yl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yl.apply(this,arguments)}function Sw(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function qP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function GP(t,e){return t.button===0&&(!e||e==="_self")&&!qP(t)}const QP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],YP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],XP="6";try{window.__reactRouterVersion=XP}catch{}const JP=V.createContext({isTransitioning:!1}),ZP="startTransition",By=KS[ZP];function eC(t){let{basename:e,children:n,future:r,window:s}=t,i=V.useRef();i.current==null&&(i.current=sP({window:s,v5Compat:!0}));let o=i.current,[a,l]=V.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=V.useCallback(d=>{c&&By?By(()=>l(d)):l(d)},[l,c]);return V.useLayoutEffect(()=>o.listen(h),[o,h]),V.useEffect(()=>WP(r),[r]),V.createElement(HP,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const tC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rC=V.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:d}=e,p=Sw(e,QP),{basename:g}=V.useContext(Sr),T,A=!1;if(typeof c=="string"&&nC.test(c)&&(T=c,tC))try{let v=new URL(window.location.href),b=c.startsWith("//")?new URL(v.protocol+c):new URL(c),D=Xs(b.pathname,g);b.origin===v.origin&&D!=null?c=D+b.search+b.hash:A=!0}catch{}let I=RP(c,{relative:s}),_=oC(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:s,viewTransition:d});function w(v){r&&r(v),v.defaultPrevented||_(v)}return V.createElement("a",Yl({},p,{href:T||I,onClick:A||i?r:w,ref:n,target:l}))}),sC=V.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,d=Sw(e,YP),p=Lu(l,{relative:d.relative}),g=hi(),T=V.useContext(yw),{navigator:A,basename:I}=V.useContext(Sr),_=T!=null&&aC(p)&&c===!0,w=A.encodeLocation?A.encodeLocation(p).pathname:p.pathname,v=g.pathname,b=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;s||(v=v.toLowerCase(),b=b?b.toLowerCase():null,w=w.toLowerCase()),b&&I&&(b=Xs(b,I)||b);const D=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let O=v===w||!o&&v.startsWith(w)&&v.charAt(D)==="/",C=b!=null&&(b===w||!o&&b.startsWith(w)&&b.charAt(w.length)==="/"),y={isActive:O,isPending:C,isTransitioning:_},P=O?r:void 0,N;typeof i=="function"?N=i(y):N=[i,O?"active":null,C?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(y):a;return V.createElement(rC,Yl({},d,{"aria-current":P,className:N,ref:n,style:R,to:l,viewTransition:c}),typeof h=="function"?h(y):h)});var wd;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wd||(wd={}));var Uy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Uy||(Uy={}));function iC(t){let e=V.useContext(Du);return e||Me(!1),e}function oC(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=ww(),c=hi(),h=Lu(t,{relative:o});return V.useCallback(d=>{if(GP(d,n)){d.preventDefault();let p=r!==void 0?r:Ql(c)===Ql(h);l(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,l,h,r,s,n,t,i,o,a])}function aC(t,e){e===void 0&&(e={});let n=V.useContext(JP);n==null&&Me(!1);let{basename:r}=iC(wd.useViewTransitionState),s=Lu(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=Xs(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Xs(n.nextLocation.pathname,r)||n.nextLocation.pathname;return vd(s.pathname,o)!=null||vd(s.pathname,i)!=null}var Aw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},zy=de.createContext&&de.createContext(Aw),lC=["attr","size","title"];function uC(t,e){if(t==null)return{};var n=cC(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function cC(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Xl(){return Xl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xl.apply(this,arguments)}function $y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Jl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$y(Object(n),!0).forEach(function(r){hC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$y(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hC(t,e,n){return e=dC(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dC(t){var e=fC(t,"string");return typeof e=="symbol"?e:e+""}function fC(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Pw(t){return t&&t.map((e,n)=>de.createElement(e.tag,Jl({key:n},e.attr),Pw(e.child)))}function un(t){return e=>de.createElement(pC,Xl({attr:Jl({},t.attr)},e),Pw(t.child))}function pC(t){var e=n=>{var{attr:r,size:s,title:i}=t,o=uC(t,lC),a=s||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),de.createElement("svg",Xl({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Jl(Jl({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),i&&de.createElement("title",null,i),t.children)};return zy!==void 0?de.createElement(zy.Consumer,null,n=>e(n)):e(Aw)}function mC(t){return un({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function gC(t){return un({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function yC(t){return un({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function Cw(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function vC(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M288 130.54V112h16c8.84 0 16-7.16 16-16V80c0-8.84-7.16-16-16-16h-96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h16v18.54C115.49 146.11 32 239.18 32 352h448c0-112.82-83.49-205.89-192-221.46zM496 384H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h480c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function _C(t){return un({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 80v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8zm144 263.88V440c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-24.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V232c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v24.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07z"},child:[]}]})(t)}function wC(t){return un({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function EC(t){return un({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function TC(t){return un({attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"},child:[]}]})(t)}function xC(t){return un({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function SC(t){return un({attr:{viewBox:"0 0 416 512"},child:[{tag:"path",attr:{d:"M207.9 15.2c.8 4.7 16.1 94.5 16.1 128.8 0 52.3-27.8 89.6-68.9 104.6L168 486.7c.7 13.7-10.2 25.3-24 25.3H80c-13.7 0-24.7-11.5-24-25.3l12.9-238.1C27.7 233.6 0 196.2 0 144 0 109.6 15.3 19.9 16.1 15.2 19.3-5.1 61.4-5.4 64 16.3v141.2c1.3 3.4 15.1 3.2 16 0 1.4-25.3 7.9-139.2 8-141.8 3.3-20.8 44.7-20.8 47.9 0 .2 2.7 6.6 116.5 8 141.8.9 3.2 14.8 3.4 16 0V16.3c2.6-21.6 44.8-21.4 48-1.1zm119.2 285.7l-15 185.1c-1.2 14 9.9 26 23.9 26h56c13.3 0 24-10.7 24-24V24c0-13.2-10.7-24-24-24-82.5 0-221.4 178.5-64.9 300.9z"},child:[]}]})(t)}const AC=[{path:"/",label:"Home",icon:wC},{path:"/menu",label:"Menu",icon:SC},{path:"/billing",label:"Billing",icon:_C},{path:"/staff",label:"Staff",icon:xC},{path:"/order",label:"Order",icon:yC},{path:"/kitchen",label:"Kitchen",icon:vC},{path:"/settings",label:"Settings",icon:Cw}],PC=()=>{const[t,e]=V.useState(!0),[n,r]=V.useState(!1);return V.useEffect(()=>{const s=localStorage.getItem("sidebarOpen");s!==null&&e(JSON.parse(s))},[]),V.useEffect(()=>{localStorage.setItem("sidebarOpen",JSON.stringify(t))},[t]),E.jsxs("aside",{className:`${t?"w-64":"w-20"} bg-gradient-to-b from-gray-900 to-gray-800 text-gray-200 h-screen p-4 flex flex-col justify-between shadow-xl transition-all duration-300`,children:[E.jsxs("div",{children:[E.jsxs("div",{className:"flex items-center mb-8",children:[E.jsx("span",{className:"text-yellow-400 text-2xl",children:""}),t&&E.jsx("span",{className:"ml-3 text-2xl font-extrabold tracking-wide text-yellow-400",children:"RestroGrid"})]}),E.jsx("nav",{className:"space-y-2",children:AC.map(({path:s,label:i,icon:o})=>E.jsxs(sC,{to:s,className:({isActive:a})=>`relative flex items-center rounded-lg font-medium py-3 px-4 transition-all duration-300 group
                ${a?"bg-yellow-500 text-gray-900 shadow-md":"hover:bg-gray-700 hover:text-yellow-400"}`,children:[({isActive:a})=>a&&E.jsx("span",{className:"absolute left-0 top-0 h-full w-1 bg-yellow-400 rounded-r"}),E.jsx("span",{className:"w-6 flex justify-center text-xl",children:E.jsx(o,{"aria-hidden":"true"})}),t&&E.jsx("span",{className:"ml-4 flex-1 whitespace-nowrap",children:i}),!t&&E.jsx("span",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-3 px-2 py-1 bg-gray-900 text-yellow-400 text-sm rounded opacity-0 group-hover:opacity-100 whitespace-nowrap shadow-lg",role:"tooltip",children:i})]},s))})]}),E.jsxs("div",{className:"relative",children:[E.jsxs("div",{className:`border-t border-gray-700 pt-4 flex items-center cursor-pointer transition-all duration-300 ${t?"gap-3":"justify-center"}`,onClick:()=>r(s=>!s),children:[E.jsx("img",{src:"https://i.pravatar.cc/40",alt:"profile",className:"w-10 h-10 rounded-full border-2 border-yellow-400"}),t&&E.jsxs("div",{children:[E.jsx("p",{className:"font-semibold",children:"Manager"}),E.jsx("p",{className:"text-sm text-gray-400",children:"Admin"})]})]}),n&&t&&E.jsxs("div",{className:"absolute bottom-16 left-0 w-full bg-gray-800 rounded-lg shadow-lg py-2",children:[E.jsxs("button",{className:"flex w-full items-center px-4 py-2 text-sm hover:bg-gray-700",children:[E.jsx(TC,{className:"mr-3"})," Profile"]}),E.jsxs("button",{className:"flex w-full items-center px-4 py-2 text-sm hover:bg-gray-700",children:[E.jsx(Cw,{className:"mr-3"})," Settings"]}),E.jsxs("button",{className:"flex w-full items-center px-4 py-2 text-sm text-red-400 hover:bg-gray-700",children:[E.jsx(EC,{className:"mr-3"})," Logout"]})]}),E.jsx("button",{onClick:()=>e(!t),"aria-label":t?"Collapse sidebar":"Expand sidebar","aria-expanded":t,className:"mt-4 w-full flex items-center justify-center py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-yellow-400 transition-colors",children:t?E.jsx(gC,{size:18}):E.jsx(mC,{size:18})})]})]})};var Wy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},CC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Rw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[h],n[d],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Iw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new IC;const p=i<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),d!==64){const T=c<<6&192|d;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class IC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RC=function(t){const e=Iw(t);return Rw.encodeByteArray(e,!0)},Zl=function(t){return RC(t).replace(/\./g,"")},NC=function(t){try{return Rw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=()=>kC().__FIREBASE_DEFAULTS__,VC=()=>{if(typeof process>"u"||typeof Wy>"u")return;const t=Wy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&NC(t[1]);return e&&JSON.parse(e)},ip=()=>{try{return bC()||VC()||DC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},MC=t=>{var e,n;return(n=(e=ip())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},LC=t=>{const e=MC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Nw=()=>{var t;return(t=ip())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Zl(JSON.stringify(n)),Zl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BC(){var t;const e=(t=ip())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UC(){return!BC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zC(){try{return typeof indexedDB=="object"}catch{return!1}}function $C(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="FirebaseError";class di extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WC,Object.setPrototypeOf(this,di.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kw.prototype.create)}}class kw{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?HC(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new di(s,a,r)}}function HC(t,e){return t.replace(KC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const KC=/\{\$([^}]+)}/g;function Ed(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Hy(i)&&Hy(o)){if(!Ed(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Hy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t){return t&&t._delegate?t._delegate:t}class Lo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new OC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QC(e))try{this.getOrInitializeService({instanceIdentifier:Dr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Dr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Dr){return this.instances.has(e)}getOptions(e=Dr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:GC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Dr){return this.component?this.component.multipleInstances?e:Dr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function GC(t){return t===Dr?void 0:t}function QC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const XC={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},JC=ae.INFO,ZC={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},eI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=ZC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bw{constructor(e){this.name=e,this._logLevel=JC,this._logHandler=eI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const tI=(t,e)=>e.some(n=>t instanceof n);let Ky,qy;function nI(){return Ky||(Ky=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rI(){return qy||(qy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vw=new WeakMap,Td=new WeakMap,Dw=new WeakMap,nh=new WeakMap,op=new WeakMap;function sI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(hr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Vw.set(n,t)}).catch(()=>{}),op.set(e,t),e}function iI(t){if(Td.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Td.set(t,e)}let xd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Td.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Dw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return hr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oI(t){xd=t(xd)}function aI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(rh(this),e,...n);return Dw.set(r,e.sort?e.sort():[e]),hr(r)}:rI().includes(t)?function(...e){return t.apply(rh(this),e),hr(Vw.get(this))}:function(...e){return hr(t.apply(rh(this),e))}}function lI(t){return typeof t=="function"?aI(t):(t instanceof IDBTransaction&&iI(t),tI(t,nI())?new Proxy(t,xd):t)}function hr(t){if(t instanceof IDBRequest)return sI(t);if(nh.has(t))return nh.get(t);const e=lI(t);return e!==t&&(nh.set(t,e),op.set(e,t)),e}const rh=t=>op.get(t);function uI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=hr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(hr(o.result),l.oldVersion,l.newVersion,hr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const cI=["get","getKey","getAll","getAllKeys","count"],hI=["put","add","delete","clear"],sh=new Map;function Gy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sh.get(e))return sh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=hI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||cI.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return sh.set(e,i),i}oI(t=>({...t,get:(e,n,r)=>Gy(e,n)||t.get(e,n,r),has:(e,n)=>!!Gy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(fI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function fI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sd="@firebase/app",Qy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new bw("@firebase/app"),pI="@firebase/app-compat",mI="@firebase/analytics-compat",gI="@firebase/analytics",yI="@firebase/app-check-compat",vI="@firebase/app-check",_I="@firebase/auth",wI="@firebase/auth-compat",EI="@firebase/database",TI="@firebase/data-connect",xI="@firebase/database-compat",SI="@firebase/functions",AI="@firebase/functions-compat",PI="@firebase/installations",CI="@firebase/installations-compat",II="@firebase/messaging",RI="@firebase/messaging-compat",NI="@firebase/performance",kI="@firebase/performance-compat",bI="@firebase/remote-config",VI="@firebase/remote-config-compat",DI="@firebase/storage",MI="@firebase/storage-compat",LI="@firebase/firestore",OI="@firebase/vertexai-preview",jI="@firebase/firestore-compat",FI="firebase",BI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="[DEFAULT]",UI={[Sd]:"fire-core",[pI]:"fire-core-compat",[gI]:"fire-analytics",[mI]:"fire-analytics-compat",[vI]:"fire-app-check",[yI]:"fire-app-check-compat",[_I]:"fire-auth",[wI]:"fire-auth-compat",[EI]:"fire-rtdb",[TI]:"fire-data-connect",[xI]:"fire-rtdb-compat",[SI]:"fire-fn",[AI]:"fire-fn-compat",[PI]:"fire-iid",[CI]:"fire-iid-compat",[II]:"fire-fcm",[RI]:"fire-fcm-compat",[NI]:"fire-perf",[kI]:"fire-perf-compat",[bI]:"fire-rc",[VI]:"fire-rc-compat",[DI]:"fire-gcs",[MI]:"fire-gcs-compat",[LI]:"fire-fst",[jI]:"fire-fst-compat",[OI]:"fire-vertex","fire-js":"fire-js",[FI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=new Map,zI=new Map,Pd=new Map;function Yy(t,e){try{t.container.addComponent(e)}catch(n){Ln.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function tu(t){const e=t.name;if(Pd.has(e))return Ln.debug(`There were multiple attempts to register component ${e}.`),!1;Pd.set(e,t);for(const n of eu.values())Yy(n,t);for(const n of zI.values())Yy(n,t);return!0}function $I(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},dr=new kw("app","Firebase",WI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=BI;function Mw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ad,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw dr.create("bad-app-name",{appName:String(s)});if(n||(n=Nw()),!n)throw dr.create("no-options");const i=eu.get(s);if(i){if(Ed(n,i.options)&&Ed(r,i.config))return i;throw dr.create("duplicate-app",{appName:s})}const o=new YC(s);for(const l of Pd.values())o.addComponent(l);const a=new HI(n,r,o);return eu.set(s,a),a}function qI(t=Ad){const e=eu.get(t);if(!e&&t===Ad&&Nw())return Mw();if(!e)throw dr.create("no-app",{appName:t});return e}function Us(t,e,n){var r;let s=(r=UI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ln.warn(a.join(" "));return}tu(new Lo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="firebase-heartbeat-database",QI=1,Oo="firebase-heartbeat-store";let ih=null;function Lw(){return ih||(ih=uI(GI,QI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Oo)}catch(n){console.warn(n)}}}}).catch(t=>{throw dr.create("idb-open",{originalErrorMessage:t.message})})),ih}async function YI(t){try{const n=(await Lw()).transaction(Oo),r=await n.objectStore(Oo).get(Ow(t));return await n.done,r}catch(e){if(e instanceof di)Ln.warn(e.message);else{const n=dr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ln.warn(n.message)}}}async function Xy(t,e){try{const r=(await Lw()).transaction(Oo,"readwrite");await r.objectStore(Oo).put(e,Ow(t)),await r.done}catch(n){if(n instanceof di)Ln.warn(n.message);else{const r=dr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ln.warn(r.message)}}}function Ow(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=1024,JI=30*24*60*60*1e3;class ZI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new tR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Jy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=JI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ln.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Jy(),{heartbeatsToSend:r,unsentEntries:s}=eR(this._heartbeatsCache.heartbeats),i=Zl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ln.warn(n),""}}}function Jy(){return new Date().toISOString().substring(0,10)}function eR(t,e=XI){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Zy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Zy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class tR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zC()?$C().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await YI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zy(t){return Zl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t){tu(new Lo("platform-logger",e=>new dI(e),"PRIVATE")),tu(new Lo("heartbeat",e=>new ZI(e),"PRIVATE")),Us(Sd,Qy,t),Us(Sd,Qy,"esm2017"),Us("fire-js","")}nR("");var rR="firebase",sR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Us(rR,sR,"app");var e0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wr,jw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,y){function P(){}P.prototype=y.prototype,C.D=y.prototype,C.prototype=new P,C.prototype.constructor=C,C.C=function(N,R,k){for(var S=Array(arguments.length-2),W=2;W<arguments.length;W++)S[W-2]=arguments[W];return y.prototype[R].apply(N,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,y,P){P||(P=0);var N=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)N[R]=y.charCodeAt(P++)|y.charCodeAt(P++)<<8|y.charCodeAt(P++)<<16|y.charCodeAt(P++)<<24;else for(R=0;16>R;++R)N[R]=y[P++]|y[P++]<<8|y[P++]<<16|y[P++]<<24;y=C.g[0],P=C.g[1],R=C.g[2];var k=C.g[3],S=y+(k^P&(R^k))+N[0]+3614090360&4294967295;y=P+(S<<7&4294967295|S>>>25),S=k+(R^y&(P^R))+N[1]+3905402710&4294967295,k=y+(S<<12&4294967295|S>>>20),S=R+(P^k&(y^P))+N[2]+606105819&4294967295,R=k+(S<<17&4294967295|S>>>15),S=P+(y^R&(k^y))+N[3]+3250441966&4294967295,P=R+(S<<22&4294967295|S>>>10),S=y+(k^P&(R^k))+N[4]+4118548399&4294967295,y=P+(S<<7&4294967295|S>>>25),S=k+(R^y&(P^R))+N[5]+1200080426&4294967295,k=y+(S<<12&4294967295|S>>>20),S=R+(P^k&(y^P))+N[6]+2821735955&4294967295,R=k+(S<<17&4294967295|S>>>15),S=P+(y^R&(k^y))+N[7]+4249261313&4294967295,P=R+(S<<22&4294967295|S>>>10),S=y+(k^P&(R^k))+N[8]+1770035416&4294967295,y=P+(S<<7&4294967295|S>>>25),S=k+(R^y&(P^R))+N[9]+2336552879&4294967295,k=y+(S<<12&4294967295|S>>>20),S=R+(P^k&(y^P))+N[10]+4294925233&4294967295,R=k+(S<<17&4294967295|S>>>15),S=P+(y^R&(k^y))+N[11]+2304563134&4294967295,P=R+(S<<22&4294967295|S>>>10),S=y+(k^P&(R^k))+N[12]+1804603682&4294967295,y=P+(S<<7&4294967295|S>>>25),S=k+(R^y&(P^R))+N[13]+4254626195&4294967295,k=y+(S<<12&4294967295|S>>>20),S=R+(P^k&(y^P))+N[14]+2792965006&4294967295,R=k+(S<<17&4294967295|S>>>15),S=P+(y^R&(k^y))+N[15]+1236535329&4294967295,P=R+(S<<22&4294967295|S>>>10),S=y+(R^k&(P^R))+N[1]+4129170786&4294967295,y=P+(S<<5&4294967295|S>>>27),S=k+(P^R&(y^P))+N[6]+3225465664&4294967295,k=y+(S<<9&4294967295|S>>>23),S=R+(y^P&(k^y))+N[11]+643717713&4294967295,R=k+(S<<14&4294967295|S>>>18),S=P+(k^y&(R^k))+N[0]+3921069994&4294967295,P=R+(S<<20&4294967295|S>>>12),S=y+(R^k&(P^R))+N[5]+3593408605&4294967295,y=P+(S<<5&4294967295|S>>>27),S=k+(P^R&(y^P))+N[10]+38016083&4294967295,k=y+(S<<9&4294967295|S>>>23),S=R+(y^P&(k^y))+N[15]+3634488961&4294967295,R=k+(S<<14&4294967295|S>>>18),S=P+(k^y&(R^k))+N[4]+3889429448&4294967295,P=R+(S<<20&4294967295|S>>>12),S=y+(R^k&(P^R))+N[9]+568446438&4294967295,y=P+(S<<5&4294967295|S>>>27),S=k+(P^R&(y^P))+N[14]+3275163606&4294967295,k=y+(S<<9&4294967295|S>>>23),S=R+(y^P&(k^y))+N[3]+4107603335&4294967295,R=k+(S<<14&4294967295|S>>>18),S=P+(k^y&(R^k))+N[8]+1163531501&4294967295,P=R+(S<<20&4294967295|S>>>12),S=y+(R^k&(P^R))+N[13]+2850285829&4294967295,y=P+(S<<5&4294967295|S>>>27),S=k+(P^R&(y^P))+N[2]+4243563512&4294967295,k=y+(S<<9&4294967295|S>>>23),S=R+(y^P&(k^y))+N[7]+1735328473&4294967295,R=k+(S<<14&4294967295|S>>>18),S=P+(k^y&(R^k))+N[12]+2368359562&4294967295,P=R+(S<<20&4294967295|S>>>12),S=y+(P^R^k)+N[5]+4294588738&4294967295,y=P+(S<<4&4294967295|S>>>28),S=k+(y^P^R)+N[8]+2272392833&4294967295,k=y+(S<<11&4294967295|S>>>21),S=R+(k^y^P)+N[11]+1839030562&4294967295,R=k+(S<<16&4294967295|S>>>16),S=P+(R^k^y)+N[14]+4259657740&4294967295,P=R+(S<<23&4294967295|S>>>9),S=y+(P^R^k)+N[1]+2763975236&4294967295,y=P+(S<<4&4294967295|S>>>28),S=k+(y^P^R)+N[4]+1272893353&4294967295,k=y+(S<<11&4294967295|S>>>21),S=R+(k^y^P)+N[7]+4139469664&4294967295,R=k+(S<<16&4294967295|S>>>16),S=P+(R^k^y)+N[10]+3200236656&4294967295,P=R+(S<<23&4294967295|S>>>9),S=y+(P^R^k)+N[13]+681279174&4294967295,y=P+(S<<4&4294967295|S>>>28),S=k+(y^P^R)+N[0]+3936430074&4294967295,k=y+(S<<11&4294967295|S>>>21),S=R+(k^y^P)+N[3]+3572445317&4294967295,R=k+(S<<16&4294967295|S>>>16),S=P+(R^k^y)+N[6]+76029189&4294967295,P=R+(S<<23&4294967295|S>>>9),S=y+(P^R^k)+N[9]+3654602809&4294967295,y=P+(S<<4&4294967295|S>>>28),S=k+(y^P^R)+N[12]+3873151461&4294967295,k=y+(S<<11&4294967295|S>>>21),S=R+(k^y^P)+N[15]+530742520&4294967295,R=k+(S<<16&4294967295|S>>>16),S=P+(R^k^y)+N[2]+3299628645&4294967295,P=R+(S<<23&4294967295|S>>>9),S=y+(R^(P|~k))+N[0]+4096336452&4294967295,y=P+(S<<6&4294967295|S>>>26),S=k+(P^(y|~R))+N[7]+1126891415&4294967295,k=y+(S<<10&4294967295|S>>>22),S=R+(y^(k|~P))+N[14]+2878612391&4294967295,R=k+(S<<15&4294967295|S>>>17),S=P+(k^(R|~y))+N[5]+4237533241&4294967295,P=R+(S<<21&4294967295|S>>>11),S=y+(R^(P|~k))+N[12]+1700485571&4294967295,y=P+(S<<6&4294967295|S>>>26),S=k+(P^(y|~R))+N[3]+2399980690&4294967295,k=y+(S<<10&4294967295|S>>>22),S=R+(y^(k|~P))+N[10]+4293915773&4294967295,R=k+(S<<15&4294967295|S>>>17),S=P+(k^(R|~y))+N[1]+2240044497&4294967295,P=R+(S<<21&4294967295|S>>>11),S=y+(R^(P|~k))+N[8]+1873313359&4294967295,y=P+(S<<6&4294967295|S>>>26),S=k+(P^(y|~R))+N[15]+4264355552&4294967295,k=y+(S<<10&4294967295|S>>>22),S=R+(y^(k|~P))+N[6]+2734768916&4294967295,R=k+(S<<15&4294967295|S>>>17),S=P+(k^(R|~y))+N[13]+1309151649&4294967295,P=R+(S<<21&4294967295|S>>>11),S=y+(R^(P|~k))+N[4]+4149444226&4294967295,y=P+(S<<6&4294967295|S>>>26),S=k+(P^(y|~R))+N[11]+3174756917&4294967295,k=y+(S<<10&4294967295|S>>>22),S=R+(y^(k|~P))+N[2]+718787259&4294967295,R=k+(S<<15&4294967295|S>>>17),S=P+(k^(R|~y))+N[9]+3951481745&4294967295,C.g[0]=C.g[0]+y&4294967295,C.g[1]=C.g[1]+(R+(S<<21&4294967295|S>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+k&4294967295}r.prototype.u=function(C,y){y===void 0&&(y=C.length);for(var P=y-this.blockSize,N=this.B,R=this.h,k=0;k<y;){if(R==0)for(;k<=P;)s(this,C,k),k+=this.blockSize;if(typeof C=="string"){for(;k<y;)if(N[R++]=C.charCodeAt(k++),R==this.blockSize){s(this,N),R=0;break}}else for(;k<y;)if(N[R++]=C[k++],R==this.blockSize){s(this,N),R=0;break}}this.h=R,this.o+=y},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var y=1;y<C.length-8;++y)C[y]=0;var P=8*this.o;for(y=C.length-8;y<C.length;++y)C[y]=P&255,P/=256;for(this.u(C),C=Array(16),y=P=0;4>y;++y)for(var N=0;32>N;N+=8)C[P++]=this.g[y]>>>N&255;return C};function i(C,y){var P=a;return Object.prototype.hasOwnProperty.call(P,C)?P[C]:P[C]=y(C)}function o(C,y){this.h=y;for(var P=[],N=!0,R=C.length-1;0<=R;R--){var k=C[R]|0;N&&k==y||(P[R]=k,N=!1)}this.g=P}var a={};function l(C){return-128<=C&&128>C?i(C,function(y){return new o([y|0],0>y?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return d;if(0>C)return I(c(-C));for(var y=[],P=1,N=0;C>=P;N++)y[N]=C/P|0,P*=4294967296;return new o(y,0)}function h(C,y){if(C.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(C.charAt(0)=="-")return I(h(C.substring(1),y));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(y,8)),N=d,R=0;R<C.length;R+=8){var k=Math.min(8,C.length-R),S=parseInt(C.substring(R,R+k),y);8>k?(k=c(Math.pow(y,k)),N=N.j(k).add(c(S))):(N=N.j(P),N=N.add(c(S)))}return N}var d=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(A(this))return-I(this).m();for(var C=0,y=1,P=0;P<this.g.length;P++){var N=this.i(P);C+=(0<=N?N:4294967296+N)*y,y*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T(this))return"0";if(A(this))return"-"+I(this).toString(C);for(var y=c(Math.pow(C,6)),P=this,N="";;){var R=b(P,y).g;P=_(P,R.j(y));var k=((0<P.g.length?P.g[0]:P.h)>>>0).toString(C);if(P=R,T(P))return k+N;for(;6>k.length;)k="0"+k;N=k+N}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function T(C){if(C.h!=0)return!1;for(var y=0;y<C.g.length;y++)if(C.g[y]!=0)return!1;return!0}function A(C){return C.h==-1}t.l=function(C){return C=_(this,C),A(C)?-1:T(C)?0:1};function I(C){for(var y=C.g.length,P=[],N=0;N<y;N++)P[N]=~C.g[N];return new o(P,~C.h).add(p)}t.abs=function(){return A(this)?I(this):this},t.add=function(C){for(var y=Math.max(this.g.length,C.g.length),P=[],N=0,R=0;R<=y;R++){var k=N+(this.i(R)&65535)+(C.i(R)&65535),S=(k>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);N=S>>>16,k&=65535,S&=65535,P[R]=S<<16|k}return new o(P,P[P.length-1]&-2147483648?-1:0)};function _(C,y){return C.add(I(y))}t.j=function(C){if(T(this)||T(C))return d;if(A(this))return A(C)?I(this).j(I(C)):I(I(this).j(C));if(A(C))return I(this.j(I(C)));if(0>this.l(g)&&0>C.l(g))return c(this.m()*C.m());for(var y=this.g.length+C.g.length,P=[],N=0;N<2*y;N++)P[N]=0;for(N=0;N<this.g.length;N++)for(var R=0;R<C.g.length;R++){var k=this.i(N)>>>16,S=this.i(N)&65535,W=C.i(R)>>>16,Y=C.i(R)&65535;P[2*N+2*R]+=S*Y,w(P,2*N+2*R),P[2*N+2*R+1]+=k*Y,w(P,2*N+2*R+1),P[2*N+2*R+1]+=S*W,w(P,2*N+2*R+1),P[2*N+2*R+2]+=k*W,w(P,2*N+2*R+2)}for(N=0;N<y;N++)P[N]=P[2*N+1]<<16|P[2*N];for(N=y;N<2*y;N++)P[N]=0;return new o(P,0)};function w(C,y){for(;(C[y]&65535)!=C[y];)C[y+1]+=C[y]>>>16,C[y]&=65535,y++}function v(C,y){this.g=C,this.h=y}function b(C,y){if(T(y))throw Error("division by zero");if(T(C))return new v(d,d);if(A(C))return y=b(I(C),y),new v(I(y.g),I(y.h));if(A(y))return y=b(C,I(y)),new v(I(y.g),y.h);if(30<C.g.length){if(A(C)||A(y))throw Error("slowDivide_ only works with positive integers.");for(var P=p,N=y;0>=N.l(C);)P=D(P),N=D(N);var R=O(P,1),k=O(N,1);for(N=O(N,2),P=O(P,2);!T(N);){var S=k.add(N);0>=S.l(C)&&(R=R.add(P),k=S),N=O(N,1),P=O(P,1)}return y=_(C,R.j(y)),new v(R,y)}for(R=d;0<=C.l(y);){for(P=Math.max(1,Math.floor(C.m()/y.m())),N=Math.ceil(Math.log(P)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),k=c(P),S=k.j(y);A(S)||0<S.l(C);)P-=N,k=c(P),S=k.j(y);T(k)&&(k=p),R=R.add(k),C=_(C,S)}return new v(R,C)}t.A=function(C){return b(this,C).h},t.and=function(C){for(var y=Math.max(this.g.length,C.g.length),P=[],N=0;N<y;N++)P[N]=this.i(N)&C.i(N);return new o(P,this.h&C.h)},t.or=function(C){for(var y=Math.max(this.g.length,C.g.length),P=[],N=0;N<y;N++)P[N]=this.i(N)|C.i(N);return new o(P,this.h|C.h)},t.xor=function(C){for(var y=Math.max(this.g.length,C.g.length),P=[],N=0;N<y;N++)P[N]=this.i(N)^C.i(N);return new o(P,this.h^C.h)};function D(C){for(var y=C.g.length+1,P=[],N=0;N<y;N++)P[N]=C.i(N)<<1|C.i(N-1)>>>31;return new o(P,C.h)}function O(C,y){var P=y>>5;y%=32;for(var N=C.g.length-P,R=[],k=0;k<N;k++)R[k]=0<y?C.i(k+P)>>>y|C.i(k+P+1)<<32-y:C.i(k+P);return new o(R,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Wr=o}).apply(typeof e0<"u"?e0:typeof self<"u"?self:typeof window<"u"?window:{});var Xa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fw,qi,Bw,gl,Cd,Uw,zw,$w;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xa=="object"&&Xa];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(u,f){if(f)e:{var m=r;u=u.split(".");for(var x=0;x<u.length-1;x++){var M=u[x];if(!(M in m))break e;m=m[M]}u=u[u.length-1],x=m[u],f=f(x),f!=x&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function i(u,f){u instanceof String&&(u+="");var m=0,x=!1,M={next:function(){if(!x&&m<u.length){var L=m++;return{value:f(L,u[L]),done:!1}}return x=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(u){return u||function(){return i(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,x),u.apply(f,M)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var x=m.slice();return x.push.apply(x,arguments),u.apply(this,x)}}function T(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(x,M,L){for(var $=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)$[ye-2]=arguments[ye];return f.prototype[M].apply(x,$)}}function A(u){const f=u.length;if(0<f){const m=Array(f);for(let x=0;x<f;x++)m[x]=u[x];return m}return[]}function I(u,f){for(let m=1;m<arguments.length;m++){const x=arguments[m];if(l(x)){const M=u.length||0,L=x.length||0;u.length=M+L;for(let $=0;$<L;$++)u[M+$]=x[$]}else u.push(x)}}class _{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function w(u){return/^[\s\xa0]*$/.test(u)}function v(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function b(u){return b[" "](u),u}b[" "]=function(){};var D=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function O(u,f,m){for(const x in u)f.call(m,u[x],x,u)}function C(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function y(u){const f={};for(const m in u)f[m]=u[m];return f}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(u,f){let m,x;for(let M=1;M<arguments.length;M++){x=arguments[M];for(m in x)u[m]=x[m];for(let L=0;L<P.length;L++)m=P[L],Object.prototype.hasOwnProperty.call(x,m)&&(u[m]=x[m])}}function R(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function k(u){a.setTimeout(()=>{throw u},0)}function S(){var u=H;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class W{constructor(){this.h=this.g=null}add(f,m){const x=Y.get();x.set(f,m),this.h?this.h.next=x:this.g=x,this.h=x}}var Y=new _(()=>new ne,u=>u.reset());class ne{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let z,j=!1,H=new W,Q=()=>{const u=a.Promise.resolve(void 0);z=()=>{u.then(ge)}};var ge=()=>{for(var u;u=S();){try{u.h.call(u.g)}catch(m){k(m)}var f=Y;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}j=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var Pt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function zt(u,f){if(ve.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,x=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(D){e:{try{b(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:me[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&zt.aa.h.call(this)}}T(zt,ve);var me={2:"touch",3:"pen",4:"mouse"};zt.prototype.h=function(){zt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),sc=0;function ic(u,f,m,x,M){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!x,this.ha=M,this.key=++sc,this.da=this.fa=!1}function as(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ls(u){this.src=u,this.g={},this.h=0}ls.prototype.add=function(u,f,m,x,M){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var $=ac(u,f,x,M);return-1<$?(f=u[$],m||(f.fa=!1)):(f=new ic(f,this.src,L,!!x,M),f.fa=m,u.push(f)),f};function oc(u,f){var m=f.type;if(m in u.g){var x=u.g[m],M=Array.prototype.indexOf.call(x,f,void 0),L;(L=0<=M)&&Array.prototype.splice.call(x,M,1),L&&(as(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function ac(u,f,m,x){for(var M=0;M<u.length;++M){var L=u[M];if(!L.da&&L.listener==f&&L.capture==!!m&&L.ha==x)return M}return-1}var lc="closure_lm_"+(1e6*Math.random()|0),uc={};function Cm(u,f,m,x,M){if(Array.isArray(f)){for(var L=0;L<f.length;L++)Cm(u,f[L],m,x,M);return null}return m=Nm(m),u&&u[ze]?u.K(f,m,c(x)?!!x.capture:!1,M):eS(u,f,m,!1,x,M)}function eS(u,f,m,x,M,L){if(!f)throw Error("Invalid event type");var $=c(M)?!!M.capture:!!M,ye=hc(u);if(ye||(u[lc]=ye=new ls(u)),m=ye.add(f,m,x,$,L),m.proxy)return m;if(x=tS(),m.proxy=x,x.src=u,x.listener=m,u.addEventListener)Pt||(M=$),M===void 0&&(M=!1),u.addEventListener(f.toString(),x,M);else if(u.attachEvent)u.attachEvent(Rm(f.toString()),x);else if(u.addListener&&u.removeListener)u.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return m}function tS(){function u(m){return f.call(u.src,u.listener,m)}const f=nS;return u}function Im(u,f,m,x,M){if(Array.isArray(f))for(var L=0;L<f.length;L++)Im(u,f[L],m,x,M);else x=c(x)?!!x.capture:!!x,m=Nm(m),u&&u[ze]?(u=u.i,f=String(f).toString(),f in u.g&&(L=u.g[f],m=ac(L,m,x,M),-1<m&&(as(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete u.g[f],u.h--)))):u&&(u=hc(u))&&(f=u.g[f.toString()],u=-1,f&&(u=ac(f,m,x,M)),(m=-1<u?f[u]:null)&&cc(m))}function cc(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[ze])oc(f.i,u);else{var m=u.type,x=u.proxy;f.removeEventListener?f.removeEventListener(m,x,u.capture):f.detachEvent?f.detachEvent(Rm(m),x):f.addListener&&f.removeListener&&f.removeListener(x),(m=hc(f))?(oc(m,u),m.h==0&&(m.src=null,f[lc]=null)):as(u)}}}function Rm(u){return u in uc?uc[u]:uc[u]="on"+u}function nS(u,f){if(u.da)u=!0;else{f=new zt(f,this);var m=u.listener,x=u.ha||u.src;u.fa&&cc(u),u=m.call(x,f)}return u}function hc(u){return u=u[lc],u instanceof ls?u:null}var dc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nm(u){return typeof u=="function"?u:(u[dc]||(u[dc]=function(f){return u.handleEvent(f)}),u[dc])}function it(){he.call(this),this.i=new ls(this),this.M=this,this.F=null}T(it,he),it.prototype[ze]=!0,it.prototype.removeEventListener=function(u,f,m,x){Im(this,u,f,m,x)};function gt(u,f){var m,x=u.F;if(x)for(m=[];x;x=x.F)m.push(x);if(u=u.M,x=f.type||f,typeof f=="string")f=new ve(f,u);else if(f instanceof ve)f.target=f.target||u;else{var M=f;f=new ve(x,u),N(f,M)}if(M=!0,m)for(var L=m.length-1;0<=L;L--){var $=f.g=m[L];M=va($,x,!0,f)&&M}if($=f.g=u,M=va($,x,!0,f)&&M,M=va($,x,!1,f)&&M,m)for(L=0;L<m.length;L++)$=f.g=m[L],M=va($,x,!1,f)&&M}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],x=0;x<m.length;x++)as(m[x]);delete u.g[f],u.h--}}this.F=null},it.prototype.K=function(u,f,m,x){return this.i.add(String(u),f,!1,m,x)},it.prototype.L=function(u,f,m,x){return this.i.add(String(u),f,!0,m,x)};function va(u,f,m,x){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,L=0;L<f.length;++L){var $=f[L];if($&&!$.da&&$.capture==m){var ye=$.listener,Ye=$.ha||$.src;$.fa&&oc(u.i,$),M=ye.call(Ye,x)!==!1&&M}}return M&&!x.defaultPrevented}function km(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function bm(u){u.g=km(()=>{u.g=null,u.i&&(u.i=!1,bm(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class rS extends he{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:bm(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wi(u){he.call(this),this.h=u,this.g={}}T(wi,he);var Vm=[];function Dm(u){O(u.g,function(f,m){this.g.hasOwnProperty(m)&&cc(f)},u),u.g={}}wi.prototype.N=function(){wi.aa.N.call(this),Dm(this)},wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fc=a.JSON.stringify,sS=a.JSON.parse,iS=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function pc(){}pc.prototype.h=null;function Mm(u){return u.h||(u.h=u.i())}function Lm(){}var Ei={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mc(){ve.call(this,"d")}T(mc,ve);function gc(){ve.call(this,"c")}T(gc,ve);var Cr={},Om=null;function _a(){return Om=Om||new it}Cr.La="serverreachability";function jm(u){ve.call(this,Cr.La,u)}T(jm,ve);function Ti(u){const f=_a();gt(f,new jm(f))}Cr.STAT_EVENT="statevent";function Fm(u,f){ve.call(this,Cr.STAT_EVENT,u),this.stat=f}T(Fm,ve);function yt(u){const f=_a();gt(f,new Fm(f,u))}Cr.Ma="timingevent";function Bm(u,f){ve.call(this,Cr.Ma,u),this.size=f}T(Bm,ve);function xi(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Si(){this.g=!0}Si.prototype.xa=function(){this.g=!1};function oS(u,f,m,x,M,L){u.info(function(){if(u.g)if(L)for(var $="",ye=L.split("&"),Ye=0;Ye<ye.length;Ye++){var ue=ye[Ye].split("=");if(1<ue.length){var ot=ue[0];ue=ue[1];var at=ot.split("_");$=2<=at.length&&at[1]=="type"?$+(ot+"="+ue+"&"):$+(ot+"=redacted&")}}else $=null;else $=L;return"XMLHTTP REQ ("+x+") [attempt "+M+"]: "+f+`
`+m+`
`+$})}function aS(u,f,m,x,M,L,$){u.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+M+"]: "+f+`
`+m+`
`+L+" "+$})}function us(u,f,m,x){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+uS(u,m)+(x?" "+x:"")})}function lS(u,f){u.info(function(){return"TIMEOUT: "+f})}Si.prototype.info=function(){};function uS(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var x=m[u];if(!(2>x.length)){var M=x[1];if(Array.isArray(M)&&!(1>M.length)){var L=M[0];if(L!="noop"&&L!="stop"&&L!="close")for(var $=1;$<M.length;$++)M[$]=""}}}}return fc(m)}catch{return f}}var wa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Um={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yc;function Ea(){}T(Ea,pc),Ea.prototype.g=function(){return new XMLHttpRequest},Ea.prototype.i=function(){return{}},yc=new Ea;function zn(u,f,m,x){this.j=u,this.i=f,this.l=m,this.R=x||1,this.U=new wi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zm}function zm(){this.i=null,this.g="",this.h=!1}var $m={},vc={};function _c(u,f,m){u.L=1,u.v=Aa(Sn(f)),u.m=m,u.P=!0,Wm(u,null)}function Wm(u,f){u.F=Date.now(),Ta(u),u.A=Sn(u.v);var m=u.A,x=u.R;Array.isArray(x)||(x=[String(x)]),sg(m.i,"t",x),u.C=0,m=u.j.J,u.h=new zm,u.g=Tg(u.j,m?f:null,!u.m),0<u.O&&(u.M=new rS(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,x=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(Vm[0]=M.toString()),M=Vm);for(var L=0;L<M.length;L++){var $=Cm(m,M[L],x||f.handleEvent,!1,f.h||f);if(!$)break;f.g[$.key]=$}f=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Ti(),oS(u.i,u.u,u.A,u.l,u.R,u.m)}zn.prototype.ca=function(u){u=u.target;const f=this.M;f&&An(u)==3?f.j():this.Y(u)},zn.prototype.Y=function(u){try{if(u==this.g)e:{const at=An(this.g);var f=this.g.Ba();const ds=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||hg(this.g)))){this.J||at!=4||f==7||(f==8||0>=ds?Ti(3):Ti(2)),wc(this);var m=this.g.Z();this.X=m;t:if(Hm(this)){var x=hg(this.g);u="";var M=x.length,L=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ir(this),Ai(this);var $="";break t}this.h.i=new a.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,u+=this.h.i.decode(x[f],{stream:!(L&&f==M-1)});x.length=0,this.h.g+=u,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=m==200,aS(this.i,this.u,this.A,this.l,this.R,at,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Ye=this.g;if((ye=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ye)){var ue=ye;break t}}ue=null}if(m=ue)us(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ec(this,m);else{this.o=!1,this.s=3,yt(12),Ir(this),Ai(this);break e}}if(this.P){m=!0;let Jt;for(;!this.J&&this.C<$.length;)if(Jt=cS(this,$),Jt==vc){at==4&&(this.s=4,yt(14),m=!1),us(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==$m){this.s=4,yt(15),us(this.i,this.l,$,"[Invalid Chunk]"),m=!1;break}else us(this.i,this.l,Jt,null),Ec(this,Jt);if(Hm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||$.length!=0||this.h.h||(this.s=1,yt(16),m=!1),this.o=this.o&&m,!m)us(this.i,this.l,$,"[Invalid Chunked Response]"),Ir(this),Ai(this);else if(0<$.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Cc(ot),ot.M=!0,yt(11))}}else us(this.i,this.l,$,null),Ec(this,$);at==4&&Ir(this),this.o&&!this.J&&(at==4?vg(this.j,this):(this.o=!1,Ta(this)))}else CS(this.g),m==400&&0<$.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Ir(this),Ai(this)}}}catch{}finally{}};function Hm(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function cS(u,f){var m=u.C,x=f.indexOf(`
`,m);return x==-1?vc:(m=Number(f.substring(m,x)),isNaN(m)?$m:(x+=1,x+m>f.length?vc:(f=f.slice(x,x+m),u.C=x+m,f)))}zn.prototype.cancel=function(){this.J=!0,Ir(this)};function Ta(u){u.S=Date.now()+u.I,Km(u,u.I)}function Km(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=xi(p(u.ba,u),f)}function wc(u){u.B&&(a.clearTimeout(u.B),u.B=null)}zn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(lS(this.i,this.A),this.L!=2&&(Ti(),yt(17)),Ir(this),this.s=2,Ai(this)):Km(this,this.S-u)};function Ai(u){u.j.G==0||u.J||vg(u.j,u)}function Ir(u){wc(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Dm(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Ec(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Tc(m.h,u))){if(!u.K&&Tc(m.h,u)&&m.G==3){try{var x=m.Da.g.parse(f)}catch{x=null}if(Array.isArray(x)&&x.length==3){var M=x;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)ka(m),Ra(m);else break e;Pc(m),yt(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=xi(p(m.Za,m),6e3));if(1>=Qm(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Nr(m,11)}else if((u.K||m.g==u)&&ka(m),!w(f))for(M=m.Da.g.parse(f),f=0;f<M.length;f++){let ue=M[f];if(m.T=ue[0],ue=ue[1],m.G==2)if(ue[0]=="c"){m.K=ue[1],m.ia=ue[2];const ot=ue[3];ot!=null&&(m.la=ot,m.j.info("VER="+m.la));const at=ue[4];at!=null&&(m.Aa=at,m.j.info("SVER="+m.Aa));const ds=ue[5];ds!=null&&typeof ds=="number"&&0<ds&&(x=1.5*ds,m.L=x,m.j.info("backChannelRequestTimeoutMs_="+x)),x=m;const Jt=u.g;if(Jt){const Va=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Va){var L=x.h;L.g||Va.indexOf("spdy")==-1&&Va.indexOf("quic")==-1&&Va.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(xc(L,L.h),L.h=null))}if(x.D){const Ic=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ic&&(x.ya=Ic,we(x.I,x.D,Ic))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),x=m;var $=u;if(x.qa=Eg(x,x.J?x.ia:null,x.W),$.K){Ym(x.h,$);var ye=$,Ye=x.L;Ye&&(ye.I=Ye),ye.B&&(wc(ye),Ta(ye)),x.g=$}else gg(x);0<m.i.length&&Na(m)}else ue[0]!="stop"&&ue[0]!="close"||Nr(m,7);else m.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?Nr(m,7):Ac(m):ue[0]!="noop"&&m.l&&m.l.ta(ue),m.v=0)}}Ti(4)}catch{}}var hS=class{constructor(u,f){this.g=u,this.map=f}};function qm(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Gm(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Qm(u){return u.h?1:u.g?u.g.size:0}function Tc(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function xc(u,f){u.g?u.g.add(f):u.h=f}function Ym(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}qm.prototype.cancel=function(){if(this.i=Xm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Xm(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return A(u.i)}function dS(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,x=0;x<m;x++)f.push(u[x]);return f}f=[],m=0;for(x in u)f[m++]=u[x];return f}function fS(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const x in u)f[m++]=x;return f}}}function Jm(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=fS(u),x=dS(u),M=x.length,L=0;L<M;L++)f.call(void 0,x[L],m&&m[L],u)}var Zm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pS(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var x=u[m].indexOf("="),M=null;if(0<=x){var L=u[m].substring(0,x);M=u[m].substring(x+1)}else L=u[m];f(L,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Rr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Rr){this.h=u.h,xa(this,u.j),this.o=u.o,this.g=u.g,Sa(this,u.s),this.l=u.l;var f=u.i,m=new Ii;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),eg(this,m),this.m=u.m}else u&&(f=String(u).match(Zm))?(this.h=!1,xa(this,f[1]||"",!0),this.o=Pi(f[2]||""),this.g=Pi(f[3]||"",!0),Sa(this,f[4]),this.l=Pi(f[5]||"",!0),eg(this,f[6]||"",!0),this.m=Pi(f[7]||"")):(this.h=!1,this.i=new Ii(null,this.h))}Rr.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Ci(f,tg,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Ci(f,tg,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Ci(m,m.charAt(0)=="/"?yS:gS,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Ci(m,_S)),u.join("")};function Sn(u){return new Rr(u)}function xa(u,f,m){u.j=m?Pi(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Sa(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function eg(u,f,m){f instanceof Ii?(u.i=f,wS(u.i,u.h)):(m||(f=Ci(f,vS)),u.i=new Ii(f,u.h))}function we(u,f,m){u.i.set(f,m)}function Aa(u){return we(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Pi(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ci(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,mS),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function mS(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var tg=/[#\/\?@]/g,gS=/[#\?:]/g,yS=/[#\?]/g,vS=/[#\?@]/g,_S=/#/g;function Ii(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function $n(u){u.g||(u.g=new Map,u.h=0,u.i&&pS(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=Ii.prototype,t.add=function(u,f){$n(this),this.i=null,u=cs(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function ng(u,f){$n(u),f=cs(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function rg(u,f){return $n(u),f=cs(u,f),u.g.has(f)}t.forEach=function(u,f){$n(this),this.g.forEach(function(m,x){m.forEach(function(M){u.call(f,M,x,this)},this)},this)},t.na=function(){$n(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let x=0;x<f.length;x++){const M=u[x];for(let L=0;L<M.length;L++)m.push(f[x])}return m},t.V=function(u){$n(this);let f=[];if(typeof u=="string")rg(this,u)&&(f=f.concat(this.g.get(cs(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return $n(this),this.i=null,u=cs(this,u),rg(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function sg(u,f,m){ng(u,f),0<m.length&&(u.i=null,u.g.set(cs(u,f),A(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var x=f[m];const L=encodeURIComponent(String(x)),$=this.V(x);for(x=0;x<$.length;x++){var M=L;$[x]!==""&&(M+="="+encodeURIComponent(String($[x]))),u.push(M)}}return this.i=u.join("&")};function cs(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function wS(u,f){f&&!u.j&&($n(u),u.i=null,u.g.forEach(function(m,x){var M=x.toLowerCase();x!=M&&(ng(this,x),sg(this,M,m))},u)),u.j=f}function ES(u,f){const m=new Si;if(a.Image){const x=new Image;x.onload=g(Wn,m,"TestLoadImage: loaded",!0,f,x),x.onerror=g(Wn,m,"TestLoadImage: error",!1,f,x),x.onabort=g(Wn,m,"TestLoadImage: abort",!1,f,x),x.ontimeout=g(Wn,m,"TestLoadImage: timeout",!1,f,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=u}else f(!1)}function TS(u,f){const m=new Si,x=new AbortController,M=setTimeout(()=>{x.abort(),Wn(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:x.signal}).then(L=>{clearTimeout(M),L.ok?Wn(m,"TestPingServer: ok",!0,f):Wn(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),Wn(m,"TestPingServer: error",!1,f)})}function Wn(u,f,m,x,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),x(m)}catch{}}function xS(){this.g=new iS}function SS(u,f,m){const x=m||"";try{Jm(u,function(M,L){let $=M;c(M)&&($=fc(M)),f.push(x+L+"="+encodeURIComponent($))})}catch(M){throw f.push(x+"type="+encodeURIComponent("_badmap")),M}}function Pa(u){this.l=u.Ub||null,this.j=u.eb||!1}T(Pa,pc),Pa.prototype.g=function(){return new Ca(this.l,this.j)},Pa.prototype.i=function(u){return function(){return u}}({});function Ca(u,f){it.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Ca,it),t=Ca.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Ni(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ri(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ni(this)),this.g&&(this.readyState=3,Ni(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ig(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ig(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Ri(this):Ni(this),this.readyState==3&&ig(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ri(this))},t.Qa=function(u){this.g&&(this.response=u,Ri(this))},t.ga=function(){this.g&&Ri(this)};function Ri(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ni(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function Ni(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function og(u){let f="";return O(u,function(m,x){f+=x,f+=":",f+=m,f+=`\r
`}),f}function Sc(u,f,m){e:{for(x in m){var x=!1;break e}x=!0}x||(m=og(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):we(u,f,m))}function ke(u){it.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(ke,it);var AS=/^https?$/i,PS=["POST","PUT"];t=ke.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yc.g(),this.v=this.o?Mm(this.o):Mm(yc),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(L){ag(this,L);return}if(u=m||"",m=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var M in x)m.set(M,x[M]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const L of x.keys())m.set(L,x.get(L));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(PS,f,void 0))||x||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,$]of m)this.g.setRequestHeader(L,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cg(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){ag(this,L)}};function ag(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,lg(u),Ia(u)}function lg(u){u.A||(u.A=!0,gt(u,"complete"),gt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,gt(this,"complete"),gt(this,"abort"),Ia(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ia(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ug(this):this.bb())},t.bb=function(){ug(this)};function ug(u){if(u.h&&typeof o<"u"&&(!u.v[1]||An(u)!=4||u.Z()!=2)){if(u.u&&An(u)==4)km(u.Ea,0,u);else if(gt(u,"readystatechange"),An(u)==4){u.h=!1;try{const $=u.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var x;if(x=$===0){var M=String(u.D).match(Zm)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),x=!AS.test(M?M.toLowerCase():"")}m=x}if(m)gt(u,"complete"),gt(u,"success");else{u.m=6;try{var L=2<An(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",lg(u)}}finally{Ia(u)}}}}function Ia(u,f){if(u.g){cg(u);const m=u.g,x=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||gt(u,"ready");try{m.onreadystatechange=x}catch{}}}function cg(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function An(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),sS(f)}};function hg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function CS(u){const f={};u=(u.g&&2<=An(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<u.length;x++){if(w(u[x]))continue;var m=R(u[x]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=f[M]||[];f[M]=L,L.push(m)}C(f,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ki(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function dg(u){this.Aa=0,this.i=[],this.j=new Si,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ki("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ki("baseRetryDelayMs",5e3,u),this.cb=ki("retryDelaySeedMs",1e4,u),this.Wa=ki("forwardChannelMaxRetries",2,u),this.wa=ki("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new qm(u&&u.concurrentRequestLimit),this.Da=new xS,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=dg.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,x){yt(0),this.W=u,this.H=f||{},m&&x!==void 0&&(this.H.OSID=m,this.H.OAID=x),this.F=this.X,this.I=Eg(this,null,this.W),Na(this)};function Ac(u){if(fg(u),u.G==3){var f=u.U++,m=Sn(u.I);if(we(m,"SID",u.K),we(m,"RID",f),we(m,"TYPE","terminate"),bi(u,m),f=new zn(u,u.j,f),f.L=2,f.v=Aa(Sn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=Tg(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ta(f)}wg(u)}function Ra(u){u.g&&(Cc(u),u.g.cancel(),u.g=null)}function fg(u){Ra(u),u.u&&(a.clearTimeout(u.u),u.u=null),ka(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Na(u){if(!Gm(u.h)&&!u.s){u.s=!0;var f=u.Ga;z||Q(),j||(z(),j=!0),H.add(f,u),u.B=0}}function IS(u,f){return Qm(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=xi(p(u.Ga,u,f),_g(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new zn(this,this.j,u);let L=this.o;if(this.S&&(L?(L=y(L),N(L,this.S)):L=this.S),this.m!==null||this.O||(M.H=L,L=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var x=this.i[m];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(f+=x,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=mg(this,M,f),m=Sn(this.I),we(m,"RID",u),we(m,"CVER",22),this.D&&we(m,"X-HTTP-Session-Id",this.D),bi(this,m),L&&(this.O?f="headers="+encodeURIComponent(String(og(L)))+"&"+f:this.m&&Sc(m,this.m,L)),xc(this.h,M),this.Ua&&we(m,"TYPE","init"),this.P?(we(m,"$req",f),we(m,"SID","null"),M.T=!0,_c(M,m,null)):_c(M,m,f),this.G=2}}else this.G==3&&(u?pg(this,u):this.i.length==0||Gm(this.h)||pg(this))};function pg(u,f){var m;f?m=f.l:m=u.U++;const x=Sn(u.I);we(x,"SID",u.K),we(x,"RID",m),we(x,"AID",u.T),bi(u,x),u.m&&u.o&&Sc(x,u.m,u.o),m=new zn(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=mg(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),xc(u.h,m),_c(m,x,f)}function bi(u,f){u.H&&O(u.H,function(m,x){we(f,x,m)}),u.l&&Jm({},function(m,x){we(f,x,m)})}function mg(u,f,m){m=Math.min(u.i.length,m);var x=u.l?p(u.l.Na,u.l,u):null;e:{var M=u.i;let L=-1;for(;;){const $=["count="+m];L==-1?0<m?(L=M[0].g,$.push("ofs="+L)):L=0:$.push("ofs="+L);let ye=!0;for(let Ye=0;Ye<m;Ye++){let ue=M[Ye].g;const ot=M[Ye].map;if(ue-=L,0>ue)L=Math.max(0,M[Ye].g-100),ye=!1;else try{SS(ot,$,"req"+ue+"_")}catch{x&&x(ot)}}if(ye){x=$.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,x}function gg(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;z||Q(),j||(z(),j=!0),H.add(f,u),u.v=0}}function Pc(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=xi(p(u.Fa,u),_g(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,yg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=xi(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Ra(this),yg(this))};function Cc(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function yg(u){u.g=new zn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Sn(u.qa);we(f,"RID","rpc"),we(f,"SID",u.K),we(f,"AID",u.T),we(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&we(f,"TO",u.ja),we(f,"TYPE","xmlhttp"),bi(u,f),u.m&&u.o&&Sc(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Aa(Sn(f)),m.m=null,m.P=!0,Wm(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Ra(this),Pc(this),yt(19))};function ka(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function vg(u,f){var m=null;if(u.g==f){ka(u),Cc(u),u.g=null;var x=2}else if(Tc(u.h,f))m=f.D,Ym(u.h,f),x=1;else return;if(u.G!=0){if(f.o)if(x==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var M=u.B;x=_a(),gt(x,new Bm(x,m)),Na(u)}else gg(u);else if(M=f.s,M==3||M==0&&0<f.X||!(x==1&&IS(u,f)||x==2&&Pc(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),M){case 1:Nr(u,5);break;case 4:Nr(u,10);break;case 3:Nr(u,6);break;default:Nr(u,2)}}}function _g(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Nr(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),x=u.Xa;const M=!x;x=new Rr(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||xa(x,"https"),Aa(x),M?ES(x.toString(),m):TS(x.toString(),m)}else yt(2);u.G=0,u.l&&u.l.sa(f),wg(u),fg(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function wg(u){if(u.G=0,u.ka=[],u.l){const f=Xm(u.h);(f.length!=0||u.i.length!=0)&&(I(u.ka,f),I(u.ka,u.i),u.h.i.length=0,A(u.i),u.i.length=0),u.l.ra()}}function Eg(u,f,m){var x=m instanceof Rr?Sn(m):new Rr(m);if(x.g!="")f&&(x.g=f+"."+x.g),Sa(x,x.s);else{var M=a.location;x=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var L=new Rr(null);x&&xa(L,x),f&&(L.g=f),M&&Sa(L,M),m&&(L.l=m),x=L}return m=u.D,f=u.ya,m&&f&&we(x,m,f),we(x,"VER",u.la),bi(u,x),x}function Tg(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new ke(new Pa({eb:m})):new ke(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xg(){}t=xg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ba(){}ba.prototype.g=function(u,f){return new Dt(u,f)};function Dt(u,f){it.call(this),this.g=new dg(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!w(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new hs(this)}T(Dt,it),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){Ac(this.g)},Dt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=fc(u),u=m);f.i.push(new hS(f.Ya++,u)),f.G==3&&Na(f)},Dt.prototype.N=function(){this.g.l=null,delete this.j,Ac(this.g),delete this.g,Dt.aa.N.call(this)};function Sg(u){mc.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}T(Sg,mc);function Ag(){gc.call(this),this.status=1}T(Ag,gc);function hs(u){this.g=u}T(hs,xg),hs.prototype.ua=function(){gt(this.g,"a")},hs.prototype.ta=function(u){gt(this.g,new Sg(u))},hs.prototype.sa=function(u){gt(this.g,new Ag)},hs.prototype.ra=function(){gt(this.g,"b")},ba.prototype.createWebChannel=ba.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,$w=function(){return new ba},zw=function(){return _a()},Uw=Cr,Cd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wa.NO_ERROR=0,wa.TIMEOUT=8,wa.HTTP_ERROR=6,gl=wa,Um.COMPLETE="complete",Bw=Um,Lm.EventType=Ei,Ei.OPEN="a",Ei.CLOSE="b",Ei.ERROR="c",Ei.MESSAGE="d",it.prototype.listen=it.prototype.K,qi=Lm,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,Fw=ke}).apply(typeof Xa<"u"?Xa:typeof self<"u"?self:typeof window<"u"?window:{});const t0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new bw("@firebase/firestore");function Ui(){return Jr.logLevel}function q(t,...e){if(Jr.logLevel<=ae.DEBUG){const n=e.map(ap);Jr.debug(`Firestore (${fi}): ${t}`,...n)}}function On(t,...e){if(Jr.logLevel<=ae.ERROR){const n=e.map(ap);Jr.error(`Firestore (${fi}): ${t}`,...n)}}function Js(t,...e){if(Jr.logLevel<=ae.WARN){const n=e.map(ap);Jr.warn(`Firestore (${fi}): ${t}`,...n)}}function ap(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${fi}) INTERNAL ASSERTION FAILED: `+t;throw On(e),new Error(e)}function pe(t,e){t||Z()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends di{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class iR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}}class oR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class aR{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new kn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new kn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new kn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string"),new Ww(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new ht(e)}}class lR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class uR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new lR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class cR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pe(this.o===void 0);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string"),this.R=n.token,new cR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=dR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function Zs(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ke(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Ke(0,0))}static max(){return new ee(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return jo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof jo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends jo{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const fR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends jo{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return fR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new et(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new G(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new G(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Se.fromString(e))}static fromName(e){return new X(Se.fromString(e).popFirst(5))}static empty(){return new X(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Se(e.slice()))}}function pR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new gr(s,X.empty(),e)}function mR(t){return new gr(t.readTime,t.key,-1)}class gr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new gr(ee.min(),X.empty(),-1)}static max(){return new gr(ee.max(),X.empty(),-1)}}function gR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ra(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==yR)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new B((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof B?n:B.resolve(n)}catch(n){return B.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):B.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):B.reject(n)}static resolve(e){return new B((n,r)=>{n(e)})}static reject(e){return new B((n,r)=>{r(e)})}static waitFor(e){return new B((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=B.resolve(!1);for(const r of e)n=n.next(s=>s?B.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new B((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new B((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function _R(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}lp.oe=-1;function Ou(t){return t==null}function nu(t){return t===0&&1/t==-1/0}function wR(t){return typeof t=="number"&&Number.isInteger(t)&&!nu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Kw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||Ze.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ja(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ja(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ja(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ja(this.root,e,this.comparator,!0)}}class Ja{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=s??Ze.EMPTY,this.right=i??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ze(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ze.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new r0(this.data.getIterator())}getIteratorFrom(e){return new r0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nt(this.comparator);return n.data=e,n}}class r0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new Ot([])}unionWith(e){let n=new nt(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ot(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new qw("Invalid base64 string: "+i):i}}(e);return new st(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new st(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const ER=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yr(t){if(pe(!!t),typeof t=="string"){let e=0;const n=ER.exec(t);if(pe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zr(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function cp(t){const e=t.mapValue.fields.__previous_value__;return up(e)?cp(e):e}function Fo(t){const e=yr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Bo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Bo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Bo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za={mapValue:{}};function es(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?up(t)?4:SR(t)?9007199254740991:xR(t)?10:11:Z()}function En(t,e){if(t===e)return!0;const n=es(t);if(n!==es(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fo(t).isEqual(Fo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=yr(s.timestampValue),a=yr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Zr(s.bytesValue).isEqual(Zr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Oe(s.geoPointValue.latitude)===Oe(i.geoPointValue.latitude)&&Oe(s.geoPointValue.longitude)===Oe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Oe(s.integerValue)===Oe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Oe(s.doubleValue),a=Oe(i.doubleValue);return o===a?nu(o)===nu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Zs(t.arrayValue.values||[],e.arrayValue.values||[],En);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(n0(o)!==n0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!En(o[l],a[l])))return!1;return!0}(t,e);default:return Z()}}function Uo(t,e){return(t.values||[]).find(n=>En(n,e))!==void 0}function ei(t,e){if(t===e)return 0;const n=es(t),r=es(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Oe(i.integerValue||i.doubleValue),l=Oe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return s0(t.timestampValue,e.timestampValue);case 4:return s0(Fo(t),Fo(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Zr(i),l=Zr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ce(a[c],l[c]);if(h!==0)return h}return ce(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ce(Oe(i.latitude),Oe(o.latitude));return a!==0?a:ce(Oe(i.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return i0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,h;const d=i.fields||{},p=o.fields||{},g=(a=d.value)===null||a===void 0?void 0:a.arrayValue,T=(l=p.value)===null||l===void 0?void 0:l.arrayValue,A=ce(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:i0(g,T)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Za.mapValue&&o===Za.mapValue)return 0;if(i===Za.mapValue)return 1;if(o===Za.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const p=ce(l[d],h[d]);if(p!==0)return p;const g=ei(a[l[d]],c[h[d]]);if(g!==0)return g}return ce(l.length,h.length)}(t.mapValue,e.mapValue);default:throw Z()}}function s0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=yr(t),r=yr(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function i0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ei(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function ti(t){return Id(t)}function Id(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=yr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Id(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Id(n.fields[o])}`;return s+"}"}(t.mapValue):Z()}function Rd(t){return!!t&&"integerValue"in t}function hp(t){return!!t&&"arrayValue"in t}function o0(t){return!!t&&"nullValue"in t}function a0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yl(t){return!!t&&"mapValue"in t}function xR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ao(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return is(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ao(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ao(t.arrayValue.values[n]);return e}return Object.assign({},t)}function SR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ao(n)}setAll(e){let n=et.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ao(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());yl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return En(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];yl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){is(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new It(ao(this.value))}}function Gw(t){const e=[];return is(t.fields,(n,r)=>{const s=new et([n]);if(yl(r)){const i=Gw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ot(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ft(e,0,ee.min(),ee.min(),ee.min(),It.empty(),0)}static newFoundDocument(e,n,r,s){return new ft(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new ft(e,2,n,ee.min(),ee.min(),It.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,ee.min(),ee.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this.position=e,this.inclusive=n}}function l0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=ei(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function u0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!En(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n="asc"){this.field=e,this.dir=n}}function AR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{}class We extends Qw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CR(e,n,r):n==="array-contains"?new NR(e,r):n==="in"?new kR(e,r):n==="not-in"?new bR(e,r):n==="array-contains-any"?new VR(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new IR(e,r):new RR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ei(n,this.value)):n!==null&&es(this.value)===es(n)&&this.matchesComparison(ei(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Tn extends Qw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Tn(e,n)}matches(e){return Yw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Yw(t){return t.op==="and"}function Xw(t){return PR(t)&&Yw(t)}function PR(t){for(const e of t.filters)if(e instanceof Tn)return!1;return!0}function Nd(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+ti(t.value);if(Xw(t))return t.filters.map(e=>Nd(e)).join(",");{const e=t.filters.map(n=>Nd(n)).join(",");return`${t.op}(${e})`}}function Jw(t,e){return t instanceof We?function(r,s){return s instanceof We&&r.op===s.op&&r.field.isEqual(s.field)&&En(r.value,s.value)}(t,e):t instanceof Tn?function(r,s){return s instanceof Tn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&Jw(o,s.filters[a]),!0):!1}(t,e):void Z()}function Zw(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${ti(n.value)}`}(t):t instanceof Tn?function(n){return n.op.toString()+" {"+n.getFilters().map(Zw).join(" ,")+"}"}(t):"Filter"}class CR extends We{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class IR extends We{constructor(e,n){super(e,"in",n),this.keys=eE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class RR extends We{constructor(e,n){super(e,"not-in",n),this.keys=eE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function eE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class NR extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return hp(n)&&Uo(n.arrayValue,this.value)}}class kR extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Uo(this.value.arrayValue,n)}}class bR extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(Uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Uo(this.value.arrayValue,n)}}class VR extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!hp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Uo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function c0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new DR(t,e,n,r,s,i,o)}function dp(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Nd(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ou(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ti(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ti(r)).join(",")),e.ue=n}return e.ue}function fp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!AR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Jw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!u0(t.startAt,e.startAt)&&u0(t.endAt,e.endAt)}function kd(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function MR(t,e,n,r,s,i,o,a){return new ju(t,e,n,r,s,i,o,a)}function Fu(t){return new ju(t)}function h0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function LR(t){return t.collectionGroup!==null}function lo(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new nt(et.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new su(i,r))}),n.has(et.keyField().canonicalString())||e.ce.push(new su(et.keyField(),r))}return e.ce}function gn(t){const e=te(t);return e.le||(e.le=OR(e,lo(t))),e.le}function OR(t,e){if(t.limitType==="F")return c0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new su(s.field,i)});const n=t.endAt?new ru(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ru(t.startAt.position,t.startAt.inclusive):null;return c0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bd(t,e,n){return new ju(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bu(t,e){return fp(gn(t),gn(e))&&t.limitType===e.limitType}function tE(t){return`${dp(gn(t))}|lt:${t.limitType}`}function ps(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Zw(s)).join(", ")}]`),Ou(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ti(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ti(s)).join(",")),`Target(${r})`}(gn(t))}; limitType=${t.limitType})`}function Uu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of lo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=l0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,lo(r),s)||r.endAt&&!function(o,a,l){const c=l0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,lo(r),s))}(t,e)}function jR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nE(t){return(e,n)=>{let r=!1;for(const s of lo(t)){const i=FR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function FR(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?ei(l,c):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){is(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Kw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=new Ne(X.comparator);function jn(){return BR}const rE=new Ne(X.comparator);function Gi(...t){let e=rE;for(const n of t)e=e.insert(n.key,n);return e}function sE(t){let e=rE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fr(){return uo()}function iE(){return uo()}function uo(){return new pi(t=>t.toString(),(t,e)=>t.isEqual(e))}const UR=new Ne(X.comparator),zR=new nt(X.comparator);function ie(...t){let e=zR;for(const n of t)e=e.add(n);return e}const $R=new nt(ce);function WR(){return $R}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nu(e)?"-0":e}}function oE(t){return{integerValue:""+t}}function HR(t,e){return wR(e)?oE(e):pp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(){this._=void 0}}function KR(t,e,n){return t instanceof iu?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&up(i)&&(i=cp(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof zo?lE(t,e):t instanceof $o?uE(t,e):function(s,i){const o=aE(s,i),a=d0(o)+d0(s.Pe);return Rd(o)&&Rd(s.Pe)?oE(a):pp(s.serializer,a)}(t,e)}function qR(t,e,n){return t instanceof zo?lE(t,e):t instanceof $o?uE(t,e):n}function aE(t,e){return t instanceof ou?function(r){return Rd(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class iu extends zu{}class zo extends zu{constructor(e){super(),this.elements=e}}function lE(t,e){const n=cE(e);for(const r of t.elements)n.some(s=>En(s,r))||n.push(r);return{arrayValue:{values:n}}}class $o extends zu{constructor(e){super(),this.elements=e}}function uE(t,e){let n=cE(e);for(const r of t.elements)n=n.filter(s=>!En(s,r));return{arrayValue:{values:n}}}class ou extends zu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function d0(t){return Oe(t.integerValue||t.doubleValue)}function cE(t){return hp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function GR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof zo&&s instanceof zo||r instanceof $o&&s instanceof $o?Zs(r.elements,s.elements,En):r instanceof ou&&s instanceof ou?En(r.Pe,s.Pe):r instanceof iu&&s instanceof iu}(t.transform,e.transform)}class QR{constructor(e,n){this.version=e,this.transformResults=n}}class Et{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Et}static exists(e){return new Et(void 0,e)}static updateTime(e){return new Et(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class $u{}function hE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wu(t.key,Et.none()):new ia(t.key,t.data,Et.none());{const n=t.data,r=It.empty();let s=new nt(et.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ar(t.key,r,new Ot(s.toArray()),Et.none())}}function YR(t,e,n){t instanceof ia?function(s,i,o){const a=s.value.clone(),l=p0(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ar?function(s,i,o){if(!vl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=p0(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(dE(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function co(t,e,n,r){return t instanceof ia?function(i,o,a,l){if(!vl(i.precondition,o))return a;const c=i.value.clone(),h=m0(i.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ar?function(i,o,a,l){if(!vl(i.precondition,o))return a;const c=m0(i.fieldTransforms,l,o),h=o.data;return h.setAll(dE(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return vl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function XR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=aE(r.transform,s||null);i!=null&&(n===null&&(n=It.empty()),n.set(r.field,i))}return n||null}function f0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Zs(r,s,(i,o)=>GR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ia extends $u{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ar extends $u{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function dE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function p0(t,e,n){const r=new Map;pe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,qR(o,a,n[s]))}return r}function m0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,KR(i,o,e))}return r}class Wu extends $u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JR extends $u{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&YR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=co(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=iE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=hE(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,(n,r)=>f0(n,r))&&Zs(this.baseMutations,e.baseMutations,(n,r)=>f0(n,r))}}class mp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){pe(e.mutations.length===r.length);let s=function(){return UR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new mp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,oe;function n4(t){switch(t){default:return Z();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function fE(t){if(t===void 0)return On("GRPC error has no .code"),F.UNKNOWN;switch(t){case Fe.OK:return F.OK;case Fe.CANCELLED:return F.CANCELLED;case Fe.UNKNOWN:return F.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return F.INTERNAL;case Fe.UNAVAILABLE:return F.UNAVAILABLE;case Fe.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Fe.NOT_FOUND:return F.NOT_FOUND;case Fe.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Fe.ABORTED:return F.ABORTED;case Fe.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Fe.DATA_LOSS:return F.DATA_LOSS;default:return Z()}}(oe=Fe||(Fe={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=new Wr([4294967295,4294967295],0);function g0(t){const e=r4().encode(t),n=new jw;return n.update(e),new Uint8Array(n.digest())}function y0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Wr([n,r],0),new Wr([s,i],0)]}class gp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qi(`Invalid padding: ${n}`);if(r<0)throw new Qi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qi(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Wr.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Wr.fromNumber(r)));return s.compare(s4)===1&&(s=new Wr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=g0(e),[r,s]=y0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new gp(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=g0(e),[r,s]=y0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Qi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,oa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hu(ee.min(),s,new Ne(ce),jn(),ie())}}class oa{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new oa(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class pE{constructor(e,n){this.targetId=e,this.me=n}}class mE{constructor(e,n,r=st.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class v0{constructor(){this.fe=0,this.ge=w0(),this.pe=st.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new oa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=w0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class i4{constructor(e){this.Le=e,this.Be=new Map,this.ke=jn(),this.qe=_0(),this.Qe=new Ne(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(kd(i))if(r===0){const o=new X(i.path);this.Ue(n,o,ft.newNoDocument(o,ee.min()))}else pe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Zr(r).toUint8Array()}catch(l){if(l instanceof qw)return Js("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new gp(o,s,i)}catch(l){return Js(l instanceof Qi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&kd(a.target)){const l=new X(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ft.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ie();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Hu(e,n,this.Qe,this.ke,r);return this.ke=jn(),this.qe=_0(),this.Qe=new Ne(ce),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new v0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new nt(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new v0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function _0(){return new Ne(X.comparator)}function w0(){return new Ne(X.comparator)}const o4={asc:"ASCENDING",desc:"DESCENDING"},a4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l4={and:"AND",or:"OR"};class u4{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vd(t,e){return t.useProto3Json||Ou(e)?e:{value:e}}function au(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function c4(t,e){return au(t,e.toTimestamp())}function yn(t){return pe(!!t),ee.fromTimestamp(function(n){const r=yr(n);return new Ke(r.seconds,r.nanos)}(t))}function yp(t,e){return Dd(t,e).canonicalString()}function Dd(t,e){const n=function(s){return new Se(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function yE(t){const e=Se.fromString(t);return pe(TE(e)),e}function Md(t,e){return yp(t.databaseId,e.path)}function oh(t,e){const n=yE(e);if(n.get(1)!==t.databaseId.projectId)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(_E(n))}function vE(t,e){return yp(t.databaseId,e)}function h4(t){const e=yE(t);return e.length===4?Se.emptyPath():_E(e)}function Ld(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _E(t){return pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function E0(t,e,n){return{name:Md(t,e),fields:n.value.mapValue.fields}}function d4(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(pe(h===void 0||typeof h=="string"),st.fromBase64String(h||"")):(pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),st.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:fE(c.code);return new G(h,c.message||"")}(o);n=new mE(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=oh(t,r.document.name),i=yn(r.document.updateTime),o=r.document.createTime?yn(r.document.createTime):ee.min(),a=new It({mapValue:{fields:r.document.fields}}),l=ft.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new _l(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=oh(t,r.document),i=r.readTime?yn(r.readTime):ee.min(),o=ft.newNoDocument(s,i),a=r.removedTargetIds||[];n=new _l([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=oh(t,r.document),i=r.removedTargetIds||[];n=new _l([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new t4(s,i),a=r.targetId;n=new pE(a,o)}}return n}function f4(t,e){let n;if(e instanceof ia)n={update:E0(t,e.key,e.value)};else if(e instanceof Wu)n={delete:Md(t,e.key)};else if(e instanceof Ar)n={update:E0(t,e.key,e.data),updateMask:T4(e.fieldMask)};else{if(!(e instanceof JR))return Z();n={verify:Md(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof iu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $o)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ou)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:c4(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z()}(t,e.precondition)),n}function p4(t,e){return t&&t.length>0?(pe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?yn(s.updateTime):yn(i);return o.isEqual(ee.min())&&(o=yn(i)),new QR(o,s.transformResults||[])}(n,e))):[]}function m4(t,e){return{documents:[vE(t,e.path)]}}function g4(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vE(t,s);const i=function(c){if(c.length!==0)return EE(Tn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:ms(p.field),direction:_4(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Vd(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function y4(t){let e=h4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){pe(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const p=wE(d);return p instanceof Tn&&Xw(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(p=>function(T){return new su(gs(T.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,Ou(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(d){const p=!!d.before,g=d.values||[];return new ru(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const p=!d.before,g=d.values||[];return new ru(g,p)}(n.endAt)),MR(e,s,o,i,a,"F",l,c)}function v4(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gs(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=gs(n.unaryFilter.field);return We.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=gs(n.unaryFilter.field);return We.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gs(n.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return We.create(gs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Tn.create(n.compositeFilter.filters.map(r=>wE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function _4(t){return o4[t]}function w4(t){return a4[t]}function E4(t){return l4[t]}function ms(t){return{fieldPath:t.canonicalString()}}function gs(t){return et.fromServerFormat(t.fieldPath)}function EE(t){return t instanceof We?function(n){if(n.op==="=="){if(a0(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NAN"}};if(o0(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(a0(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NAN"}};if(o0(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ms(n.field),op:w4(n.op),value:n.value}}}(t):t instanceof Tn?function(n){const r=n.getFilters().map(s=>EE(s));return r.length===1?r[0]:{compositeFilter:{op:E4(n.op),filters:r}}}(t):Z()}function T4(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n,r,s,i=ee.min(),o=ee.min(),a=st.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(e){this.ct=e}}function S4(t){const e=y4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(){this.un=new P4}addToCollectionParentIndex(e,n){return this.un.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(gr.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(gr.min())}updateCollectionGroup(e,n,r){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}}class P4{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new nt(Se.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new nt(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ni(0)}static kn(){return new ni(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this.changes=new pi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?B.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&co(r.mutation,s,Ot.empty(),Ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=Fr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Gi();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Fr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=jn();const o=uo(),a=function(){return uo()}();return n.forEach((l,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Ar)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),co(h.mutation,c,h.mutation.getFieldMask(),Ke.now())):o.set(c.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new I4(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=uo();let s=new Ne((o,a)=>o-a),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Ot.empty();h=a.applyToLocalView(c,h),r.set(l,h);const d=(s.get(a.batchId)||ie()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,d=iE();h.forEach(p=>{if(!i.has(p)){const g=hE(n.get(p),r.get(p));g!==null&&d.set(p,g),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):LR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):B.resolve(Fr());let a=-1,l=i;return o.next(c=>B.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,ie())).next(h=>({batchId:a,changes:sE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=Gi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Gi();return this.indexManager.getCollectionParents(e,i).next(a=>B.forEach(a,l=>{const c=function(d,p){return new ju(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,ft.newInvalidDocument(h)))});let a=Gi();return o.forEach((l,c)=>{const h=i.get(l);h!==void 0&&co(h.mutation,c,Ot.empty(),Ke.now()),Uu(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return B.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:yn(s.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:S4(s.bundledQuery),readTime:yn(s.readTime)}}(n)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(){this.overlays=new Ne(X.comparator),this.Ir=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fr();return B.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),B.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),B.resolve()}getOverlaysForCollection(e,n,r){const s=Fr(),i=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return B.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ne((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Fr(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Fr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return B.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new e4(n,r));let i=this.Ir.get(n);i===void 0&&(i=ie(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(){this.Tr=new nt(qe.Er),this.dr=new nt(qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new X(new Se([])),r=new qe(n,e),s=new qe(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new Se([])),r=new qe(n,e),s=new qe(n,e+1);let i=ie();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new nt(qe.Er)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ZR(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new qe(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,n){return B.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),s=new qe(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nt(ce);return n.forEach(s=>{const i=new qe(s,0),o=new qe(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),B.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new qe(new X(i),0);let a=new nt(ce);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),B.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return B.forEach(n.mutations,s=>{const i=new qe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new qe(n,0),s=this.br.firstAfterOrEqual(r);return B.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e){this.Mr=e,this.docs=function(){return new Ne(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return B.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=jn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ft.newInvalidDocument(s))}),B.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=jn();const o=n.path,a=new X(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||gR(mR(h),r)<=0||(s.has(h.key)||Uu(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z()}Or(e,n){return B.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new M4(this)}getSize(e){return B.resolve(this.size)}}class M4 extends C4{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),B.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e){this.persistence=e,this.Nr=new pi(n=>dp(n),fp),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new vp,this.targetCount=0,this.kr=ni.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),B.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ni(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.Kn(n),B.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return B.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),B.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),B.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return B.resolve(r)}containsKey(e,n){return B.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,n){this.qr={},this.overlays={},this.Qr=new lp(0),this.Kr=!1,this.Kr=!0,this.$r=new b4,this.referenceDelegate=e(this),this.Ur=new L4(this),this.indexManager=new A4,this.remoteDocumentCache=function(s){return new D4(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new x4(n),this.Gr=new N4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new k4,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new V4(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new j4(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return B.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class j4 extends vR{constructor(e){super(),this.currentSequenceNumber=e}}class _p{constructor(e){this.persistence=e,this.Jr=new vp,this.Yr=null}static Zr(e){return new _p(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),B.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),B.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Xr,r=>{const s=X.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return B.or([()=>B.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new wp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return UC()?8:_R(FC())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new F4;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ui()<=ae.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",ps(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),B.resolve()):(Ui()<=ae.DEBUG&&q("QueryEngine","Query:",ps(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ui()<=ae.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",ps(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gn(n))):B.resolve())}Yi(e,n){if(h0(n))return B.resolve(null);let r=gn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=bd(n,null,"F"),r=gn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ie(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,bd(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return h0(n)||s.isEqual(ee.min())?B.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?B.resolve(null):(Ui()<=ae.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ps(n)),this.rs(e,o,n,pR(s,-1)).next(a=>a))})}ts(e,n){let r=new nt(nE(e));return n.forEach((s,i)=>{Uu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ui()<=ae.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",ps(n)),this.Ji.getDocumentsMatchingQuery(e,n,gr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ne(ce),this._s=new pi(i=>dp(i),fp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R4(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function z4(t,e,n,r){return new U4(t,e,n,r)}async function xE(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=ie();for(const c of s){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function $4(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const d=c.batch,p=d.keys();let g=B.resolve();return p.forEach(T=>{g=g.next(()=>h.getEntry(l,T)).next(A=>{const I=c.docVersions.get(T);pe(I!==null),A.version.compareTo(I)<0&&(d.applyToRemoteDocument(A,c),A.isValidDocument()&&(A.setReadTime(c.commitVersion),h.addEntry(A)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ie();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function SE(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function W4(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const p=s.get(d);if(!p)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,d)));let g=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(st.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(d,g),function(A,I,_){return A.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,g,h)&&a.push(n.Ur.updateTargetData(i,g))});let l=jn(),c=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(H4(i,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(ee.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(d=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function H4(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=jn();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function K4(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function q4(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,B.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new tr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Od(t,e,n){const r=te(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!sa(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function T0(t,e,n){const r=te(t);let s=ee.min(),i=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const d=te(l),p=d._s.get(h);return p!==void 0?B.resolve(d.os.get(p)):d.Ur.getTargetData(c,h)}(r,o,gn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:ie())).next(a=>(G4(r,jR(e),a),{documents:a,Ts:i})))}function G4(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class x0{constructor(){this.activeTargetIds=WR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Q4{constructor(){this.so=new x0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new x0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el=null;function ah(){return el===null?el=function(){return 268435456+Math.round(2147483648*Math.random())}():el++,"0x"+el.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection";class Z4 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=ah(),l=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(h=>(q("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Js("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=X4[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=ah();return new Promise((o,a)=>{const l=new Fw;l.setWithCredentials(!0),l.listenOnce(Bw.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case gl.NO_ERROR:const h=l.getResponseJson();q(ct,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case gl.TIMEOUT:q(ct,`RPC '${e}' ${i} timed out`),a(new G(F.DEADLINE_EXCEEDED,"Request time out"));break;case gl.HTTP_ERROR:const d=l.getStatus();if(q(ct,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const T=function(I){const _=I.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(_)>=0?_:F.UNKNOWN}(g.status);a(new G(T,g.message))}else a(new G(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(F.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{q(ct,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);q(ct,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=ah(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$w(),a=zw(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=i.join("");q(ct,`Creating RPC '${e}' stream ${s}: ${h}`,l);const d=o.createWebChannel(h,l);let p=!1,g=!1;const T=new J4({Io:I=>{g?q(ct,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(p||(q(ct,`Opening RPC '${e}' stream ${s} transport.`),d.open(),p=!0),q(ct,`RPC '${e}' stream ${s} sending:`,I),d.send(I))},To:()=>d.close()}),A=(I,_,w)=>{I.listen(_,v=>{try{w(v)}catch(b){setTimeout(()=>{throw b},0)}})};return A(d,qi.EventType.OPEN,()=>{g||(q(ct,`RPC '${e}' stream ${s} transport opened.`),T.yo())}),A(d,qi.EventType.CLOSE,()=>{g||(g=!0,q(ct,`RPC '${e}' stream ${s} transport closed`),T.So())}),A(d,qi.EventType.ERROR,I=>{g||(g=!0,Js(ct,`RPC '${e}' stream ${s} transport errored:`,I),T.So(new G(F.UNAVAILABLE,"The operation could not be completed")))}),A(d,qi.EventType.MESSAGE,I=>{var _;if(!g){const w=I.data[0];pe(!!w);const v=w,b=v.error||((_=v[0])===null||_===void 0?void 0:_.error);if(b){q(ct,`RPC '${e}' stream ${s} received error:`,b);const D=b.status;let O=function(P){const N=Fe[P];if(N!==void 0)return fE(N)}(D),C=b.message;O===void 0&&(O=F.INTERNAL,C="Unknown error status: "+D+" with message "+b.message),g=!0,T.So(new G(O,C)),d.close()}else q(ct,`RPC '${e}' stream ${s} received:`,w),T.bo(w)}}),A(a,Uw.STAT_EVENT,I=>{I.stat===Cd.PROXY?q(ct,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===Cd.NOPROXY&&q(ct,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function lh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(t){return new u4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new AE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(On(n.toString()),On("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new G(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eN extends PE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=d4(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?yn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Ld(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=kd(l)?{documents:m4(i,l)}:{query:g4(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=gE(i,o.resumeToken);const c=Vd(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=au(i,o.snapshotVersion.toTimestamp());const c=Vd(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=v4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Ld(this.serializer),n.removeTarget=e,this.a_(n)}}class tN extends PE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=p4(e.writeResults,e.commitTime),r=yn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Ld(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>f4(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Dd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Dd(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class rN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(On(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{os(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=te(l);c.L_.add(4),await aa(c),c.q_.set("Unknown"),c.L_.delete(4),await qu(c)}(this))})}),this.q_=new rN(r,s)}}async function qu(t){if(os(t))for(const e of t.B_)await e(!0)}async function aa(t){for(const e of t.B_)await e(!1)}function CE(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Sp(n)?xp(n):mi(n).r_()&&Tp(n,e))}function Ep(t,e){const n=te(t),r=mi(n);n.N_.delete(e),r.r_()&&IE(n,e),n.N_.size===0&&(r.r_()?r.o_():os(n)&&n.q_.set("Unknown"))}function Tp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}mi(t).A_(e)}function IE(t,e){t.Q_.xe(e),mi(t).R_(e)}function xp(t){t.Q_=new i4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),mi(t).start(),t.q_.v_()}function Sp(t){return os(t)&&!mi(t).n_()&&t.N_.size>0}function os(t){return te(t).L_.size===0}function RE(t){t.Q_=void 0}async function iN(t){t.q_.set("Online")}async function oN(t){t.N_.forEach((e,n)=>{Tp(t,e)})}async function aN(t,e){RE(t),Sp(t)?(t.q_.M_(e),xp(t)):t.q_.set("Unknown")}async function lN(t,e,n){if(t.q_.set("Online"),e instanceof mE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lu(t,r)}else if(e instanceof _l?t.Q_.Ke(e):e instanceof pE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await SE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=i.N_.get(l);if(!h)return;i.N_.set(l,h.withResumeToken(st.EMPTY_BYTE_STRING,h.snapshotVersion)),IE(i,l);const d=new tr(h.target,l,c,h.sequenceNumber);Tp(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await lu(t,r)}}async function lu(t,e,n){if(!sa(e))throw e;t.L_.add(1),await aa(t),t.q_.set("Offline"),n||(n=()=>SE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await qu(t)})}function NE(t,e){return e().catch(n=>lu(t,n,e))}async function Gu(t){const e=te(t),n=vr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;uN(e);)try{const s=await K4(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,cN(e,s)}catch(s){await lu(e,s)}kE(e)&&bE(e)}function uN(t){return os(t)&&t.O_.length<10}function cN(t,e){t.O_.push(e);const n=vr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function kE(t){return os(t)&&!vr(t).n_()&&t.O_.length>0}function bE(t){vr(t).start()}async function hN(t){vr(t).p_()}async function dN(t){const e=vr(t);for(const n of t.O_)e.m_(n.mutations)}async function fN(t,e,n){const r=t.O_.shift(),s=mp.from(r,e,n);await NE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Gu(t)}async function pN(t,e){e&&vr(t).V_&&await async function(r,s){if(function(o){return n4(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();vr(r).s_(),await NE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Gu(r)}}(t,e),kE(t)&&bE(t)}async function A0(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=os(n);n.L_.add(3),await aa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await qu(n)}async function mN(t,e){const n=te(t);e?(n.L_.delete(2),await qu(n)):e||(n.L_.add(2),await aa(n),n.q_.set("Unknown"))}function mi(t){return t.K_||(t.K_=function(n,r,s){const i=te(n);return i.w_(),new eN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:iN.bind(null,t),Ro:oN.bind(null,t),mo:aN.bind(null,t),d_:lN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Sp(t)?xp(t):t.q_.set("Unknown")):(await t.K_.stop(),RE(t))})),t.K_}function vr(t){return t.U_||(t.U_=function(n,r,s){const i=te(n);return i.w_(),new tN(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:hN.bind(null,t),mo:pN.bind(null,t),f_:dN.bind(null,t),g_:fN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Gu(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Ap(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pp(t,e){if(On("AsyncQueue",`${e}: ${t}`),sa(t))return new G(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=Gi(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new zs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new zs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.W_=new Ne(X.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ri{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ri(e,n,zs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class yN{constructor(){this.queries=C0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=C0(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new G(F.ABORTED,"Firestore shutting down"))}}function C0(){return new pi(t=>tE(t),Bu)}async function Cp(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new gN,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Pp(o,`Initialization of query '${ps(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Rp(n)}async function Ip(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vN(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Rp(n)}function _N(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Rp(t){t.Y_.forEach(e=>{e.next()})}var jd,I0;(I0=jd||(jd={})).ea="default",I0.Cache="cache";class Np{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ri(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ri.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==jd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.key=e}}class DE{constructor(e){this.key=e}}class wN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=nE(e),this.Ra=new zs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new P0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const p=s.get(h),g=Uu(this.query,d)?d:null,T=!!p&&this.mutatedKeys.has(p.key),A=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let I=!1;p&&g?p.data.isEqual(g.data)?T!==A&&(r.track({type:3,doc:g}),I=!0):this.ga(p,g)||(r.track({type:2,doc:g}),I=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),I=!0):p&&!g&&(r.track({type:1,doc:p}),I=!0,(l||c)&&(a=!0)),I&&(g?(o=o.add(g),i=A?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(g,T){const A=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return A(g)-A(T)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new ri(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new P0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new DE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new VE(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ri.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class EN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class TN{constructor(e){this.key=e,this.va=!1}}class xN{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new pi(a=>tE(a),Bu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(X.comparator),this.Na=new Map,this.La=new vp,this.Ba={},this.ka=new Map,this.qa=ni.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function SN(t,e,n=!0){const r=BE(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await ME(r,e,n,!0),s}async function AN(t,e){const n=BE(t);await ME(n,e,!0,!1)}async function ME(t,e,n,r){const s=await q4(t.localStore,gn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await PN(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&CE(t.remoteStore,s),a}async function PN(t,e,n,r,s){t.Ka=(d,p,g)=>async function(A,I,_,w){let v=I.view.ma(_);v.ns&&(v=await T0(A.localStore,I.query,!1).then(({documents:C})=>I.view.ma(C,v)));const b=w&&w.targetChanges.get(I.targetId),D=w&&w.targetMismatches.get(I.targetId)!=null,O=I.view.applyChanges(v,A.isPrimaryClient,b,D);return N0(A,I.targetId,O.wa),O.snapshot}(t,d,p,g);const i=await T0(t.localStore,e,!0),o=new wN(e,i.Ts),a=o.ma(i.documents),l=oa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);N0(t,n,c.wa);const h=new EN(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function CN(t,e,n){const r=te(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Bu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Od(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ep(r.remoteStore,s.targetId),Fd(r,s.targetId)}).catch(ra)):(Fd(r,s.targetId),await Od(r.localStore,s.targetId,!0))}async function IN(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ep(n.remoteStore,r.targetId))}async function RN(t,e,n){const r=LN(t);try{const s=await function(o,a){const l=te(o),c=Ke.now(),h=a.reduce((g,T)=>g.add(T.key),ie());let d,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let T=jn(),A=ie();return l.cs.getEntries(g,h).next(I=>{T=I,T.forEach((_,w)=>{w.isValidDocument()||(A=A.add(_))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,T)).next(I=>{d=I;const _=[];for(const w of a){const v=XR(w,d.get(w.key).overlayedDocument);v!=null&&_.push(new Ar(w.key,v,Gw(v.value.mapValue),Et.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,_,a)}).next(I=>{p=I;const _=I.applyToLocalDocumentSet(d,A);return l.documentOverlayCache.saveOverlays(g,I.batchId,_)})}).then(()=>({batchId:p.batchId,changes:sE(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ne(ce)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await la(r,s.changes),await Gu(r.remoteStore)}catch(s){const i=Pp(s,"Failed to persist write");n.reject(i)}}async function LE(t,e){const n=te(t);try{const r=await W4(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?pe(o.va):s.removedDocuments.size>0&&(pe(o.va),o.va=!1))}),await la(n,r,e)}catch(r){await ra(r)}}function R0(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=te(o);l.onlineState=a;let c=!1;l.queries.forEach((h,d)=>{for(const p of d.j_)p.Z_(a)&&(c=!0)}),c&&Rp(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NN(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ne(X.comparator);o=o.insert(i,ft.newNoDocument(i,ee.min()));const a=ie().add(i),l=new Hu(ee.min(),new Map,new Ne(ce),o,a);await LE(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),kp(r)}else await Od(r.localStore,e,!1).then(()=>Fd(r,e,n)).catch(ra)}async function kN(t,e){const n=te(t),r=e.batch.batchId;try{const s=await $4(n.localStore,e);jE(n,r,null),OE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await la(n,s)}catch(s){await ra(s)}}async function bN(t,e,n){const r=te(t);try{const s=await function(o,a){const l=te(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(pe(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);jE(r,e,n),OE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await la(r,s)}catch(s){await ra(s)}}function OE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function jE(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Fd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||FE(t,r)})}function FE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Ep(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),kp(t))}function N0(t,e,n){for(const r of n)r instanceof VE?(t.La.addReference(r.key,e),VN(t,r)):r instanceof DE?(q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||FE(t,r.key)):Z()}function VN(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(r),kp(t))}function kp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(Se.fromString(e)),r=t.qa.next();t.Na.set(r,new TN(n)),t.Oa=t.Oa.insert(n,r),CE(t.remoteStore,new tr(gn(Fu(n.path)),r,"TargetPurposeLimboResolution",lp.oe))}}async function la(t,e,n){const r=te(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=wp.Wi(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const h=te(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>B.forEach(c,p=>B.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>B.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!sa(d))throw d;q("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const p=d.targetId;if(!d.fromCache){const g=h.os.get(p),T=g.snapshotVersion,A=g.withLastLimboFreeSnapshotVersion(T);h.os=h.os.insert(p,A)}}}(r.localStore,i))}async function DN(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await xE(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new G(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await la(n,r.hs)}}function MN(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let s=ie();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function BE(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NN.bind(null,e),e.Ca.d_=vN.bind(null,e.eventManager),e.Ca.$a=_N.bind(null,e.eventManager),e}function LN(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bN.bind(null,e),e}class uu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ku(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return z4(this.persistence,new B4,e.initialUser,this.serializer)}Ga(e){return new O4(_p.Zr,this.serializer)}Wa(e){return new Q4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uu.provider={build:()=>new uu};class Bd{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>R0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=DN.bind(null,this.syncEngine),await mN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yN}()}createDatastore(e){const n=Ku(e.databaseInfo.databaseId),r=function(i){return new Z4(i)}(e.databaseInfo);return function(i,o,a,l){return new nN(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new sN(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>R0(this.syncEngine,n,0),function(){return S0.D()?new S0:new Y4}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,h){const d=new xN(s,i,o,a,l,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await aa(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Bd.provider={build:()=>new Bd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):On("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ht.UNAUTHENTICATED,this.clientId=Hw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Pp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function uh(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await xE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function k0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jN(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>A0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>A0(e.remoteStore,s)),t._onlineComponents=e}async function jN(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await uh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Js("Error using user provided cache. Falling back to memory cache: "+n),await uh(t,new uu)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await uh(t,new uu);return t._offlineComponents}async function UE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await k0(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await k0(t,new Bd))),t._onlineComponents}function FN(t){return UE(t).then(e=>e.syncEngine)}async function cu(t){const e=await UE(t),n=e.eventManager;return n.onListen=SN.bind(null,e.syncEngine),n.onUnlisten=CN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=AN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=IN.bind(null,e.syncEngine),n}function BN(t,e,n={}){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new bp({next:p=>{h.Za(),o.enqueueAndForget(()=>Ip(i,d));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new G(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new G(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Np(Fu(a.path),h,{includeMetadataChanges:!0,_a:!0});return Cp(i,d)}(await cu(t),t.asyncQueue,e,n,r)),r.promise}function UN(t,e,n={}){const r=new kn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const h=new bp({next:p=>{h.Za(),o.enqueueAndForget(()=>Ip(i,d)),p.fromCache&&l.source==="server"?c.reject(new G(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),d=new Np(a,h,{includeMetadataChanges:!0,_a:!0});return Cp(i,d)}(await cu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t,e,n){if(!n)throw new G(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zN(t,e,n,r){if(e===!0&&r===!0)throw new G(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function V0(t){if(!X.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function D0(t){if(X.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Vp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Tt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Vp(t);throw new G(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new M0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new M0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iR;switch(r.type){case"firstParty":return new uR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=b0.get(n);r&&(q("ComponentProvider","Removing Datastore"),b0.delete(n),r.terminate())}(this),Promise.resolve()}}function $N(t,e,n,r={}){var s;const i=(t=Tt(t,Qu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ht.MOCK_USER;else{a=jC(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new G(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ht(c)}t._authCredentials=new oR(new Ww(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ua(this.firestore,e,this._query)}}class xt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}}class fr extends ua{constructor(e,n,r){super(e,n,Fu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new X(e))}withConverter(e){return new fr(this.firestore,e,this._path)}}function ca(t,e,...n){if(t=ln(t),$E("collection","path",e),t instanceof Qu){const r=Se.fromString(e,...n);return D0(r),new fr(t,null,r)}{if(!(t instanceof xt||t instanceof fr))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return D0(r),new fr(t.firestore,null,r)}}function gi(t,e,...n){if(t=ln(t),arguments.length===1&&(e=Hw.newId()),$E("doc","path",e),t instanceof Qu){const r=Se.fromString(e,...n);return V0(r),new xt(t,null,new X(r))}{if(!(t instanceof xt||t instanceof fr))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return V0(r),new xt(t.firestore,t instanceof fr?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new AE(this,"async_queue_retry"),this.Vu=()=>{const r=lh();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=lh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=lh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new kn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!sa(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw On("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Ap.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function O0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class xn extends Qu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new L0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new L0(e),this._firestoreClient=void 0,await e}}}function WN(t,e){const n=typeof t=="object"?t:qI(),r=typeof t=="string"?t:"(default)",s=$I(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=LC("firestore");i&&$N(s,...i)}return s}function ha(t){if(t._terminated)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HN(t),t._firestoreClient}function HN(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,h){return new TR(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,zE(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new ON(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._byteString=e}static fromBase64String(e){try{return new si(st.fromBase64String(e))}catch(n){throw new G(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new si(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=/^__.*__$/;class qN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new ia(e,this.data,n,this.fieldTransforms)}}class WE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ar(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class Op{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Op(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(HE(this.Cu)&&KN.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class GN{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ku(e)}Qu(e,n,r,s=!1){return new Op({Cu:e,methodName:n,qu:r,path:et.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yu(t){const e=t._freezeSettings(),n=Ku(t._databaseId);return new GN(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jp(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Fp("Data must be an object, but it was:",o,r);const a=GE(r,o);let l,c;if(i.merge)l=new Ot(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const p=Ud(e,d,n);if(!o.contains(p))throw new G(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);YE(h,p)||h.push(p)}l=new Ot(h),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new qN(new It(a),l,c)}class Xu extends Dp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xu}}function KE(t,e,n,r){const s=t.Qu(1,e,n);Fp("Data must be an object, but it was:",s,r);const i=[],o=It.empty();is(r,(l,c)=>{const h=Bp(e,l,n);c=ln(c);const d=s.Nu(h);if(c instanceof Xu)i.push(h);else{const p=Ju(c,d);p!=null&&(i.push(h),o.set(h,p))}});const a=new Ot(i);return new WE(o,a,s.fieldTransforms)}function qE(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Ud(e,r,n)],l=[s];if(i.length%2!=0)throw new G(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)a.push(Ud(e,i[p])),l.push(i[p+1]);const c=[],h=It.empty();for(let p=a.length-1;p>=0;--p)if(!YE(c,a[p])){const g=a[p];let T=l[p];T=ln(T);const A=o.Nu(g);if(T instanceof Xu)c.push(g);else{const I=Ju(T,A);I!=null&&(c.push(g),h.set(g,I))}}const d=new Ot(c);return new WE(h,d,o.fieldTransforms)}function Ju(t,e){if(QE(t=ln(t)))return Fp("Unsupported field value:",e,t),GE(t,e);if(t instanceof Dp)return function(r,s){if(!HE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Ju(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ln(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return HR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ke.fromDate(r);return{timestampValue:au(s.serializer,i)}}if(r instanceof Ke){const i=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:au(s.serializer,i)}}if(r instanceof Mp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof si)return{bytesValue:gE(s.serializer,r._byteString)};if(r instanceof xt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:yp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Lp)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return pp(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Vp(r)}`)}(t,e)}function GE(t,e){const n={};return Kw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):is(t,(r,s)=>{const i=Ju(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function QE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Mp||t instanceof si||t instanceof xt||t instanceof Dp||t instanceof Lp)}function Fp(t,e,n){if(!QE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Vp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Ud(t,e,n){if((e=ln(e))instanceof da)return e._internalPath;if(typeof e=="string")return Bp(t,e);throw hu("Field path arguments must be of type string or ",t,!1,void 0,n)}const QN=new RegExp("[~\\*/\\[\\]]");function Bp(t,e,n){if(e.search(QN)>=0)throw hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new da(...e.split("."))._internalPath}catch{throw hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new G(F.INVALID_ARGUMENT,a+t+l)}function YE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new YN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(JE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class YN extends XE{data(){return super.data()}}function JE(t,e){return typeof e=="string"?Bp(t,e):e instanceof da?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class XN{convertValue(e,n="none"){switch(es(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return is(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Oe(o.doubleValue));return new Lp(i)}convertGeoPoint(e){return new Mp(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fo(e));default:return null}}convertTimestamp(e){const n=yr(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);pe(TE(r));const s=new Bo(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||On(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eT extends XE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(JE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class wl extends eT{data(e={}){return super.data(e)}}class tT{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Yi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new wl(this._firestore,this._userDataWriter,r.key,r,new Yi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new wl(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Yi(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new wl(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Yi(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:JN(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function JN(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t){t=Tt(t,xt);const e=Tt(t.firestore,xn);return BN(ha(e),t._key).then(n=>rT(e,t,n))}class zp extends XN{constructor(e){super(),this.firestore=e}convertBytes(e){return new si(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}}function Zu(t){t=Tt(t,ua);const e=Tt(t.firestore,xn),n=ha(e),r=new zp(e);return ZE(t._query),UN(n,t._query).then(s=>new tT(e,r,t,s))}function ek(t,e,n){t=Tt(t,xt);const r=Tt(t.firestore,xn),s=Up(t.converter,e,n);return fa(r,[jp(Yu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Et.none())])}function tk(t,e,n,...r){t=Tt(t,xt);const s=Tt(t.firestore,xn),i=Yu(s);let o;return o=typeof(e=ln(e))=="string"||e instanceof da?qE(i,"updateDoc",t._key,e,n,r):KE(i,"updateDoc",t._key,e),fa(s,[o.toMutation(t._key,Et.exists(!0))])}function nT(t){return fa(Tt(t.firestore,xn),[new Wu(t._key,Et.none())])}function ec(t,e){const n=Tt(t.firestore,xn),r=gi(t),s=Up(t.converter,e);return fa(n,[jp(Yu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Et.exists(!1))]).then(()=>r)}function $p(t,...e){var n,r,s;t=ln(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||O0(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(O0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[o+2]=(s=d.complete)===null||s===void 0?void 0:s.bind(d)}let l,c,h;if(t instanceof xt)c=Tt(t.firestore,xn),h=Fu(t._key.path),l={next:d=>{e[o]&&e[o](rT(c,t,d))},error:e[o+1],complete:e[o+2]};else{const d=Tt(t,ua);c=Tt(d.firestore,xn),h=d._query;const p=new zp(c);l={next:g=>{e[o]&&e[o](new tT(c,p,d,g))},error:e[o+1],complete:e[o+2]},ZE(t._query)}return function(p,g,T,A){const I=new bp(A),_=new Np(g,I,T);return p.asyncQueue.enqueueAndForget(async()=>Cp(await cu(p),_)),()=>{I.Za(),p.asyncQueue.enqueueAndForget(async()=>Ip(await cu(p),_))}}(ha(c),h,a,l)}function fa(t,e){return function(r,s){const i=new kn;return r.asyncQueue.enqueueAndForget(async()=>RN(await FN(r),s,i)),i.promise}(ha(t),e)}function rT(t,e,n){const r=n.docs.get(e._key),s=new zp(t);return new eT(t,s,e._key,r,new Yi(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Yu(e)}set(e,n,r){this._verifyNotCommitted();const s=ch(e,this._firestore),i=Up(s.converter,n,r),o=jp(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Et.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=ch(e,this._firestore);let o;return o=typeof(n=ln(n))=="string"||n instanceof da?qE(this._dataReader,"WriteBatch.update",i._key,n,r,s):KE(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Et.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ch(e,this._firestore);return this._mutations=this._mutations.concat(new Wu(n._key,Et.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ch(t,e){if((t=ln(t)).firestore!==e)throw new G(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(t){return ha(t=Tt(t,xn)),new nk(t,e=>fa(t,e))}(function(e,n=!0){(function(s){fi=s})(KI),tu(new Lo("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new xn(new aR(r.getProvider("auth-internal")),new hR(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bo(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Us(t0,"4.7.3",e),Us(t0,"4.7.3","esm2017")})();const sk={apiKey:"AIzaSyDXKdnkxtgKARc0fWiA1BD5ok3qc8AqCVc",authDomain:"syncserve-dev.firebaseapp.com",databaseURL:"https://syncserve-dev-default-rtdb.firebaseio.com",projectId:"syncserve-dev",storageBucket:"syncserve-dev.firebasestorage.app",messagingSenderId:"1029186931798",appId:"1:1029186931798:web:ec31db4513af2edc057ff7",measurementId:"G-LX9Z2Y6SN9"},ik=Mw(sk),cn=WN(ik),Wp=ca(cn,"tables"),Hp=ca(cn,"menuItems"),sT=ca(cn,"staff"),Kp=ca(cn,"orders");ca(cn,"settings");const iT=async()=>{try{const t=gi(cn,"settings","appSettings"),e=await ZN(t);return e.exists()?e.data():(console.warn("Settings document 'appSettings' not found."),null)}catch(t){throw console.error("Error fetching settings:",t),t}},ok=async t=>{try{const e=gi(cn,"settings","appSettings");await ek(e,t,{merge:!0})}catch(e){throw console.error("Error updating settings:",e),e}},ak=async t=>{try{return{id:(await ec(Wp,{name:t,status:"available"})).id,name:t,status:"available"}}catch(e){throw console.error("Error adding table:",e),e}},oT=async()=>{try{return(await Zu(Wp)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error fetching tables:",t),t}},aT=(t,e)=>$p(Wp,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)},n=>{console.error("onTablesRealtime error:",n),e&&e(n)}),lT=async(t,e)=>{if(!t)throw new Error("updateTableStatus: tableId is required");try{const n=gi(cn,"tables",t);return await tk(n,{status:e}),!0}catch(n){throw console.error("Error updating table status:",n),n}},lk=async t=>{if(!t)throw new Error("deleteTable: tableId is required");try{return await nT(gi(cn,"tables",t)),!0}catch(e){throw console.error("Error deleting table:",e),e}},j0=async t=>{try{if(!t||!t.name||t.price==null)throw new Error("addMenuItem: item must have name and price");return{id:(await ec(Hp,t)).id,...t}}catch(e){throw console.error("Error adding menu item:",e),e}},qp=async()=>{try{return(await Zu(Hp)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error fetching menu items:",t),t}},uk=(t,e)=>$p(Hp,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)},n=>{console.error("onMenuItemsRealtime error:",n)}),ck=async t=>{try{return{id:(await ec(sT,{name:t})).id,name:t}}catch(e){throw console.error("Error adding staff:",e),e}},Gp=async()=>{try{return(await Zu(sT)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error fetching staff:",t),t}},hk=async t=>{try{return{id:(await ec(Kp,t)).id,...t}}catch(e){throw console.error("Error adding order:",e),e}},dk=async t=>{if(!t)throw new Error("deleteOrder: orderId is required");try{return await nT(gi(cn,"orders",t)),!0}catch(e){throw console.error("Error deleting order:",e),e}},uT=(t,e)=>$p(Kp,n=>{const r=n.docs.map(s=>({id:s.id,...s.data()}));t(r)},n=>{console.error("onOrdersRealtime error:",n),e&&e(n)}),fk=async()=>{try{const t=await Zu(Kp);if(t.empty){console.log("No orders to delete.");return}const e=rk(cn);t.docs.forEach(n=>{e.delete(n.ref)}),await e.commit(),console.log("All orders successfully deleted.")}catch(t){throw console.error("Error clearing all orders:",t),t}},$s=({isOpen:t,onClose:e,children:n,size:r="md"})=>{const s=V.useRef(null);V.useEffect(()=>{const a=l=>{l.key==="Escape"&&e()};return t&&(document.body.style.overflow="hidden",window.addEventListener("keydown",a)),()=>{document.body.style.overflow="unset",window.removeEventListener("keydown",a)}},[t,e]);const i=a=>{s.current&&!s.current.contains(a.target)&&e()},o={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl"};return E.jsxs("div",{className:`fixed inset-0 z-50 overflow-y-auto transition-opacity duration-300 ease-in-out ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:i,"aria-modal":"true",role:"dialog",children:[E.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75"}),E.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:E.jsxs("div",{ref:s,className:`relative w-full transform rounded-xl bg-white text-left shadow-xl transition-all duration-300 ease-in-out ${o[r]||o.md} ${t?"translate-y-0 scale-100 opacity-100":"translate-y-4 scale-95 opacity-0"}`,children:[E.jsx("button",{onClick:e,className:"absolute top-4 right-4 z-10 rounded-full p-1 text-gray-400 transition-colors hover:bg-gray-100 hover:text-gray-700","aria-label":"Close modal",children:E.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),E.jsx("div",{className:"p-6",children:n})]})})]})},cT=V.createContext({});function pk(t){const e=V.useRef(null);return e.current===null&&(e.current=t()),e.current}const Qp=typeof window<"u",mk=Qp?V.useLayoutEffect:V.useEffect,Yp=V.createContext(null);function Xp(t,e){t.indexOf(e)===-1&&t.push(e)}function Jp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Fn=(t,e,n)=>n>e?e:n<t?t:n;let Zp=()=>{};const Bn={},hT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function dT(t){return typeof t=="object"&&t!==null}const fT=t=>/^0[^.\s]+$/u.test(t);function em(t){let e;return()=>(e===void 0&&(e=t()),e)}const Qt=t=>t,gk=(t,e)=>n=>e(t(n)),pa=(...t)=>t.reduce(gk),Wo=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class tm{constructor(){this.subscriptions=[]}add(e){return Xp(this.subscriptions,e),()=>Jp(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vn=t=>t*1e3,_n=t=>t/1e3;function pT(t,e){return e?t*(1e3/e):0}const mT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,yk=1e-7,vk=12;function _k(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=mT(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>yk&&++a<vk);return o}function ma(t,e,n,r){if(t===e&&n===r)return Qt;const s=i=>_k(i,0,1,t,n);return i=>i===0||i===1?i:mT(s(i),e,r)}const gT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,yT=t=>e=>1-t(1-e),vT=ma(.33,1.53,.69,.99),nm=yT(vT),_T=gT(nm),wT=t=>(t*=2)<1?.5*nm(t):.5*(2-Math.pow(2,-10*(t-1))),rm=t=>1-Math.sin(Math.acos(t)),ET=yT(rm),TT=gT(rm),wk=ma(.42,0,1,1),Ek=ma(0,0,.58,1),xT=ma(.42,0,.58,1),Tk=t=>Array.isArray(t)&&typeof t[0]!="number",ST=t=>Array.isArray(t)&&typeof t[0]=="number",xk={linear:Qt,easeIn:wk,easeInOut:xT,easeOut:Ek,circIn:rm,circInOut:TT,circOut:ET,backIn:nm,backInOut:_T,backOut:vT,anticipate:wT},Sk=t=>typeof t=="string",F0=t=>{if(ST(t)){Zp(t.length===4);const[e,n,r,s]=t;return ma(e,n,r,s)}else if(Sk(t))return xk[t];return t},tl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],B0={value:null};function Ak(t,e){let n=new Set,r=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(d){o.has(d)&&(h.schedule(d),t()),l++,d(a)}const h={schedule:(d,p=!1,g=!1)=>{const A=g&&s?n:r;return p&&o.add(d),A.has(d)||A.add(d),d},cancel:d=>{r.delete(d),o.delete(d)},process:d=>{if(a=d,s){i=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),e&&B0.value&&B0.value.frameloop[e].push(l),l=0,n.clear(),s=!1,i&&(i=!1,h.process(d))}};return h}const Pk=40;function AT(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,o=tl.reduce((v,b)=>(v[b]=Ak(i,e?b:void 0),v),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:h,update:d,preRender:p,render:g,postRender:T}=o,A=()=>{const v=Bn.useManualTiming?s.timestamp:performance.now();n=!1,Bn.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(v-s.timestamp,Pk),1)),s.timestamp=v,s.isProcessing=!0,a.process(s),l.process(s),c.process(s),h.process(s),d.process(s),p.process(s),g.process(s),T.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(A))},I=()=>{n=!0,r=!0,s.isProcessing||t(A)};return{schedule:tl.reduce((v,b)=>{const D=o[b];return v[b]=(O,C=!1,y=!1)=>(n||I(),D.schedule(O,C,y)),v},{}),cancel:v=>{for(let b=0;b<tl.length;b++)o[tl[b]].cancel(v)},state:s,steps:o}}const{schedule:Ie,cancel:_r,state:Je,steps:hh}=AT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qt,!0);let El;function Ck(){El=void 0}const Nt={now:()=>(El===void 0&&Nt.set(Je.isProcessing||Bn.useManualTiming?Je.timestamp:performance.now()),El),set:t=>{El=t,queueMicrotask(Ck)}},PT=t=>e=>typeof e=="string"&&e.startsWith(t),sm=PT("--"),Ik=PT("var(--"),im=t=>Ik(t)?Rk.test(t.split("/*")[0].trim()):!1,Rk=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yi={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ho={...yi,transform:t=>Fn(0,1,t)},nl={...yi,default:1},ho=t=>Math.round(t*1e5)/1e5,om=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Nk(t){return t==null}const kk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,am=(t,e)=>n=>!!(typeof n=="string"&&kk.test(n)&&n.startsWith(t)||e&&!Nk(n)&&Object.prototype.hasOwnProperty.call(n,e)),CT=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,i,o,a]=r.match(om);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},bk=t=>Fn(0,255,t),dh={...yi,transform:t=>Math.round(bk(t))},Br={test:am("rgb","red"),parse:CT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+dh.transform(t)+", "+dh.transform(e)+", "+dh.transform(n)+", "+ho(Ho.transform(r))+")"};function Vk(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const zd={test:am("#"),parse:Vk,transform:Br.transform},ga=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),qn=ga("deg"),wn=ga("%"),J=ga("px"),Dk=ga("vh"),Mk=ga("vw"),U0={...wn,parse:t=>wn.parse(t)/100,transform:t=>wn.transform(t*100)},Rs={test:am("hsl","hue"),parse:CT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+wn.transform(ho(e))+", "+wn.transform(ho(n))+", "+ho(Ho.transform(r))+")"},Be={test:t=>Br.test(t)||zd.test(t)||Rs.test(t),parse:t=>Br.test(t)?Br.parse(t):Rs.test(t)?Rs.parse(t):zd.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Br.transform(t):Rs.transform(t),getAnimatableNone:t=>{const e=Be.parse(t);return e.alpha=0,Be.transform(e)}},Lk=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ok(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(om))==null?void 0:e.length)||0)+(((n=t.match(Lk))==null?void 0:n.length)||0)>0}const IT="number",RT="color",jk="var",Fk="var(",z0="${}",Bk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ko(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(Bk,l=>(Be.test(l)?(r.color.push(i),s.push(RT),n.push(Be.parse(l))):l.startsWith(Fk)?(r.var.push(i),s.push(jk),n.push(l)):(r.number.push(i),s.push(IT),n.push(parseFloat(l))),++i,z0)).split(z0);return{values:n,split:a,indexes:r,types:s}}function NT(t){return Ko(t).values}function kT(t){const{split:e,types:n}=Ko(t),r=e.length;return s=>{let i="";for(let o=0;o<r;o++)if(i+=e[o],s[o]!==void 0){const a=n[o];a===IT?i+=ho(s[o]):a===RT?i+=Be.transform(s[o]):i+=s[o]}return i}}const Uk=t=>typeof t=="number"?0:Be.test(t)?Be.getAnimatableNone(t):t;function zk(t){const e=NT(t);return kT(t)(e.map(Uk))}const wr={test:Ok,parse:NT,createTransformer:kT,getAnimatableNone:zk};function fh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function $k({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;s=fh(l,a,t+1/3),i=fh(l,a,t),o=fh(l,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}function du(t,e){return n=>n>0?e:t}const Pe=(t,e,n)=>t+(e-t)*n,ph=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},Wk=[zd,Br,Rs],Hk=t=>Wk.find(e=>e.test(t));function $0(t){const e=Hk(t);if(!e)return!1;let n=e.parse(t);return e===Rs&&(n=$k(n)),n}const W0=(t,e)=>{const n=$0(t),r=$0(e);if(!n||!r)return du(t,e);const s={...n};return i=>(s.red=ph(n.red,r.red,i),s.green=ph(n.green,r.green,i),s.blue=ph(n.blue,r.blue,i),s.alpha=Pe(n.alpha,r.alpha,i),Br.transform(s))},$d=new Set(["none","hidden"]);function Kk(t,e){return $d.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function qk(t,e){return n=>Pe(t,e,n)}function lm(t){return typeof t=="number"?qk:typeof t=="string"?im(t)?du:Be.test(t)?W0:Yk:Array.isArray(t)?bT:typeof t=="object"?Be.test(t)?W0:Gk:du}function bT(t,e){const n=[...t],r=n.length,s=t.map((i,o)=>lm(i)(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}}function Gk(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=lm(t[s])(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function Qk(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][r[i]],a=t.values[o]??0;n[s]=a,r[i]++}return n}const Yk=(t,e)=>{const n=wr.createTransformer(e),r=Ko(t),s=Ko(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?$d.has(t)&&!s.values.length||$d.has(e)&&!r.values.length?Kk(t,e):pa(bT(Qk(r,s),s.values),n):du(t,e)};function VT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Pe(t,e,n):lm(t)(t,e)}const Xk=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Ie.update(e,n),stop:()=>_r(e),now:()=>Je.isProcessing?Je.timestamp:Nt.now()}},DT=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let i=0;i<s;i++)r+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},fu=2e4;function um(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<fu;)e+=n,r=t.next(e);return e>=fu?1/0:e}function Jk(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(um(r),fu);return{type:"keyframes",ease:i=>r.next(s*i).value/e,duration:_n(s)}}const Zk=5;function MT(t,e,n){const r=Math.max(e-Zk,0);return pT(n-t(r),e-r)}const Ve={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mh=.001;function eb({duration:t=Ve.duration,bounce:e=Ve.bounce,velocity:n=Ve.velocity,mass:r=Ve.mass}){let s,i,o=1-e;o=Fn(Ve.minDamping,Ve.maxDamping,o),t=Fn(Ve.minDuration,Ve.maxDuration,_n(t)),o<1?(s=c=>{const h=c*o,d=h*t,p=h-n,g=Wd(c,o),T=Math.exp(-d);return mh-p/g*T},i=c=>{const d=c*o*t,p=d*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,T=Math.exp(-d),A=Wd(Math.pow(c,2),o);return(-s(c)+mh>0?-1:1)*((p-g)*T)/A}):(s=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-mh+h*d},i=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const a=5/t,l=nb(s,i,a);if(t=vn(t),isNaN(l))return{stiffness:Ve.stiffness,damping:Ve.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const tb=12;function nb(t,e,n){let r=n;for(let s=1;s<tb;s++)r=r-t(r)/e(r);return r}function Wd(t,e){return t*Math.sqrt(1-e*e)}const rb=["duration","bounce"],sb=["stiffness","damping","mass"];function H0(t,e){return e.some(n=>t[n]!==void 0)}function ib(t){let e={velocity:Ve.velocity,stiffness:Ve.stiffness,damping:Ve.damping,mass:Ve.mass,isResolvedFromDuration:!1,...t};if(!H0(t,sb)&&H0(t,rb))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*Fn(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:Ve.mass,stiffness:s,damping:i}}else{const n=eb(t);e={...e,...n,mass:Ve.mass},e.isResolvedFromDuration=!0}return e}function pu(t=Ve.visualDuration,e=Ve.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:i},{stiffness:l,damping:c,mass:h,duration:d,velocity:p,isResolvedFromDuration:g}=ib({...n,velocity:-_n(n.velocity||0)}),T=p||0,A=c/(2*Math.sqrt(l*h)),I=o-i,_=_n(Math.sqrt(l/h)),w=Math.abs(I)<5;r||(r=w?Ve.restSpeed.granular:Ve.restSpeed.default),s||(s=w?Ve.restDelta.granular:Ve.restDelta.default);let v;if(A<1){const D=Wd(_,A);v=O=>{const C=Math.exp(-A*_*O);return o-C*((T+A*_*I)/D*Math.sin(D*O)+I*Math.cos(D*O))}}else if(A===1)v=D=>o-Math.exp(-_*D)*(I+(T+_*I)*D);else{const D=_*Math.sqrt(A*A-1);v=O=>{const C=Math.exp(-A*_*O),y=Math.min(D*O,300);return o-C*((T+A*_*I)*Math.sinh(y)+D*I*Math.cosh(y))/D}}const b={calculatedDuration:g&&d||null,next:D=>{const O=v(D);if(g)a.done=D>=d;else{let C=D===0?T:0;A<1&&(C=D===0?vn(T):MT(v,D,O));const y=Math.abs(C)<=r,P=Math.abs(o-O)<=s;a.done=y&&P}return a.value=a.done?o:O,a},toString:()=>{const D=Math.min(um(b),fu),O=DT(C=>b.next(D*C).value,D,30);return D+"ms "+O},toTransition:()=>{}};return b}pu.applyToOptions=t=>{const e=Jk(t,100,pu);return t.ease=e.ease,t.duration=vn(e.duration),t.type="keyframes",t};function Hd({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const d=t[0],p={done:!1,value:d},g=y=>a!==void 0&&y<a||l!==void 0&&y>l,T=y=>a===void 0?l:l===void 0||Math.abs(a-y)<Math.abs(l-y)?a:l;let A=n*e;const I=d+A,_=o===void 0?I:o(I);_!==I&&(A=_-d);const w=y=>-A*Math.exp(-y/r),v=y=>_+w(y),b=y=>{const P=w(y),N=v(y);p.done=Math.abs(P)<=c,p.value=p.done?_:N};let D,O;const C=y=>{g(p.value)&&(D=y,O=pu({keyframes:[p.value,T(p.value)],velocity:MT(v,y,p.value),damping:s,stiffness:i,restDelta:c,restSpeed:h}))};return C(0),{calculatedDuration:null,next:y=>{let P=!1;return!O&&D===void 0&&(P=!0,b(y),C(y)),D!==void 0&&y>=D?O.next(y-D):(!P&&b(y),p)}}}function ob(t,e,n){const r=[],s=n||Bn.mix||VT,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Qt:e;a=pa(l,a)}r.push(a)}return r}function ab(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Zp(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=ob(e,r,s),l=a.length,c=h=>{if(o&&h<t[0])return e[0];let d=0;if(l>1)for(;d<t.length-2&&!(h<t[d+1]);d++);const p=Wo(t[d],t[d+1],h);return a[d](p)};return n?h=>c(Fn(t[0],t[i-1],h)):c}function lb(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Wo(0,e,r);t.push(Pe(n,1,s))}}function ub(t){const e=[0];return lb(e,t.length-1),e}function cb(t,e){return t.map(n=>n*e)}function hb(t,e){return t.map(()=>e||xT).splice(0,t.length-1)}function fo({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=Tk(r)?r.map(F0):F0(r),i={done:!1,value:e[0]},o=cb(n&&n.length===e.length?n:ub(e),t),a=ab(o,e,{ease:Array.isArray(s)?s:hb(e,s)});return{calculatedDuration:t,next:l=>(i.value=a(l),i.done=l>=t,i)}}const db=t=>t!==null;function cm(t,{repeat:e,repeatType:n="loop"},r,s=1){const i=t.filter(db),a=s<0||e&&n!=="loop"&&e%2===1?0:i.length-1;return!a||r===void 0?i[a]:r}const fb={decay:Hd,inertia:Hd,tween:fo,keyframes:fo,spring:pu};function LT(t){typeof t.type=="string"&&(t.type=fb[t.type])}class hm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const pb=t=>t/100;class dm extends hm{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==Nt.now()&&this.tick(Nt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;LT(e);const{type:n=fo,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=e;let{keyframes:a}=e;const l=n||fo;l!==fo&&typeof a[0]!="number"&&(this.mixKeyframes=pa(pb,VT(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});i==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=um(c));const{calculatedDuration:h}=c;this.calculatedDuration=h,this.resolvedDuration=h+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:h,repeat:d,repeatType:p,repeatDelay:g,type:T,onUpdate:A,finalKeyframe:I}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const _=this.currentTime-c*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?_<0:_>s;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let v=this.currentTime,b=r;if(d){const y=Math.min(this.currentTime,s)/a;let P=Math.floor(y),N=y%1;!N&&y>=1&&(N=1),N===1&&P--,P=Math.min(P,d+1),!!(P%2)&&(p==="reverse"?(N=1-N,g&&(N-=g/a)):p==="mirror"&&(b=o)),v=Fn(0,1,N)*a}const D=w?{done:!1,value:h[0]}:b.next(v);i&&(D.value=i(D.value));let{done:O}=D;!w&&l!==null&&(O=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return C&&T!==Hd&&(D.value=cm(h,this.options,I,this.speed)),A&&A(D.value),C&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return _n(this.calculatedDuration)}get time(){return _n(this.currentTime)}set time(e){var n;e=vn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Nt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=_n(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=Xk,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Nt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function mb(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ur=t=>t*180/Math.PI,Kd=t=>{const e=Ur(Math.atan2(t[1],t[0]));return qd(e)},gb={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Kd,rotateZ:Kd,skewX:t=>Ur(Math.atan(t[1])),skewY:t=>Ur(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},qd=t=>(t=t%360,t<0&&(t+=360),t),K0=Kd,q0=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),G0=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),yb={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:q0,scaleY:G0,scale:t=>(q0(t)+G0(t))/2,rotateX:t=>qd(Ur(Math.atan2(t[6],t[5]))),rotateY:t=>qd(Ur(Math.atan2(-t[2],t[0]))),rotateZ:K0,rotate:K0,skewX:t=>Ur(Math.atan(t[4])),skewY:t=>Ur(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Gd(t){return t.includes("scale")?1:0}function Qd(t,e){if(!t||t==="none")return Gd(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=yb,s=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=gb,s=a}if(!s)return Gd(e);const i=r[e],o=s[1].split(",").map(_b);return typeof i=="function"?i(o):o[i]}const vb=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Qd(n,e)};function _b(t){return parseFloat(t.trim())}const vi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_i=new Set(vi),Q0=t=>t===yi||t===J,wb=new Set(["x","y","z"]),Eb=vi.filter(t=>!wb.has(t));function Tb(t){const e=[];return Eb.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Hr={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Qd(e,"x"),y:(t,{transform:e})=>Qd(e,"y")};Hr.translateX=Hr.x;Hr.translateY=Hr.y;const Kr=new Set;let Yd=!1,Xd=!1,Jd=!1;function OT(){if(Xd){const t=Array.from(Kr).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=Tb(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,o])=>{var a;(a=r.getValue(i))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Xd=!1,Yd=!1,Kr.forEach(t=>t.complete(Jd)),Kr.clear()}function jT(){Kr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Xd=!0)})}function xb(){Jd=!0,jT(),OT(),Jd=!1}class fm{constructor(e,n,r,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Kr.add(this),Yd||(Yd=!0,Ie.read(jT),Ie.resolveKeyframes(OT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),s&&i===void 0&&s.set(e[0])}mb(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Kr.delete(this)}cancel(){this.state==="scheduled"&&(Kr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Sb=t=>t.startsWith("--");function Ab(t,e,n){Sb(e)?t.style.setProperty(e,n):t.style[e]=n}const Pb=em(()=>window.ScrollTimeline!==void 0),Cb={};function Ib(t,e){const n=em(t);return()=>Cb[e]??n()}const FT=Ib(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Xi=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Y0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xi([0,.65,.55,1]),circOut:Xi([.55,0,1,.45]),backIn:Xi([.31,.01,.66,-.59]),backOut:Xi([.33,1.53,.69,.99])};function BT(t,e){if(t)return typeof t=="function"?FT()?DT(t,e):"ease-out":ST(t)?Xi(t):Array.isArray(t)?t.map(n=>BT(n,e)||Y0.easeOut):Y0[t]}function Rb(t,e,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const h={[e]:n};l&&(h.offset=l);const d=BT(a,s);Array.isArray(d)&&(h.easing=d);const p={delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),t.animate(h,p)}function UT(t){return typeof t=="function"&&"applyToOptions"in t}function Nb({type:t,...e}){return UT(t)&&FT()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class kb extends hm{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,Zp(typeof e.type!="string");const c=Nb(e);this.animation=Rb(n,r,s,c,i),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const h=cm(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):Ab(n,r,h),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return _n(Number(e))}get time(){return _n(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=vn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Pb()?(this.animation.timeline=e,Qt):n(this)}}const zT={anticipate:wT,backInOut:_T,circInOut:TT};function bb(t){return t in zT}function Vb(t){typeof t.ease=="string"&&bb(t.ease)&&(t.ease=zT[t.ease])}const X0=10;class Db extends kb{constructor(e){Vb(e),LT(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:i,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new dm({...o,autoplay:!1}),l=vn(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-X0).value,a.sample(l).value,X0),a.stop()}}const J0=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(wr.test(t)||t==="0")&&!t.startsWith("url("));function Mb(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Lb(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=J0(s,e),a=J0(i,e);return!o||!a?!1:Mb(t)||(n==="spring"||UT(n))&&r}function $T(t){return dT(t)&&"offsetHeight"in t}const Ob=new Set(["opacity","clipPath","filter","transform"]),jb=em(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Fb(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:i,type:o}=t;if(!$T((c=e==null?void 0:e.owner)==null?void 0:c.current))return!1;const{onUpdate:a,transformTemplate:l}=e.owner.getProps();return jb()&&n&&Ob.has(n)&&(n!=="transform"||!l)&&!a&&!r&&s!=="mirror"&&i!==0&&o!=="inertia"}const Bb=40;class Ub extends hm{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:h,...d}){var T;super(),this.stop=()=>{var A,I;this._animation&&(this._animation.stop(),(A=this.stopTimeline)==null||A.call(this)),(I=this.keyframeResolver)==null||I.cancel()},this.createdAt=Nt.now();const p={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:o,name:l,motionValue:c,element:h,...d},g=(h==null?void 0:h.KeyframeResolver)||fm;this.keyframeResolver=new g(a,(A,I,_)=>this.onKeyframesResolved(A,I,p,!_),l,c,h),(T=this.keyframeResolver)==null||T.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:h}=r;this.resolvedAt=Nt.now(),Lb(e,i,o,a)||((Bn.instantAnimations||!l)&&(h==null||h(cm(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const p={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>Bb?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&Fb(p)?new Db({...p,element:p.motionValue.owner.current}):new dm(p);g.finished.then(()=>this.notifyFinished()).catch(Qt),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),xb()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const zb=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function $b(t){const e=zb.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function WT(t,e,n=1){const[r,s]=$b(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return hT(o)?parseFloat(o):o}return im(s)?WT(s,e,n+1):s}function pm(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const HT=new Set(["width","height","top","left","right","bottom",...vi]),Wb={test:t=>t==="auto",parse:t=>t},KT=t=>e=>e.test(t),qT=[yi,J,wn,qn,Mk,Dk,Wb],Z0=t=>qT.find(KT(t));function Hb(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||fT(t):!0}const Kb=new Set(["brightness","contrast","saturate","opacity"]);function qb(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(om)||[];if(!r)return t;const s=n.replace(r,"");let i=Kb.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const Gb=/\b([a-z-]*)\(.*?\)/gu,Zd={...wr,getAnimatableNone:t=>{const e=t.match(Gb);return e?e.map(qb).join(" "):t}},ev={...yi,transform:Math.round},Qb={rotate:qn,rotateX:qn,rotateY:qn,rotateZ:qn,scale:nl,scaleX:nl,scaleY:nl,scaleZ:nl,skew:qn,skewX:qn,skewY:qn,distance:J,translateX:J,translateY:J,translateZ:J,x:J,y:J,z:J,perspective:J,transformPerspective:J,opacity:Ho,originX:U0,originY:U0,originZ:J},mm={borderWidth:J,borderTopWidth:J,borderRightWidth:J,borderBottomWidth:J,borderLeftWidth:J,borderRadius:J,radius:J,borderTopLeftRadius:J,borderTopRightRadius:J,borderBottomRightRadius:J,borderBottomLeftRadius:J,width:J,maxWidth:J,height:J,maxHeight:J,top:J,right:J,bottom:J,left:J,padding:J,paddingTop:J,paddingRight:J,paddingBottom:J,paddingLeft:J,margin:J,marginTop:J,marginRight:J,marginBottom:J,marginLeft:J,backgroundPositionX:J,backgroundPositionY:J,...Qb,zIndex:ev,fillOpacity:Ho,strokeOpacity:Ho,numOctaves:ev},Yb={...mm,color:Be,backgroundColor:Be,outlineColor:Be,fill:Be,stroke:Be,borderColor:Be,borderTopColor:Be,borderRightColor:Be,borderBottomColor:Be,borderLeftColor:Be,filter:Zd,WebkitFilter:Zd},GT=t=>Yb[t];function QT(t,e){let n=GT(t);return n!==Zd&&(n=wr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Xb=new Set(["auto","none","0"]);function Jb(t,e,n){let r=0,s;for(;r<t.length&&!s;){const i=t[r];typeof i=="string"&&!Xb.has(i)&&Ko(i).values.length&&(s=t[r]),r++}if(s&&n)for(const i of e)t[i]=QT(n,s)}class Zb extends fm{constructor(e,n,r,s,i){super(e,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),im(c))){const h=WT(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!HT.has(r)||e.length!==2)return;const[s,i]=e,o=Z0(s),a=Z0(i);if(o!==a)if(Q0(o)&&Q0(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Hr[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||Hb(e[s]))&&r.push(s);r.length&&Jb(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Hr[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,o=r[i];r[i]=Hr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function eV(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const YT=(t,e)=>e&&typeof t=="number"?e.transform(t):t,tv=30,tV=t=>!isNaN(parseFloat(t));class nV{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{var o,a;const i=Nt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();s&&((a=this.events.renderRequest)==null||a.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Nt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=tV(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new tm);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ie.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Nt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>tv)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,tv);return pT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ii(t,e){return new nV(t,e)}const{schedule:gm}=AT(queueMicrotask,!1),en={x:!1,y:!1};function XT(){return en.x||en.y}function rV(t){return t==="x"||t==="y"?en[t]?null:(en[t]=!0,()=>{en[t]=!1}):en.x||en.y?null:(en.x=en.y=!0,()=>{en.x=en.y=!1})}function JT(t,e){const n=eV(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function nv(t){return!(t.pointerType==="touch"||XT())}function sV(t,e,n={}){const[r,s,i]=JT(t,n),o=a=>{if(!nv(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const h=d=>{nv(d)&&(c(d),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,s)};return r.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const ZT=(t,e)=>e?t===e?!0:ZT(t,e.parentElement):!1,ym=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,iV=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function oV(t){return iV.has(t.tagName)||t.tabIndex!==-1}const Tl=new WeakSet;function rv(t){return e=>{e.key==="Enter"&&t(e)}}function gh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const aV=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=rv(()=>{if(Tl.has(n))return;gh(n,"down");const s=rv(()=>{gh(n,"up")}),i=()=>gh(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",i,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function sv(t){return ym(t)&&!XT()}function lV(t,e,n={}){const[r,s,i]=JT(t,n),o=a=>{const l=a.currentTarget;if(!sv(a))return;Tl.add(l);const c=e(l,a),h=(g,T)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",p),Tl.has(l)&&Tl.delete(l),sv(g)&&typeof c=="function"&&c(g,{success:T})},d=g=>{h(g,l===window||l===document||n.useGlobalTarget||ZT(l,g.target))},p=g=>{h(g,!1)};window.addEventListener("pointerup",d,s),window.addEventListener("pointercancel",p,s)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),$T(a)&&(a.addEventListener("focus",c=>aV(c,s)),!oV(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function ex(t){return dT(t)&&"ownerSVGElement"in t}function uV(t){return ex(t)&&t.tagName==="svg"}const pt=t=>!!(t&&t.getVelocity),cV=[...qT,Be,wr],hV=t=>cV.find(KT(t)),tx=V.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function dV(t=!0){const e=V.useContext(Yp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,i=V.useId();V.useEffect(()=>{if(t)return s(i)},[t]);const o=V.useCallback(()=>t&&r&&r(i),[i,r,t]);return!n&&r?[!1,o]:[!0]}const nx=V.createContext({strict:!1}),iv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},oi={};for(const t in iv)oi[t]={isEnabled:e=>iv[t].some(n=>!!e[n])};function fV(t){for(const e in t)oi[e]={...oi[e],...t[e]}}const pV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function mu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||pV.has(t)}let rx=t=>!mu(t);function mV(t){typeof t=="function"&&(rx=e=>e.startsWith("on")?!mu(e):t(e))}try{mV(require("@emotion/is-prop-valid").default)}catch{}function gV(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(rx(s)||n===!0&&mu(s)||!e&&!mu(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function yV(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}const tc=V.createContext({});function nc(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function qo(t){return typeof t=="string"||Array.isArray(t)}const vm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_m=["initial",...vm];function rc(t){return nc(t.animate)||_m.some(e=>qo(t[e]))}function sx(t){return!!(rc(t)||t.variants)}function vV(t,e){if(rc(t)){const{initial:n,animate:r}=t;return{initial:n===!1||qo(n)?n:void 0,animate:qo(r)?r:void 0}}return t.inherit!==!1?e:{}}function _V(t){const{initial:e,animate:n}=vV(t,V.useContext(tc));return V.useMemo(()=>({initial:e,animate:n}),[ov(e),ov(n)])}function ov(t){return Array.isArray(t)?t.join(" "):t}const wV=Symbol.for("motionComponentSymbol");function Ns(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function EV(t,e,n){return V.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ns(n)&&(n.current=r))},[e])}const wm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),TV="framerAppearId",ix="data-"+wm(TV),ox=V.createContext({});function xV(t,e,n,r,s){var A,I;const{visualElement:i}=V.useContext(tc),o=V.useContext(nx),a=V.useContext(Yp),l=V.useContext(tx).reducedMotion,c=V.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:i,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=c.current,d=V.useContext(ox);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&SV(c.current,n,s,d);const p=V.useRef(!1);V.useInsertionEffect(()=>{h&&p.current&&h.update(n,a)});const g=n[ix],T=V.useRef(!!g&&!((A=window.MotionHandoffIsComplete)!=null&&A.call(window,g))&&((I=window.MotionHasOptimisedAnimation)==null?void 0:I.call(window,g)));return mk(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),gm.render(h.render),T.current&&h.animationState&&h.animationState.animateChanges())}),V.useEffect(()=>{h&&(!T.current&&h.animationState&&h.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,g)}),T.current=!1))}),h}function SV(t,e,n,r){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:ax(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&Ns(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:l,layoutRoot:c})}function ax(t){if(t)return t.options.allowProjection!==!1?t.projection:ax(t.parent)}function AV({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&fV(t);function i(a,l){let c;const h={...V.useContext(tx),...a,layoutId:PV(a)},{isStatic:d}=h,p=_V(a),g=r(a,d);if(!d&&Qp){CV();const T=IV(h);c=T.MeasureLayout,p.visualElement=xV(s,g,h,e,T.ProjectionNode)}return E.jsxs(tc.Provider,{value:p,children:[c&&p.visualElement?E.jsx(c,{visualElement:p.visualElement,...h}):null,n(s,a,EV(g,p.visualElement,l),g,d,p.visualElement)]})}i.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const o=V.forwardRef(i);return o[wV]=s,o}function PV({layoutId:t}){const e=V.useContext(cT).id;return e&&t!==void 0?e+"-"+t:t}function CV(t,e){V.useContext(nx).strict}function IV(t){const{drag:e,layout:n}=oi;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Go={};function RV(t){for(const e in t)Go[e]=t[e],sm(e)&&(Go[e].isCSSVariable=!0)}function lx(t,{layout:e,layoutId:n}){return _i.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Go[t]||t==="opacity")}const NV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},kV=vi.length;function bV(t,e,n){let r="",s=!0;for(let i=0;i<kV;i++){const o=vi[i],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=YT(a,mm[o]);if(!l){s=!1;const h=NV[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function Em(t,e,n){const{style:r,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(_i.has(l)){o=!0;continue}else if(sm(l)){s[l]=c;continue}else{const h=YT(c,mm[l]);l.startsWith("origin")?(a=!0,i[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=bV(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=i;r.transformOrigin=`${l} ${c} ${h}`}}const Tm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ux(t,e,n){for(const r in e)!pt(e[r])&&!lx(r,n)&&(t[r]=e[r])}function VV({transformTemplate:t},e){return V.useMemo(()=>{const n=Tm();return Em(n,e,t),Object.assign({},n.vars,n.style)},[e])}function DV(t,e){const n=t.style||{},r={};return ux(r,n,t),Object.assign(r,VV(t,e)),r}function MV(t,e){const n={},r=DV(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const LV={offset:"stroke-dashoffset",array:"stroke-dasharray"},OV={offset:"strokeDashoffset",array:"strokeDasharray"};function jV(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?LV:OV;t[i.offset]=J.transform(-r);const o=J.transform(e),a=J.transform(n);t[i.array]=`${o} ${a}`}function cx(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},l,c,h){if(Em(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:d,style:p}=t;d.transform&&(p.transform=d.transform,delete d.transform),(p.transform||d.transformOrigin)&&(p.transformOrigin=d.transformOrigin??"50% 50%",delete d.transformOrigin),p.transform&&(p.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete d.transformBox),e!==void 0&&(d.x=e),n!==void 0&&(d.y=n),r!==void 0&&(d.scale=r),s!==void 0&&jV(d,s,i,o,!1)}const hx=()=>({...Tm(),attrs:{}}),dx=t=>typeof t=="string"&&t.toLowerCase()==="svg";function FV(t,e,n,r){const s=V.useMemo(()=>{const i=hx();return cx(i,e,dx(r),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};ux(i,t.style,t),s.style={...i,...s.style}}return s}const BV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function xm(t){return typeof t!="string"||t.includes("-")?!1:!!(BV.indexOf(t)>-1||/[A-Z]/u.test(t))}function UV(t=!1){return(n,r,s,{latestValues:i},o)=>{const l=(xm(n)?FV:MV)(r,i,o,n),c=gV(r,typeof n=="string",t),h=n!==V.Fragment?{...c,...l,ref:s}:{},{children:d}=r,p=V.useMemo(()=>pt(d)?d.get():d,[d]);return V.createElement(n,{...h,children:p})}}function av(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Sm(t,e,n,r){if(typeof e=="function"){const[s,i]=av(r);e=e(n!==void 0?n:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=av(r);e=e(n!==void 0?n:t.custom,s,i)}return e}function xl(t){return pt(t)?t.get():t}function zV({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:$V(n,r,s,t),renderState:e()}}const fx=t=>(e,n)=>{const r=V.useContext(tc),s=V.useContext(Yp),i=()=>zV(t,e,r,s);return n?i():pk(i)};function $V(t,e,n,r){const s={},i=r(t,{});for(const p in i)s[p]=xl(i[p]);let{initial:o,animate:a}=t;const l=rc(t),c=sx(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;if(d&&typeof d!="boolean"&&!nc(d)){const p=Array.isArray(d)?d:[d];for(let g=0;g<p.length;g++){const T=Sm(t,p[g]);if(T){const{transitionEnd:A,transition:I,..._}=T;for(const w in _){let v=_[w];if(Array.isArray(v)){const b=h?v.length-1:0;v=v[b]}v!==null&&(s[w]=v)}for(const w in A)s[w]=A[w]}}}return s}function Am(t,e,n){var i;const{style:r}=t,s={};for(const o in r)(pt(r[o])||e.style&&pt(e.style[o])||lx(o,t)||((i=n==null?void 0:n.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const WV={useVisualState:fx({scrapeMotionValuesFromProps:Am,createRenderState:Tm})};function px(t,e,n){const r=Am(t,e,n);for(const s in t)if(pt(t[s])||pt(e[s])){const i=vi.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=t[s]}return r}const HV={useVisualState:fx({scrapeMotionValuesFromProps:px,createRenderState:hx})};function KV(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...xm(r)?HV:WV,preloadedFeatures:t,useRender:UV(s),createVisualElement:e,Component:r};return AV(o)}}function Qo(t,e,n){const r=t.getProps();return Sm(r,e,n!==void 0?n:r.custom,t)}const ef=t=>Array.isArray(t);function qV(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ii(n))}function GV(t){return ef(t)?t[t.length-1]||0:t}function QV(t,e){const n=Qo(t,e);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const o in i){const a=GV(i[o]);qV(t,o,a)}}function YV(t){return!!(pt(t)&&t.add)}function tf(t,e){const n=t.getValue("willChange");if(YV(n))return n.add(e);if(!n&&Bn.WillChange){const r=new Bn.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function mx(t){return t.props[ix]}const XV=t=>t!==null;function JV(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(XV),i=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[i]}const ZV={type:"spring",stiffness:500,damping:25,restSpeed:10},eD=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),tD={type:"keyframes",duration:.8},nD={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rD=(t,{keyframes:e})=>e.length>2?tD:_i.has(t)?t.startsWith("scale")?eD(e[1]):ZV:nD;function sD({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const Pm=(t,e,n,r={},s,i)=>o=>{const a=pm(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-vn(l);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};sD(a)||Object.assign(h,rD(t,h)),h.duration&&(h.duration=vn(h.duration)),h.repeatDelay&&(h.repeatDelay=vn(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let d=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(d=!0)),(Bn.instantAnimations||Bn.skipAnimations)&&(d=!0,h.duration=0,h.delay=0),h.allowFlatten=!a.type&&!a.ease,d&&!i&&e.get()!==void 0){const p=JV(h.keyframes,a);if(p!==void 0){Ie.update(()=>{h.onUpdate(p),h.onComplete()});return}}return a.isSync?new dm(h):new Ub(h)};function iD({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function gx(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(i=r);const l=[],c=s&&t.animationState&&t.animationState.getState()[s];for(const h in a){const d=t.getValue(h,t.latestValues[h]??null),p=a[h];if(p===void 0||c&&iD(c,h))continue;const g={delay:n,...pm(i||{},h)},T=d.get();if(T!==void 0&&!d.isAnimating&&!Array.isArray(p)&&p===T&&!g.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const _=mx(t);if(_){const w=window.MotionHandoffAnimation(_,h,Ie);w!==null&&(g.startTime=w,A=!0)}}tf(t,h),d.start(Pm(h,d,p,t.shouldReduceMotion&&HT.has(h)?{type:!1}:g,t,A));const I=d.animation;I&&l.push(I)}return o&&Promise.all(l).then(()=>{Ie.update(()=>{o&&QV(t,o)})}),l}function nf(t,e,n={}){var l;const r=Qo(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(gx(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:p}=s;return oD(t,e,h+c,d,p,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[c,h]=a==="beforeChildren"?[i,o]:[o,i];return c().then(()=>h())}else return Promise.all([i(),o(n.delay)])}function oD(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,l=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(aD).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(nf(c,e,{...i,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function aD(t,e){return t.sortNodePosition(e)}function lD(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>nf(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=nf(t,e,n);else{const s=typeof e=="function"?Qo(t,e,n.custom):e;r=Promise.all(gx(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function yx(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const uD=_m.length;function vx(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?vx(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<uD;n++){const r=_m[n],s=t.props[r];(qo(s)||s===!1)&&(e[r]=s)}return e}const cD=[...vm].reverse(),hD=vm.length;function dD(t){return e=>Promise.all(e.map(({animation:n,options:r})=>lD(t,n,r)))}function fD(t){let e=dD(t),n=lv(),r=!0;const s=l=>(c,h)=>{var p;const d=Qo(t,h,l==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(d){const{transition:g,transitionEnd:T,...A}=d;c={...c,...A,...T}}return c};function i(l){e=l(t)}function o(l){const{props:c}=t,h=vx(t.parent)||{},d=[],p=new Set;let g={},T=1/0;for(let I=0;I<hD;I++){const _=cD[I],w=n[_],v=c[_]!==void 0?c[_]:h[_],b=qo(v),D=_===l?w.isActive:null;D===!1&&(T=I);let O=v===h[_]&&v!==c[_]&&b;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),w.protectedKeys={...g},!w.isActive&&D===null||!v&&!w.prevProp||nc(v)||typeof v=="boolean")continue;const C=pD(w.prevProp,v);let y=C||_===l&&w.isActive&&!O&&b||I>T&&b,P=!1;const N=Array.isArray(v)?v:[v];let R=N.reduce(s(_),{});D===!1&&(R={});const{prevResolvedValues:k={}}=w,S={...k,...R},W=z=>{y=!0,p.has(z)&&(P=!0,p.delete(z)),w.needsAnimating[z]=!0;const j=t.getValue(z);j&&(j.liveStyle=!1)};for(const z in S){const j=R[z],H=k[z];if(g.hasOwnProperty(z))continue;let Q=!1;ef(j)&&ef(H)?Q=!yx(j,H):Q=j!==H,Q?j!=null?W(z):p.add(z):j!==void 0&&p.has(z)?W(z):w.protectedKeys[z]=!0}w.prevProp=v,w.prevResolvedValues=R,w.isActive&&(g={...g,...R}),r&&t.blockInitialAnimation&&(y=!1),y&&(!(O&&C)||P)&&d.push(...N.map(z=>({animation:z,options:{type:_}})))}if(p.size){const I={};if(typeof c.initial!="boolean"){const _=Qo(t,Array.isArray(c.initial)?c.initial[0]:c.initial);_&&_.transition&&(I.transition=_.transition)}p.forEach(_=>{const w=t.getBaseTarget(_),v=t.getValue(_);v&&(v.liveStyle=!0),I[_]=w??null}),d.push({animation:I})}let A=!!d.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(A=!1),r=!1,A?e(d):Promise.resolve()}function a(l,c){var d;if(n[l].isActive===c)return Promise.resolve();(d=t.variantChildren)==null||d.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n,reset:()=>{n=lv(),r=!0}}}function pD(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!yx(e,t):!1}function kr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lv(){return{animate:kr(!0),whileInView:kr(),whileHover:kr(),whileTap:kr(),whileDrag:kr(),whileFocus:kr(),exit:kr()}}class Pr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class mD extends Pr{constructor(e){super(e),e.animationState||(e.animationState=fD(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();nc(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let gD=0;class yD extends Pr{constructor(){super(...arguments),this.id=gD++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const vD={animation:{Feature:mD},exit:{Feature:yD}};function Yo(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ya(t){return{point:{x:t.pageX,y:t.pageY}}}const _D=t=>e=>ym(e)&&t(e,ya(e));function po(t,e,n,r){return Yo(t,e,_D(n),r)}function _x({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function wD({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function ED(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const wx=1e-4,TD=1-wx,xD=1+wx,Ex=.01,SD=0-Ex,AD=0+Ex;function _t(t){return t.max-t.min}function PD(t,e,n){return Math.abs(t-e)<=n}function uv(t,e,n,r=.5){t.origin=r,t.originPoint=Pe(e.min,e.max,t.origin),t.scale=_t(n)/_t(e),t.translate=Pe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=TD&&t.scale<=xD||isNaN(t.scale))&&(t.scale=1),(t.translate>=SD&&t.translate<=AD||isNaN(t.translate))&&(t.translate=0)}function mo(t,e,n,r){uv(t.x,e.x,n.x,r?r.originX:void 0),uv(t.y,e.y,n.y,r?r.originY:void 0)}function cv(t,e,n){t.min=n.min+e.min,t.max=t.min+_t(e)}function CD(t,e,n){cv(t.x,e.x,n.x),cv(t.y,e.y,n.y)}function hv(t,e,n){t.min=e.min-n.min,t.max=t.min+_t(e)}function go(t,e,n){hv(t.x,e.x,n.x),hv(t.y,e.y,n.y)}const dv=()=>({translate:0,scale:1,origin:0,originPoint:0}),ks=()=>({x:dv(),y:dv()}),fv=()=>({min:0,max:0}),Le=()=>({x:fv(),y:fv()});function Wt(t){return[t("x"),t("y")]}function yh(t){return t===void 0||t===1}function rf({scale:t,scaleX:e,scaleY:n}){return!yh(t)||!yh(e)||!yh(n)}function Mr(t){return rf(t)||Tx(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Tx(t){return pv(t.x)||pv(t.y)}function pv(t){return t&&t!=="0%"}function gu(t,e,n){const r=t-n,s=e*r;return n+s}function mv(t,e,n,r,s){return s!==void 0&&(t=gu(t,s,r)),gu(t,n,r)+e}function sf(t,e=0,n=1,r,s){t.min=mv(t.min,e,n,r,s),t.max=mv(t.max,e,n,r,s)}function xx(t,{x:e,y:n}){sf(t.x,e.translate,e.scale,e.originPoint),sf(t.y,n.translate,n.scale,n.originPoint)}const gv=.999999999999,yv=1.0000000000001;function ID(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Vs(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,xx(t,o)),r&&Mr(i.latestValues)&&Vs(t,i.latestValues))}e.x<yv&&e.x>gv&&(e.x=1),e.y<yv&&e.y>gv&&(e.y=1)}function bs(t,e){t.min=t.min+e,t.max=t.max+e}function vv(t,e,n,r,s=.5){const i=Pe(t.min,t.max,s);sf(t,e,n,i,r)}function Vs(t,e){vv(t.x,e.x,e.scaleX,e.scale,e.originX),vv(t.y,e.y,e.scaleY,e.scale,e.originY)}function Sx(t,e){return _x(ED(t.getBoundingClientRect(),e))}function RD(t,e,n){const r=Sx(t,n),{scroll:s}=e;return s&&(bs(r.x,s.offset.x),bs(r.y,s.offset.y)),r}const Ax=({current:t})=>t?t.ownerDocument.defaultView:null,_v=(t,e)=>Math.abs(t-e);function ND(t,e){const n=_v(t.x,e.x),r=_v(t.y,e.y);return Math.sqrt(n**2+r**2)}class Px{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=_h(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=ND(d.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:T}=d,{timestamp:A}=Je;this.history.push({...T,timestamp:A});const{onStart:I,onMove:_}=this.handlers;p||(I&&I(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,d)},this.handlePointerMove=(d,p)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=vh(p,this.transformPagePoint),Ie.update(this.updatePoint,!0)},this.handlePointerUp=(d,p)=>{this.end();const{onEnd:g,onSessionEnd:T,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=_h(d.type==="pointercancel"?this.lastMoveEventInfo:vh(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(d,I),T&&T(d,I)},!ym(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=ya(e),a=vh(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Je;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,_h(a,this.history)),this.removeListeners=pa(po(this.contextWindow,"pointermove",this.handlePointerMove),po(this.contextWindow,"pointerup",this.handlePointerUp),po(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),_r(this.updatePoint)}}function vh(t,e){return e?{point:e(t.point)}:t}function wv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function _h({point:t},e){return{point:t,delta:wv(t,Cx(e)),offset:wv(t,kD(e)),velocity:bD(e,.1)}}function kD(t){return t[0]}function Cx(t){return t[t.length-1]}function bD(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Cx(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>vn(e)));)n--;if(!r)return{x:0,y:0};const i=_n(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function VD(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Pe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Pe(n,t,r.max):Math.min(t,n)),t}function Ev(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function DD(t,{top:e,left:n,bottom:r,right:s}){return{x:Ev(t.x,n,s),y:Ev(t.y,e,r)}}function Tv(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function MD(t,e){return{x:Tv(t.x,e.x),y:Tv(t.y,e.y)}}function LD(t,e){let n=.5;const r=_t(t),s=_t(e);return s>r?n=Wo(e.min,e.max-r,t.min):r>s&&(n=Wo(t.min,t.max-s,e.min)),Fn(0,1,n)}function OD(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const of=.35;function jD(t=of){return t===!1?t=0:t===!0&&(t=of),{x:xv(t,"left","right"),y:xv(t,"top","bottom")}}function xv(t,e,n){return{min:Sv(t,e),max:Sv(t,n)}}function Sv(t,e){return typeof t=="number"?t:t[e]||0}const FD=new WeakMap;class BD{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Le(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ya(h).point)},i=(h,d)=>{const{drag:p,dragPropagation:g,onDragStart:T}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=rV(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Wt(I=>{let _=this.getAxisMotionValue(I).get()||0;if(wn.test(_)){const{projection:w}=this.visualElement;if(w&&w.layout){const v=w.layout.layoutBox[I];v&&(_=_t(v)*(parseFloat(_)/100))}}this.originPoint[I]=_}),T&&Ie.postRender(()=>T(h,d)),tf(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:T,onDrag:A}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:I}=d;if(g&&this.currentDirection===null){this.currentDirection=UD(I),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",d.point,I),this.updateAxis("y",d.point,I),this.visualElement.render(),A&&A(h,d)},a=(h,d)=>this.stop(h,d),l=()=>Wt(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)==null?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Px(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:Ax(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Ie.postRender(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!rl(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=VD(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&Ns(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=DD(r.layoutBox,e):this.constraints=!1,this.elastic=jD(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Wt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=OD(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ns(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=RD(r,s.root,this.visualElement.getTransformPagePoint());let o=MD(s.layout.layoutBox,i);if(n){const a=n(wD(o));this.hasMutatedConstraints=!!a,a&&(o=_x(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Wt(h=>{if(!rl(h,n,this.currentDirection))return;let d=l&&l[h]||{};o&&(d={min:0,max:0});const p=s?200:1e6,g=s?40:1e7,T={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(h,T)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return tf(this.visualElement,e),r.start(Pm(e,r,0,n,this.visualElement,!1))}stopAnimation(){Wt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Wt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Wt(n=>{const{drag:r}=this.getProps();if(!rl(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Pe(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ns(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Wt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();s[o]=LD({min:l,max:l},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Wt(o=>{if(!rl(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Pe(l,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;FD.set(this.visualElement,this);const e=this.visualElement.current,n=po(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ns(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Ie.read(r);const o=Yo(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Wt(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=l[h].translate,d.set(d.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=of,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function rl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function UD(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class zD extends Pr{constructor(e){super(e),this.removeGroupControls=Qt,this.removeListeners=Qt,this.controls=new BD(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Av=t=>(e,n)=>{t&&Ie.postRender(()=>t(e,n))};class $D extends Pr{constructor(){super(...arguments),this.removePointerDownListener=Qt}onPointerDown(e){this.session=new Px(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ax(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Av(e),onStart:Av(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Ie.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=po(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Sl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Pv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const zi={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(J.test(t))t=parseFloat(t);else return t;const n=Pv(t,e.target.x),r=Pv(t,e.target.y);return`${n}% ${r}%`}},WD={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=wr.parse(t);if(s.length>5)return r;const i=wr.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=l;const c=Pe(a,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class HD extends V.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;RV(KD),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Sl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,{projection:o}=r;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Ie.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),gm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ix(t){const[e,n]=dV(),r=V.useContext(cT);return E.jsx(HD,{...t,layoutGroup:r,switchLayoutGroup:V.useContext(ox),isPresent:e,safeToRemove:n})}const KD={borderRadius:{...zi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zi,borderTopRightRadius:zi,borderBottomLeftRadius:zi,borderBottomRightRadius:zi,boxShadow:WD};function qD(t,e,n){const r=pt(t)?t:ii(t);return r.start(Pm("",r,e,n)),r.animation}const GD=(t,e)=>t.depth-e.depth;class QD{constructor(){this.children=[],this.isDirty=!1}add(e){Xp(this.children,e),this.isDirty=!0}remove(e){Jp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(GD),this.isDirty=!1,this.children.forEach(e)}}function YD(t,e){const n=Nt.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(_r(r),t(i-e))};return Ie.setup(r,!0),()=>_r(r)}const Rx=["TopLeft","TopRight","BottomLeft","BottomRight"],XD=Rx.length,Cv=t=>typeof t=="string"?parseFloat(t):t,Iv=t=>typeof t=="number"||J.test(t);function JD(t,e,n,r,s,i){s?(t.opacity=Pe(0,n.opacity??1,ZD(r)),t.opacityExit=Pe(e.opacity??1,0,eM(r))):i&&(t.opacity=Pe(e.opacity??1,n.opacity??1,r));for(let o=0;o<XD;o++){const a=`border${Rx[o]}Radius`;let l=Rv(e,a),c=Rv(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||Iv(l)===Iv(c)?(t[a]=Math.max(Pe(Cv(l),Cv(c),r),0),(wn.test(c)||wn.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Pe(e.rotate||0,n.rotate||0,r))}function Rv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const ZD=Nx(0,.5,ET),eM=Nx(.5,.95,Qt);function Nx(t,e,n){return r=>r<t?0:r>e?1:n(Wo(t,e,r))}function Nv(t,e){t.min=e.min,t.max=e.max}function $t(t,e){Nv(t.x,e.x),Nv(t.y,e.y)}function kv(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function bv(t,e,n,r,s){return t-=e,t=gu(t,1/n,r),s!==void 0&&(t=gu(t,1/s,r)),t}function tM(t,e=0,n=1,r=.5,s,i=t,o=t){if(wn.test(e)&&(e=parseFloat(e),e=Pe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Pe(i.min,i.max,r);t===i&&(a-=e),t.min=bv(t.min,e,n,a,s),t.max=bv(t.max,e,n,a,s)}function Vv(t,e,[n,r,s],i,o){tM(t,e[n],e[r],e[s],e.scale,i,o)}const nM=["x","scaleX","originX"],rM=["y","scaleY","originY"];function Dv(t,e,n,r){Vv(t.x,e,nM,n?n.x:void 0,r?r.x:void 0),Vv(t.y,e,rM,n?n.y:void 0,r?r.y:void 0)}function Mv(t){return t.translate===0&&t.scale===1}function kx(t){return Mv(t.x)&&Mv(t.y)}function Lv(t,e){return t.min===e.min&&t.max===e.max}function sM(t,e){return Lv(t.x,e.x)&&Lv(t.y,e.y)}function Ov(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function bx(t,e){return Ov(t.x,e.x)&&Ov(t.y,e.y)}function jv(t){return _t(t.x)/_t(t.y)}function Fv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class iM{constructor(){this.members=[]}add(e){Xp(this.members,e),e.scheduleRender()}remove(e){if(Jp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function oM(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||i||o)&&(r=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:d,rotateY:p,skewX:g,skewY:T}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),d&&(r+=`rotateX(${d}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),T&&(r+=`skewY(${T}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const wh=["","X","Y","Z"],aM={visibility:"hidden"},lM=1e3;let uM=0;function Eh(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Vx(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=mx(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Ie,!(s||i))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Vx(r)}function Dx({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=uM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(dM),this.nodes.forEach(yM),this.nodes.forEach(vM),this.nodes.forEach(fM)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new QD)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new tm),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=ex(o)&&!uV(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let h;const d=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=YD(d,250),Sl.hasAnimatedSinceResize&&(Sl.hasAnimatedSinceResize=!1,this.nodes.forEach(Uv))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:d,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||c.getDefaultTransition()||xM,{onLayoutAnimationStart:A,onLayoutAnimationComplete:I}=c.getProps(),_=!this.targetLayout||!bx(this.targetLayout,g),w=!d&&p;if(this.options.layoutRoot||this.resumeFrom||w||d&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...pm(T,"layout"),onPlay:A,onComplete:I};(c.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(h,w)}else d||Uv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),_r(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_M),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Vx(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Bv);return}this.isUpdating||this.nodes.forEach(mM),this.isUpdating=!1,this.nodes.forEach(gM),this.nodes.forEach(cM),this.nodes.forEach(hM),this.clearAllSnapshots();const a=Nt.now();Je.delta=Fn(0,1e3/60,a-Je.timestamp),Je.timestamp=a,Je.isProcessing=!0,hh.update.process(Je),hh.preRender.process(Je),hh.render.process(Je),Je.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,gm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(pM),this.sharedNodes.forEach(wM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ie.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ie.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!_t(this.snapshot.measuredBox.x)&&!_t(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Le(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!kx(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Mr(this.latestValues)||h)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),SM(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Le();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(AM))){const{scroll:h}=this.root;h&&(bs(a.x,h.offset.x),bs(a.y,h.offset.y))}return a}removeElementScroll(o){var l;const a=Le();if($t(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:p}=h;h!==this.root&&d&&p.layoutScroll&&(d.wasRoot&&$t(a,o),bs(a.x,d.offset.x),bs(a.y,d.offset.y))}return a}applyTransform(o,a=!1){const l=Le();$t(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Vs(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Mr(h.latestValues)&&Vs(l,h.latestValues)}return Mr(this.latestValues)&&Vs(l,this.latestValues),l}removeTransform(o){const a=Le();$t(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Mr(c.latestValues))continue;rf(c.latestValues)&&c.updateSnapshot();const h=Le(),d=c.measurePageBox();$t(h,d),Dv(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Mr(this.latestValues)&&Dv(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Je.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:d}=this.options;if(!(!this.layout||!(h||d))){if(this.resolvedRelativeTargetAt=Je.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Le(),this.relativeTargetOrigin=Le(),go(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),$t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Le(),this.targetWithTransforms=Le()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),CD(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):$t(this.target,this.layout.layoutBox),xx(this.target,this.targetDelta)):$t(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Le(),this.relativeTargetOrigin=Le(),go(this.relativeTargetOrigin,this.target,g.target),$t(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||rf(this.parent.latestValues)||Tx(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var T;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Je.timestamp&&(l=!1),l)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;$t(this.layoutCorrected,this.layout.layoutBox);const d=this.treeScale.x,p=this.treeScale.y;ID(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Le());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(kv(this.prevProjectionDelta.x,this.projectionDelta.x),kv(this.prevProjectionDelta.y,this.projectionDelta.y)),mo(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==d||this.treeScale.y!==p||!Fv(this.projectionDelta.x,this.prevProjectionDelta.x)||!Fv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ks(),this.projectionDelta=ks(),this.projectionDeltaWithTransform=ks()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},d=ks();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Le(),g=l?l.source:void 0,T=this.layout?this.layout.source:void 0,A=g!==T,I=this.getStack(),_=!I||I.members.length<=1,w=!!(A&&!_&&this.options.crossfade===!0&&!this.path.some(TM));this.animationProgress=0;let v;this.mixTargetDelta=b=>{const D=b/1e3;zv(d.x,o.x,D),zv(d.y,o.y,D),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(go(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),EM(this.relativeTarget,this.relativeTargetOrigin,p,D),v&&sM(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Le()),$t(v,this.relativeTarget)),A&&(this.animationValues=h,JD(h,c,this.latestValues,D,w,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(_r(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ie.update(()=>{Sl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ii(0)),this.currentAnimation=qD(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(lM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&Mx(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Le();const d=_t(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+d;const p=_t(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}$t(a,l),Vs(a,h),mo(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new iM),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Eh("z",o,c,this.animationValues);for(let h=0;h<wh.length;h++)Eh(`rotate${wh[h]}`,o,c,this.animationValues),Eh(`skew${wh[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return aM;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=xl(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=xl(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Mr(this.latestValues)&&(g.transform=l?l({},""):"none",this.hasProjected=!1),g}const h=c.animationValues||c.latestValues;this.applyTransformsToTarget(),a.transform=oM(this.projectionDeltaWithTransform,this.treeScale,h),l&&(a.transform=l(h,a.transform));const{x:d,y:p}=this.projectionDelta;a.transformOrigin=`${d.origin*100}% ${p.origin*100}% 0`,c.animationValues?a.opacity=c===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:a.opacity=c===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const g in Go){if(h[g]===void 0)continue;const{correct:T,applyTo:A,isCSSVariable:I}=Go[g],_=a.transform==="none"?h[g]:T(h[g],c);if(A){const w=A.length;for(let v=0;v<w;v++)a[A[v]]=_}else I?this.options.visualElement.renderState.vars[g]=_:a[g]=_}return this.options.layoutId&&(a.pointerEvents=c===this?xl(o==null?void 0:o.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Bv),this.root.sharedNodes.clear()}}}function cM(t){t.updateLayout()}function hM(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?Wt(d=>{const p=o?e.measuredBox[d]:e.layoutBox[d],g=_t(p);p.min=r[d].min,p.max=p.min+g}):Mx(i,e.layoutBox,r)&&Wt(d=>{const p=o?e.measuredBox[d]:e.layoutBox[d],g=_t(r[d]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+g)});const a=ks();mo(a,r,e.layoutBox);const l=ks();o?mo(l,t.applyTransform(s,!0),e.measuredBox):mo(l,r,e.layoutBox);const c=!kx(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:p,layout:g}=d;if(p&&g){const T=Le();go(T,e.layoutBox,p.layoutBox);const A=Le();go(A,r,g.layoutBox),bx(T,A)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=A,t.relativeTargetOrigin=T,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function dM(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function fM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function pM(t){t.clearSnapshot()}function Bv(t){t.clearMeasurements()}function mM(t){t.isLayoutDirty=!1}function gM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Uv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function yM(t){t.resolveTargetDelta()}function vM(t){t.calcProjection()}function _M(t){t.resetSkewAndRotation()}function wM(t){t.removeLeadSnapshot()}function zv(t,e,n){t.translate=Pe(e.translate,0,n),t.scale=Pe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function $v(t,e,n,r){t.min=Pe(e.min,n.min,r),t.max=Pe(e.max,n.max,r)}function EM(t,e,n,r){$v(t.x,e.x,n.x,r),$v(t.y,e.y,n.y,r)}function TM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const xM={duration:.45,ease:[.4,0,.1,1]},Wv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Hv=Wv("applewebkit/")&&!Wv("chrome/")?Math.round:Qt;function Kv(t){t.min=Hv(t.min),t.max=Hv(t.max)}function SM(t){Kv(t.x),Kv(t.y)}function Mx(t,e,n){return t==="position"||t==="preserve-aspect"&&!PD(jv(e),jv(n),.2)}function AM(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const PM=Dx({attachResizeListener:(t,e)=>Yo(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Th={current:void 0},Lx=Dx({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Th.current){const t=new PM({});t.mount(window),t.setOptions({layoutScroll:!0}),Th.current=t}return Th.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),CM={pan:{Feature:$D},drag:{Feature:zD,ProjectionNode:Lx,MeasureLayout:Ix}};function qv(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&Ie.postRender(()=>i(e,ya(e)))}class IM extends Pr{mount(){const{current:e}=this.node;e&&(this.unmount=sV(e,(n,r)=>(qv(this.node,r,"Start"),s=>qv(this.node,s,"End"))))}unmount(){}}class RM extends Pr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pa(Yo(this.node.current,"focus",()=>this.onFocus()),Yo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Gv(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&Ie.postRender(()=>i(e,ya(e)))}class NM extends Pr{mount(){const{current:e}=this.node;e&&(this.unmount=lV(e,(n,r)=>(Gv(this.node,r,"Start"),(s,{success:i})=>Gv(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const af=new WeakMap,xh=new WeakMap,kM=t=>{const e=af.get(t.target);e&&e(t)},bM=t=>{t.forEach(kM)};function VM({root:t,...e}){const n=t||document;xh.has(n)||xh.set(n,{});const r=xh.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(bM,{root:t,...e})),r[s]}function DM(t,e,n){const r=VM(e);return af.set(t,n),r.observe(t),()=>{af.delete(t),r.unobserve(t)}}const MM={some:0,all:1};class LM extends Pr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:MM[s]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),p=c?h:d;p&&p(l)};return DM(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(OM(e,n))&&this.startObserver()}unmount(){}}function OM({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const jM={inView:{Feature:LM},tap:{Feature:NM},focus:{Feature:RM},hover:{Feature:IM}},FM={layout:{ProjectionNode:Lx,MeasureLayout:Ix}},lf={current:null},Ox={current:!1};function BM(){if(Ox.current=!0,!!Qp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>lf.current=t.matches;t.addListener(e),e()}else lf.current=!1}const UM=new WeakMap;function zM(t,e,n){for(const r in e){const s=e[r],i=n[r];if(pt(s))t.addValue(r,s);else if(pt(i))t.addValue(r,ii(s,{owner:t}));else if(i!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,ii(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Qv=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class $M{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=fm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Nt.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Ie.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=rc(n),this.isVariantNode=sx(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...d}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in d){const g=d[p];l[p]!==void 0&&pt(g)&&g.set(l[p],!1)}}mount(e){this.current=e,UM.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Ox.current||BM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:lf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),_r(this.notifyUpdate),_r(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=_i.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Ie.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in oi){const n=oi[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Le()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Qv.length;r++){const s=Qv[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=zM(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ii(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(hT(r)||fT(r))?r=parseFloat(r):!hV(r)&&wr.test(n)&&(r=QT(e,n)),this.setBaseTarget(e,pt(r)?r.get():r)),pt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Sm(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!pt(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new tm),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class jx extends $M{constructor(){super(...arguments),this.KeyframeResolver=Zb}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Fx(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}function WM(t){return window.getComputedStyle(t)}class HM extends jx{constructor(){super(...arguments),this.type="html",this.renderInstance=Fx}readValueFromInstance(e,n){var r;if(_i.has(n))return(r=this.projection)!=null&&r.isProjecting?Gd(n):vb(e,n);{const s=WM(e),i=(sm(n)?s.getPropertyValue(n):s[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Sx(e,n)}build(e,n,r){Em(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Am(e,n,r)}}const Bx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function KM(t,e,n,r){Fx(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(Bx.has(s)?s:wm(s),e.attrs[s])}class qM extends jx{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Le}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(_i.has(n)){const r=GT(n);return r&&r.default||0}return n=Bx.has(n)?n:wm(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return px(e,n,r)}build(e,n,r){cx(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){KM(e,n,r,s)}mount(e){this.isSVGTag=dx(e.tagName),super.mount(e)}}const GM=(t,e)=>xm(t)?new qM(e):new HM(e,{allowProjection:t!==V.Fragment}),QM=KV({...vD,...jM,...CM,...FM},GM),Yv=yV(QM),YM=600,XM=300,Xv=({table:t,isAddButton:e,onClick:n,onDoubleClick:r,onLongPress:s,onDelete:i})=>{const o=V.useRef(null),a=V.useRef(null),l=V.useRef(0),[c,h]=V.useState(!1),d=V.useRef(null);V.useEffect(()=>{const _=w=>{d.current&&!d.current.contains(w.target)&&h(!1)};return document.addEventListener("mousedown",_),()=>{document.removeEventListener("mousedown",_)}},[]);const p=_=>{s&&(a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{s(),clearTimeout(a.current),a.current=null},YM))},g=()=>{a.current&&(clearTimeout(a.current),a.current=null)};V.useEffect(()=>{const _=o.current;if(!_)return;const w=v=>{var O;g();const b=Date.now(),D=b-(l.current||0);if(D>0&&D<=XM){v.preventDefault(),(O=v.stopPropagation)==null||O.call(v),r==null||r(),l.current=0;return}l.current=b};return _.addEventListener("touchend",w,{passive:!1}),()=>{_.removeEventListener("touchend",w),g()}},[r]),V.useEffect(()=>()=>g(),[]);const T=_=>{_.stopPropagation(),h(w=>!w)},A=_=>{_.stopPropagation(),i==null||i(),h(!1)};if(e)return E.jsx(Yv.button,{onClick:n,whileHover:{scale:1.03},whileTap:{scale:.97},className:"h-40 rounded-2xl border-2 border-dashed border-gray-300 flex items-center justify-center transition hover:border-blue-500 hover:text-blue-600 bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Add Table",children:E.jsx("span",{className:"text-gray-500 font-medium text-lg",children:"+ Add Table"})});const I=(t==null?void 0:t.status)==="occupied";return E.jsxs(Yv.div,{ref:o,role:"button",tabIndex:0,whileHover:{scale:1.02},whileTap:{scale:.98},onDoubleClick:()=>r==null?void 0:r(),onKeyDown:_=>{_.key==="Enter"&&(r==null||r())},onTouchStart:p,onTouchEnd:g,onTouchCancel:g,onTouchMove:g,className:`relative h-40 rounded-2xl shadow-md hover:shadow-lg transition cursor-pointer flex flex-col items-center justify-center border p-4
        ${I?"bg-green-100 border-green-400 text-green-900":"bg-white border-gray-200 text-gray-800"}`,"aria-pressed":I,children:[i&&E.jsxs("div",{ref:d,className:"absolute top-1 right-1 z-10",children:[E.jsx("button",{onClick:T,className:"p-2 rounded-full hover:bg-black/10 transition-colors","aria-label":"Table options",children:E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),c&&E.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5",children:E.jsx("div",{className:"py-1",children:E.jsxs("button",{onClick:A,className:"w-full text-left px-4 py-2 text-sm text-red-700 hover:bg-red-50 hover:text-red-800 flex items-center gap-2",children:[E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:E.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),"Delete Table"]})})})]}),(t==null?void 0:t.status)&&E.jsx("div",{className:`absolute top-2 left-2 h-3 w-3 rounded-full ${t.status==="available"?"bg-green-500":t.status==="occupied"?"bg-green-700":"bg-yellow-400"}`,title:t.status}),E.jsx("span",{className:"text-xl font-semibold",children:(t==null?void 0:t.name)??"Table"}),(t==null?void 0:t.status)&&E.jsx("span",{className:"text-sm mt-1 capitalize",children:t.status})]})},JM=()=>{const[t,e]=V.useState([]),[n,r]=V.useState(!1),[s,i]=V.useState(""),[o,a]=V.useState(!0),l=ww();V.useEffect(()=>{a(!0);const p=aT(g=>{e(g||[]),a(!1)},g=>{console.error("Error fetching tables in real-time:",g),a(!1)});return()=>p()},[]);const c=p=>{p&&l(`/order?tableId=${encodeURIComponent(p)}`)},h=async()=>{const p=s.trim();if(p)try{await ak(p),i(""),r(!1)}catch(g){console.error("Error adding table:",g),alert("Failed to add table.")}},d=async p=>{if(!p)return;if(window.confirm("Are you sure you want to delete this table? This action cannot be undone."))try{await lk(p)}catch(T){console.error("Error deleting table:",T),alert("Failed to delete table. Please try again.")}};return E.jsxs("div",{className:"min-h-screen bg-gray-100 px-4 py-8 md:px-8",children:[E.jsxs("div",{className:"max-w-6xl mx-auto",children:[E.jsxs("header",{className:"mb-8",children:[E.jsx("h1",{className:"text-4xl font-semibold text-gray-900",children:"Tables"}),E.jsx("p",{className:"text-gray-600 mt-2",children:"Manage all your restaurant tables from here."})]}),o?E.jsx("div",{className:"text-gray-500 mb-6",children:"Loading tables..."}):null,E.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:[[...t].sort((p,g)=>{const T=parseInt(p.name.replace(/\D/g,""),10)||0,A=parseInt(g.name.replace(/\D/g,""),10)||0;return T-A}).map(p=>{const g=p.id??p._id??p.name;return E.jsx(Xv,{table:p,onDoubleClick:()=>c(p.id??p._id),onLongPress:()=>c(p.id??p._id),onDelete:()=>d(p.id??p._id)},g)}),E.jsx(Xv,{isAddButton:!0,onClick:()=>r(!0)})]})]}),E.jsx($s,{isOpen:n,onClose:()=>r(!1),children:E.jsxs("div",{className:"p-4",children:[E.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Add New Table"}),E.jsx("input",{type:"text",value:s,onChange:p=>i(p.target.value),placeholder:"Enter table name (e.g. T1)",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4",onKeyDown:p=>{p.key==="Enter"&&h()}}),E.jsxs("div",{className:"flex justify-end gap-2",children:[E.jsx("button",{onClick:()=>{i(""),r(!1)},className:"px-4 py-2 rounded-lg border",children:"Cancel"}),E.jsx("button",{onClick:h,className:"bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition",children:"Done"})]})]})})]})},Ux=({item:t,quantity:e,onQuantityChange:n})=>{var r;return t?E.jsxs("div",{className:"card border rounded-lg shadow-md p-4 bg-white flex flex-col",children:[E.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:t.name}),E.jsxs("p",{className:"text-gray-700 font-semibold mb-2",children:["",(r=t.price)==null?void 0:r.toFixed(2)]}),t.ingredients&&E.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[E.jsx("span",{className:"font-medium",children:"Ingredients:"})," ",t.ingredients]}),t.specialNote&&E.jsx("p",{className:"text-xs italic text-gray-500 mb-3",children:t.specialNote}),E.jsxs("div",{className:"mt-auto flex items-center gap-2",children:[E.jsx("button",{onClick:()=>n(Math.max(0,e-1)),className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300",children:"-"}),E.jsx("span",{className:"px-2",children:e}),E.jsx("button",{onClick:()=>n(e+1),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:"+"})]})]}):null},ZM=()=>{var O,C;const[t,e]=V.useState([]),[n,r]=V.useState([]),[s,i]=V.useState([]),[o,a]=V.useState(""),[l,c]=V.useState(""),[h,d]=V.useState(!0),[p,g]=V.useState({}),[T,A]=V.useState(!1),[I,_]=V.useState(!1),w=hi();V.useEffect(()=>{let y=!0;return(async()=>{A(!0);try{const[N,R,k]=await Promise.all([oT(),Gp(),qp()]);if(!y)return;e(N||[]),r(R||[]),i(k||[]);const W=new URLSearchParams(w.search).get("tableId");W&&(a(W),d(!0)),R&&R.length>0&&!l&&c(R[0].id??R[0]._id??"")}catch(N){console.error("Error fetching order data:",N),alert("Failed to load order data. Please try again.")}finally{A(!1)}})(),()=>{y=!1}},[w.search]);const v=(y,P)=>{g(N=>{const R={...N};return!P||P<=0?delete R[y]:R[y]=P,R})},b=s.reduce((y,P)=>{const N=p[P.id]||0;return y+(P.price||0)*N},0),D=async()=>{if(!o){alert("Please select a table before submitting the order."),d(!0);return}if(!(Object.keys(p).length===0&&!confirm("You have no items in the order. Submit empty order?"))){_(!0);try{const y=Object.entries(p).map(([N,R])=>({itemId:N,quantity:R})),P={tableId:o,staffId:l||null,items:y,total:b,createdAt:new Date().toISOString()};await hk(P);try{await lT(o,"occupied")}catch(N){console.error("Failed to update table status:",N)}window.dispatchEvent(new CustomEvent("tablesUpdated")),alert("Order submitted successfully!"),g({}),c(""),d(!1)}catch(y){console.error("Error submitting order:",y),alert("Failed to submit order. Try again.")}finally{_(!1)}}};return E.jsxs("div",{className:"container mx-auto py-6",children:[E.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Place Order"}),E.jsxs($s,{isOpen:h,onClose:()=>d(!1),children:[E.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Select Table and Staff"}),E.jsx("label",{className:"block text-sm font-medium mb-1",children:"Table"}),E.jsxs("select",{value:o,onChange:y=>a(y.target.value),className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[E.jsx("option",{value:"",children:"Select Table"}),t.map(y=>E.jsx("option",{value:y.id??y._id,children:y.name},y.id??y._id??y.name))]}),E.jsx("label",{className:"block text-sm font-medium mb-1",children:"Staff (optional)"}),E.jsxs("select",{value:l,onChange:y=>c(y.target.value),className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[E.jsx("option",{value:"",children:"Select Staff (Optional)"}),n.map(y=>E.jsx("option",{value:y.id??y._id,children:y.name},y.id??y._id))]}),E.jsx("div",{className:"flex justify-end",children:E.jsx("button",{onClick:()=>d(!1),disabled:!o,className:`px-4 py-2 rounded-lg transition-colors ${o?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600"}`,children:"Done"})})]}),T&&E.jsx("div",{className:"text-gray-500 mb-4",children:"Loading menu & data..."}),o?E.jsxs("div",{className:"mb-4 p-4 bg-white rounded shadow flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("div",{className:"text-lg font-medium text-gray-800",children:((O=t.find(y=>(y.id??y._id)===o))==null?void 0:O.name)||"Selected Table"}),E.jsxs("div",{className:"text-sm text-gray-500",children:["Staff:"," ",((C=n.find(y=>(y.id??y._id)===l))==null?void 0:C.name)||"Not assigned"]})]}),E.jsx("div",{children:E.jsx("button",{onClick:()=>d(!0),className:"px-3 py-2 bg-gray-100 rounded border hover:bg-gray-200",children:"Change"})})]}):null,E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-6",children:s.map(y=>E.jsx(Ux,{item:y,quantity:p[y.id]||0,onQuantityChange:P=>v(y.id??y._id,P)},y.id??y._id))}),E.jsxs("div",{className:"bg-white shadow rounded-lg p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[E.jsxs("div",{className:"text-xl font-semibold text-gray-800",children:["Total: ",b.toFixed(2)]}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("button",{onClick:()=>d(!0),className:"px-3 py-2 rounded border hover:bg-gray-50",children:"Select Table / Staff"}),E.jsx("button",{onClick:D,disabled:I||!o,className:`px-4 py-2 rounded-lg transition-colors ${o?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,children:I?"Submitting...":"Submit Order"})]})]})]})},e3=()=>{const[t,e]=V.useState([]),[n,r]=V.useState(!1),[s,i]=V.useState(!1),[o,a]=V.useState(!1),[l,c]=V.useState({name:"",fullPrice:"",halfPrice:"",quarterPrice:"",ingredients:"",specialNote:""}),[h,d]=V.useState([{name:"",fullPrice:"",halfPrice:"",quarterPrice:"",ingredients:"",specialNote:""}]),[p,g]=V.useState(!1),T=V.useRef([]);V.useEffect(()=>{const k=uk(S=>{e(S||[])});return()=>{typeof k=="function"&&k()}},[]);const A=k=>{const{name:S,value:W}=k.target;c(Y=>({...Y,[S]:W}))},I=async()=>{if(!l.name||!l.fullPrice){alert("Item name and Full Portion price are required.");return}const k=parseFloat(l.fullPrice);if(isNaN(k)){alert("Full Portion price must be a valid number.");return}const S=l.halfPrice?parseFloat(l.halfPrice):null,W=l.quarterPrice?parseFloat(l.quarterPrice):null;try{await j0({name:l.name.trim(),fullPrice:k,halfPrice:S,quarterPrice:W,ingredients:l.ingredients.trim(),specialNote:l.specialNote.trim()}),c({name:"",fullPrice:"",halfPrice:"",quarterPrice:"",ingredients:"",specialNote:""}),r(!1)}catch(Y){console.error("Error adding menu item:",Y),alert("Failed to add menu item.")}},_=(k,S)=>(T.current[k]||(T.current[k]=[]),T.current[k][S]||(T.current[k][S]=de.createRef()),T.current[k][S]),w=k=>{!T.current||!T.current.length||T.current.splice(k,1)},v=(k,S,W)=>{let ne=S,z=W;switch(k.key){case"ArrowUp":ne=Math.max(0,S-1);break;case"ArrowDown":ne=Math.min(h.length-1,S+1);break;case"ArrowLeft":z=Math.max(0,W-1);break;case"ArrowRight":z=Math.min(5,W+1);break;default:return}k.preventDefault();const j=_(ne,z);if(j&&j.current){j.current.focus();const H=j.current;if(H.setSelectionRange&&typeof H.value=="string"){const Q=H.value.length;H.setSelectionRange(Q,Q)}}},b=(k,S,W)=>{d(Y=>{const ne=[...Y];return ne[k]={...ne[k],[S]:W},ne})},D=()=>{d(k=>[...k,{name:"",fullPrice:"",halfPrice:"",quarterPrice:"",ingredients:"",specialNote:""}])},O=k=>{d(S=>S.filter((W,Y)=>Y!==k)),w(k)},C=()=>{d([{name:"",fullPrice:"",halfPrice:"",quarterPrice:"",ingredients:"",specialNote:""}]),T.current=[]},y=async()=>{const k=h.map(W=>({...W,fullPriceParsed:parseFloat(W.fullPrice),halfPriceParsed:W.halfPrice?parseFloat(W.halfPrice):null,quarterPriceParsed:W.quarterPrice?parseFloat(W.quarterPrice):null})).filter(W=>W.name&&!isNaN(W.fullPriceParsed));if(k.length===0){alert("No valid rows to add. Each row needs a name and a numeric price for at least the full portion.");return}g(!0);const S=k.map(W=>j0({name:W.name.trim(),fullPrice:W.fullPriceParsed,halfPrice:W.halfPriceParsed,quarterPrice:W.quarterPriceParsed,ingredients:W.ingredients?W.ingredients.trim():"",specialNote:W.specialNote?W.specialNote.trim():""}));try{const W=await Promise.allSettled(S),Y=W.filter(ne=>ne.status==="rejected");Y.length===0?(alert(`Successfully added ${W.length} item(s).`),C(),a(!1)):(console.error("Bulk add failures:",Y),alert(`${W.length-Y.length} added, ${Y.length} failed. See console for details.`))}catch(W){console.error("Unexpected bulk add error:",W),alert("Bulk add failed. Check console for details.")}finally{g(!1)}},P=k=>k.name&&k.fullPrice&&!isNaN(parseFloat(k.fullPrice)),N=()=>{i(!1),a(!0),T.current=[]},R="w-full p-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow";return E.jsxs("div",{className:"bg-gray-50 min-h-screen",children:[E.jsxs("div",{className:"container mx-auto px-4 lg:px-8 py-8",children:[E.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-8",children:[E.jsxs("div",{children:[E.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"Menu"}),E.jsx("p",{className:"mt-1 text-gray-500",children:"Manage your restaurant's menu items."})]}),E.jsx("button",{onClick:()=>i(!0),className:"mt-4 sm:mt-0 flex items-center justify-center bg-blue-600 text-white px-5 py-2.5 rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200",children:"Bulk Actions"})]}),E.jsxs("main",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[E.jsxs("button",{onClick:()=>r(!0),className:"group border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center h-full min-h-[180px] hover:border-blue-500 hover:bg-blue-50 transition-all duration-200",children:[E.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full flex items-center justify-center group-hover:bg-blue-200 transition-colors",children:E.jsx("span",{className:"text-2xl text-gray-500 group-hover:text-blue-600",children:"+"})}),E.jsx("span",{className:"mt-3 text-gray-600 font-semibold group-hover:text-blue-700",children:"Add New Item"})]}),t.map(k=>E.jsx(Ux,{item:k,quantity:0,onQuantityChange:()=>{}},k.id))]})]}),E.jsxs($s,{isOpen:n,onClose:()=>r(!1),children:[E.jsx("h2",{className:"text-2xl font-bold mb-5 text-gray-900",children:"Add New Menu Item"}),E.jsxs("div",{className:"space-y-4",children:[E.jsx("input",{type:"text",name:"name",value:l.name,onChange:A,placeholder:"Item Name",className:R}),E.jsx("input",{type:"text",name:"fullPrice",value:l.fullPrice,onChange:A,placeholder:"Full Portion Price",className:R}),E.jsx("input",{type:"text",name:"halfPrice",value:l.halfPrice,onChange:A,placeholder:"Half Portion Price",className:R}),E.jsx("input",{type:"text",name:"quarterPrice",value:l.quarterPrice,onChange:A,placeholder:"Quarter Portion Price",className:R}),E.jsx("input",{type:"text",name:"ingredients",value:l.ingredients,onChange:A,placeholder:"Ingredients (comma-separated)",className:R}),E.jsx("textarea",{name:"specialNote",value:l.specialNote,onChange:A,placeholder:"Special Note (optional)",rows:3,className:R})]}),E.jsx("div",{className:"flex justify-end mt-6",children:E.jsx("button",{onClick:I,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:"Done"})})]}),E.jsxs($s,{isOpen:s,onClose:()=>i(!1),children:[E.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Bulk Actions"}),E.jsx("p",{className:"text-gray-600 mb-6",children:"Choose an option to update your menu items in bulk."}),E.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[E.jsx("button",{className:"bg-gray-200 text-gray-500 px-6 py-3 rounded-lg transition-colors cursor-not-allowed",disabled:!0,children:"Update Existing"}),E.jsx("button",{onClick:N,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Add New Items"})]})]}),E.jsx($s,{isOpen:o,onClose:()=>a(!1),size:"5xl",children:E.jsxs("div",{className:"flex flex-col h-full",children:[E.jsxs("div",{className:"mb-4",children:[E.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Bulk Add New Items"}),E.jsx("p",{className:"text-gray-600 mt-1",children:"Use arrow keys to navigate. Rows missing a name or valid price for the full portion will be skipped."})]}),E.jsx("div",{className:"flex-grow overflow-hidden rounded-lg border border-gray-200",children:E.jsx("div",{className:"max-h-[55vh] overflow-y-auto",children:E.jsxs("table",{className:"w-full text-sm text-left text-gray-500",children:[E.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-100 sticky top-0",children:E.jsxs("tr",{children:[E.jsx("th",{scope:"col",className:"px-4 py-3 w-1/12 text-center",children:"Status"}),E.jsx("th",{scope:"col",className:"px-4 py-3 w-2/12",children:"Item Name*"}),E.jsx("th",{scope:"col",className:"px-4 py-3 w-1/12",children:"Full Portion Price*"}),E.jsx("th",{scope:"col",className:"px-4 py-3 w-1/12",children:"Half Portion Price"}),E.jsx("th",{scope:"col",className:"px-4 py-3 w-1/12",children:"Quarter Portion Price"}),E.jsx("th",{scope:"col",className:"px-4 py-3 w-2/12",children:"Ingredients"}),E.jsx("th",{scope:"col",className:"px-4 py-3 w-2/12",children:"Special Note"}),E.jsx("th",{scope:"col",className:"px-4 py-3 w-1/12 text-center"})]})}),E.jsx("tbody",{children:h.map((k,S)=>{const W=P(k),Y=k.fullPrice&&isNaN(parseFloat(k.fullPrice)),ne=!k.name&&!k.fullPrice?"empty":W?"ok":"invalid";return E.jsxs("tr",{className:"group bg-white border-b hover:bg-gray-50",children:[E.jsxs("td",{className:"px-4 py-1 text-center",children:[ne==="ok"&&E.jsx("span",{title:"Valid row",className:"inline-block h-2.5 w-2.5 rounded-full bg-green-500"}),ne==="invalid"&&E.jsx("span",{title:"Invalid row",className:"inline-block h-2.5 w-2.5 rounded-full bg-red-500"}),ne==="empty"&&E.jsx("span",{title:"Empty row",className:"inline-block h-2.5 w-2.5 rounded-full bg-gray-300"})]}),E.jsx("td",{children:E.jsx("input",{ref:_(S,0),type:"text",placeholder:"e.g., Veg Biryani",value:k.name,onChange:z=>b(S,"name",z.target.value),onKeyDown:z=>v(z,S,0),className:"w-full bg-transparent p-2 border-0 focus:outline-none focus:ring-2 focus:ring-blue-300 rounded"})}),E.jsx("td",{children:E.jsx("input",{ref:_(S,1),type:"text",placeholder:"e.g., 150.00",value:k.fullPrice,onChange:z=>b(S,"fullPrice",z.target.value),onKeyDown:z=>v(z,S,1),className:`w-full bg-transparent p-2 border-0 focus:outline-none focus:ring-2 ${Y?"ring-red-400":"focus:ring-blue-300"} rounded`})}),E.jsx("td",{children:E.jsx("input",{ref:_(S,2),type:"text",placeholder:"e.g., 80.00",value:k.halfPrice,onChange:z=>b(S,"halfPrice",z.target.value),onKeyDown:z=>v(z,S,2),className:"w-full bg-transparent p-2 border-0 focus:outline-none focus:ring-2 focus:ring-blue-300 rounded"})}),E.jsx("td",{children:E.jsx("input",{ref:_(S,3),type:"text",placeholder:"e.g., 45.00",value:k.quarterPrice,onChange:z=>b(S,"quarterPrice",z.target.value),onKeyDown:z=>v(z,S,3),className:"w-full bg-transparent p-2 border-0 focus:outline-none focus:ring-2 focus:ring-blue-300 rounded"})}),E.jsx("td",{children:E.jsx("input",{ref:_(S,4),type:"text",placeholder:"e.g., rice, carrot, beans",value:k.ingredients,onChange:z=>b(S,"ingredients",z.target.value),onKeyDown:z=>v(z,S,4),className:"w-full bg-transparent p-2 border-0 focus:outline-none focus:ring-2 focus:ring-blue-300 rounded"})}),E.jsx("td",{children:E.jsx("input",{ref:_(S,5),type:"text",placeholder:"Optional note",value:k.specialNote,onChange:z=>b(S,"specialNote",z.target.value),onKeyDown:z=>v(z,S,5),className:"w-full bg-transparent p-2 border-0 focus:outline-none focus:ring-2 focus:ring-blue-300 rounded"})}),E.jsx("td",{className:"px-4 py-1 text-center",children:E.jsx("button",{title:"Delete row",onClick:()=>O(S),className:"px-2 py-1 text-gray-400 rounded-full hover:bg-red-100 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-opacity",children:""})})]},S)})})]})})}),E.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-6",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("button",{onClick:D,className:"bg-green-100 text-green-800 font-semibold px-4 py-2 rounded-lg hover:bg-green-200 transition-colors",children:"+ Add Row"}),E.jsx("button",{onClick:C,className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 transition-colors",children:"Clear All"})]}),E.jsx("div",{className:"mt-4 sm:mt-0",children:E.jsx("button",{onClick:y,disabled:p,className:`px-6 py-2.5 rounded-lg text-white font-semibold transition-colors w-32 ${p?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:p?"Adding...":"Add Items"})})]})]})})]})},t3=()=>{const[t,e]=V.useState([]),[n,r]=V.useState(!1),[s,i]=V.useState("");V.useEffect(()=>{(async()=>{try{const l=await Gp();e(l)}catch(l){console.error("Error loading staff:",l)}})()},[]);const o=async()=>{if(s.trim())try{const a=await ck(s);e([...t,a]),i(""),r(!1)}catch(a){console.error("Error adding staff:",a),alert("Failed to add staff member.")}else alert("Staff name is required.")};return E.jsxs("div",{className:"container mx-auto",children:[E.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Staff"}),E.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[E.jsx("button",{onClick:()=>r(!0),className:"card border-2 border-dashed border-gray-400 flex items-center justify-center h-40",children:E.jsx("span",{className:"text-gray-500 font-medium",children:"+ Add Staff"})}),t.map(a=>E.jsx("div",{className:"card flex items-center justify-center h-40",children:E.jsx("span",{className:"text-xl font-semibold text-gray-800",children:a.name})},a.id))]}),E.jsxs($s,{isOpen:n,onClose:()=>r(!1),children:[E.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Add New Staff"}),E.jsx("input",{type:"text",value:s,onChange:a=>i(a.target.value),placeholder:"Enter staff name",className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),E.jsx("div",{className:"flex justify-end",children:E.jsx("button",{onClick:o,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Done"})})]})]})},n3=()=>E.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:E.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),r3=()=>E.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[E.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),E.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s3=({onComplete:t,holdTime:e=2e3,children:n})=>{const[r,s]=V.useState(0),i=V.useRef(null),o=V.useRef(null),a=()=>{o.current=Date.now();const h=()=>{const d=Date.now()-o.current,p=Math.min(d/e*100,100);s(p),p<100?i.current=requestAnimationFrame(h):(t(),setTimeout(()=>s(0),500))};i.current=requestAnimationFrame(h)},l=()=>{i.current&&cancelAnimationFrame(i.current),s(0)},c={background:`linear-gradient(to right, #b91c1c ${r}%, #ef4444 ${r}%)`,transition:"background 0.1s linear"};return E.jsx("button",{onMouseDown:a,onMouseUp:l,onMouseLeave:l,onTouchStart:a,onTouchEnd:l,className:"bg-red-600 text-white font-bold py-2 px-4 rounded shadow-md select-none focus:outline-none",style:c,children:n})},i3=()=>{const[t,e]=V.useState([]),[n,r]=V.useState([]),[s,i]=V.useState([]),[o,a]=V.useState(null),[l,c]=V.useState(!1),[h,d]=V.useState(!1),p=V.useCallback(async()=>{if(!(!l||h)){d(!0);try{await fk(),a({type:"success",message:"All orders have been cleared successfully."})}catch(_){console.error("Failed to clear orders:",_),a({type:"error",message:"An error occurred while clearing orders."})}finally{d(!1),c(!1)}}},[l,h]);V.useEffect(()=>{if(o){const _=setTimeout(()=>a(null),5e3);return()=>clearTimeout(_)}},[o]),V.useEffect(()=>{const _=w=>{l&&w.key==="Enter"&&(w.preventDefault(),p())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[l,p]),V.useEffect(()=>{(async()=>{try{const[v,b]=await Promise.all([oT(),qp()]);r(v||[]),i(b||[])}catch(v){console.error("Error fetching tables or menu items:",v),a({type:"error",message:"Could not load menu or table data."})}})();const w=uT(v=>{const b=v.map(D=>({...D,createdAt:new Date(D.createdAt)})).sort((D,O)=>O.createdAt-D.createdAt);e(b)},v=>{console.error("Realtime orders error:",v),a({type:"error",message:"Error connecting to real-time orders."})});return()=>w()},[]);const g=_=>{var w;return((w=n.find(v=>(v.id??v._id)===_))==null?void 0:w.name)||"Unknown"},T=_=>{var w;return((w=s.find(v=>(v.id??v._id)===_))==null?void 0:w.name)||"Unknown"},A=()=>{if(!o)return null;const _="flex items-center p-4 mb-4 text-sm rounded-lg",w={success:"bg-green-100 text-green-700",error:"bg-red-100 text-red-700"};return E.jsxs("div",{className:`${_} ${w[o.type]}`,role:"alert",children:[E.jsx(n3,{})," ",E.jsx("span",{className:"ml-3 font-medium",children:o.message}),E.jsxs("button",{onClick:()=>a(null),className:"ml-auto -mx-1.5 -my-1.5 bg-transparent p-1.5 rounded-lg focus:ring-2 inline-flex h-8 w-8","aria-label":"Dismiss",children:[E.jsx("span",{className:"sr-only",children:"Dismiss"}),E.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:E.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})},I=()=>l?E.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 backdrop-blur-sm","aria-modal":"true",role:"dialog",children:E.jsxs("div",{className:"bg-white rounded-lg shadow-2xl p-6 w-full max-w-md mx-4",children:[E.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Emergency Action"}),E.jsxs("p",{className:"mt-4 text-sm bg-yellow-100 text-yellow-800 p-3 rounded-md border border-yellow-300",children:[E.jsx("strong",{children:"Warning:"})," This button is only for emergency situations if the system does not automatically clear the orders."]}),E.jsx("p",{className:"mt-3 text-gray-600",children:"Are you sure you want to permanently delete all orders? This action cannot be undone."}),E.jsxs("div",{className:"mt-6 flex justify-end space-x-4",children:[E.jsx("button",{onClick:()=>c(!1),disabled:h,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-300",children:"Cancel"}),E.jsx("button",{onClick:p,disabled:h,className:"px-4 py-2 bg-red-600 text-white rounded-md font-semibold transition-colors flex items-center disabled:opacity-75 disabled:cursor-not-allowed hover:bg-red-700",children:h?E.jsxs(E.Fragment,{children:[E.jsx(r3,{}),"Deleting..."]}):"Confirm & Delete All"})]})]})}):null;return E.jsxs(E.Fragment,{children:[E.jsx(I,{}),E.jsxs("div",{className:"container mx-auto py-6 px-4",children:[E.jsx(A,{}),E.jsxs("div",{className:"flex justify-between items-center mb-6",children:[E.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Kitchen Orders"}),t.length>0&&E.jsx(s3,{onComplete:()=>c(!0),children:"Press & Hold to Clear Orders"})]}),t.length===0?E.jsx("p",{className:"text-gray-600 text-center text-lg mt-8",children:"No orders currently."}):E.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(_=>E.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200 flex flex-col",children:[E.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-2 border-b pb-2",children:["Table: ",g(_.tableId)]}),E.jsx("ul",{className:"text-gray-700 mb-3 space-y-1 flex-grow",children:_.items.map((w,v)=>E.jsxs("li",{className:"flex justify-between",children:[E.jsx("span",{children:T(w.itemId)}),E.jsxs("span",{children:["x ",w.quantity]})]},v))}),E.jsxs("div",{className:"mt-auto pt-2 border-t",children:[E.jsxs("p",{className:"text-gray-800 font-semibold",children:["Total: ",_.total.toFixed(2)]}),_.staffId&&E.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Staff ID: ",_.staffId]})]})]},_.id))})]})]})};var o3=Object.defineProperty,yu=Object.getOwnPropertySymbols,zx=Object.prototype.hasOwnProperty,$x=Object.prototype.propertyIsEnumerable,Jv=(t,e,n)=>e in t?o3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uf=(t,e)=>{for(var n in e||(e={}))zx.call(e,n)&&Jv(t,n,e[n]);if(yu)for(var n of yu(e))$x.call(e,n)&&Jv(t,n,e[n]);return t},cf=(t,e)=>{var n={};for(var r in t)zx.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&yu)for(var r of yu(t))e.indexOf(r)<0&&$x.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ts;(t=>{const e=class re{constructor(l,c,h,d){if(this.version=l,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],l<re.MIN_VERSION||l>re.MAX_VERSION)throw new RangeError("Version value out of range");if(d<-1||d>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let p=[];for(let T=0;T<this.size;T++)p.push(!1);for(let T=0;T<this.size;T++)this.modules.push(p.slice()),this.isFunction.push(p.slice());this.drawFunctionPatterns();const g=this.addEccAndInterleave(h);if(this.drawCodewords(g),d==-1){let T=1e9;for(let A=0;A<8;A++){this.applyMask(A),this.drawFormatBits(A);const I=this.getPenaltyScore();I<T&&(d=A,T=I),this.applyMask(A)}}s(0<=d&&d<=7),this.mask=d,this.applyMask(d),this.drawFormatBits(d),this.isFunction=[]}static encodeText(l,c){const h=t.QrSegment.makeSegments(l);return re.encodeSegments(h,c)}static encodeBinary(l,c){const h=t.QrSegment.makeBytes(l);return re.encodeSegments([h],c)}static encodeSegments(l,c,h=1,d=40,p=-1,g=!0){if(!(re.MIN_VERSION<=h&&h<=d&&d<=re.MAX_VERSION)||p<-1||p>7)throw new RangeError("Invalid value");let T,A;for(T=h;;T++){const v=re.getNumDataCodewords(T,c)*8,b=o.getTotalBits(l,T);if(b<=v){A=b;break}if(T>=d)throw new RangeError("Data too long")}for(const v of[re.Ecc.MEDIUM,re.Ecc.QUARTILE,re.Ecc.HIGH])g&&A<=re.getNumDataCodewords(T,v)*8&&(c=v);let I=[];for(const v of l){n(v.mode.modeBits,4,I),n(v.numChars,v.mode.numCharCountBits(T),I);for(const b of v.getData())I.push(b)}s(I.length==A);const _=re.getNumDataCodewords(T,c)*8;s(I.length<=_),n(0,Math.min(4,_-I.length),I),n(0,(8-I.length%8)%8,I),s(I.length%8==0);for(let v=236;I.length<_;v^=253)n(v,8,I);let w=[];for(;w.length*8<I.length;)w.push(0);return I.forEach((v,b)=>w[b>>>3]|=v<<7-(b&7)),new re(T,c,w,p)}getModule(l,c){return 0<=l&&l<this.size&&0<=c&&c<this.size&&this.modules[c][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let h=0;h<this.size;h++)this.setFunctionModule(6,h,h%2==0),this.setFunctionModule(h,6,h%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),c=l.length;for(let h=0;h<c;h++)for(let d=0;d<c;d++)h==0&&d==0||h==0&&d==c-1||h==c-1&&d==0||this.drawAlignmentPattern(l[h],l[d]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const c=this.errorCorrectionLevel.formatBits<<3|l;let h=c;for(let p=0;p<10;p++)h=h<<1^(h>>>9)*1335;const d=(c<<10|h)^21522;s(d>>>15==0);for(let p=0;p<=5;p++)this.setFunctionModule(8,p,r(d,p));this.setFunctionModule(8,7,r(d,6)),this.setFunctionModule(8,8,r(d,7)),this.setFunctionModule(7,8,r(d,8));for(let p=9;p<15;p++)this.setFunctionModule(14-p,8,r(d,p));for(let p=0;p<8;p++)this.setFunctionModule(this.size-1-p,8,r(d,p));for(let p=8;p<15;p++)this.setFunctionModule(8,this.size-15+p,r(d,p));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let h=0;h<12;h++)l=l<<1^(l>>>11)*7973;const c=this.version<<12|l;s(c>>>18==0);for(let h=0;h<18;h++){const d=r(c,h),p=this.size-11+h%3,g=Math.floor(h/3);this.setFunctionModule(p,g,d),this.setFunctionModule(g,p,d)}}drawFinderPattern(l,c){for(let h=-4;h<=4;h++)for(let d=-4;d<=4;d++){const p=Math.max(Math.abs(d),Math.abs(h)),g=l+d,T=c+h;0<=g&&g<this.size&&0<=T&&T<this.size&&this.setFunctionModule(g,T,p!=2&&p!=4)}}drawAlignmentPattern(l,c){for(let h=-2;h<=2;h++)for(let d=-2;d<=2;d++)this.setFunctionModule(l+d,c+h,Math.max(Math.abs(d),Math.abs(h))!=1)}setFunctionModule(l,c,h){this.modules[c][l]=h,this.isFunction[c][l]=!0}addEccAndInterleave(l){const c=this.version,h=this.errorCorrectionLevel;if(l.length!=re.getNumDataCodewords(c,h))throw new RangeError("Invalid argument");const d=re.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][c],p=re.ECC_CODEWORDS_PER_BLOCK[h.ordinal][c],g=Math.floor(re.getNumRawDataModules(c)/8),T=d-g%d,A=Math.floor(g/d);let I=[];const _=re.reedSolomonComputeDivisor(p);for(let v=0,b=0;v<d;v++){let D=l.slice(b,b+A-p+(v<T?0:1));b+=D.length;const O=re.reedSolomonComputeRemainder(D,_);v<T&&D.push(0),I.push(D.concat(O))}let w=[];for(let v=0;v<I[0].length;v++)I.forEach((b,D)=>{(v!=A-p||D>=T)&&w.push(b[v])});return s(w.length==g),w}drawCodewords(l){if(l.length!=Math.floor(re.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let h=this.size-1;h>=1;h-=2){h==6&&(h=5);for(let d=0;d<this.size;d++)for(let p=0;p<2;p++){const g=h-p,A=(h+1&2)==0?this.size-1-d:d;!this.isFunction[A][g]&&c<l.length*8&&(this.modules[A][g]=r(l[c>>>3],7-(c&7)),c++)}}s(c==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let h=0;h<this.size;h++){let d;switch(l){case 0:d=(h+c)%2==0;break;case 1:d=c%2==0;break;case 2:d=h%3==0;break;case 3:d=(h+c)%3==0;break;case 4:d=(Math.floor(h/3)+Math.floor(c/2))%2==0;break;case 5:d=h*c%2+h*c%3==0;break;case 6:d=(h*c%2+h*c%3)%2==0;break;case 7:d=((h+c)%2+h*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][h]&&d&&(this.modules[c][h]=!this.modules[c][h])}}getPenaltyScore(){let l=0;for(let p=0;p<this.size;p++){let g=!1,T=0,A=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[p][I]==g?(T++,T==5?l+=re.PENALTY_N1:T>5&&l++):(this.finderPenaltyAddHistory(T,A),g||(l+=this.finderPenaltyCountPatterns(A)*re.PENALTY_N3),g=this.modules[p][I],T=1);l+=this.finderPenaltyTerminateAndCount(g,T,A)*re.PENALTY_N3}for(let p=0;p<this.size;p++){let g=!1,T=0,A=[0,0,0,0,0,0,0];for(let I=0;I<this.size;I++)this.modules[I][p]==g?(T++,T==5?l+=re.PENALTY_N1:T>5&&l++):(this.finderPenaltyAddHistory(T,A),g||(l+=this.finderPenaltyCountPatterns(A)*re.PENALTY_N3),g=this.modules[I][p],T=1);l+=this.finderPenaltyTerminateAndCount(g,T,A)*re.PENALTY_N3}for(let p=0;p<this.size-1;p++)for(let g=0;g<this.size-1;g++){const T=this.modules[p][g];T==this.modules[p][g+1]&&T==this.modules[p+1][g]&&T==this.modules[p+1][g+1]&&(l+=re.PENALTY_N2)}let c=0;for(const p of this.modules)c=p.reduce((g,T)=>g+(T?1:0),c);const h=this.size*this.size,d=Math.ceil(Math.abs(c*20-h*10)/h)-1;return s(0<=d&&d<=9),l+=d*re.PENALTY_N4,s(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let h=[6];for(let d=this.size-7;h.length<l;d-=c)h.splice(1,0,d);return h}}static getNumRawDataModules(l){if(l<re.MIN_VERSION||l>re.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*l+128)*l+64;if(l>=2){const h=Math.floor(l/7)+2;c-=(25*h-10)*h-55,l>=7&&(c-=36)}return s(208<=c&&c<=29648),c}static getNumDataCodewords(l,c){return Math.floor(re.getNumRawDataModules(l)/8)-re.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l]*re.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let c=[];for(let d=0;d<l-1;d++)c.push(0);c.push(1);let h=1;for(let d=0;d<l;d++){for(let p=0;p<c.length;p++)c[p]=re.reedSolomonMultiply(c[p],h),p+1<c.length&&(c[p]^=c[p+1]);h=re.reedSolomonMultiply(h,2)}return c}static reedSolomonComputeRemainder(l,c){let h=c.map(d=>0);for(const d of l){const p=d^h.shift();h.push(0),c.forEach((g,T)=>h[T]^=re.reedSolomonMultiply(g,p))}return h}static reedSolomonMultiply(l,c){if(l>>>8||c>>>8)throw new RangeError("Byte out of range");let h=0;for(let d=7;d>=0;d--)h=h<<1^(h>>>7)*285,h^=(c>>>d&1)*l;return s(h>>>8==0),h}finderPenaltyCountPatterns(l){const c=l[1];s(c<=this.size*3);const h=c>0&&l[2]==c&&l[3]==c*3&&l[4]==c&&l[5]==c;return(h&&l[0]>=c*4&&l[6]>=c?1:0)+(h&&l[6]>=c*4&&l[0]>=c?1:0)}finderPenaltyTerminateAndCount(l,c,h){return l&&(this.finderPenaltyAddHistory(c,h),c=0),c+=this.size,this.finderPenaltyAddHistory(c,h),this.finderPenaltyCountPatterns(h)}finderPenaltyAddHistory(l,c){c[0]==0&&(l+=this.size),c.pop(),c.unshift(l)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(a,l,c){if(l<0||l>31||a>>>l)throw new RangeError("Value out of range");for(let h=l-1;h>=0;h--)c.push(a>>>h&1)}function r(a,l){return(a>>>l&1)!=0}function s(a){if(!a)throw new Error("Assertion error")}const i=class be{constructor(l,c,h){if(this.mode=l,this.numChars=c,this.bitData=h,c<0)throw new RangeError("Invalid argument");this.bitData=h.slice()}static makeBytes(l){let c=[];for(const h of l)n(h,8,c);return new be(be.Mode.BYTE,l.length,c)}static makeNumeric(l){if(!be.isNumeric(l))throw new RangeError("String contains non-numeric characters");let c=[];for(let h=0;h<l.length;){const d=Math.min(l.length-h,3);n(parseInt(l.substring(h,h+d),10),d*3+1,c),h+=d}return new be(be.Mode.NUMERIC,l.length,c)}static makeAlphanumeric(l){if(!be.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],h;for(h=0;h+2<=l.length;h+=2){let d=be.ALPHANUMERIC_CHARSET.indexOf(l.charAt(h))*45;d+=be.ALPHANUMERIC_CHARSET.indexOf(l.charAt(h+1)),n(d,11,c)}return h<l.length&&n(be.ALPHANUMERIC_CHARSET.indexOf(l.charAt(h)),6,c),new be(be.Mode.ALPHANUMERIC,l.length,c)}static makeSegments(l){return l==""?[]:be.isNumeric(l)?[be.makeNumeric(l)]:be.isAlphanumeric(l)?[be.makeAlphanumeric(l)]:[be.makeBytes(be.toUtf8ByteArray(l))]}static makeEci(l){let c=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)n(l,8,c);else if(l<16384)n(2,2,c),n(l,14,c);else if(l<1e6)n(6,3,c),n(l,21,c);else throw new RangeError("ECI assignment value out of range");return new be(be.Mode.ECI,0,c)}static isNumeric(l){return be.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return be.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,c){let h=0;for(const d of l){const p=d.mode.numCharCountBits(c);if(d.numChars>=1<<p)return 1/0;h+=4+p+d.bitData.length}return h}static toUtf8ByteArray(l){l=encodeURI(l);let c=[];for(let h=0;h<l.length;h++)l.charAt(h)!="%"?c.push(l.charCodeAt(h)):(c.push(parseInt(l.substring(h+1,h+3),16)),h+=2);return c}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;t.QrSegment=i})(ts||(ts={}));(t=>{(e=>{const n=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(ts||(ts={}));(t=>{(e=>{const n=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(ts||(ts={}));var Ds=ts;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var a3={L:Ds.QrCode.Ecc.LOW,M:Ds.QrCode.Ecc.MEDIUM,Q:Ds.QrCode.Ecc.QUARTILE,H:Ds.QrCode.Ecc.HIGH},Wx=128,Hx="L",Kx="#FFFFFF",qx="#000000",Gx=!1,Qx=1,l3=4,u3=0,c3=.1;function Yx(t,e=0){const n=[];return t.forEach(function(r,s){let i=null;r.forEach(function(o,a){if(!o&&i!==null){n.push(`M${i+e} ${s+e}h${a-i}v1H${i+e}z`),i=null;return}if(a===r.length-1){if(!o)return;i===null?n.push(`M${a+e},${s+e} h1v1H${a+e}z`):n.push(`M${i+e},${s+e} h${a+1-i}v1H${i+e}z`);return}o&&i===null&&(i=a)})}),n.join("")}function Xx(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function h3(t,e,n,r){if(r==null)return null;const s=t.length+n*2,i=Math.floor(e*c3),o=s/e,a=(r.width||i)*o,l=(r.height||i)*o,c=r.x==null?t.length/2-a/2:r.x*o,h=r.y==null?t.length/2-l/2:r.y*o,d=r.opacity==null?1:r.opacity;let p=null;if(r.excavate){let T=Math.floor(c),A=Math.floor(h),I=Math.ceil(a+c-T),_=Math.ceil(l+h-A);p={x:T,y:A,w:I,h:_}}const g=r.crossOrigin;return{x:c,y:h,h:l,w:a,excavation:p,opacity:d,crossOrigin:g}}function d3(t,e){return e!=null?Math.max(Math.floor(e),0):t?l3:u3}function Jx({value:t,level:e,minVersion:n,includeMargin:r,marginSize:s,imageSettings:i,size:o,boostLevel:a}){let l=de.useMemo(()=>{const T=(Array.isArray(t)?t:[t]).reduce((A,I)=>(A.push(...Ds.QrSegment.makeSegments(I)),A),[]);return Ds.QrCode.encodeSegments(T,a3[e],n,void 0,void 0,a)},[t,e,n,a]);const{cells:c,margin:h,numCells:d,calculatedImageSettings:p}=de.useMemo(()=>{let g=l.getModules();const T=d3(r,s),A=g.length+T*2,I=h3(g,o,T,i);return{cells:g,margin:T,numCells:A,calculatedImageSettings:I}},[l,o,i,r,s]);return{qrcode:l,margin:h,cells:c,numCells:d,calculatedImageSettings:p}}var f3=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),p3=de.forwardRef(function(e,n){const r=e,{value:s,size:i=Wx,level:o=Hx,bgColor:a=Kx,fgColor:l=qx,includeMargin:c=Gx,minVersion:h=Qx,boostLevel:d,marginSize:p,imageSettings:g}=r,A=cf(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:I}=A,_=cf(A,["style"]),w=g==null?void 0:g.src,v=de.useRef(null),b=de.useRef(null),D=de.useCallback(W=>{v.current=W,typeof n=="function"?n(W):n&&(n.current=W)},[n]),[O,C]=de.useState(!1),{margin:y,cells:P,numCells:N,calculatedImageSettings:R}=Jx({value:s,level:o,minVersion:h,boostLevel:d,includeMargin:c,marginSize:p,imageSettings:g,size:i});de.useEffect(()=>{if(v.current!=null){const W=v.current,Y=W.getContext("2d");if(!Y)return;let ne=P;const z=b.current,j=R!=null&&z!==null&&z.complete&&z.naturalHeight!==0&&z.naturalWidth!==0;j&&R.excavation!=null&&(ne=Xx(P,R.excavation));const H=window.devicePixelRatio||1;W.height=W.width=i*H;const Q=i/N*H;Y.scale(Q,Q),Y.fillStyle=a,Y.fillRect(0,0,N,N),Y.fillStyle=l,f3?Y.fill(new Path2D(Yx(ne,y))):P.forEach(function(ge,he){ge.forEach(function(ve,Pt){ve&&Y.fillRect(Pt+y,he+y,1,1)})}),R&&(Y.globalAlpha=R.opacity),j&&Y.drawImage(z,R.x+y,R.y+y,R.w,R.h)}}),de.useEffect(()=>{C(!1)},[w]);const k=uf({height:i,width:i},I);let S=null;return w!=null&&(S=de.createElement("img",{src:w,key:w,style:{display:"none"},onLoad:()=>{C(!0)},ref:b,crossOrigin:R==null?void 0:R.crossOrigin})),de.createElement(de.Fragment,null,de.createElement("canvas",uf({style:k,height:i,width:i,ref:D,role:"img"},_)),S)});p3.displayName="QRCodeCanvas";var Zx=de.forwardRef(function(e,n){const r=e,{value:s,size:i=Wx,level:o=Hx,bgColor:a=Kx,fgColor:l=qx,includeMargin:c=Gx,minVersion:h=Qx,boostLevel:d,title:p,marginSize:g,imageSettings:T}=r,A=cf(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:I,cells:_,numCells:w,calculatedImageSettings:v}=Jx({value:s,level:o,minVersion:h,boostLevel:d,includeMargin:c,marginSize:g,imageSettings:T,size:i});let b=_,D=null;T!=null&&v!=null&&(v.excavation!=null&&(b=Xx(_,v.excavation)),D=de.createElement("image",{href:T.src,height:v.h,width:v.w,x:v.x+I,y:v.y+I,preserveAspectRatio:"none",opacity:v.opacity,crossOrigin:v.crossOrigin}));const O=Yx(b,I);return de.createElement("svg",uf({height:i,width:i,viewBox:`0 0 ${w} ${w}`,ref:n,role:"img"},A),!!p&&de.createElement("title",null,p),de.createElement("path",{fill:a,d:`M0,0 h${w}v${w}H0z`,shapeRendering:"crispEdges"}),de.createElement("path",{fill:l,d:O,shapeRendering:"crispEdges"}),D)});Zx.displayName="QRCodeSVG";const m3=V.forwardRef(({details:t,settings:e,discount:n=0,onDiscountChange:r,onPrint:s},i)=>{if(!t)return null;const{order:o={},items:a=[],tableName:l="N/A",staffName:c="N/A"}=t,h=(e==null?void 0:e.restaurantName)||"SyncServe Restaurant",d=(e==null?void 0:e.address)||"123 Culinary Lane, Edakkara, Kerala",p=(e==null?void 0:e.upiId)||"shankp@fam",g=V.useMemo(()=>(Array.isArray(a)?a:[]).map(b=>{const D=Number(b.quantity??b.qty??1),O=Number(b.price??b.rate??0);return{itemId:b.itemId??Math.random(),name:String(b.name??b.itemName??"Item"),notes:String(b.notes??b.modifiers??b.description??""),quantity:Number.isFinite(D)?D:1,price:Number.isFinite(O)?O:0,amount:Number.isFinite(D)&&Number.isFinite(O)?D*O:0}}),[a]),{subTotal:T,grandTotal:A}=V.useMemo(()=>{const v=g.reduce((C,y)=>C+y.amount,0),b=Number(o.total??v),D=Number(n||0),O=Math.max(0,b-D);return{subTotal:b,grandTotal:O}},[g,o.total,n]),{dateStr:I,timeStr:_}=V.useMemo(()=>{const v=new Date;try{const b=new Date(o.createdAt??o.date);return isNaN(b.getTime())?{dateStr:v.toLocaleDateString("en-IN"),timeStr:v.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}:{dateStr:b.toLocaleDateString("en-IN"),timeStr:b.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}}catch{return{dateStr:v.toLocaleDateString("en-IN"),timeStr:v.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}}},[o.createdAt,o.date]),w=V.useMemo(()=>{const v=h.replace(/\s/g,"%20"),b=`Bill%20for%20${l}`.replace(/\s/g,"%20");return`upi://pay?pa=${p}&pn=${v}&am=${A.toFixed(2)}&cu=INR&tn=${b}`},[A,l,h,p]);return E.jsxs("div",{ref:i,className:"thermal-print","aria-label":`Bill for ${l}`,children:[E.jsxs("header",{className:"header",children:[E.jsx("div",{className:"logo-placeholder",children:"[Your Logo Here]"}),E.jsx("h1",{className:"business-name",children:h})," ",E.jsx("p",{className:"business-details",children:d})," ",E.jsx("p",{className:"invoice-title",children:"--- INVOICE ---"})]}),E.jsxs("section",{className:"meta-info",children:[E.jsxs("div",{className:"meta-row",children:[E.jsxs("span",{children:["Table: ",E.jsx("strong",{children:l})]}),E.jsxs("span",{children:["Date: ",I]})]}),E.jsxs("div",{className:"meta-row",children:[E.jsxs("span",{children:["Staff: ",E.jsx("strong",{children:c})]}),E.jsxs("span",{children:["Time: ",_]})]})]}),E.jsxs("table",{className:"items-table",children:[E.jsx("thead",{children:E.jsxs("tr",{children:[E.jsx("th",{className:"col-sno",children:"#"}),E.jsx("th",{className:"col-item",children:"ITEM"}),E.jsx("th",{className:"col-qty",children:"QTY"}),E.jsx("th",{className:"col-price",children:"RATE"}),E.jsx("th",{className:"col-total",children:"TOTAL"})]})}),E.jsx("tbody",{children:g.length===0?E.jsx("tr",{children:E.jsx("td",{colSpan:"5",className:"no-items",children:"No items in this order."})}):g.map((v,b)=>E.jsxs("tr",{children:[E.jsx("td",{className:"col-sno",children:b+1}),E.jsxs("td",{className:"col-item",children:[E.jsx("span",{className:"item-name",children:v.name}),v.notes&&E.jsx("span",{className:"item-notes",children:v.notes})]}),E.jsx("td",{className:"col-qty",children:v.quantity}),E.jsx("td",{className:"col-price",children:v.price.toFixed(2)}),E.jsx("td",{className:"col-total",children:v.amount.toFixed(2)})]},v.itemId))})]}),E.jsxs("section",{className:"totals",children:[E.jsxs("div",{className:"total-row",children:[E.jsx("span",{children:"Sub Total"}),E.jsxs("span",{children:["",T.toFixed(2)]})]}),E.jsxs("div",{className:"total-row no-print",children:[E.jsx("span",{children:"Discount"}),E.jsxs("div",{className:"discount-control",children:[E.jsxs("span",{children:["",Number(n).toFixed(2)]}),E.jsx("input",{type:"number",value:n,onChange:r,className:"discount-input","aria-label":"Discount amount"})]})]}),E.jsxs("div",{className:"total-row print-only",children:[E.jsx("span",{children:"Discount"}),E.jsxs("span",{children:["",Number(n).toFixed(2)]})]}),E.jsxs("div",{className:"total-row grand-total",children:[E.jsx("span",{children:"Grand Total"}),E.jsxs("span",{children:["",A.toFixed(2)]})]})]}),E.jsx("div",{className:"actions no-print",children:E.jsx("button",{onClick:s,className:"print-button",children:"Print / Finalize Bill"})}),E.jsxs("footer",{className:"footer",children:[E.jsx("div",{className:"qr-code-container",children:A>0?E.jsx(Zx,{value:w,size:110,bgColor:"#ffffff",fgColor:"#000000",level:"L",includeMargin:!1}):E.jsx("div",{className:"qr-placeholder",children:"[QR Code Here]"})}),E.jsx("p",{className:"footer-message",children:"Thank you for your visit!"}),o.id&&E.jsxs("p",{className:"order-id",children:["Order ID: ",String(o.id)]})]})]})}),g3=".thermal-print{width:100%;max-width:76mm;margin:0 auto;padding:12px;background-color:#fff;color:#000;font-family:Courier New,Courier,monospace;font-size:12px;line-height:1.4;box-sizing:border-box}.thermal-print *{box-sizing:border-box}.header{text-align:center;margin-bottom:10px}.logo-placeholder{font-size:10px;color:#888;margin-bottom:8px}.business-name{font-size:16px;font-weight:700;margin:0}.business-details{font-size:10px;margin:2px 0}.invoice-title{font-size:10px;margin:8px 0 0;font-weight:700}.meta-info{font-size:10px;margin-bottom:10px;border-top:1px dashed #000;border-bottom:1px dashed #000;padding:5px 0}.meta-row{display:flex;justify-content:space-between}.items-table{width:100%;border-collapse:collapse;margin-bottom:10px}.items-table thead{border-bottom:1px solid #000}.items-table th{font-size:10px;font-weight:700;padding:5px 2px}.items-table td{padding:5px 2px;vertical-align:top;border-bottom:1px dotted #888}.no-items{text-align:center;padding:15px 0;color:#888}.item-name{display:block}.item-notes{display:block;font-size:9px;color:#555;padding-left:5px}.col-sno{width:8%;text-align:left;padding-right:4px}.col-item{width:37%;text-align:left}.col-qty,.col-price,.col-total{text-align:right;white-space:nowrap;font-variant-numeric:tabular-nums}.col-qty{width:15%}.col-price,.col-total{width:20%}.totals{font-size:12px;border-top:1px solid #000;padding-top:5px}.total-row{display:flex;justify-content:space-between;margin-bottom:3px}.grand-total{font-weight:700;font-size:15px;margin-top:5px;padding-top:5px;border-top:1px dashed #000}.discount-control{display:flex;align-items:center;gap:8px}.discount-input{width:70px;border:1px solid #ccc;text-align:right;padding:2px}.actions{margin:15px 0}.print-button{width:100%;padding:10px;background-color:#333;color:#fff;border:none;cursor:pointer;font-family:inherit;font-size:14px}.footer{text-align:center;margin-top:15px;border-top:1px dashed #000;padding-top:10px}.qr-placeholder{width:90px;height:90px;border:1px solid #888;margin:0 auto 10px;display:flex;align-items:center;justify-content:center;font-size:9px;color:#888}.footer-message{font-weight:700}.order-id{font-size:9px;color:#555;margin-top:5px}.qr-code-container{margin:0 auto 10px;width:110px;height:110px}.print-only{display:none}@media print{.no-print{display:none!important}.print-only{display:flex}.thermal-print{max-width:100%;padding:0;box-shadow:none}.qr-code-container{display:block}}",y3=()=>{const[t,e]=V.useState([]),[n,r]=V.useState([]),[s,i]=V.useState([]),[o,a]=V.useState([]),[l,c]=V.useState(null),[h,d]=V.useState(""),[p,g]=V.useState(null),[T,A]=V.useState(0),[I,_]=V.useState(!1),[w,v]=V.useState(""),b=V.useRef(null),D=V.useRef(null);V.useEffect(()=>{var k;(async()=>{_(!0);try{const[S,W,Y]=await Promise.all([qp(),Gp(),iT()]);i(S||[]),a(W||[]),c(Y||{})}catch(S){console.error("Failed to fetch initial data:",S),v("Could not load necessary data. Please refresh.")}finally{_(!1)}})(),(k=b.current)==null||k.focus()},[]),V.useEffect(()=>{const R=aT(k=>{e(k||[]),_(!1)},k=>{console.error("Tables real-time listener error:",k),v("Failed to load table data. Please try again."),_(!1)});return()=>{try{R()}catch{}}},[]),V.useEffect(()=>{const R=uT(k=>{r(k||[]),_(!1)},k=>{console.error("Orders real-time listener error:",k),v("Failed to load order data. Please try again."),_(!1)});return()=>{try{R()}catch{}}},[]),V.useEffect(()=>{var ne,z;if(!h){g(null);return}const R=n.filter(j=>j.tableId===h).sort((j,H)=>new Date(H.createdAt)-new Date(j.createdAt));if(R.length===0){v("No active orders found for this table."),g(null);return}const k=R[0],S=(k.items||[]).map(j=>{const H=s.find(Q=>Q.id===j.itemId);return{...j,name:(H==null?void 0:H.name)||j.name||"Unknown Item",price:Number((H==null?void 0:H.price)??j.price??0)}}),W=((ne=t.find(j=>j.id===k.tableId))==null?void 0:ne.name)||"N/A",Y=((z=o.find(j=>j.id===k.staffId))==null?void 0:z.name)||"N/A";g({order:k,items:S,tableName:W,staffName:Y}),A(0),v("")},[h,n,s,o,t]);const O=V.useCallback(()=>{if(!D.current){alert("Nothing to print  make sure a table is selected and the bill is visible.");return}const R=D.current.innerHTML||D.current.outerHTML||"",k=`
      <!doctype html>
      <html>
        <head>
          <meta charset="utf-8"/>
          <meta name="viewport" content="width=device-width,initial-scale=1"/>
          <title>Receipt</title>
          <style>${g3}</style>
        </head>
        <body>
          <div class="receipt-print-container">
            <div class="receipt">
              ${R}
            </div>
          </div>
        </body>
      </html>
    `,S=document.createElement("iframe");S.style.position="fixed",S.style.right="0",S.style.bottom="0",S.style.width="0",S.style.height="0",S.style.border="0",S.style.visibility="hidden",document.body.appendChild(S);const W=S.contentDocument||S.contentWindow.document;W.open(),W.write(k),W.close();const Y=()=>{const ne=S.contentWindow;if(ne)try{ne.focus(),setTimeout(()=>{try{ne.print()}catch(z){console.error("Print error:",z)}setTimeout(()=>{try{document.body.removeChild(S)}catch{}},600)},250)}catch(z){console.error("Print error:",z)}};S.contentWindow&&S.contentDocument.readyState==="complete"?Y():(S.onload=Y,setTimeout(()=>{document.body.contains(S)&&Y()},900))},[D]),C=(R,k=0)=>{var zt;if(!R)return new Uint8Array;const S=27,W=29,Y=[],ne=me=>Y.push(new Uint8Array(me)),z=me=>{const ze=new TextEncoder;Y.push(ze.encode(me))},j=(l==null?void 0:l.restaurantName)||"SyncServe";ne([S,64]),ne([S,97,1]),ne([S,69,1]),z(`${R.tableName||"TABLE"}
`),z(`${j}
`),ne([S,69,0]),z(`Served by: ${R.staffName||"N/A"}
`),z(`Order: ${((zt=R.order)==null?void 0:zt.id)||""}
`),z(`
`),ne([S,97,0]),z(`No  ITEM                     QTY   RATE     AMT
`),ne([S,45,1]),z(`---------------------------------------------
`),ne([S,45,0]),(R.items||[]).forEach((me,ze)=>{const sc=(me.name||"Item").toString().slice(0,20).padEnd(20," "),ic=String(me.quantity??me.qty??1).padStart(3," "),as=Number(me.price??0).toFixed(2).padStart(8," "),ls=(Number(me.price??0)*Number(me.quantity??me.qty??1)).toFixed(2).padStart(8," ");z(`${String(ze+1).padStart(2," ")}  ${sc}${ic}${as}${ls}
`)}),z(`
`);const H=(R.items||[]).reduce((me,ze)=>me+Number(ze.price??0)*Number(ze.quantity??ze.qty??1),0),Q=Number(k||0),ge=H-Q;z(`Sub Total:${String(H.toFixed(2)).padStart(12," ")}
`),Q>0&&z(`Discount:${String(Q.toFixed(2)).padStart(12," ")}
`),ne([W,33,17]),z(`TOTAL:${String(ge.toFixed(2)).padStart(14," ")}
`),ne([W,33,0]),z(`
`),ne([S,97,1]),z(`Thank you for dining with us!
`),ne([S,97,0]),ne([W,86,0]);const he=Y.reduce((me,ze)=>me+ze.length,0),ve=new Uint8Array(he);let Pt=0;return Y.forEach(me=>{ve.set(me,Pt),Pt+=me.length}),ve},y=()=>{var R;if(!p){alert("Select a table and load a bill first");return}try{const k=C(p,T),S=new Blob([k],{type:"application/octet-stream"}),W=URL.createObjectURL(S),Y=document.createElement("a");Y.href=W,Y.download=`receipt_${String(((R=p.order)==null?void 0:R.id)||"receipt")}.bin`,document.body.appendChild(Y),Y.click(),Y.remove(),URL.revokeObjectURL(W),alert("ESC/POS payload downloaded. Send this raw .bin to your printer service.")}catch(k){console.error("Failed to generate ESC/POS payload",k),alert("Failed to create ESC/POS payload (see console).")}},P=async()=>{if(!p||!h){alert("Please select a table with a bill to finalize.");return}O();try{await lT(h,"available"),await dk(p.order.id),console.log(`Finalized bill for table ${h}. Table set to available, order deleted.`),alert(`Bill for table ${p.tableName} has been processed.`),g(null),d(""),A(0)}catch(R){console.error("Failed to finalize bill:",R),alert("An error occurred while finalizing the bill. Check console.")}},N=t.filter(R=>R.status==="occupied");return E.jsxs("div",{className:"container mx-auto py-6 px-4",children:[E.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Billing"}),E.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6 no-print",children:[E.jsx("label",{htmlFor:"table-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select an Occupied Table"}),E.jsxs("select",{id:"table-select",ref:b,value:h,onChange:R=>d(R.target.value),className:"w-full md:w-1/2 p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:I,children:[E.jsx("option",{value:"",children:I?"Loading tables...":"Select a Table"}),N.map(R=>E.jsx("option",{value:R.id,children:R.name},R.id))]})]}),w&&E.jsx("p",{className:"text-red-500 text-center mb-4 no-print",children:w}),p&&E.jsxs(E.Fragment,{children:[E.jsx(m3,{ref:D,details:p,settings:l,discount:T,onDiscountChange:R=>A(parseFloat(R.target.value)||0),onPrint:P}),E.jsxs("div",{className:"mt-3 flex gap-2 items-center no-print",children:[E.jsx("button",{onClick:()=>O(),className:"px-3 py-2 bg-blue-600 text-white rounded shadow hover:bg-blue-700",children:"Preview / Print (Browser)"}),E.jsx("button",{onClick:y,className:"px-3 py-2 bg-green-600 text-white rounded shadow hover:bg-green-700",children:"Download ESC/POS Payload"}),E.jsx("button",{onClick:P,className:"px-3 py-2 bg-indigo-600 text-white rounded shadow hover:bg-indigo-700",children:"Finalize & Print"})]})]})]})},v3=()=>{const[t,e]=V.useState({restaurantName:"",address:"",upiId:""}),[n,r]=V.useState(!0),[s,i]=V.useState(""),[o,a]=V.useState(!1);V.useEffect(()=>{(async()=>{try{r(!0);const d=await iT();d&&e(d)}catch(d){console.error("Error fetching settings:",d),i("Could not load settings."),a(!0)}finally{r(!1)}})()},[]);const l=h=>{const{name:d,value:p}=h.target;e(g=>({...g,[d]:p}))},c=async h=>{if(h.preventDefault(),!t.restaurantName||!t.upiId){i("Restaurant Name and UPI ID are required."),a(!0);return}try{i("Saving..."),a(!1),await ok(t),i("Settings saved successfully!")}catch(d){console.error("Error updating settings:",d),i("Failed to save settings. Please try again."),a(!0)}};return n?E.jsx("div",{className:"text-center p-10",children:"Loading settings..."}):E.jsxs("div",{className:"container mx-auto py-6 px-4",children:[E.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Application Settings"}),E.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto",children:E.jsxs("form",{onSubmit:c,children:[E.jsxs("div",{className:"mb-4",children:[E.jsx("label",{htmlFor:"restaurantName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Restaurant Name"}),E.jsx("input",{type:"text",id:"restaurantName",name:"restaurantName",value:t.restaurantName,onChange:l,className:"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., The Grand Eatery",required:!0})]}),E.jsxs("div",{className:"mb-4",children:[E.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),E.jsx("input",{type:"text",id:"address",name:"address",value:t.address,onChange:l,className:"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 123 Culinary Lane, Food Town"})]}),E.jsxs("div",{className:"mb-6",children:[E.jsx("label",{htmlFor:"upiId",className:"block text-sm font-medium text-gray-700 mb-1",children:"UPI ID (for QR Code Payments)"}),E.jsx("input",{type:"text",id:"upiId",name:"upiId",value:t.upiId,onChange:l,className:"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., yourname@oksbi",required:!0})]}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Save Settings"}),s&&E.jsx("p",{className:`text-sm ${o?"text-red-600":"text-green-600"}`,children:s})]})]})})]})},_3=()=>E.jsxs("div",{className:"flex min-h-screen",children:[E.jsx(PC,{}),E.jsx("main",{className:"flex-1 p-4 bg-gray-100 overflow-y-auto",children:E.jsxs(KP,{children:[E.jsx(Kn,{path:"/",element:E.jsx(JM,{})}),E.jsx(Kn,{path:"/order",element:E.jsx(ZM,{})}),E.jsx(Kn,{path:"/menu",element:E.jsx(e3,{})}),E.jsx(Kn,{path:"/staff",element:E.jsx(t3,{})}),E.jsx(Kn,{path:"/kitchen",element:E.jsx(i3,{})}),E.jsx(Kn,{path:"/billing",element:E.jsx(y3,{})}),E.jsx(Kn,{path:"/settings",element:E.jsx(v3,{})})," "]})})]});Sh.createRoot(document.getElementById("root")).render(E.jsx(de.StrictMode,{children:E.jsx(eC,{children:E.jsx(_3,{})})}));

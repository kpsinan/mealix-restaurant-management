function _x(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function wx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var W0={exports:{}},hu={},H0={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qo=Symbol.for("react.element"),Ex=Symbol.for("react.portal"),Tx=Symbol.for("react.fragment"),Sx=Symbol.for("react.strict_mode"),xx=Symbol.for("react.profiler"),Ax=Symbol.for("react.provider"),Ix=Symbol.for("react.context"),Px=Symbol.for("react.forward_ref"),Cx=Symbol.for("react.suspense"),Rx=Symbol.for("react.memo"),kx=Symbol.for("react.lazy"),yg=Symbol.iterator;function Vx(t){return t===null||typeof t!="object"?null:(t=yg&&t[yg]||t["@@iterator"],typeof t=="function"?t:null)}var K0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q0=Object.assign,G0={};function rs(t,e,n){this.props=t,this.context=e,this.refs=G0,this.updater=n||K0}rs.prototype.isReactComponent={};rs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};rs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Q0(){}Q0.prototype=rs.prototype;function nd(t,e,n){this.props=t,this.context=e,this.refs=G0,this.updater=n||K0}var rd=nd.prototype=new Q0;rd.constructor=nd;q0(rd,rs.prototype);rd.isPureReactComponent=!0;var vg=Array.isArray,Y0=Object.prototype.hasOwnProperty,id={current:null},X0={key:!0,ref:!0,__self:!0,__source:!0};function J0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Y0.call(e,r)&&!X0.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:qo,type:t,key:s,ref:o,props:i,_owner:id.current}}function Nx(t,e){return{$$typeof:qo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sd(t){return typeof t=="object"&&t!==null&&t.$$typeof===qo}function Dx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _g=/\/+/g;function wc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Dx(""+t.key):e.toString(36)}function Ja(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qo:case Ex:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+wc(o,0):r,vg(i)?(n="",t!=null&&(n=t.replace(_g,"$&/")+"/"),Ja(i,e,n,"",function(c){return c})):i!=null&&(sd(i)&&(i=Nx(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(_g,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",vg(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+wc(s,a);o+=Ja(s,e,n,l,i)}else if(l=Vx(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+wc(s,a++),o+=Ja(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ca(t,e,n){if(t==null)return t;var r=[],i=0;return Ja(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Mx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wt={current:null},Za={transition:null},bx={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:Za,ReactCurrentOwner:id};function Z0(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Ca,forEach:function(t,e,n){Ca(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ca(t,function(){e++}),e},toArray:function(t){return Ca(t,function(e){return e})||[]},only:function(t){if(!sd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=rs;ie.Fragment=Tx;ie.Profiler=xx;ie.PureComponent=nd;ie.StrictMode=Sx;ie.Suspense=Cx;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bx;ie.act=Z0;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=q0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=id.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Y0.call(e,l)&&!X0.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:qo,type:t.type,key:i,ref:s,props:r,_owner:o}};ie.createContext=function(t){return t={$$typeof:Ix,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Ax,_context:t},t.Consumer=t};ie.createElement=J0;ie.createFactory=function(t){var e=J0.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:Px,render:t}};ie.isValidElement=sd;ie.lazy=function(t){return{$$typeof:kx,_payload:{_status:-1,_result:t},_init:Mx}};ie.memo=function(t,e){return{$$typeof:Rx,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Za.transition;Za.transition={};try{t()}finally{Za.transition=e}};ie.unstable_act=Z0;ie.useCallback=function(t,e){return wt.current.useCallback(t,e)};ie.useContext=function(t){return wt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return wt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return wt.current.useEffect(t,e)};ie.useId=function(){return wt.current.useId()};ie.useImperativeHandle=function(t,e,n){return wt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return wt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return wt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return wt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return wt.current.useReducer(t,e,n)};ie.useRef=function(t){return wt.current.useRef(t)};ie.useState=function(t){return wt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return wt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return wt.current.useTransition()};ie.version="18.3.1";H0.exports=ie;var D=H0.exports;const me=wx(D),Lx=_x({__proto__:null,default:me},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox=D,Fx=Symbol.for("react.element"),jx=Symbol.for("react.fragment"),Bx=Object.prototype.hasOwnProperty,Ux=Ox.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zx={key:!0,ref:!0,__self:!0,__source:!0};function e_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Bx.call(e,r)&&!zx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Fx,type:t,key:s,ref:o,props:i,_owner:Ux.current}}hu.Fragment=jx;hu.jsx=e_;hu.jsxs=e_;W0.exports=hu;var k=W0.exports,ph={},t_={exports:{}},Lt={},n_={exports:{}},r_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,K){var G=U.length;U.push(K);e:for(;0<G;){var pe=G-1>>>1,ue=U[pe];if(0<i(ue,K))U[pe]=K,U[G]=ue,G=pe;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var K=U[0],G=U.pop();if(G!==K){U[0]=G;e:for(var pe=0,ue=U.length,te=ue>>>1;pe<te;){var be=2*(pe+1)-1,qt=U[be],Gt=be+1,Qt=U[Gt];if(0>i(qt,G))Gt<ue&&0>i(Qt,qt)?(U[pe]=Qt,U[Gt]=G,pe=Gt):(U[pe]=qt,U[be]=G,pe=be);else if(Gt<ue&&0>i(Qt,G))U[pe]=Qt,U[Gt]=G,pe=Gt;else break e}}return K}function i(U,K){var G=U.sortIndex-K.sortIndex;return G!==0?G:U.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,g=!1,E=!1,x=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(U){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=U)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function V(U){if(x=!1,_(U),!E)if(n(l)!==null)E=!0,ve(b);else{var K=n(c);K!==null&&J(V,K.startTime-U)}}function b(U,K){E=!1,x&&(x=!1,w(y),y=-1),g=!0;var G=p;try{for(_(K),f=n(l);f!==null&&(!(f.expirationTime>K)||U&&!C());){var pe=f.callback;if(typeof pe=="function"){f.callback=null,p=f.priorityLevel;var ue=pe(f.expirationTime<=K);K=t.unstable_now(),typeof ue=="function"?f.callback=ue:f===n(l)&&r(l),_(K)}else r(l);f=n(l)}if(f!==null)var te=!0;else{var be=n(c);be!==null&&J(V,be.startTime-K),te=!1}return te}finally{f=null,p=G,g=!1}}var O=!1,P=null,y=-1,S=5,I=-1;function C(){return!(t.unstable_now()-I<S)}function N(){if(P!==null){var U=t.unstable_now();I=U;var K=!0;try{K=P(!0,U)}finally{K?R():(O=!1,P=null)}}else O=!1}var R;if(typeof v=="function")R=function(){v(N)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,ne=Y.port2;Y.port1.onmessage=N,R=function(){ne.postMessage(null)}}else R=function(){A(N,0)};function ve(U){P=U,O||(O=!0,R())}function J(U,K){y=A(function(){U(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){E||g||(E=!0,ve(b))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var G=p;p=K;try{return U()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,K){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var G=p;p=U;try{return K()}finally{p=G}},t.unstable_scheduleCallback=function(U,K,G){var pe=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?pe+G:pe):G=pe,U){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=G+ue,U={id:h++,callback:K,priorityLevel:U,startTime:G,expirationTime:ue,sortIndex:-1},G>pe?(U.sortIndex=G,e(c,U),n(l)===null&&U===n(c)&&(x?(w(y),y=-1):x=!0,J(V,G-pe))):(U.sortIndex=ue,e(l,U),E||g||(E=!0,ve(b))),U},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(U){var K=p;return function(){var G=p;p=K;try{return U.apply(this,arguments)}finally{p=G}}}})(r_);n_.exports=r_;var $x=n_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wx=D,bt=$x;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i_=new Set,fo={};function ti(t,e){Bi(t,e),Bi(t+"Capture",e)}function Bi(t,e){for(fo[t]=e,t=0;t<e.length;t++)i_.add(e[t])}var Pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mh=Object.prototype.hasOwnProperty,Hx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wg={},Eg={};function Kx(t){return mh.call(Eg,t)?!0:mh.call(wg,t)?!1:Hx.test(t)?Eg[t]=!0:(wg[t]=!0,!1)}function qx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Gx(t,e,n,r){if(e===null||typeof e>"u"||qx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Et(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new Et(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new Et(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new Et(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new Et(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new Et(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new Et(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new Et(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new Et(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new Et(t,5,!1,t.toLowerCase(),null,!1,!1)});var od=/[\-:]([a-z])/g;function ad(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(od,ad);nt[e]=new Et(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(od,ad);nt[e]=new Et(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(od,ad);nt[e]=new Et(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new Et(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new Et(t,1,!1,t.toLowerCase(),null,!0,!0)});function ld(t,e,n,r){var i=nt.hasOwnProperty(e)?nt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Gx(e,n,i,r)&&(n=null),r||i===null?Kx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var On=Wx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ra=Symbol.for("react.element"),pi=Symbol.for("react.portal"),mi=Symbol.for("react.fragment"),ud=Symbol.for("react.strict_mode"),gh=Symbol.for("react.profiler"),s_=Symbol.for("react.provider"),o_=Symbol.for("react.context"),cd=Symbol.for("react.forward_ref"),yh=Symbol.for("react.suspense"),vh=Symbol.for("react.suspense_list"),hd=Symbol.for("react.memo"),$n=Symbol.for("react.lazy"),a_=Symbol.for("react.offscreen"),Tg=Symbol.iterator;function Rs(t){return t===null||typeof t!="object"?null:(t=Tg&&t[Tg]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,Ec;function js(t){if(Ec===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ec=e&&e[1]||""}return`
`+Ec+t}var Tc=!1;function Sc(t,e){if(!t||Tc)return"";Tc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Tc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?js(t):""}function Qx(t){switch(t.tag){case 5:return js(t.type);case 16:return js("Lazy");case 13:return js("Suspense");case 19:return js("SuspenseList");case 0:case 2:case 15:return t=Sc(t.type,!1),t;case 11:return t=Sc(t.type.render,!1),t;case 1:return t=Sc(t.type,!0),t;default:return""}}function _h(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mi:return"Fragment";case pi:return"Portal";case gh:return"Profiler";case ud:return"StrictMode";case yh:return"Suspense";case vh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case o_:return(t.displayName||"Context")+".Consumer";case s_:return(t._context.displayName||"Context")+".Provider";case cd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hd:return e=t.displayName||null,e!==null?e:_h(t.type)||"Memo";case $n:e=t._payload,t=t._init;try{return _h(t(e))}catch{}}return null}function Yx(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _h(e);case 8:return e===ud?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function l_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Xx(t){var e=l_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ka(t){t._valueTracker||(t._valueTracker=Xx(t))}function u_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=l_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wh(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function c_(t,e){e=e.checked,e!=null&&ld(t,"checked",e,!1)}function Eh(t,e){c_(t,e);var n=cr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Th(t,e.type,n):e.hasOwnProperty("defaultValue")&&Th(t,e.type,cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Th(t,e,n){(e!=="number"||_l(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Bs=Array.isArray;function Ni(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Sh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ag(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(Bs(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cr(n)}}function h_(t,e){var n=cr(e.value),r=cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ig(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function f_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?f_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Va,d_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Va=Va||document.createElement("div"),Va.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Va.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function po(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jx=["Webkit","ms","Moz","O"];Object.keys(Gs).forEach(function(t){Jx.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gs[e]=Gs[t]})});function p_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gs.hasOwnProperty(t)&&Gs[t]?(""+e).trim():e+"px"}function m_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=p_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Zx=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ah(t,e){if(e){if(Zx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function Ih(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ph=null;function fd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ch=null,Di=null,Mi=null;function Pg(t){if(t=Yo(t)){if(typeof Ch!="function")throw Error(B(280));var e=t.stateNode;e&&(e=gu(e),Ch(t.stateNode,t.type,e))}}function g_(t){Di?Mi?Mi.push(t):Mi=[t]:Di=t}function y_(){if(Di){var t=Di,e=Mi;if(Mi=Di=null,Pg(t),e)for(t=0;t<e.length;t++)Pg(e[t])}}function v_(t,e){return t(e)}function __(){}var xc=!1;function w_(t,e,n){if(xc)return t(e,n);xc=!0;try{return v_(t,e,n)}finally{xc=!1,(Di!==null||Mi!==null)&&(__(),y_())}}function mo(t,e){var n=t.stateNode;if(n===null)return null;var r=gu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Rh=!1;if(Pn)try{var ks={};Object.defineProperty(ks,"passive",{get:function(){Rh=!0}}),window.addEventListener("test",ks,ks),window.removeEventListener("test",ks,ks)}catch{Rh=!1}function eA(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Qs=!1,wl=null,El=!1,kh=null,tA={onError:function(t){Qs=!0,wl=t}};function nA(t,e,n,r,i,s,o,a,l){Qs=!1,wl=null,eA.apply(tA,arguments)}function rA(t,e,n,r,i,s,o,a,l){if(nA.apply(this,arguments),Qs){if(Qs){var c=wl;Qs=!1,wl=null}else throw Error(B(198));El||(El=!0,kh=c)}}function ni(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function E_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cg(t){if(ni(t)!==t)throw Error(B(188))}function iA(t){var e=t.alternate;if(!e){if(e=ni(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Cg(i),t;if(s===r)return Cg(i),e;s=s.sibling}throw Error(B(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function T_(t){return t=iA(t),t!==null?S_(t):null}function S_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=S_(t);if(e!==null)return e;t=t.sibling}return null}var x_=bt.unstable_scheduleCallback,Rg=bt.unstable_cancelCallback,sA=bt.unstable_shouldYield,oA=bt.unstable_requestPaint,Fe=bt.unstable_now,aA=bt.unstable_getCurrentPriorityLevel,dd=bt.unstable_ImmediatePriority,A_=bt.unstable_UserBlockingPriority,Tl=bt.unstable_NormalPriority,lA=bt.unstable_LowPriority,I_=bt.unstable_IdlePriority,fu=null,cn=null;function uA(t){if(cn&&typeof cn.onCommitFiberRoot=="function")try{cn.onCommitFiberRoot(fu,t,void 0,(t.current.flags&128)===128)}catch{}}var nn=Math.clz32?Math.clz32:fA,cA=Math.log,hA=Math.LN2;function fA(t){return t>>>=0,t===0?32:31-(cA(t)/hA|0)|0}var Na=64,Da=4194304;function Us(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Us(a):(s&=o,s!==0&&(r=Us(s)))}else o=n&~i,o!==0?r=Us(o):s!==0&&(r=Us(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-nn(e),i=1<<n,r|=t[n],e&=~i;return r}function dA(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pA(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-nn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=dA(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Vh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function P_(){var t=Na;return Na<<=1,!(Na&4194240)&&(Na=64),t}function Ac(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Go(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-nn(e),t[e]=n}function mA(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-nn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function pd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-nn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var fe=0;function C_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var R_,md,k_,V_,N_,Nh=!1,Ma=[],Xn=null,Jn=null,Zn=null,go=new Map,yo=new Map,Hn=[],gA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kg(t,e){switch(t){case"focusin":case"focusout":Xn=null;break;case"dragenter":case"dragleave":Jn=null;break;case"mouseover":case"mouseout":Zn=null;break;case"pointerover":case"pointerout":go.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yo.delete(e.pointerId)}}function Vs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Yo(e),e!==null&&md(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function yA(t,e,n,r,i){switch(e){case"focusin":return Xn=Vs(Xn,t,e,n,r,i),!0;case"dragenter":return Jn=Vs(Jn,t,e,n,r,i),!0;case"mouseover":return Zn=Vs(Zn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return go.set(s,Vs(go.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,yo.set(s,Vs(yo.get(s)||null,t,e,n,r,i)),!0}return!1}function D_(t){var e=Mr(t.target);if(e!==null){var n=ni(e);if(n!==null){if(e=n.tag,e===13){if(e=E_(n),e!==null){t.blockedOn=e,N_(t.priority,function(){k_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function el(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Dh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ph=r,n.target.dispatchEvent(r),Ph=null}else return e=Yo(n),e!==null&&md(e),t.blockedOn=n,!1;e.shift()}return!0}function Vg(t,e,n){el(t)&&n.delete(e)}function vA(){Nh=!1,Xn!==null&&el(Xn)&&(Xn=null),Jn!==null&&el(Jn)&&(Jn=null),Zn!==null&&el(Zn)&&(Zn=null),go.forEach(Vg),yo.forEach(Vg)}function Ns(t,e){t.blockedOn===e&&(t.blockedOn=null,Nh||(Nh=!0,bt.unstable_scheduleCallback(bt.unstable_NormalPriority,vA)))}function vo(t){function e(i){return Ns(i,t)}if(0<Ma.length){Ns(Ma[0],t);for(var n=1;n<Ma.length;n++){var r=Ma[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xn!==null&&Ns(Xn,t),Jn!==null&&Ns(Jn,t),Zn!==null&&Ns(Zn,t),go.forEach(e),yo.forEach(e),n=0;n<Hn.length;n++)r=Hn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hn.length&&(n=Hn[0],n.blockedOn===null);)D_(n),n.blockedOn===null&&Hn.shift()}var bi=On.ReactCurrentBatchConfig,xl=!0;function _A(t,e,n,r){var i=fe,s=bi.transition;bi.transition=null;try{fe=1,gd(t,e,n,r)}finally{fe=i,bi.transition=s}}function wA(t,e,n,r){var i=fe,s=bi.transition;bi.transition=null;try{fe=4,gd(t,e,n,r)}finally{fe=i,bi.transition=s}}function gd(t,e,n,r){if(xl){var i=Dh(t,e,n,r);if(i===null)bc(t,e,r,Al,n),kg(t,r);else if(yA(i,t,e,n,r))r.stopPropagation();else if(kg(t,r),e&4&&-1<gA.indexOf(t)){for(;i!==null;){var s=Yo(i);if(s!==null&&R_(s),s=Dh(t,e,n,r),s===null&&bc(t,e,r,Al,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else bc(t,e,r,null,n)}}var Al=null;function Dh(t,e,n,r){if(Al=null,t=fd(r),t=Mr(t),t!==null)if(e=ni(t),e===null)t=null;else if(n=e.tag,n===13){if(t=E_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Al=t,null}function M_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(aA()){case dd:return 1;case A_:return 4;case Tl:case lA:return 16;case I_:return 536870912;default:return 16}default:return 16}}var qn=null,yd=null,tl=null;function b_(){if(tl)return tl;var t,e=yd,n=e.length,r,i="value"in qn?qn.value:qn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return tl=i.slice(t,1<r?1-r:void 0)}function nl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ba(){return!0}function Ng(){return!1}function Ot(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ba:Ng,this.isPropagationStopped=Ng,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ba)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ba)},persist:function(){},isPersistent:ba}),e}var is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vd=Ot(is),Qo=Ce({},is,{view:0,detail:0}),EA=Ot(Qo),Ic,Pc,Ds,du=Ce({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_d,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ds&&(Ds&&t.type==="mousemove"?(Ic=t.screenX-Ds.screenX,Pc=t.screenY-Ds.screenY):Pc=Ic=0,Ds=t),Ic)},movementY:function(t){return"movementY"in t?t.movementY:Pc}}),Dg=Ot(du),TA=Ce({},du,{dataTransfer:0}),SA=Ot(TA),xA=Ce({},Qo,{relatedTarget:0}),Cc=Ot(xA),AA=Ce({},is,{animationName:0,elapsedTime:0,pseudoElement:0}),IA=Ot(AA),PA=Ce({},is,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),CA=Ot(PA),RA=Ce({},is,{data:0}),Mg=Ot(RA),kA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DA(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NA[t])?!!e[t]:!1}function _d(){return DA}var MA=Ce({},Qo,{key:function(t){if(t.key){var e=kA[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VA[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_d,charCode:function(t){return t.type==="keypress"?nl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),bA=Ot(MA),LA=Ce({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bg=Ot(LA),OA=Ce({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_d}),FA=Ot(OA),jA=Ce({},is,{propertyName:0,elapsedTime:0,pseudoElement:0}),BA=Ot(jA),UA=Ce({},du,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zA=Ot(UA),$A=[9,13,27,32],wd=Pn&&"CompositionEvent"in window,Ys=null;Pn&&"documentMode"in document&&(Ys=document.documentMode);var WA=Pn&&"TextEvent"in window&&!Ys,L_=Pn&&(!wd||Ys&&8<Ys&&11>=Ys),Lg=" ",Og=!1;function O_(t,e){switch(t){case"keyup":return $A.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gi=!1;function HA(t,e){switch(t){case"compositionend":return F_(e);case"keypress":return e.which!==32?null:(Og=!0,Lg);case"textInput":return t=e.data,t===Lg&&Og?null:t;default:return null}}function KA(t,e){if(gi)return t==="compositionend"||!wd&&O_(t,e)?(t=b_(),tl=yd=qn=null,gi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return L_&&e.locale!=="ko"?null:e.data;default:return null}}var qA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qA[t.type]:e==="textarea"}function j_(t,e,n,r){g_(r),e=Il(e,"onChange"),0<e.length&&(n=new vd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xs=null,_o=null;function GA(t){Y_(t,0)}function pu(t){var e=_i(t);if(u_(e))return t}function QA(t,e){if(t==="change")return e}var B_=!1;if(Pn){var Rc;if(Pn){var kc="oninput"in document;if(!kc){var jg=document.createElement("div");jg.setAttribute("oninput","return;"),kc=typeof jg.oninput=="function"}Rc=kc}else Rc=!1;B_=Rc&&(!document.documentMode||9<document.documentMode)}function Bg(){Xs&&(Xs.detachEvent("onpropertychange",U_),_o=Xs=null)}function U_(t){if(t.propertyName==="value"&&pu(_o)){var e=[];j_(e,_o,t,fd(t)),w_(GA,e)}}function YA(t,e,n){t==="focusin"?(Bg(),Xs=e,_o=n,Xs.attachEvent("onpropertychange",U_)):t==="focusout"&&Bg()}function XA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pu(_o)}function JA(t,e){if(t==="click")return pu(e)}function ZA(t,e){if(t==="input"||t==="change")return pu(e)}function e2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var on=typeof Object.is=="function"?Object.is:e2;function wo(t,e){if(on(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!mh.call(e,i)||!on(t[i],e[i]))return!1}return!0}function Ug(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zg(t,e){var n=Ug(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ug(n)}}function z_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?z_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $_(){for(var t=window,e=_l();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_l(t.document)}return e}function Ed(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function t2(t){var e=$_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&z_(n.ownerDocument.documentElement,n)){if(r!==null&&Ed(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=zg(n,s);var o=zg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var n2=Pn&&"documentMode"in document&&11>=document.documentMode,yi=null,Mh=null,Js=null,bh=!1;function $g(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bh||yi==null||yi!==_l(r)||(r=yi,"selectionStart"in r&&Ed(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Js&&wo(Js,r)||(Js=r,r=Il(Mh,"onSelect"),0<r.length&&(e=new vd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=yi)))}function La(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vi={animationend:La("Animation","AnimationEnd"),animationiteration:La("Animation","AnimationIteration"),animationstart:La("Animation","AnimationStart"),transitionend:La("Transition","TransitionEnd")},Vc={},W_={};Pn&&(W_=document.createElement("div").style,"AnimationEvent"in window||(delete vi.animationend.animation,delete vi.animationiteration.animation,delete vi.animationstart.animation),"TransitionEvent"in window||delete vi.transitionend.transition);function mu(t){if(Vc[t])return Vc[t];if(!vi[t])return t;var e=vi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in W_)return Vc[t]=e[n];return t}var H_=mu("animationend"),K_=mu("animationiteration"),q_=mu("animationstart"),G_=mu("transitionend"),Q_=new Map,Wg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(t,e){Q_.set(t,e),ti(e,[t])}for(var Nc=0;Nc<Wg.length;Nc++){var Dc=Wg[Nc],r2=Dc.toLowerCase(),i2=Dc[0].toUpperCase()+Dc.slice(1);yr(r2,"on"+i2)}yr(H_,"onAnimationEnd");yr(K_,"onAnimationIteration");yr(q_,"onAnimationStart");yr("dblclick","onDoubleClick");yr("focusin","onFocus");yr("focusout","onBlur");yr(G_,"onTransitionEnd");Bi("onMouseEnter",["mouseout","mouseover"]);Bi("onMouseLeave",["mouseout","mouseover"]);Bi("onPointerEnter",["pointerout","pointerover"]);Bi("onPointerLeave",["pointerout","pointerover"]);ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ti("onBeforeInput",["compositionend","keypress","textInput","paste"]);ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s2=new Set("cancel close invalid load scroll toggle".split(" ").concat(zs));function Hg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,rA(r,e,void 0,t),t.currentTarget=null}function Y_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Hg(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Hg(i,a,c),s=l}}}if(El)throw t=kh,El=!1,kh=null,t}function we(t,e){var n=e[Bh];n===void 0&&(n=e[Bh]=new Set);var r=t+"__bubble";n.has(r)||(X_(e,t,2,!1),n.add(r))}function Mc(t,e,n){var r=0;e&&(r|=4),X_(n,t,r,e)}var Oa="_reactListening"+Math.random().toString(36).slice(2);function Eo(t){if(!t[Oa]){t[Oa]=!0,i_.forEach(function(n){n!=="selectionchange"&&(s2.has(n)||Mc(n,!1,t),Mc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Oa]||(e[Oa]=!0,Mc("selectionchange",!1,e))}}function X_(t,e,n,r){switch(M_(e)){case 1:var i=_A;break;case 4:i=wA;break;default:i=gd}n=i.bind(null,e,n,t),i=void 0,!Rh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function bc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Mr(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}w_(function(){var c=s,h=fd(n),f=[];e:{var p=Q_.get(t);if(p!==void 0){var g=vd,E=t;switch(t){case"keypress":if(nl(n)===0)break e;case"keydown":case"keyup":g=bA;break;case"focusin":E="focus",g=Cc;break;case"focusout":E="blur",g=Cc;break;case"beforeblur":case"afterblur":g=Cc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Dg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=SA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=FA;break;case H_:case K_:case q_:g=IA;break;case G_:g=BA;break;case"scroll":g=EA;break;case"wheel":g=zA;break;case"copy":case"cut":case"paste":g=CA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=bg}var x=(e&4)!==0,A=!x&&t==="scroll",w=x?p!==null?p+"Capture":null:p;x=[];for(var v=c,_;v!==null;){_=v;var V=_.stateNode;if(_.tag===5&&V!==null&&(_=V,w!==null&&(V=mo(v,w),V!=null&&x.push(To(v,V,_)))),A)break;v=v.return}0<x.length&&(p=new g(p,E,null,n,h),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Ph&&(E=n.relatedTarget||n.fromElement)&&(Mr(E)||E[Cn]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(E=n.relatedTarget||n.toElement,g=c,E=E?Mr(E):null,E!==null&&(A=ni(E),E!==A||E.tag!==5&&E.tag!==6)&&(E=null)):(g=null,E=c),g!==E)){if(x=Dg,V="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(x=bg,V="onPointerLeave",w="onPointerEnter",v="pointer"),A=g==null?p:_i(g),_=E==null?p:_i(E),p=new x(V,v+"leave",g,n,h),p.target=A,p.relatedTarget=_,V=null,Mr(h)===c&&(x=new x(w,v+"enter",E,n,h),x.target=_,x.relatedTarget=A,V=x),A=V,g&&E)t:{for(x=g,w=E,v=0,_=x;_;_=ci(_))v++;for(_=0,V=w;V;V=ci(V))_++;for(;0<v-_;)x=ci(x),v--;for(;0<_-v;)w=ci(w),_--;for(;v--;){if(x===w||w!==null&&x===w.alternate)break t;x=ci(x),w=ci(w)}x=null}else x=null;g!==null&&Kg(f,p,g,x,!1),E!==null&&A!==null&&Kg(f,A,E,x,!0)}}e:{if(p=c?_i(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var b=QA;else if(Fg(p))if(B_)b=ZA;else{b=XA;var O=YA}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(b=JA);if(b&&(b=b(t,c))){j_(f,b,n,h);break e}O&&O(t,p,c),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Th(p,"number",p.value)}switch(O=c?_i(c):window,t){case"focusin":(Fg(O)||O.contentEditable==="true")&&(yi=O,Mh=c,Js=null);break;case"focusout":Js=Mh=yi=null;break;case"mousedown":bh=!0;break;case"contextmenu":case"mouseup":case"dragend":bh=!1,$g(f,n,h);break;case"selectionchange":if(n2)break;case"keydown":case"keyup":$g(f,n,h)}var P;if(wd)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else gi?O_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(L_&&n.locale!=="ko"&&(gi||y!=="onCompositionStart"?y==="onCompositionEnd"&&gi&&(P=b_()):(qn=h,yd="value"in qn?qn.value:qn.textContent,gi=!0)),O=Il(c,y),0<O.length&&(y=new Mg(y,t,null,n,h),f.push({event:y,listeners:O}),P?y.data=P:(P=F_(n),P!==null&&(y.data=P)))),(P=WA?HA(t,n):KA(t,n))&&(c=Il(c,"onBeforeInput"),0<c.length&&(h=new Mg("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=P))}Y_(f,e)})}function To(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Il(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=mo(t,n),s!=null&&r.unshift(To(t,s,i)),s=mo(t,e),s!=null&&r.push(To(t,s,i))),t=t.return}return r}function ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=mo(n,s),l!=null&&o.unshift(To(n,l,a))):i||(l=mo(n,s),l!=null&&o.push(To(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var o2=/\r\n?/g,a2=/\u0000|\uFFFD/g;function qg(t){return(typeof t=="string"?t:""+t).replace(o2,`
`).replace(a2,"")}function Fa(t,e,n){if(e=qg(e),qg(t)!==e&&n)throw Error(B(425))}function Pl(){}var Lh=null,Oh=null;function Fh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jh=typeof setTimeout=="function"?setTimeout:void 0,l2=typeof clearTimeout=="function"?clearTimeout:void 0,Gg=typeof Promise=="function"?Promise:void 0,u2=typeof queueMicrotask=="function"?queueMicrotask:typeof Gg<"u"?function(t){return Gg.resolve(null).then(t).catch(c2)}:jh;function c2(t){setTimeout(function(){throw t})}function Lc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),vo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);vo(e)}function er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ss=Math.random().toString(36).slice(2),un="__reactFiber$"+ss,So="__reactProps$"+ss,Cn="__reactContainer$"+ss,Bh="__reactEvents$"+ss,h2="__reactListeners$"+ss,f2="__reactHandles$"+ss;function Mr(t){var e=t[un];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cn]||n[un]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Qg(t);t!==null;){if(n=t[un])return n;t=Qg(t)}return e}t=n,n=t.parentNode}return null}function Yo(t){return t=t[un]||t[Cn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _i(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function gu(t){return t[So]||null}var Uh=[],wi=-1;function vr(t){return{current:t}}function Ee(t){0>wi||(t.current=Uh[wi],Uh[wi]=null,wi--)}function ye(t,e){wi++,Uh[wi]=t.current,t.current=e}var hr={},pt=vr(hr),It=vr(!1),Hr=hr;function Ui(t,e){var n=t.type.contextTypes;if(!n)return hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Pt(t){return t=t.childContextTypes,t!=null}function Cl(){Ee(It),Ee(pt)}function Yg(t,e,n){if(pt.current!==hr)throw Error(B(168));ye(pt,e),ye(It,n)}function J_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(B(108,Yx(t)||"Unknown",i));return Ce({},n,r)}function Rl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hr,Hr=pt.current,ye(pt,t),ye(It,It.current),!0}function Xg(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=J_(t,e,Hr),r.__reactInternalMemoizedMergedChildContext=t,Ee(It),Ee(pt),ye(pt,t)):Ee(It),ye(It,n)}var Sn=null,yu=!1,Oc=!1;function Z_(t){Sn===null?Sn=[t]:Sn.push(t)}function d2(t){yu=!0,Z_(t)}function _r(){if(!Oc&&Sn!==null){Oc=!0;var t=0,e=fe;try{var n=Sn;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sn=null,yu=!1}catch(i){throw Sn!==null&&(Sn=Sn.slice(t+1)),x_(dd,_r),i}finally{fe=e,Oc=!1}}return null}var Ei=[],Ti=0,kl=null,Vl=0,Bt=[],Ut=0,Kr=null,xn=1,An="";function Rr(t,e){Ei[Ti++]=Vl,Ei[Ti++]=kl,kl=t,Vl=e}function ew(t,e,n){Bt[Ut++]=xn,Bt[Ut++]=An,Bt[Ut++]=Kr,Kr=t;var r=xn;t=An;var i=32-nn(r)-1;r&=~(1<<i),n+=1;var s=32-nn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,xn=1<<32-nn(e)+i|n<<i|r,An=s+t}else xn=1<<s|n<<i|r,An=t}function Td(t){t.return!==null&&(Rr(t,1),ew(t,1,0))}function Sd(t){for(;t===kl;)kl=Ei[--Ti],Ei[Ti]=null,Vl=Ei[--Ti],Ei[Ti]=null;for(;t===Kr;)Kr=Bt[--Ut],Bt[Ut]=null,An=Bt[--Ut],Bt[Ut]=null,xn=Bt[--Ut],Bt[Ut]=null}var Dt=null,Vt=null,Te=!1,tn=null;function tw(t,e){var n=zt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Jg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,Vt=er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Kr!==null?{id:xn,overflow:An}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=zt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,Vt=null,!0):!1;default:return!1}}function zh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $h(t){if(Te){var e=Vt;if(e){var n=e;if(!Jg(t,e)){if(zh(t))throw Error(B(418));e=er(n.nextSibling);var r=Dt;e&&Jg(t,e)?tw(r,n):(t.flags=t.flags&-4097|2,Te=!1,Dt=t)}}else{if(zh(t))throw Error(B(418));t.flags=t.flags&-4097|2,Te=!1,Dt=t}}}function Zg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function ja(t){if(t!==Dt)return!1;if(!Te)return Zg(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fh(t.type,t.memoizedProps)),e&&(e=Vt)){if(zh(t))throw nw(),Error(B(418));for(;e;)tw(t,e),e=er(e.nextSibling)}if(Zg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vt=er(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=Dt?er(t.stateNode.nextSibling):null;return!0}function nw(){for(var t=Vt;t;)t=er(t.nextSibling)}function zi(){Vt=Dt=null,Te=!1}function xd(t){tn===null?tn=[t]:tn.push(t)}var p2=On.ReactCurrentBatchConfig;function Ms(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function Ba(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ey(t){var e=t._init;return e(t._payload)}function rw(t){function e(w,v){if(t){var _=w.deletions;_===null?(w.deletions=[v],w.flags|=16):_.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function i(w,v){return w=ir(w,v),w.index=0,w.sibling=null,w}function s(w,v,_){return w.index=_,t?(_=w.alternate,_!==null?(_=_.index,_<v?(w.flags|=2,v):_):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,_,V){return v===null||v.tag!==6?(v=Wc(_,w.mode,V),v.return=w,v):(v=i(v,_),v.return=w,v)}function l(w,v,_,V){var b=_.type;return b===mi?h(w,v,_.props.children,V,_.key):v!==null&&(v.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$n&&ey(b)===v.type)?(V=i(v,_.props),V.ref=Ms(w,v,_),V.return=w,V):(V=ul(_.type,_.key,_.props,null,w.mode,V),V.ref=Ms(w,v,_),V.return=w,V)}function c(w,v,_,V){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=Hc(_,w.mode,V),v.return=w,v):(v=i(v,_.children||[]),v.return=w,v)}function h(w,v,_,V,b){return v===null||v.tag!==7?(v=Ur(_,w.mode,V,b),v.return=w,v):(v=i(v,_),v.return=w,v)}function f(w,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Wc(""+v,w.mode,_),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ra:return _=ul(v.type,v.key,v.props,null,w.mode,_),_.ref=Ms(w,null,v),_.return=w,_;case pi:return v=Hc(v,w.mode,_),v.return=w,v;case $n:var V=v._init;return f(w,V(v._payload),_)}if(Bs(v)||Rs(v))return v=Ur(v,w.mode,_,null),v.return=w,v;Ba(w,v)}return null}function p(w,v,_,V){var b=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return b!==null?null:a(w,v,""+_,V);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ra:return _.key===b?l(w,v,_,V):null;case pi:return _.key===b?c(w,v,_,V):null;case $n:return b=_._init,p(w,v,b(_._payload),V)}if(Bs(_)||Rs(_))return b!==null?null:h(w,v,_,V,null);Ba(w,_)}return null}function g(w,v,_,V,b){if(typeof V=="string"&&V!==""||typeof V=="number")return w=w.get(_)||null,a(v,w,""+V,b);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Ra:return w=w.get(V.key===null?_:V.key)||null,l(v,w,V,b);case pi:return w=w.get(V.key===null?_:V.key)||null,c(v,w,V,b);case $n:var O=V._init;return g(w,v,_,O(V._payload),b)}if(Bs(V)||Rs(V))return w=w.get(_)||null,h(v,w,V,b,null);Ba(v,V)}return null}function E(w,v,_,V){for(var b=null,O=null,P=v,y=v=0,S=null;P!==null&&y<_.length;y++){P.index>y?(S=P,P=null):S=P.sibling;var I=p(w,P,_[y],V);if(I===null){P===null&&(P=S);break}t&&P&&I.alternate===null&&e(w,P),v=s(I,v,y),O===null?b=I:O.sibling=I,O=I,P=S}if(y===_.length)return n(w,P),Te&&Rr(w,y),b;if(P===null){for(;y<_.length;y++)P=f(w,_[y],V),P!==null&&(v=s(P,v,y),O===null?b=P:O.sibling=P,O=P);return Te&&Rr(w,y),b}for(P=r(w,P);y<_.length;y++)S=g(P,w,y,_[y],V),S!==null&&(t&&S.alternate!==null&&P.delete(S.key===null?y:S.key),v=s(S,v,y),O===null?b=S:O.sibling=S,O=S);return t&&P.forEach(function(C){return e(w,C)}),Te&&Rr(w,y),b}function x(w,v,_,V){var b=Rs(_);if(typeof b!="function")throw Error(B(150));if(_=b.call(_),_==null)throw Error(B(151));for(var O=b=null,P=v,y=v=0,S=null,I=_.next();P!==null&&!I.done;y++,I=_.next()){P.index>y?(S=P,P=null):S=P.sibling;var C=p(w,P,I.value,V);if(C===null){P===null&&(P=S);break}t&&P&&C.alternate===null&&e(w,P),v=s(C,v,y),O===null?b=C:O.sibling=C,O=C,P=S}if(I.done)return n(w,P),Te&&Rr(w,y),b;if(P===null){for(;!I.done;y++,I=_.next())I=f(w,I.value,V),I!==null&&(v=s(I,v,y),O===null?b=I:O.sibling=I,O=I);return Te&&Rr(w,y),b}for(P=r(w,P);!I.done;y++,I=_.next())I=g(P,w,y,I.value,V),I!==null&&(t&&I.alternate!==null&&P.delete(I.key===null?y:I.key),v=s(I,v,y),O===null?b=I:O.sibling=I,O=I);return t&&P.forEach(function(N){return e(w,N)}),Te&&Rr(w,y),b}function A(w,v,_,V){if(typeof _=="object"&&_!==null&&_.type===mi&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Ra:e:{for(var b=_.key,O=v;O!==null;){if(O.key===b){if(b=_.type,b===mi){if(O.tag===7){n(w,O.sibling),v=i(O,_.props.children),v.return=w,w=v;break e}}else if(O.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$n&&ey(b)===O.type){n(w,O.sibling),v=i(O,_.props),v.ref=Ms(w,O,_),v.return=w,w=v;break e}n(w,O);break}else e(w,O);O=O.sibling}_.type===mi?(v=Ur(_.props.children,w.mode,V,_.key),v.return=w,w=v):(V=ul(_.type,_.key,_.props,null,w.mode,V),V.ref=Ms(w,v,_),V.return=w,w=V)}return o(w);case pi:e:{for(O=_.key;v!==null;){if(v.key===O)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(w,v.sibling),v=i(v,_.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=Hc(_,w.mode,V),v.return=w,w=v}return o(w);case $n:return O=_._init,A(w,v,O(_._payload),V)}if(Bs(_))return E(w,v,_,V);if(Rs(_))return x(w,v,_,V);Ba(w,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(w,v.sibling),v=i(v,_),v.return=w,w=v):(n(w,v),v=Wc(_,w.mode,V),v.return=w,w=v),o(w)):n(w,v)}return A}var $i=rw(!0),iw=rw(!1),Nl=vr(null),Dl=null,Si=null,Ad=null;function Id(){Ad=Si=Dl=null}function Pd(t){var e=Nl.current;Ee(Nl),t._currentValue=e}function Wh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Li(t,e){Dl=t,Ad=Si=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xt=!0),t.firstContext=null)}function Ht(t){var e=t._currentValue;if(Ad!==t)if(t={context:t,memoizedValue:e,next:null},Si===null){if(Dl===null)throw Error(B(308));Si=t,Dl.dependencies={lanes:0,firstContext:t}}else Si=Si.next=t;return e}var br=null;function Cd(t){br===null?br=[t]:br.push(t)}function sw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Cd(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rn(t,r)}function Rn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Wn=!1;function Rd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ow(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function In(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rn(t,n)}return i=r.interleaved,i===null?(e.next=e,Cd(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rn(t,n)}function rl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pd(t,n)}}function ty(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ml(t,e,n,r){var i=t.updateQueue;Wn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,x=a;switch(p=e,g=n,x.tag){case 1:if(E=x.payload,typeof E=="function"){f=E.call(g,f,p);break e}f=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=x.payload,p=typeof E=="function"?E.call(g,f,p):E,p==null)break e;f=Ce({},f,p);break e;case 2:Wn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=f):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Gr|=o,t.lanes=o,t.memoizedState=f}}function ny(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(B(191,i));i.call(r)}}}var Xo={},hn=vr(Xo),xo=vr(Xo),Ao=vr(Xo);function Lr(t){if(t===Xo)throw Error(B(174));return t}function kd(t,e){switch(ye(Ao,e),ye(xo,t),ye(hn,Xo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xh(e,t)}Ee(hn),ye(hn,e)}function Wi(){Ee(hn),Ee(xo),Ee(Ao)}function aw(t){Lr(Ao.current);var e=Lr(hn.current),n=xh(e,t.type);e!==n&&(ye(xo,t),ye(hn,n))}function Vd(t){xo.current===t&&(Ee(hn),Ee(xo))}var xe=vr(0);function bl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Fc=[];function Nd(){for(var t=0;t<Fc.length;t++)Fc[t]._workInProgressVersionPrimary=null;Fc.length=0}var il=On.ReactCurrentDispatcher,jc=On.ReactCurrentBatchConfig,qr=0,Ie=null,ze=null,qe=null,Ll=!1,Zs=!1,Io=0,m2=0;function at(){throw Error(B(321))}function Dd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!on(t[n],e[n]))return!1;return!0}function Md(t,e,n,r,i,s){if(qr=s,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,il.current=t===null||t.memoizedState===null?_2:w2,t=n(r,i),Zs){s=0;do{if(Zs=!1,Io=0,25<=s)throw Error(B(301));s+=1,qe=ze=null,e.updateQueue=null,il.current=E2,t=n(r,i)}while(Zs)}if(il.current=Ol,e=ze!==null&&ze.next!==null,qr=0,qe=ze=Ie=null,Ll=!1,e)throw Error(B(300));return t}function bd(){var t=Io!==0;return Io=0,t}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qe===null?Ie.memoizedState=qe=t:qe=qe.next=t,qe}function Kt(){if(ze===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=qe===null?Ie.memoizedState:qe.next;if(e!==null)qe=e,ze=t;else{if(t===null)throw Error(B(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},qe===null?Ie.memoizedState=qe=t:qe=qe.next=t}return qe}function Po(t,e){return typeof e=="function"?e(t):e}function Bc(t){var e=Kt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=ze,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((qr&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ie.lanes|=h,Gr|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,on(r,e.memoizedState)||(xt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ie.lanes|=s,Gr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Uc(t){var e=Kt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);on(s,e.memoizedState)||(xt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function lw(){}function uw(t,e){var n=Ie,r=Kt(),i=e(),s=!on(r.memoizedState,i);if(s&&(r.memoizedState=i,xt=!0),r=r.queue,Ld(fw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||qe!==null&&qe.memoizedState.tag&1){if(n.flags|=2048,Co(9,hw.bind(null,n,r,i,e),void 0,null),Ge===null)throw Error(B(349));qr&30||cw(n,e,i)}return i}function cw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function hw(t,e,n,r){e.value=n,e.getSnapshot=r,dw(e)&&pw(t)}function fw(t,e,n){return n(function(){dw(e)&&pw(t)})}function dw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!on(t,n)}catch{return!0}}function pw(t){var e=Rn(t,1);e!==null&&rn(e,t,1,-1)}function ry(t){var e=ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Po,lastRenderedState:t},e.queue=t,t=t.dispatch=v2.bind(null,Ie,t),[e.memoizedState,t]}function Co(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function mw(){return Kt().memoizedState}function sl(t,e,n,r){var i=ln();Ie.flags|=t,i.memoizedState=Co(1|e,n,void 0,r===void 0?null:r)}function vu(t,e,n,r){var i=Kt();r=r===void 0?null:r;var s=void 0;if(ze!==null){var o=ze.memoizedState;if(s=o.destroy,r!==null&&Dd(r,o.deps)){i.memoizedState=Co(e,n,s,r);return}}Ie.flags|=t,i.memoizedState=Co(1|e,n,s,r)}function iy(t,e){return sl(8390656,8,t,e)}function Ld(t,e){return vu(2048,8,t,e)}function gw(t,e){return vu(4,2,t,e)}function yw(t,e){return vu(4,4,t,e)}function vw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _w(t,e,n){return n=n!=null?n.concat([t]):null,vu(4,4,vw.bind(null,e,t),n)}function Od(){}function ww(t,e){var n=Kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ew(t,e){var n=Kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Dd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Tw(t,e,n){return qr&21?(on(n,e)||(n=P_(),Ie.lanes|=n,Gr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xt=!0),t.memoizedState=n)}function g2(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=jc.transition;jc.transition={};try{t(!1),e()}finally{fe=n,jc.transition=r}}function Sw(){return Kt().memoizedState}function y2(t,e,n){var r=rr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},xw(t))Aw(e,n);else if(n=sw(t,e,n,r),n!==null){var i=_t();rn(n,t,r,i),Iw(n,e,r)}}function v2(t,e,n){var r=rr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(xw(t))Aw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,on(a,o)){var l=e.interleaved;l===null?(i.next=i,Cd(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=sw(t,e,i,r),n!==null&&(i=_t(),rn(n,t,r,i),Iw(n,e,r))}}function xw(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function Aw(t,e){Zs=Ll=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Iw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pd(t,n)}}var Ol={readContext:Ht,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},_2={readContext:Ht,useCallback:function(t,e){return ln().memoizedState=[t,e===void 0?null:e],t},useContext:Ht,useEffect:iy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sl(4194308,4,vw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sl(4194308,4,t,e)},useInsertionEffect:function(t,e){return sl(4,2,t,e)},useMemo:function(t,e){var n=ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=y2.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=ln();return t={current:t},e.memoizedState=t},useState:ry,useDebugValue:Od,useDeferredValue:function(t){return ln().memoizedState=t},useTransition:function(){var t=ry(!1),e=t[0];return t=g2.bind(null,t[1]),ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,i=ln();if(Te){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Ge===null)throw Error(B(349));qr&30||cw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,iy(fw.bind(null,r,s,t),[t]),r.flags|=2048,Co(9,hw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ln(),e=Ge.identifierPrefix;if(Te){var n=An,r=xn;n=(r&~(1<<32-nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Io++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=m2++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},w2={readContext:Ht,useCallback:ww,useContext:Ht,useEffect:Ld,useImperativeHandle:_w,useInsertionEffect:gw,useLayoutEffect:yw,useMemo:Ew,useReducer:Bc,useRef:mw,useState:function(){return Bc(Po)},useDebugValue:Od,useDeferredValue:function(t){var e=Kt();return Tw(e,ze.memoizedState,t)},useTransition:function(){var t=Bc(Po)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:lw,useSyncExternalStore:uw,useId:Sw,unstable_isNewReconciler:!1},E2={readContext:Ht,useCallback:ww,useContext:Ht,useEffect:Ld,useImperativeHandle:_w,useInsertionEffect:gw,useLayoutEffect:yw,useMemo:Ew,useReducer:Uc,useRef:mw,useState:function(){return Uc(Po)},useDebugValue:Od,useDeferredValue:function(t){var e=Kt();return ze===null?e.memoizedState=t:Tw(e,ze.memoizedState,t)},useTransition:function(){var t=Uc(Po)[0],e=Kt().memoizedState;return[t,e]},useMutableSource:lw,useSyncExternalStore:uw,useId:Sw,unstable_isNewReconciler:!1};function Zt(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _u={isMounted:function(t){return(t=t._reactInternals)?ni(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_t(),i=rr(t),s=In(r,i);s.payload=e,n!=null&&(s.callback=n),e=tr(t,s,i),e!==null&&(rn(e,t,i,r),rl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_t(),i=rr(t),s=In(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=tr(t,s,i),e!==null&&(rn(e,t,i,r),rl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_t(),r=rr(t),i=In(n,r);i.tag=2,e!=null&&(i.callback=e),e=tr(t,i,r),e!==null&&(rn(e,t,r,n),rl(e,t,r))}};function sy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!wo(n,r)||!wo(i,s):!0}function Pw(t,e,n){var r=!1,i=hr,s=e.contextType;return typeof s=="object"&&s!==null?s=Ht(s):(i=Pt(e)?Hr:pt.current,r=e.contextTypes,s=(r=r!=null)?Ui(t,i):hr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_u,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function oy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_u.enqueueReplaceState(e,e.state,null)}function Kh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Rd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ht(s):(s=Pt(e)?Hr:pt.current,i.context=Ui(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Hh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_u.enqueueReplaceState(i,i.state,null),Ml(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Hi(t,e){try{var n="",r=e;do n+=Qx(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function zc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var T2=typeof WeakMap=="function"?WeakMap:Map;function Cw(t,e,n){n=In(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jl||(jl=!0,rf=r),qh(t,e)},n}function Rw(t,e,n){n=In(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){qh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){qh(t,e),typeof r!="function"&&(nr===null?nr=new Set([this]):nr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ay(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new T2;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=L2.bind(null,t,e,n),e.then(t,t))}function ly(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function uy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=In(-1,1),e.tag=2,tr(n,e,1))),n.lanes|=1),t)}var S2=On.ReactCurrentOwner,xt=!1;function yt(t,e,n,r){e.child=t===null?iw(e,null,n,r):$i(e,t.child,n,r)}function cy(t,e,n,r,i){n=n.render;var s=e.ref;return Li(e,i),r=Md(t,e,n,r,s,i),n=bd(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kn(t,e,i)):(Te&&n&&Td(e),e.flags|=1,yt(t,e,r,i),e.child)}function hy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Hd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,kw(t,e,s,r,i)):(t=ul(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wo,n(o,r)&&t.ref===e.ref)return kn(t,e,i)}return e.flags|=1,t=ir(s,r),t.ref=e.ref,t.return=e,e.child=t}function kw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(wo(s,r)&&t.ref===e.ref)if(xt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(xt=!0);else return e.lanes=t.lanes,kn(t,e,i)}return Gh(t,e,n,r,i)}function Vw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Ai,kt),kt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(Ai,kt),kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ye(Ai,kt),kt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ye(Ai,kt),kt|=r;return yt(t,e,i,n),e.child}function Nw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Gh(t,e,n,r,i){var s=Pt(n)?Hr:pt.current;return s=Ui(e,s),Li(e,i),n=Md(t,e,n,r,s,i),r=bd(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,kn(t,e,i)):(Te&&r&&Td(e),e.flags|=1,yt(t,e,n,i),e.child)}function fy(t,e,n,r,i){if(Pt(n)){var s=!0;Rl(e)}else s=!1;if(Li(e,i),e.stateNode===null)ol(t,e),Pw(e,n,r),Kh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ht(c):(c=Pt(n)?Hr:pt.current,c=Ui(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&oy(e,o,r,c),Wn=!1;var p=e.memoizedState;o.state=p,Ml(e,r,o,i),l=e.memoizedState,a!==r||p!==l||It.current||Wn?(typeof h=="function"&&(Hh(e,n,h,r),l=e.memoizedState),(a=Wn||sy(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ow(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Zt(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ht(l):(l=Pt(n)?Hr:pt.current,l=Ui(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&oy(e,o,r,l),Wn=!1,p=e.memoizedState,o.state=p,Ml(e,r,o,i);var E=e.memoizedState;a!==f||p!==E||It.current||Wn?(typeof g=="function"&&(Hh(e,n,g,r),E=e.memoizedState),(c=Wn||sy(e,n,c,r,p,E,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Qh(t,e,n,r,s,i)}function Qh(t,e,n,r,i,s){Nw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Xg(e,n,!1),kn(t,e,s);r=e.stateNode,S2.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$i(e,t.child,null,s),e.child=$i(e,null,a,s)):yt(t,e,a,s),e.memoizedState=r.state,i&&Xg(e,n,!0),e.child}function Dw(t){var e=t.stateNode;e.pendingContext?Yg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Yg(t,e.context,!1),kd(t,e.containerInfo)}function dy(t,e,n,r,i){return zi(),xd(i),e.flags|=256,yt(t,e,n,r),e.child}var Yh={dehydrated:null,treeContext:null,retryLane:0};function Xh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Mw(t,e,n){var r=e.pendingProps,i=xe.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ye(xe,i&1),t===null)return $h(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Tu(o,r,0,null),t=Ur(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Xh(n),e.memoizedState=Yh,t):Fd(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return x2(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ir(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ir(a,s):(s=Ur(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Xh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Yh,r}return s=t.child,t=s.sibling,r=ir(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Fd(t,e){return e=Tu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ua(t,e,n,r){return r!==null&&xd(r),$i(e,t.child,null,n),t=Fd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function x2(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=zc(Error(B(422))),Ua(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Tu({mode:"visible",children:r.children},i,0,null),s=Ur(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$i(e,t.child,null,o),e.child.memoizedState=Xh(o),e.memoizedState=Yh,s);if(!(e.mode&1))return Ua(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(B(419)),r=zc(s,r,void 0),Ua(t,e,o,r)}if(a=(o&t.childLanes)!==0,xt||a){if(r=Ge,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rn(t,i),rn(r,t,i,-1))}return Wd(),r=zc(Error(B(421))),Ua(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=O2.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Vt=er(i.nextSibling),Dt=e,Te=!0,tn=null,t!==null&&(Bt[Ut++]=xn,Bt[Ut++]=An,Bt[Ut++]=Kr,xn=t.id,An=t.overflow,Kr=e),e=Fd(e,r.children),e.flags|=4096,e)}function py(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Wh(t.return,e,n)}function $c(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function bw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(yt(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&py(t,n,e);else if(t.tag===19)py(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(xe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&bl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),$c(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&bl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}$c(e,!0,n,null,s);break;case"together":$c(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ol(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=ir(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ir(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function A2(t,e,n){switch(e.tag){case 3:Dw(e),zi();break;case 5:aw(e);break;case 1:Pt(e.type)&&Rl(e);break;case 4:kd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ye(Nl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?Mw(t,e,n):(ye(xe,xe.current&1),t=kn(t,e,n),t!==null?t.sibling:null);ye(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return bw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ye(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,Vw(t,e,n)}return kn(t,e,n)}var Lw,Jh,Ow,Fw;Lw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jh=function(){};Ow=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Lr(hn.current);var s=null;switch(n){case"input":i=wh(t,i),r=wh(t,r),s=[];break;case"select":i=Ce({},i,{value:void 0}),r=Ce({},r,{value:void 0}),s=[];break;case"textarea":i=Sh(t,i),r=Sh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pl)}Ah(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(fo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(fo.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&we("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Fw=function(t,e,n,r){n!==r&&(e.flags|=4)};function bs(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function I2(t,e,n){var r=e.pendingProps;switch(Sd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return Pt(e.type)&&Cl(),lt(e),null;case 3:return r=e.stateNode,Wi(),Ee(It),Ee(pt),Nd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ja(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,tn!==null&&(af(tn),tn=null))),Jh(t,e),lt(e),null;case 5:Vd(e);var i=Lr(Ao.current);if(n=e.type,t!==null&&e.stateNode!=null)Ow(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return lt(e),null}if(t=Lr(hn.current),ja(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[un]=e,r[So]=s,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(i=0;i<zs.length;i++)we(zs[i],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":Sg(r,s),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},we("invalid",r);break;case"textarea":Ag(r,s),we("invalid",r)}Ah(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Fa(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Fa(r.textContent,a,t),i=["children",""+a]):fo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":ka(r),xg(r,s,!0);break;case"textarea":ka(r),Ig(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Pl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=f_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[un]=e,t[So]=r,Lw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ih(n,r),n){case"dialog":we("cancel",t),we("close",t),i=r;break;case"iframe":case"object":case"embed":we("load",t),i=r;break;case"video":case"audio":for(i=0;i<zs.length;i++)we(zs[i],t);i=r;break;case"source":we("error",t),i=r;break;case"img":case"image":case"link":we("error",t),we("load",t),i=r;break;case"details":we("toggle",t),i=r;break;case"input":Sg(t,r),i=wh(t,r),we("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ce({},r,{value:void 0}),we("invalid",t);break;case"textarea":Ag(t,r),i=Sh(t,r),we("invalid",t);break;default:i=r}Ah(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?m_(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&d_(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&po(t,l):typeof l=="number"&&po(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(fo.hasOwnProperty(s)?l!=null&&s==="onScroll"&&we("scroll",t):l!=null&&ld(t,s,l,o))}switch(n){case"input":ka(t),xg(t,r,!1);break;case"textarea":ka(t),Ig(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ni(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ni(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Pl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)Fw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=Lr(Ao.current),Lr(hn.current),ja(e)){if(r=e.stateNode,n=e.memoizedProps,r[un]=e,(s=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:Fa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fa(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[un]=e,e.stateNode=r}return lt(e),null;case 13:if(Ee(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Vt!==null&&e.mode&1&&!(e.flags&128))nw(),zi(),e.flags|=98560,s=!1;else if(s=ja(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(B(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(B(317));s[un]=e}else zi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),s=!1}else tn!==null&&(af(tn),tn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?We===0&&(We=3):Wd())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return Wi(),Jh(t,e),t===null&&Eo(e.stateNode.containerInfo),lt(e),null;case 10:return Pd(e.type._context),lt(e),null;case 17:return Pt(e.type)&&Cl(),lt(e),null;case 19:if(Ee(xe),s=e.memoizedState,s===null)return lt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)bs(s,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=bl(t),o!==null){for(e.flags|=128,bs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(xe,xe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Fe()>Ki&&(e.flags|=128,r=!0,bs(s,!1),e.lanes=4194304)}else{if(!r)if(t=bl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Te)return lt(e),null}else 2*Fe()-s.renderingStartTime>Ki&&n!==1073741824&&(e.flags|=128,r=!0,bs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fe(),e.sibling=null,n=xe.current,ye(xe,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return $d(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?kt&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function P2(t,e){switch(Sd(e),e.tag){case 1:return Pt(e.type)&&Cl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wi(),Ee(It),Ee(pt),Nd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vd(e),null;case 13:if(Ee(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));zi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(xe),null;case 4:return Wi(),null;case 10:return Pd(e.type._context),null;case 22:case 23:return $d(),null;case 24:return null;default:return null}}var za=!1,ht=!1,C2=typeof WeakSet=="function"?WeakSet:Set,$=null;function xi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function Zh(t,e,n){try{n()}catch(r){De(t,e,r)}}var my=!1;function R2(t,e){if(Lh=xl,t=$_(),Ed(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Oh={focusedElem:t,selectionRange:n},xl=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var x=E.memoizedProps,A=E.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?x:Zt(e.type,x),A);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(V){De(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return E=my,my=!1,E}function eo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Zh(e,n,s)}i=i.next}while(i!==r)}}function wu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ef(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jw(t){var e=t.alternate;e!==null&&(t.alternate=null,jw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[un],delete e[So],delete e[Bh],delete e[h2],delete e[f2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bw(t){return t.tag===5||t.tag===3||t.tag===4}function gy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pl));else if(r!==4&&(t=t.child,t!==null))for(tf(t,e,n),t=t.sibling;t!==null;)tf(t,e,n),t=t.sibling}function nf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(nf(t,e,n),t=t.sibling;t!==null;)nf(t,e,n),t=t.sibling}var Ye=null,en=!1;function Un(t,e,n){for(n=n.child;n!==null;)Uw(t,e,n),n=n.sibling}function Uw(t,e,n){if(cn&&typeof cn.onCommitFiberUnmount=="function")try{cn.onCommitFiberUnmount(fu,n)}catch{}switch(n.tag){case 5:ht||xi(n,e);case 6:var r=Ye,i=en;Ye=null,Un(t,e,n),Ye=r,en=i,Ye!==null&&(en?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(en?(t=Ye,n=n.stateNode,t.nodeType===8?Lc(t.parentNode,n):t.nodeType===1&&Lc(t,n),vo(t)):Lc(Ye,n.stateNode));break;case 4:r=Ye,i=en,Ye=n.stateNode.containerInfo,en=!0,Un(t,e,n),Ye=r,en=i;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Zh(n,e,o),i=i.next}while(i!==r)}Un(t,e,n);break;case 1:if(!ht&&(xi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){De(n,e,a)}Un(t,e,n);break;case 21:Un(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,Un(t,e,n),ht=r):Un(t,e,n);break;default:Un(t,e,n)}}function yy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new C2),e.forEach(function(r){var i=F2.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ye=a.stateNode,en=!1;break e;case 3:Ye=a.stateNode.containerInfo,en=!0;break e;case 4:Ye=a.stateNode.containerInfo,en=!0;break e}a=a.return}if(Ye===null)throw Error(B(160));Uw(s,o,i),Ye=null,en=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){De(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zw(e,t),e=e.sibling}function zw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xt(e,t),an(t),r&4){try{eo(3,t,t.return),wu(3,t)}catch(x){De(t,t.return,x)}try{eo(5,t,t.return)}catch(x){De(t,t.return,x)}}break;case 1:Xt(e,t),an(t),r&512&&n!==null&&xi(n,n.return);break;case 5:if(Xt(e,t),an(t),r&512&&n!==null&&xi(n,n.return),t.flags&32){var i=t.stateNode;try{po(i,"")}catch(x){De(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&c_(i,s),Ih(a,o);var c=Ih(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?m_(i,f):h==="dangerouslySetInnerHTML"?d_(i,f):h==="children"?po(i,f):ld(i,h,f,c)}switch(a){case"input":Eh(i,s);break;case"textarea":h_(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Ni(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ni(i,!!s.multiple,s.defaultValue,!0):Ni(i,!!s.multiple,s.multiple?[]:"",!1))}i[So]=s}catch(x){De(t,t.return,x)}}break;case 6:if(Xt(e,t),an(t),r&4){if(t.stateNode===null)throw Error(B(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){De(t,t.return,x)}}break;case 3:if(Xt(e,t),an(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{vo(e.containerInfo)}catch(x){De(t,t.return,x)}break;case 4:Xt(e,t),an(t);break;case 13:Xt(e,t),an(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ud=Fe())),r&4&&yy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(c=ht)||h,Xt(e,t),ht=c):Xt(e,t),an(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for($=t,h=t.child;h!==null;){for(f=$=h;$!==null;){switch(p=$,g=p.child,p.tag){case 0:case 11:case 14:case 15:eo(4,p,p.return);break;case 1:xi(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(x){De(r,n,x)}}break;case 5:xi(p,p.return);break;case 22:if(p.memoizedState!==null){_y(f);continue}}g!==null?(g.return=p,$=g):_y(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=p_("display",o))}catch(x){De(t,t.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(x){De(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Xt(e,t),an(t),r&4&&yy(t);break;case 21:break;default:Xt(e,t),an(t)}}function an(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Bw(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(po(i,""),r.flags&=-33);var s=gy(t);nf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=gy(t);tf(t,a,o);break;default:throw Error(B(161))}}catch(l){De(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function k2(t,e,n){$=t,$w(t)}function $w(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||za;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ht;a=za;var c=ht;if(za=o,(ht=l)&&!c)for($=i;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?wy(i):l!==null?(l.return=o,$=l):wy(i);for(;s!==null;)$=s,$w(s),s=s.sibling;$=i,za=a,ht=c}vy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):vy(t)}}function vy(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||wu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ny(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ny(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&vo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}ht||e.flags&512&&ef(e)}catch(p){De(e,e.return,p)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function _y(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function wy(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wu(4,e)}catch(l){De(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){De(e,i,l)}}var s=e.return;try{ef(e)}catch(l){De(e,s,l)}break;case 5:var o=e.return;try{ef(e)}catch(l){De(e,o,l)}}}catch(l){De(e,e.return,l)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var V2=Math.ceil,Fl=On.ReactCurrentDispatcher,jd=On.ReactCurrentOwner,$t=On.ReactCurrentBatchConfig,le=0,Ge=null,Ue=null,et=0,kt=0,Ai=vr(0),We=0,Ro=null,Gr=0,Eu=0,Bd=0,to=null,Tt=null,Ud=0,Ki=1/0,Tn=null,jl=!1,rf=null,nr=null,$a=!1,Gn=null,Bl=0,no=0,sf=null,al=-1,ll=0;function _t(){return le&6?Fe():al!==-1?al:al=Fe()}function rr(t){return t.mode&1?le&2&&et!==0?et&-et:p2.transition!==null?(ll===0&&(ll=P_()),ll):(t=fe,t!==0||(t=window.event,t=t===void 0?16:M_(t.type)),t):1}function rn(t,e,n,r){if(50<no)throw no=0,sf=null,Error(B(185));Go(t,n,r),(!(le&2)||t!==Ge)&&(t===Ge&&(!(le&2)&&(Eu|=n),We===4&&Kn(t,et)),Ct(t,r),n===1&&le===0&&!(e.mode&1)&&(Ki=Fe()+500,yu&&_r()))}function Ct(t,e){var n=t.callbackNode;pA(t,e);var r=Sl(t,t===Ge?et:0);if(r===0)n!==null&&Rg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Rg(n),e===1)t.tag===0?d2(Ey.bind(null,t)):Z_(Ey.bind(null,t)),u2(function(){!(le&6)&&_r()}),n=null;else{switch(C_(r)){case 1:n=dd;break;case 4:n=A_;break;case 16:n=Tl;break;case 536870912:n=I_;break;default:n=Tl}n=Xw(n,Ww.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ww(t,e){if(al=-1,ll=0,le&6)throw Error(B(327));var n=t.callbackNode;if(Oi()&&t.callbackNode!==n)return null;var r=Sl(t,t===Ge?et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ul(t,r);else{e=r;var i=le;le|=2;var s=Kw();(Ge!==t||et!==e)&&(Tn=null,Ki=Fe()+500,Br(t,e));do try{M2();break}catch(a){Hw(t,a)}while(!0);Id(),Fl.current=s,le=i,Ue!==null?e=0:(Ge=null,et=0,e=We)}if(e!==0){if(e===2&&(i=Vh(t),i!==0&&(r=i,e=of(t,i))),e===1)throw n=Ro,Br(t,0),Kn(t,r),Ct(t,Fe()),n;if(e===6)Kn(t,r);else{if(i=t.current.alternate,!(r&30)&&!N2(i)&&(e=Ul(t,r),e===2&&(s=Vh(t),s!==0&&(r=s,e=of(t,s))),e===1))throw n=Ro,Br(t,0),Kn(t,r),Ct(t,Fe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:kr(t,Tt,Tn);break;case 3:if(Kn(t,r),(r&130023424)===r&&(e=Ud+500-Fe(),10<e)){if(Sl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){_t(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=jh(kr.bind(null,t,Tt,Tn),e);break}kr(t,Tt,Tn);break;case 4:if(Kn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-nn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*V2(r/1960))-r,10<r){t.timeoutHandle=jh(kr.bind(null,t,Tt,Tn),r);break}kr(t,Tt,Tn);break;case 5:kr(t,Tt,Tn);break;default:throw Error(B(329))}}}return Ct(t,Fe()),t.callbackNode===n?Ww.bind(null,t):null}function of(t,e){var n=to;return t.current.memoizedState.isDehydrated&&(Br(t,e).flags|=256),t=Ul(t,e),t!==2&&(e=Tt,Tt=n,e!==null&&af(e)),t}function af(t){Tt===null?Tt=t:Tt.push.apply(Tt,t)}function N2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!on(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kn(t,e){for(e&=~Bd,e&=~Eu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-nn(e),r=1<<n;t[n]=-1,e&=~r}}function Ey(t){if(le&6)throw Error(B(327));Oi();var e=Sl(t,0);if(!(e&1))return Ct(t,Fe()),null;var n=Ul(t,e);if(t.tag!==0&&n===2){var r=Vh(t);r!==0&&(e=r,n=of(t,r))}if(n===1)throw n=Ro,Br(t,0),Kn(t,e),Ct(t,Fe()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,kr(t,Tt,Tn),Ct(t,Fe()),null}function zd(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Ki=Fe()+500,yu&&_r())}}function Qr(t){Gn!==null&&Gn.tag===0&&!(le&6)&&Oi();var e=le;le|=1;var n=$t.transition,r=fe;try{if($t.transition=null,fe=1,t)return t()}finally{fe=r,$t.transition=n,le=e,!(le&6)&&_r()}}function $d(){kt=Ai.current,Ee(Ai)}function Br(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,l2(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(Sd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cl();break;case 3:Wi(),Ee(It),Ee(pt),Nd();break;case 5:Vd(r);break;case 4:Wi();break;case 13:Ee(xe);break;case 19:Ee(xe);break;case 10:Pd(r.type._context);break;case 22:case 23:$d()}n=n.return}if(Ge=t,Ue=t=ir(t.current,null),et=kt=e,We=0,Ro=null,Bd=Eu=Gr=0,Tt=to=null,br!==null){for(e=0;e<br.length;e++)if(n=br[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}br=null}return t}function Hw(t,e){do{var n=Ue;try{if(Id(),il.current=Ol,Ll){for(var r=Ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Ll=!1}if(qr=0,qe=ze=Ie=null,Zs=!1,Io=0,jd.current=null,n===null||n.return===null){We=1,Ro=e,Ue=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=et,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=ly(o);if(g!==null){g.flags&=-257,uy(g,o,a,s,e),g.mode&1&&ay(s,c,e),e=g,l=c;var E=e.updateQueue;if(E===null){var x=new Set;x.add(l),e.updateQueue=x}else E.add(l);break e}else{if(!(e&1)){ay(s,c,e),Wd();break e}l=Error(B(426))}}else if(Te&&a.mode&1){var A=ly(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),uy(A,o,a,s,e),xd(Hi(l,a));break e}}s=l=Hi(l,a),We!==4&&(We=2),to===null?to=[s]:to.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Cw(s,l,e);ty(s,w);break e;case 1:a=l;var v=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(nr===null||!nr.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=Rw(s,a,e);ty(s,V);break e}}s=s.return}while(s!==null)}Gw(n)}catch(b){e=b,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function Kw(){var t=Fl.current;return Fl.current=Ol,t===null?Ol:t}function Wd(){(We===0||We===3||We===2)&&(We=4),Ge===null||!(Gr&268435455)&&!(Eu&268435455)||Kn(Ge,et)}function Ul(t,e){var n=le;le|=2;var r=Kw();(Ge!==t||et!==e)&&(Tn=null,Br(t,e));do try{D2();break}catch(i){Hw(t,i)}while(!0);if(Id(),le=n,Fl.current=r,Ue!==null)throw Error(B(261));return Ge=null,et=0,We}function D2(){for(;Ue!==null;)qw(Ue)}function M2(){for(;Ue!==null&&!sA();)qw(Ue)}function qw(t){var e=Yw(t.alternate,t,kt);t.memoizedProps=t.pendingProps,e===null?Gw(t):Ue=e,jd.current=null}function Gw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=P2(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,Ue=null;return}}else if(n=I2(n,e,kt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);We===0&&(We=5)}function kr(t,e,n){var r=fe,i=$t.transition;try{$t.transition=null,fe=1,b2(t,e,n,r)}finally{$t.transition=i,fe=r}return null}function b2(t,e,n,r){do Oi();while(Gn!==null);if(le&6)throw Error(B(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(mA(t,s),t===Ge&&(Ue=Ge=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$a||($a=!0,Xw(Tl,function(){return Oi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=$t.transition,$t.transition=null;var o=fe;fe=1;var a=le;le|=4,jd.current=null,R2(t,n),zw(n,t),t2(Oh),xl=!!Lh,Oh=Lh=null,t.current=n,k2(n),oA(),le=a,fe=o,$t.transition=s}else t.current=n;if($a&&($a=!1,Gn=t,Bl=i),s=t.pendingLanes,s===0&&(nr=null),uA(n.stateNode),Ct(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(jl)throw jl=!1,t=rf,rf=null,t;return Bl&1&&t.tag!==0&&Oi(),s=t.pendingLanes,s&1?t===sf?no++:(no=0,sf=t):no=0,_r(),null}function Oi(){if(Gn!==null){var t=C_(Bl),e=$t.transition,n=fe;try{if($t.transition=null,fe=16>t?16:t,Gn===null)var r=!1;else{if(t=Gn,Gn=null,Bl=0,le&6)throw Error(B(331));var i=le;for(le|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for($=c;$!==null;){var h=$;switch(h.tag){case 0:case 11:case 15:eo(8,h,s)}var f=h.child;if(f!==null)f.return=h,$=f;else for(;$!==null;){h=$;var p=h.sibling,g=h.return;if(jw(h),h===c){$=null;break}if(p!==null){p.return=g,$=p;break}$=g}}}var E=s.alternate;if(E!==null){var x=E.child;if(x!==null){E.child=null;do{var A=x.sibling;x.sibling=null,x=A}while(x!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:eo(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,$=w;break e}$=s.return}}var v=t.current;for($=v;$!==null;){o=$;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,$=_;else e:for(o=v;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wu(9,a)}}catch(b){De(a,a.return,b)}if(a===o){$=null;break e}var V=a.sibling;if(V!==null){V.return=a.return,$=V;break e}$=a.return}}if(le=i,_r(),cn&&typeof cn.onPostCommitFiberRoot=="function")try{cn.onPostCommitFiberRoot(fu,t)}catch{}r=!0}return r}finally{fe=n,$t.transition=e}}return!1}function Ty(t,e,n){e=Hi(n,e),e=Cw(t,e,1),t=tr(t,e,1),e=_t(),t!==null&&(Go(t,1,e),Ct(t,e))}function De(t,e,n){if(t.tag===3)Ty(t,t,n);else for(;e!==null;){if(e.tag===3){Ty(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(nr===null||!nr.has(r))){t=Hi(n,t),t=Rw(e,t,1),e=tr(e,t,1),t=_t(),e!==null&&(Go(e,1,t),Ct(e,t));break}}e=e.return}}function L2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&n,Ge===t&&(et&n)===n&&(We===4||We===3&&(et&130023424)===et&&500>Fe()-Ud?Br(t,0):Bd|=n),Ct(t,e)}function Qw(t,e){e===0&&(t.mode&1?(e=Da,Da<<=1,!(Da&130023424)&&(Da=4194304)):e=1);var n=_t();t=Rn(t,e),t!==null&&(Go(t,e,n),Ct(t,n))}function O2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Qw(t,n)}function F2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),Qw(t,n)}var Yw;Yw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||It.current)xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xt=!1,A2(t,e,n);xt=!!(t.flags&131072)}else xt=!1,Te&&e.flags&1048576&&ew(e,Vl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ol(t,e),t=e.pendingProps;var i=Ui(e,pt.current);Li(e,n),i=Md(null,e,r,t,i,n);var s=bd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pt(r)?(s=!0,Rl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Rd(e),i.updater=_u,e.stateNode=i,i._reactInternals=e,Kh(e,r,t,n),e=Qh(null,e,r,!0,s,n)):(e.tag=0,Te&&s&&Td(e),yt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ol(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=B2(r),t=Zt(r,t),i){case 0:e=Gh(null,e,r,t,n);break e;case 1:e=fy(null,e,r,t,n);break e;case 11:e=cy(null,e,r,t,n);break e;case 14:e=hy(null,e,r,Zt(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),Gh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),fy(t,e,r,i,n);case 3:e:{if(Dw(e),t===null)throw Error(B(387));r=e.pendingProps,s=e.memoizedState,i=s.element,ow(t,e),Ml(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Hi(Error(B(423)),e),e=dy(t,e,r,n,i);break e}else if(r!==i){i=Hi(Error(B(424)),e),e=dy(t,e,r,n,i);break e}else for(Vt=er(e.stateNode.containerInfo.firstChild),Dt=e,Te=!0,tn=null,n=iw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zi(),r===i){e=kn(t,e,n);break e}yt(t,e,r,n)}e=e.child}return e;case 5:return aw(e),t===null&&$h(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Fh(r,i)?o=null:s!==null&&Fh(r,s)&&(e.flags|=32),Nw(t,e),yt(t,e,o,n),e.child;case 6:return t===null&&$h(e),null;case 13:return Mw(t,e,n);case 4:return kd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$i(e,null,r,n):yt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),cy(t,e,r,i,n);case 7:return yt(t,e,e.pendingProps,n),e.child;case 8:return yt(t,e,e.pendingProps.children,n),e.child;case 12:return yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ye(Nl,r._currentValue),r._currentValue=o,s!==null)if(on(s.value,o)){if(s.children===i.children&&!It.current){e=kn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=In(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Wh(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(B(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Wh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}yt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Li(e,n),i=Ht(i),r=r(i),e.flags|=1,yt(t,e,r,n),e.child;case 14:return r=e.type,i=Zt(r,e.pendingProps),i=Zt(r.type,i),hy(t,e,r,i,n);case 15:return kw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zt(r,i),ol(t,e),e.tag=1,Pt(r)?(t=!0,Rl(e)):t=!1,Li(e,n),Pw(e,r,i),Kh(e,r,i,n),Qh(null,e,r,!0,t,n);case 19:return bw(t,e,n);case 22:return Vw(t,e,n)}throw Error(B(156,e.tag))};function Xw(t,e){return x_(t,e)}function j2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(t,e,n,r){return new j2(t,e,n,r)}function Hd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function B2(t){if(typeof t=="function")return Hd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cd)return 11;if(t===hd)return 14}return 2}function ir(t,e){var n=t.alternate;return n===null?(n=zt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ul(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Hd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case mi:return Ur(n.children,i,s,e);case ud:o=8,i|=8;break;case gh:return t=zt(12,n,e,i|2),t.elementType=gh,t.lanes=s,t;case yh:return t=zt(13,n,e,i),t.elementType=yh,t.lanes=s,t;case vh:return t=zt(19,n,e,i),t.elementType=vh,t.lanes=s,t;case a_:return Tu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case s_:o=10;break e;case o_:o=9;break e;case cd:o=11;break e;case hd:o=14;break e;case $n:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=zt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ur(t,e,n,r){return t=zt(7,t,r,e),t.lanes=n,t}function Tu(t,e,n,r){return t=zt(22,t,r,e),t.elementType=a_,t.lanes=n,t.stateNode={isHidden:!1},t}function Wc(t,e,n){return t=zt(6,t,null,e),t.lanes=n,t}function Hc(t,e,n){return e=zt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function U2(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ac(0),this.expirationTimes=Ac(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ac(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Kd(t,e,n,r,i,s,o,a,l){return t=new U2(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=zt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rd(s),t}function z2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Jw(t){if(!t)return hr;t=t._reactInternals;e:{if(ni(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(Pt(n))return J_(t,n,e)}return e}function Zw(t,e,n,r,i,s,o,a,l){return t=Kd(n,r,!0,t,i,s,o,a,l),t.context=Jw(null),n=t.current,r=_t(),i=rr(n),s=In(r,i),s.callback=e??null,tr(n,s,i),t.current.lanes=i,Go(t,i,r),Ct(t,r),t}function Su(t,e,n,r){var i=e.current,s=_t(),o=rr(i);return n=Jw(n),e.context===null?e.context=n:e.pendingContext=n,e=In(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=tr(i,e,o),t!==null&&(rn(t,i,o,s),rl(t,i,o)),o}function zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qd(t,e){Sy(t,e),(t=t.alternate)&&Sy(t,e)}function $2(){return null}var e1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gd(t){this._internalRoot=t}xu.prototype.render=Gd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Su(t,e,null,null)};xu.prototype.unmount=Gd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qr(function(){Su(null,t,null,null)}),e[Cn]=null}};function xu(t){this._internalRoot=t}xu.prototype.unstable_scheduleHydration=function(t){if(t){var e=V_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hn.length&&e!==0&&e<Hn[n].priority;n++);Hn.splice(n,0,t),n===0&&D_(t)}};function Qd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Au(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xy(){}function W2(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=zl(o);s.call(c)}}var o=Zw(e,r,t,0,null,!1,!1,"",xy);return t._reactRootContainer=o,t[Cn]=o.current,Eo(t.nodeType===8?t.parentNode:t),Qr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=zl(l);a.call(c)}}var l=Kd(t,0,!1,null,null,!1,!1,"",xy);return t._reactRootContainer=l,t[Cn]=l.current,Eo(t.nodeType===8?t.parentNode:t),Qr(function(){Su(e,l,n,r)}),l}function Iu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=zl(o);a.call(l)}}Su(e,o,t,i)}else o=W2(n,e,t,i,r);return zl(o)}R_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Us(e.pendingLanes);n!==0&&(pd(e,n|1),Ct(e,Fe()),!(le&6)&&(Ki=Fe()+500,_r()))}break;case 13:Qr(function(){var r=Rn(t,1);if(r!==null){var i=_t();rn(r,t,1,i)}}),qd(t,1)}};md=function(t){if(t.tag===13){var e=Rn(t,134217728);if(e!==null){var n=_t();rn(e,t,134217728,n)}qd(t,134217728)}};k_=function(t){if(t.tag===13){var e=rr(t),n=Rn(t,e);if(n!==null){var r=_t();rn(n,t,e,r)}qd(t,e)}};V_=function(){return fe};N_=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};Ch=function(t,e,n){switch(e){case"input":if(Eh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=gu(r);if(!i)throw Error(B(90));u_(r),Eh(r,i)}}}break;case"textarea":h_(t,n);break;case"select":e=n.value,e!=null&&Ni(t,!!n.multiple,e,!1)}};v_=zd;__=Qr;var H2={usingClientEntryPoint:!1,Events:[Yo,_i,gu,g_,y_,zd]},Ls={findFiberByHostInstance:Mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K2={bundleType:Ls.bundleType,version:Ls.version,rendererPackageName:Ls.rendererPackageName,rendererConfig:Ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:On.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=T_(t),t===null?null:t.stateNode},findFiberByHostInstance:Ls.findFiberByHostInstance||$2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wa.isDisabled&&Wa.supportsFiber)try{fu=Wa.inject(K2),cn=Wa}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H2;Lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qd(e))throw Error(B(200));return z2(t,e,null,n)};Lt.createRoot=function(t,e){if(!Qd(t))throw Error(B(299));var n=!1,r="",i=e1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Kd(t,1,!1,null,null,n,!1,r,i),t[Cn]=e.current,Eo(t.nodeType===8?t.parentNode:t),new Gd(e)};Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=T_(e),t=t===null?null:t.stateNode,t};Lt.flushSync=function(t){return Qr(t)};Lt.hydrate=function(t,e,n){if(!Au(e))throw Error(B(200));return Iu(null,t,e,!0,n)};Lt.hydrateRoot=function(t,e,n){if(!Qd(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=e1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Zw(e,null,t,1,n??null,i,!1,s,o),t[Cn]=e.current,Eo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new xu(e)};Lt.render=function(t,e,n){if(!Au(e))throw Error(B(200));return Iu(null,t,e,!1,n)};Lt.unmountComponentAtNode=function(t){if(!Au(t))throw Error(B(40));return t._reactRootContainer?(Qr(function(){Iu(null,null,t,!1,function(){t._reactRootContainer=null,t[Cn]=null})}),!0):!1};Lt.unstable_batchedUpdates=zd;Lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Au(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Iu(t,e,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function t1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t1)}catch(t){console.error(t)}}t1(),t_.exports=Lt;var q2=t_.exports,Ay=q2;ph.createRoot=Ay.createRoot,ph.hydrateRoot=Ay.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ko(){return ko=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ko.apply(this,arguments)}var Qn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qn||(Qn={}));const Iy="popstate";function G2(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return lf("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:$l(i)}return Y2(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function n1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q2(){return Math.random().toString(36).substr(2,8)}function Py(t,e){return{usr:t.state,key:t.key,idx:e}}function lf(t,e,n,r){return n===void 0&&(n=null),ko({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?os(e):e,{state:n,key:e&&e.key||r||Q2()})}function $l(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function os(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Y2(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Qn.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(ko({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Qn.Pop;let A=h(),w=A==null?null:A-c;c=A,l&&l({action:a,location:x.location,delta:w})}function p(A,w){a=Qn.Push;let v=lf(x.location,A,w);c=h()+1;let _=Py(v,c),V=x.createHref(v);try{o.pushState(_,"",V)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(V)}s&&l&&l({action:a,location:x.location,delta:1})}function g(A,w){a=Qn.Replace;let v=lf(x.location,A,w);c=h();let _=Py(v,c),V=x.createHref(v);o.replaceState(_,"",V),s&&l&&l({action:a,location:x.location,delta:0})}function E(A){let w=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof A=="string"?A:$l(A);return v=v.replace(/ $/,"%20"),Me(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let x={get action(){return a},get location(){return t(i,o)},listen(A){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Iy,f),l=A,()=>{i.removeEventListener(Iy,f),l=null}},createHref(A){return e(i,A)},createURL:E,encodeLocation(A){let w=E(A);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:g,go(A){return o.go(A)}};return x}var Cy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Cy||(Cy={}));function X2(t,e,n){return n===void 0&&(n="/"),J2(t,e,n)}function J2(t,e,n,r){let i=typeof e=="string"?os(e):e,s=qi(i.pathname||"/",n);if(s==null)return null;let o=r1(t);Z2(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=cI(s);a=lI(o[l],c)}return a}function r1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Me(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=sr([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),r1(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:oI(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of i1(s.path))i(s,o,l)}),e}function i1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=i1(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Z2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:aI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const eI=/^:[\w-]+$/,tI=3,nI=2,rI=1,iI=10,sI=-2,Ry=t=>t==="*";function oI(t,e){let n=t.split("/"),r=n.length;return n.some(Ry)&&(r+=sI),e&&(r+=nI),n.filter(i=>!Ry(i)).reduce((i,s)=>i+(eI.test(s)?tI:s===""?rI:iI),r)}function aI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function lI(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=uf({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:sr([s,f.pathname]),pathnameBase:pI(sr([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=sr([s,f.pathnameBase]))}return o}function uf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=uI(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let x=a[f]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const E=a[f];return g&&!E?c[p]=void 0:c[p]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function uI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),n1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function cI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return n1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function qi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function hI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?os(t):t;return{pathname:n?n.startsWith("/")?n:fI(n,e):e,search:mI(r),hash:gI(i)}}function fI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Kc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function dI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function s1(t,e){let n=dI(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function o1(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=os(t):(i=ko({},t),Me(!i.pathname||!i.pathname.includes("?"),Kc("?","pathname","search",i)),Me(!i.pathname||!i.pathname.includes("#"),Kc("#","pathname","hash",i)),Me(!i.search||!i.search.includes("#"),Kc("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=hI(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const sr=t=>t.join("/").replace(/\/\/+/g,"/"),pI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),mI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function yI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const a1=["post","put","patch","delete"];new Set(a1);const vI=["get",...a1];new Set(vI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vo(){return Vo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vo.apply(this,arguments)}const Pu=D.createContext(null),l1=D.createContext(null),wr=D.createContext(null),Cu=D.createContext(null),ri=D.createContext({outlet:null,matches:[],isDataRoute:!1}),u1=D.createContext(null);function _I(t,e){let{relative:n}=e===void 0?{}:e;Jo()||Me(!1);let{basename:r,navigator:i}=D.useContext(wr),{hash:s,pathname:o,search:a}=Ru(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:sr([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Jo(){return D.useContext(Cu)!=null}function as(){return Jo()||Me(!1),D.useContext(Cu).location}function c1(t){D.useContext(wr).static||D.useLayoutEffect(t)}function h1(){let{isDataRoute:t}=D.useContext(ri);return t?NI():wI()}function wI(){Jo()||Me(!1);let t=D.useContext(Pu),{basename:e,future:n,navigator:r}=D.useContext(wr),{matches:i}=D.useContext(ri),{pathname:s}=as(),o=JSON.stringify(s1(i,n.v7_relativeSplatPath)),a=D.useRef(!1);return c1(()=>{a.current=!0}),D.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=o1(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:sr([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}function Ru(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(wr),{matches:i}=D.useContext(ri),{pathname:s}=as(),o=JSON.stringify(s1(i,r.v7_relativeSplatPath));return D.useMemo(()=>o1(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function EI(t,e){return TI(t,e)}function TI(t,e,n,r){Jo()||Me(!1);let{navigator:i}=D.useContext(wr),{matches:s}=D.useContext(ri),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=as(),h;if(e){var f;let A=typeof e=="string"?os(e):e;l==="/"||(f=A.pathname)!=null&&f.startsWith(l)||Me(!1),h=A}else h=c;let p=h.pathname||"/",g=p;if(l!=="/"){let A=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(A.length).join("/")}let E=X2(t,{pathname:g}),x=PI(E&&E.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:sr([l,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:sr([l,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),s,n,r);return e&&x?D.createElement(Cu.Provider,{value:{location:Vo({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Qn.Pop}},x):x}function SI(){let t=VI(),e=yI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const xI=D.createElement(SI,null);class AI extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(ri.Provider,{value:this.props.routeContext},D.createElement(u1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function II(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(Pu);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(ri.Provider,{value:e},r)}function PI(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||Me(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:p,errors:g}=n,E=f.route.loader&&p[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let g,E=!1,x=null,A=null;n&&(g=a&&f.route.id?a[f.route.id]:void 0,x=f.route.errorElement||xI,l&&(c<0&&p===0?(DI("route-fallback"),E=!0,A=null):c===p&&(E=!0,A=f.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),v=()=>{let _;return g?_=x:E?_=A:f.route.Component?_=D.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=h,D.createElement(II,{match:f,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?D.createElement(AI,{location:n.location,revalidation:n.revalidation,component:x,error:g,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var f1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(f1||{}),d1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(d1||{});function CI(t){let e=D.useContext(Pu);return e||Me(!1),e}function RI(t){let e=D.useContext(l1);return e||Me(!1),e}function kI(t){let e=D.useContext(ri);return e||Me(!1),e}function p1(t){let e=kI(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function VI(){var t;let e=D.useContext(u1),n=RI(),r=p1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function NI(){let{router:t}=CI(f1.UseNavigateStable),e=p1(d1.UseNavigateStable),n=D.useRef(!1);return c1(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Vo({fromRouteId:e},s)))},[t,e])}const ky={};function DI(t,e,n){ky[t]||(ky[t]=!0)}function MI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Vr(t){Me(!1)}function bI(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Qn.Pop,navigator:s,static:o=!1,future:a}=t;Jo()&&Me(!1);let l=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:s,static:o,future:Vo({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=os(r));let{pathname:h="/",search:f="",hash:p="",state:g=null,key:E="default"}=r,x=D.useMemo(()=>{let A=qi(h,l);return A==null?null:{location:{pathname:A,search:f,hash:p,state:g,key:E},navigationType:i}},[l,h,f,p,g,E,i]);return x==null?null:D.createElement(wr.Provider,{value:c},D.createElement(Cu.Provider,{children:n,value:x}))}function LI(t){let{children:e,location:n}=t;return EI(cf(e),n)}new Promise(()=>{});function cf(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){n.push.apply(n,cf(r.props.children,s));return}r.type!==Vr&&Me(!1),!r.props.index||!r.props.children||Me(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=cf(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wl(){return Wl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wl.apply(this,arguments)}function m1(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function OI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function FI(t,e){return t.button===0&&(!e||e==="_self")&&!OI(t)}const jI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],BI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],UI="6";try{window.__reactRouterVersion=UI}catch{}const zI=D.createContext({isTransitioning:!1}),$I="startTransition",Vy=Lx[$I];function WI(t){let{basename:e,children:n,future:r,window:i}=t,s=D.useRef();s.current==null&&(s.current=G2({window:i,v5Compat:!0}));let o=s.current,[a,l]=D.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=D.useCallback(f=>{c&&Vy?Vy(()=>l(f)):l(f)},[l,c]);return D.useLayoutEffect(()=>o.listen(h),[o,h]),D.useEffect(()=>MI(r),[r]),D.createElement(bI,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const HI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",KI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qI=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f}=e,p=m1(e,jI),{basename:g}=D.useContext(wr),E,x=!1;if(typeof c=="string"&&KI.test(c)&&(E=c,HI))try{let _=new URL(window.location.href),V=c.startsWith("//")?new URL(_.protocol+c):new URL(c),b=qi(V.pathname,g);V.origin===_.origin&&b!=null?c=b+V.search+V.hash:x=!0}catch{}let A=_I(c,{relative:i}),w=YI(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:f});function v(_){r&&r(_),_.defaultPrevented||w(_)}return D.createElement("a",Wl({},p,{href:E||A,onClick:x||s?r:v,ref:n,target:l}))}),GI=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,f=m1(e,BI),p=Ru(l,{relative:f.relative}),g=as(),E=D.useContext(l1),{navigator:x,basename:A}=D.useContext(wr),w=E!=null&&XI(p)&&c===!0,v=x.encodeLocation?x.encodeLocation(p).pathname:p.pathname,_=g.pathname,V=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;i||(_=_.toLowerCase(),V=V?V.toLowerCase():null,v=v.toLowerCase()),V&&A&&(V=qi(V,A)||V);const b=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let O=_===v||!o&&_.startsWith(v)&&_.charAt(b)==="/",P=V!=null&&(V===v||!o&&V.startsWith(v)&&V.charAt(v.length)==="/"),y={isActive:O,isPending:P,isTransitioning:w},S=O?r:void 0,I;typeof s=="function"?I=s(y):I=[s,O?"active":null,P?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let C=typeof a=="function"?a(y):a;return D.createElement(qI,Wl({},f,{"aria-current":S,className:I,ref:n,style:C,to:l,viewTransition:c}),typeof h=="function"?h(y):h)});var hf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hf||(hf={}));var Ny;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ny||(Ny={}));function QI(t){let e=D.useContext(Pu);return e||Me(!1),e}function YI(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=h1(),c=as(),h=Ru(t,{relative:o});return D.useCallback(f=>{if(FI(f,n)){f.preventDefault();let p=r!==void 0?r:$l(c)===$l(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}function XI(t,e){e===void 0&&(e={});let n=D.useContext(zI);n==null&&Me(!1);let{basename:r}=QI(hf.useViewTransitionState),i=Ru(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=qi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=qi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return uf(i.pathname,o)!=null||uf(i.pathname,s)!=null}var g1={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Dy=me.createContext&&me.createContext(g1),JI=["attr","size","title"];function ZI(t,e){if(t==null)return{};var n=eP(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function eP(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Hl(){return Hl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hl.apply(this,arguments)}function My(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?My(Object(n),!0).forEach(function(r){tP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):My(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function tP(t,e,n){return e=nP(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nP(t){var e=rP(t,"string");return typeof e=="symbol"?e:e+""}function rP(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function y1(t){return t&&t.map((e,n)=>me.createElement(e.tag,Kl({key:n},e.attr),y1(e.child)))}function Er(t){return e=>me.createElement(iP,Hl({attr:Kl({},t.attr)},e),y1(t.child))}function iP(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=ZI(t,JI),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),me.createElement("svg",Hl({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Kl(Kl({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&me.createElement("title",null,s),t.children)};return Dy!==void 0?me.createElement(Dy.Consumer,null,n=>e(n)):e(g1)}function sP(t){return Er({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function oP(t){return Er({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function aP(t){return Er({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function lP(t){return Er({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M288 130.54V112h16c8.84 0 16-7.16 16-16V80c0-8.84-7.16-16-16-16h-96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h16v18.54C115.49 146.11 32 239.18 32 352h448c0-112.82-83.49-205.89-192-221.46zM496 384H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h480c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function uP(t){return Er({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 80v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8zm144 263.88V440c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-24.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V232c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v24.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07z"},child:[]}]})(t)}function cP(t){return Er({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function hP(t){return Er({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function fP(t){return Er({attr:{viewBox:"0 0 416 512"},child:[{tag:"path",attr:{d:"M207.9 15.2c.8 4.7 16.1 94.5 16.1 128.8 0 52.3-27.8 89.6-68.9 104.6L168 486.7c.7 13.7-10.2 25.3-24 25.3H80c-13.7 0-24.7-11.5-24-25.3l12.9-238.1C27.7 233.6 0 196.2 0 144 0 109.6 15.3 19.9 16.1 15.2 19.3-5.1 61.4-5.4 64 16.3v141.2c1.3 3.4 15.1 3.2 16 0 1.4-25.3 7.9-139.2 8-141.8 3.3-20.8 44.7-20.8 47.9 0 .2 2.7 6.6 116.5 8 141.8.9 3.2 14.8 3.4 16 0V16.3c2.6-21.6 44.8-21.4 48-1.1zm119.2 285.7l-15 185.1c-1.2 14 9.9 26 23.9 26h56c13.3 0 24-10.7 24-24V24c0-13.2-10.7-24-24-24-82.5 0-221.4 178.5-64.9 300.9z"},child:[]}]})(t)}const dP=[{path:"/",label:"Home",icon:cP},{path:"/menu",label:"Menu",icon:fP},{path:"/billing",label:"Billing",icon:uP},{path:"/staff",label:"Staff",icon:hP},{path:"/order",label:"Order",icon:aP},{path:"/kitchen",label:"Kitchen",icon:lP}],pP=()=>{const[t,e]=D.useState(!0);return D.useEffect(()=>{const n=localStorage.getItem("sidebarOpen");n!==null&&e(JSON.parse(n))},[]),D.useEffect(()=>{localStorage.setItem("sidebarOpen",JSON.stringify(t))},[t]),k.jsxs("aside",{className:`${t?"w-64":"w-20"} bg-gradient-to-b from-gray-900 to-gray-800 text-gray-200 h-screen p-4 flex flex-col justify-between shadow-lg transition-all duration-300`,children:[k.jsxs("div",{children:[k.jsx("div",{className:`text-2xl font-extrabold tracking-wide text-yellow-400 mb-8 transition-opacity duration-300 ${!t&&"opacity-0 hidden"}`,children:" SyncServe"}),k.jsx("nav",{className:"space-y-2",children:dP.map(({path:n,label:r,icon:i})=>k.jsxs(GI,{to:n,className:({isActive:s})=>`flex items-center rounded-lg font-medium transition-all duration-300 py-3 px-4 relative group
                ${s?"bg-yellow-500 text-gray-900 shadow-md":"hover:bg-gray-700 hover:text-yellow-400"}`,children:[k.jsx("span",{className:"w-6 flex justify-center text-xl",children:k.jsx(i,{"aria-hidden":"true"})}),t&&k.jsx("span",{className:"ml-4 flex-1 whitespace-nowrap",children:r}),!t&&k.jsx("span",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-3 px-2 py-1 bg-gray-900 text-yellow-400 text-sm rounded opacity-0 group-hover:opacity-100 whitespace-nowrap shadow-lg",role:"tooltip",children:r})]},n))})]}),k.jsxs("div",{children:[k.jsxs("div",{className:`border-t border-gray-700 pt-4 flex items-center transition-all duration-300 ${t?"gap-3":"justify-center"}`,children:[k.jsx("img",{src:"https://i.pravatar.cc/40",alt:"profile",className:"w-10 h-10 rounded-full border-2 border-yellow-400"}),t&&k.jsxs("div",{children:[k.jsx("p",{className:"font-semibold",children:"Manager"}),k.jsx("p",{className:"text-sm text-gray-400",children:"Admin"})]})]}),k.jsx("button",{onClick:()=>e(!t),"aria-label":t?"Collapse sidebar":"Expand sidebar","aria-expanded":t,className:"mt-4 w-full flex items-center justify-center py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-yellow-400 transition-colors",children:t?k.jsx(oP,{size:18}):k.jsx(sP,{size:18})})]})]})};var by={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},mP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},_1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(v1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new gP;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const E=c<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class gP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yP=function(t){const e=v1(t);return _1.encodeByteArray(e,!0)},ql=function(t){return yP(t).replace(/\./g,"")},vP=function(t){try{return _1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=()=>_P().__FIREBASE_DEFAULTS__,EP=()=>{if(typeof process>"u"||typeof by>"u")return;const t=by.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vP(t[1]);return e&&JSON.parse(e)},Yd=()=>{try{return wP()||EP()||TP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},SP=t=>{var e,n;return(n=(e=Yd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xP=t=>{const e=SP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},w1=()=>{var t;return(t=Yd())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ql(JSON.stringify(n)),ql(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function CP(){var t;const e=(t=Yd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RP(){return!CP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kP(){try{return typeof indexedDB=="object"}catch{return!1}}function VP(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP="FirebaseError";class ls extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=NP,Object.setPrototypeOf(this,ls.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,E1.prototype.create)}}class E1{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?DP(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ls(i,a,r)}}function DP(t,e){return t.replace(MP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const MP=/\{\$([^}]+)}/g;function ff(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ly(s)&&Ly(o)){if(!ff(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ly(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t){return t&&t._delegate?t._delegate:t}class No{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new AP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OP(e))try{this.getOrInitializeService({instanceIdentifier:Nr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Nr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Nr){return this.instances.has(e)}getOptions(e=Nr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:LP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Nr){return this.component?this.component.multipleInstances?e:Nr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LP(t){return t===Nr?void 0:t}function OP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const jP={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},BP=ae.INFO,UP={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},zP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=UP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class T1{constructor(e){this.name=e,this._logLevel=BP,this._logHandler=zP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const $P=(t,e)=>e.some(n=>t instanceof n);let Oy,Fy;function WP(){return Oy||(Oy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function HP(){return Fy||(Fy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const S1=new WeakMap,df=new WeakMap,x1=new WeakMap,qc=new WeakMap,Xd=new WeakMap;function KP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(or(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&S1.set(n,t)}).catch(()=>{}),Xd.set(e,t),e}function qP(t){if(df.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});df.set(t,e)}let pf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return df.get(t);if(e==="objectStoreNames")return t.objectStoreNames||x1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function GP(t){pf=t(pf)}function QP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gc(this),e,...n);return x1.set(r,e.sort?e.sort():[e]),or(r)}:HP().includes(t)?function(...e){return t.apply(Gc(this),e),or(S1.get(this))}:function(...e){return or(t.apply(Gc(this),e))}}function YP(t){return typeof t=="function"?QP(t):(t instanceof IDBTransaction&&qP(t),$P(t,WP())?new Proxy(t,pf):t)}function or(t){if(t instanceof IDBRequest)return KP(t);if(qc.has(t))return qc.get(t);const e=YP(t);return e!==t&&(qc.set(t,e),Xd.set(e,t)),e}const Gc=t=>Xd.get(t);function XP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=or(o);return r&&o.addEventListener("upgradeneeded",l=>{r(or(o.result),l.oldVersion,l.newVersion,or(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const JP=["get","getKey","getAll","getAllKeys","count"],ZP=["put","add","delete","clear"],Qc=new Map;function jy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qc.get(e))return Qc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ZP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||JP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Qc.set(e,s),s}GP(t=>({...t,get:(e,n,r)=>jy(e,n)||t.get(e,n,r),has:(e,n)=>!!jy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mf="@firebase/app",By="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn=new T1("@firebase/app"),nC="@firebase/app-compat",rC="@firebase/analytics-compat",iC="@firebase/analytics",sC="@firebase/app-check-compat",oC="@firebase/app-check",aC="@firebase/auth",lC="@firebase/auth-compat",uC="@firebase/database",cC="@firebase/data-connect",hC="@firebase/database-compat",fC="@firebase/functions",dC="@firebase/functions-compat",pC="@firebase/installations",mC="@firebase/installations-compat",gC="@firebase/messaging",yC="@firebase/messaging-compat",vC="@firebase/performance",_C="@firebase/performance-compat",wC="@firebase/remote-config",EC="@firebase/remote-config-compat",TC="@firebase/storage",SC="@firebase/storage-compat",xC="@firebase/firestore",AC="@firebase/vertexai-preview",IC="@firebase/firestore-compat",PC="firebase",CC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="[DEFAULT]",RC={[mf]:"fire-core",[nC]:"fire-core-compat",[iC]:"fire-analytics",[rC]:"fire-analytics-compat",[oC]:"fire-app-check",[sC]:"fire-app-check-compat",[aC]:"fire-auth",[lC]:"fire-auth-compat",[uC]:"fire-rtdb",[cC]:"fire-data-connect",[hC]:"fire-rtdb-compat",[fC]:"fire-fn",[dC]:"fire-fn-compat",[pC]:"fire-iid",[mC]:"fire-iid-compat",[gC]:"fire-fcm",[yC]:"fire-fcm-compat",[vC]:"fire-perf",[_C]:"fire-perf-compat",[wC]:"fire-rc",[EC]:"fire-rc-compat",[TC]:"fire-gcs",[SC]:"fire-gcs-compat",[xC]:"fire-fst",[IC]:"fire-fst-compat",[AC]:"fire-vertex","fire-js":"fire-js",[PC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gl=new Map,kC=new Map,yf=new Map;function Uy(t,e){try{t.container.addComponent(e)}catch(n){Nn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ql(t){const e=t.name;if(yf.has(e))return Nn.debug(`There were multiple attempts to register component ${e}.`),!1;yf.set(e,t);for(const n of Gl.values())Uy(n,t);for(const n of kC.values())Uy(n,t);return!0}function VC(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ar=new E1("app","Firebase",NC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new No("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=CC;function A1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ar.create("bad-app-name",{appName:String(i)});if(n||(n=w1()),!n)throw ar.create("no-options");const s=Gl.get(i);if(s){if(ff(n,s.options)&&ff(r,s.config))return s;throw ar.create("duplicate-app",{appName:i})}const o=new FP(i);for(const l of yf.values())o.addComponent(l);const a=new DC(n,r,o);return Gl.set(i,a),a}function bC(t=gf){const e=Gl.get(t);if(!e&&t===gf&&w1())return A1();if(!e)throw ar.create("no-app",{appName:t});return e}function Fi(t,e,n){var r;let i=(r=RC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nn.warn(a.join(" "));return}Ql(new No(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="firebase-heartbeat-database",OC=1,Do="firebase-heartbeat-store";let Yc=null;function I1(){return Yc||(Yc=XP(LC,OC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Do)}catch(n){console.warn(n)}}}}).catch(t=>{throw ar.create("idb-open",{originalErrorMessage:t.message})})),Yc}async function FC(t){try{const n=(await I1()).transaction(Do),r=await n.objectStore(Do).get(P1(t));return await n.done,r}catch(e){if(e instanceof ls)Nn.warn(e.message);else{const n=ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Nn.warn(n.message)}}}async function zy(t,e){try{const r=(await I1()).transaction(Do,"readwrite");await r.objectStore(Do).put(e,P1(t)),await r.done}catch(n){if(n instanceof ls)Nn.warn(n.message);else{const r=ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Nn.warn(r.message)}}}function P1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=1024,BC=30*24*60*60*1e3;class UC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new $C(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$y();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=BC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Nn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$y(),{heartbeatsToSend:r,unsentEntries:i}=zC(this._heartbeatsCache.heartbeats),s=ql(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Nn.warn(n),""}}}function $y(){return new Date().toISOString().substring(0,10)}function zC(t,e=jC){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Wy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class $C{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kP()?VP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return zy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Wy(t){return ql(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t){Ql(new No("platform-logger",e=>new eC(e),"PRIVATE")),Ql(new No("heartbeat",e=>new UC(e),"PRIVATE")),Fi(mf,By,t),Fi(mf,By,"esm2017"),Fi("fire-js","")}WC("");var HC="firebase",KC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fi(HC,KC,"app");var Hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var zr,C1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,y){function S(){}S.prototype=y.prototype,P.D=y.prototype,P.prototype=new S,P.prototype.constructor=P,P.C=function(I,C,N){for(var R=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)R[Y-2]=arguments[Y];return y.prototype[C].apply(I,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,y,S){S||(S=0);var I=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)I[C]=y.charCodeAt(S++)|y.charCodeAt(S++)<<8|y.charCodeAt(S++)<<16|y.charCodeAt(S++)<<24;else for(C=0;16>C;++C)I[C]=y[S++]|y[S++]<<8|y[S++]<<16|y[S++]<<24;y=P.g[0],S=P.g[1],C=P.g[2];var N=P.g[3],R=y+(N^S&(C^N))+I[0]+3614090360&4294967295;y=S+(R<<7&4294967295|R>>>25),R=N+(C^y&(S^C))+I[1]+3905402710&4294967295,N=y+(R<<12&4294967295|R>>>20),R=C+(S^N&(y^S))+I[2]+606105819&4294967295,C=N+(R<<17&4294967295|R>>>15),R=S+(y^C&(N^y))+I[3]+3250441966&4294967295,S=C+(R<<22&4294967295|R>>>10),R=y+(N^S&(C^N))+I[4]+4118548399&4294967295,y=S+(R<<7&4294967295|R>>>25),R=N+(C^y&(S^C))+I[5]+1200080426&4294967295,N=y+(R<<12&4294967295|R>>>20),R=C+(S^N&(y^S))+I[6]+2821735955&4294967295,C=N+(R<<17&4294967295|R>>>15),R=S+(y^C&(N^y))+I[7]+4249261313&4294967295,S=C+(R<<22&4294967295|R>>>10),R=y+(N^S&(C^N))+I[8]+1770035416&4294967295,y=S+(R<<7&4294967295|R>>>25),R=N+(C^y&(S^C))+I[9]+2336552879&4294967295,N=y+(R<<12&4294967295|R>>>20),R=C+(S^N&(y^S))+I[10]+4294925233&4294967295,C=N+(R<<17&4294967295|R>>>15),R=S+(y^C&(N^y))+I[11]+2304563134&4294967295,S=C+(R<<22&4294967295|R>>>10),R=y+(N^S&(C^N))+I[12]+1804603682&4294967295,y=S+(R<<7&4294967295|R>>>25),R=N+(C^y&(S^C))+I[13]+4254626195&4294967295,N=y+(R<<12&4294967295|R>>>20),R=C+(S^N&(y^S))+I[14]+2792965006&4294967295,C=N+(R<<17&4294967295|R>>>15),R=S+(y^C&(N^y))+I[15]+1236535329&4294967295,S=C+(R<<22&4294967295|R>>>10),R=y+(C^N&(S^C))+I[1]+4129170786&4294967295,y=S+(R<<5&4294967295|R>>>27),R=N+(S^C&(y^S))+I[6]+3225465664&4294967295,N=y+(R<<9&4294967295|R>>>23),R=C+(y^S&(N^y))+I[11]+643717713&4294967295,C=N+(R<<14&4294967295|R>>>18),R=S+(N^y&(C^N))+I[0]+3921069994&4294967295,S=C+(R<<20&4294967295|R>>>12),R=y+(C^N&(S^C))+I[5]+3593408605&4294967295,y=S+(R<<5&4294967295|R>>>27),R=N+(S^C&(y^S))+I[10]+38016083&4294967295,N=y+(R<<9&4294967295|R>>>23),R=C+(y^S&(N^y))+I[15]+3634488961&4294967295,C=N+(R<<14&4294967295|R>>>18),R=S+(N^y&(C^N))+I[4]+3889429448&4294967295,S=C+(R<<20&4294967295|R>>>12),R=y+(C^N&(S^C))+I[9]+568446438&4294967295,y=S+(R<<5&4294967295|R>>>27),R=N+(S^C&(y^S))+I[14]+3275163606&4294967295,N=y+(R<<9&4294967295|R>>>23),R=C+(y^S&(N^y))+I[3]+4107603335&4294967295,C=N+(R<<14&4294967295|R>>>18),R=S+(N^y&(C^N))+I[8]+1163531501&4294967295,S=C+(R<<20&4294967295|R>>>12),R=y+(C^N&(S^C))+I[13]+2850285829&4294967295,y=S+(R<<5&4294967295|R>>>27),R=N+(S^C&(y^S))+I[2]+4243563512&4294967295,N=y+(R<<9&4294967295|R>>>23),R=C+(y^S&(N^y))+I[7]+1735328473&4294967295,C=N+(R<<14&4294967295|R>>>18),R=S+(N^y&(C^N))+I[12]+2368359562&4294967295,S=C+(R<<20&4294967295|R>>>12),R=y+(S^C^N)+I[5]+4294588738&4294967295,y=S+(R<<4&4294967295|R>>>28),R=N+(y^S^C)+I[8]+2272392833&4294967295,N=y+(R<<11&4294967295|R>>>21),R=C+(N^y^S)+I[11]+1839030562&4294967295,C=N+(R<<16&4294967295|R>>>16),R=S+(C^N^y)+I[14]+4259657740&4294967295,S=C+(R<<23&4294967295|R>>>9),R=y+(S^C^N)+I[1]+2763975236&4294967295,y=S+(R<<4&4294967295|R>>>28),R=N+(y^S^C)+I[4]+1272893353&4294967295,N=y+(R<<11&4294967295|R>>>21),R=C+(N^y^S)+I[7]+4139469664&4294967295,C=N+(R<<16&4294967295|R>>>16),R=S+(C^N^y)+I[10]+3200236656&4294967295,S=C+(R<<23&4294967295|R>>>9),R=y+(S^C^N)+I[13]+681279174&4294967295,y=S+(R<<4&4294967295|R>>>28),R=N+(y^S^C)+I[0]+3936430074&4294967295,N=y+(R<<11&4294967295|R>>>21),R=C+(N^y^S)+I[3]+3572445317&4294967295,C=N+(R<<16&4294967295|R>>>16),R=S+(C^N^y)+I[6]+76029189&4294967295,S=C+(R<<23&4294967295|R>>>9),R=y+(S^C^N)+I[9]+3654602809&4294967295,y=S+(R<<4&4294967295|R>>>28),R=N+(y^S^C)+I[12]+3873151461&4294967295,N=y+(R<<11&4294967295|R>>>21),R=C+(N^y^S)+I[15]+530742520&4294967295,C=N+(R<<16&4294967295|R>>>16),R=S+(C^N^y)+I[2]+3299628645&4294967295,S=C+(R<<23&4294967295|R>>>9),R=y+(C^(S|~N))+I[0]+4096336452&4294967295,y=S+(R<<6&4294967295|R>>>26),R=N+(S^(y|~C))+I[7]+1126891415&4294967295,N=y+(R<<10&4294967295|R>>>22),R=C+(y^(N|~S))+I[14]+2878612391&4294967295,C=N+(R<<15&4294967295|R>>>17),R=S+(N^(C|~y))+I[5]+4237533241&4294967295,S=C+(R<<21&4294967295|R>>>11),R=y+(C^(S|~N))+I[12]+1700485571&4294967295,y=S+(R<<6&4294967295|R>>>26),R=N+(S^(y|~C))+I[3]+2399980690&4294967295,N=y+(R<<10&4294967295|R>>>22),R=C+(y^(N|~S))+I[10]+4293915773&4294967295,C=N+(R<<15&4294967295|R>>>17),R=S+(N^(C|~y))+I[1]+2240044497&4294967295,S=C+(R<<21&4294967295|R>>>11),R=y+(C^(S|~N))+I[8]+1873313359&4294967295,y=S+(R<<6&4294967295|R>>>26),R=N+(S^(y|~C))+I[15]+4264355552&4294967295,N=y+(R<<10&4294967295|R>>>22),R=C+(y^(N|~S))+I[6]+2734768916&4294967295,C=N+(R<<15&4294967295|R>>>17),R=S+(N^(C|~y))+I[13]+1309151649&4294967295,S=C+(R<<21&4294967295|R>>>11),R=y+(C^(S|~N))+I[4]+4149444226&4294967295,y=S+(R<<6&4294967295|R>>>26),R=N+(S^(y|~C))+I[11]+3174756917&4294967295,N=y+(R<<10&4294967295|R>>>22),R=C+(y^(N|~S))+I[2]+718787259&4294967295,C=N+(R<<15&4294967295|R>>>17),R=S+(N^(C|~y))+I[9]+3951481745&4294967295,P.g[0]=P.g[0]+y&4294967295,P.g[1]=P.g[1]+(C+(R<<21&4294967295|R>>>11))&4294967295,P.g[2]=P.g[2]+C&4294967295,P.g[3]=P.g[3]+N&4294967295}r.prototype.u=function(P,y){y===void 0&&(y=P.length);for(var S=y-this.blockSize,I=this.B,C=this.h,N=0;N<y;){if(C==0)for(;N<=S;)i(this,P,N),N+=this.blockSize;if(typeof P=="string"){for(;N<y;)if(I[C++]=P.charCodeAt(N++),C==this.blockSize){i(this,I),C=0;break}}else for(;N<y;)if(I[C++]=P[N++],C==this.blockSize){i(this,I),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var y=1;y<P.length-8;++y)P[y]=0;var S=8*this.o;for(y=P.length-8;y<P.length;++y)P[y]=S&255,S/=256;for(this.u(P),P=Array(16),y=S=0;4>y;++y)for(var I=0;32>I;I+=8)P[S++]=this.g[y]>>>I&255;return P};function s(P,y){var S=a;return Object.prototype.hasOwnProperty.call(S,P)?S[P]:S[P]=y(P)}function o(P,y){this.h=y;for(var S=[],I=!0,C=P.length-1;0<=C;C--){var N=P[C]|0;I&&N==y||(S[C]=N,I=!1)}this.g=S}var a={};function l(P){return-128<=P&&128>P?s(P,function(y){return new o([y|0],0>y?-1:0)}):new o([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return f;if(0>P)return A(c(-P));for(var y=[],S=1,I=0;P>=S;I++)y[I]=P/S|0,S*=4294967296;return new o(y,0)}function h(P,y){if(P.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(P.charAt(0)=="-")return A(h(P.substring(1),y));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(y,8)),I=f,C=0;C<P.length;C+=8){var N=Math.min(8,P.length-C),R=parseInt(P.substring(C,C+N),y);8>N?(N=c(Math.pow(y,N)),I=I.j(N).add(c(R))):(I=I.j(S),I=I.add(c(R)))}return I}var f=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-A(this).m();for(var P=0,y=1,S=0;S<this.g.length;S++){var I=this.i(S);P+=(0<=I?I:4294967296+I)*y,y*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(E(this))return"0";if(x(this))return"-"+A(this).toString(P);for(var y=c(Math.pow(P,6)),S=this,I="";;){var C=V(S,y).g;S=w(S,C.j(y));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(P);if(S=C,E(S))return N+I;for(;6>N.length;)N="0"+N;I=N+I}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function E(P){if(P.h!=0)return!1;for(var y=0;y<P.g.length;y++)if(P.g[y]!=0)return!1;return!0}function x(P){return P.h==-1}t.l=function(P){return P=w(this,P),x(P)?-1:E(P)?0:1};function A(P){for(var y=P.g.length,S=[],I=0;I<y;I++)S[I]=~P.g[I];return new o(S,~P.h).add(p)}t.abs=function(){return x(this)?A(this):this},t.add=function(P){for(var y=Math.max(this.g.length,P.g.length),S=[],I=0,C=0;C<=y;C++){var N=I+(this.i(C)&65535)+(P.i(C)&65535),R=(N>>>16)+(this.i(C)>>>16)+(P.i(C)>>>16);I=R>>>16,N&=65535,R&=65535,S[C]=R<<16|N}return new o(S,S[S.length-1]&-2147483648?-1:0)};function w(P,y){return P.add(A(y))}t.j=function(P){if(E(this)||E(P))return f;if(x(this))return x(P)?A(this).j(A(P)):A(A(this).j(P));if(x(P))return A(this.j(A(P)));if(0>this.l(g)&&0>P.l(g))return c(this.m()*P.m());for(var y=this.g.length+P.g.length,S=[],I=0;I<2*y;I++)S[I]=0;for(I=0;I<this.g.length;I++)for(var C=0;C<P.g.length;C++){var N=this.i(I)>>>16,R=this.i(I)&65535,Y=P.i(C)>>>16,ne=P.i(C)&65535;S[2*I+2*C]+=R*ne,v(S,2*I+2*C),S[2*I+2*C+1]+=N*ne,v(S,2*I+2*C+1),S[2*I+2*C+1]+=R*Y,v(S,2*I+2*C+1),S[2*I+2*C+2]+=N*Y,v(S,2*I+2*C+2)}for(I=0;I<y;I++)S[I]=S[2*I+1]<<16|S[2*I];for(I=y;I<2*y;I++)S[I]=0;return new o(S,0)};function v(P,y){for(;(P[y]&65535)!=P[y];)P[y+1]+=P[y]>>>16,P[y]&=65535,y++}function _(P,y){this.g=P,this.h=y}function V(P,y){if(E(y))throw Error("division by zero");if(E(P))return new _(f,f);if(x(P))return y=V(A(P),y),new _(A(y.g),A(y.h));if(x(y))return y=V(P,A(y)),new _(A(y.g),y.h);if(30<P.g.length){if(x(P)||x(y))throw Error("slowDivide_ only works with positive integers.");for(var S=p,I=y;0>=I.l(P);)S=b(S),I=b(I);var C=O(S,1),N=O(I,1);for(I=O(I,2),S=O(S,2);!E(I);){var R=N.add(I);0>=R.l(P)&&(C=C.add(S),N=R),I=O(I,1),S=O(S,1)}return y=w(P,C.j(y)),new _(C,y)}for(C=f;0<=P.l(y);){for(S=Math.max(1,Math.floor(P.m()/y.m())),I=Math.ceil(Math.log(S)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),N=c(S),R=N.j(y);x(R)||0<R.l(P);)S-=I,N=c(S),R=N.j(y);E(N)&&(N=p),C=C.add(N),P=w(P,R)}return new _(C,P)}t.A=function(P){return V(this,P).h},t.and=function(P){for(var y=Math.max(this.g.length,P.g.length),S=[],I=0;I<y;I++)S[I]=this.i(I)&P.i(I);return new o(S,this.h&P.h)},t.or=function(P){for(var y=Math.max(this.g.length,P.g.length),S=[],I=0;I<y;I++)S[I]=this.i(I)|P.i(I);return new o(S,this.h|P.h)},t.xor=function(P){for(var y=Math.max(this.g.length,P.g.length),S=[],I=0;I<y;I++)S[I]=this.i(I)^P.i(I);return new o(S,this.h^P.h)};function b(P){for(var y=P.g.length+1,S=[],I=0;I<y;I++)S[I]=P.i(I)<<1|P.i(I-1)>>>31;return new o(S,P.h)}function O(P,y){var S=y>>5;y%=32;for(var I=P.g.length-S,C=[],N=0;N<I;N++)C[N]=0<y?P.i(N+S)>>>y|P.i(N+S+1)<<32-y:P.i(N+S);return new o(C,P.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,C1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,zr=o}).apply(typeof Hy<"u"?Hy:typeof self<"u"?self:typeof window<"u"?window:{});var Ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R1,$s,k1,cl,vf,V1,N1,D1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,m){return u==Array.prototype||u==Object.prototype||(u[d]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ha=="object"&&Ha];for(var d=0;d<u.length;++d){var m=u[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,d){if(d)e:{var m=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var M=u[T];if(!(M in m))break e;m=m[M]}u=u[u.length-1],T=m[u],d=d(T),d!=T&&d!=null&&e(m,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var m=0,T=!1,M={next:function(){if(!T&&m<u.length){var L=m++;return{value:d(L,u[L]),done:!1}}return T=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function c(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,m){return u.call.apply(u.bind,arguments)}function f(u,d,m){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,T),u.apply(d,M)}}return function(){return u.apply(d,arguments)}}function p(u,d,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(u,d){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function E(u,d){function m(){}m.prototype=d.prototype,u.aa=d.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(T,M,L){for(var z=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)z[ge-2]=arguments[ge];return d.prototype[M].apply(T,z)}}function x(u){const d=u.length;if(0<d){const m=Array(d);for(let T=0;T<d;T++)m[T]=u[T];return m}return[]}function A(u,d){for(let m=1;m<arguments.length;m++){const T=arguments[m];if(l(T)){const M=u.length||0,L=T.length||0;u.length=M+L;for(let z=0;z<L;z++)u[M+z]=T[z]}else u.push(T)}}class w{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function v(u){return/^[\s\xa0]*$/.test(u)}function _(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function V(u){return V[" "](u),u}V[" "]=function(){};var b=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function O(u,d,m){for(const T in u)d.call(m,u[T],T,u)}function P(u,d){for(const m in u)d.call(void 0,u[m],m,u)}function y(u){const d={};for(const m in u)d[m]=u[m];return d}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(u,d){let m,T;for(let M=1;M<arguments.length;M++){T=arguments[M];for(m in T)u[m]=T[m];for(let L=0;L<S.length;L++)m=S[L],Object.prototype.hasOwnProperty.call(T,m)&&(u[m]=T[m])}}function C(u){var d=1;u=u.split(":");const m=[];for(;0<d&&u.length;)m.push(u.shift()),d--;return u.length&&m.push(u.join(":")),m}function N(u){a.setTimeout(()=>{throw u},0)}function R(){var u=K;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class Y{constructor(){this.h=this.g=null}add(d,m){const T=ne.get();T.set(d,m),this.h?this.h.next=T:this.g=T,this.h=T}}var ne=new w(()=>new ve,u=>u.reset());class ve{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let J,U=!1,K=new Y,G=()=>{const u=a.Promise.resolve(void 0);J=()=>{u.then(pe)}};var pe=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(m){N(m)}var d=ne;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}U=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,d),a.removeEventListener("test",m,d)}catch{}return u}();function qt(u,d){if(te.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(b){e:{try{V(d.nodeName);var M=!0;break e}catch{}M=!1}M||(d=null)}}else m=="mouseover"?d=u.fromElement:m=="mouseout"&&(d=u.toElement);this.relatedTarget=d,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Gt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&qt.aa.h.call(this)}}E(qt,te);var Gt={2:"touch",3:"pen",4:"mouse"};qt.prototype.h=function(){qt.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Qt="closure_listenable_"+(1e6*Math.random()|0),Yu=0;function $S(u,d,m,T,M){this.listener=u,this.proxy=null,this.src=d,this.type=m,this.capture=!!T,this.ha=M,this.key=++Yu,this.da=this.fa=!1}function ca(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ha(u){this.src=u,this.g={},this.h=0}ha.prototype.add=function(u,d,m,T,M){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var z=Ju(u,d,T,M);return-1<z?(d=u[z],m||(d.fa=!1)):(d=new $S(d,this.src,L,!!T,M),d.fa=m,u.push(d)),d};function Xu(u,d){var m=d.type;if(m in u.g){var T=u.g[m],M=Array.prototype.indexOf.call(T,d,void 0),L;(L=0<=M)&&Array.prototype.splice.call(T,M,1),L&&(ca(d),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Ju(u,d,m,T){for(var M=0;M<u.length;++M){var L=u[M];if(!L.da&&L.listener==d&&L.capture==!!m&&L.ha==T)return M}return-1}var Zu="closure_lm_"+(1e6*Math.random()|0),ec={};function vm(u,d,m,T,M){if(Array.isArray(d)){for(var L=0;L<d.length;L++)vm(u,d[L],m,T,M);return null}return m=Em(m),u&&u[Qt]?u.K(d,m,c(T)?!!T.capture:!1,M):WS(u,d,m,!1,T,M)}function WS(u,d,m,T,M,L){if(!d)throw Error("Invalid event type");var z=c(M)?!!M.capture:!!M,ge=nc(u);if(ge||(u[Zu]=ge=new ha(u)),m=ge.add(d,m,T,z,L),m.proxy)return m;if(T=HS(),m.proxy=T,T.src=u,T.listener=m,u.addEventListener)be||(M=z),M===void 0&&(M=!1),u.addEventListener(d.toString(),T,M);else if(u.attachEvent)u.attachEvent(wm(d.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function HS(){function u(m){return d.call(u.src,u.listener,m)}const d=KS;return u}function _m(u,d,m,T,M){if(Array.isArray(d))for(var L=0;L<d.length;L++)_m(u,d[L],m,T,M);else T=c(T)?!!T.capture:!!T,m=Em(m),u&&u[Qt]?(u=u.i,d=String(d).toString(),d in u.g&&(L=u.g[d],m=Ju(L,m,T,M),-1<m&&(ca(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete u.g[d],u.h--)))):u&&(u=nc(u))&&(d=u.g[d.toString()],u=-1,d&&(u=Ju(d,m,T,M)),(m=-1<u?d[u]:null)&&tc(m))}function tc(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[Qt])Xu(d.i,u);else{var m=u.type,T=u.proxy;d.removeEventListener?d.removeEventListener(m,T,u.capture):d.detachEvent?d.detachEvent(wm(m),T):d.addListener&&d.removeListener&&d.removeListener(T),(m=nc(d))?(Xu(m,u),m.h==0&&(m.src=null,d[Zu]=null)):ca(u)}}}function wm(u){return u in ec?ec[u]:ec[u]="on"+u}function KS(u,d){if(u.da)u=!0;else{d=new qt(d,this);var m=u.listener,T=u.ha||u.src;u.fa&&tc(u),u=m.call(T,d)}return u}function nc(u){return u=u[Zu],u instanceof ha?u:null}var rc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Em(u){return typeof u=="function"?u:(u[rc]||(u[rc]=function(d){return u.handleEvent(d)}),u[rc])}function it(){ue.call(this),this.i=new ha(this),this.M=this,this.F=null}E(it,ue),it.prototype[Qt]=!0,it.prototype.removeEventListener=function(u,d,m,T){_m(this,u,d,m,T)};function mt(u,d){var m,T=u.F;if(T)for(m=[];T;T=T.F)m.push(T);if(u=u.M,T=d.type||d,typeof d=="string")d=new te(d,u);else if(d instanceof te)d.target=d.target||u;else{var M=d;d=new te(T,u),I(d,M)}if(M=!0,m)for(var L=m.length-1;0<=L;L--){var z=d.g=m[L];M=fa(z,T,!0,d)&&M}if(z=d.g=u,M=fa(z,T,!0,d)&&M,M=fa(z,T,!1,d)&&M,m)for(L=0;L<m.length;L++)z=d.g=m[L],M=fa(z,T,!1,d)&&M}it.prototype.N=function(){if(it.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var m=u.g[d],T=0;T<m.length;T++)ca(m[T]);delete u.g[d],u.h--}}this.F=null},it.prototype.K=function(u,d,m,T){return this.i.add(String(u),d,!1,m,T)},it.prototype.L=function(u,d,m,T){return this.i.add(String(u),d,!0,m,T)};function fa(u,d,m,T){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var M=!0,L=0;L<d.length;++L){var z=d[L];if(z&&!z.da&&z.capture==m){var ge=z.listener,Qe=z.ha||z.src;z.fa&&Xu(u.i,z),M=ge.call(Qe,T)!==!1&&M}}return M&&!T.defaultPrevented}function Tm(u,d,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function Sm(u){u.g=Tm(()=>{u.g=null,u.i&&(u.i=!1,Sm(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class qS extends ue{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Sm(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gs(u){ue.call(this),this.h=u,this.g={}}E(gs,ue);var xm=[];function Am(u){O(u.g,function(d,m){this.g.hasOwnProperty(m)&&tc(d)},u),u.g={}}gs.prototype.N=function(){gs.aa.N.call(this),Am(this)},gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ic=a.JSON.stringify,GS=a.JSON.parse,QS=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function sc(){}sc.prototype.h=null;function Im(u){return u.h||(u.h=u.i())}function Pm(){}var ys={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function oc(){te.call(this,"d")}E(oc,te);function ac(){te.call(this,"c")}E(ac,te);var xr={},Cm=null;function da(){return Cm=Cm||new it}xr.La="serverreachability";function Rm(u){te.call(this,xr.La,u)}E(Rm,te);function vs(u){const d=da();mt(d,new Rm(d))}xr.STAT_EVENT="statevent";function km(u,d){te.call(this,xr.STAT_EVENT,u),this.stat=d}E(km,te);function gt(u){const d=da();mt(d,new km(d,u))}xr.Ma="timingevent";function Vm(u,d){te.call(this,xr.Ma,u),this.size=d}E(Vm,te);function _s(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function ws(){this.g=!0}ws.prototype.xa=function(){this.g=!1};function YS(u,d,m,T,M,L){u.info(function(){if(u.g)if(L)for(var z="",ge=L.split("&"),Qe=0;Qe<ge.length;Qe++){var ce=ge[Qe].split("=");if(1<ce.length){var st=ce[0];ce=ce[1];var ot=st.split("_");z=2<=ot.length&&ot[1]=="type"?z+(st+"="+ce+"&"):z+(st+"=redacted&")}}else z=null;else z=L;return"XMLHTTP REQ ("+T+") [attempt "+M+"]: "+d+`
`+m+`
`+z})}function XS(u,d,m,T,M,L,z){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+M+"]: "+d+`
`+m+`
`+L+" "+z})}function oi(u,d,m,T){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+ZS(u,m)+(T?" "+T:"")})}function JS(u,d){u.info(function(){return"TIMEOUT: "+d})}ws.prototype.info=function(){};function ZS(u,d){if(!u.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var T=m[u];if(!(2>T.length)){var M=T[1];if(Array.isArray(M)&&!(1>M.length)){var L=M[0];if(L!="noop"&&L!="stop"&&L!="close")for(var z=1;z<M.length;z++)M[z]=""}}}}return ic(m)}catch{return d}}var pa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},lc;function ma(){}E(ma,sc),ma.prototype.g=function(){return new XMLHttpRequest},ma.prototype.i=function(){return{}},lc=new ma;function Fn(u,d,m,T){this.j=u,this.i=d,this.l=m,this.R=T||1,this.U=new gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dm}function Dm(){this.i=null,this.g="",this.h=!1}var Mm={},uc={};function cc(u,d,m){u.L=1,u.v=_a(wn(d)),u.m=m,u.P=!0,bm(u,null)}function bm(u,d){u.F=Date.now(),ga(u),u.A=wn(u.v);var m=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),Qm(m.i,"t",T),u.C=0,m=u.j.J,u.h=new Dm,u.g=dg(u.j,m?d:null,!u.m),0<u.O&&(u.M=new qS(p(u.Y,u,u.g),u.O)),d=u.U,m=u.g,T=u.ca;var M="readystatechange";Array.isArray(M)||(M&&(xm[0]=M.toString()),M=xm);for(var L=0;L<M.length;L++){var z=vm(m,M[L],T||d.handleEvent,!1,d.h||d);if(!z)break;d.g[z.key]=z}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),vs(),YS(u.i,u.u,u.A,u.l,u.R,u.m)}Fn.prototype.ca=function(u){u=u.target;const d=this.M;d&&En(u)==3?d.j():this.Y(u)},Fn.prototype.Y=function(u){try{if(u==this.g)e:{const ot=En(this.g);var d=this.g.Ba();const ui=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||ng(this.g)))){this.J||ot!=4||d==7||(d==8||0>=ui?vs(3):vs(2)),hc(this);var m=this.g.Z();this.X=m;t:if(Lm(this)){var T=ng(this.g);u="";var M=T.length,L=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ar(this),Es(this);var z="";break t}this.h.i=new a.TextDecoder}for(d=0;d<M;d++)this.h.h=!0,u+=this.h.i.decode(T[d],{stream:!(L&&d==M-1)});T.length=0,this.h.g+=u,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=m==200,XS(this.i,this.u,this.A,this.l,this.R,ot,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,Qe=this.g;if((ge=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ge)){var ce=ge;break t}}ce=null}if(m=ce)oi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fc(this,m);else{this.o=!1,this.s=3,gt(12),Ar(this),Es(this);break e}}if(this.P){m=!0;let Yt;for(;!this.J&&this.C<z.length;)if(Yt=ex(this,z),Yt==uc){ot==4&&(this.s=4,gt(14),m=!1),oi(this.i,this.l,null,"[Incomplete Response]");break}else if(Yt==Mm){this.s=4,gt(15),oi(this.i,this.l,z,"[Invalid Chunk]"),m=!1;break}else oi(this.i,this.l,Yt,null),fc(this,Yt);if(Lm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||z.length!=0||this.h.h||(this.s=1,gt(16),m=!1),this.o=this.o&&m,!m)oi(this.i,this.l,z,"[Invalid Chunked Response]"),Ar(this),Es(this);else if(0<z.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),vc(st),st.M=!0,gt(11))}}else oi(this.i,this.l,z,null),fc(this,z);ot==4&&Ar(this),this.o&&!this.J&&(ot==4?ug(this.j,this):(this.o=!1,ga(this)))}else yx(this.g),m==400&&0<z.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),Ar(this),Es(this)}}}catch{}finally{}};function Lm(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ex(u,d){var m=u.C,T=d.indexOf(`
`,m);return T==-1?uc:(m=Number(d.substring(m,T)),isNaN(m)?Mm:(T+=1,T+m>d.length?uc:(d=d.slice(T,T+m),u.C=T+m,d)))}Fn.prototype.cancel=function(){this.J=!0,Ar(this)};function ga(u){u.S=Date.now()+u.I,Om(u,u.I)}function Om(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=_s(p(u.ba,u),d)}function hc(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Fn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(JS(this.i,this.A),this.L!=2&&(vs(),gt(17)),Ar(this),this.s=2,Es(this)):Om(this,this.S-u)};function Es(u){u.j.G==0||u.J||ug(u.j,u)}function Ar(u){hc(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,Am(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function fc(u,d){try{var m=u.j;if(m.G!=0&&(m.g==u||dc(m.h,u))){if(!u.K&&dc(m.h,u)&&m.G==3){try{var T=m.Da.g.parse(d)}catch{T=null}if(Array.isArray(T)&&T.length==3){var M=T;if(M[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Aa(m),Sa(m);else break e;yc(m),gt(18)}}else m.za=M[1],0<m.za-m.T&&37500>M[2]&&m.F&&m.v==0&&!m.C&&(m.C=_s(p(m.Za,m),6e3));if(1>=Bm(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Pr(m,11)}else if((u.K||m.g==u)&&Aa(m),!v(d))for(M=m.Da.g.parse(d),d=0;d<M.length;d++){let ce=M[d];if(m.T=ce[0],ce=ce[1],m.G==2)if(ce[0]=="c"){m.K=ce[1],m.ia=ce[2];const st=ce[3];st!=null&&(m.la=st,m.j.info("VER="+m.la));const ot=ce[4];ot!=null&&(m.Aa=ot,m.j.info("SVER="+m.Aa));const ui=ce[5];ui!=null&&typeof ui=="number"&&0<ui&&(T=1.5*ui,m.L=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const Yt=u.g;if(Yt){const Pa=Yt.g?Yt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pa){var L=T.h;L.g||Pa.indexOf("spdy")==-1&&Pa.indexOf("quic")==-1&&Pa.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(pc(L,L.h),L.h=null))}if(T.D){const _c=Yt.g?Yt.g.getResponseHeader("X-HTTP-Session-Id"):null;_c&&(T.ya=_c,_e(T.I,T.D,_c))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),T=m;var z=u;if(T.qa=fg(T,T.J?T.ia:null,T.W),z.K){Um(T.h,z);var ge=z,Qe=T.L;Qe&&(ge.I=Qe),ge.B&&(hc(ge),ga(ge)),T.g=z}else ag(T);0<m.i.length&&xa(m)}else ce[0]!="stop"&&ce[0]!="close"||Pr(m,7);else m.G==3&&(ce[0]=="stop"||ce[0]=="close"?ce[0]=="stop"?Pr(m,7):gc(m):ce[0]!="noop"&&m.l&&m.l.ta(ce),m.v=0)}}vs(4)}catch{}}var tx=class{constructor(u,d){this.g=u,this.map=d}};function Fm(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jm(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Bm(u){return u.h?1:u.g?u.g.size:0}function dc(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function pc(u,d){u.g?u.g.add(d):u.h=d}function Um(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}Fm.prototype.cancel=function(){if(this.i=zm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function zm(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const m of u.g.values())d=d.concat(m.D);return d}return x(u.i)}function nx(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var d=[],m=u.length,T=0;T<m;T++)d.push(u[T]);return d}d=[],m=0;for(T in u)d[m++]=u[T];return d}function rx(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var d=[];u=u.length;for(var m=0;m<u;m++)d.push(m);return d}d=[],m=0;for(const T in u)d[m++]=T;return d}}}function $m(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var m=rx(u),T=nx(u),M=T.length,L=0;L<M;L++)d.call(void 0,T[L],m&&m[L],u)}var Wm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ix(u,d){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var T=u[m].indexOf("="),M=null;if(0<=T){var L=u[m].substring(0,T);M=u[m].substring(T+1)}else L=u[m];d(L,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function Ir(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Ir){this.h=u.h,ya(this,u.j),this.o=u.o,this.g=u.g,va(this,u.s),this.l=u.l;var d=u.i,m=new xs;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Hm(this,m),this.m=u.m}else u&&(d=String(u).match(Wm))?(this.h=!1,ya(this,d[1]||"",!0),this.o=Ts(d[2]||""),this.g=Ts(d[3]||"",!0),va(this,d[4]),this.l=Ts(d[5]||"",!0),Hm(this,d[6]||"",!0),this.m=Ts(d[7]||"")):(this.h=!1,this.i=new xs(null,this.h))}Ir.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Ss(d,Km,!0),":");var m=this.g;return(m||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Ss(d,Km,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Ss(m,m.charAt(0)=="/"?ax:ox,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Ss(m,ux)),u.join("")};function wn(u){return new Ir(u)}function ya(u,d,m){u.j=m?Ts(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function va(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function Hm(u,d,m){d instanceof xs?(u.i=d,cx(u.i,u.h)):(m||(d=Ss(d,lx)),u.i=new xs(d,u.h))}function _e(u,d,m){u.i.set(d,m)}function _a(u){return _e(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ts(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Ss(u,d,m){return typeof u=="string"?(u=encodeURI(u).replace(d,sx),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function sx(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Km=/[#\/\?@]/g,ox=/[#\?:]/g,ax=/[#\?]/g,lx=/[#\?@]/g,ux=/#/g;function xs(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function jn(u){u.g||(u.g=new Map,u.h=0,u.i&&ix(u.i,function(d,m){u.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=xs.prototype,t.add=function(u,d){jn(this),this.i=null,u=ai(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(d),this.h+=1,this};function qm(u,d){jn(u),d=ai(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Gm(u,d){return jn(u),d=ai(u,d),u.g.has(d)}t.forEach=function(u,d){jn(this),this.g.forEach(function(m,T){m.forEach(function(M){u.call(d,M,T,this)},this)},this)},t.na=function(){jn(this);const u=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let T=0;T<d.length;T++){const M=u[T];for(let L=0;L<M.length;L++)m.push(d[T])}return m},t.V=function(u){jn(this);let d=[];if(typeof u=="string")Gm(this,u)&&(d=d.concat(this.g.get(ai(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)d=d.concat(u[m])}return d},t.set=function(u,d){return jn(this),this.i=null,u=ai(this,u),Gm(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function Qm(u,d,m){qm(u,d),0<m.length&&(u.i=null,u.g.set(ai(u,d),x(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var T=d[m];const L=encodeURIComponent(String(T)),z=this.V(T);for(T=0;T<z.length;T++){var M=L;z[T]!==""&&(M+="="+encodeURIComponent(String(z[T]))),u.push(M)}}return this.i=u.join("&")};function ai(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function cx(u,d){d&&!u.j&&(jn(u),u.i=null,u.g.forEach(function(m,T){var M=T.toLowerCase();T!=M&&(qm(this,T),Qm(this,M,m))},u)),u.j=d}function hx(u,d){const m=new ws;if(a.Image){const T=new Image;T.onload=g(Bn,m,"TestLoadImage: loaded",!0,d,T),T.onerror=g(Bn,m,"TestLoadImage: error",!1,d,T),T.onabort=g(Bn,m,"TestLoadImage: abort",!1,d,T),T.ontimeout=g(Bn,m,"TestLoadImage: timeout",!1,d,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else d(!1)}function fx(u,d){const m=new ws,T=new AbortController,M=setTimeout(()=>{T.abort(),Bn(m,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:T.signal}).then(L=>{clearTimeout(M),L.ok?Bn(m,"TestPingServer: ok",!0,d):Bn(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(M),Bn(m,"TestPingServer: error",!1,d)})}function Bn(u,d,m,T,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),T(m)}catch{}}function dx(){this.g=new QS}function px(u,d,m){const T=m||"";try{$m(u,function(M,L){let z=M;c(M)&&(z=ic(M)),d.push(T+L+"="+encodeURIComponent(z))})}catch(M){throw d.push(T+"type="+encodeURIComponent("_badmap")),M}}function wa(u){this.l=u.Ub||null,this.j=u.eb||!1}E(wa,sc),wa.prototype.g=function(){return new Ea(this.l,this.j)},wa.prototype.i=function(u){return function(){return u}}({});function Ea(u,d){it.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Ea,it),t=Ea.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Is(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,As(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Is(this)),this.g&&(this.readyState=3,Is(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ym(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ym(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?As(this):Is(this),this.readyState==3&&Ym(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,As(this))},t.Qa=function(u){this.g&&(this.response=u,As(this))},t.ga=function(){this.g&&As(this)};function As(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Is(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=d.next();return u.join(`\r
`)};function Is(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ea.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Xm(u){let d="";return O(u,function(m,T){d+=T,d+=":",d+=m,d+=`\r
`}),d}function mc(u,d,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=Xm(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):_e(u,d,m))}function ke(u){it.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(ke,it);var mx=/^https?$/i,gx=["POST","PUT"];t=ke.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():lc.g(),this.v=this.o?Im(this.o):Im(lc),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(L){Jm(this,L);return}if(u=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var M in T)m.set(M,T[M]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const L of T.keys())m.set(L,T.get(L));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),M=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(gx,d,void 0))||T||M||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,z]of m)this.g.setRequestHeader(L,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tg(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){Jm(this,L)}};function Jm(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,Zm(u),Ta(u)}function Zm(u){u.A||(u.A=!0,mt(u,"complete"),mt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,mt(this,"complete"),mt(this,"abort"),Ta(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ta(this,!0)),ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?eg(this):this.bb())},t.bb=function(){eg(this)};function eg(u){if(u.h&&typeof o<"u"&&(!u.v[1]||En(u)!=4||u.Z()!=2)){if(u.u&&En(u)==4)Tm(u.Ea,0,u);else if(mt(u,"readystatechange"),En(u)==4){u.h=!1;try{const z=u.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var T;if(T=z===0){var M=String(u.D).match(Wm)[1]||null;!M&&a.self&&a.self.location&&(M=a.self.location.protocol.slice(0,-1)),T=!mx.test(M?M.toLowerCase():"")}m=T}if(m)mt(u,"complete"),mt(u,"success");else{u.m=6;try{var L=2<En(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",Zm(u)}}finally{Ta(u)}}}}function Ta(u,d){if(u.g){tg(u);const m=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||mt(u,"ready");try{m.onreadystatechange=T}catch{}}}function tg(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function En(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),GS(d)}};function ng(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function yx(u){const d={};u=(u.g&&2<=En(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(v(u[T]))continue;var m=C(u[T]);const M=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=d[M]||[];d[M]=L,L.push(m)}P(d,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ps(u,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||d}function rg(u){this.Aa=0,this.i=[],this.j=new ws,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ps("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ps("baseRetryDelayMs",5e3,u),this.cb=Ps("retryDelaySeedMs",1e4,u),this.Wa=Ps("forwardChannelMaxRetries",2,u),this.wa=Ps("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Fm(u&&u.concurrentRequestLimit),this.Da=new dx,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=rg.prototype,t.la=8,t.G=1,t.connect=function(u,d,m,T){gt(0),this.W=u,this.H=d||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.I=fg(this,null,this.W),xa(this)};function gc(u){if(ig(u),u.G==3){var d=u.U++,m=wn(u.I);if(_e(m,"SID",u.K),_e(m,"RID",d),_e(m,"TYPE","terminate"),Cs(u,m),d=new Fn(u,u.j,d),d.L=2,d.v=_a(wn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=d.v,m=!0),m||(d.g=dg(d.j,null),d.g.ea(d.v)),d.F=Date.now(),ga(d)}hg(u)}function Sa(u){u.g&&(vc(u),u.g.cancel(),u.g=null)}function ig(u){Sa(u),u.u&&(a.clearTimeout(u.u),u.u=null),Aa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function xa(u){if(!jm(u.h)&&!u.s){u.s=!0;var d=u.Ga;J||G(),U||(J(),U=!0),K.add(d,u),u.B=0}}function vx(u,d){return Bm(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=_s(p(u.Ga,u,d),cg(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const M=new Fn(this,this.j,u);let L=this.o;if(this.S&&(L?(L=y(L),I(L,this.S)):L=this.S),this.m!==null||this.O||(M.H=L,L=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(d+=T,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=og(this,M,d),m=wn(this.I),_e(m,"RID",u),_e(m,"CVER",22),this.D&&_e(m,"X-HTTP-Session-Id",this.D),Cs(this,m),L&&(this.O?d="headers="+encodeURIComponent(String(Xm(L)))+"&"+d:this.m&&mc(m,this.m,L)),pc(this.h,M),this.Ua&&_e(m,"TYPE","init"),this.P?(_e(m,"$req",d),_e(m,"SID","null"),M.T=!0,cc(M,m,null)):cc(M,m,d),this.G=2}}else this.G==3&&(u?sg(this,u):this.i.length==0||jm(this.h)||sg(this))};function sg(u,d){var m;d?m=d.l:m=u.U++;const T=wn(u.I);_e(T,"SID",u.K),_e(T,"RID",m),_e(T,"AID",u.T),Cs(u,T),u.m&&u.o&&mc(T,u.m,u.o),m=new Fn(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),d&&(u.i=d.D.concat(u.i)),d=og(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),pc(u.h,m),cc(m,T,d)}function Cs(u,d){u.H&&O(u.H,function(m,T){_e(d,T,m)}),u.l&&$m({},function(m,T){_e(d,T,m)})}function og(u,d,m){m=Math.min(u.i.length,m);var T=u.l?p(u.l.Na,u.l,u):null;e:{var M=u.i;let L=-1;for(;;){const z=["count="+m];L==-1?0<m?(L=M[0].g,z.push("ofs="+L)):L=0:z.push("ofs="+L);let ge=!0;for(let Qe=0;Qe<m;Qe++){let ce=M[Qe].g;const st=M[Qe].map;if(ce-=L,0>ce)L=Math.max(0,M[Qe].g-100),ge=!1;else try{px(st,z,"req"+ce+"_")}catch{T&&T(st)}}if(ge){T=z.join("&");break e}}}return u=u.i.splice(0,m),d.D=u,T}function ag(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;J||G(),U||(J(),U=!0),K.add(d,u),u.v=0}}function yc(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=_s(p(u.Fa,u),cg(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,lg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=_s(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),Sa(this),lg(this))};function vc(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function lg(u){u.g=new Fn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=wn(u.qa);_e(d,"RID","rpc"),_e(d,"SID",u.K),_e(d,"AID",u.T),_e(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&_e(d,"TO",u.ja),_e(d,"TYPE","xmlhttp"),Cs(u,d),u.m&&u.o&&mc(d,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=_a(wn(d)),m.m=null,m.P=!0,bm(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Sa(this),yc(this),gt(19))};function Aa(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function ug(u,d){var m=null;if(u.g==d){Aa(u),vc(u),u.g=null;var T=2}else if(dc(u.h,d))m=d.D,Um(u.h,d),T=1;else return;if(u.G!=0){if(d.o)if(T==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var M=u.B;T=da(),mt(T,new Vm(T,m)),xa(u)}else ag(u);else if(M=d.s,M==3||M==0&&0<d.X||!(T==1&&vx(u,d)||T==2&&yc(u)))switch(m&&0<m.length&&(d=u.h,d.i=d.i.concat(m)),M){case 1:Pr(u,5);break;case 4:Pr(u,10);break;case 3:Pr(u,6);break;default:Pr(u,2)}}}function cg(u,d){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*d}function Pr(u,d){if(u.j.info("Error code "+d),d==2){var m=p(u.fb,u),T=u.Xa;const M=!T;T=new Ir(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ya(T,"https"),_a(T),M?hx(T.toString(),m):fx(T.toString(),m)}else gt(2);u.G=0,u.l&&u.l.sa(d),hg(u),ig(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function hg(u){if(u.G=0,u.ka=[],u.l){const d=zm(u.h);(d.length!=0||u.i.length!=0)&&(A(u.ka,d),A(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function fg(u,d,m){var T=m instanceof Ir?wn(m):new Ir(m);if(T.g!="")d&&(T.g=d+"."+T.g),va(T,T.s);else{var M=a.location;T=M.protocol,d=d?d+"."+M.hostname:M.hostname,M=+M.port;var L=new Ir(null);T&&ya(L,T),d&&(L.g=d),M&&va(L,M),m&&(L.l=m),T=L}return m=u.D,d=u.ya,m&&d&&_e(T,m,d),_e(T,"VER",u.la),Cs(u,T),T}function dg(u,d,m){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new ke(new wa({eb:m})):new ke(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pg(){}t=pg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ia(){}Ia.prototype.g=function(u,d){return new Rt(u,d)};function Rt(u,d){it.call(this),this.g=new rg(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!v(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!v(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new li(this)}E(Rt,it),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){gc(this.g)},Rt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=ic(u),u=m);d.i.push(new tx(d.Ya++,u)),d.G==3&&xa(d)},Rt.prototype.N=function(){this.g.l=null,delete this.j,gc(this.g),delete this.g,Rt.aa.N.call(this)};function mg(u){oc.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const m in d){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}E(mg,oc);function gg(){ac.call(this),this.status=1}E(gg,ac);function li(u){this.g=u}E(li,pg),li.prototype.ua=function(){mt(this.g,"a")},li.prototype.ta=function(u){mt(this.g,new mg(u))},li.prototype.sa=function(u){mt(this.g,new gg)},li.prototype.ra=function(){mt(this.g,"b")},Ia.prototype.createWebChannel=Ia.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,D1=function(){return new Ia},N1=function(){return da()},V1=xr,vf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pa.NO_ERROR=0,pa.TIMEOUT=8,pa.HTTP_ERROR=6,cl=pa,Nm.COMPLETE="complete",k1=Nm,Pm.EventType=ys,ys.OPEN="a",ys.CLOSE="b",ys.ERROR="c",ys.MESSAGE="d",it.prototype.listen=it.prototype.K,$s=Pm,ke.prototype.listenOnce=ke.prototype.L,ke.prototype.getLastError=ke.prototype.Ka,ke.prototype.getLastErrorCode=ke.prototype.Ba,ke.prototype.getStatus=ke.prototype.Z,ke.prototype.getResponseJson=ke.prototype.Oa,ke.prototype.getResponseText=ke.prototype.oa,ke.prototype.send=ke.prototype.ea,ke.prototype.setWithCredentials=ke.prototype.Ha,R1=ke}).apply(typeof Ha<"u"?Ha:typeof self<"u"?self:typeof window<"u"?window:{});const Ky="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let us="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new T1("@firebase/firestore");function Os(){return Yr.logLevel}function W(t,...e){if(Yr.logLevel<=ae.DEBUG){const n=e.map(Jd);Yr.debug(`Firestore (${us}): ${t}`,...n)}}function Dn(t,...e){if(Yr.logLevel<=ae.ERROR){const n=e.map(Jd);Yr.error(`Firestore (${us}): ${t}`,...n)}}function Gi(t,...e){if(Yr.logLevel<=ae.WARN){const n=e.map(Jd);Yr.warn(`Firestore (${us}): ${t}`,...n)}}function Jd(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${us}) INTERNAL ASSERTION FAILED: `+t;throw Dn(e),new Error(e)}function de(t,e){t||X()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends ls{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class GC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QC{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new lr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new lr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new lr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string"),new M1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new ct(e)}}class YC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class XC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new YC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class JC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ZC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){de(this.o===void 0);const r=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.R=n.token,new JC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=eR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function he(t,e){return t<e?-1:t>e?1:0}function Qi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new He(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new He(0,0))}static max(){return new Z(new He(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Mo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Mo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Se extends Mo{construct(e,n,r){return new Se(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Se(n)}static emptyPath(){return new Se([])}}const tR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends Mo{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return tR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new H(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new H(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new H(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new H(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(Se.fromString(e))}static fromName(e){return new q(Se.fromString(e).popFirst(5))}static empty(){return new q(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Se.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new Se(e.slice()))}}function nR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new He(n+1,0):new He(n,r));return new fr(i,q.empty(),e)}function rR(t){return new fr(t.readTime,t.key,-1)}class fr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new fr(Z.min(),q.empty(),-1)}static max(){return new fr(Z.max(),q.empty(),-1)}}function iR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:he(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zo(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==sR)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(i=>i?F.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new F((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new F((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function aR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ea(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Zd.oe=-1;function ku(t){return t==null}function Yl(t){return t===0&&1/t==-1/0}function lR(t){return typeof t=="number"&&Number.isInteger(t)&&!Yl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ii(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function L1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ka(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ka(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ka(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ka(this.root,e,this.comparator,!0)}}class Ka{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Je.RED,this.left=i??Je.EMPTY,this.right=s??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Je(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Je.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gy(this.data.getIterator())}getIteratorFrom(e){return new Gy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tt(this.comparator);return n.data=e,n}}class Gy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Nt([])}unionWith(e){let n=new tt(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Nt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new O1("Invalid base64 string: "+s):s}}(e);return new rt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const uR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(t){if(de(!!t),typeof t=="string"){let e=0;const n=uR.exec(t);if(de(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xr(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function tp(t){const e=t.mapValue.fields.__previous_value__;return ep(e)?tp(e):e}function bo(t){const e=dr(t.mapValue.fields.__local_write_time__.timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Lo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Lo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Lo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa={mapValue:{}};function Jr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ep(t)?4:fR(t)?9007199254740991:hR(t)?10:11:X()}function vn(t,e){if(t===e)return!0;const n=Jr(t);if(n!==Jr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bo(t).isEqual(bo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=dr(i.timestampValue),a=dr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Xr(i.bytesValue).isEqual(Xr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Oe(i.geoPointValue.latitude)===Oe(s.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Oe(i.integerValue)===Oe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Oe(i.doubleValue),a=Oe(s.doubleValue);return o===a?Yl(o)===Yl(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Qi(t.arrayValue.values||[],e.arrayValue.values||[],vn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(qy(o)!==qy(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!vn(o[l],a[l])))return!1;return!0}(t,e);default:return X()}}function Oo(t,e){return(t.values||[]).find(n=>vn(n,e))!==void 0}function Yi(t,e){if(t===e)return 0;const n=Jr(t),r=Jr(e);if(n!==r)return he(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return he(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Oe(s.integerValue||s.doubleValue),l=Oe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Qy(t.timestampValue,e.timestampValue);case 4:return Qy(bo(t),bo(e));case 5:return he(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Xr(s),l=Xr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=he(a[c],l[c]);if(h!==0)return h}return he(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=he(Oe(s.latitude),Oe(o.latitude));return a!==0?a:he(Oe(s.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Yy(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const f=s.fields||{},p=o.fields||{},g=(a=f.value)===null||a===void 0?void 0:a.arrayValue,E=(l=p.value)===null||l===void 0?void 0:l.arrayValue,x=he(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:Yy(g,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===qa.mapValue&&o===qa.mapValue)return 0;if(s===qa.mapValue)return 1;if(o===qa.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=he(l[f],h[f]);if(p!==0)return p;const g=Yi(a[l[f]],c[h[f]]);if(g!==0)return g}return he(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X()}}function Qy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return he(t,e);const n=dr(t),r=dr(e),i=he(n.seconds,r.seconds);return i!==0?i:he(n.nanos,r.nanos)}function Yy(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Yi(n[i],r[i]);if(s)return s}return he(n.length,r.length)}function Xi(t){return _f(t)}function _f(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=dr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=_f(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${_f(n.fields[o])}`;return i+"}"}(t.mapValue):X()}function wf(t){return!!t&&"integerValue"in t}function np(t){return!!t&&"arrayValue"in t}function Xy(t){return!!t&&"nullValue"in t}function Jy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hl(t){return!!t&&"mapValue"in t}function hR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ro(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ii(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ro(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ro(t.arrayValue.values[n]);return e}return Object.assign({},t)}function fR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.value=e}static empty(){return new St({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ro(n)}setAll(e){let n=Ze.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=ro(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());hl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];hl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ii(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new St(ro(this.value))}}function F1(t){const e=[];return ii(t.fields,(n,r)=>{const i=new Ze([n]);if(hl(r)){const s=F1(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Nt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ft(e,0,Z.min(),Z.min(),Z.min(),St.empty(),0)}static newFoundDocument(e,n,r,i){return new ft(e,1,n,Z.min(),r,i,0)}static newNoDocument(e,n){return new ft(e,2,n,Z.min(),Z.min(),St.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,Z.min(),Z.min(),St.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n){this.position=e,this.inclusive=n}}function Zy(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=Yi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ev(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n="asc"){this.field=e,this.dir=n}}function dR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{}class $e extends j1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mR(e,n,r):n==="array-contains"?new vR(e,r):n==="in"?new _R(e,r):n==="not-in"?new wR(e,r):n==="array-contains-any"?new ER(e,r):new $e(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new gR(e,r):new yR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Yi(n,this.value)):n!==null&&Jr(this.value)===Jr(n)&&this.matchesComparison(Yi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends j1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new _n(e,n)}matches(e){return B1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function B1(t){return t.op==="and"}function U1(t){return pR(t)&&B1(t)}function pR(t){for(const e of t.filters)if(e instanceof _n)return!1;return!0}function Ef(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+Xi(t.value);if(U1(t))return t.filters.map(e=>Ef(e)).join(",");{const e=t.filters.map(n=>Ef(n)).join(",");return`${t.op}(${e})`}}function z1(t,e){return t instanceof $e?function(r,i){return i instanceof $e&&r.op===i.op&&r.field.isEqual(i.field)&&vn(r.value,i.value)}(t,e):t instanceof _n?function(r,i){return i instanceof _n&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&z1(o,i.filters[a]),!0):!1}(t,e):void X()}function $1(t){return t instanceof $e?function(n){return`${n.field.canonicalString()} ${n.op} ${Xi(n.value)}`}(t):t instanceof _n?function(n){return n.op.toString()+" {"+n.getFilters().map($1).join(" ,")+"}"}(t):"Filter"}class mR extends $e{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class gR extends $e{constructor(e,n){super(e,"in",n),this.keys=W1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class yR extends $e{constructor(e,n){super(e,"not-in",n),this.keys=W1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function W1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class vR extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return np(n)&&Oo(n.arrayValue,this.value)}}class _R extends $e{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oo(this.value.arrayValue,n)}}class wR extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Oo(this.value.arrayValue,n)}}class ER extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!np(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Oo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function tv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new TR(t,e,n,r,i,s,o)}function rp(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ef(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ku(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Xi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Xi(r)).join(",")),e.ue=n}return e.ue}function ip(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!z1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ev(t.startAt,e.startAt)&&ev(t.endAt,e.endAt)}function Tf(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function SR(t,e,n,r,i,s,o,a){return new Vu(t,e,n,r,i,s,o,a)}function sp(t){return new Vu(t)}function nv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function xR(t){return t.collectionGroup!==null}function io(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tt(Ze.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Jl(s,r))}),n.has(Ze.keyField().canonicalString())||e.ce.push(new Jl(Ze.keyField(),r))}return e.ce}function fn(t){const e=ee(t);return e.le||(e.le=AR(e,io(t))),e.le}function AR(t,e){if(t.limitType==="F")return tv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Jl(i.field,s)});const n=t.endAt?new Xl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xl(t.startAt.position,t.startAt.inclusive):null;return tv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Sf(t,e,n){return new Vu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nu(t,e){return ip(fn(t),fn(e))&&t.limitType===e.limitType}function H1(t){return`${rp(fn(t))}|lt:${t.limitType}`}function hi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>$1(i)).join(", ")}]`),ku(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Xi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Xi(i)).join(",")),`Target(${r})`}(fn(t))}; limitType=${t.limitType})`}function Du(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of io(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=Zy(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,io(r),i)||r.endAt&&!function(o,a,l){const c=Zy(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,io(r),i))}(t,e)}function IR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function K1(t){return(e,n)=>{let r=!1;for(const i of io(t)){const s=PR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function PR(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Yi(l,c):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ii(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return L1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR=new Re(q.comparator);function Mn(){return CR}const q1=new Re(q.comparator);function Ws(...t){let e=q1;for(const n of t)e=e.insert(n.key,n);return e}function G1(t){let e=q1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Or(){return so()}function Q1(){return so()}function so(){return new cs(t=>t.toString(),(t,e)=>t.isEqual(e))}const RR=new Re(q.comparator),kR=new tt(q.comparator);function se(...t){let e=kR;for(const n of t)e=e.add(n);return e}const VR=new tt(he);function NR(){return VR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yl(e)?"-0":e}}function Y1(t){return{integerValue:""+t}}function DR(t,e){return lR(e)?Y1(e):op(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(){this._=void 0}}function MR(t,e,n){return t instanceof Zl?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ep(s)&&(s=tp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Fo?J1(t,e):t instanceof jo?Z1(t,e):function(i,s){const o=X1(i,s),a=rv(o)+rv(i.Pe);return wf(o)&&wf(i.Pe)?Y1(a):op(i.serializer,a)}(t,e)}function bR(t,e,n){return t instanceof Fo?J1(t,e):t instanceof jo?Z1(t,e):n}function X1(t,e){return t instanceof eu?function(r){return wf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Zl extends Mu{}class Fo extends Mu{constructor(e){super(),this.elements=e}}function J1(t,e){const n=eE(e);for(const r of t.elements)n.some(i=>vn(i,r))||n.push(r);return{arrayValue:{values:n}}}class jo extends Mu{constructor(e){super(),this.elements=e}}function Z1(t,e){let n=eE(e);for(const r of t.elements)n=n.filter(i=>!vn(i,r));return{arrayValue:{values:n}}}class eu extends Mu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function rv(t){return Oe(t.integerValue||t.doubleValue)}function eE(t){return np(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function LR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Fo&&i instanceof Fo||r instanceof jo&&i instanceof jo?Qi(r.elements,i.elements,vn):r instanceof eu&&i instanceof eu?vn(r.Pe,i.Pe):r instanceof Zl&&i instanceof Zl}(t.transform,e.transform)}class OR{constructor(e,n){this.version=e,this.transformResults=n}}class sn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new sn}static exists(e){return new sn(void 0,e)}static updateTime(e){return new sn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bu{}function tE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ap(t.key,sn.none()):new ta(t.key,t.data,sn.none());{const n=t.data,r=St.empty();let i=new tt(Ze.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Tr(t.key,r,new Nt(i.toArray()),sn.none())}}function FR(t,e,n){t instanceof ta?function(i,s,o){const a=i.value.clone(),l=sv(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Tr?function(i,s,o){if(!fl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=sv(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(nE(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function oo(t,e,n,r){return t instanceof ta?function(s,o,a,l){if(!fl(s.precondition,o))return a;const c=s.value.clone(),h=ov(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Tr?function(s,o,a,l){if(!fl(s.precondition,o))return a;const c=ov(s.fieldTransforms,l,o),h=o.data;return h.setAll(nE(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return fl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function jR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=X1(r.transform,i||null);s!=null&&(n===null&&(n=St.empty()),n.set(r.field,s))}return n||null}function iv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qi(r,i,(s,o)=>LR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ta extends bu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Tr extends bu{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function nE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function sv(t,e,n){const r=new Map;de(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,bR(o,a,n[i]))}return r}function ov(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,MR(s,o,e))}return r}class ap extends bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BR extends bu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&FR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=oo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=oo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Q1();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=tE(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Qi(this.mutations,e.mutations,(n,r)=>iv(n,r))&&Qi(this.baseMutations,e.baseMutations,(n,r)=>iv(n,r))}}class lp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){de(e.mutations.length===r.length);let i=function(){return RR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new lp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,oe;function WR(t){switch(t){default:return X();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function rE(t){if(t===void 0)return Dn("GRPC error has no .code"),j.UNKNOWN;switch(t){case je.OK:return j.OK;case je.CANCELLED:return j.CANCELLED;case je.UNKNOWN:return j.UNKNOWN;case je.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case je.INTERNAL:return j.INTERNAL;case je.UNAVAILABLE:return j.UNAVAILABLE;case je.UNAUTHENTICATED:return j.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case je.NOT_FOUND:return j.NOT_FOUND;case je.ALREADY_EXISTS:return j.ALREADY_EXISTS;case je.PERMISSION_DENIED:return j.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case je.ABORTED:return j.ABORTED;case je.OUT_OF_RANGE:return j.OUT_OF_RANGE;case je.UNIMPLEMENTED:return j.UNIMPLEMENTED;case je.DATA_LOSS:return j.DATA_LOSS;default:return X()}}(oe=je||(je={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=new zr([4294967295,4294967295],0);function av(t){const e=HR().encode(t),n=new C1;return n.update(e),new Uint8Array(n.digest())}function lv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zr([n,r],0),new zr([i,s],0)]}class up{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hs(`Invalid padding: ${n}`);if(r<0)throw new Hs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=zr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(zr.fromNumber(r)));return i.compare(KR)===1&&(i=new zr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=av(e),[r,i]=lv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new up(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=av(e),[r,i]=lv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Hs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,na.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Lu(Z.min(),i,new Re(he),Mn(),se())}}class na{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new na(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class iE{constructor(e,n){this.targetId=e,this.me=n}}class sE{constructor(e,n,r=rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class uv{constructor(){this.fe=0,this.ge=hv(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),r=se();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X()}}),new na(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=hv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class qR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mn(),this.qe=cv(),this.Qe=new Re(he)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Tf(s))if(r===0){const o=new q(s.path);this.Ue(n,o,ft.newNoDocument(o,Z.min()))}else de(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Xr(r).toUint8Array()}catch(l){if(l instanceof O1)return Gi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new up(o,i,s)}catch(l){return Gi(l instanceof Hs?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Tf(a.target)){const l=new q(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ft.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Lu(e,n,this.Qe,this.ke,r);return this.ke=Mn(),this.qe=cv(),this.Qe=new Re(he),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new uv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tt(he),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new uv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function cv(){return new Re(q.comparator)}function hv(){return new Re(q.comparator)}const GR={asc:"ASCENDING",desc:"DESCENDING"},QR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YR={and:"AND",or:"OR"};class XR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xf(t,e){return t.useProto3Json||ku(e)?e:{value:e}}function tu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function JR(t,e){return tu(t,e.toTimestamp())}function dn(t){return de(!!t),Z.fromTimestamp(function(n){const r=dr(n);return new He(r.seconds,r.nanos)}(t))}function cp(t,e){return Af(t,e).canonicalString()}function Af(t,e){const n=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function aE(t){const e=Se.fromString(t);return de(fE(e)),e}function If(t,e){return cp(t.databaseId,e.path)}function Xc(t,e){const n=aE(e);if(n.get(1)!==t.databaseId.projectId)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(uE(n))}function lE(t,e){return cp(t.databaseId,e)}function ZR(t){const e=aE(t);return e.length===4?Se.emptyPath():uE(e)}function Pf(t){return new Se(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uE(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function fv(t,e,n){return{name:If(t,e),fields:n.value.mapValue.fields}}function ek(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(de(h===void 0||typeof h=="string"),rt.fromBase64String(h||"")):(de(h===void 0||h instanceof Buffer||h instanceof Uint8Array),rt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?j.UNKNOWN:rE(c.code);return new H(h,c.message||"")}(o);n=new sE(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xc(t,r.document.name),s=dn(r.document.updateTime),o=r.document.createTime?dn(r.document.createTime):Z.min(),a=new St({mapValue:{fields:r.document.fields}}),l=ft.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new dl(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xc(t,r.document),s=r.readTime?dn(r.readTime):Z.min(),o=ft.newNoDocument(i,s),a=r.removedTargetIds||[];n=new dl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xc(t,r.document),s=r.removedTargetIds||[];n=new dl([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new $R(i,s),a=r.targetId;n=new iE(a,o)}}return n}function tk(t,e){let n;if(e instanceof ta)n={update:fv(t,e.key,e.value)};else if(e instanceof ap)n={delete:If(t,e.key)};else if(e instanceof Tr)n={update:fv(t,e.key,e.data),updateMask:ck(e.fieldMask)};else{if(!(e instanceof BR))return X();n={verify:If(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Zl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Fo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof jo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof eu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:JR(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(t,e.precondition)),n}function nk(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?dn(i.updateTime):dn(s);return o.isEqual(Z.min())&&(o=dn(s)),new OR(o,i.transformResults||[])}(n,e))):[]}function rk(t,e){return{documents:[lE(t,e.path)]}}function ik(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lE(t,i);const s=function(c){if(c.length!==0)return hE(_n.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:fi(p.field),direction:ak(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=xf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function sk(t){let e=ZR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){de(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=cE(f);return p instanceof _n&&U1(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(E){return new Jl(di(E.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,ku(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,g=f.values||[];return new Xl(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new Xl(g,p)}(n.endAt)),SR(e,i,o,s,a,"F",l,c)}function ok(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=di(n.unaryFilter.field);return $e.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=di(n.unaryFilter.field);return $e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=di(n.unaryFilter.field);return $e.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=di(n.unaryFilter.field);return $e.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return $e.create(di(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _n.create(n.compositeFilter.filters.map(r=>cE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function ak(t){return GR[t]}function lk(t){return QR[t]}function uk(t){return YR[t]}function fi(t){return{fieldPath:t.canonicalString()}}function di(t){return Ze.fromServerFormat(t.fieldPath)}function hE(t){return t instanceof $e?function(n){if(n.op==="=="){if(Jy(n.value))return{unaryFilter:{field:fi(n.field),op:"IS_NAN"}};if(Xy(n.value))return{unaryFilter:{field:fi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Jy(n.value))return{unaryFilter:{field:fi(n.field),op:"IS_NOT_NAN"}};if(Xy(n.value))return{unaryFilter:{field:fi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fi(n.field),op:lk(n.op),value:n.value}}}(t):t instanceof _n?function(n){const r=n.getFilters().map(i=>hE(i));return r.length===1?r[0]:{compositeFilter:{op:uk(n.op),filters:r}}}(t):X()}function ck(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e,n,r,i,s=Z.min(),o=Z.min(),a=rt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Yn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e){this.ct=e}}function fk(t){const e=sk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.un=new pk}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(fr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(fr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class pk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new tt(Se.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tt(Se.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ji(0)}static kn(){return new Ji(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(){this.changes=new cs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&oo(r.mutation,i,Nt.empty(),He.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const i=Or();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ws();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Or();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Mn();const o=so(),a=function(){return so()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Tr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),oo(h.mutation,c,h.mutation.getFieldMask(),He.now())):o.set(c.key,Nt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new gk(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=so();let i=new Re((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Nt.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(i.get(a.batchId)||se()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=Q1();h.forEach(p=>{if(!s.has(p)){const g=tE(n.get(p),r.get(p));g!==null&&f.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):xR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):F.resolve(Or());let a=-1,l=s;return o.next(c=>F.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,se())).next(h=>({batchId:a,changes:G1(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=Ws();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ws();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const c=function(f,p){return new Vu(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,ft.newInvalidDocument(h)))});let a=Ws();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&oo(h.mutation,c,Nt.empty(),He.now()),Du(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:dn(i.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:fk(i.bundledQuery),readTime:dn(i.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.overlays=new Re(q.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Or();return F.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const i=Or(),s=n.length+1,o=new q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return F.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Re((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Or(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Or(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return F.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new zR(n,r));let s=this.Ir.get(n);s===void 0&&(s=se(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this.Tr=new tt(Ke.Er),this.dr=new tt(Ke.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ke(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ke(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new q(new Se([])),r=new Ke(n,e),i=new Ke(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new q(new Se([])),r=new Ke(n,e),i=new Ke(n,e+1);let s=se();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Ke(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ke{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return q.comparator(e.key,n.key)||he(e.wr,n.wr)}static Ar(e,n){return he(e.wr,n.wr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new tt(Ke.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new UR(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Ke(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ke(n,0),i=new Ke(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(he);return n.forEach(i=>{const s=new Ke(i,0),o=new Ke(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const o=new Ke(new q(s),0);let a=new tt(he);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,i=>{const s=new Ke(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ke(n,0),i=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e){this.Mr=e,this.docs=function(){return new Re(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=Mn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ft.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Mn();const o=n.path,a=new q(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||iR(rR(h),r)<=0||(i.has(h.key)||Du(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,r,i){X()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Sk(this)}getSize(e){return F.resolve(this.size)}}class Sk extends mk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.persistence=e,this.Nr=new cs(n=>rp(n),ip),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hp,this.targetCount=0,this.kr=Ji.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ji(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Zd(0),this.Kr=!1,this.Kr=!0,this.$r=new wk,this.referenceDelegate=e(this),this.Ur=new xk(this),this.indexManager=new dk,this.remoteDocumentCache=function(i){return new Tk(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new hk(n),this.Gr=new vk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _k,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Ek(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const i=new Ik(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Ik extends oR{constructor(e){super(),this.currentSequenceNumber=e}}class fp{constructor(e){this.persistence=e,this.Jr=new hp,this.Yr=null}static Zr(e){return new fp(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const i=q.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=se(),i=se();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new dp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return RP()?8:aR(PP())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Pk;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Os()<=ae.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",hi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Os()<=ae.DEBUG&&W("QueryEngine","Query:",hi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Os()<=ae.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",hi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fn(n))):F.resolve())}Yi(e,n){if(nv(n))return F.resolve(null);let r=fn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Sf(n,null,"F"),r=fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=se(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Sf(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return nv(n)||i.isEqual(Z.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?F.resolve(null):(Os()<=ae.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),hi(n)),this.rs(e,o,n,nR(i,-1)).next(a=>a))})}ts(e,n){let r=new tt(K1(e));return n.forEach((i,s)=>{Du(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Os()<=ae.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",hi(n)),this.Ji.getDocumentsMatchingQuery(e,n,fr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Re(he),this._s=new cs(s=>rp(s),ip),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function kk(t,e,n,r){return new Rk(t,e,n,r)}async function dE(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=se();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Vk(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,p=f.keys();let g=F.resolve();return p.forEach(E=>{g=g.next(()=>h.getEntry(l,E)).next(x=>{const A=c.docVersions.get(E);de(A!==null),x.version.compareTo(A)<0&&(f.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),h.addEntry(x)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=se();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function pE(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Nk(t,e){const n=ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,f)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(rt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(f,g),function(x,A,w){return x.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let l=Mn(),c=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Dk(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(Z.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function Dk(t,e,n){let r=se(),i=se();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Mn();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Z.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function Mk(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bk(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Yn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Cf(t,e,n){const r=ee(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ea(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function dv(t,e,n){const r=ee(t);let i=Z.min(),s=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=ee(l),p=f._s.get(h);return p!==void 0?F.resolve(f.os.get(p)):f.Ur.getTargetData(c,h)}(r,o,fn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Z.min(),n?s:se())).next(a=>(Lk(r,IR(e),a),{documents:a,Ts:s})))}function Lk(t,e,n){let r=t.us.get(e)||Z.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class pv{constructor(){this.activeTargetIds=NR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ok{constructor(){this.so=new pv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new pv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga=null;function Jc(){return Ga===null?Ga=function(){return 268435456+Math.round(2147483648*Math.random())}():Ga++,"0x"+Ga.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class Uk extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Jc(),l=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(W("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Gi("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+us}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=jk[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Jc();return new Promise((o,a)=>{const l=new R1;l.setWithCredentials(!0),l.listenOnce(k1.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case cl.NO_ERROR:const h=l.getResponseJson();W(ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case cl.TIMEOUT:W(ut,`RPC '${e}' ${s} timed out`),a(new H(j.DEADLINE_EXCEEDED,"Request time out"));break;case cl.HTTP_ERROR:const f=l.getStatus();if(W(ut,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const E=function(A){const w=A.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(w)>=0?w:j.UNKNOWN}(g.status);a(new H(E,g.message))}else a(new H(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new H(j.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{W(ut,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);W(ut,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Jc(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=D1(),a=N1(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");W(ut,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,g=!1;const E=new Bk({Io:A=>{g?W(ut,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(p||(W(ut,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),W(ut,`RPC '${e}' stream ${i} sending:`,A),f.send(A))},To:()=>f.close()}),x=(A,w,v)=>{A.listen(w,_=>{try{v(_)}catch(V){setTimeout(()=>{throw V},0)}})};return x(f,$s.EventType.OPEN,()=>{g||(W(ut,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),x(f,$s.EventType.CLOSE,()=>{g||(g=!0,W(ut,`RPC '${e}' stream ${i} transport closed`),E.So())}),x(f,$s.EventType.ERROR,A=>{g||(g=!0,Gi(ut,`RPC '${e}' stream ${i} transport errored:`,A),E.So(new H(j.UNAVAILABLE,"The operation could not be completed")))}),x(f,$s.EventType.MESSAGE,A=>{var w;if(!g){const v=A.data[0];de(!!v);const _=v,V=_.error||((w=_[0])===null||w===void 0?void 0:w.error);if(V){W(ut,`RPC '${e}' stream ${i} received error:`,V);const b=V.status;let O=function(S){const I=je[S];if(I!==void 0)return rE(I)}(b),P=V.message;O===void 0&&(O=j.INTERNAL,P="Unknown error status: "+b+" with message "+V.message),g=!0,E.So(new H(O,P)),f.close()}else W(ut,`RPC '${e}' stream ${i} received:`,v),E.bo(v)}}),x(a,V1.STAT_EVENT,A=>{A.stat===vf.PROXY?W(ut,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===vf.NOPROXY&&W(ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function Zc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t){return new XR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new mE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Dn(n.toString()),Dn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new H(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class zk extends gE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=ek(this.serializer,e),r=function(s){if(!("targetChange"in s))return Z.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?dn(o.readTime):Z.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Pf(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Tf(l)?{documents:rk(s,l)}:{query:ik(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=oE(s,o.resumeToken);const c=xf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Z.min())>0){a.readTime=tu(s,o.snapshotVersion.toTimestamp());const c=xf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=ok(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Pf(this.serializer),n.removeTarget=e,this.a_(n)}}class $k extends gE{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return de(!!e.streamToken),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=nk(e.writeResults,e.commitTime),r=dn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Pf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>tk(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Af(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new H(j.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Af(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(j.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Hk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Dn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{si(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ee(l);c.L_.add(4),await ra(c),c.q_.set("Unknown"),c.L_.delete(4),await Fu(c)}(this))})}),this.q_=new Hk(r,i)}}async function Fu(t){if(si(t))for(const e of t.B_)await e(!0)}async function ra(t){for(const e of t.B_)await e(!1)}function yE(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),yp(n)?gp(n):hs(n).r_()&&mp(n,e))}function pp(t,e){const n=ee(t),r=hs(n);n.N_.delete(e),r.r_()&&vE(n,e),n.N_.size===0&&(r.r_()?r.o_():si(n)&&n.q_.set("Unknown"))}function mp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hs(t).A_(e)}function vE(t,e){t.Q_.xe(e),hs(t).R_(e)}function gp(t){t.Q_=new qR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),hs(t).start(),t.q_.v_()}function yp(t){return si(t)&&!hs(t).n_()&&t.N_.size>0}function si(t){return ee(t).L_.size===0}function _E(t){t.Q_=void 0}async function qk(t){t.q_.set("Online")}async function Gk(t){t.N_.forEach((e,n)=>{mp(t,e)})}async function Qk(t,e){_E(t),yp(t)?(t.q_.M_(e),gp(t)):t.q_.set("Unknown")}async function Yk(t,e,n){if(t.q_.set("Online"),e instanceof sE&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nu(t,r)}else if(e instanceof dl?t.Q_.Ke(e):e instanceof iE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const r=await pE(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(rt.EMPTY_BYTE_STRING,h.snapshotVersion)),vE(s,l);const f=new Yn(h.target,l,c,h.sequenceNumber);mp(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await nu(t,r)}}async function nu(t,e,n){if(!ea(e))throw e;t.L_.add(1),await ra(t),t.q_.set("Offline"),n||(n=()=>pE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Fu(t)})}function wE(t,e){return e().catch(n=>nu(t,n,e))}async function ju(t){const e=ee(t),n=pr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Xk(e);)try{const i=await Mk(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,Jk(e,i)}catch(i){await nu(e,i)}EE(e)&&TE(e)}function Xk(t){return si(t)&&t.O_.length<10}function Jk(t,e){t.O_.push(e);const n=pr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function EE(t){return si(t)&&!pr(t).n_()&&t.O_.length>0}function TE(t){pr(t).start()}async function Zk(t){pr(t).p_()}async function eV(t){const e=pr(t);for(const n of t.O_)e.m_(n.mutations)}async function tV(t,e,n){const r=t.O_.shift(),i=lp.from(r,e,n);await wE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ju(t)}async function nV(t,e){e&&pr(t).V_&&await async function(r,i){if(function(o){return WR(o)&&o!==j.ABORTED}(i.code)){const s=r.O_.shift();pr(r).s_(),await wE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await ju(r)}}(t,e),EE(t)&&TE(t)}async function gv(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=si(n);n.L_.add(3),await ra(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Fu(n)}async function rV(t,e){const n=ee(t);e?(n.L_.delete(2),await Fu(n)):e||(n.L_.add(2),await ra(n),n.q_.set("Unknown"))}function hs(t){return t.K_||(t.K_=function(n,r,i){const s=ee(n);return s.w_(),new zk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:qk.bind(null,t),Ro:Gk.bind(null,t),mo:Qk.bind(null,t),d_:Yk.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),yp(t)?gp(t):t.q_.set("Unknown")):(await t.K_.stop(),_E(t))})),t.K_}function pr(t){return t.U_||(t.U_=function(n,r,i){const s=ee(n);return s.w_(),new $k(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Zk.bind(null,t),mo:nV.bind(null,t),f_:eV.bind(null,t),g_:tV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ju(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new lr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new vp(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _p(t,e){if(Dn("AsyncQueue",`${e}: ${t}`),ea(t))return new H(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Ws(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new ji(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ji)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ji;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(){this.W_=new Re(q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Zi{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Zi(e,n,ji.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Nu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class sV{constructor(){this.queries=vv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ee(n),s=i.queries;i.queries=vv(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new H(j.ABORTED,"Firestore shutting down"))}}function vv(){return new cs(t=>H1(t),Nu)}async function SE(t,e){const n=ee(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new iV,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=_p(o,`Initialization of query '${hi(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&wp(n)}async function xE(t,e){const n=ee(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function oV(t,e){const n=ee(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&wp(n)}function aV(t,e,n){const r=ee(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function wp(t){t.Y_.forEach(e=>{e.next()})}var Rf,_v;(_v=Rf||(Rf={})).ea="default",_v.Cache="cache";class AE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Zi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Zi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Rf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.key=e}}class PE{constructor(e){this.key=e}}class lV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=K1(e),this.Ra=new ji(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new yv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),g=Du(this.query,f)?f:null,E=!!p&&this.mutatedKeys.has(p.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let A=!1;p&&g?p.data.isEqual(g.data)?E!==x&&(r.track({type:3,doc:g}),A=!0):this.ga(p,g)||(r.track({type:2,doc:g}),A=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),A=!0):p&&!g&&(r.track({type:1,doc:p}),A=!0,(l||c)&&(a=!0)),A&&(g?(o=o.add(g),s=x?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(g,E){const x=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return x(g)-x(E)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new Zi(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new yv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new PE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new IE(r))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Zi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class uV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class cV{constructor(e){this.key=e,this.va=!1}}class hV{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new cs(a=>H1(a),Nu),this.Ma=new Map,this.xa=new Set,this.Oa=new Re(q.comparator),this.Na=new Map,this.La=new hp,this.Ba={},this.ka=new Map,this.qa=Ji.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function fV(t,e,n=!0){const r=DE(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await CE(r,e,n,!0),i}async function dV(t,e){const n=DE(t);await CE(n,e,!0,!1)}async function CE(t,e,n,r){const i=await bk(t.localStore,fn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await pV(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&yE(t.remoteStore,i),a}async function pV(t,e,n,r,i){t.Ka=(f,p,g)=>async function(x,A,w,v){let _=A.view.ma(w);_.ns&&(_=await dv(x.localStore,A.query,!1).then(({documents:P})=>A.view.ma(P,_)));const V=v&&v.targetChanges.get(A.targetId),b=v&&v.targetMismatches.get(A.targetId)!=null,O=A.view.applyChanges(_,x.isPrimaryClient,V,b);return Ev(x,A.targetId,O.wa),O.snapshot}(t,f,p,g);const s=await dv(t.localStore,e,!0),o=new lV(e,s.Ts),a=o.ma(s.documents),l=na.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Ev(t,n,c.wa);const h=new uV(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function mV(t,e,n){const r=ee(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Nu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Cf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&pp(r.remoteStore,i.targetId),kf(r,i.targetId)}).catch(Zo)):(kf(r,i.targetId),await Cf(r.localStore,i.targetId,!0))}async function gV(t,e){const n=ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pp(n.remoteStore,r.targetId))}async function yV(t,e,n){const r=xV(t);try{const i=await function(o,a){const l=ee(o),c=He.now(),h=a.reduce((g,E)=>g.add(E.key),se());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=Mn(),x=se();return l.cs.getEntries(g,h).next(A=>{E=A,E.forEach((w,v)=>{v.isValidDocument()||(x=x.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,E)).next(A=>{f=A;const w=[];for(const v of a){const _=jR(v,f.get(v.key).overlayedDocument);_!=null&&w.push(new Tr(v.key,_,F1(_.value.mapValue),sn.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,a)}).next(A=>{p=A;const w=A.applyToLocalDocumentSet(f,x);return l.documentOverlayCache.saveOverlays(g,A.batchId,w)})}).then(()=>({batchId:p.batchId,changes:G1(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new Re(he)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await ia(r,i.changes),await ju(r.remoteStore)}catch(i){const s=_p(i,"Failed to persist write");n.reject(s)}}async function RE(t,e){const n=ee(t);try{const r=await Nk(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?de(o.va):i.removedDocuments.size>0&&(de(o.va),o.va=!1))}),await ia(n,r,e)}catch(r){await Zo(r)}}function wv(t,e,n){const r=ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ee(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const p of f.j_)p.Z_(a)&&(c=!0)}),c&&wp(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vV(t,e,n){const r=ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Re(q.comparator);o=o.insert(s,ft.newNoDocument(s,Z.min()));const a=se().add(s),l=new Lu(Z.min(),new Map,new Re(he),o,a);await RE(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Ep(r)}else await Cf(r.localStore,e,!1).then(()=>kf(r,e,n)).catch(Zo)}async function _V(t,e){const n=ee(t),r=e.batch.batchId;try{const i=await Vk(n.localStore,e);VE(n,r,null),kE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ia(n,i)}catch(i){await Zo(i)}}async function wV(t,e,n){const r=ee(t);try{const i=await function(o,a){const l=ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(de(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);VE(r,e,n),kE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ia(r,i)}catch(i){await Zo(i)}}function kE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function VE(t,e,n){const r=ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function kf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||NE(t,r)})}function NE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(pp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ep(t))}function Ev(t,e,n){for(const r of n)r instanceof IE?(t.La.addReference(r.key,e),EV(t,r)):r instanceof PE?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||NE(t,r.key)):X()}function EV(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ep(t))}function Ep(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new q(Se.fromString(e)),r=t.qa.next();t.Na.set(r,new cV(n)),t.Oa=t.Oa.insert(n,r),yE(t.remoteStore,new Yn(fn(sp(n.path)),r,"TargetPurposeLimboResolution",Zd.oe))}}async function ia(t,e,n){const r=ee(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=dp.Wi(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=ee(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(c,p=>F.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>F.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!ea(f))throw f;W("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=h.os.get(p),E=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(p,x)}}}(r.localStore,s))}async function TV(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await dE(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new H(j.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ia(n,r.hs)}}function SV(t,e){const n=ee(t),r=n.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function DE(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vV.bind(null,e),e.Ca.d_=oV.bind(null,e.eventManager),e.Ca.$a=aV.bind(null,e.eventManager),e}function xV(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_V.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wV.bind(null,e),e}class ru{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ou(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return kk(this.persistence,new Ck,e.initialUser,this.serializer)}Ga(e){return new Ak(fp.Zr,this.serializer)}Wa(e){return new Ok}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ru.provider={build:()=>new ru};class Vf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=TV.bind(null,this.syncEngine),await rV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sV}()}createDatastore(e){const n=Ou(e.databaseInfo.databaseId),r=function(s){return new Uk(s)}(e.databaseInfo);return function(s,o,a,l){return new Wk(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Kk(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>wv(this.syncEngine,n,0),function(){return mv.D()?new mv:new Fk}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const f=new hV(i,s,o,a,l,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ee(i);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await ra(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Vf.provider={build:()=>new Vf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Dn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ct.UNAUTHENTICATED,this.clientId=b1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_p(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function eh(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await dE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Tv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await IV(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>gv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>gv(e.remoteStore,i)),t._onlineComponents=e}async function IV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await eh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Gi("Error using user provided cache. Falling back to memory cache: "+n),await eh(t,new ru)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await eh(t,new ru);return t._offlineComponents}async function bE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Tv(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Tv(t,new Vf))),t._onlineComponents}function PV(t){return bE(t).then(e=>e.syncEngine)}async function Nf(t){const e=await bE(t),n=e.eventManager;return n.onListen=fV.bind(null,e.syncEngine),n.onUnlisten=mV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=dV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gV.bind(null,e.syncEngine),n}function CV(t,e,n={}){const r=new lr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new ME({next:p=>{h.Za(),o.enqueueAndForget(()=>xE(s,f)),p.fromCache&&l.source==="server"?c.reject(new H(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new AE(a,h,{includeMetadataChanges:!0,_a:!0});return SE(s,f)}(await Nf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(t,e,n){if(!n)throw new H(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function RV(t,e,n,r){if(e===!0&&r===!0)throw new H(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xv(t){if(!q.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Av(t){if(q.isDocumentKey(t))throw new H(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Tp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function pn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tp(t);throw new H(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new H(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new H(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qC;switch(r.type){case"firstParty":return new XC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Sv.get(n);r&&(W("ComponentProvider","Removing Datastore"),Sv.delete(n),r.terminate())}(this),Promise.resolve()}}function kV(t,e,n,r={}){var i;const s=(t=pn(t,Bu))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Gi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ct.MOCK_USER;else{a=IP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new H(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ct(c)}t._authCredentials=new GC(new M1(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new sa(this.firestore,e,this._query)}}class Mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}}class ur extends sa{constructor(e,n,r){super(e,n,sp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new q(e))}withConverter(e){return new ur(this.firestore,e,this._path)}}function Uu(t,e,...n){if(t=Vn(t),OE("collection","path",e),t instanceof Bu){const r=Se.fromString(e,...n);return Av(r),new ur(t,null,r)}{if(!(t instanceof Mt||t instanceof ur))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return Av(r),new ur(t.firestore,null,r)}}function Sp(t,e,...n){if(t=Vn(t),arguments.length===1&&(e=b1.newId()),OE("doc","path",e),t instanceof Bu){const r=Se.fromString(e,...n);return xv(r),new Mt(t,null,new q(r))}{if(!(t instanceof Mt||t instanceof ur))throw new H(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Se.fromString(e,...n));return xv(r),new Mt(t.firestore,t instanceof ur?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new mE(this,"async_queue_retry"),this.Vu=()=>{const r=Zc();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Zc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Zc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new lr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ea(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Dn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=vp.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Cv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Zr extends Bu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Pv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Pv(e),this._firestoreClient=void 0,await e}}}function VV(t,e){const n=typeof t=="object"?t:bC(),r=typeof t=="string"?t:"(default)",i=VC(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=xP("firestore");s&&kV(i,...s)}return i}function xp(t){if(t._terminated)throw new H(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||NV(t),t._firestoreClient}function NV(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new cR(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,LE(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new AV(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e){this._byteString=e}static fromBase64String(e){try{return new es(rt.fromBase64String(e))}catch(n){throw new H(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new es(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV=/^__.*__$/;class MV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ta(e,this.data,n,this.fieldTransforms)}}class FE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Tr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function jE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class Cp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Cp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return iu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(jE(this.Cu)&&DV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class bV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ou(e)}Qu(e,n,r,i=!1){return new Cp({Cu:e,methodName:n,qu:r,path:Ze.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function BE(t){const e=t._freezeSettings(),n=Ou(t._databaseId);return new bV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function LV(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Rp("Data must be an object, but it was:",o,r);const a=UE(r,o);let l,c;if(s.merge)l=new Nt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=Df(e,f,n);if(!o.contains(p))throw new H(j.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);$E(h,p)||h.push(p)}l=new Nt(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new MV(new St(a),l,c)}class $u extends Ap{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $u}}function OV(t,e,n,r){const i=t.Qu(1,e,n);Rp("Data must be an object, but it was:",i,r);const s=[],o=St.empty();ii(r,(l,c)=>{const h=kp(e,l,n);c=Vn(c);const f=i.Nu(h);if(c instanceof $u)s.push(h);else{const p=Wu(c,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new Nt(s);return new FE(o,a,i.fieldTransforms)}function FV(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Df(e,r,n)],l=[i];if(s.length%2!=0)throw new H(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Df(e,s[p])),l.push(s[p+1]);const c=[],h=St.empty();for(let p=a.length-1;p>=0;--p)if(!$E(c,a[p])){const g=a[p];let E=l[p];E=Vn(E);const x=o.Nu(g);if(E instanceof $u)c.push(g);else{const A=Wu(E,x);A!=null&&(c.push(g),h.set(g,A))}}const f=new Nt(c);return new FE(h,f,o.fieldTransforms)}function Wu(t,e){if(zE(t=Vn(t)))return Rp("Unsupported field value:",e,t),UE(t,e);if(t instanceof Ap)return function(r,i){if(!jE(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Wu(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=He.fromDate(r);return{timestampValue:tu(i.serializer,s)}}if(r instanceof He){const s=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tu(i.serializer,s)}}if(r instanceof Ip)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof es)return{bytesValue:oE(i.serializer,r._byteString)};if(r instanceof Mt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Pp)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return op(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Tp(r)}`)}(t,e)}function UE(t,e){const n={};return L1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ii(t,(r,i)=>{const s=Wu(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function zE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof Ip||t instanceof es||t instanceof Mt||t instanceof Ap||t instanceof Pp)}function Rp(t,e,n){if(!zE(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Tp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Df(t,e,n){if((e=Vn(e))instanceof zu)return e._internalPath;if(typeof e=="string")return kp(t,e);throw iu("Field path arguments must be of type string or ",t,!1,void 0,n)}const jV=new RegExp("[~\\*/\\[\\]]");function kp(t,e,n){if(e.search(jV)>=0)throw iu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new zu(...e.split("."))._internalPath}catch{throw iu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function iu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new H(j.INVALID_ARGUMENT,a+t+l)}function $E(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(HE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BV extends WE{data(){return super.data()}}function HE(t,e){return typeof e=="string"?kp(t,e):e instanceof zu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class UV{convertValue(e,n="none"){switch(Jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ii(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Oe(o.doubleValue));return new Pp(s)}convertGeoPoint(e){return new Ip(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=tp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bo(e));default:return null}}convertTimestamp(e){const n=dr(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Se.fromString(e);de(fE(r));const i=new Lo(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||Dn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zV(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qE extends WE{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(HE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class pl extends qE{data(e={}){return super.data(e)}}class GE{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ks(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new pl(this._firestore,this._userDataWriter,r.key,r,new Ks(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new pl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ks(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new pl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ks(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:$V(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function $V(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}class Vp extends UV{constructor(e){super(),this.firestore=e}convertBytes(e){return new es(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function Np(t){t=pn(t,sa);const e=pn(t.firestore,Zr),n=xp(e),r=new Vp(e);return KE(t._query),CV(n,t._query).then(i=>new GE(e,r,t,i))}function WV(t,e,n,...r){t=pn(t,Mt);const i=pn(t.firestore,Zr),s=BE(i);let o;return o=typeof(e=Vn(e))=="string"||e instanceof zu?FV(s,"updateDoc",t._key,e,n,r):OV(s,"updateDoc",t._key,e),Mp(i,[o.toMutation(t._key,sn.exists(!0))])}function HV(t){return Mp(pn(t.firestore,Zr),[new ap(t._key,sn.none())])}function Hu(t,e){const n=pn(t.firestore,Zr),r=Sp(t),i=zV(t.converter,e);return Mp(n,[LV(BE(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,sn.exists(!1))]).then(()=>r)}function Dp(t,...e){var n,r,i;t=Vn(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Cv(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Cv(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let l,c,h;if(t instanceof Mt)c=pn(t.firestore,Zr),h=sp(t._key.path),l={next:f=>{e[o]&&e[o](KV(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=pn(t,sa);c=pn(f.firestore,Zr),h=f._query;const p=new Vp(c);l={next:g=>{e[o]&&e[o](new GE(c,p,f,g))},error:e[o+1],complete:e[o+2]},KE(t._query)}return function(p,g,E,x){const A=new ME(x),w=new AE(g,A,E);return p.asyncQueue.enqueueAndForget(async()=>SE(await Nf(p),w)),()=>{A.Za(),p.asyncQueue.enqueueAndForget(async()=>xE(await Nf(p),w))}}(xp(c),h,a,l)}function Mp(t,e){return function(r,i){const s=new lr;return r.asyncQueue.enqueueAndForget(async()=>yV(await PV(r),i,s)),s.promise}(xp(t),e)}function KV(t,e,n){const r=n.docs.get(e._key),i=new Vp(t);return new qE(t,i,e._key,r,new Ks(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){us=i})(MC),Ql(new No("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Zr(new QC(r.getProvider("auth-internal")),new ZC(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new H(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lo(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Fi(Ky,"4.7.3",e),Fi(Ky,"4.7.3","esm2017")})();const qV={apiKey:"AIzaSyDqxaUutYqyGsYfny_PUdrArV1VcJ432MI",authDomain:"syncserve-7a27b.firebaseapp.com",projectId:"syncserve-7a27b",storageBucket:"syncserve-7a27b.firebasestorage.app",messagingSenderId:"961632456350",appId:"1:961632456350:web:372b3e4deec94dd740358f",measurementId:"G-TNYB3MM0ZV"},GV=A1(qV),fs=VV(GV),bp=Uu(fs,"tables"),Lp=Uu(fs,"menuItems"),QE=Uu(fs,"staff"),YE=Uu(fs,"orders"),QV=async t=>{try{return{id:(await Hu(bp,{name:t,status:"available"})).id,name:t,status:"available"}}catch(e){throw console.error("Error adding table:",e),e}},Op=async()=>{try{return(await Np(bp)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error fetching tables:",t),t}},YV=(t,e)=>Dp(bp,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)},n=>{console.error("onTablesRealtime error:",n),e&&e(n)}),XE=async(t,e)=>{if(!t)throw new Error("updateTableStatus: tableId is required");try{const n=Sp(fs,"tables",t);return await WV(n,{status:e}),!0}catch(n){throw console.error("Error updating table status:",n),n}},XV=async t=>{try{if(!t||!t.name||t.price==null)throw new Error("addMenuItem: item must have name and price");return{id:(await Hu(Lp,t)).id,...t}}catch(e){throw console.error("Error adding menu item:",e),e}},Fp=async()=>{try{return(await Np(Lp)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error fetching menu items:",t),t}},JV=(t,e)=>Dp(Lp,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)},n=>{console.error("onMenuItemsRealtime error:",n)}),ZV=async t=>{try{return{id:(await Hu(QE,{name:t})).id,name:t}}catch(e){throw console.error("Error adding staff:",e),e}},jp=async()=>{try{return(await Np(QE)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error fetching staff:",t),t}},eN=async t=>{try{return{id:(await Hu(YE,t)).id,...t}}catch(e){throw console.error("Error adding order:",e),e}},tN=async t=>{if(!t)throw new Error("deleteOrder: orderId is required");try{return await HV(Sp(fs,"orders",t)),!0}catch(e){throw console.error("Error deleting order:",e),e}},JE=(t,e)=>Dp(YE,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)},n=>{console.error("onOrdersRealtime error:",n),e&&e(n)}),Ku=({isOpen:t,onClose:e,children:n})=>t?k.jsx("div",{className:"modal-overlay",children:k.jsxs("div",{className:"modal-content relative",children:[k.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700",children:k.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),n]})}):null,ZE=D.createContext({});function nN(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const Bp=typeof window<"u",rN=Bp?D.useLayoutEffect:D.useEffect,Up=D.createContext(null);function zp(t,e){t.indexOf(e)===-1&&t.push(e)}function $p(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const bn=(t,e,n)=>n>e?e:n<t?t:n;let Wp=()=>{};const Ln={},eT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function tT(t){return typeof t=="object"&&t!==null}const nT=t=>/^0[^.\s]+$/u.test(t);function Hp(t){let e;return()=>(e===void 0&&(e=t()),e)}const Wt=t=>t,iN=(t,e)=>n=>e(t(n)),oa=(...t)=>t.reduce(iN),Bo=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Kp{constructor(){this.subscriptions=[]}add(e){return zp(this.subscriptions,e),()=>$p(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const mn=t=>t*1e3,gn=t=>t/1e3;function rT(t,e){return e?t*(1e3/e):0}const iT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,sN=1e-7,oN=12;function aN(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=iT(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>sN&&++a<oN);return o}function aa(t,e,n,r){if(t===e&&n===r)return Wt;const i=s=>aN(s,0,1,t,n);return s=>s===0||s===1?s:iT(i(s),e,r)}const sT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,oT=t=>e=>1-t(1-e),aT=aa(.33,1.53,.69,.99),qp=oT(aT),lT=sT(qp),uT=t=>(t*=2)<1?.5*qp(t):.5*(2-Math.pow(2,-10*(t-1))),Gp=t=>1-Math.sin(Math.acos(t)),cT=oT(Gp),hT=sT(Gp),lN=aa(.42,0,1,1),uN=aa(0,0,.58,1),fT=aa(.42,0,.58,1),cN=t=>Array.isArray(t)&&typeof t[0]!="number",dT=t=>Array.isArray(t)&&typeof t[0]=="number",hN={linear:Wt,easeIn:lN,easeInOut:fT,easeOut:uN,circIn:Gp,circInOut:hT,circOut:cT,backIn:qp,backInOut:lT,backOut:aT,anticipate:uT},fN=t=>typeof t=="string",Rv=t=>{if(dT(t)){Wp(t.length===4);const[e,n,r,i]=t;return aa(e,n,r,i)}else if(fN(t))return hN[t];return t},Qa=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],kv={value:null};function dN(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(f){o.has(f)&&(h.schedule(f),t()),l++,f(a)}const h={schedule:(f,p=!1,g=!1)=>{const x=g&&i?n:r;return p&&o.add(f),x.has(f)||x.add(f),f},cancel:f=>{r.delete(f),o.delete(f)},process:f=>{if(a=f,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),e&&kv.value&&kv.value.frameloop[e].push(l),l=0,n.clear(),i=!1,s&&(s=!1,h.process(f))}};return h}const pN=40;function pT(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Qa.reduce((_,V)=>(_[V]=dN(s,e?V:void 0),_),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:h,update:f,preRender:p,render:g,postRender:E}=o,x=()=>{const _=Ln.useManualTiming?i.timestamp:performance.now();n=!1,Ln.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,pN),1)),i.timestamp=_,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),h.process(i),f.process(i),p.process(i),g.process(i),E.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},A=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:Qa.reduce((_,V)=>{const b=o[V];return _[V]=(O,P=!1,y=!1)=>(n||A(),b.schedule(O,P,y)),_},{}),cancel:_=>{for(let V=0;V<Qa.length;V++)o[Qa[V]].cancel(_)},state:i,steps:o}}const{schedule:Pe,cancel:mr,state:Xe,steps:th}=pT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wt,!0);let ml;function mN(){ml=void 0}const At={now:()=>(ml===void 0&&At.set(Xe.isProcessing||Ln.useManualTiming?Xe.timestamp:performance.now()),ml),set:t=>{ml=t,queueMicrotask(mN)}},mT=t=>e=>typeof e=="string"&&e.startsWith(t),Qp=mT("--"),gN=mT("var(--"),Yp=t=>gN(t)?yN.test(t.split("/*")[0].trim()):!1,yN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ds={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Uo={...ds,transform:t=>bn(0,1,t)},Ya={...ds,default:1},ao=t=>Math.round(t*1e5)/1e5,Xp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function vN(t){return t==null}const _N=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Jp=(t,e)=>n=>!!(typeof n=="string"&&_N.test(n)&&n.startsWith(t)||e&&!vN(n)&&Object.prototype.hasOwnProperty.call(n,e)),gT=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Xp);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},wN=t=>bn(0,255,t),nh={...ds,transform:t=>Math.round(wN(t))},Fr={test:Jp("rgb","red"),parse:gT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+nh.transform(t)+", "+nh.transform(e)+", "+nh.transform(n)+", "+ao(Uo.transform(r))+")"};function EN(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Mf={test:Jp("#"),parse:EN,transform:Fr.transform},la=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),zn=la("deg"),yn=la("%"),Q=la("px"),TN=la("vh"),SN=la("vw"),Vv={...yn,parse:t=>yn.parse(t)/100,transform:t=>yn.transform(t*100)},Ii={test:Jp("hsl","hue"),parse:gT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+yn.transform(ao(e))+", "+yn.transform(ao(n))+", "+ao(Uo.transform(r))+")"},Be={test:t=>Fr.test(t)||Mf.test(t)||Ii.test(t),parse:t=>Fr.test(t)?Fr.parse(t):Ii.test(t)?Ii.parse(t):Mf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Fr.transform(t):Ii.transform(t),getAnimatableNone:t=>{const e=Be.parse(t);return e.alpha=0,Be.transform(e)}},xN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function AN(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Xp))==null?void 0:e.length)||0)+(((n=t.match(xN))==null?void 0:n.length)||0)>0}const yT="number",vT="color",IN="var",PN="var(",Nv="${}",CN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function zo(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(CN,l=>(Be.test(l)?(r.color.push(s),i.push(vT),n.push(Be.parse(l))):l.startsWith(PN)?(r.var.push(s),i.push(IN),n.push(l)):(r.number.push(s),i.push(yT),n.push(parseFloat(l))),++s,Nv)).split(Nv);return{values:n,split:a,indexes:r,types:i}}function _T(t){return zo(t).values}function wT(t){const{split:e,types:n}=zo(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===yT?s+=ao(i[o]):a===vT?s+=Be.transform(i[o]):s+=i[o]}return s}}const RN=t=>typeof t=="number"?0:Be.test(t)?Be.getAnimatableNone(t):t;function kN(t){const e=_T(t);return wT(t)(e.map(RN))}const gr={test:AN,parse:_T,createTransformer:wT,getAnimatableNone:kN};function rh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function VN({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=rh(l,a,t+1/3),s=rh(l,a,t),o=rh(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function su(t,e){return n=>n>0?e:t}const Ae=(t,e,n)=>t+(e-t)*n,ih=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},NN=[Mf,Fr,Ii],DN=t=>NN.find(e=>e.test(t));function Dv(t){const e=DN(t);if(!e)return!1;let n=e.parse(t);return e===Ii&&(n=VN(n)),n}const Mv=(t,e)=>{const n=Dv(t),r=Dv(e);if(!n||!r)return su(t,e);const i={...n};return s=>(i.red=ih(n.red,r.red,s),i.green=ih(n.green,r.green,s),i.blue=ih(n.blue,r.blue,s),i.alpha=Ae(n.alpha,r.alpha,s),Fr.transform(i))},bf=new Set(["none","hidden"]);function MN(t,e){return bf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function bN(t,e){return n=>Ae(t,e,n)}function Zp(t){return typeof t=="number"?bN:typeof t=="string"?Yp(t)?su:Be.test(t)?Mv:FN:Array.isArray(t)?ET:typeof t=="object"?Be.test(t)?Mv:LN:su}function ET(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Zp(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function LN(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Zp(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function ON(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const FN=(t,e)=>{const n=gr.createTransformer(e),r=zo(t),i=zo(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?bf.has(t)&&!i.values.length||bf.has(e)&&!r.values.length?MN(t,e):oa(ET(ON(r,i),i.values),n):su(t,e)};function TT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ae(t,e,n):Zp(t)(t,e)}const jN=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Pe.update(e,n),stop:()=>mr(e),now:()=>Xe.isProcessing?Xe.timestamp:At.now()}},ST=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},ou=2e4;function em(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ou;)e+=n,r=t.next(e);return e>=ou?1/0:e}function BN(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(em(r),ou);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:gn(i)}}const UN=5;function xT(t,e,n){const r=Math.max(e-UN,0);return rT(n-t(r),e-r)}const Ne={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},sh=.001;function zN({duration:t=Ne.duration,bounce:e=Ne.bounce,velocity:n=Ne.velocity,mass:r=Ne.mass}){let i,s,o=1-e;o=bn(Ne.minDamping,Ne.maxDamping,o),t=bn(Ne.minDuration,Ne.maxDuration,gn(t)),o<1?(i=c=>{const h=c*o,f=h*t,p=h-n,g=Lf(c,o),E=Math.exp(-f);return sh-p/g*E},s=c=>{const f=c*o*t,p=f*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,E=Math.exp(-f),x=Lf(Math.pow(c,2),o);return(-i(c)+sh>0?-1:1)*((p-g)*E)/x}):(i=c=>{const h=Math.exp(-c*t),f=(c-n)*t+1;return-sh+h*f},s=c=>{const h=Math.exp(-c*t),f=(n-c)*(t*t);return h*f});const a=5/t,l=WN(i,s,a);if(t=mn(t),isNaN(l))return{stiffness:Ne.stiffness,damping:Ne.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const $N=12;function WN(t,e,n){let r=n;for(let i=1;i<$N;i++)r=r-t(r)/e(r);return r}function Lf(t,e){return t*Math.sqrt(1-e*e)}const HN=["duration","bounce"],KN=["stiffness","damping","mass"];function bv(t,e){return e.some(n=>t[n]!==void 0)}function qN(t){let e={velocity:Ne.velocity,stiffness:Ne.stiffness,damping:Ne.damping,mass:Ne.mass,isResolvedFromDuration:!1,...t};if(!bv(t,KN)&&bv(t,HN))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*bn(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Ne.mass,stiffness:i,damping:s}}else{const n=zN(t);e={...e,...n,mass:Ne.mass},e.isResolvedFromDuration=!0}return e}function au(t=Ne.visualDuration,e=Ne.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:f,velocity:p,isResolvedFromDuration:g}=qN({...n,velocity:-gn(n.velocity||0)}),E=p||0,x=c/(2*Math.sqrt(l*h)),A=o-s,w=gn(Math.sqrt(l/h)),v=Math.abs(A)<5;r||(r=v?Ne.restSpeed.granular:Ne.restSpeed.default),i||(i=v?Ne.restDelta.granular:Ne.restDelta.default);let _;if(x<1){const b=Lf(w,x);_=O=>{const P=Math.exp(-x*w*O);return o-P*((E+x*w*A)/b*Math.sin(b*O)+A*Math.cos(b*O))}}else if(x===1)_=b=>o-Math.exp(-w*b)*(A+(E+w*A)*b);else{const b=w*Math.sqrt(x*x-1);_=O=>{const P=Math.exp(-x*w*O),y=Math.min(b*O,300);return o-P*((E+x*w*A)*Math.sinh(y)+b*A*Math.cosh(y))/b}}const V={calculatedDuration:g&&f||null,next:b=>{const O=_(b);if(g)a.done=b>=f;else{let P=b===0?E:0;x<1&&(P=b===0?mn(E):xT(_,b,O));const y=Math.abs(P)<=r,S=Math.abs(o-O)<=i;a.done=y&&S}return a.value=a.done?o:O,a},toString:()=>{const b=Math.min(em(V),ou),O=ST(P=>V.next(b*P).value,b,30);return b+"ms "+O},toTransition:()=>{}};return V}au.applyToOptions=t=>{const e=BN(t,100,au);return t.ease=e.ease,t.duration=mn(e.duration),t.type="keyframes",t};function Of({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const f=t[0],p={done:!1,value:f},g=y=>a!==void 0&&y<a||l!==void 0&&y>l,E=y=>a===void 0?l:l===void 0||Math.abs(a-y)<Math.abs(l-y)?a:l;let x=n*e;const A=f+x,w=o===void 0?A:o(A);w!==A&&(x=w-f);const v=y=>-x*Math.exp(-y/r),_=y=>w+v(y),V=y=>{const S=v(y),I=_(y);p.done=Math.abs(S)<=c,p.value=p.done?w:I};let b,O;const P=y=>{g(p.value)&&(b=y,O=au({keyframes:[p.value,E(p.value)],velocity:xT(_,y,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return P(0),{calculatedDuration:null,next:y=>{let S=!1;return!O&&b===void 0&&(S=!0,V(y),P(y)),b!==void 0&&y>=b?O.next(y-b):(!S&&V(y),p)}}}function GN(t,e,n){const r=[],i=n||Ln.mix||TT,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Wt:e;a=oa(l,a)}r.push(a)}return r}function QN(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Wp(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=GN(e,r,i),l=a.length,c=h=>{if(o&&h<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const p=Bo(t[f],t[f+1],h);return a[f](p)};return n?h=>c(bn(t[0],t[s-1],h)):c}function YN(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Bo(0,e,r);t.push(Ae(n,1,i))}}function XN(t){const e=[0];return YN(e,t.length-1),e}function JN(t,e){return t.map(n=>n*e)}function ZN(t,e){return t.map(()=>e||fT).splice(0,t.length-1)}function lo({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=cN(r)?r.map(Rv):Rv(r),s={done:!1,value:e[0]},o=JN(n&&n.length===e.length?n:XN(e),t),a=QN(o,e,{ease:Array.isArray(i)?i:ZN(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const e4=t=>t!==null;function tm(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(e4),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const t4={decay:Of,inertia:Of,tween:lo,keyframes:lo,spring:au};function AT(t){typeof t.type=="string"&&(t.type=t4[t.type])}class nm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const n4=t=>t/100;class rm extends nm{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==At.now()&&this.tick(At.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;AT(e);const{type:n=lo,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||lo;l!==lo&&typeof a[0]!="number"&&(this.mixKeyframes=oa(n4,TT(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=em(c));const{calculatedDuration:h}=c;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:h,repeat:f,repeatType:p,repeatDelay:g,type:E,onUpdate:x,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-c*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let _=this.currentTime,V=r;if(f){const y=Math.min(this.currentTime,i)/a;let S=Math.floor(y),I=y%1;!I&&y>=1&&(I=1),I===1&&S--,S=Math.min(S,f+1),!!(S%2)&&(p==="reverse"?(I=1-I,g&&(I-=g/a)):p==="mirror"&&(V=o)),_=bn(0,1,I)*a}const b=v?{done:!1,value:h[0]}:V.next(_);s&&(b.value=s(b.value));let{done:O}=b;!v&&l!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return P&&E!==Of&&(b.value=tm(h,this.options,A,this.speed)),x&&x(b.value),P&&this.finish(),b}then(e,n){return this.finished.then(e,n)}get duration(){return gn(this.calculatedDuration)}get time(){return gn(this.currentTime)}set time(e){var n;e=mn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(At.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=gn(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=jN,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(At.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function r4(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const jr=t=>t*180/Math.PI,Ff=t=>{const e=jr(Math.atan2(t[1],t[0]));return jf(e)},i4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Ff,rotateZ:Ff,skewX:t=>jr(Math.atan(t[1])),skewY:t=>jr(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},jf=t=>(t=t%360,t<0&&(t+=360),t),Lv=Ff,Ov=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Fv=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),s4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ov,scaleY:Fv,scale:t=>(Ov(t)+Fv(t))/2,rotateX:t=>jf(jr(Math.atan2(t[6],t[5]))),rotateY:t=>jf(jr(Math.atan2(-t[2],t[0]))),rotateZ:Lv,rotate:Lv,skewX:t=>jr(Math.atan(t[4])),skewY:t=>jr(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Bf(t){return t.includes("scale")?1:0}function Uf(t,e){if(!t||t==="none")return Bf(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=s4,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=i4,i=a}if(!i)return Bf(e);const s=r[e],o=i[1].split(",").map(a4);return typeof s=="function"?s(o):o[s]}const o4=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Uf(n,e)};function a4(t){return parseFloat(t.trim())}const ps=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ms=new Set(ps),jv=t=>t===ds||t===Q,l4=new Set(["x","y","z"]),u4=ps.filter(t=>!l4.has(t));function c4(t){const e=[];return u4.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const $r={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Uf(e,"x"),y:(t,{transform:e})=>Uf(e,"y")};$r.translateX=$r.x;$r.translateY=$r.y;const Wr=new Set;let zf=!1,$f=!1,Wf=!1;function IT(){if($f){const t=Array.from(Wr).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=c4(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}$f=!1,zf=!1,Wr.forEach(t=>t.complete(Wf)),Wr.clear()}function PT(){Wr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&($f=!0)})}function h4(){Wf=!0,PT(),IT(),Wf=!1}class im{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Wr.add(this),zf||(zf=!0,Pe.read(PT),Pe.resolveKeyframes(IT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}r4(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Wr.delete(this)}cancel(){this.state==="scheduled"&&(Wr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const f4=t=>t.startsWith("--");function d4(t,e,n){f4(e)?t.style.setProperty(e,n):t.style[e]=n}const p4=Hp(()=>window.ScrollTimeline!==void 0),m4={};function g4(t,e){const n=Hp(t);return()=>m4[e]??n()}const CT=g4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),qs=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Bv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qs([0,.65,.55,1]),circOut:qs([.55,0,1,.45]),backIn:qs([.31,.01,.66,-.59]),backOut:qs([.33,1.53,.69,.99])};function RT(t,e){if(t)return typeof t=="function"?CT()?ST(t,e):"ease-out":dT(t)?qs(t):Array.isArray(t)?t.map(n=>RT(n,e)||Bv.easeOut):Bv[t]}function y4(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const h={[e]:n};l&&(h.offset=l);const f=RT(a,i);Array.isArray(f)&&(h.easing=f);const p={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),t.animate(h,p)}function kT(t){return typeof t=="function"&&"applyToOptions"in t}function v4({type:t,...e}){return kT(t)&&CT()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class _4 extends nm{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Wp(typeof e.type!="string");const c=v4(e);this.animation=y4(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=tm(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):d4(n,r,h),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return gn(Number(e))}get time(){return gn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=mn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&p4()?(this.animation.timeline=e,Wt):n(this)}}const VT={anticipate:uT,backInOut:lT,circInOut:hT};function w4(t){return t in VT}function E4(t){typeof t.ease=="string"&&w4(t.ease)&&(t.ease=VT[t.ease])}const Uv=10;class T4 extends _4{constructor(e){E4(e),AT(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new rm({...o,autoplay:!1}),l=mn(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-Uv).value,a.sample(l).value,Uv),a.stop()}}const zv=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(gr.test(t)||t==="0")&&!t.startsWith("url("));function S4(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function x4(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=zv(i,e),a=zv(s,e);return!o||!a?!1:S4(t)||(n==="spring"||kT(n))&&r}function NT(t){return tT(t)&&"offsetHeight"in t}const A4=new Set(["opacity","clipPath","filter","transform"]),I4=Hp(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function P4(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!NT((c=e==null?void 0:e.owner)==null?void 0:c.current))return!1;const{onUpdate:a,transformTemplate:l}=e.owner.getProps();return I4()&&n&&A4.has(n)&&(n!=="transform"||!l)&&!a&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const C4=40;class R4 extends nm{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:h,...f}){var E;super(),this.stop=()=>{var x,A;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=At.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:h,...f},g=(h==null?void 0:h.KeyframeResolver)||im;this.keyframeResolver=new g(a,(x,A,w)=>this.onKeyframesResolved(x,A,p,!w),l,c,h),(E=this.keyframeResolver)==null||E.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:h}=r;this.resolvedAt=At.now(),x4(e,s,o,a)||((Ln.instantAnimations||!l)&&(h==null||h(tm(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>C4?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&P4(p)?new T4({...p,element:p.motionValue.owner.current}):new rm(p);g.finished.then(()=>this.notifyFinished()).catch(Wt),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),h4()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const k4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function V4(t){const e=k4.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function DT(t,e,n=1){const[r,i]=V4(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return eT(o)?parseFloat(o):o}return Yp(i)?DT(i,e,n+1):i}function sm(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const MT=new Set(["width","height","top","left","right","bottom",...ps]),N4={test:t=>t==="auto",parse:t=>t},bT=t=>e=>e.test(t),LT=[ds,Q,yn,zn,SN,TN,N4],$v=t=>LT.find(bT(t));function D4(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||nT(t):!0}const M4=new Set(["brightness","contrast","saturate","opacity"]);function b4(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Xp)||[];if(!r)return t;const i=n.replace(r,"");let s=M4.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const L4=/\b([a-z-]*)\(.*?\)/gu,Hf={...gr,getAnimatableNone:t=>{const e=t.match(L4);return e?e.map(b4).join(" "):t}},Wv={...ds,transform:Math.round},O4={rotate:zn,rotateX:zn,rotateY:zn,rotateZ:zn,scale:Ya,scaleX:Ya,scaleY:Ya,scaleZ:Ya,skew:zn,skewX:zn,skewY:zn,distance:Q,translateX:Q,translateY:Q,translateZ:Q,x:Q,y:Q,z:Q,perspective:Q,transformPerspective:Q,opacity:Uo,originX:Vv,originY:Vv,originZ:Q},om={borderWidth:Q,borderTopWidth:Q,borderRightWidth:Q,borderBottomWidth:Q,borderLeftWidth:Q,borderRadius:Q,radius:Q,borderTopLeftRadius:Q,borderTopRightRadius:Q,borderBottomRightRadius:Q,borderBottomLeftRadius:Q,width:Q,maxWidth:Q,height:Q,maxHeight:Q,top:Q,right:Q,bottom:Q,left:Q,padding:Q,paddingTop:Q,paddingRight:Q,paddingBottom:Q,paddingLeft:Q,margin:Q,marginTop:Q,marginRight:Q,marginBottom:Q,marginLeft:Q,backgroundPositionX:Q,backgroundPositionY:Q,...O4,zIndex:Wv,fillOpacity:Uo,strokeOpacity:Uo,numOctaves:Wv},F4={...om,color:Be,backgroundColor:Be,outlineColor:Be,fill:Be,stroke:Be,borderColor:Be,borderTopColor:Be,borderRightColor:Be,borderBottomColor:Be,borderLeftColor:Be,filter:Hf,WebkitFilter:Hf},OT=t=>F4[t];function FT(t,e){let n=OT(t);return n!==Hf&&(n=gr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const j4=new Set(["auto","none","0"]);function B4(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!j4.has(s)&&zo(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=FT(n,i)}class U4 extends im{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Yp(c))){const h=DT(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!MT.has(r)||e.length!==2)return;const[i,s]=e,o=$v(i),a=$v(s);if(o!==a)if(jv(o)&&jv(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else $r[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||D4(e[i]))&&r.push(i);r.length&&B4(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$r[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=$r[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function z4(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const jT=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Hv=30,$4=t=>!isNaN(parseFloat(t));class W4{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var o,a;const s=At.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&((a=this.events.renderRequest)==null||a.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=At.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=$4(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Kp);const r=this.events[e].add(n);return e==="change"?()=>{r(),Pe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=At.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Hv)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Hv);return rT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ts(t,e){return new W4(t,e)}const{schedule:am}=pT(queueMicrotask,!1),Jt={x:!1,y:!1};function BT(){return Jt.x||Jt.y}function H4(t){return t==="x"||t==="y"?Jt[t]?null:(Jt[t]=!0,()=>{Jt[t]=!1}):Jt.x||Jt.y?null:(Jt.x=Jt.y=!0,()=>{Jt.x=Jt.y=!1})}function UT(t,e){const n=z4(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Kv(t){return!(t.pointerType==="touch"||BT())}function K4(t,e,n={}){const[r,i,s]=UT(t,n),o=a=>{if(!Kv(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const h=f=>{Kv(f)&&(c(f),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const zT=(t,e)=>e?t===e?!0:zT(t,e.parentElement):!1,lm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,q4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function G4(t){return q4.has(t.tagName)||t.tabIndex!==-1}const gl=new WeakSet;function qv(t){return e=>{e.key==="Enter"&&t(e)}}function oh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Q4=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=qv(()=>{if(gl.has(n))return;oh(n,"down");const i=qv(()=>{oh(n,"up")}),s=()=>oh(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Gv(t){return lm(t)&&!BT()}function Y4(t,e,n={}){const[r,i,s]=UT(t,n),o=a=>{const l=a.currentTarget;if(!Gv(a))return;gl.add(l);const c=e(l,a),h=(g,E)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),gl.has(l)&&gl.delete(l),Gv(g)&&typeof c=="function"&&c(g,{success:E})},f=g=>{h(g,l===window||l===document||n.useGlobalTarget||zT(l,g.target))},p=g=>{h(g,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),NT(a)&&(a.addEventListener("focus",c=>Q4(c,i)),!G4(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function $T(t){return tT(t)&&"ownerSVGElement"in t}function X4(t){return $T(t)&&t.tagName==="svg"}const dt=t=>!!(t&&t.getVelocity),J4=[...LT,Be,gr],Z4=t=>J4.find(bT(t)),WT=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function eD(t=!0){const e=D.useContext(Up);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=D.useId();D.useEffect(()=>{if(t)return i(s)},[t]);const o=D.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const HT=D.createContext({strict:!1}),Qv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ns={};for(const t in Qv)ns[t]={isEnabled:e=>Qv[t].some(n=>!!e[n])};function tD(t){for(const e in t)ns[e]={...ns[e],...t[e]}}const nD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function lu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||nD.has(t)}let KT=t=>!lu(t);function rD(t){typeof t=="function"&&(KT=e=>e.startsWith("on")?!lu(e):t(e))}try{rD(require("@emotion/is-prop-valid").default)}catch{}function iD(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(KT(i)||n===!0&&lu(i)||!e&&!lu(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function sD(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const qu=D.createContext({});function Gu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function $o(t){return typeof t=="string"||Array.isArray(t)}const um=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cm=["initial",...um];function Qu(t){return Gu(t.animate)||cm.some(e=>$o(t[e]))}function qT(t){return!!(Qu(t)||t.variants)}function oD(t,e){if(Qu(t)){const{initial:n,animate:r}=t;return{initial:n===!1||$o(n)?n:void 0,animate:$o(r)?r:void 0}}return t.inherit!==!1?e:{}}function aD(t){const{initial:e,animate:n}=oD(t,D.useContext(qu));return D.useMemo(()=>({initial:e,animate:n}),[Yv(e),Yv(n)])}function Yv(t){return Array.isArray(t)?t.join(" "):t}const lD=Symbol.for("motionComponentSymbol");function Pi(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function uD(t,e,n){return D.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Pi(n)&&(n.current=r))},[e])}const hm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),cD="framerAppearId",GT="data-"+hm(cD),QT=D.createContext({});function hD(t,e,n,r,i){var x,A;const{visualElement:s}=D.useContext(qu),o=D.useContext(HT),a=D.useContext(Up),l=D.useContext(WT).reducedMotion,c=D.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=c.current,f=D.useContext(QT);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&fD(c.current,n,i,f);const p=D.useRef(!1);D.useInsertionEffect(()=>{h&&p.current&&h.update(n,a)});const g=n[GT],E=D.useRef(!!g&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,g))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,g)));return rN(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),am.render(h.render),E.current&&h.animationState&&h.animationState.animateChanges())}),D.useEffect(()=>{h&&(!E.current&&h.animationState&&h.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,g)}),E.current=!1))}),h}function fD(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:YT(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Pi(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:l,layoutRoot:c})}function YT(t){if(t)return t.options.allowProjection!==!1?t.projection:YT(t.parent)}function dD({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&tD(t);function s(a,l){let c;const h={...D.useContext(WT),...a,layoutId:pD(a)},{isStatic:f}=h,p=aD(a),g=r(a,f);if(!f&&Bp){mD();const E=gD(h);c=E.MeasureLayout,p.visualElement=hD(i,g,h,e,E.ProjectionNode)}return k.jsxs(qu.Provider,{value:p,children:[c&&p.visualElement?k.jsx(c,{visualElement:p.visualElement,...h}):null,n(i,a,uD(g,p.visualElement,l),g,f,p.visualElement)]})}s.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=D.forwardRef(s);return o[lD]=i,o}function pD({layoutId:t}){const e=D.useContext(ZE).id;return e&&t!==void 0?e+"-"+t:t}function mD(t,e){D.useContext(HT).strict}function gD(t){const{drag:e,layout:n}=ns;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Wo={};function yD(t){for(const e in t)Wo[e]=t[e],Qp(e)&&(Wo[e].isCSSVariable=!0)}function XT(t,{layout:e,layoutId:n}){return ms.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Wo[t]||t==="opacity")}const vD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_D=ps.length;function wD(t,e,n){let r="",i=!0;for(let s=0;s<_D;s++){const o=ps[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=jT(a,om[o]);if(!l){i=!1;const h=vD[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function fm(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(ms.has(l)){o=!0;continue}else if(Qp(l)){i[l]=c;continue}else{const h=jT(c,om[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=wD(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${c} ${h}`}}const dm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function JT(t,e,n){for(const r in e)!dt(e[r])&&!XT(r,n)&&(t[r]=e[r])}function ED({transformTemplate:t},e){return D.useMemo(()=>{const n=dm();return fm(n,e,t),Object.assign({},n.vars,n.style)},[e])}function TD(t,e){const n=t.style||{},r={};return JT(r,n,t),Object.assign(r,ED(t,e)),r}function SD(t,e){const n={},r=TD(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const xD={offset:"stroke-dashoffset",array:"stroke-dasharray"},AD={offset:"strokeDashoffset",array:"strokeDasharray"};function ID(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?xD:AD;t[s.offset]=Q.transform(-r);const o=Q.transform(e),a=Q.transform(n);t[s.array]=`${o} ${a}`}function ZT(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,h){if(fm(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p}=t;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&ID(f,i,s,o,!1)}const eS=()=>({...dm(),attrs:{}}),tS=t=>typeof t=="string"&&t.toLowerCase()==="svg";function PD(t,e,n,r){const i=D.useMemo(()=>{const s=eS();return ZT(s,e,tS(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};JT(s,t.style,t),i.style={...s,...i.style}}return i}const CD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function pm(t){return typeof t!="string"||t.includes("-")?!1:!!(CD.indexOf(t)>-1||/[A-Z]/u.test(t))}function RD(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(pm(n)?PD:SD)(r,s,o,n),c=iD(r,typeof n=="string",t),h=n!==D.Fragment?{...c,...l,ref:i}:{},{children:f}=r,p=D.useMemo(()=>dt(f)?f.get():f,[f]);return D.createElement(n,{...h,children:p})}}function Xv(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function mm(t,e,n,r){if(typeof e=="function"){const[i,s]=Xv(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=Xv(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function yl(t){return dt(t)?t.get():t}function kD({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:VD(n,r,i,t),renderState:e()}}const nS=t=>(e,n)=>{const r=D.useContext(qu),i=D.useContext(Up),s=()=>kD(t,e,r,i);return n?s():nN(s)};function VD(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=yl(s[p]);let{initial:o,animate:a}=t;const l=Qu(t),c=qT(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!Gu(f)){const p=Array.isArray(f)?f:[f];for(let g=0;g<p.length;g++){const E=mm(t,p[g]);if(E){const{transitionEnd:x,transition:A,...w}=E;for(const v in w){let _=w[v];if(Array.isArray(_)){const V=h?_.length-1:0;_=_[V]}_!==null&&(i[v]=_)}for(const v in x)i[v]=x[v]}}}return i}function gm(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(dt(r[o])||e.style&&dt(e.style[o])||XT(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const ND={useVisualState:nS({scrapeMotionValuesFromProps:gm,createRenderState:dm})};function rS(t,e,n){const r=gm(t,e,n);for(const i in t)if(dt(t[i])||dt(e[i])){const s=ps.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const DD={useVisualState:nS({scrapeMotionValuesFromProps:rS,createRenderState:eS})};function MD(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={...pm(r)?DD:ND,preloadedFeatures:t,useRender:RD(i),createVisualElement:e,Component:r};return dD(o)}}function Ho(t,e,n){const r=t.getProps();return mm(r,e,n!==void 0?n:r.custom,t)}const Kf=t=>Array.isArray(t);function bD(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ts(n))}function LD(t){return Kf(t)?t[t.length-1]||0:t}function OD(t,e){const n=Ho(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=LD(s[o]);bD(t,o,a)}}function FD(t){return!!(dt(t)&&t.add)}function qf(t,e){const n=t.getValue("willChange");if(FD(n))return n.add(e);if(!n&&Ln.WillChange){const r=new Ln.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function iS(t){return t.props[GT]}const jD=t=>t!==null;function BD(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(jD),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const UD={type:"spring",stiffness:500,damping:25,restSpeed:10},zD=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),$D={type:"keyframes",duration:.8},WD={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},HD=(t,{keyframes:e})=>e.length>2?$D:ms.has(t)?t.startsWith("scale")?zD(e[1]):UD:WD;function KD({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const ym=(t,e,n,r={},i,s)=>o=>{const a=sm(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-mn(l);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};KD(a)||Object.assign(h,HD(t,h)),h.duration&&(h.duration=mn(h.duration)),h.repeatDelay&&(h.repeatDelay=mn(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),(Ln.instantAnimations||Ln.skipAnimations)&&(f=!0,h.duration=0,h.delay=0),h.allowFlatten=!a.type&&!a.ease,f&&!s&&e.get()!==void 0){const p=BD(h.keyframes,a);if(p!==void 0){Pe.update(()=>{h.onUpdate(p),h.onComplete()});return}}return a.isSync?new rm(h):new R4(h)};function qD({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function sS(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const f=t.getValue(h,t.latestValues[h]??null),p=a[h];if(p===void 0||c&&qD(c,h))continue;const g={delay:n,...sm(s||{},h)},E=f.get();if(E!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===E&&!g.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const w=iS(t);if(w){const v=window.MotionHandoffAnimation(w,h,Pe);v!==null&&(g.startTime=v,x=!0)}}qf(t,h),f.start(ym(h,f,p,t.shouldReduceMotion&&MT.has(h)?{type:!1}:g,t,x));const A=f.animation;A&&l.push(A)}return o&&Promise.all(l).then(()=>{Pe.update(()=>{o&&OD(t,o)})}),l}function Gf(t,e,n={}){var l;const r=Ho(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(sS(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=i;return GD(t,e,h+c,f,p,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,h]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function GD(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(QD).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(Gf(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function QD(t,e){return t.sortNodePosition(e)}function YD(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Gf(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Gf(t,e,n);else{const i=typeof e=="function"?Ho(t,e,n.custom):e;r=Promise.all(sS(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function oS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const XD=cm.length;function aS(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?aS(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<XD;n++){const r=cm[n],i=t.props[r];($o(i)||i===!1)&&(e[r]=i)}return e}const JD=[...um].reverse(),ZD=um.length;function eM(t){return e=>Promise.all(e.map(({animation:n,options:r})=>YD(t,n,r)))}function tM(t){let e=eM(t),n=Jv(),r=!0;const i=l=>(c,h)=>{var p;const f=Ho(t,h,l==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(f){const{transition:g,transitionEnd:E,...x}=f;c={...c,...x,...E}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,h=aS(t.parent)||{},f=[],p=new Set;let g={},E=1/0;for(let A=0;A<ZD;A++){const w=JD[A],v=n[w],_=c[w]!==void 0?c[w]:h[w],V=$o(_),b=w===l?v.isActive:null;b===!1&&(E=A);let O=_===h[w]&&_!==c[w]&&V;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),v.protectedKeys={...g},!v.isActive&&b===null||!_&&!v.prevProp||Gu(_)||typeof _=="boolean")continue;const P=nM(v.prevProp,_);let y=P||w===l&&v.isActive&&!O&&V||A>E&&V,S=!1;const I=Array.isArray(_)?_:[_];let C=I.reduce(i(w),{});b===!1&&(C={});const{prevResolvedValues:N={}}=v,R={...N,...C},Y=J=>{y=!0,p.has(J)&&(S=!0,p.delete(J)),v.needsAnimating[J]=!0;const U=t.getValue(J);U&&(U.liveStyle=!1)};for(const J in R){const U=C[J],K=N[J];if(g.hasOwnProperty(J))continue;let G=!1;Kf(U)&&Kf(K)?G=!oS(U,K):G=U!==K,G?U!=null?Y(J):p.add(J):U!==void 0&&p.has(J)?Y(J):v.protectedKeys[J]=!0}v.prevProp=_,v.prevResolvedValues=C,v.isActive&&(g={...g,...C}),r&&t.blockInitialAnimation&&(y=!1),y&&(!(O&&P)||S)&&f.push(...I.map(J=>({animation:J,options:{type:w}})))}if(p.size){const A={};if(typeof c.initial!="boolean"){const w=Ho(t,Array.isArray(c.initial)?c.initial[0]:c.initial);w&&w.transition&&(A.transition=w.transition)}p.forEach(w=>{const v=t.getBaseTarget(w),_=t.getValue(w);_&&(_.liveStyle=!0),A[w]=v??null}),f.push({animation:A})}let x=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(f):Promise.resolve()}function a(l,c){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Jv(),r=!0}}}function nM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!oS(e,t):!1}function Cr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Jv(){return{animate:Cr(!0),whileInView:Cr(),whileHover:Cr(),whileTap:Cr(),whileDrag:Cr(),whileFocus:Cr(),exit:Cr()}}class Sr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class rM extends Sr{constructor(e){super(e),e.animationState||(e.animationState=tM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Gu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let iM=0;class sM extends Sr{constructor(){super(...arguments),this.id=iM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const oM={animation:{Feature:rM},exit:{Feature:sM}};function Ko(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ua(t){return{point:{x:t.pageX,y:t.pageY}}}const aM=t=>e=>lm(e)&&t(e,ua(e));function uo(t,e,n,r){return Ko(t,e,aM(n),r)}function lS({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function lM({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function uM(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const uS=1e-4,cM=1-uS,hM=1+uS,cS=.01,fM=0-cS,dM=0+cS;function vt(t){return t.max-t.min}function pM(t,e,n){return Math.abs(t-e)<=n}function Zv(t,e,n,r=.5){t.origin=r,t.originPoint=Ae(e.min,e.max,t.origin),t.scale=vt(n)/vt(e),t.translate=Ae(n.min,n.max,t.origin)-t.originPoint,(t.scale>=cM&&t.scale<=hM||isNaN(t.scale))&&(t.scale=1),(t.translate>=fM&&t.translate<=dM||isNaN(t.translate))&&(t.translate=0)}function co(t,e,n,r){Zv(t.x,e.x,n.x,r?r.originX:void 0),Zv(t.y,e.y,n.y,r?r.originY:void 0)}function e0(t,e,n){t.min=n.min+e.min,t.max=t.min+vt(e)}function mM(t,e,n){e0(t.x,e.x,n.x),e0(t.y,e.y,n.y)}function t0(t,e,n){t.min=e.min-n.min,t.max=t.min+vt(e)}function ho(t,e,n){t0(t.x,e.x,n.x),t0(t.y,e.y,n.y)}const n0=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ci=()=>({x:n0(),y:n0()}),r0=()=>({min:0,max:0}),Le=()=>({x:r0(),y:r0()});function jt(t){return[t("x"),t("y")]}function ah(t){return t===void 0||t===1}function Qf({scale:t,scaleX:e,scaleY:n}){return!ah(t)||!ah(e)||!ah(n)}function Dr(t){return Qf(t)||hS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function hS(t){return i0(t.x)||i0(t.y)}function i0(t){return t&&t!=="0%"}function uu(t,e,n){const r=t-n,i=e*r;return n+i}function s0(t,e,n,r,i){return i!==void 0&&(t=uu(t,i,r)),uu(t,n,r)+e}function Yf(t,e=0,n=1,r,i){t.min=s0(t.min,e,n,r,i),t.max=s0(t.max,e,n,r,i)}function fS(t,{x:e,y:n}){Yf(t.x,e.translate,e.scale,e.originPoint),Yf(t.y,n.translate,n.scale,n.originPoint)}const o0=.999999999999,a0=1.0000000000001;function gM(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ki(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,fS(t,o)),r&&Dr(s.latestValues)&&ki(t,s.latestValues))}e.x<a0&&e.x>o0&&(e.x=1),e.y<a0&&e.y>o0&&(e.y=1)}function Ri(t,e){t.min=t.min+e,t.max=t.max+e}function l0(t,e,n,r,i=.5){const s=Ae(t.min,t.max,i);Yf(t,e,n,s,r)}function ki(t,e){l0(t.x,e.x,e.scaleX,e.scale,e.originX),l0(t.y,e.y,e.scaleY,e.scale,e.originY)}function dS(t,e){return lS(uM(t.getBoundingClientRect(),e))}function yM(t,e,n){const r=dS(t,n),{scroll:i}=e;return i&&(Ri(r.x,i.offset.x),Ri(r.y,i.offset.y)),r}const pS=({current:t})=>t?t.ownerDocument.defaultView:null,u0=(t,e)=>Math.abs(t-e);function vM(t,e){const n=u0(t.x,e.x),r=u0(t.y,e.y);return Math.sqrt(n**2+r**2)}class mS{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=uh(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=vM(f.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:E}=f,{timestamp:x}=Xe;this.history.push({...E,timestamp:x});const{onStart:A,onMove:w}=this.handlers;p||(A&&A(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=lh(p,this.transformPagePoint),Pe.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:E,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const A=uh(f.type==="pointercancel"?this.lastMoveEventInfo:lh(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,A),E&&E(f,A)},!lm(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=ua(e),a=lh(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Xe;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,uh(a,this.history)),this.removeListeners=oa(uo(this.contextWindow,"pointermove",this.handlePointerMove),uo(this.contextWindow,"pointerup",this.handlePointerUp),uo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),mr(this.updatePoint)}}function lh(t,e){return e?{point:e(t.point)}:t}function c0(t,e){return{x:t.x-e.x,y:t.y-e.y}}function uh({point:t},e){return{point:t,delta:c0(t,gS(e)),offset:c0(t,_M(e)),velocity:wM(e,.1)}}function _M(t){return t[0]}function gS(t){return t[t.length-1]}function wM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=gS(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>mn(e)));)n--;if(!r)return{x:0,y:0};const s=gn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function EM(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ae(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ae(n,t,r.max):Math.min(t,n)),t}function h0(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function TM(t,{top:e,left:n,bottom:r,right:i}){return{x:h0(t.x,n,i),y:h0(t.y,e,r)}}function f0(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function SM(t,e){return{x:f0(t.x,e.x),y:f0(t.y,e.y)}}function xM(t,e){let n=.5;const r=vt(t),i=vt(e);return i>r?n=Bo(e.min,e.max-r,t.min):r>i&&(n=Bo(t.min,t.max-i,e.min)),bn(0,1,n)}function AM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Xf=.35;function IM(t=Xf){return t===!1?t=0:t===!0&&(t=Xf),{x:d0(t,"left","right"),y:d0(t,"top","bottom")}}function d0(t,e,n){return{min:p0(t,e),max:p0(t,n)}}function p0(t,e){return typeof t=="number"?t:t[e]||0}const PM=new WeakMap;class CM{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Le(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ua(h).point)},s=(h,f)=>{const{drag:p,dragPropagation:g,onDragStart:E}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=H4(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),jt(A=>{let w=this.getAxisMotionValue(A).get()||0;if(yn.test(w)){const{projection:v}=this.visualElement;if(v&&v.layout){const _=v.layout.layoutBox[A];_&&(w=vt(_)*(parseFloat(w)/100))}}this.originPoint[A]=w}),E&&Pe.postRender(()=>E(h,f)),qf(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:E,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:A}=f;if(g&&this.currentDirection===null){this.currentDirection=RM(A),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",f.point,A),this.updateAxis("y",f.point,A),this.visualElement.render(),x&&x(h,f)},a=(h,f)=>this.stop(h,f),l=()=>jt(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new mS(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:pS(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Pe.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Xa(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=EM(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Pi(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=TM(r.layoutBox,e):this.constraints=!1,this.elastic=IM(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&jt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=AM(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Pi(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=yM(r,i.root,this.visualElement.getTransformPagePoint());let o=SM(i.layout.layoutBox,s);if(n){const a=n(lM(o));this.hasMutatedConstraints=!!a,a&&(o=lS(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=jt(h=>{if(!Xa(h,n,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,E={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,E)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return qf(this.visualElement,e),r.start(ym(e,r,0,n,this.visualElement,!1))}stopAnimation(){jt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){jt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){jt(n=>{const{drag:r}=this.getProps();if(!Xa(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Ae(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Pi(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};jt(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=xM({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),jt(o=>{if(!Xa(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Ae(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;PM.set(this.visualElement,this);const e=this.visualElement.current,n=uo(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Pi(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Pe.read(r);const o=Ko(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(jt(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Xf,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Xa(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function RM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class kM extends Sr{constructor(e){super(e),this.removeGroupControls=Wt,this.removeListeners=Wt,this.controls=new CM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wt}unmount(){this.removeGroupControls(),this.removeListeners()}}const m0=t=>(e,n)=>{t&&Pe.postRender(()=>t(e,n))};class VM extends Sr{constructor(){super(...arguments),this.removePointerDownListener=Wt}onPointerDown(e){this.session=new mS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:pS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:m0(e),onStart:m0(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Pe.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=uo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const vl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function g0(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Fs={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Q.test(t))t=parseFloat(t);else return t;const n=g0(t,e.target.x),r=g0(t,e.target.y);return`${n}% ${r}%`}},NM={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=gr.parse(t);if(i.length>5)return r;const s=gr.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Ae(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class DM extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;yD(MM),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),vl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Pe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),am.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function yS(t){const[e,n]=eD(),r=D.useContext(ZE);return k.jsx(DM,{...t,layoutGroup:r,switchLayoutGroup:D.useContext(QT),isPresent:e,safeToRemove:n})}const MM={borderRadius:{...Fs,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Fs,borderTopRightRadius:Fs,borderBottomLeftRadius:Fs,borderBottomRightRadius:Fs,boxShadow:NM};function bM(t,e,n){const r=dt(t)?t:ts(t);return r.start(ym("",r,e,n)),r.animation}const LM=(t,e)=>t.depth-e.depth;class OM{constructor(){this.children=[],this.isDirty=!1}add(e){zp(this.children,e),this.isDirty=!0}remove(e){$p(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(LM),this.isDirty=!1,this.children.forEach(e)}}function FM(t,e){const n=At.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(mr(r),t(s-e))};return Pe.setup(r,!0),()=>mr(r)}const vS=["TopLeft","TopRight","BottomLeft","BottomRight"],jM=vS.length,y0=t=>typeof t=="string"?parseFloat(t):t,v0=t=>typeof t=="number"||Q.test(t);function BM(t,e,n,r,i,s){i?(t.opacity=Ae(0,n.opacity??1,UM(r)),t.opacityExit=Ae(e.opacity??1,0,zM(r))):s&&(t.opacity=Ae(e.opacity??1,n.opacity??1,r));for(let o=0;o<jM;o++){const a=`border${vS[o]}Radius`;let l=_0(e,a),c=_0(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||v0(l)===v0(c)?(t[a]=Math.max(Ae(y0(l),y0(c),r),0),(yn.test(c)||yn.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Ae(e.rotate||0,n.rotate||0,r))}function _0(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const UM=_S(0,.5,cT),zM=_S(.5,.95,Wt);function _S(t,e,n){return r=>r<t?0:r>e?1:n(Bo(t,e,r))}function w0(t,e){t.min=e.min,t.max=e.max}function Ft(t,e){w0(t.x,e.x),w0(t.y,e.y)}function E0(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function T0(t,e,n,r,i){return t-=e,t=uu(t,1/n,r),i!==void 0&&(t=uu(t,1/i,r)),t}function $M(t,e=0,n=1,r=.5,i,s=t,o=t){if(yn.test(e)&&(e=parseFloat(e),e=Ae(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ae(s.min,s.max,r);t===s&&(a-=e),t.min=T0(t.min,e,n,a,i),t.max=T0(t.max,e,n,a,i)}function S0(t,e,[n,r,i],s,o){$M(t,e[n],e[r],e[i],e.scale,s,o)}const WM=["x","scaleX","originX"],HM=["y","scaleY","originY"];function x0(t,e,n,r){S0(t.x,e,WM,n?n.x:void 0,r?r.x:void 0),S0(t.y,e,HM,n?n.y:void 0,r?r.y:void 0)}function A0(t){return t.translate===0&&t.scale===1}function wS(t){return A0(t.x)&&A0(t.y)}function I0(t,e){return t.min===e.min&&t.max===e.max}function KM(t,e){return I0(t.x,e.x)&&I0(t.y,e.y)}function P0(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function ES(t,e){return P0(t.x,e.x)&&P0(t.y,e.y)}function C0(t){return vt(t.x)/vt(t.y)}function R0(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class qM{constructor(){this.members=[]}add(e){zp(this.members,e),e.scheduleRender()}remove(e){if($p(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GM(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:f,rotateY:p,skewX:g,skewY:E}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),E&&(r+=`skewY(${E}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const ch=["","X","Y","Z"],QM={visibility:"hidden"},YM=1e3;let XM=0;function hh(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function TS(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=iS(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Pe,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&TS(r)}function SS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=XM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(eb),this.nodes.forEach(sb),this.nodes.forEach(ob),this.nodes.forEach(tb)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new OM)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Kp),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=$T(o)&&!X4(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=FM(f,250),vl.hasAnimatedSinceResize&&(vl.hasAnimatedSinceResize=!1,this.nodes.forEach(V0))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||c.getDefaultTransition()||hb,{onLayoutAnimationStart:x,onLayoutAnimationComplete:A}=c.getProps(),w=!this.targetLayout||!ES(this.targetLayout,g),v=!f&&p;if(this.options.layoutRoot||this.resumeFrom||v||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...sm(E,"layout"),onPlay:x,onComplete:A};(c.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(h,v)}else f||V0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),mr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(ab),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&TS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(k0);return}this.isUpdating||this.nodes.forEach(rb),this.isUpdating=!1,this.nodes.forEach(ib),this.nodes.forEach(JM),this.nodes.forEach(ZM),this.clearAllSnapshots();const a=At.now();Xe.delta=bn(0,1e3/60,a-Xe.timestamp),Xe.timestamp=a,Xe.isProcessing=!0,th.update.process(Xe),th.preRender.process(Xe),th.render.process(Xe),Xe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,am.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nb),this.sharedNodes.forEach(lb)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!vt(this.snapshot.measuredBox.x)&&!vt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Le(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!wS(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Dr(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),fb(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Le();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(db))){const{scroll:h}=this.root;h&&(Ri(a.x,h.offset.x),Ri(a.y,h.offset.y))}return a}removeElementScroll(o){var l;const a=Le();if(Ft(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&Ft(a,o),Ri(a.x,f.offset.x),Ri(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=Le();Ft(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ki(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Dr(h.latestValues)&&ki(l,h.latestValues)}return Dr(this.latestValues)&&ki(l,this.latestValues),l}removeTransform(o){const a=Le();Ft(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Dr(c.latestValues))continue;Qf(c.latestValues)&&c.updateSnapshot();const h=Le(),f=c.measurePageBox();Ft(h,f),x0(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Dr(this.latestValues)&&x0(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Xe.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Le(),this.relativeTargetOrigin=Le(),ho(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Le(),this.targetWithTransforms=Le()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ft(this.target,this.layout.layoutBox),fS(this.target,this.targetDelta)):Ft(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Le(),this.relativeTargetOrigin=Le(),ho(this.relativeTargetOrigin,this.target,g.target),Ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Qf(this.parent.latestValues)||hS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var E;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Xe.timestamp&&(l=!1),l)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;Ft(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;gM(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Le());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(E0(this.prevProjectionDelta.x,this.projectionDelta.x),E0(this.prevProjectionDelta.y,this.projectionDelta.y)),co(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!R0(this.projectionDelta.x,this.prevProjectionDelta.x)||!R0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ci(),this.projectionDelta=Ci(),this.projectionDeltaWithTransform=Ci()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},f=Ci();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Le(),g=l?l.source:void 0,E=this.layout?this.layout.source:void 0,x=g!==E,A=this.getStack(),w=!A||A.members.length<=1,v=!!(x&&!w&&this.options.crossfade===!0&&!this.path.some(cb));this.animationProgress=0;let _;this.mixTargetDelta=V=>{const b=V/1e3;N0(f.x,o.x,b),N0(f.y,o.y,b),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ho(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ub(this.relativeTarget,this.relativeTargetOrigin,p,b),_&&KM(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Le()),Ft(_,this.relativeTarget)),x&&(this.animationValues=h,BM(h,c,this.latestValues,b,v,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=b},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(mr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pe.update(()=>{vl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ts(0)),this.currentAnimation=bM(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(YM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&xS(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Le();const f=vt(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=vt(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Ft(a,l),ki(a,h),co(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new qM),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&hh("z",o,c,this.animationValues);for(let h=0;h<ch.length;h++)hh(`rotate${ch[h]}`,o,c,this.animationValues),hh(`skew${ch[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return QM;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=yl(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=yl(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Dr(this.latestValues)&&(g.transform=l?l({},""):"none",this.hasProjected=!1),g}const h=c.animationValues||c.latestValues;this.applyTransformsToTarget(),a.transform=GM(this.projectionDeltaWithTransform,this.treeScale,h),l&&(a.transform=l(h,a.transform));const{x:f,y:p}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,c.animationValues?a.opacity=c===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:a.opacity=c===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const g in Wo){if(h[g]===void 0)continue;const{correct:E,applyTo:x,isCSSVariable:A}=Wo[g],w=a.transform==="none"?h[g]:E(h[g],c);if(x){const v=x.length;for(let _=0;_<v;_++)a[x[_]]=w}else A?this.options.visualElement.renderState.vars[g]=w:a[g]=w}return this.options.layoutId&&(a.pointerEvents=c===this?yl(o==null?void 0:o.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(k0),this.root.sharedNodes.clear()}}}function JM(t){t.updateLayout()}function ZM(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?jt(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],g=vt(p);p.min=r[f].min,p.max=p.min+g}):xS(s,e.layoutBox,r)&&jt(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],g=vt(r[f]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const a=Ci();co(a,r,e.layoutBox);const l=Ci();o?co(l,t.applyTransform(i,!0),e.measuredBox):co(l,r,e.layoutBox);const c=!wS(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:g}=f;if(p&&g){const E=Le();ho(E,e.layoutBox,p.layoutBox);const x=Le();ho(x,r,g.layoutBox),ES(E,x)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=E,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function eb(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function tb(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function nb(t){t.clearSnapshot()}function k0(t){t.clearMeasurements()}function rb(t){t.isLayoutDirty=!1}function ib(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function V0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function sb(t){t.resolveTargetDelta()}function ob(t){t.calcProjection()}function ab(t){t.resetSkewAndRotation()}function lb(t){t.removeLeadSnapshot()}function N0(t,e,n){t.translate=Ae(e.translate,0,n),t.scale=Ae(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function D0(t,e,n,r){t.min=Ae(e.min,n.min,r),t.max=Ae(e.max,n.max,r)}function ub(t,e,n,r){D0(t.x,e.x,n.x,r),D0(t.y,e.y,n.y,r)}function cb(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const hb={duration:.45,ease:[.4,0,.1,1]},M0=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),b0=M0("applewebkit/")&&!M0("chrome/")?Math.round:Wt;function L0(t){t.min=b0(t.min),t.max=b0(t.max)}function fb(t){L0(t.x),L0(t.y)}function xS(t,e,n){return t==="position"||t==="preserve-aspect"&&!pM(C0(e),C0(n),.2)}function db(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const pb=SS({attachResizeListener:(t,e)=>Ko(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),fh={current:void 0},AS=SS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!fh.current){const t=new pb({});t.mount(window),t.setOptions({layoutScroll:!0}),fh.current=t}return fh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),mb={pan:{Feature:VM},drag:{Feature:kM,ProjectionNode:AS,MeasureLayout:yS}};function O0(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Pe.postRender(()=>s(e,ua(e)))}class gb extends Sr{mount(){const{current:e}=this.node;e&&(this.unmount=K4(e,(n,r)=>(O0(this.node,r,"Start"),i=>O0(this.node,i,"End"))))}unmount(){}}class yb extends Sr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=oa(Ko(this.node.current,"focus",()=>this.onFocus()),Ko(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function F0(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Pe.postRender(()=>s(e,ua(e)))}class vb extends Sr{mount(){const{current:e}=this.node;e&&(this.unmount=Y4(e,(n,r)=>(F0(this.node,r,"Start"),(i,{success:s})=>F0(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Jf=new WeakMap,dh=new WeakMap,_b=t=>{const e=Jf.get(t.target);e&&e(t)},wb=t=>{t.forEach(_b)};function Eb({root:t,...e}){const n=t||document;dh.has(n)||dh.set(n,{});const r=dh.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(wb,{root:t,...e})),r[i]}function Tb(t,e,n){const r=Eb(e);return Jf.set(t,n),r.observe(t),()=>{Jf.delete(t),r.unobserve(t)}}const Sb={some:0,all:1};class xb extends Sr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:Sb[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=c?h:f;p&&p(l)};return Tb(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Ab(e,n))&&this.startObserver()}unmount(){}}function Ab({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const Ib={inView:{Feature:xb},tap:{Feature:vb},focus:{Feature:yb},hover:{Feature:gb}},Pb={layout:{ProjectionNode:AS,MeasureLayout:yS}},Zf={current:null},IS={current:!1};function Cb(){if(IS.current=!0,!!Bp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Zf.current=t.matches;t.addListener(e),e()}else Zf.current=!1}const Rb=new WeakMap;function kb(t,e,n){for(const r in e){const i=e[r],s=n[r];if(dt(i))t.addValue(r,i);else if(dt(s))t.addValue(r,ts(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,ts(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const j0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Vb{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=im,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=At.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Pe.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Qu(n),this.isVariantNode=qT(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const g=f[p];l[p]!==void 0&&dt(g)&&g.set(l[p],!1)}}mount(e){this.current=e,Rb.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),IS.current||Cb(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Zf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),mr(this.notifyUpdate),mr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ms.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Pe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ns){const n=ns[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Le()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<j0.length;r++){const i=j0[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=kb(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ts(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(eT(r)||nT(r))?r=parseFloat(r):!Z4(r)&&gr.test(n)&&(r=FT(e,n)),this.setBaseTarget(e,dt(r)?r.get():r)),dt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=mm(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!dt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Kp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class PS extends Vb{constructor(){super(...arguments),this.KeyframeResolver=U4}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;dt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function CS(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}function Nb(t){return window.getComputedStyle(t)}class Db extends PS{constructor(){super(...arguments),this.type="html",this.renderInstance=CS}readValueFromInstance(e,n){var r;if(ms.has(n))return(r=this.projection)!=null&&r.isProjecting?Bf(n):o4(e,n);{const i=Nb(e),s=(Qp(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return dS(e,n)}build(e,n,r){fm(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return gm(e,n,r)}}const RS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Mb(t,e,n,r){CS(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(RS.has(i)?i:hm(i),e.attrs[i])}class bb extends PS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Le}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ms.has(n)){const r=OT(n);return r&&r.default||0}return n=RS.has(n)?n:hm(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return rS(e,n,r)}build(e,n,r){ZT(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Mb(e,n,r,i)}mount(e){this.isSVGTag=tS(e.tagName),super.mount(e)}}const Lb=(t,e)=>pm(t)?new bb(e):new Db(e,{allowProjection:t!==D.Fragment}),Ob=MD({...oM,...Ib,...mb,...Pb},Lb),B0=sD(Ob),Fb=600,U0=300,z0=({table:t,isAddButton:e,onClick:n,onDoubleClick:r,onLongPress:i})=>{const s=D.useRef(null),o=D.useRef(null),a=D.useRef(0),l=f=>{i&&(o.current&&(clearTimeout(o.current),o.current=null),o.current=setTimeout(()=>{i(),o.current&&(clearTimeout(o.current),o.current=null)},Fb))},c=()=>{o.current&&(clearTimeout(o.current),o.current=null)};if(D.useEffect(()=>{const f=s.current;if(!f)return;const p=g=>{var w;c();const E=Date.now(),x=a.current||0,A=E-x;if(A>0&&A<=U0){try{g.preventDefault()}catch{}(w=g.stopPropagation)==null||w.call(g),r==null||r(),a.current=0;return}a.current=E,window.setTimeout(()=>{a.current=0},U0+50)};return f.addEventListener("touchend",p,{passive:!1}),()=>{f.removeEventListener("touchend",p),c()}},[r]),D.useEffect(()=>()=>c(),[]),e)return k.jsx(B0.button,{onClick:n,whileHover:{scale:1.03},whileTap:{scale:.97},className:"h-40 rounded-2xl border-2 border-dashed border-gray-300 flex items-center justify-center transition hover:border-blue-500 hover:text-blue-600 bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Add Table",children:k.jsx("span",{className:"text-gray-500 font-medium text-lg",children:"+ Add Table"})});const h=(t==null?void 0:t.status)==="occupied";return k.jsxs(B0.div,{ref:s,role:"button",tabIndex:0,whileHover:{scale:1.02},whileTap:{scale:.98},onDoubleClick:()=>r==null?void 0:r(),onKeyDown:f=>{f.key==="Enter"&&(r==null||r())},onTouchStart:f=>l(),onTouchEnd:()=>c(),onTouchCancel:()=>c(),onTouchMove:()=>c(),className:`relative h-40 rounded-2xl shadow-md hover:shadow-lg transition cursor-pointer flex flex-col items-center justify-center border p-4
        ${h?"bg-green-100 border-green-400 text-green-900":"bg-white border-gray-200 text-gray-800"}`,"aria-pressed":h,children:[(t==null?void 0:t.status)&&k.jsx("div",{className:`absolute top-2 right-2 h-3 w-3 rounded-full ${t.status==="available"?"bg-green-500":t.status==="occupied"?"bg-green-700":"bg-yellow-400"}`,title:t.status}),k.jsx("span",{className:"text-xl font-semibold",children:(t==null?void 0:t.name)??"Table"}),(t==null?void 0:t.status)&&k.jsx("span",{className:"text-sm mt-1 capitalize",children:t.status})]})},jb=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!1),[i,s]=D.useState(""),[o,a]=D.useState(!1),l=h1(),c=D.useCallback(async()=>{a(!0);try{const p=await Op();e(p||[])}catch(p){console.error("Error loading tables:",p)}finally{a(!1)}},[]);D.useEffect(()=>{c();const p=()=>{c()};return window.addEventListener("tablesUpdated",p),()=>{window.removeEventListener("tablesUpdated",p)}},[c]);const h=p=>{p&&l(`/order?tableId=${encodeURIComponent(p)}`)},f=async()=>{const p=i.trim();if(p)try{const g=await QV(p);e(E=>[...E,g]),s(""),r(!1),window.dispatchEvent(new CustomEvent("tablesUpdated"))}catch(g){console.error("Error adding table:",g),alert("Failed to add table.")}};return k.jsxs("div",{className:"min-h-screen bg-gray-100 px-4 py-8 md:px-8",children:[k.jsxs("div",{className:"max-w-6xl mx-auto",children:[k.jsxs("header",{className:"mb-8",children:[k.jsx("h1",{className:"text-4xl font-semibold text-gray-900",children:"Tables"}),k.jsx("p",{className:"text-gray-600 mt-2",children:"Manage all your restaurant tables from here."})]}),o?k.jsx("div",{className:"text-gray-500 mb-6",children:"Loading tables..."}):null,k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:[[...t].sort((p,g)=>{const E=parseInt(p.name.replace(/\D/g,""),10)||0,x=parseInt(g.name.replace(/\D/g,""),10)||0;return E-x}).map(p=>{const g=p.id??p._id??p.name;return k.jsx(z0,{table:p,onDoubleClick:()=>h(p.id??p._id),onLongPress:()=>h(p.id??p._id)},g)}),k.jsx(z0,{isAddButton:!0,onClick:()=>r(!0)})]})]}),k.jsx(Ku,{isOpen:n,onClose:()=>r(!1),children:k.jsxs("div",{className:"p-4",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Add New Table"}),k.jsx("input",{type:"text",value:i,onChange:p=>s(p.target.value),placeholder:"Enter table name (e.g. T1)",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4",onKeyDown:p=>{p.key==="Enter"&&f()}}),k.jsxs("div",{className:"flex justify-end gap-2",children:[k.jsx("button",{onClick:()=>{s(""),r(!1)},className:"px-4 py-2 rounded-lg border",children:"Cancel"}),k.jsx("button",{onClick:f,className:"bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition",children:"Done"})]})]})})]})},kS=({item:t,quantity:e,onQuantityChange:n})=>{var r;return t?k.jsxs("div",{className:"card border rounded-lg shadow-md p-4 bg-white flex flex-col",children:[k.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:t.name}),k.jsxs("p",{className:"text-gray-700 font-semibold mb-2",children:["",(r=t.price)==null?void 0:r.toFixed(2)]}),t.ingredients&&k.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[k.jsx("span",{className:"font-medium",children:"Ingredients:"})," ",t.ingredients]}),t.specialNote&&k.jsx("p",{className:"text-xs italic text-gray-500 mb-3",children:t.specialNote}),k.jsxs("div",{className:"mt-auto flex items-center gap-2",children:[k.jsx("button",{onClick:()=>n(Math.max(0,e-1)),className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300",children:"-"}),k.jsx("span",{className:"px-2",children:e}),k.jsx("button",{onClick:()=>n(e+1),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:"+"})]})]}):null},Bb=()=>{var O,P;const[t,e]=D.useState([]),[n,r]=D.useState([]),[i,s]=D.useState([]),[o,a]=D.useState(""),[l,c]=D.useState(""),[h,f]=D.useState(!0),[p,g]=D.useState({}),[E,x]=D.useState(!1),[A,w]=D.useState(!1),v=as();D.useEffect(()=>{let y=!0;return(async()=>{x(!0);try{const[I,C,N]=await Promise.all([Op(),jp(),Fp()]);if(!y)return;e(I||[]),r(C||[]),s(N||[]);const Y=new URLSearchParams(v.search).get("tableId");Y&&(a(Y),f(!0)),C&&C.length>0&&!l&&c(C[0].id??C[0]._id??"")}catch(I){console.error("Error fetching order data:",I),alert("Failed to load order data. Please try again.")}finally{x(!1)}})(),()=>{y=!1}},[v.search]);const _=(y,S)=>{g(I=>{const C={...I};return!S||S<=0?delete C[y]:C[y]=S,C})},V=i.reduce((y,S)=>{const I=p[S.id]||0;return y+(S.price||0)*I},0),b=async()=>{if(!o){alert("Please select a table before submitting the order."),f(!0);return}if(!(Object.keys(p).length===0&&!confirm("You have no items in the order. Submit empty order?"))){w(!0);try{const y=Object.entries(p).map(([I,C])=>({itemId:I,quantity:C})),S={tableId:o,staffId:l||null,items:y,total:V,createdAt:new Date().toISOString()};await eN(S);try{await XE(o,"occupied")}catch(I){console.error("Failed to update table status:",I)}window.dispatchEvent(new CustomEvent("tablesUpdated")),alert("Order submitted successfully!"),g({}),c(""),f(!1)}catch(y){console.error("Error submitting order:",y),alert("Failed to submit order. Try again.")}finally{w(!1)}}};return k.jsxs("div",{className:"container mx-auto py-6",children:[k.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Place Order"}),k.jsxs(Ku,{isOpen:h,onClose:()=>f(!1),children:[k.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Select Table and Staff"}),k.jsx("label",{className:"block text-sm font-medium mb-1",children:"Table"}),k.jsxs("select",{value:o,onChange:y=>a(y.target.value),className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[k.jsx("option",{value:"",children:"Select Table"}),t.map(y=>k.jsx("option",{value:y.id??y._id,children:y.name},y.id??y._id??y.name))]}),k.jsx("label",{className:"block text-sm font-medium mb-1",children:"Staff (optional)"}),k.jsxs("select",{value:l,onChange:y=>c(y.target.value),className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[k.jsx("option",{value:"",children:"Select Staff (Optional)"}),n.map(y=>k.jsx("option",{value:y.id??y._id,children:y.name},y.id??y._id))]}),k.jsx("div",{className:"flex justify-end",children:k.jsx("button",{onClick:()=>f(!1),disabled:!o,className:`px-4 py-2 rounded-lg transition-colors ${o?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600"}`,children:"Done"})})]}),E&&k.jsx("div",{className:"text-gray-500 mb-4",children:"Loading menu & data..."}),o?k.jsxs("div",{className:"mb-4 p-4 bg-white rounded shadow flex items-center justify-between",children:[k.jsxs("div",{children:[k.jsx("div",{className:"text-lg font-medium text-gray-800",children:((O=t.find(y=>(y.id??y._id)===o))==null?void 0:O.name)||"Selected Table"}),k.jsxs("div",{className:"text-sm text-gray-500",children:["Staff:"," ",((P=n.find(y=>(y.id??y._id)===l))==null?void 0:P.name)||"Not assigned"]})]}),k.jsx("div",{children:k.jsx("button",{onClick:()=>f(!0),className:"px-3 py-2 bg-gray-100 rounded border hover:bg-gray-200",children:"Change"})})]}):null,k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-6",children:i.map(y=>k.jsx(kS,{item:y,quantity:p[y.id]||0,onQuantityChange:S=>_(y.id??y._id,S)},y.id??y._id))}),k.jsxs("div",{className:"bg-white shadow rounded-lg p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[k.jsxs("div",{className:"text-xl font-semibold text-gray-800",children:["Total: ",V.toFixed(2)]}),k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("button",{onClick:()=>f(!0),className:"px-3 py-2 rounded border hover:bg-gray-50",children:"Select Table / Staff"}),k.jsx("button",{onClick:b,disabled:A||!o,className:`px-4 py-2 rounded-lg transition-colors ${o?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,children:A?"Submitting...":"Submit Order"})]})]})]})},Ub=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!1),[i,s]=D.useState({name:"",price:"",ingredients:"",specialNote:""});D.useEffect(()=>{const l=JV(c=>{e(c)});return()=>l()},[]);const o=l=>{const{name:c,value:h}=l.target;s(f=>({...f,[c]:h}))},a=async()=>{if(!i.name||!i.price){alert("Item name and price are required.");return}try{const l=parseFloat(i.price);if(isNaN(l)){alert("Price must be a valid number.");return}const c={...i,price:l},h=await XV(c);console.log("Added Item:",h),s({name:"",price:"",ingredients:"",specialNote:""}),r(!1)}catch(l){console.error("Error adding menu item:",l),alert("Failed to add menu item.")}};return k.jsxs("div",{className:"container mx-auto",children:[k.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Menu"}),k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[k.jsx("button",{onClick:()=>r(!0),className:"card border-2 border-dashed border-gray-400 flex items-center justify-center h-40",children:k.jsx("span",{className:"text-gray-500 font-medium",children:"+ Add Item"})}),t.map(l=>k.jsx(kS,{item:l,quantity:0,onQuantityChange:()=>{}},l.id))]}),k.jsxs(Ku,{isOpen:n,onClose:()=>r(!1),children:[k.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Add New Menu Item"}),k.jsx("input",{type:"text",name:"name",value:i.name,onChange:o,placeholder:"Item Name",className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),k.jsx("input",{type:"text",name:"price",value:i.price,onChange:o,placeholder:"Price (with GST)",className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),k.jsx("input",{type:"text",name:"ingredients",value:i.ingredients,onChange:o,placeholder:"Ingredients (comma-separated)",className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),k.jsx("textarea",{name:"specialNote",value:i.specialNote,onChange:o,placeholder:"Special Note (optional)",className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),k.jsx("div",{className:"flex justify-end",children:k.jsx("button",{onClick:a,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Done"})})]})]})},zb=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!1),[i,s]=D.useState("");D.useEffect(()=>{(async()=>{try{const l=await jp();e(l)}catch(l){console.error("Error loading staff:",l)}})()},[]);const o=async()=>{if(i.trim())try{const a=await ZV(i);e([...t,a]),s(""),r(!1)}catch(a){console.error("Error adding staff:",a),alert("Failed to add staff member.")}else alert("Staff name is required.")};return k.jsxs("div",{className:"container mx-auto",children:[k.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Staff"}),k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[k.jsx("button",{onClick:()=>r(!0),className:"card border-2 border-dashed border-gray-400 flex items-center justify-center h-40",children:k.jsx("span",{className:"text-gray-500 font-medium",children:"+ Add Staff"})}),t.map(a=>k.jsx("div",{className:"card flex items-center justify-center h-40",children:k.jsx("span",{className:"text-xl font-semibold text-gray-800",children:a.name})},a.id))]}),k.jsxs(Ku,{isOpen:n,onClose:()=>r(!1),children:[k.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Add New Staff"}),k.jsx("input",{type:"text",value:i,onChange:a=>s(a.target.value),placeholder:"Enter staff name",className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),k.jsx("div",{className:"flex justify-end",children:k.jsx("button",{onClick:o,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Done"})})]})]})},$b=()=>{const[t,e]=D.useState([]),[n,r]=D.useState([]),[i,s]=D.useState([]);D.useEffect(()=>{(async()=>{try{const[h,f]=await Promise.all([Op(),Fp()]);r(h||[]),s(f||[])}catch(h){console.error("Error fetching tables or menu items:",h)}})();const c=JE(h=>{const f=h.map(p=>({...p,createdAt:new Date(p.createdAt)})).sort((p,g)=>g.createdAt-p.createdAt);e(f)},h=>console.error("Realtime orders error:",h));return()=>c()},[]);const o=l=>{const c=n.find(h=>(h.id??h._id)===l);return c?c.name:"Unknown"},a=l=>{const c=i.find(h=>(h.id??h._id)===l);return c?c.name:"Unknown"};return k.jsxs("div",{className:"container mx-auto py-6",children:[k.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Kitchen Orders"}),t.length===0?k.jsx("p",{className:"text-gray-600",children:"No orders currently."}):k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(l=>k.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[k.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Table: ",o(l.tableId)]}),k.jsx("ul",{className:"text-gray-600 mb-2",children:l.items.map((c,h)=>k.jsxs("li",{children:[a(c.itemId)," x ",c.quantity]},h))}),k.jsxs("p",{className:"text-gray-800 font-semibold",children:["Total: ",l.total.toFixed(2)]}),l.staffId&&k.jsxs("p",{className:"text-sm text-gray-500",children:["Staff ID: ",l.staffId]})]},l.id))})]})};var Wb=Object.defineProperty,cu=Object.getOwnPropertySymbols,VS=Object.prototype.hasOwnProperty,NS=Object.prototype.propertyIsEnumerable,$0=(t,e,n)=>e in t?Wb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ed=(t,e)=>{for(var n in e||(e={}))VS.call(e,n)&&$0(t,n,e[n]);if(cu)for(var n of cu(e))NS.call(e,n)&&$0(t,n,e[n]);return t},td=(t,e)=>{var n={};for(var r in t)VS.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&cu)for(var r of cu(t))e.indexOf(r)<0&&NS.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ei;(t=>{const e=class re{constructor(l,c,h,f){if(this.version=l,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],l<re.MIN_VERSION||l>re.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let p=[];for(let E=0;E<this.size;E++)p.push(!1);for(let E=0;E<this.size;E++)this.modules.push(p.slice()),this.isFunction.push(p.slice());this.drawFunctionPatterns();const g=this.addEccAndInterleave(h);if(this.drawCodewords(g),f==-1){let E=1e9;for(let x=0;x<8;x++){this.applyMask(x),this.drawFormatBits(x);const A=this.getPenaltyScore();A<E&&(f=x,E=A),this.applyMask(x)}}i(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(l,c){const h=t.QrSegment.makeSegments(l);return re.encodeSegments(h,c)}static encodeBinary(l,c){const h=t.QrSegment.makeBytes(l);return re.encodeSegments([h],c)}static encodeSegments(l,c,h=1,f=40,p=-1,g=!0){if(!(re.MIN_VERSION<=h&&h<=f&&f<=re.MAX_VERSION)||p<-1||p>7)throw new RangeError("Invalid value");let E,x;for(E=h;;E++){const _=re.getNumDataCodewords(E,c)*8,V=o.getTotalBits(l,E);if(V<=_){x=V;break}if(E>=f)throw new RangeError("Data too long")}for(const _ of[re.Ecc.MEDIUM,re.Ecc.QUARTILE,re.Ecc.HIGH])g&&x<=re.getNumDataCodewords(E,_)*8&&(c=_);let A=[];for(const _ of l){n(_.mode.modeBits,4,A),n(_.numChars,_.mode.numCharCountBits(E),A);for(const V of _.getData())A.push(V)}i(A.length==x);const w=re.getNumDataCodewords(E,c)*8;i(A.length<=w),n(0,Math.min(4,w-A.length),A),n(0,(8-A.length%8)%8,A),i(A.length%8==0);for(let _=236;A.length<w;_^=253)n(_,8,A);let v=[];for(;v.length*8<A.length;)v.push(0);return A.forEach((_,V)=>v[V>>>3]|=_<<7-(V&7)),new re(E,c,v,p)}getModule(l,c){return 0<=l&&l<this.size&&0<=c&&c<this.size&&this.modules[c][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let h=0;h<this.size;h++)this.setFunctionModule(6,h,h%2==0),this.setFunctionModule(h,6,h%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),c=l.length;for(let h=0;h<c;h++)for(let f=0;f<c;f++)h==0&&f==0||h==0&&f==c-1||h==c-1&&f==0||this.drawAlignmentPattern(l[h],l[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const c=this.errorCorrectionLevel.formatBits<<3|l;let h=c;for(let p=0;p<10;p++)h=h<<1^(h>>>9)*1335;const f=(c<<10|h)^21522;i(f>>>15==0);for(let p=0;p<=5;p++)this.setFunctionModule(8,p,r(f,p));this.setFunctionModule(8,7,r(f,6)),this.setFunctionModule(8,8,r(f,7)),this.setFunctionModule(7,8,r(f,8));for(let p=9;p<15;p++)this.setFunctionModule(14-p,8,r(f,p));for(let p=0;p<8;p++)this.setFunctionModule(this.size-1-p,8,r(f,p));for(let p=8;p<15;p++)this.setFunctionModule(8,this.size-15+p,r(f,p));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let h=0;h<12;h++)l=l<<1^(l>>>11)*7973;const c=this.version<<12|l;i(c>>>18==0);for(let h=0;h<18;h++){const f=r(c,h),p=this.size-11+h%3,g=Math.floor(h/3);this.setFunctionModule(p,g,f),this.setFunctionModule(g,p,f)}}drawFinderPattern(l,c){for(let h=-4;h<=4;h++)for(let f=-4;f<=4;f++){const p=Math.max(Math.abs(f),Math.abs(h)),g=l+f,E=c+h;0<=g&&g<this.size&&0<=E&&E<this.size&&this.setFunctionModule(g,E,p!=2&&p!=4)}}drawAlignmentPattern(l,c){for(let h=-2;h<=2;h++)for(let f=-2;f<=2;f++)this.setFunctionModule(l+f,c+h,Math.max(Math.abs(f),Math.abs(h))!=1)}setFunctionModule(l,c,h){this.modules[c][l]=h,this.isFunction[c][l]=!0}addEccAndInterleave(l){const c=this.version,h=this.errorCorrectionLevel;if(l.length!=re.getNumDataCodewords(c,h))throw new RangeError("Invalid argument");const f=re.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][c],p=re.ECC_CODEWORDS_PER_BLOCK[h.ordinal][c],g=Math.floor(re.getNumRawDataModules(c)/8),E=f-g%f,x=Math.floor(g/f);let A=[];const w=re.reedSolomonComputeDivisor(p);for(let _=0,V=0;_<f;_++){let b=l.slice(V,V+x-p+(_<E?0:1));V+=b.length;const O=re.reedSolomonComputeRemainder(b,w);_<E&&b.push(0),A.push(b.concat(O))}let v=[];for(let _=0;_<A[0].length;_++)A.forEach((V,b)=>{(_!=x-p||b>=E)&&v.push(V[_])});return i(v.length==g),v}drawCodewords(l){if(l.length!=Math.floor(re.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let h=this.size-1;h>=1;h-=2){h==6&&(h=5);for(let f=0;f<this.size;f++)for(let p=0;p<2;p++){const g=h-p,x=(h+1&2)==0?this.size-1-f:f;!this.isFunction[x][g]&&c<l.length*8&&(this.modules[x][g]=r(l[c>>>3],7-(c&7)),c++)}}i(c==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let h=0;h<this.size;h++){let f;switch(l){case 0:f=(h+c)%2==0;break;case 1:f=c%2==0;break;case 2:f=h%3==0;break;case 3:f=(h+c)%3==0;break;case 4:f=(Math.floor(h/3)+Math.floor(c/2))%2==0;break;case 5:f=h*c%2+h*c%3==0;break;case 6:f=(h*c%2+h*c%3)%2==0;break;case 7:f=((h+c)%2+h*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][h]&&f&&(this.modules[c][h]=!this.modules[c][h])}}getPenaltyScore(){let l=0;for(let p=0;p<this.size;p++){let g=!1,E=0,x=[0,0,0,0,0,0,0];for(let A=0;A<this.size;A++)this.modules[p][A]==g?(E++,E==5?l+=re.PENALTY_N1:E>5&&l++):(this.finderPenaltyAddHistory(E,x),g||(l+=this.finderPenaltyCountPatterns(x)*re.PENALTY_N3),g=this.modules[p][A],E=1);l+=this.finderPenaltyTerminateAndCount(g,E,x)*re.PENALTY_N3}for(let p=0;p<this.size;p++){let g=!1,E=0,x=[0,0,0,0,0,0,0];for(let A=0;A<this.size;A++)this.modules[A][p]==g?(E++,E==5?l+=re.PENALTY_N1:E>5&&l++):(this.finderPenaltyAddHistory(E,x),g||(l+=this.finderPenaltyCountPatterns(x)*re.PENALTY_N3),g=this.modules[A][p],E=1);l+=this.finderPenaltyTerminateAndCount(g,E,x)*re.PENALTY_N3}for(let p=0;p<this.size-1;p++)for(let g=0;g<this.size-1;g++){const E=this.modules[p][g];E==this.modules[p][g+1]&&E==this.modules[p+1][g]&&E==this.modules[p+1][g+1]&&(l+=re.PENALTY_N2)}let c=0;for(const p of this.modules)c=p.reduce((g,E)=>g+(E?1:0),c);const h=this.size*this.size,f=Math.ceil(Math.abs(c*20-h*10)/h)-1;return i(0<=f&&f<=9),l+=f*re.PENALTY_N4,i(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let h=[6];for(let f=this.size-7;h.length<l;f-=c)h.splice(1,0,f);return h}}static getNumRawDataModules(l){if(l<re.MIN_VERSION||l>re.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*l+128)*l+64;if(l>=2){const h=Math.floor(l/7)+2;c-=(25*h-10)*h-55,l>=7&&(c-=36)}return i(208<=c&&c<=29648),c}static getNumDataCodewords(l,c){return Math.floor(re.getNumRawDataModules(l)/8)-re.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l]*re.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let c=[];for(let f=0;f<l-1;f++)c.push(0);c.push(1);let h=1;for(let f=0;f<l;f++){for(let p=0;p<c.length;p++)c[p]=re.reedSolomonMultiply(c[p],h),p+1<c.length&&(c[p]^=c[p+1]);h=re.reedSolomonMultiply(h,2)}return c}static reedSolomonComputeRemainder(l,c){let h=c.map(f=>0);for(const f of l){const p=f^h.shift();h.push(0),c.forEach((g,E)=>h[E]^=re.reedSolomonMultiply(g,p))}return h}static reedSolomonMultiply(l,c){if(l>>>8||c>>>8)throw new RangeError("Byte out of range");let h=0;for(let f=7;f>=0;f--)h=h<<1^(h>>>7)*285,h^=(c>>>f&1)*l;return i(h>>>8==0),h}finderPenaltyCountPatterns(l){const c=l[1];i(c<=this.size*3);const h=c>0&&l[2]==c&&l[3]==c*3&&l[4]==c&&l[5]==c;return(h&&l[0]>=c*4&&l[6]>=c?1:0)+(h&&l[6]>=c*4&&l[0]>=c?1:0)}finderPenaltyTerminateAndCount(l,c,h){return l&&(this.finderPenaltyAddHistory(c,h),c=0),c+=this.size,this.finderPenaltyAddHistory(c,h),this.finderPenaltyCountPatterns(h)}finderPenaltyAddHistory(l,c){c[0]==0&&(l+=this.size),c.pop(),c.unshift(l)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(a,l,c){if(l<0||l>31||a>>>l)throw new RangeError("Value out of range");for(let h=l-1;h>=0;h--)c.push(a>>>h&1)}function r(a,l){return(a>>>l&1)!=0}function i(a){if(!a)throw new Error("Assertion error")}const s=class Ve{constructor(l,c,h){if(this.mode=l,this.numChars=c,this.bitData=h,c<0)throw new RangeError("Invalid argument");this.bitData=h.slice()}static makeBytes(l){let c=[];for(const h of l)n(h,8,c);return new Ve(Ve.Mode.BYTE,l.length,c)}static makeNumeric(l){if(!Ve.isNumeric(l))throw new RangeError("String contains non-numeric characters");let c=[];for(let h=0;h<l.length;){const f=Math.min(l.length-h,3);n(parseInt(l.substring(h,h+f),10),f*3+1,c),h+=f}return new Ve(Ve.Mode.NUMERIC,l.length,c)}static makeAlphanumeric(l){if(!Ve.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],h;for(h=0;h+2<=l.length;h+=2){let f=Ve.ALPHANUMERIC_CHARSET.indexOf(l.charAt(h))*45;f+=Ve.ALPHANUMERIC_CHARSET.indexOf(l.charAt(h+1)),n(f,11,c)}return h<l.length&&n(Ve.ALPHANUMERIC_CHARSET.indexOf(l.charAt(h)),6,c),new Ve(Ve.Mode.ALPHANUMERIC,l.length,c)}static makeSegments(l){return l==""?[]:Ve.isNumeric(l)?[Ve.makeNumeric(l)]:Ve.isAlphanumeric(l)?[Ve.makeAlphanumeric(l)]:[Ve.makeBytes(Ve.toUtf8ByteArray(l))]}static makeEci(l){let c=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)n(l,8,c);else if(l<16384)n(2,2,c),n(l,14,c);else if(l<1e6)n(6,3,c),n(l,21,c);else throw new RangeError("ECI assignment value out of range");return new Ve(Ve.Mode.ECI,0,c)}static isNumeric(l){return Ve.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return Ve.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,c){let h=0;for(const f of l){const p=f.mode.numCharCountBits(c);if(f.numChars>=1<<p)return 1/0;h+=4+p+f.bitData.length}return h}static toUtf8ByteArray(l){l=encodeURI(l);let c=[];for(let h=0;h<l.length;h++)l.charAt(h)!="%"?c.push(l.charCodeAt(h)):(c.push(parseInt(l.substring(h+1,h+3),16)),h+=2);return c}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;t.QrSegment=s})(ei||(ei={}));(t=>{(e=>{const n=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(ei||(ei={}));(t=>{(e=>{const n=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(ei||(ei={}));var Vi=ei;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Hb={L:Vi.QrCode.Ecc.LOW,M:Vi.QrCode.Ecc.MEDIUM,Q:Vi.QrCode.Ecc.QUARTILE,H:Vi.QrCode.Ecc.HIGH},DS=128,MS="L",bS="#FFFFFF",LS="#000000",OS=!1,FS=1,Kb=4,qb=0,Gb=.1;function jS(t,e=0){const n=[];return t.forEach(function(r,i){let s=null;r.forEach(function(o,a){if(!o&&s!==null){n.push(`M${s+e} ${i+e}h${a-s}v1H${s+e}z`),s=null;return}if(a===r.length-1){if(!o)return;s===null?n.push(`M${a+e},${i+e} h1v1H${a+e}z`):n.push(`M${s+e},${i+e} h${a+1-s}v1H${s+e}z`);return}o&&s===null&&(s=a)})}),n.join("")}function BS(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((i,s)=>s<e.x||s>=e.x+e.w?i:!1))}function Qb(t,e,n,r){if(r==null)return null;const i=t.length+n*2,s=Math.floor(e*Gb),o=i/e,a=(r.width||s)*o,l=(r.height||s)*o,c=r.x==null?t.length/2-a/2:r.x*o,h=r.y==null?t.length/2-l/2:r.y*o,f=r.opacity==null?1:r.opacity;let p=null;if(r.excavate){let E=Math.floor(c),x=Math.floor(h),A=Math.ceil(a+c-E),w=Math.ceil(l+h-x);p={x:E,y:x,w:A,h:w}}const g=r.crossOrigin;return{x:c,y:h,h:l,w:a,excavation:p,opacity:f,crossOrigin:g}}function Yb(t,e){return e!=null?Math.max(Math.floor(e),0):t?Kb:qb}function US({value:t,level:e,minVersion:n,includeMargin:r,marginSize:i,imageSettings:s,size:o,boostLevel:a}){let l=me.useMemo(()=>{const E=(Array.isArray(t)?t:[t]).reduce((x,A)=>(x.push(...Vi.QrSegment.makeSegments(A)),x),[]);return Vi.QrCode.encodeSegments(E,Hb[e],n,void 0,void 0,a)},[t,e,n,a]);const{cells:c,margin:h,numCells:f,calculatedImageSettings:p}=me.useMemo(()=>{let g=l.getModules();const E=Yb(r,i),x=g.length+E*2,A=Qb(g,o,E,s);return{cells:g,margin:E,numCells:x,calculatedImageSettings:A}},[l,o,s,r,i]);return{qrcode:l,margin:h,cells:c,numCells:f,calculatedImageSettings:p}}var Xb=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Jb=me.forwardRef(function(e,n){const r=e,{value:i,size:s=DS,level:o=MS,bgColor:a=bS,fgColor:l=LS,includeMargin:c=OS,minVersion:h=FS,boostLevel:f,marginSize:p,imageSettings:g}=r,x=td(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:A}=x,w=td(x,["style"]),v=g==null?void 0:g.src,_=me.useRef(null),V=me.useRef(null),b=me.useCallback(Y=>{_.current=Y,typeof n=="function"?n(Y):n&&(n.current=Y)},[n]),[O,P]=me.useState(!1),{margin:y,cells:S,numCells:I,calculatedImageSettings:C}=US({value:i,level:o,minVersion:h,boostLevel:f,includeMargin:c,marginSize:p,imageSettings:g,size:s});me.useEffect(()=>{if(_.current!=null){const Y=_.current,ne=Y.getContext("2d");if(!ne)return;let ve=S;const J=V.current,U=C!=null&&J!==null&&J.complete&&J.naturalHeight!==0&&J.naturalWidth!==0;U&&C.excavation!=null&&(ve=BS(S,C.excavation));const K=window.devicePixelRatio||1;Y.height=Y.width=s*K;const G=s/I*K;ne.scale(G,G),ne.fillStyle=a,ne.fillRect(0,0,I,I),ne.fillStyle=l,Xb?ne.fill(new Path2D(jS(ve,y))):S.forEach(function(pe,ue){pe.forEach(function(te,be){te&&ne.fillRect(be+y,ue+y,1,1)})}),C&&(ne.globalAlpha=C.opacity),U&&ne.drawImage(J,C.x+y,C.y+y,C.w,C.h)}}),me.useEffect(()=>{P(!1)},[v]);const N=ed({height:s,width:s},A);let R=null;return v!=null&&(R=me.createElement("img",{src:v,key:v,style:{display:"none"},onLoad:()=>{P(!0)},ref:V,crossOrigin:C==null?void 0:C.crossOrigin})),me.createElement(me.Fragment,null,me.createElement("canvas",ed({style:N,height:s,width:s,ref:b,role:"img"},w)),R)});Jb.displayName="QRCodeCanvas";var zS=me.forwardRef(function(e,n){const r=e,{value:i,size:s=DS,level:o=MS,bgColor:a=bS,fgColor:l=LS,includeMargin:c=OS,minVersion:h=FS,boostLevel:f,title:p,marginSize:g,imageSettings:E}=r,x=td(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:A,cells:w,numCells:v,calculatedImageSettings:_}=US({value:i,level:o,minVersion:h,boostLevel:f,includeMargin:c,marginSize:g,imageSettings:E,size:s});let V=w,b=null;E!=null&&_!=null&&(_.excavation!=null&&(V=BS(w,_.excavation)),b=me.createElement("image",{href:E.src,height:_.h,width:_.w,x:_.x+A,y:_.y+A,preserveAspectRatio:"none",opacity:_.opacity,crossOrigin:_.crossOrigin}));const O=jS(V,A);return me.createElement("svg",ed({height:s,width:s,viewBox:`0 0 ${v} ${v}`,ref:n,role:"img"},x),!!p&&me.createElement("title",null,p),me.createElement("path",{fill:a,d:`M0,0 h${v}v${v}H0z`,shapeRendering:"crispEdges"}),me.createElement("path",{fill:l,d:O,shapeRendering:"crispEdges"}),b)});zS.displayName="QRCodeSVG";const Zb=D.forwardRef(({details:t,discount:e=0,onDiscountChange:n,onPrint:r},i)=>{if(!t)return null;const{order:s={},items:o=[],tableName:a="N/A",staffName:l="N/A"}=t,c=D.useMemo(()=>(Array.isArray(o)?o:[]).map(A=>{const w=Number(A.quantity??A.qty??1),v=Number(A.price??A.rate??0);return{itemId:A.itemId??Math.random(),name:String(A.name??A.itemName??"Item"),notes:String(A.notes??A.modifiers??A.description??""),quantity:Number.isFinite(w)?w:1,price:Number.isFinite(v)?v:0,amount:Number.isFinite(w)&&Number.isFinite(v)?w*v:0}}),[o]),{subTotal:h,grandTotal:f}=D.useMemo(()=>{const x=c.reduce((_,V)=>_+V.amount,0),A=Number(s.total??x),w=Number(e||0),v=Math.max(0,A-w);return{subTotal:A,grandTotal:v}},[c,s.total,e]),{dateStr:p,timeStr:g}=D.useMemo(()=>{const x=new Date;try{const A=new Date(s.createdAt??s.date);return isNaN(A.getTime())?{dateStr:x.toLocaleDateString("en-IN"),timeStr:x.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}:{dateStr:A.toLocaleDateString("en-IN"),timeStr:A.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}}catch{return{dateStr:x.toLocaleDateString("en-IN"),timeStr:x.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}}},[s.createdAt,s.date]),E=D.useMemo(()=>{const x="SyncServe Restaurant".replace(/\s/g,"%20"),A=`Bill%20for%20${a}`.replace(/\s/g,"%20");return`upi://pay?pa=sinankp@fam&pn=${x}&am=${f.toFixed(2)}&cu=INR&tn=${A}`},[f,a]);return k.jsxs("div",{ref:i,className:"thermal-print","aria-label":`Bill for ${a}`,children:[k.jsxs("header",{className:"header",children:[k.jsx("div",{className:"logo-placeholder",children:"[Your Logo Here]"}),k.jsx("h1",{className:"business-name",children:"SyncServe Restaurant"}),k.jsx("p",{className:"business-details",children:"123 Culinary Lane, Edakkara, Kerala"}),k.jsx("p",{className:"invoice-title",children:"--- INVOICE ---"})]}),k.jsxs("section",{className:"meta-info",children:[k.jsxs("div",{className:"meta-row",children:[k.jsxs("span",{children:["Table: ",k.jsx("strong",{children:a})]}),k.jsxs("span",{children:["Date: ",p]})]}),k.jsxs("div",{className:"meta-row",children:[k.jsxs("span",{children:["Staff: ",k.jsx("strong",{children:l})]}),k.jsxs("span",{children:["Time: ",g]})]})]}),k.jsxs("table",{className:"items-table",children:[k.jsx("thead",{children:k.jsxs("tr",{children:[k.jsx("th",{className:"col-sno",children:"#"}),k.jsx("th",{className:"col-item",children:"ITEM"}),k.jsx("th",{className:"col-qty",children:"QTY"}),k.jsx("th",{className:"col-price",children:"RATE"}),k.jsx("th",{className:"col-total",children:"TOTAL"})]})}),k.jsx("tbody",{children:c.length===0?k.jsx("tr",{children:k.jsx("td",{colSpan:"5",className:"no-items",children:"No items in this order."})}):c.map((x,A)=>k.jsxs("tr",{children:[k.jsx("td",{className:"col-sno",children:A+1}),k.jsxs("td",{className:"col-item",children:[k.jsx("span",{className:"item-name",children:x.name}),x.notes&&k.jsx("span",{className:"item-notes",children:x.notes})]}),k.jsx("td",{className:"col-qty",children:x.quantity}),k.jsx("td",{className:"col-price",children:x.price.toFixed(2)}),k.jsx("td",{className:"col-total",children:x.amount.toFixed(2)})]},x.itemId))})]}),k.jsxs("section",{className:"totals",children:[k.jsxs("div",{className:"total-row",children:[k.jsx("span",{children:"Sub Total"}),k.jsxs("span",{children:["",h.toFixed(2)]})]}),k.jsxs("div",{className:"total-row no-print",children:[k.jsx("span",{children:"Discount"}),k.jsxs("div",{className:"discount-control",children:[k.jsxs("span",{children:["",Number(e).toFixed(2)]}),k.jsx("input",{type:"number",value:e,onChange:n,className:"discount-input","aria-label":"Discount amount"})]})]}),k.jsxs("div",{className:"total-row print-only",children:[k.jsx("span",{children:"Discount"}),k.jsxs("span",{children:["",Number(e).toFixed(2)]})]}),k.jsxs("div",{className:"total-row grand-total",children:[k.jsx("span",{children:"Grand Total"}),k.jsxs("span",{children:["",f.toFixed(2)]})]})]}),k.jsx("div",{className:"actions no-print",children:k.jsx("button",{onClick:r,className:"print-button",children:"Print / Finalize Bill"})}),k.jsxs("footer",{className:"footer",children:[k.jsx("div",{className:"qr-code-container",children:f>0?k.jsx(zS,{value:E,size:110,bgColor:"#ffffff",fgColor:"#000000",level:"L",includeMargin:!1}):k.jsx("div",{className:"qr-placeholder",children:"[QR Code Here]"})}),k.jsx("p",{className:"footer-message",children:"Thank you for your visit!"}),s.id&&k.jsxs("p",{className:"order-id",children:["Order ID: ",String(s.id)]})]})]})}),eL=".thermal-print{width:100%;max-width:76mm;margin:0 auto;padding:12px;background-color:#fff;color:#000;font-family:Courier New,Courier,monospace;font-size:12px;line-height:1.4;box-sizing:border-box}.thermal-print *{box-sizing:border-box}.header{text-align:center;margin-bottom:10px}.logo-placeholder{font-size:10px;color:#888;margin-bottom:8px}.business-name{font-size:16px;font-weight:700;margin:0}.business-details{font-size:10px;margin:2px 0}.invoice-title{font-size:10px;margin:8px 0 0;font-weight:700}.meta-info{font-size:10px;margin-bottom:10px;border-top:1px dashed #000;border-bottom:1px dashed #000;padding:5px 0}.meta-row{display:flex;justify-content:space-between}.items-table{width:100%;border-collapse:collapse;margin-bottom:10px}.items-table thead{border-bottom:1px solid #000}.items-table th{font-size:10px;font-weight:700;padding:5px 2px}.items-table td{padding:5px 2px;vertical-align:top;border-bottom:1px dotted #888}.no-items{text-align:center;padding:15px 0;color:#888}.item-name{display:block}.item-notes{display:block;font-size:9px;color:#555;padding-left:5px}.col-sno{width:8%;text-align:left;padding-right:4px}.col-item{width:37%;text-align:left}.col-qty,.col-price,.col-total{text-align:right;white-space:nowrap;font-variant-numeric:tabular-nums}.col-qty{width:15%}.col-price,.col-total{width:20%}.totals{font-size:12px;border-top:1px solid #000;padding-top:5px}.total-row{display:flex;justify-content:space-between;margin-bottom:3px}.grand-total{font-weight:700;font-size:15px;margin-top:5px;padding-top:5px;border-top:1px dashed #000}.discount-control{display:flex;align-items:center;gap:8px}.discount-input{width:70px;border:1px solid #ccc;text-align:right;padding:2px}.actions{margin:15px 0}.print-button{width:100%;padding:10px;background-color:#333;color:#fff;border:none;cursor:pointer;font-family:inherit;font-size:14px}.footer{text-align:center;margin-top:15px;border-top:1px dashed #000;padding-top:10px}.qr-placeholder{width:90px;height:90px;border:1px solid #888;margin:0 auto 10px;display:flex;align-items:center;justify-content:center;font-size:9px;color:#888}.footer-message{font-weight:700}.order-id{font-size:9px;color:#555;margin-top:5px}.qr-code-container{margin:0 auto 10px;width:110px;height:110px}.print-only{display:none}@media print{.no-print{display:none!important}.print-only{display:flex}.thermal-print{max-width:100%;padding:0;box-shadow:none}.qr-code-container{display:block}}",tL=()=>{const[t,e]=D.useState([]),[n,r]=D.useState([]),[i,s]=D.useState([]),[o,a]=D.useState([]),[l,c]=D.useState(""),[h,f]=D.useState(null),[p,g]=D.useState(0),[E,x]=D.useState(!1),[A,w]=D.useState(""),v=D.useRef(null),_=D.useRef(null);D.useEffect(()=>{var I;(async()=>{x(!0);try{const[C,N]=await Promise.all([Fp(),jp()]);s(C||[]),a(N||[])}catch(C){console.error("Failed to fetch initial data:",C),w("Could not load necessary data. Please refresh.")}finally{x(!1)}})(),(I=v.current)==null||I.focus()},[]),D.useEffect(()=>{const S=YV(I=>{e(I||[]),x(!1)},I=>{console.error("Tables real-time listener error:",I),w("Failed to load table data. Please try again."),x(!1)});return()=>{try{S()}catch{}}},[]),D.useEffect(()=>{const S=JE(I=>{r(I||[]),x(!1)},I=>{console.error("Orders real-time listener error:",I),w("Failed to load order data. Please try again."),x(!1)});return()=>{try{S()}catch{}}},[]),D.useEffect(()=>{var Y,ne;if(!l){f(null);return}const S=n.filter(ve=>ve.tableId===l).sort((ve,J)=>new Date(J.createdAt)-new Date(ve.createdAt));if(S.length===0){w("No active orders found for this table."),f(null);return}const I=S[0],C=(I.items||[]).map(ve=>{const J=i.find(U=>U.id===ve.itemId);return{...ve,name:(J==null?void 0:J.name)||ve.name||"Unknown Item",price:Number((J==null?void 0:J.price)??ve.price??0)}}),N=((Y=t.find(ve=>ve.id===I.tableId))==null?void 0:Y.name)||"N/A",R=((ne=o.find(ve=>ve.id===I.staffId))==null?void 0:ne.name)||"N/A";f({order:I,items:C,tableName:N,staffName:R}),g(0),w("")},[l,n,i,o,t]);const V=D.useCallback(()=>{if(!_.current){alert("Nothing to print  make sure a table is selected and the bill is visible.");return}const S=_.current.innerHTML||_.current.outerHTML||"",I=`
      <!doctype html>
      <html>
        <head>
          <meta charset="utf-8"/>
          <meta name="viewport" content="width=device-width,initial-scale=1"/>
          <title>Receipt</title>
          <style>${eL}</style>
        </head>
        <body>
          <div class="receipt-print-container">
            <div class="receipt">
              ${S}
            </div>
          </div>
        </body>
      </html>
    `,C=document.createElement("iframe");C.style.position="fixed",C.style.right="0",C.style.bottom="0",C.style.width="0",C.style.height="0",C.style.border="0",C.style.visibility="hidden",document.body.appendChild(C);const N=C.contentDocument||C.contentWindow.document;N.open(),N.write(I),N.close();const R=()=>{const Y=C.contentWindow;if(Y)try{Y.focus(),setTimeout(()=>{try{Y.print()}catch(ne){console.error("Print error:",ne)}setTimeout(()=>{try{document.body.removeChild(C)}catch{}},600)},250)}catch(ne){console.error("Print error:",ne)}};C.contentWindow&&C.contentDocument.readyState==="complete"?R():(C.onload=R,setTimeout(()=>{document.body.contains(C)&&R()},900))},[_]),b=(S,I=0)=>{var ue;if(!S)return new Uint8Array;const C=27,N=29,R=[],Y=te=>R.push(new Uint8Array(te)),ne=te=>{const be=new TextEncoder;R.push(be.encode(te))};Y([C,64]),Y([C,97,1]),Y([C,69,1]),ne(`${S.tableName||"TABLE"}
`),ne(`SyncServe
`),Y([C,69,0]),ne(`Served by: ${S.staffName||"N/A"}
`),ne(`Order: ${((ue=S.order)==null?void 0:ue.id)||""}
`),ne(`
`),Y([C,97,0]),ne(`No  ITEM                     QTY   RATE     AMT
`),Y([C,45,1]),ne(`---------------------------------------------
`),Y([C,45,0]),(S.items||[]).forEach((te,be)=>{const qt=(te.name||"Item").toString().slice(0,20).padEnd(20," "),Gt=String(te.quantity??te.qty??1).padStart(3," "),Qt=Number(te.price??0).toFixed(2).padStart(8," "),Yu=(Number(te.price??0)*Number(te.quantity??te.qty??1)).toFixed(2).padStart(8," ");ne(`${String(be+1).padStart(2," ")}  ${qt}${Gt}${Qt}${Yu}
`)}),ne(`
`);const ve=(S.items||[]).reduce((te,be)=>te+Number(be.price??0)*Number(be.quantity??be.qty??1),0),J=Number(I||0),U=ve-J;ne(`Sub Total:${String(ve.toFixed(2)).padStart(12," ")}
`),J>0&&ne(`Discount:${String(J.toFixed(2)).padStart(12," ")}
`),Y([N,33,17]),ne(`TOTAL:${String(U.toFixed(2)).padStart(14," ")}
`),Y([N,33,0]),ne(`
`),Y([C,97,1]),ne(`Thank you for dining with us!
`),Y([C,97,0]),Y([N,86,0]);const K=R.reduce((te,be)=>te+be.length,0),G=new Uint8Array(K);let pe=0;return R.forEach(te=>{G.set(te,pe),pe+=te.length}),G},O=()=>{var S;if(!h){alert("Select a table and load a bill first");return}try{const I=b(h,p),C=new Blob([I],{type:"application/octet-stream"}),N=URL.createObjectURL(C),R=document.createElement("a");R.href=N,R.download=`receipt_${String(((S=h.order)==null?void 0:S.id)||"receipt")}.bin`,document.body.appendChild(R),R.click(),R.remove(),URL.revokeObjectURL(N),alert("ESC/POS payload downloaded. Send this raw .bin to your printer service.")}catch(I){console.error("Failed to generate ESC/POS payload",I),alert("Failed to create ESC/POS payload (see console).")}},P=async()=>{if(!h||!l){alert("Please select a table with a bill to finalize.");return}V();try{await XE(l,"available"),await tN(h.order.id),console.log(`Finalized bill for table ${l}. Table set to available, order deleted.`),alert(`Bill for table ${h.tableName} has been processed.`),f(null),c(""),g(0)}catch(S){console.error("Failed to finalize bill:",S),alert("An error occurred while finalizing the bill. Check console.")}},y=t.filter(S=>S.status==="occupied");return k.jsxs("div",{className:"container mx-auto py-6 px-4",children:[k.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Billing"}),k.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6 no-print",children:[k.jsx("label",{htmlFor:"table-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select an Occupied Table"}),k.jsxs("select",{id:"table-select",ref:v,value:l,onChange:S=>c(S.target.value),className:"w-full md:w-1/2 p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:E,children:[k.jsx("option",{value:"",children:E?"Loading tables...":"Select a Table"}),y.map(S=>k.jsx("option",{value:S.id,children:S.name},S.id))]})]}),A&&k.jsx("p",{className:"text-red-500 text-center mb-4 no-print",children:A}),h&&k.jsxs(k.Fragment,{children:[k.jsx(Zb,{ref:_,details:h,discount:p,onDiscountChange:S=>g(parseFloat(S.target.value)||0),onPrint:P}),k.jsxs("div",{className:"mt-3 flex gap-2 items-center no-print",children:[k.jsx("button",{onClick:()=>V(),className:"px-3 py-2 bg-blue-600 text-white rounded shadow hover:bg-blue-700",children:"Preview / Print (Browser)"}),k.jsx("button",{onClick:O,className:"px-3 py-2 bg-green-600 text-white rounded shadow hover:bg-green-700",children:"Download ESC/POS Payload"}),k.jsx("button",{onClick:P,className:"px-3 py-2 bg-indigo-600 text-white rounded shadow hover:bg-indigo-700",children:"Finalize & Print"})]})]})]})},nL=()=>k.jsxs("div",{className:"flex min-h-screen",children:[k.jsx(pP,{}),k.jsx("main",{className:"flex-1 p-4 bg-gray-100 overflow-y-auto",children:k.jsxs(LI,{children:[k.jsx(Vr,{path:"/",element:k.jsx(jb,{})}),k.jsx(Vr,{path:"/order",element:k.jsx(Bb,{})}),k.jsx(Vr,{path:"/menu",element:k.jsx(Ub,{})}),k.jsx(Vr,{path:"/staff",element:k.jsx(zb,{})}),k.jsx(Vr,{path:"/kitchen",element:k.jsx($b,{})}),k.jsx(Vr,{path:"/billing",element:k.jsx(tL,{})})," "]})})]});ph.createRoot(document.getElementById("root")).render(k.jsx(me.StrictMode,{children:k.jsx(WI,{children:k.jsx(nL,{})})}));

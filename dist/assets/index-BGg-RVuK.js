function Ax(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Ix(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Q0={exports:{}},pu={},Y0={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yo=Symbol.for("react.element"),Cx=Symbol.for("react.portal"),Px=Symbol.for("react.fragment"),Rx=Symbol.for("react.strict_mode"),kx=Symbol.for("react.profiler"),Vx=Symbol.for("react.provider"),Nx=Symbol.for("react.context"),Dx=Symbol.for("react.forward_ref"),bx=Symbol.for("react.suspense"),Mx=Symbol.for("react.memo"),Lx=Symbol.for("react.lazy"),Tg=Symbol.iterator;function Ox(t){return t===null||typeof t!="object"?null:(t=Tg&&t[Tg]||t["@@iterator"],typeof t=="function"?t:null)}var X0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J0=Object.assign,Z0={};function os(t,e,n){this.props=t,this.context=e,this.refs=Z0,this.updater=n||X0}os.prototype.isReactComponent={};os.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};os.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function e_(){}e_.prototype=os.prototype;function ad(t,e,n){this.props=t,this.context=e,this.refs=Z0,this.updater=n||X0}var ld=ad.prototype=new e_;ld.constructor=ad;J0(ld,os.prototype);ld.isPureReactComponent=!0;var Sg=Array.isArray,t_=Object.prototype.hasOwnProperty,ud={current:null},n_={key:!0,ref:!0,__self:!0,__source:!0};function r_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)t_.call(e,r)&&!n_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Yo,type:t,key:s,ref:o,props:i,_owner:ud.current}}function Fx(t,e){return{$$typeof:Yo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function cd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yo}function jx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xg=/\/+/g;function Ic(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jx(""+t.key):e.toString(36)}function el(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yo:case Cx:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ic(o,0):r,Sg(i)?(n="",t!=null&&(n=t.replace(xg,"$&/")+"/"),el(i,e,n,"",function(c){return c})):i!=null&&(cd(i)&&(i=Fx(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(xg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Sg(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Ic(s,a);o+=el(s,e,n,l,i)}else if(l=Ox(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Ic(s,a++),o+=el(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ka(t,e,n){if(t==null)return t;var r=[],i=0;return el(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Bx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},tl={transition:null},Ux={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:tl,ReactCurrentOwner:ud};function i_(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:ka,forEach:function(t,e,n){ka(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ka(t,function(){e++}),e},toArray:function(t){return ka(t,function(e){return e})||[]},only:function(t){if(!cd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=os;re.Fragment=Px;re.Profiler=kx;re.PureComponent=ad;re.StrictMode=Rx;re.Suspense=bx;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ux;re.act=i_;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=J0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ud.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)t_.call(e,l)&&!n_.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Yo,type:t.type,key:i,ref:s,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:Nx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Vx,_context:t},t.Consumer=t};re.createElement=r_;re.createFactory=function(t){var e=r_.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:Dx,render:t}};re.isValidElement=cd;re.lazy=function(t){return{$$typeof:Lx,_payload:{_status:-1,_result:t},_init:Bx}};re.memo=function(t,e){return{$$typeof:Mx,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=tl.transition;tl.transition={};try{t()}finally{tl.transition=e}};re.unstable_act=i_;re.useCallback=function(t,e){return Tt.current.useCallback(t,e)};re.useContext=function(t){return Tt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};re.useEffect=function(t,e){return Tt.current.useEffect(t,e)};re.useId=function(){return Tt.current.useId()};re.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return Tt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};re.useRef=function(t){return Tt.current.useRef(t)};re.useState=function(t){return Tt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return Tt.current.useTransition()};re.version="18.3.1";Y0.exports=re;var D=Y0.exports;const me=Ix(D),zx=Ax({__proto__:null,default:me},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $x=D,Wx=Symbol.for("react.element"),Hx=Symbol.for("react.fragment"),Kx=Object.prototype.hasOwnProperty,qx=$x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gx={key:!0,ref:!0,__self:!0,__source:!0};function s_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Kx.call(e,r)&&!Gx.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Wx,type:t,key:s,ref:o,props:i,_owner:qx.current}}pu.Fragment=Hx;pu.jsx=s_;pu.jsxs=s_;Q0.exports=pu;var k=Q0.exports,wh={},o_={exports:{}},jt={},a_={exports:{}},l_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,W){var G=B.length;B.push(W);e:for(;0<G;){var ge=G-1>>>1,ce=B[ge];if(0<i(ce,W))B[ge]=W,B[G]=ce,G=ge;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var W=B[0],G=B.pop();if(G!==W){B[0]=G;e:for(var ge=0,ce=B.length,ve=ce>>>1;ge<ve;){var xt=2*(ge+1)-1,Ut=B[xt],pe=xt+1,ze=B[pe];if(0>i(Ut,G))pe<ce&&0>i(ze,Ut)?(B[ge]=ze,B[pe]=G,ge=pe):(B[ge]=Ut,B[xt]=G,ge=xt);else if(pe<ce&&0>i(ze,G))B[ge]=ze,B[pe]=G,ge=pe;else break e}}return W}function i(B,W){var G=B.sortIndex-W.sortIndex;return G!==0?G:B.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,g=!1,E=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(B){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=B)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function V(B){if(S=!1,v(B),!E)if(n(l)!==null)E=!0,he(M);else{var W=n(c);W!==null&&q(V,W.startTime-B)}}function M(B,W){E=!1,S&&(S=!1,w(y),y=-1),g=!0;var G=p;try{for(v(W),f=n(l);f!==null&&(!(f.expirationTime>W)||B&&!R());){var ge=f.callback;if(typeof ge=="function"){f.callback=null,p=f.priorityLevel;var ce=ge(f.expirationTime<=W);W=t.unstable_now(),typeof ce=="function"?f.callback=ce:f===n(l)&&r(l),v(W)}else r(l);f=n(l)}if(f!==null)var ve=!0;else{var xt=n(c);xt!==null&&q(V,xt.startTime-W),ve=!1}return ve}finally{f=null,p=G,g=!1}}var O=!1,A=null,y=-1,x=5,P=-1;function R(){return!(t.unstable_now()-P<x)}function N(){if(A!==null){var B=t.unstable_now();P=B;var W=!0;try{W=A(!0,B)}finally{W?I():(O=!1,A=null)}}else O=!1}var I;if(typeof _=="function")I=function(){_(N)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=N,I=function(){te.postMessage(null)}}else I=function(){C(N,0)};function he(B){A=B,O||(O=!0,I())}function q(B,W){y=C(function(){B(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){E||g||(E=!0,he(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var W=3;break;default:W=p}var G=p;p=W;try{return B()}finally{p=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var G=p;p=B;try{return W()}finally{p=G}},t.unstable_scheduleCallback=function(B,W,G){var ge=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ge+G:ge):G=ge,B){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=G+ce,B={id:h++,callback:W,priorityLevel:B,startTime:G,expirationTime:ce,sortIndex:-1},G>ge?(B.sortIndex=G,e(c,B),n(l)===null&&B===n(c)&&(S?(w(y),y=-1):S=!0,q(V,G-ge))):(B.sortIndex=ce,e(l,B),E||g||(E=!0,he(M))),B},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(B){var W=p;return function(){var G=p;p=W;try{return B.apply(this,arguments)}finally{p=G}}}})(l_);a_.exports=l_;var Qx=a_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yx=D,Ft=Qx;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u_=new Set,go={};function ni(t,e){$i(t,e),$i(t+"Capture",e)}function $i(t,e){for(go[t]=e,t=0;t<e.length;t++)u_.add(e[t])}var Rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eh=Object.prototype.hasOwnProperty,Xx=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ag={},Ig={};function Jx(t){return Eh.call(Ig,t)?!0:Eh.call(Ag,t)?!1:Xx.test(t)?Ig[t]=!0:(Ag[t]=!0,!1)}function Zx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function e2(t,e,n,r){if(e===null||typeof e>"u"||Zx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){rt[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];rt[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){rt[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){rt[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){rt[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){rt[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){rt[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){rt[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){rt[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var hd=/[\-:]([a-z])/g;function fd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hd,fd);rt[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hd,fd);rt[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hd,fd);rt[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){rt[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});rt.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){rt[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function dd(t,e,n,r){var i=rt.hasOwnProperty(e)?rt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(e2(e,n,i,r)&&(n=null),r||i===null?Jx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bn=Yx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Va=Symbol.for("react.element"),yi=Symbol.for("react.portal"),vi=Symbol.for("react.fragment"),pd=Symbol.for("react.strict_mode"),Th=Symbol.for("react.profiler"),c_=Symbol.for("react.provider"),h_=Symbol.for("react.context"),md=Symbol.for("react.forward_ref"),Sh=Symbol.for("react.suspense"),xh=Symbol.for("react.suspense_list"),gd=Symbol.for("react.memo"),qn=Symbol.for("react.lazy"),f_=Symbol.for("react.offscreen"),Cg=Symbol.iterator;function Ns(t){return t===null||typeof t!="object"?null:(t=Cg&&t[Cg]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Cc;function zs(t){if(Cc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cc=e&&e[1]||""}return`
`+Cc+t}var Pc=!1;function Rc(t,e){if(!t||Pc)return"";Pc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Pc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?zs(t):""}function t2(t){switch(t.tag){case 5:return zs(t.type);case 16:return zs("Lazy");case 13:return zs("Suspense");case 19:return zs("SuspenseList");case 0:case 2:case 15:return t=Rc(t.type,!1),t;case 11:return t=Rc(t.type.render,!1),t;case 1:return t=Rc(t.type,!0),t;default:return""}}function Ah(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vi:return"Fragment";case yi:return"Portal";case Th:return"Profiler";case pd:return"StrictMode";case Sh:return"Suspense";case xh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case h_:return(t.displayName||"Context")+".Consumer";case c_:return(t._context.displayName||"Context")+".Provider";case md:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gd:return e=t.displayName||null,e!==null?e:Ah(t.type)||"Memo";case qn:e=t._payload,t=t._init;try{return Ah(t(e))}catch{}}return null}function n2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ah(e);case 8:return e===pd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function dr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function d_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function r2(t){var e=d_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Na(t){t._valueTracker||(t._valueTracker=r2(t))}function p_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=d_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function El(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ih(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=dr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function m_(t,e){e=e.checked,e!=null&&dd(t,"checked",e,!1)}function Ch(t,e){m_(t,e);var n=dr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ph(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ph(t,e.type,dr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ph(t,e,n){(e!=="number"||El(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $s=Array.isArray;function Mi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+dr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Rh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if($s(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:dr(n)}}function g_(t,e){var n=dr(e.value),r=dr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Vg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function y_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?y_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Da,v_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Da=Da||document.createElement("div"),Da.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Da.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i2=["Webkit","ms","Moz","O"];Object.keys(Xs).forEach(function(t){i2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xs[e]=Xs[t]})});function __(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xs.hasOwnProperty(t)&&Xs[t]?(""+e).trim():e+"px"}function w_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=__(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var s2=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vh(t,e){if(e){if(s2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Nh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dh=null;function yd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bh=null,Li=null,Oi=null;function Ng(t){if(t=Zo(t)){if(typeof bh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=_u(e),bh(t.stateNode,t.type,e))}}function E_(t){Li?Oi?Oi.push(t):Oi=[t]:Li=t}function T_(){if(Li){var t=Li,e=Oi;if(Oi=Li=null,Ng(t),e)for(t=0;t<e.length;t++)Ng(e[t])}}function S_(t,e){return t(e)}function x_(){}var kc=!1;function A_(t,e,n){if(kc)return t(e,n);kc=!0;try{return S_(t,e,n)}finally{kc=!1,(Li!==null||Oi!==null)&&(x_(),T_())}}function vo(t,e){var n=t.stateNode;if(n===null)return null;var r=_u(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Mh=!1;if(Rn)try{var Ds={};Object.defineProperty(Ds,"passive",{get:function(){Mh=!0}}),window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,Ds)}catch{Mh=!1}function o2(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Js=!1,Tl=null,Sl=!1,Lh=null,a2={onError:function(t){Js=!0,Tl=t}};function l2(t,e,n,r,i,s,o,a,l){Js=!1,Tl=null,o2.apply(a2,arguments)}function u2(t,e,n,r,i,s,o,a,l){if(l2.apply(this,arguments),Js){if(Js){var c=Tl;Js=!1,Tl=null}else throw Error(U(198));Sl||(Sl=!0,Lh=c)}}function ri(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function I_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dg(t){if(ri(t)!==t)throw Error(U(188))}function c2(t){var e=t.alternate;if(!e){if(e=ri(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Dg(i),t;if(s===r)return Dg(i),e;s=s.sibling}throw Error(U(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function C_(t){return t=c2(t),t!==null?P_(t):null}function P_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=P_(t);if(e!==null)return e;t=t.sibling}return null}var R_=Ft.unstable_scheduleCallback,bg=Ft.unstable_cancelCallback,h2=Ft.unstable_shouldYield,f2=Ft.unstable_requestPaint,Fe=Ft.unstable_now,d2=Ft.unstable_getCurrentPriorityLevel,vd=Ft.unstable_ImmediatePriority,k_=Ft.unstable_UserBlockingPriority,xl=Ft.unstable_NormalPriority,p2=Ft.unstable_LowPriority,V_=Ft.unstable_IdlePriority,mu=null,hn=null;function m2(t){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(mu,t,void 0,(t.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:v2,g2=Math.log,y2=Math.LN2;function v2(t){return t>>>=0,t===0?32:31-(g2(t)/y2|0)|0}var ba=64,Ma=4194304;function Ws(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Al(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Ws(a):(s&=o,s!==0&&(r=Ws(s)))}else o=n&~i,o!==0?r=Ws(o):s!==0&&(r=Ws(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-sn(e),i=1<<n,r|=t[n],e&=~i;return r}function _2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-sn(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=_2(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Oh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function N_(){var t=ba;return ba<<=1,!(ba&4194240)&&(ba=64),t}function Vc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Xo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sn(e),t[e]=n}function E2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-sn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function _d(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-sn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var fe=0;function D_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var b_,wd,M_,L_,O_,Fh=!1,La=[],tr=null,nr=null,rr=null,_o=new Map,wo=new Map,Qn=[],T2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mg(t,e){switch(t){case"focusin":case"focusout":tr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":_o.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wo.delete(e.pointerId)}}function bs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Zo(e),e!==null&&wd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function S2(t,e,n,r,i){switch(e){case"focusin":return tr=bs(tr,t,e,n,r,i),!0;case"dragenter":return nr=bs(nr,t,e,n,r,i),!0;case"mouseover":return rr=bs(rr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return _o.set(s,bs(_o.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wo.set(s,bs(wo.get(s)||null,t,e,n,r,i)),!0}return!1}function F_(t){var e=Lr(t.target);if(e!==null){var n=ri(e);if(n!==null){if(e=n.tag,e===13){if(e=I_(n),e!==null){t.blockedOn=e,O_(t.priority,function(){M_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=jh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Dh=r,n.target.dispatchEvent(r),Dh=null}else return e=Zo(n),e!==null&&wd(e),t.blockedOn=n,!1;e.shift()}return!0}function Lg(t,e,n){nl(t)&&n.delete(e)}function x2(){Fh=!1,tr!==null&&nl(tr)&&(tr=null),nr!==null&&nl(nr)&&(nr=null),rr!==null&&nl(rr)&&(rr=null),_o.forEach(Lg),wo.forEach(Lg)}function Ms(t,e){t.blockedOn===e&&(t.blockedOn=null,Fh||(Fh=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,x2)))}function Eo(t){function e(i){return Ms(i,t)}if(0<La.length){Ms(La[0],t);for(var n=1;n<La.length;n++){var r=La[n];r.blockedOn===t&&(r.blockedOn=null)}}for(tr!==null&&Ms(tr,t),nr!==null&&Ms(nr,t),rr!==null&&Ms(rr,t),_o.forEach(e),wo.forEach(e),n=0;n<Qn.length;n++)r=Qn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qn.length&&(n=Qn[0],n.blockedOn===null);)F_(n),n.blockedOn===null&&Qn.shift()}var Fi=Bn.ReactCurrentBatchConfig,Il=!0;function A2(t,e,n,r){var i=fe,s=Fi.transition;Fi.transition=null;try{fe=1,Ed(t,e,n,r)}finally{fe=i,Fi.transition=s}}function I2(t,e,n,r){var i=fe,s=Fi.transition;Fi.transition=null;try{fe=4,Ed(t,e,n,r)}finally{fe=i,Fi.transition=s}}function Ed(t,e,n,r){if(Il){var i=jh(t,e,n,r);if(i===null)Uc(t,e,r,Cl,n),Mg(t,r);else if(S2(i,t,e,n,r))r.stopPropagation();else if(Mg(t,r),e&4&&-1<T2.indexOf(t)){for(;i!==null;){var s=Zo(i);if(s!==null&&b_(s),s=jh(t,e,n,r),s===null&&Uc(t,e,r,Cl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Uc(t,e,r,null,n)}}var Cl=null;function jh(t,e,n,r){if(Cl=null,t=yd(r),t=Lr(t),t!==null)if(e=ri(t),e===null)t=null;else if(n=e.tag,n===13){if(t=I_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Cl=t,null}function j_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(d2()){case vd:return 1;case k_:return 4;case xl:case p2:return 16;case V_:return 536870912;default:return 16}default:return 16}}var Xn=null,Td=null,rl=null;function B_(){if(rl)return rl;var t,e=Td,n=e.length,r,i="value"in Xn?Xn.value:Xn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return rl=i.slice(t,1<r?1-r:void 0)}function il(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Oa(){return!0}function Og(){return!1}function Bt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Oa:Og,this.isPropagationStopped=Og,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Oa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Oa)},persist:function(){},isPersistent:Oa}),e}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sd=Bt(as),Jo=Re({},as,{view:0,detail:0}),C2=Bt(Jo),Nc,Dc,Ls,gu=Re({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ls&&(Ls&&t.type==="mousemove"?(Nc=t.screenX-Ls.screenX,Dc=t.screenY-Ls.screenY):Dc=Nc=0,Ls=t),Nc)},movementY:function(t){return"movementY"in t?t.movementY:Dc}}),Fg=Bt(gu),P2=Re({},gu,{dataTransfer:0}),R2=Bt(P2),k2=Re({},Jo,{relatedTarget:0}),bc=Bt(k2),V2=Re({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),N2=Bt(V2),D2=Re({},as,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),b2=Bt(D2),M2=Re({},as,{data:0}),jg=Bt(M2),L2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=F2[t])?!!e[t]:!1}function xd(){return j2}var B2=Re({},Jo,{key:function(t){if(t.key){var e=L2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=il(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?O2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xd,charCode:function(t){return t.type==="keypress"?il(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?il(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),U2=Bt(B2),z2=Re({},gu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bg=Bt(z2),$2=Re({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xd}),W2=Bt($2),H2=Re({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),K2=Bt(H2),q2=Re({},gu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G2=Bt(q2),Q2=[9,13,27,32],Ad=Rn&&"CompositionEvent"in window,Zs=null;Rn&&"documentMode"in document&&(Zs=document.documentMode);var Y2=Rn&&"TextEvent"in window&&!Zs,U_=Rn&&(!Ad||Zs&&8<Zs&&11>=Zs),Ug=" ",zg=!1;function z_(t,e){switch(t){case"keyup":return Q2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _i=!1;function X2(t,e){switch(t){case"compositionend":return $_(e);case"keypress":return e.which!==32?null:(zg=!0,Ug);case"textInput":return t=e.data,t===Ug&&zg?null:t;default:return null}}function J2(t,e){if(_i)return t==="compositionend"||!Ad&&z_(t,e)?(t=B_(),rl=Td=Xn=null,_i=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return U_&&e.locale!=="ko"?null:e.data;default:return null}}var Z2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Z2[t.type]:e==="textarea"}function W_(t,e,n,r){E_(r),e=Pl(e,"onChange"),0<e.length&&(n=new Sd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var eo=null,To=null;function eA(t){tw(t,0)}function yu(t){var e=Ti(t);if(p_(e))return t}function tA(t,e){if(t==="change")return e}var H_=!1;if(Rn){var Mc;if(Rn){var Lc="oninput"in document;if(!Lc){var Wg=document.createElement("div");Wg.setAttribute("oninput","return;"),Lc=typeof Wg.oninput=="function"}Mc=Lc}else Mc=!1;H_=Mc&&(!document.documentMode||9<document.documentMode)}function Hg(){eo&&(eo.detachEvent("onpropertychange",K_),To=eo=null)}function K_(t){if(t.propertyName==="value"&&yu(To)){var e=[];W_(e,To,t,yd(t)),A_(eA,e)}}function nA(t,e,n){t==="focusin"?(Hg(),eo=e,To=n,eo.attachEvent("onpropertychange",K_)):t==="focusout"&&Hg()}function rA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yu(To)}function iA(t,e){if(t==="click")return yu(e)}function sA(t,e){if(t==="input"||t==="change")return yu(e)}function oA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:oA;function So(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Eh.call(e,i)||!an(t[i],e[i]))return!1}return!0}function Kg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qg(t,e){var n=Kg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kg(n)}}function q_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?q_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function G_(){for(var t=window,e=El();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=El(t.document)}return e}function Id(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aA(t){var e=G_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&q_(n.ownerDocument.documentElement,n)){if(r!==null&&Id(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=qg(n,s);var o=qg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lA=Rn&&"documentMode"in document&&11>=document.documentMode,wi=null,Bh=null,to=null,Uh=!1;function Gg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uh||wi==null||wi!==El(r)||(r=wi,"selectionStart"in r&&Id(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),to&&So(to,r)||(to=r,r=Pl(Bh,"onSelect"),0<r.length&&(e=new Sd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wi)))}function Fa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ei={animationend:Fa("Animation","AnimationEnd"),animationiteration:Fa("Animation","AnimationIteration"),animationstart:Fa("Animation","AnimationStart"),transitionend:Fa("Transition","TransitionEnd")},Oc={},Q_={};Rn&&(Q_=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function vu(t){if(Oc[t])return Oc[t];if(!Ei[t])return t;var e=Ei[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Q_)return Oc[t]=e[n];return t}var Y_=vu("animationend"),X_=vu("animationiteration"),J_=vu("animationstart"),Z_=vu("transitionend"),ew=new Map,Qg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wr(t,e){ew.set(t,e),ni(e,[t])}for(var Fc=0;Fc<Qg.length;Fc++){var jc=Qg[Fc],uA=jc.toLowerCase(),cA=jc[0].toUpperCase()+jc.slice(1);wr(uA,"on"+cA)}wr(Y_,"onAnimationEnd");wr(X_,"onAnimationIteration");wr(J_,"onAnimationStart");wr("dblclick","onDoubleClick");wr("focusin","onFocus");wr("focusout","onBlur");wr(Z_,"onTransitionEnd");$i("onMouseEnter",["mouseout","mouseover"]);$i("onMouseLeave",["mouseout","mouseover"]);$i("onPointerEnter",["pointerout","pointerover"]);$i("onPointerLeave",["pointerout","pointerover"]);ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ni("onBeforeInput",["compositionend","keypress","textInput","paste"]);ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hs));function Yg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,u2(r,e,void 0,t),t.currentTarget=null}function tw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Yg(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Yg(i,a,c),s=l}}}if(Sl)throw t=Lh,Sl=!1,Lh=null,t}function Ee(t,e){var n=e[Kh];n===void 0&&(n=e[Kh]=new Set);var r=t+"__bubble";n.has(r)||(nw(e,t,2,!1),n.add(r))}function Bc(t,e,n){var r=0;e&&(r|=4),nw(n,t,r,e)}var ja="_reactListening"+Math.random().toString(36).slice(2);function xo(t){if(!t[ja]){t[ja]=!0,u_.forEach(function(n){n!=="selectionchange"&&(hA.has(n)||Bc(n,!1,t),Bc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ja]||(e[ja]=!0,Bc("selectionchange",!1,e))}}function nw(t,e,n,r){switch(j_(e)){case 1:var i=A2;break;case 4:i=I2;break;default:i=Ed}n=i.bind(null,e,n,t),i=void 0,!Mh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Uc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Lr(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}A_(function(){var c=s,h=yd(n),f=[];e:{var p=ew.get(t);if(p!==void 0){var g=Sd,E=t;switch(t){case"keypress":if(il(n)===0)break e;case"keydown":case"keyup":g=U2;break;case"focusin":E="focus",g=bc;break;case"focusout":E="blur",g=bc;break;case"beforeblur":case"afterblur":g=bc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Fg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=R2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=W2;break;case Y_:case X_:case J_:g=N2;break;case Z_:g=K2;break;case"scroll":g=C2;break;case"wheel":g=G2;break;case"copy":case"cut":case"paste":g=b2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Bg}var S=(e&4)!==0,C=!S&&t==="scroll",w=S?p!==null?p+"Capture":null:p;S=[];for(var _=c,v;_!==null;){v=_;var V=v.stateNode;if(v.tag===5&&V!==null&&(v=V,w!==null&&(V=vo(_,w),V!=null&&S.push(Ao(_,V,v)))),C)break;_=_.return}0<S.length&&(p=new g(p,E,null,n,h),f.push({event:p,listeners:S}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==Dh&&(E=n.relatedTarget||n.fromElement)&&(Lr(E)||E[kn]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(E=n.relatedTarget||n.toElement,g=c,E=E?Lr(E):null,E!==null&&(C=ri(E),E!==C||E.tag!==5&&E.tag!==6)&&(E=null)):(g=null,E=c),g!==E)){if(S=Fg,V="onMouseLeave",w="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(S=Bg,V="onPointerLeave",w="onPointerEnter",_="pointer"),C=g==null?p:Ti(g),v=E==null?p:Ti(E),p=new S(V,_+"leave",g,n,h),p.target=C,p.relatedTarget=v,V=null,Lr(h)===c&&(S=new S(w,_+"enter",E,n,h),S.target=v,S.relatedTarget=C,V=S),C=V,g&&E)t:{for(S=g,w=E,_=0,v=S;v;v=di(v))_++;for(v=0,V=w;V;V=di(V))v++;for(;0<_-v;)S=di(S),_--;for(;0<v-_;)w=di(w),v--;for(;_--;){if(S===w||w!==null&&S===w.alternate)break t;S=di(S),w=di(w)}S=null}else S=null;g!==null&&Xg(f,p,g,S,!1),E!==null&&C!==null&&Xg(f,C,E,S,!0)}}e:{if(p=c?Ti(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var M=tA;else if($g(p))if(H_)M=sA;else{M=rA;var O=nA}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(M=iA);if(M&&(M=M(t,c))){W_(f,M,n,h);break e}O&&O(t,p,c),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Ph(p,"number",p.value)}switch(O=c?Ti(c):window,t){case"focusin":($g(O)||O.contentEditable==="true")&&(wi=O,Bh=c,to=null);break;case"focusout":to=Bh=wi=null;break;case"mousedown":Uh=!0;break;case"contextmenu":case"mouseup":case"dragend":Uh=!1,Gg(f,n,h);break;case"selectionchange":if(lA)break;case"keydown":case"keyup":Gg(f,n,h)}var A;if(Ad)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else _i?z_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(U_&&n.locale!=="ko"&&(_i||y!=="onCompositionStart"?y==="onCompositionEnd"&&_i&&(A=B_()):(Xn=h,Td="value"in Xn?Xn.value:Xn.textContent,_i=!0)),O=Pl(c,y),0<O.length&&(y=new jg(y,t,null,n,h),f.push({event:y,listeners:O}),A?y.data=A:(A=$_(n),A!==null&&(y.data=A)))),(A=Y2?X2(t,n):J2(t,n))&&(c=Pl(c,"onBeforeInput"),0<c.length&&(h=new jg("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=A))}tw(f,e)})}function Ao(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Pl(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=vo(t,n),s!=null&&r.unshift(Ao(t,s,i)),s=vo(t,e),s!=null&&r.push(Ao(t,s,i))),t=t.return}return r}function di(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=vo(n,s),l!=null&&o.unshift(Ao(n,l,a))):i||(l=vo(n,s),l!=null&&o.push(Ao(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fA=/\r\n?/g,dA=/\u0000|\uFFFD/g;function Jg(t){return(typeof t=="string"?t:""+t).replace(fA,`
`).replace(dA,"")}function Ba(t,e,n){if(e=Jg(e),Jg(t)!==e&&n)throw Error(U(425))}function Rl(){}var zh=null,$h=null;function Wh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hh=typeof setTimeout=="function"?setTimeout:void 0,pA=typeof clearTimeout=="function"?clearTimeout:void 0,Zg=typeof Promise=="function"?Promise:void 0,mA=typeof queueMicrotask=="function"?queueMicrotask:typeof Zg<"u"?function(t){return Zg.resolve(null).then(t).catch(gA)}:Hh;function gA(t){setTimeout(function(){throw t})}function zc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Eo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Eo(e)}function ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ey(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ls=Math.random().toString(36).slice(2),cn="__reactFiber$"+ls,Io="__reactProps$"+ls,kn="__reactContainer$"+ls,Kh="__reactEvents$"+ls,yA="__reactListeners$"+ls,vA="__reactHandles$"+ls;function Lr(t){var e=t[cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kn]||n[cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ey(t);t!==null;){if(n=t[cn])return n;t=ey(t)}return e}t=n,n=t.parentNode}return null}function Zo(t){return t=t[cn]||t[kn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ti(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function _u(t){return t[Io]||null}var qh=[],Si=-1;function Er(t){return{current:t}}function Te(t){0>Si||(t.current=qh[Si],qh[Si]=null,Si--)}function _e(t,e){Si++,qh[Si]=t.current,t.current=e}var pr={},mt=Er(pr),Rt=Er(!1),qr=pr;function Wi(t,e){var n=t.type.contextTypes;if(!n)return pr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function kt(t){return t=t.childContextTypes,t!=null}function kl(){Te(Rt),Te(mt)}function ty(t,e,n){if(mt.current!==pr)throw Error(U(168));_e(mt,e),_e(Rt,n)}function rw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(U(108,n2(t)||"Unknown",i));return Re({},n,r)}function Vl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pr,qr=mt.current,_e(mt,t),_e(Rt,Rt.current),!0}function ny(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=rw(t,e,qr),r.__reactInternalMemoizedMergedChildContext=t,Te(Rt),Te(mt),_e(mt,t)):Te(Rt),_e(Rt,n)}var xn=null,wu=!1,$c=!1;function iw(t){xn===null?xn=[t]:xn.push(t)}function _A(t){wu=!0,iw(t)}function Tr(){if(!$c&&xn!==null){$c=!0;var t=0,e=fe;try{var n=xn;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xn=null,wu=!1}catch(i){throw xn!==null&&(xn=xn.slice(t+1)),R_(vd,Tr),i}finally{fe=e,$c=!1}}return null}var xi=[],Ai=0,Nl=null,Dl=0,Wt=[],Ht=0,Gr=null,An=1,In="";function Nr(t,e){xi[Ai++]=Dl,xi[Ai++]=Nl,Nl=t,Dl=e}function sw(t,e,n){Wt[Ht++]=An,Wt[Ht++]=In,Wt[Ht++]=Gr,Gr=t;var r=An;t=In;var i=32-sn(r)-1;r&=~(1<<i),n+=1;var s=32-sn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,An=1<<32-sn(e)+i|n<<i|r,In=s+t}else An=1<<s|n<<i|r,In=t}function Cd(t){t.return!==null&&(Nr(t,1),sw(t,1,0))}function Pd(t){for(;t===Nl;)Nl=xi[--Ai],xi[Ai]=null,Dl=xi[--Ai],xi[Ai]=null;for(;t===Gr;)Gr=Wt[--Ht],Wt[Ht]=null,In=Wt[--Ht],Wt[Ht]=null,An=Wt[--Ht],Wt[Ht]=null}var Ot=null,Mt=null,Se=!1,rn=null;function ow(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ry(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ot=t,Mt=ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ot=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gr!==null?{id:An,overflow:In}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ot=t,Mt=null,!0):!1;default:return!1}}function Gh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qh(t){if(Se){var e=Mt;if(e){var n=e;if(!ry(t,e)){if(Gh(t))throw Error(U(418));e=ir(n.nextSibling);var r=Ot;e&&ry(t,e)?ow(r,n):(t.flags=t.flags&-4097|2,Se=!1,Ot=t)}}else{if(Gh(t))throw Error(U(418));t.flags=t.flags&-4097|2,Se=!1,Ot=t}}}function iy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ot=t}function Ua(t){if(t!==Ot)return!1;if(!Se)return iy(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wh(t.type,t.memoizedProps)),e&&(e=Mt)){if(Gh(t))throw aw(),Error(U(418));for(;e;)ow(t,e),e=ir(e.nextSibling)}if(iy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mt=ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Ot?ir(t.stateNode.nextSibling):null;return!0}function aw(){for(var t=Mt;t;)t=ir(t.nextSibling)}function Hi(){Mt=Ot=null,Se=!1}function Rd(t){rn===null?rn=[t]:rn.push(t)}var wA=Bn.ReactCurrentBatchConfig;function Os(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function za(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sy(t){var e=t._init;return e(t._payload)}function lw(t){function e(w,_){if(t){var v=w.deletions;v===null?(w.deletions=[_],w.flags|=16):v.push(_)}}function n(w,_){if(!t)return null;for(;_!==null;)e(w,_),_=_.sibling;return null}function r(w,_){for(w=new Map;_!==null;)_.key!==null?w.set(_.key,_):w.set(_.index,_),_=_.sibling;return w}function i(w,_){return w=lr(w,_),w.index=0,w.sibling=null,w}function s(w,_,v){return w.index=v,t?(v=w.alternate,v!==null?(v=v.index,v<_?(w.flags|=2,_):v):(w.flags|=2,_)):(w.flags|=1048576,_)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,_,v,V){return _===null||_.tag!==6?(_=Yc(v,w.mode,V),_.return=w,_):(_=i(_,v),_.return=w,_)}function l(w,_,v,V){var M=v.type;return M===vi?h(w,_,v.props.children,V,v.key):_!==null&&(_.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===qn&&sy(M)===_.type)?(V=i(_,v.props),V.ref=Os(w,_,v),V.return=w,V):(V=hl(v.type,v.key,v.props,null,w.mode,V),V.ref=Os(w,_,v),V.return=w,V)}function c(w,_,v,V){return _===null||_.tag!==4||_.stateNode.containerInfo!==v.containerInfo||_.stateNode.implementation!==v.implementation?(_=Xc(v,w.mode,V),_.return=w,_):(_=i(_,v.children||[]),_.return=w,_)}function h(w,_,v,V,M){return _===null||_.tag!==7?(_=$r(v,w.mode,V,M),_.return=w,_):(_=i(_,v),_.return=w,_)}function f(w,_,v){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Yc(""+_,w.mode,v),_.return=w,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Va:return v=hl(_.type,_.key,_.props,null,w.mode,v),v.ref=Os(w,null,_),v.return=w,v;case yi:return _=Xc(_,w.mode,v),_.return=w,_;case qn:var V=_._init;return f(w,V(_._payload),v)}if($s(_)||Ns(_))return _=$r(_,w.mode,v,null),_.return=w,_;za(w,_)}return null}function p(w,_,v,V){var M=_!==null?_.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return M!==null?null:a(w,_,""+v,V);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Va:return v.key===M?l(w,_,v,V):null;case yi:return v.key===M?c(w,_,v,V):null;case qn:return M=v._init,p(w,_,M(v._payload),V)}if($s(v)||Ns(v))return M!==null?null:h(w,_,v,V,null);za(w,v)}return null}function g(w,_,v,V,M){if(typeof V=="string"&&V!==""||typeof V=="number")return w=w.get(v)||null,a(_,w,""+V,M);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Va:return w=w.get(V.key===null?v:V.key)||null,l(_,w,V,M);case yi:return w=w.get(V.key===null?v:V.key)||null,c(_,w,V,M);case qn:var O=V._init;return g(w,_,v,O(V._payload),M)}if($s(V)||Ns(V))return w=w.get(v)||null,h(_,w,V,M,null);za(_,V)}return null}function E(w,_,v,V){for(var M=null,O=null,A=_,y=_=0,x=null;A!==null&&y<v.length;y++){A.index>y?(x=A,A=null):x=A.sibling;var P=p(w,A,v[y],V);if(P===null){A===null&&(A=x);break}t&&A&&P.alternate===null&&e(w,A),_=s(P,_,y),O===null?M=P:O.sibling=P,O=P,A=x}if(y===v.length)return n(w,A),Se&&Nr(w,y),M;if(A===null){for(;y<v.length;y++)A=f(w,v[y],V),A!==null&&(_=s(A,_,y),O===null?M=A:O.sibling=A,O=A);return Se&&Nr(w,y),M}for(A=r(w,A);y<v.length;y++)x=g(A,w,y,v[y],V),x!==null&&(t&&x.alternate!==null&&A.delete(x.key===null?y:x.key),_=s(x,_,y),O===null?M=x:O.sibling=x,O=x);return t&&A.forEach(function(R){return e(w,R)}),Se&&Nr(w,y),M}function S(w,_,v,V){var M=Ns(v);if(typeof M!="function")throw Error(U(150));if(v=M.call(v),v==null)throw Error(U(151));for(var O=M=null,A=_,y=_=0,x=null,P=v.next();A!==null&&!P.done;y++,P=v.next()){A.index>y?(x=A,A=null):x=A.sibling;var R=p(w,A,P.value,V);if(R===null){A===null&&(A=x);break}t&&A&&R.alternate===null&&e(w,A),_=s(R,_,y),O===null?M=R:O.sibling=R,O=R,A=x}if(P.done)return n(w,A),Se&&Nr(w,y),M;if(A===null){for(;!P.done;y++,P=v.next())P=f(w,P.value,V),P!==null&&(_=s(P,_,y),O===null?M=P:O.sibling=P,O=P);return Se&&Nr(w,y),M}for(A=r(w,A);!P.done;y++,P=v.next())P=g(A,w,y,P.value,V),P!==null&&(t&&P.alternate!==null&&A.delete(P.key===null?y:P.key),_=s(P,_,y),O===null?M=P:O.sibling=P,O=P);return t&&A.forEach(function(N){return e(w,N)}),Se&&Nr(w,y),M}function C(w,_,v,V){if(typeof v=="object"&&v!==null&&v.type===vi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Va:e:{for(var M=v.key,O=_;O!==null;){if(O.key===M){if(M=v.type,M===vi){if(O.tag===7){n(w,O.sibling),_=i(O,v.props.children),_.return=w,w=_;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===qn&&sy(M)===O.type){n(w,O.sibling),_=i(O,v.props),_.ref=Os(w,O,v),_.return=w,w=_;break e}n(w,O);break}else e(w,O);O=O.sibling}v.type===vi?(_=$r(v.props.children,w.mode,V,v.key),_.return=w,w=_):(V=hl(v.type,v.key,v.props,null,w.mode,V),V.ref=Os(w,_,v),V.return=w,w=V)}return o(w);case yi:e:{for(O=v.key;_!==null;){if(_.key===O)if(_.tag===4&&_.stateNode.containerInfo===v.containerInfo&&_.stateNode.implementation===v.implementation){n(w,_.sibling),_=i(_,v.children||[]),_.return=w,w=_;break e}else{n(w,_);break}else e(w,_);_=_.sibling}_=Xc(v,w.mode,V),_.return=w,w=_}return o(w);case qn:return O=v._init,C(w,_,O(v._payload),V)}if($s(v))return E(w,_,v,V);if(Ns(v))return S(w,_,v,V);za(w,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,_!==null&&_.tag===6?(n(w,_.sibling),_=i(_,v),_.return=w,w=_):(n(w,_),_=Yc(v,w.mode,V),_.return=w,w=_),o(w)):n(w,_)}return C}var Ki=lw(!0),uw=lw(!1),bl=Er(null),Ml=null,Ii=null,kd=null;function Vd(){kd=Ii=Ml=null}function Nd(t){var e=bl.current;Te(bl),t._currentValue=e}function Yh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ji(t,e){Ml=t,kd=Ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function Yt(t){var e=t._currentValue;if(kd!==t)if(t={context:t,memoizedValue:e,next:null},Ii===null){if(Ml===null)throw Error(U(308));Ii=t,Ml.dependencies={lanes:0,firstContext:t}}else Ii=Ii.next=t;return e}var Or=null;function Dd(t){Or===null?Or=[t]:Or.push(t)}function cw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Dd(e)):(n.next=i.next,i.next=n),e.interleaved=n,Vn(t,r)}function Vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gn=!1;function bd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function sr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vn(t,n)}return i=r.interleaved,i===null?(e.next=e,Dd(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vn(t,n)}function sl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_d(t,n)}}function oy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ll(t,e,n,r){var i=t.updateQueue;Gn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,S=a;switch(p=e,g=n,S.tag){case 1:if(E=S.payload,typeof E=="function"){f=E.call(g,f,p);break e}f=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=S.payload,p=typeof E=="function"?E.call(g,f,p):E,p==null)break e;f=Re({},f,p);break e;case 2:Gn=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=f):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Yr|=o,t.lanes=o,t.memoizedState=f}}function ay(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(U(191,i));i.call(r)}}}var ea={},fn=Er(ea),Co=Er(ea),Po=Er(ea);function Fr(t){if(t===ea)throw Error(U(174));return t}function Md(t,e){switch(_e(Po,e),_e(Co,t),_e(fn,ea),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kh(e,t)}Te(fn),_e(fn,e)}function qi(){Te(fn),Te(Co),Te(Po)}function fw(t){Fr(Po.current);var e=Fr(fn.current),n=kh(e,t.type);e!==n&&(_e(Co,t),_e(fn,n))}function Ld(t){Co.current===t&&(Te(fn),Te(Co))}var Ae=Er(0);function Ol(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wc=[];function Od(){for(var t=0;t<Wc.length;t++)Wc[t]._workInProgressVersionPrimary=null;Wc.length=0}var ol=Bn.ReactCurrentDispatcher,Hc=Bn.ReactCurrentBatchConfig,Qr=0,Ce=null,$e=null,Ge=null,Fl=!1,no=!1,Ro=0,EA=0;function lt(){throw Error(U(321))}function Fd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function jd(t,e,n,r,i,s){if(Qr=s,Ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ol.current=t===null||t.memoizedState===null?AA:IA,t=n(r,i),no){s=0;do{if(no=!1,Ro=0,25<=s)throw Error(U(301));s+=1,Ge=$e=null,e.updateQueue=null,ol.current=CA,t=n(r,i)}while(no)}if(ol.current=jl,e=$e!==null&&$e.next!==null,Qr=0,Ge=$e=Ce=null,Fl=!1,e)throw Error(U(300));return t}function Bd(){var t=Ro!==0;return Ro=0,t}function un(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ce.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Xt(){if($e===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=Ge===null?Ce.memoizedState:Ge.next;if(e!==null)Ge=e,$e=t;else{if(t===null)throw Error(U(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},Ge===null?Ce.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function ko(t,e){return typeof e=="function"?e(t):e}function Kc(t){var e=Xt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=$e,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Qr&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Ce.lanes|=h,Yr|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,an(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ce.lanes|=s,Yr|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qc(t){var e=Xt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);an(s,e.memoizedState)||(Ct=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function dw(){}function pw(t,e){var n=Ce,r=Xt(),i=e(),s=!an(r.memoizedState,i);if(s&&(r.memoizedState=i,Ct=!0),r=r.queue,Ud(yw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Vo(9,gw.bind(null,n,r,i,e),void 0,null),Qe===null)throw Error(U(349));Qr&30||mw(n,e,i)}return i}function mw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gw(t,e,n,r){e.value=n,e.getSnapshot=r,vw(e)&&_w(t)}function yw(t,e,n){return n(function(){vw(e)&&_w(t)})}function vw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function _w(t){var e=Vn(t,1);e!==null&&on(e,t,1,-1)}function ly(t){var e=un();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:t},e.queue=t,t=t.dispatch=xA.bind(null,Ce,t),[e.memoizedState,t]}function Vo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ww(){return Xt().memoizedState}function al(t,e,n,r){var i=un();Ce.flags|=t,i.memoizedState=Vo(1|e,n,void 0,r===void 0?null:r)}function Eu(t,e,n,r){var i=Xt();r=r===void 0?null:r;var s=void 0;if($e!==null){var o=$e.memoizedState;if(s=o.destroy,r!==null&&Fd(r,o.deps)){i.memoizedState=Vo(e,n,s,r);return}}Ce.flags|=t,i.memoizedState=Vo(1|e,n,s,r)}function uy(t,e){return al(8390656,8,t,e)}function Ud(t,e){return Eu(2048,8,t,e)}function Ew(t,e){return Eu(4,2,t,e)}function Tw(t,e){return Eu(4,4,t,e)}function Sw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xw(t,e,n){return n=n!=null?n.concat([t]):null,Eu(4,4,Sw.bind(null,e,t),n)}function zd(){}function Aw(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Iw(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Cw(t,e,n){return Qr&21?(an(n,e)||(n=N_(),Ce.lanes|=n,Yr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function TA(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=Hc.transition;Hc.transition={};try{t(!1),e()}finally{fe=n,Hc.transition=r}}function Pw(){return Xt().memoizedState}function SA(t,e,n){var r=ar(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Rw(t))kw(e,n);else if(n=cw(t,e,n,r),n!==null){var i=wt();on(n,t,r,i),Vw(n,e,r)}}function xA(t,e,n){var r=ar(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rw(t))kw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,an(a,o)){var l=e.interleaved;l===null?(i.next=i,Dd(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=cw(t,e,i,r),n!==null&&(i=wt(),on(n,t,r,i),Vw(n,e,r))}}function Rw(t){var e=t.alternate;return t===Ce||e!==null&&e===Ce}function kw(t,e){no=Fl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Vw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_d(t,n)}}var jl={readContext:Yt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},AA={readContext:Yt,useCallback:function(t,e){return un().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:uy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,al(4194308,4,Sw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return al(4194308,4,t,e)},useInsertionEffect:function(t,e){return al(4,2,t,e)},useMemo:function(t,e){var n=un();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=un();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=SA.bind(null,Ce,t),[r.memoizedState,t]},useRef:function(t){var e=un();return t={current:t},e.memoizedState=t},useState:ly,useDebugValue:zd,useDeferredValue:function(t){return un().memoizedState=t},useTransition:function(){var t=ly(!1),e=t[0];return t=TA.bind(null,t[1]),un().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ce,i=un();if(Se){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Qe===null)throw Error(U(349));Qr&30||mw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,uy(yw.bind(null,r,s,t),[t]),r.flags|=2048,Vo(9,gw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=un(),e=Qe.identifierPrefix;if(Se){var n=In,r=An;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ro++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=EA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},IA={readContext:Yt,useCallback:Aw,useContext:Yt,useEffect:Ud,useImperativeHandle:xw,useInsertionEffect:Ew,useLayoutEffect:Tw,useMemo:Iw,useReducer:Kc,useRef:ww,useState:function(){return Kc(ko)},useDebugValue:zd,useDeferredValue:function(t){var e=Xt();return Cw(e,$e.memoizedState,t)},useTransition:function(){var t=Kc(ko)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:dw,useSyncExternalStore:pw,useId:Pw,unstable_isNewReconciler:!1},CA={readContext:Yt,useCallback:Aw,useContext:Yt,useEffect:Ud,useImperativeHandle:xw,useInsertionEffect:Ew,useLayoutEffect:Tw,useMemo:Iw,useReducer:qc,useRef:ww,useState:function(){return qc(ko)},useDebugValue:zd,useDeferredValue:function(t){var e=Xt();return $e===null?e.memoizedState=t:Cw(e,$e.memoizedState,t)},useTransition:function(){var t=qc(ko)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:dw,useSyncExternalStore:pw,useId:Pw,unstable_isNewReconciler:!1};function tn(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tu={isMounted:function(t){return(t=t._reactInternals)?ri(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),i=ar(t),s=Cn(r,i);s.payload=e,n!=null&&(s.callback=n),e=sr(t,s,i),e!==null&&(on(e,t,i,r),sl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),i=ar(t),s=Cn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=sr(t,s,i),e!==null&&(on(e,t,i,r),sl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=ar(t),i=Cn(n,r);i.tag=2,e!=null&&(i.callback=e),e=sr(t,i,r),e!==null&&(on(e,t,r,n),sl(e,t,r))}};function cy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!So(n,r)||!So(i,s):!0}function Nw(t,e,n){var r=!1,i=pr,s=e.contextType;return typeof s=="object"&&s!==null?s=Yt(s):(i=kt(e)?qr:mt.current,r=e.contextTypes,s=(r=r!=null)?Wi(t,i):pr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function hy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Tu.enqueueReplaceState(e,e.state,null)}function Jh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},bd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Yt(s):(s=kt(e)?qr:mt.current,i.context=Wi(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Xh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Tu.enqueueReplaceState(i,i.state,null),Ll(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gi(t,e){try{var n="",r=e;do n+=t2(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Gc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var PA=typeof WeakMap=="function"?WeakMap:Map;function Dw(t,e,n){n=Cn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ul||(Ul=!0,cf=r),Zh(t,e)},n}function bw(t,e,n){n=Cn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Zh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Zh(t,e),typeof r!="function"&&(or===null?or=new Set([this]):or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function fy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new PA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=zA.bind(null,t,e,n),e.then(t,t))}function dy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function py(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Cn(-1,1),e.tag=2,sr(n,e,1))),n.lanes|=1),t)}var RA=Bn.ReactCurrentOwner,Ct=!1;function vt(t,e,n,r){e.child=t===null?uw(e,null,n,r):Ki(e,t.child,n,r)}function my(t,e,n,r,i){n=n.render;var s=e.ref;return ji(e,i),r=jd(t,e,n,r,s,i),n=Bd(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nn(t,e,i)):(Se&&n&&Cd(e),e.flags|=1,vt(t,e,r,i),e.child)}function gy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Yd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Mw(t,e,s,r,i)):(t=hl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:So,n(o,r)&&t.ref===e.ref)return Nn(t,e,i)}return e.flags|=1,t=lr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Mw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(So(s,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,Nn(t,e,i)}return ef(t,e,n,r,i)}function Lw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Pi,bt),bt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(Pi,bt),bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,_e(Pi,bt),bt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,_e(Pi,bt),bt|=r;return vt(t,e,i,n),e.child}function Ow(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ef(t,e,n,r,i){var s=kt(n)?qr:mt.current;return s=Wi(e,s),ji(e,i),n=jd(t,e,n,r,s,i),r=Bd(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Nn(t,e,i)):(Se&&r&&Cd(e),e.flags|=1,vt(t,e,n,i),e.child)}function yy(t,e,n,r,i){if(kt(n)){var s=!0;Vl(e)}else s=!1;if(ji(e,i),e.stateNode===null)ll(t,e),Nw(e,n,r),Jh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Yt(c):(c=kt(n)?qr:mt.current,c=Wi(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&hy(e,o,r,c),Gn=!1;var p=e.memoizedState;o.state=p,Ll(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Rt.current||Gn?(typeof h=="function"&&(Xh(e,n,h,r),l=e.memoizedState),(a=Gn||cy(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,hw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:tn(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Yt(l):(l=kt(n)?qr:mt.current,l=Wi(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&hy(e,o,r,l),Gn=!1,p=e.memoizedState,o.state=p,Ll(e,r,o,i);var E=e.memoizedState;a!==f||p!==E||Rt.current||Gn?(typeof g=="function"&&(Xh(e,n,g,r),E=e.memoizedState),(c=Gn||cy(e,n,c,r,p,E,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return tf(t,e,n,r,s,i)}function tf(t,e,n,r,i,s){Ow(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ny(e,n,!1),Nn(t,e,s);r=e.stateNode,RA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ki(e,t.child,null,s),e.child=Ki(e,null,a,s)):vt(t,e,a,s),e.memoizedState=r.state,i&&ny(e,n,!0),e.child}function Fw(t){var e=t.stateNode;e.pendingContext?ty(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ty(t,e.context,!1),Md(t,e.containerInfo)}function vy(t,e,n,r,i){return Hi(),Rd(i),e.flags|=256,vt(t,e,n,r),e.child}var nf={dehydrated:null,treeContext:null,retryLane:0};function rf(t){return{baseLanes:t,cachePool:null,transitions:null}}function jw(t,e,n){var r=e.pendingProps,i=Ae.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_e(Ae,i&1),t===null)return Qh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Au(o,r,0,null),t=$r(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=rf(n),e.memoizedState=nf,t):$d(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return kA(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=lr(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=lr(a,s):(s=$r(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?rf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=nf,r}return s=t.child,t=s.sibling,r=lr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $d(t,e){return e=Au({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $a(t,e,n,r){return r!==null&&Rd(r),Ki(e,t.child,null,n),t=$d(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kA(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Gc(Error(U(422))),$a(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Au({mode:"visible",children:r.children},i,0,null),s=$r(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ki(e,t.child,null,o),e.child.memoizedState=rf(o),e.memoizedState=nf,s);if(!(e.mode&1))return $a(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(U(419)),r=Gc(s,r,void 0),$a(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ct||a){if(r=Qe,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Vn(t,i),on(r,t,i,-1))}return Qd(),r=Gc(Error(U(421))),$a(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=$A.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Mt=ir(i.nextSibling),Ot=e,Se=!0,rn=null,t!==null&&(Wt[Ht++]=An,Wt[Ht++]=In,Wt[Ht++]=Gr,An=t.id,In=t.overflow,Gr=e),e=$d(e,r.children),e.flags|=4096,e)}function _y(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Yh(t.return,e,n)}function Qc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Bw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(vt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_y(t,n,e);else if(t.tag===19)_y(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Ol(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Qc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Ol(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Qc(e,!0,n,null,s);break;case"together":Qc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ll(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Nn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=lr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=lr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function VA(t,e,n){switch(e.tag){case 3:Fw(e),Hi();break;case 5:fw(e);break;case 1:kt(e.type)&&Vl(e);break;case 4:Md(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;_e(bl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?jw(t,e,n):(_e(Ae,Ae.current&1),t=Nn(t,e,n),t!==null?t.sibling:null);_e(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Bw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_e(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,Lw(t,e,n)}return Nn(t,e,n)}var Uw,sf,zw,$w;Uw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sf=function(){};zw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fr(fn.current);var s=null;switch(n){case"input":i=Ih(t,i),r=Ih(t,r),s=[];break;case"select":i=Re({},i,{value:void 0}),r=Re({},r,{value:void 0}),s=[];break;case"textarea":i=Rh(t,i),r=Rh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Rl)}Vh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(go.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(go.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ee("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};$w=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fs(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function NA(t,e,n){var r=e.pendingProps;switch(Pd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return kt(e.type)&&kl(),ut(e),null;case 3:return r=e.stateNode,qi(),Te(Rt),Te(mt),Od(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ua(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rn!==null&&(df(rn),rn=null))),sf(t,e),ut(e),null;case 5:Ld(e);var i=Fr(Po.current);if(n=e.type,t!==null&&e.stateNode!=null)zw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ut(e),null}if(t=Fr(fn.current),Ua(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[cn]=e,r[Io]=s,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(i=0;i<Hs.length;i++)Ee(Hs[i],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":Pg(r,s),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ee("invalid",r);break;case"textarea":kg(r,s),Ee("invalid",r)}Vh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ba(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ba(r.textContent,a,t),i=["children",""+a]):go.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Na(r),Rg(r,s,!0);break;case"textarea":Na(r),Vg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Rl)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=y_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[cn]=e,t[Io]=r,Uw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Nh(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),i=r;break;case"iframe":case"object":case"embed":Ee("load",t),i=r;break;case"video":case"audio":for(i=0;i<Hs.length;i++)Ee(Hs[i],t);i=r;break;case"source":Ee("error",t),i=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),i=r;break;case"details":Ee("toggle",t),i=r;break;case"input":Pg(t,r),i=Ih(t,r),Ee("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Re({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":kg(t,r),i=Rh(t,r),Ee("invalid",t);break;default:i=r}Vh(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?w_(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&v_(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&yo(t,l):typeof l=="number"&&yo(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(go.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ee("scroll",t):l!=null&&dd(t,s,l,o))}switch(n){case"input":Na(t),Rg(t,r,!1);break;case"textarea":Na(t),Vg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+dr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Mi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Mi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Rl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)$w(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Fr(Po.current),Fr(fn.current),Ua(e)){if(r=e.stateNode,n=e.memoizedProps,r[cn]=e,(s=r.nodeValue!==n)&&(t=Ot,t!==null))switch(t.tag){case 3:Ba(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ba(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cn]=e,e.stateNode=r}return ut(e),null;case 13:if(Te(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&Mt!==null&&e.mode&1&&!(e.flags&128))aw(),Hi(),e.flags|=98560,s=!1;else if(s=Ua(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[cn]=e}else Hi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),s=!1}else rn!==null&&(df(rn),rn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?He===0&&(He=3):Qd())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return qi(),sf(t,e),t===null&&xo(e.stateNode.containerInfo),ut(e),null;case 10:return Nd(e.type._context),ut(e),null;case 17:return kt(e.type)&&kl(),ut(e),null;case 19:if(Te(Ae),s=e.memoizedState,s===null)return ut(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Fs(s,!1);else{if(He!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ol(t),o!==null){for(e.flags|=128,Fs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Ae,Ae.current&1|2),e.child}t=t.sibling}s.tail!==null&&Fe()>Qi&&(e.flags|=128,r=!0,Fs(s,!1),e.lanes=4194304)}else{if(!r)if(t=Ol(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Se)return ut(e),null}else 2*Fe()-s.renderingStartTime>Qi&&n!==1073741824&&(e.flags|=128,r=!0,Fs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Fe(),e.sibling=null,n=Ae.current,_e(Ae,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return Gd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bt&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function DA(t,e){switch(Pd(e),e.tag){case 1:return kt(e.type)&&kl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qi(),Te(Rt),Te(mt),Od(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ld(e),null;case 13:if(Te(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Hi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Ae),null;case 4:return qi(),null;case 10:return Nd(e.type._context),null;case 22:case 23:return Gd(),null;case 24:return null;default:return null}}var Wa=!1,ft=!1,bA=typeof WeakSet=="function"?WeakSet:Set,$=null;function Ci(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function of(t,e,n){try{n()}catch(r){be(t,e,r)}}var wy=!1;function MA(t,e){if(zh=Il,t=G_(),Id(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for($h={focusedElem:t,selectionRange:n},Il=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var S=E.memoizedProps,C=E.memoizedState,w=e.stateNode,_=w.getSnapshotBeforeUpdate(e.elementType===e.type?S:tn(e.type,S),C);w.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(V){be(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return E=wy,wy=!1,E}function ro(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&of(e,n,s)}i=i.next}while(i!==r)}}function Su(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function af(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ww(t){var e=t.alternate;e!==null&&(t.alternate=null,Ww(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cn],delete e[Io],delete e[Kh],delete e[yA],delete e[vA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hw(t){return t.tag===5||t.tag===3||t.tag===4}function Ey(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Rl));else if(r!==4&&(t=t.child,t!==null))for(lf(t,e,n),t=t.sibling;t!==null;)lf(t,e,n),t=t.sibling}function uf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(uf(t,e,n),t=t.sibling;t!==null;)uf(t,e,n),t=t.sibling}var Xe=null,nn=!1;function Wn(t,e,n){for(n=n.child;n!==null;)Kw(t,e,n),n=n.sibling}function Kw(t,e,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(mu,n)}catch{}switch(n.tag){case 5:ft||Ci(n,e);case 6:var r=Xe,i=nn;Xe=null,Wn(t,e,n),Xe=r,nn=i,Xe!==null&&(nn?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(nn?(t=Xe,n=n.stateNode,t.nodeType===8?zc(t.parentNode,n):t.nodeType===1&&zc(t,n),Eo(t)):zc(Xe,n.stateNode));break;case 4:r=Xe,i=nn,Xe=n.stateNode.containerInfo,nn=!0,Wn(t,e,n),Xe=r,nn=i;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&of(n,e,o),i=i.next}while(i!==r)}Wn(t,e,n);break;case 1:if(!ft&&(Ci(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){be(n,e,a)}Wn(t,e,n);break;case 21:Wn(t,e,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,Wn(t,e,n),ft=r):Wn(t,e,n);break;default:Wn(t,e,n)}}function Ty(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bA),e.forEach(function(r){var i=WA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xe=a.stateNode,nn=!1;break e;case 3:Xe=a.stateNode.containerInfo,nn=!0;break e;case 4:Xe=a.stateNode.containerInfo,nn=!0;break e}a=a.return}if(Xe===null)throw Error(U(160));Kw(s,o,i),Xe=null,nn=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){be(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qw(e,t),e=e.sibling}function qw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(e,t),ln(t),r&4){try{ro(3,t,t.return),Su(3,t)}catch(S){be(t,t.return,S)}try{ro(5,t,t.return)}catch(S){be(t,t.return,S)}}break;case 1:Zt(e,t),ln(t),r&512&&n!==null&&Ci(n,n.return);break;case 5:if(Zt(e,t),ln(t),r&512&&n!==null&&Ci(n,n.return),t.flags&32){var i=t.stateNode;try{yo(i,"")}catch(S){be(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&m_(i,s),Nh(a,o);var c=Nh(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?w_(i,f):h==="dangerouslySetInnerHTML"?v_(i,f):h==="children"?yo(i,f):dd(i,h,f,c)}switch(a){case"input":Ch(i,s);break;case"textarea":g_(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Mi(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Mi(i,!!s.multiple,s.defaultValue,!0):Mi(i,!!s.multiple,s.multiple?[]:"",!1))}i[Io]=s}catch(S){be(t,t.return,S)}}break;case 6:if(Zt(e,t),ln(t),r&4){if(t.stateNode===null)throw Error(U(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){be(t,t.return,S)}}break;case 3:if(Zt(e,t),ln(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Eo(e.containerInfo)}catch(S){be(t,t.return,S)}break;case 4:Zt(e,t),ln(t);break;case 13:Zt(e,t),ln(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Kd=Fe())),r&4&&Ty(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ft=(c=ft)||h,Zt(e,t),ft=c):Zt(e,t),ln(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for($=t,h=t.child;h!==null;){for(f=$=h;$!==null;){switch(p=$,g=p.child,p.tag){case 0:case 11:case 14:case 15:ro(4,p,p.return);break;case 1:Ci(p,p.return);var E=p.stateNode;if(typeof E.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(S){be(r,n,S)}}break;case 5:Ci(p,p.return);break;case 22:if(p.memoizedState!==null){xy(f);continue}}g!==null?(g.return=p,$=g):xy(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=__("display",o))}catch(S){be(t,t.return,S)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(S){be(t,t.return,S)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Zt(e,t),ln(t),r&4&&Ty(t);break;case 21:break;default:Zt(e,t),ln(t)}}function ln(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Hw(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(yo(i,""),r.flags&=-33);var s=Ey(t);uf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ey(t);lf(t,a,o);break;default:throw Error(U(161))}}catch(l){be(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function LA(t,e,n){$=t,Gw(t)}function Gw(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Wa;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ft;a=Wa;var c=ft;if(Wa=o,(ft=l)&&!c)for($=i;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?Ay(i):l!==null?(l.return=o,$=l):Ay(i);for(;s!==null;)$=s,Gw(s),s=s.sibling;$=i,Wa=a,ft=c}Sy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):Sy(t)}}function Sy(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ft||Su(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ft)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ay(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ay(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Eo(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ft||e.flags&512&&af(e)}catch(p){be(e,e.return,p)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function xy(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Ay(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Su(4,e)}catch(l){be(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){be(e,i,l)}}var s=e.return;try{af(e)}catch(l){be(e,s,l)}break;case 5:var o=e.return;try{af(e)}catch(l){be(e,o,l)}}}catch(l){be(e,e.return,l)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var OA=Math.ceil,Bl=Bn.ReactCurrentDispatcher,Wd=Bn.ReactCurrentOwner,qt=Bn.ReactCurrentBatchConfig,ae=0,Qe=null,Ue=null,tt=0,bt=0,Pi=Er(0),He=0,No=null,Yr=0,xu=0,Hd=0,io=null,At=null,Kd=0,Qi=1/0,Sn=null,Ul=!1,cf=null,or=null,Ha=!1,Jn=null,zl=0,so=0,hf=null,ul=-1,cl=0;function wt(){return ae&6?Fe():ul!==-1?ul:ul=Fe()}function ar(t){return t.mode&1?ae&2&&tt!==0?tt&-tt:wA.transition!==null?(cl===0&&(cl=N_()),cl):(t=fe,t!==0||(t=window.event,t=t===void 0?16:j_(t.type)),t):1}function on(t,e,n,r){if(50<so)throw so=0,hf=null,Error(U(185));Xo(t,n,r),(!(ae&2)||t!==Qe)&&(t===Qe&&(!(ae&2)&&(xu|=n),He===4&&Yn(t,tt)),Vt(t,r),n===1&&ae===0&&!(e.mode&1)&&(Qi=Fe()+500,wu&&Tr()))}function Vt(t,e){var n=t.callbackNode;w2(t,e);var r=Al(t,t===Qe?tt:0);if(r===0)n!==null&&bg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&bg(n),e===1)t.tag===0?_A(Iy.bind(null,t)):iw(Iy.bind(null,t)),mA(function(){!(ae&6)&&Tr()}),n=null;else{switch(D_(r)){case 1:n=vd;break;case 4:n=k_;break;case 16:n=xl;break;case 536870912:n=V_;break;default:n=xl}n=n1(n,Qw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Qw(t,e){if(ul=-1,cl=0,ae&6)throw Error(U(327));var n=t.callbackNode;if(Bi()&&t.callbackNode!==n)return null;var r=Al(t,t===Qe?tt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$l(t,r);else{e=r;var i=ae;ae|=2;var s=Xw();(Qe!==t||tt!==e)&&(Sn=null,Qi=Fe()+500,zr(t,e));do try{BA();break}catch(a){Yw(t,a)}while(!0);Vd(),Bl.current=s,ae=i,Ue!==null?e=0:(Qe=null,tt=0,e=He)}if(e!==0){if(e===2&&(i=Oh(t),i!==0&&(r=i,e=ff(t,i))),e===1)throw n=No,zr(t,0),Yn(t,r),Vt(t,Fe()),n;if(e===6)Yn(t,r);else{if(i=t.current.alternate,!(r&30)&&!FA(i)&&(e=$l(t,r),e===2&&(s=Oh(t),s!==0&&(r=s,e=ff(t,s))),e===1))throw n=No,zr(t,0),Yn(t,r),Vt(t,Fe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Dr(t,At,Sn);break;case 3:if(Yn(t,r),(r&130023424)===r&&(e=Kd+500-Fe(),10<e)){if(Al(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Hh(Dr.bind(null,t,At,Sn),e);break}Dr(t,At,Sn);break;case 4:if(Yn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-sn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*OA(r/1960))-r,10<r){t.timeoutHandle=Hh(Dr.bind(null,t,At,Sn),r);break}Dr(t,At,Sn);break;case 5:Dr(t,At,Sn);break;default:throw Error(U(329))}}}return Vt(t,Fe()),t.callbackNode===n?Qw.bind(null,t):null}function ff(t,e){var n=io;return t.current.memoizedState.isDehydrated&&(zr(t,e).flags|=256),t=$l(t,e),t!==2&&(e=At,At=n,e!==null&&df(e)),t}function df(t){At===null?At=t:At.push.apply(At,t)}function FA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!an(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yn(t,e){for(e&=~Hd,e&=~xu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sn(e),r=1<<n;t[n]=-1,e&=~r}}function Iy(t){if(ae&6)throw Error(U(327));Bi();var e=Al(t,0);if(!(e&1))return Vt(t,Fe()),null;var n=$l(t,e);if(t.tag!==0&&n===2){var r=Oh(t);r!==0&&(e=r,n=ff(t,r))}if(n===1)throw n=No,zr(t,0),Yn(t,e),Vt(t,Fe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Dr(t,At,Sn),Vt(t,Fe()),null}function qd(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(Qi=Fe()+500,wu&&Tr())}}function Xr(t){Jn!==null&&Jn.tag===0&&!(ae&6)&&Bi();var e=ae;ae|=1;var n=qt.transition,r=fe;try{if(qt.transition=null,fe=1,t)return t()}finally{fe=r,qt.transition=n,ae=e,!(ae&6)&&Tr()}}function Gd(){bt=Pi.current,Te(Pi)}function zr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pA(n)),Ue!==null)for(n=Ue.return;n!==null;){var r=n;switch(Pd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kl();break;case 3:qi(),Te(Rt),Te(mt),Od();break;case 5:Ld(r);break;case 4:qi();break;case 13:Te(Ae);break;case 19:Te(Ae);break;case 10:Nd(r.type._context);break;case 22:case 23:Gd()}n=n.return}if(Qe=t,Ue=t=lr(t.current,null),tt=bt=e,He=0,No=null,Hd=xu=Yr=0,At=io=null,Or!==null){for(e=0;e<Or.length;e++)if(n=Or[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Or=null}return t}function Yw(t,e){do{var n=Ue;try{if(Vd(),ol.current=jl,Fl){for(var r=Ce.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fl=!1}if(Qr=0,Ge=$e=Ce=null,no=!1,Ro=0,Wd.current=null,n===null||n.return===null){He=1,No=e,Ue=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=tt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=dy(o);if(g!==null){g.flags&=-257,py(g,o,a,s,e),g.mode&1&&fy(s,c,e),e=g,l=c;var E=e.updateQueue;if(E===null){var S=new Set;S.add(l),e.updateQueue=S}else E.add(l);break e}else{if(!(e&1)){fy(s,c,e),Qd();break e}l=Error(U(426))}}else if(Se&&a.mode&1){var C=dy(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),py(C,o,a,s,e),Rd(Gi(l,a));break e}}s=l=Gi(l,a),He!==4&&(He=2),io===null?io=[s]:io.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=Dw(s,l,e);oy(s,w);break e;case 1:a=l;var _=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(or===null||!or.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=bw(s,a,e);oy(s,V);break e}}s=s.return}while(s!==null)}Zw(n)}catch(M){e=M,Ue===n&&n!==null&&(Ue=n=n.return);continue}break}while(!0)}function Xw(){var t=Bl.current;return Bl.current=jl,t===null?jl:t}function Qd(){(He===0||He===3||He===2)&&(He=4),Qe===null||!(Yr&268435455)&&!(xu&268435455)||Yn(Qe,tt)}function $l(t,e){var n=ae;ae|=2;var r=Xw();(Qe!==t||tt!==e)&&(Sn=null,zr(t,e));do try{jA();break}catch(i){Yw(t,i)}while(!0);if(Vd(),ae=n,Bl.current=r,Ue!==null)throw Error(U(261));return Qe=null,tt=0,He}function jA(){for(;Ue!==null;)Jw(Ue)}function BA(){for(;Ue!==null&&!h2();)Jw(Ue)}function Jw(t){var e=t1(t.alternate,t,bt);t.memoizedProps=t.pendingProps,e===null?Zw(t):Ue=e,Wd.current=null}function Zw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DA(n,e),n!==null){n.flags&=32767,Ue=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{He=6,Ue=null;return}}else if(n=NA(n,e,bt),n!==null){Ue=n;return}if(e=e.sibling,e!==null){Ue=e;return}Ue=e=t}while(e!==null);He===0&&(He=5)}function Dr(t,e,n){var r=fe,i=qt.transition;try{qt.transition=null,fe=1,UA(t,e,n,r)}finally{qt.transition=i,fe=r}return null}function UA(t,e,n,r){do Bi();while(Jn!==null);if(ae&6)throw Error(U(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(E2(t,s),t===Qe&&(Ue=Qe=null,tt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ha||(Ha=!0,n1(xl,function(){return Bi(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=qt.transition,qt.transition=null;var o=fe;fe=1;var a=ae;ae|=4,Wd.current=null,MA(t,n),qw(n,t),aA($h),Il=!!zh,$h=zh=null,t.current=n,LA(n),f2(),ae=a,fe=o,qt.transition=s}else t.current=n;if(Ha&&(Ha=!1,Jn=t,zl=i),s=t.pendingLanes,s===0&&(or=null),m2(n.stateNode),Vt(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ul)throw Ul=!1,t=cf,cf=null,t;return zl&1&&t.tag!==0&&Bi(),s=t.pendingLanes,s&1?t===hf?so++:(so=0,hf=t):so=0,Tr(),null}function Bi(){if(Jn!==null){var t=D_(zl),e=qt.transition,n=fe;try{if(qt.transition=null,fe=16>t?16:t,Jn===null)var r=!1;else{if(t=Jn,Jn=null,zl=0,ae&6)throw Error(U(331));var i=ae;for(ae|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for($=c;$!==null;){var h=$;switch(h.tag){case 0:case 11:case 15:ro(8,h,s)}var f=h.child;if(f!==null)f.return=h,$=f;else for(;$!==null;){h=$;var p=h.sibling,g=h.return;if(Ww(h),h===c){$=null;break}if(p!==null){p.return=g,$=p;break}$=g}}}var E=s.alternate;if(E!==null){var S=E.child;if(S!==null){E.child=null;do{var C=S.sibling;S.sibling=null,S=C}while(S!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ro(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,$=w;break e}$=s.return}}var _=t.current;for($=_;$!==null;){o=$;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,$=v;else e:for(o=_;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Su(9,a)}}catch(M){be(a,a.return,M)}if(a===o){$=null;break e}var V=a.sibling;if(V!==null){V.return=a.return,$=V;break e}$=a.return}}if(ae=i,Tr(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(mu,t)}catch{}r=!0}return r}finally{fe=n,qt.transition=e}}return!1}function Cy(t,e,n){e=Gi(n,e),e=Dw(t,e,1),t=sr(t,e,1),e=wt(),t!==null&&(Xo(t,1,e),Vt(t,e))}function be(t,e,n){if(t.tag===3)Cy(t,t,n);else for(;e!==null;){if(e.tag===3){Cy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(or===null||!or.has(r))){t=Gi(n,t),t=bw(e,t,1),e=sr(e,t,1),t=wt(),e!==null&&(Xo(e,1,t),Vt(e,t));break}}e=e.return}}function zA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(tt&n)===n&&(He===4||He===3&&(tt&130023424)===tt&&500>Fe()-Kd?zr(t,0):Hd|=n),Vt(t,e)}function e1(t,e){e===0&&(t.mode&1?(e=Ma,Ma<<=1,!(Ma&130023424)&&(Ma=4194304)):e=1);var n=wt();t=Vn(t,e),t!==null&&(Xo(t,e,n),Vt(t,n))}function $A(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),e1(t,n)}function WA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),e1(t,n)}var t1;t1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,VA(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,Se&&e.flags&1048576&&sw(e,Dl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ll(t,e),t=e.pendingProps;var i=Wi(e,mt.current);ji(e,n),i=jd(null,e,r,t,i,n);var s=Bd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kt(r)?(s=!0,Vl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bd(e),i.updater=Tu,e.stateNode=i,i._reactInternals=e,Jh(e,r,t,n),e=tf(null,e,r,!0,s,n)):(e.tag=0,Se&&s&&Cd(e),vt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ll(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=KA(r),t=tn(r,t),i){case 0:e=ef(null,e,r,t,n);break e;case 1:e=yy(null,e,r,t,n);break e;case 11:e=my(null,e,r,t,n);break e;case 14:e=gy(null,e,r,tn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tn(r,i),ef(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tn(r,i),yy(t,e,r,i,n);case 3:e:{if(Fw(e),t===null)throw Error(U(387));r=e.pendingProps,s=e.memoizedState,i=s.element,hw(t,e),Ll(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Gi(Error(U(423)),e),e=vy(t,e,r,n,i);break e}else if(r!==i){i=Gi(Error(U(424)),e),e=vy(t,e,r,n,i);break e}else for(Mt=ir(e.stateNode.containerInfo.firstChild),Ot=e,Se=!0,rn=null,n=uw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Hi(),r===i){e=Nn(t,e,n);break e}vt(t,e,r,n)}e=e.child}return e;case 5:return fw(e),t===null&&Qh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Wh(r,i)?o=null:s!==null&&Wh(r,s)&&(e.flags|=32),Ow(t,e),vt(t,e,o,n),e.child;case 6:return t===null&&Qh(e),null;case 13:return jw(t,e,n);case 4:return Md(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ki(e,null,r,n):vt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tn(r,i),my(t,e,r,i,n);case 7:return vt(t,e,e.pendingProps,n),e.child;case 8:return vt(t,e,e.pendingProps.children,n),e.child;case 12:return vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,_e(bl,r._currentValue),r._currentValue=o,s!==null)if(an(s.value,o)){if(s.children===i.children&&!Rt.current){e=Nn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Cn(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Yh(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Yh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}vt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ji(e,n),i=Yt(i),r=r(i),e.flags|=1,vt(t,e,r,n),e.child;case 14:return r=e.type,i=tn(r,e.pendingProps),i=tn(r.type,i),gy(t,e,r,i,n);case 15:return Mw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:tn(r,i),ll(t,e),e.tag=1,kt(r)?(t=!0,Vl(e)):t=!1,ji(e,n),Nw(e,r,i),Jh(e,r,i,n),tf(null,e,r,!0,t,n);case 19:return Bw(t,e,n);case 22:return Lw(t,e,n)}throw Error(U(156,e.tag))};function n1(t,e){return R_(t,e)}function HA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new HA(t,e,n,r)}function Yd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KA(t){if(typeof t=="function")return Yd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===md)return 11;if(t===gd)return 14}return 2}function lr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Yd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case vi:return $r(n.children,i,s,e);case pd:o=8,i|=8;break;case Th:return t=Kt(12,n,e,i|2),t.elementType=Th,t.lanes=s,t;case Sh:return t=Kt(13,n,e,i),t.elementType=Sh,t.lanes=s,t;case xh:return t=Kt(19,n,e,i),t.elementType=xh,t.lanes=s,t;case f_:return Au(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case c_:o=10;break e;case h_:o=9;break e;case md:o=11;break e;case gd:o=14;break e;case qn:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Kt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function $r(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function Au(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=f_,t.lanes=n,t.stateNode={isHidden:!1},t}function Yc(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function Xc(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vc(0),this.expirationTimes=Vc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Xd(t,e,n,r,i,s,o,a,l){return t=new qA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Kt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bd(s),t}function GA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function r1(t){if(!t)return pr;t=t._reactInternals;e:{if(ri(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(kt(n))return rw(t,n,e)}return e}function i1(t,e,n,r,i,s,o,a,l){return t=Xd(n,r,!0,t,i,s,o,a,l),t.context=r1(null),n=t.current,r=wt(),i=ar(n),s=Cn(r,i),s.callback=e??null,sr(n,s,i),t.current.lanes=i,Xo(t,i,r),Vt(t,r),t}function Iu(t,e,n,r){var i=e.current,s=wt(),o=ar(i);return n=r1(n),e.context===null?e.context=n:e.pendingContext=n,e=Cn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=sr(i,e,o),t!==null&&(on(t,i,o,s),sl(t,i,o)),o}function Wl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Py(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Jd(t,e){Py(t,e),(t=t.alternate)&&Py(t,e)}function QA(){return null}var s1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Zd(t){this._internalRoot=t}Cu.prototype.render=Zd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Iu(t,e,null,null)};Cu.prototype.unmount=Zd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xr(function(){Iu(null,t,null,null)}),e[kn]=null}};function Cu(t){this._internalRoot=t}Cu.prototype.unstable_scheduleHydration=function(t){if(t){var e=L_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qn.length&&e!==0&&e<Qn[n].priority;n++);Qn.splice(n,0,t),n===0&&F_(t)}};function ep(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ry(){}function YA(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Wl(o);s.call(c)}}var o=i1(e,r,t,0,null,!1,!1,"",Ry);return t._reactRootContainer=o,t[kn]=o.current,xo(t.nodeType===8?t.parentNode:t),Xr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Wl(l);a.call(c)}}var l=Xd(t,0,!1,null,null,!1,!1,"",Ry);return t._reactRootContainer=l,t[kn]=l.current,xo(t.nodeType===8?t.parentNode:t),Xr(function(){Iu(e,l,n,r)}),l}function Ru(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Wl(o);a.call(l)}}Iu(e,o,t,i)}else o=YA(n,e,t,i,r);return Wl(o)}b_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ws(e.pendingLanes);n!==0&&(_d(e,n|1),Vt(e,Fe()),!(ae&6)&&(Qi=Fe()+500,Tr()))}break;case 13:Xr(function(){var r=Vn(t,1);if(r!==null){var i=wt();on(r,t,1,i)}}),Jd(t,1)}};wd=function(t){if(t.tag===13){var e=Vn(t,134217728);if(e!==null){var n=wt();on(e,t,134217728,n)}Jd(t,134217728)}};M_=function(t){if(t.tag===13){var e=ar(t),n=Vn(t,e);if(n!==null){var r=wt();on(n,t,e,r)}Jd(t,e)}};L_=function(){return fe};O_=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};bh=function(t,e,n){switch(e){case"input":if(Ch(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_u(r);if(!i)throw Error(U(90));p_(r),Ch(r,i)}}}break;case"textarea":g_(t,n);break;case"select":e=n.value,e!=null&&Mi(t,!!n.multiple,e,!1)}};S_=qd;x_=Xr;var XA={usingClientEntryPoint:!1,Events:[Zo,Ti,_u,E_,T_,qd]},js={findFiberByHostInstance:Lr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JA={bundleType:js.bundleType,version:js.version,rendererPackageName:js.rendererPackageName,rendererConfig:js.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=C_(t),t===null?null:t.stateNode},findFiberByHostInstance:js.findFiberByHostInstance||QA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ka.isDisabled&&Ka.supportsFiber)try{mu=Ka.inject(JA),hn=Ka}catch{}}jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XA;jt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ep(e))throw Error(U(200));return GA(t,e,null,n)};jt.createRoot=function(t,e){if(!ep(t))throw Error(U(299));var n=!1,r="",i=s1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Xd(t,1,!1,null,null,n,!1,r,i),t[kn]=e.current,xo(t.nodeType===8?t.parentNode:t),new Zd(e)};jt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=C_(e),t=t===null?null:t.stateNode,t};jt.flushSync=function(t){return Xr(t)};jt.hydrate=function(t,e,n){if(!Pu(e))throw Error(U(200));return Ru(null,t,e,!0,n)};jt.hydrateRoot=function(t,e,n){if(!ep(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=s1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=i1(e,null,t,1,n??null,i,!1,s,o),t[kn]=e.current,xo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cu(e)};jt.render=function(t,e,n){if(!Pu(e))throw Error(U(200));return Ru(null,t,e,!1,n)};jt.unmountComponentAtNode=function(t){if(!Pu(t))throw Error(U(40));return t._reactRootContainer?(Xr(function(){Ru(null,null,t,!1,function(){t._reactRootContainer=null,t[kn]=null})}),!0):!1};jt.unstable_batchedUpdates=qd;jt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Ru(t,e,n,!1,r)};jt.version="18.3.1-next-f1338f8080-20240426";function o1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(o1)}catch(t){console.error(t)}}o1(),o_.exports=jt;var ZA=o_.exports,ky=ZA;wh.createRoot=ky.createRoot,wh.hydrateRoot=ky.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Do(){return Do=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Do.apply(this,arguments)}var Zn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Zn||(Zn={}));const Vy="popstate";function eI(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return pf("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Hl(i)}return nI(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function a1(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tI(){return Math.random().toString(36).substr(2,8)}function Ny(t,e){return{usr:t.state,key:t.key,idx:e}}function pf(t,e,n,r){return n===void 0&&(n=null),Do({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?us(e):e,{state:n,key:e&&e.key||r||tI()})}function Hl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function us(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function nI(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Zn.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(Do({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Zn.Pop;let C=h(),w=C==null?null:C-c;c=C,l&&l({action:a,location:S.location,delta:w})}function p(C,w){a=Zn.Push;let _=pf(S.location,C,w);c=h()+1;let v=Ny(_,c),V=S.createHref(_);try{o.pushState(v,"",V)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(V)}s&&l&&l({action:a,location:S.location,delta:1})}function g(C,w){a=Zn.Replace;let _=pf(S.location,C,w);c=h();let v=Ny(_,c),V=S.createHref(_);o.replaceState(v,"",V),s&&l&&l({action:a,location:S.location,delta:0})}function E(C){let w=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof C=="string"?C:Hl(C);return _=_.replace(/ $/,"%20"),Me(w,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,w)}let S={get action(){return a},get location(){return t(i,o)},listen(C){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Vy,f),l=C,()=>{i.removeEventListener(Vy,f),l=null}},createHref(C){return e(i,C)},createURL:E,encodeLocation(C){let w=E(C);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:g,go(C){return o.go(C)}};return S}var Dy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Dy||(Dy={}));function rI(t,e,n){return n===void 0&&(n="/"),iI(t,e,n)}function iI(t,e,n,r){let i=typeof e=="string"?us(e):e,s=Yi(i.pathname||"/",n);if(s==null)return null;let o=l1(t);sI(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=gI(s);a=pI(o[l],c)}return a}function l1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Me(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=ur([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),l1(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:fI(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of u1(s.path))i(s,o,l)}),e}function u1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=u1(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function sI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:dI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const oI=/^:[\w-]+$/,aI=3,lI=2,uI=1,cI=10,hI=-2,by=t=>t==="*";function fI(t,e){let n=t.split("/"),r=n.length;return n.some(by)&&(r+=hI),e&&(r+=lI),n.filter(i=>!by(i)).reduce((i,s)=>i+(oI.test(s)?aI:s===""?uI:cI),r)}function dI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function pI(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=mf({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:ur([s,f.pathname]),pathnameBase:wI(ur([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=ur([s,f.pathnameBase]))}return o}function mf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=mI(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let S=a[f]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const E=a[f];return g&&!E?c[p]=void 0:c[p]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function mI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),a1(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function gI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return a1(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Yi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function yI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?us(t):t;return{pathname:n?n.startsWith("/")?n:vI(n,e):e,search:EI(r),hash:TI(i)}}function vI(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Jc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function _I(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function c1(t,e){let n=_I(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function h1(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=us(t):(i=Do({},t),Me(!i.pathname||!i.pathname.includes("?"),Jc("?","pathname","search",i)),Me(!i.pathname||!i.pathname.includes("#"),Jc("#","pathname","hash",i)),Me(!i.search||!i.search.includes("#"),Jc("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=yI(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const ur=t=>t.join("/").replace(/\/\/+/g,"/"),wI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),EI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function SI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const f1=["post","put","patch","delete"];new Set(f1);const xI=["get",...f1];new Set(xI);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bo(){return bo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bo.apply(this,arguments)}const ku=D.createContext(null),d1=D.createContext(null),Sr=D.createContext(null),Vu=D.createContext(null),ii=D.createContext({outlet:null,matches:[],isDataRoute:!1}),p1=D.createContext(null);function AI(t,e){let{relative:n}=e===void 0?{}:e;ta()||Me(!1);let{basename:r,navigator:i}=D.useContext(Sr),{hash:s,pathname:o,search:a}=Nu(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ur([r,o])),i.createHref({pathname:l,search:a,hash:s})}function ta(){return D.useContext(Vu)!=null}function cs(){return ta()||Me(!1),D.useContext(Vu).location}function m1(t){D.useContext(Sr).static||D.useLayoutEffect(t)}function g1(){let{isDataRoute:t}=D.useContext(ii);return t?FI():II()}function II(){ta()||Me(!1);let t=D.useContext(ku),{basename:e,future:n,navigator:r}=D.useContext(Sr),{matches:i}=D.useContext(ii),{pathname:s}=cs(),o=JSON.stringify(c1(i,n.v7_relativeSplatPath)),a=D.useRef(!1);return m1(()=>{a.current=!0}),D.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=h1(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ur([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,s,t])}function Nu(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Sr),{matches:i}=D.useContext(ii),{pathname:s}=cs(),o=JSON.stringify(c1(i,r.v7_relativeSplatPath));return D.useMemo(()=>h1(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function CI(t,e){return PI(t,e)}function PI(t,e,n,r){ta()||Me(!1);let{navigator:i}=D.useContext(Sr),{matches:s}=D.useContext(ii),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=cs(),h;if(e){var f;let C=typeof e=="string"?us(e):e;l==="/"||(f=C.pathname)!=null&&f.startsWith(l)||Me(!1),h=C}else h=c;let p=h.pathname||"/",g=p;if(l!=="/"){let C=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(C.length).join("/")}let E=rI(t,{pathname:g}),S=DI(E&&E.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:ur([l,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?l:ur([l,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),s,n,r);return e&&S?D.createElement(Vu.Provider,{value:{location:bo({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Zn.Pop}},S):S}function RI(){let t=OI(),e=SI(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const kI=D.createElement(RI,null);class VI extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(ii.Provider,{value:this.props.routeContext},D.createElement(p1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function NI(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(ku);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(ii.Provider,{value:e},r)}function DI(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||Me(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:p,errors:g}=n,E=f.route.loader&&p[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||E){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let g,E=!1,S=null,C=null;n&&(g=a&&f.route.id?a[f.route.id]:void 0,S=f.route.errorElement||kI,l&&(c<0&&p===0?(jI("route-fallback"),E=!0,C=null):c===p&&(E=!0,C=f.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),_=()=>{let v;return g?v=S:E?v=C:f.route.Component?v=D.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=h,D.createElement(NI,{match:f,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:v})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?D.createElement(VI,{location:n.location,revalidation:n.revalidation,component:S,error:g,children:_(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):_()},null)}var y1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(y1||{}),v1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(v1||{});function bI(t){let e=D.useContext(ku);return e||Me(!1),e}function MI(t){let e=D.useContext(d1);return e||Me(!1),e}function LI(t){let e=D.useContext(ii);return e||Me(!1),e}function _1(t){let e=LI(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function OI(){var t;let e=D.useContext(p1),n=MI(),r=_1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function FI(){let{router:t}=bI(y1.UseNavigateStable),e=_1(v1.UseNavigateStable),n=D.useRef(!1);return m1(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,bo({fromRouteId:e},s)))},[t,e])}const My={};function jI(t,e,n){My[t]||(My[t]=!0)}function BI(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Hn(t){Me(!1)}function UI(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Zn.Pop,navigator:s,static:o=!1,future:a}=t;ta()&&Me(!1);let l=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:l,navigator:s,static:o,future:bo({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=us(r));let{pathname:h="/",search:f="",hash:p="",state:g=null,key:E="default"}=r,S=D.useMemo(()=>{let C=Yi(h,l);return C==null?null:{location:{pathname:C,search:f,hash:p,state:g,key:E},navigationType:i}},[l,h,f,p,g,E,i]);return S==null?null:D.createElement(Sr.Provider,{value:c},D.createElement(Vu.Provider,{children:n,value:S}))}function zI(t){let{children:e,location:n}=t;return CI(gf(e),n)}new Promise(()=>{});function gf(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){n.push.apply(n,gf(r.props.children,s));return}r.type!==Hn&&Me(!1),!r.props.index||!r.props.children||Me(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=gf(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Kl(){return Kl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kl.apply(this,arguments)}function w1(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function $I(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function WI(t,e){return t.button===0&&(!e||e==="_self")&&!$I(t)}const HI=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],KI=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],qI="6";try{window.__reactRouterVersion=qI}catch{}const GI=D.createContext({isTransitioning:!1}),QI="startTransition",Ly=zx[QI];function YI(t){let{basename:e,children:n,future:r,window:i}=t,s=D.useRef();s.current==null&&(s.current=eI({window:i,v5Compat:!0}));let o=s.current,[a,l]=D.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=D.useCallback(f=>{c&&Ly?Ly(()=>l(f)):l(f)},[l,c]);return D.useLayoutEffect(()=>o.listen(h),[o,h]),D.useEffect(()=>BI(r),[r]),D.createElement(UI,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const XI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ZI=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f}=e,p=w1(e,HI),{basename:g}=D.useContext(Sr),E,S=!1;if(typeof c=="string"&&JI.test(c)&&(E=c,XI))try{let v=new URL(window.location.href),V=c.startsWith("//")?new URL(v.protocol+c):new URL(c),M=Yi(V.pathname,g);V.origin===v.origin&&M!=null?c=M+V.search+V.hash:S=!0}catch{}let C=AI(c,{relative:i}),w=nC(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:f});function _(v){r&&r(v),v.defaultPrevented||w(v)}return D.createElement("a",Kl({},p,{href:E||C,onClick:S||s?r:_,ref:n,target:l}))}),eC=D.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:c,children:h}=e,f=w1(e,KI),p=Nu(l,{relative:f.relative}),g=cs(),E=D.useContext(d1),{navigator:S,basename:C}=D.useContext(Sr),w=E!=null&&rC(p)&&c===!0,_=S.encodeLocation?S.encodeLocation(p).pathname:p.pathname,v=g.pathname,V=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;i||(v=v.toLowerCase(),V=V?V.toLowerCase():null,_=_.toLowerCase()),V&&C&&(V=Yi(V,C)||V);const M=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let O=v===_||!o&&v.startsWith(_)&&v.charAt(M)==="/",A=V!=null&&(V===_||!o&&V.startsWith(_)&&V.charAt(_.length)==="/"),y={isActive:O,isPending:A,isTransitioning:w},x=O?r:void 0,P;typeof s=="function"?P=s(y):P=[s,O?"active":null,A?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(y):a;return D.createElement(ZI,Kl({},f,{"aria-current":x,className:P,ref:n,style:R,to:l,viewTransition:c}),typeof h=="function"?h(y):h)});var yf;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(yf||(yf={}));var Oy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Oy||(Oy={}));function tC(t){let e=D.useContext(ku);return e||Me(!1),e}function nC(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=g1(),c=cs(),h=Nu(t,{relative:o});return D.useCallback(f=>{if(WI(f,n)){f.preventDefault();let p=r!==void 0?r:Hl(c)===Hl(h);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}function rC(t,e){e===void 0&&(e={});let n=D.useContext(GI);n==null&&Me(!1);let{basename:r}=tC(yf.useViewTransitionState),i=Nu(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Yi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Yi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return mf(i.pathname,o)!=null||mf(i.pathname,s)!=null}var E1={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Fy=me.createContext&&me.createContext(E1),iC=["attr","size","title"];function sC(t,e){if(t==null)return{};var n=oC(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function oC(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function ql(){return ql=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ql.apply(this,arguments)}function jy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jy(Object(n),!0).forEach(function(r){aC(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jy(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aC(t,e,n){return e=lC(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lC(t){var e=uC(t,"string");return typeof e=="symbol"?e:e+""}function uC(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T1(t){return t&&t.map((e,n)=>me.createElement(e.tag,Gl({key:n},e.attr),T1(e.child)))}function xr(t){return e=>me.createElement(cC,ql({attr:Gl({},t.attr)},e),T1(t.child))}function cC(t){var e=n=>{var{attr:r,size:i,title:s}=t,o=sC(t,iC),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),me.createElement("svg",ql({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:l,style:Gl(Gl({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&me.createElement("title",null,s),t.children)};return Fy!==void 0?me.createElement(Fy.Consumer,null,n=>e(n)):e(E1)}function hC(t){return xr({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(t)}function fC(t){return xr({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"},child:[]}]})(t)}function dC(t){return xr({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M336 64h-80c0-35.3-28.7-64-64-64s-64 28.7-64 64H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM96 424c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-96c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm96-192c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zm128 368c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H168c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h144c4.4 0 8 3.6 8 8v16z"},child:[]}]})(t)}function By(t){return xr({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M288 130.54V112h16c8.84 0 16-7.16 16-16V80c0-8.84-7.16-16-16-16h-96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h16v18.54C115.49 146.11 32 239.18 32 352h448c0-112.82-83.49-205.89-192-221.46zM496 384H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h480c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function pC(t){return xr({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M377 105L279.1 7c-4.5-4.5-10.6-7-17-7H256v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-153 31V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zM64 72c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8V72zm0 80v-16c0-4.42 3.58-8 8-8h80c4.42 0 8 3.58 8 8v16c0 4.42-3.58 8-8 8H72c-4.42 0-8-3.58-8-8zm144 263.88V440c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8v-24.29c-11.29-.58-22.27-4.52-31.37-11.35-3.9-2.93-4.1-8.77-.57-12.14l11.75-11.21c2.77-2.64 6.89-2.76 10.13-.73 3.87 2.42 8.26 3.72 12.82 3.72h28.11c6.5 0 11.8-5.92 11.8-13.19 0-5.95-3.61-11.19-8.77-12.73l-45-13.5c-18.59-5.58-31.58-23.42-31.58-43.39 0-24.52 19.05-44.44 42.67-45.07V232c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v24.29c11.29.58 22.27 4.51 31.37 11.35 3.9 2.93 4.1 8.77.57 12.14l-11.75 11.21c-2.77 2.64-6.89 2.76-10.13.73-3.87-2.43-8.26-3.72-12.82-3.72h-28.11c-6.5 0-11.8 5.92-11.8 13.19 0 5.95 3.61 11.19 8.77 12.73l45 13.5c18.59 5.58 31.58 23.42 31.58 43.39 0 24.53-19.05 44.44-42.67 45.07z"},child:[]}]})(t)}function mC(t){return xr({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(t)}function gC(t){return xr({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"},child:[]}]})(t)}function yC(t){return xr({attr:{viewBox:"0 0 416 512"},child:[{tag:"path",attr:{d:"M207.9 15.2c.8 4.7 16.1 94.5 16.1 128.8 0 52.3-27.8 89.6-68.9 104.6L168 486.7c.7 13.7-10.2 25.3-24 25.3H80c-13.7 0-24.7-11.5-24-25.3l12.9-238.1C27.7 233.6 0 196.2 0 144 0 109.6 15.3 19.9 16.1 15.2 19.3-5.1 61.4-5.4 64 16.3v141.2c1.3 3.4 15.1 3.2 16 0 1.4-25.3 7.9-139.2 8-141.8 3.3-20.8 44.7-20.8 47.9 0 .2 2.7 6.6 116.5 8 141.8.9 3.2 14.8 3.4 16 0V16.3c2.6-21.6 44.8-21.4 48-1.1zm119.2 285.7l-15 185.1c-1.2 14 9.9 26 23.9 26h56c13.3 0 24-10.7 24-24V24c0-13.2-10.7-24-24-24-82.5 0-221.4 178.5-64.9 300.9z"},child:[]}]})(t)}const vC=[{path:"/",label:"Home",icon:mC},{path:"/menu",label:"Menu",icon:yC},{path:"/billing",label:"Billing",icon:pC},{path:"/staff",label:"Staff",icon:gC},{path:"/order",label:"Order",icon:dC},{path:"/kitchen",label:"Kitchen",icon:By},{path:"/settings",label:"Settings",icon:By}],_C=()=>{const[t,e]=D.useState(!0);return D.useEffect(()=>{const n=localStorage.getItem("sidebarOpen");n!==null&&e(JSON.parse(n))},[]),D.useEffect(()=>{localStorage.setItem("sidebarOpen",JSON.stringify(t))},[t]),k.jsxs("aside",{className:`${t?"w-64":"w-20"} bg-gradient-to-b from-gray-900 to-gray-800 text-gray-200 h-screen p-4 flex flex-col justify-between shadow-lg transition-all duration-300`,children:[k.jsxs("div",{children:[k.jsx("div",{className:`text-2xl font-extrabold tracking-wide text-yellow-400 mb-8 transition-opacity duration-300 ${!t&&"opacity-0 hidden"}`,children:" SyncServe"}),k.jsx("nav",{className:"space-y-2",children:vC.map(({path:n,label:r,icon:i})=>k.jsxs(eC,{to:n,className:({isActive:s})=>`flex items-center rounded-lg font-medium transition-all duration-300 py-3 px-4 relative group
                ${s?"bg-yellow-500 text-gray-900 shadow-md":"hover:bg-gray-700 hover:text-yellow-400"}`,children:[k.jsx("span",{className:"w-6 flex justify-center text-xl",children:k.jsx(i,{"aria-hidden":"true"})}),t&&k.jsx("span",{className:"ml-4 flex-1 whitespace-nowrap",children:r}),!t&&k.jsx("span",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-3 px-2 py-1 bg-gray-900 text-yellow-400 text-sm rounded opacity-0 group-hover:opacity-100 whitespace-nowrap shadow-lg",role:"tooltip",children:r})]},n))})]}),k.jsxs("div",{children:[k.jsxs("div",{className:`border-t border-gray-700 pt-4 flex items-center transition-all duration-300 ${t?"gap-3":"justify-center"}`,children:[k.jsx("img",{src:"https://i.pravatar.cc/40",alt:"profile",className:"w-10 h-10 rounded-full border-2 border-yellow-400"}),t&&k.jsxs("div",{children:[k.jsx("p",{className:"font-semibold",children:"Manager"}),k.jsx("p",{className:"text-sm text-gray-400",children:"Admin"})]})]}),k.jsx("button",{onClick:()=>e(!t),"aria-label":t?"Collapse sidebar":"Expand sidebar","aria-expanded":t,className:"mt-4 w-full flex items-center justify-center py-2 rounded-lg bg-gray-700 hover:bg-gray-600 text-gray-300 hover:text-yellow-400 transition-colors",children:t?k.jsx(fC,{size:18}):k.jsx(hC,{size:18})})]})]})};var Uy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},wC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},x1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(S1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new EC;const p=s<<2|a>>4;if(r.push(p),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const E=c<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class EC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TC=function(t){const e=S1(t);return x1.encodeByteArray(e,!0)},Ql=function(t){return TC(t).replace(/\./g,"")},SC=function(t){try{return x1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=()=>xC().__FIREBASE_DEFAULTS__,IC=()=>{if(typeof process>"u"||typeof Uy>"u")return;const t=Uy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},CC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&SC(t[1]);return e&&JSON.parse(e)},tp=()=>{try{return AC()||IC()||CC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},PC=t=>{var e,n;return(n=(e=tp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},RC=t=>{const e=PC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},A1=()=>{var t;return(t=tp())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ql(JSON.stringify(n)),Ql(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DC(){var t;const e=(t=tp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bC(){return!DC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MC(){try{return typeof indexedDB=="object"}catch{return!1}}function LC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC="FirebaseError";class hs extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=OC,Object.setPrototypeOf(this,hs.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,I1.prototype.create)}}class I1{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?FC(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new hs(i,a,r)}}function FC(t,e){return t.replace(jC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const jC=/\{\$([^}]+)}/g;function vf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(zy(s)&&zy(o)){if(!vf(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function zy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(t){return t&&t._delegate?t._delegate:t}class Mo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zC(e))try{this.getOrInitializeService({instanceIdentifier:br})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=br){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=br){return this.instances.has(e)}getOptions(e=br){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=br){return this.component?this.component.multipleInstances?e:br:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UC(t){return t===br?void 0:t}function zC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new BC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(oe||(oe={}));const WC={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},HC=oe.INFO,KC={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},qC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=KC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class C1{constructor(e){this.name=e,this._logLevel=HC,this._logHandler=qC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}}const GC=(t,e)=>e.some(n=>t instanceof n);let $y,Wy;function QC(){return $y||($y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YC(){return Wy||(Wy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const P1=new WeakMap,_f=new WeakMap,R1=new WeakMap,Zc=new WeakMap,np=new WeakMap;function XC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(cr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&P1.set(n,t)}).catch(()=>{}),np.set(e,t),e}function JC(t){if(_f.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});_f.set(t,e)}let wf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _f.get(t);if(e==="objectStoreNames")return t.objectStoreNames||R1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ZC(t){wf=t(wf)}function eP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(eh(this),e,...n);return R1.set(r,e.sort?e.sort():[e]),cr(r)}:YC().includes(t)?function(...e){return t.apply(eh(this),e),cr(P1.get(this))}:function(...e){return cr(t.apply(eh(this),e))}}function tP(t){return typeof t=="function"?eP(t):(t instanceof IDBTransaction&&JC(t),GC(t,QC())?new Proxy(t,wf):t)}function cr(t){if(t instanceof IDBRequest)return XC(t);if(Zc.has(t))return Zc.get(t);const e=tP(t);return e!==t&&(Zc.set(t,e),np.set(e,t)),e}const eh=t=>np.get(t);function nP(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=cr(o);return r&&o.addEventListener("upgradeneeded",l=>{r(cr(o.result),l.oldVersion,l.newVersion,cr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const rP=["get","getKey","getAll","getAllKeys","count"],iP=["put","add","delete","clear"],th=new Map;function Hy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(th.get(e))return th.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=iP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return th.set(e,s),s}ZC(t=>({...t,get:(e,n,r)=>Hy(e,n)||t.get(e,n,r),has:(e,n)=>!!Hy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ef="@firebase/app",Ky="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn=new C1("@firebase/app"),aP="@firebase/app-compat",lP="@firebase/analytics-compat",uP="@firebase/analytics",cP="@firebase/app-check-compat",hP="@firebase/app-check",fP="@firebase/auth",dP="@firebase/auth-compat",pP="@firebase/database",mP="@firebase/data-connect",gP="@firebase/database-compat",yP="@firebase/functions",vP="@firebase/functions-compat",_P="@firebase/installations",wP="@firebase/installations-compat",EP="@firebase/messaging",TP="@firebase/messaging-compat",SP="@firebase/performance",xP="@firebase/performance-compat",AP="@firebase/remote-config",IP="@firebase/remote-config-compat",CP="@firebase/storage",PP="@firebase/storage-compat",RP="@firebase/firestore",kP="@firebase/vertexai-preview",VP="@firebase/firestore-compat",NP="firebase",DP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="[DEFAULT]",bP={[Ef]:"fire-core",[aP]:"fire-core-compat",[uP]:"fire-analytics",[lP]:"fire-analytics-compat",[hP]:"fire-app-check",[cP]:"fire-app-check-compat",[fP]:"fire-auth",[dP]:"fire-auth-compat",[pP]:"fire-rtdb",[mP]:"fire-data-connect",[gP]:"fire-rtdb-compat",[yP]:"fire-fn",[vP]:"fire-fn-compat",[_P]:"fire-iid",[wP]:"fire-iid-compat",[EP]:"fire-fcm",[TP]:"fire-fcm-compat",[SP]:"fire-perf",[xP]:"fire-perf-compat",[AP]:"fire-rc",[IP]:"fire-rc-compat",[CP]:"fire-gcs",[PP]:"fire-gcs-compat",[RP]:"fire-fst",[VP]:"fire-fst-compat",[kP]:"fire-vertex","fire-js":"fire-js",[NP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl=new Map,MP=new Map,Sf=new Map;function qy(t,e){try{t.container.addComponent(e)}catch(n){bn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Xl(t){const e=t.name;if(Sf.has(e))return bn.debug(`There were multiple attempts to register component ${e}.`),!1;Sf.set(e,t);for(const n of Yl.values())qy(n,t);for(const n of MP.values())qy(n,t);return!0}function LP(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},hr=new I1("app","Firebase",OP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw hr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=DP;function k1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Tf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw hr.create("bad-app-name",{appName:String(i)});if(n||(n=A1()),!n)throw hr.create("no-options");const s=Yl.get(i);if(s){if(vf(n,s.options)&&vf(r,s.config))return s;throw hr.create("duplicate-app",{appName:i})}const o=new $C(i);for(const l of Sf.values())o.addComponent(l);const a=new FP(n,r,o);return Yl.set(i,a),a}function BP(t=Tf){const e=Yl.get(t);if(!e&&t===Tf&&A1())return k1();if(!e)throw hr.create("no-app",{appName:t});return e}function Ui(t,e,n){var r;let i=(r=bP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),bn.warn(a.join(" "));return}Xl(new Mo(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP="firebase-heartbeat-database",zP=1,Lo="firebase-heartbeat-store";let nh=null;function V1(){return nh||(nh=nP(UP,zP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Lo)}catch(n){console.warn(n)}}}}).catch(t=>{throw hr.create("idb-open",{originalErrorMessage:t.message})})),nh}async function $P(t){try{const n=(await V1()).transaction(Lo),r=await n.objectStore(Lo).get(N1(t));return await n.done,r}catch(e){if(e instanceof hs)bn.warn(e.message);else{const n=hr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});bn.warn(n.message)}}}async function Gy(t,e){try{const r=(await V1()).transaction(Lo,"readwrite");await r.objectStore(Lo).put(e,N1(t)),await r.done}catch(n){if(n instanceof hs)bn.warn(n.message);else{const r=hr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});bn.warn(r.message)}}}function N1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=1024,HP=30*24*60*60*1e3;class KP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Qy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=HP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){bn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qy(),{heartbeatsToSend:r,unsentEntries:i}=qP(this._heartbeatsCache.heartbeats),s=Ql(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return bn.warn(n),""}}}function Qy(){return new Date().toISOString().substring(0,10)}function qP(t,e=WP){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Yy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Yy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MC()?LC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $P(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Yy(t){return Ql(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t){Xl(new Mo("platform-logger",e=>new sP(e),"PRIVATE")),Xl(new Mo("heartbeat",e=>new KP(e),"PRIVATE")),Ui(Ef,Ky,t),Ui(Ef,Ky,"esm2017"),Ui("fire-js","")}QP("");var YP="firebase",XP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ui(YP,XP,"app");var Xy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wr,D1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,y){function x(){}x.prototype=y.prototype,A.D=y.prototype,A.prototype=new x,A.prototype.constructor=A,A.C=function(P,R,N){for(var I=Array(arguments.length-2),ee=2;ee<arguments.length;ee++)I[ee-2]=arguments[ee];return y.prototype[R].apply(P,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,y,x){x||(x=0);var P=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)P[R]=y.charCodeAt(x++)|y.charCodeAt(x++)<<8|y.charCodeAt(x++)<<16|y.charCodeAt(x++)<<24;else for(R=0;16>R;++R)P[R]=y[x++]|y[x++]<<8|y[x++]<<16|y[x++]<<24;y=A.g[0],x=A.g[1],R=A.g[2];var N=A.g[3],I=y+(N^x&(R^N))+P[0]+3614090360&4294967295;y=x+(I<<7&4294967295|I>>>25),I=N+(R^y&(x^R))+P[1]+3905402710&4294967295,N=y+(I<<12&4294967295|I>>>20),I=R+(x^N&(y^x))+P[2]+606105819&4294967295,R=N+(I<<17&4294967295|I>>>15),I=x+(y^R&(N^y))+P[3]+3250441966&4294967295,x=R+(I<<22&4294967295|I>>>10),I=y+(N^x&(R^N))+P[4]+4118548399&4294967295,y=x+(I<<7&4294967295|I>>>25),I=N+(R^y&(x^R))+P[5]+1200080426&4294967295,N=y+(I<<12&4294967295|I>>>20),I=R+(x^N&(y^x))+P[6]+2821735955&4294967295,R=N+(I<<17&4294967295|I>>>15),I=x+(y^R&(N^y))+P[7]+4249261313&4294967295,x=R+(I<<22&4294967295|I>>>10),I=y+(N^x&(R^N))+P[8]+1770035416&4294967295,y=x+(I<<7&4294967295|I>>>25),I=N+(R^y&(x^R))+P[9]+2336552879&4294967295,N=y+(I<<12&4294967295|I>>>20),I=R+(x^N&(y^x))+P[10]+4294925233&4294967295,R=N+(I<<17&4294967295|I>>>15),I=x+(y^R&(N^y))+P[11]+2304563134&4294967295,x=R+(I<<22&4294967295|I>>>10),I=y+(N^x&(R^N))+P[12]+1804603682&4294967295,y=x+(I<<7&4294967295|I>>>25),I=N+(R^y&(x^R))+P[13]+4254626195&4294967295,N=y+(I<<12&4294967295|I>>>20),I=R+(x^N&(y^x))+P[14]+2792965006&4294967295,R=N+(I<<17&4294967295|I>>>15),I=x+(y^R&(N^y))+P[15]+1236535329&4294967295,x=R+(I<<22&4294967295|I>>>10),I=y+(R^N&(x^R))+P[1]+4129170786&4294967295,y=x+(I<<5&4294967295|I>>>27),I=N+(x^R&(y^x))+P[6]+3225465664&4294967295,N=y+(I<<9&4294967295|I>>>23),I=R+(y^x&(N^y))+P[11]+643717713&4294967295,R=N+(I<<14&4294967295|I>>>18),I=x+(N^y&(R^N))+P[0]+3921069994&4294967295,x=R+(I<<20&4294967295|I>>>12),I=y+(R^N&(x^R))+P[5]+3593408605&4294967295,y=x+(I<<5&4294967295|I>>>27),I=N+(x^R&(y^x))+P[10]+38016083&4294967295,N=y+(I<<9&4294967295|I>>>23),I=R+(y^x&(N^y))+P[15]+3634488961&4294967295,R=N+(I<<14&4294967295|I>>>18),I=x+(N^y&(R^N))+P[4]+3889429448&4294967295,x=R+(I<<20&4294967295|I>>>12),I=y+(R^N&(x^R))+P[9]+568446438&4294967295,y=x+(I<<5&4294967295|I>>>27),I=N+(x^R&(y^x))+P[14]+3275163606&4294967295,N=y+(I<<9&4294967295|I>>>23),I=R+(y^x&(N^y))+P[3]+4107603335&4294967295,R=N+(I<<14&4294967295|I>>>18),I=x+(N^y&(R^N))+P[8]+1163531501&4294967295,x=R+(I<<20&4294967295|I>>>12),I=y+(R^N&(x^R))+P[13]+2850285829&4294967295,y=x+(I<<5&4294967295|I>>>27),I=N+(x^R&(y^x))+P[2]+4243563512&4294967295,N=y+(I<<9&4294967295|I>>>23),I=R+(y^x&(N^y))+P[7]+1735328473&4294967295,R=N+(I<<14&4294967295|I>>>18),I=x+(N^y&(R^N))+P[12]+2368359562&4294967295,x=R+(I<<20&4294967295|I>>>12),I=y+(x^R^N)+P[5]+4294588738&4294967295,y=x+(I<<4&4294967295|I>>>28),I=N+(y^x^R)+P[8]+2272392833&4294967295,N=y+(I<<11&4294967295|I>>>21),I=R+(N^y^x)+P[11]+1839030562&4294967295,R=N+(I<<16&4294967295|I>>>16),I=x+(R^N^y)+P[14]+4259657740&4294967295,x=R+(I<<23&4294967295|I>>>9),I=y+(x^R^N)+P[1]+2763975236&4294967295,y=x+(I<<4&4294967295|I>>>28),I=N+(y^x^R)+P[4]+1272893353&4294967295,N=y+(I<<11&4294967295|I>>>21),I=R+(N^y^x)+P[7]+4139469664&4294967295,R=N+(I<<16&4294967295|I>>>16),I=x+(R^N^y)+P[10]+3200236656&4294967295,x=R+(I<<23&4294967295|I>>>9),I=y+(x^R^N)+P[13]+681279174&4294967295,y=x+(I<<4&4294967295|I>>>28),I=N+(y^x^R)+P[0]+3936430074&4294967295,N=y+(I<<11&4294967295|I>>>21),I=R+(N^y^x)+P[3]+3572445317&4294967295,R=N+(I<<16&4294967295|I>>>16),I=x+(R^N^y)+P[6]+76029189&4294967295,x=R+(I<<23&4294967295|I>>>9),I=y+(x^R^N)+P[9]+3654602809&4294967295,y=x+(I<<4&4294967295|I>>>28),I=N+(y^x^R)+P[12]+3873151461&4294967295,N=y+(I<<11&4294967295|I>>>21),I=R+(N^y^x)+P[15]+530742520&4294967295,R=N+(I<<16&4294967295|I>>>16),I=x+(R^N^y)+P[2]+3299628645&4294967295,x=R+(I<<23&4294967295|I>>>9),I=y+(R^(x|~N))+P[0]+4096336452&4294967295,y=x+(I<<6&4294967295|I>>>26),I=N+(x^(y|~R))+P[7]+1126891415&4294967295,N=y+(I<<10&4294967295|I>>>22),I=R+(y^(N|~x))+P[14]+2878612391&4294967295,R=N+(I<<15&4294967295|I>>>17),I=x+(N^(R|~y))+P[5]+4237533241&4294967295,x=R+(I<<21&4294967295|I>>>11),I=y+(R^(x|~N))+P[12]+1700485571&4294967295,y=x+(I<<6&4294967295|I>>>26),I=N+(x^(y|~R))+P[3]+2399980690&4294967295,N=y+(I<<10&4294967295|I>>>22),I=R+(y^(N|~x))+P[10]+4293915773&4294967295,R=N+(I<<15&4294967295|I>>>17),I=x+(N^(R|~y))+P[1]+2240044497&4294967295,x=R+(I<<21&4294967295|I>>>11),I=y+(R^(x|~N))+P[8]+1873313359&4294967295,y=x+(I<<6&4294967295|I>>>26),I=N+(x^(y|~R))+P[15]+4264355552&4294967295,N=y+(I<<10&4294967295|I>>>22),I=R+(y^(N|~x))+P[6]+2734768916&4294967295,R=N+(I<<15&4294967295|I>>>17),I=x+(N^(R|~y))+P[13]+1309151649&4294967295,x=R+(I<<21&4294967295|I>>>11),I=y+(R^(x|~N))+P[4]+4149444226&4294967295,y=x+(I<<6&4294967295|I>>>26),I=N+(x^(y|~R))+P[11]+3174756917&4294967295,N=y+(I<<10&4294967295|I>>>22),I=R+(y^(N|~x))+P[2]+718787259&4294967295,R=N+(I<<15&4294967295|I>>>17),I=x+(N^(R|~y))+P[9]+3951481745&4294967295,A.g[0]=A.g[0]+y&4294967295,A.g[1]=A.g[1]+(R+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+R&4294967295,A.g[3]=A.g[3]+N&4294967295}r.prototype.u=function(A,y){y===void 0&&(y=A.length);for(var x=y-this.blockSize,P=this.B,R=this.h,N=0;N<y;){if(R==0)for(;N<=x;)i(this,A,N),N+=this.blockSize;if(typeof A=="string"){for(;N<y;)if(P[R++]=A.charCodeAt(N++),R==this.blockSize){i(this,P),R=0;break}}else for(;N<y;)if(P[R++]=A[N++],R==this.blockSize){i(this,P),R=0;break}}this.h=R,this.o+=y},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var y=1;y<A.length-8;++y)A[y]=0;var x=8*this.o;for(y=A.length-8;y<A.length;++y)A[y]=x&255,x/=256;for(this.u(A),A=Array(16),y=x=0;4>y;++y)for(var P=0;32>P;P+=8)A[x++]=this.g[y]>>>P&255;return A};function s(A,y){var x=a;return Object.prototype.hasOwnProperty.call(x,A)?x[A]:x[A]=y(A)}function o(A,y){this.h=y;for(var x=[],P=!0,R=A.length-1;0<=R;R--){var N=A[R]|0;P&&N==y||(x[R]=N,P=!1)}this.g=x}var a={};function l(A){return-128<=A&&128>A?s(A,function(y){return new o([y|0],0>y?-1:0)}):new o([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return f;if(0>A)return C(c(-A));for(var y=[],x=1,P=0;A>=x;P++)y[P]=A/x|0,x*=4294967296;return new o(y,0)}function h(A,y){if(A.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(A.charAt(0)=="-")return C(h(A.substring(1),y));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=c(Math.pow(y,8)),P=f,R=0;R<A.length;R+=8){var N=Math.min(8,A.length-R),I=parseInt(A.substring(R,R+N),y);8>N?(N=c(Math.pow(y,N)),P=P.j(N).add(c(I))):(P=P.j(x),P=P.add(c(I)))}return P}var f=l(0),p=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(S(this))return-C(this).m();for(var A=0,y=1,x=0;x<this.g.length;x++){var P=this.i(x);A+=(0<=P?P:4294967296+P)*y,y*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(E(this))return"0";if(S(this))return"-"+C(this).toString(A);for(var y=c(Math.pow(A,6)),x=this,P="";;){var R=V(x,y).g;x=w(x,R.j(y));var N=((0<x.g.length?x.g[0]:x.h)>>>0).toString(A);if(x=R,E(x))return N+P;for(;6>N.length;)N="0"+N;P=N+P}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function E(A){if(A.h!=0)return!1;for(var y=0;y<A.g.length;y++)if(A.g[y]!=0)return!1;return!0}function S(A){return A.h==-1}t.l=function(A){return A=w(this,A),S(A)?-1:E(A)?0:1};function C(A){for(var y=A.g.length,x=[],P=0;P<y;P++)x[P]=~A.g[P];return new o(x,~A.h).add(p)}t.abs=function(){return S(this)?C(this):this},t.add=function(A){for(var y=Math.max(this.g.length,A.g.length),x=[],P=0,R=0;R<=y;R++){var N=P+(this.i(R)&65535)+(A.i(R)&65535),I=(N>>>16)+(this.i(R)>>>16)+(A.i(R)>>>16);P=I>>>16,N&=65535,I&=65535,x[R]=I<<16|N}return new o(x,x[x.length-1]&-2147483648?-1:0)};function w(A,y){return A.add(C(y))}t.j=function(A){if(E(this)||E(A))return f;if(S(this))return S(A)?C(this).j(C(A)):C(C(this).j(A));if(S(A))return C(this.j(C(A)));if(0>this.l(g)&&0>A.l(g))return c(this.m()*A.m());for(var y=this.g.length+A.g.length,x=[],P=0;P<2*y;P++)x[P]=0;for(P=0;P<this.g.length;P++)for(var R=0;R<A.g.length;R++){var N=this.i(P)>>>16,I=this.i(P)&65535,ee=A.i(R)>>>16,te=A.i(R)&65535;x[2*P+2*R]+=I*te,_(x,2*P+2*R),x[2*P+2*R+1]+=N*te,_(x,2*P+2*R+1),x[2*P+2*R+1]+=I*ee,_(x,2*P+2*R+1),x[2*P+2*R+2]+=N*ee,_(x,2*P+2*R+2)}for(P=0;P<y;P++)x[P]=x[2*P+1]<<16|x[2*P];for(P=y;P<2*y;P++)x[P]=0;return new o(x,0)};function _(A,y){for(;(A[y]&65535)!=A[y];)A[y+1]+=A[y]>>>16,A[y]&=65535,y++}function v(A,y){this.g=A,this.h=y}function V(A,y){if(E(y))throw Error("division by zero");if(E(A))return new v(f,f);if(S(A))return y=V(C(A),y),new v(C(y.g),C(y.h));if(S(y))return y=V(A,C(y)),new v(C(y.g),y.h);if(30<A.g.length){if(S(A)||S(y))throw Error("slowDivide_ only works with positive integers.");for(var x=p,P=y;0>=P.l(A);)x=M(x),P=M(P);var R=O(x,1),N=O(P,1);for(P=O(P,2),x=O(x,2);!E(P);){var I=N.add(P);0>=I.l(A)&&(R=R.add(x),N=I),P=O(P,1),x=O(x,1)}return y=w(A,R.j(y)),new v(R,y)}for(R=f;0<=A.l(y);){for(x=Math.max(1,Math.floor(A.m()/y.m())),P=Math.ceil(Math.log(x)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),N=c(x),I=N.j(y);S(I)||0<I.l(A);)x-=P,N=c(x),I=N.j(y);E(N)&&(N=p),R=R.add(N),A=w(A,I)}return new v(R,A)}t.A=function(A){return V(this,A).h},t.and=function(A){for(var y=Math.max(this.g.length,A.g.length),x=[],P=0;P<y;P++)x[P]=this.i(P)&A.i(P);return new o(x,this.h&A.h)},t.or=function(A){for(var y=Math.max(this.g.length,A.g.length),x=[],P=0;P<y;P++)x[P]=this.i(P)|A.i(P);return new o(x,this.h|A.h)},t.xor=function(A){for(var y=Math.max(this.g.length,A.g.length),x=[],P=0;P<y;P++)x[P]=this.i(P)^A.i(P);return new o(x,this.h^A.h)};function M(A){for(var y=A.g.length+1,x=[],P=0;P<y;P++)x[P]=A.i(P)<<1|A.i(P-1)>>>31;return new o(x,A.h)}function O(A,y){var x=y>>5;y%=32;for(var P=A.g.length-x,R=[],N=0;N<P;N++)R[N]=0<y?A.i(N+x)>>>y|A.i(N+x+1)<<32-y:A.i(N+x);return new o(R,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,D1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Wr=o}).apply(typeof Xy<"u"?Xy:typeof self<"u"?self:typeof window<"u"?window:{});var qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var b1,Ks,M1,fl,xf,L1,O1,F1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,d,m){return u==Array.prototype||u==Object.prototype||(u[d]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof qa=="object"&&qa];for(var d=0;d<u.length;++d){var m=u[d];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,d){if(d)e:{var m=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var b=u[T];if(!(b in m))break e;m=m[b]}u=u[u.length-1],T=m[u],d=d(T),d!=T&&d!=null&&e(m,u,{configurable:!0,writable:!0,value:d})}}function s(u,d){u instanceof String&&(u+="");var m=0,T=!1,b={next:function(){if(!T&&m<u.length){var L=m++;return{value:d(L,u[L]),done:!1}}return T=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(u){return u||function(){return s(this,function(d,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var d=typeof u;return d=d!="object"?d:u?Array.isArray(u)?"array":d:"null",d=="array"||d=="object"&&typeof u.length=="number"}function c(u){var d=typeof u;return d=="object"&&u!=null||d=="function"}function h(u,d,m){return u.call.apply(u.bind,arguments)}function f(u,d,m){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,T),u.apply(d,b)}}return function(){return u.apply(d,arguments)}}function p(u,d,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(u,d){var m=Array.prototype.slice.call(arguments,1);return function(){var T=m.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function E(u,d){function m(){}m.prototype=d.prototype,u.aa=d.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(T,b,L){for(var z=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)z[ye-2]=arguments[ye];return d.prototype[b].apply(T,z)}}function S(u){const d=u.length;if(0<d){const m=Array(d);for(let T=0;T<d;T++)m[T]=u[T];return m}return[]}function C(u,d){for(let m=1;m<arguments.length;m++){const T=arguments[m];if(l(T)){const b=u.length||0,L=T.length||0;u.length=b+L;for(let z=0;z<L;z++)u[b+z]=T[z]}else u.push(T)}}class w{constructor(d,m){this.i=d,this.j=m,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(u){return/^[\s\xa0]*$/.test(u)}function v(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function V(u){return V[" "](u),u}V[" "]=function(){};var M=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function O(u,d,m){for(const T in u)d.call(m,u[T],T,u)}function A(u,d){for(const m in u)d.call(void 0,u[m],m,u)}function y(u){const d={};for(const m in u)d[m]=u[m];return d}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,d){let m,T;for(let b=1;b<arguments.length;b++){T=arguments[b];for(m in T)u[m]=T[m];for(let L=0;L<x.length;L++)m=x[L],Object.prototype.hasOwnProperty.call(T,m)&&(u[m]=T[m])}}function R(u){var d=1;u=u.split(":");const m=[];for(;0<d&&u.length;)m.push(u.shift()),d--;return u.length&&m.push(u.join(":")),m}function N(u){a.setTimeout(()=>{throw u},0)}function I(){var u=W;let d=null;return u.g&&(d=u.g,u.g=u.g.next,u.g||(u.h=null),d.next=null),d}class ee{constructor(){this.h=this.g=null}add(d,m){const T=te.get();T.set(d,m),this.h?this.h.next=T:this.g=T,this.h=T}}var te=new w(()=>new he,u=>u.reset());class he{constructor(){this.next=this.g=this.h=null}set(d,m){this.h=d,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let q,B=!1,W=new ee,G=()=>{const u=a.Promise.resolve(void 0);q=()=>{u.then(ge)}};var ge=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(m){N(m)}var d=te;d.j(u),100>d.h&&(d.h++,u.next=d.g,d.g=u)}B=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(u,d){this.type=u,this.g=this.target=d,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var xt=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,d=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,d),a.removeEventListener("test",m,d)}catch{}return u}();function Ut(u,d){if(ve.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=d,d=u.relatedTarget){if(M){e:{try{V(d.nodeName);var b=!0;break e}catch{}b=!1}b||(d=null)}}else m=="mouseover"?d=u.fromElement:m=="mouseout"&&(d=u.toElement);this.relatedTarget=d,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:pe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ut.aa.h.call(this)}}E(Ut,ve);var pe={2:"touch",3:"pen",4:"mouse"};Ut.prototype.h=function(){Ut.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),tc=0;function nc(u,d,m,T,b){this.listener=u,this.proxy=null,this.src=d,this.type=m,this.capture=!!T,this.ha=b,this.key=++tc,this.da=this.fa=!1}function ai(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function li(u){this.src=u,this.g={},this.h=0}li.prototype.add=function(u,d,m,T,b){var L=u.toString();u=this.g[L],u||(u=this.g[L]=[],this.h++);var z=ic(u,d,T,b);return-1<z?(d=u[z],m||(d.fa=!1)):(d=new nc(d,this.src,L,!!T,b),d.fa=m,u.push(d)),d};function rc(u,d){var m=d.type;if(m in u.g){var T=u.g[m],b=Array.prototype.indexOf.call(T,d,void 0),L;(L=0<=b)&&Array.prototype.splice.call(T,b,1),L&&(ai(d),u.g[m].length==0&&(delete u.g[m],u.h--))}}function ic(u,d,m,T){for(var b=0;b<u.length;++b){var L=u[b];if(!L.da&&L.listener==d&&L.capture==!!m&&L.ha==T)return b}return-1}var sc="closure_lm_"+(1e6*Math.random()|0),oc={};function Sm(u,d,m,T,b){if(Array.isArray(d)){for(var L=0;L<d.length;L++)Sm(u,d[L],m,T,b);return null}return m=Im(m),u&&u[ze]?u.K(d,m,c(T)?!!T.capture:!1,b):YS(u,d,m,!1,T,b)}function YS(u,d,m,T,b,L){if(!d)throw Error("Invalid event type");var z=c(b)?!!b.capture:!!b,ye=lc(u);if(ye||(u[sc]=ye=new li(u)),m=ye.add(d,m,T,z,L),m.proxy)return m;if(T=XS(),m.proxy=T,T.src=u,T.listener=m,u.addEventListener)xt||(b=z),b===void 0&&(b=!1),u.addEventListener(d.toString(),T,b);else if(u.attachEvent)u.attachEvent(Am(d.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return m}function XS(){function u(m){return d.call(u.src,u.listener,m)}const d=JS;return u}function xm(u,d,m,T,b){if(Array.isArray(d))for(var L=0;L<d.length;L++)xm(u,d[L],m,T,b);else T=c(T)?!!T.capture:!!T,m=Im(m),u&&u[ze]?(u=u.i,d=String(d).toString(),d in u.g&&(L=u.g[d],m=ic(L,m,T,b),-1<m&&(ai(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete u.g[d],u.h--)))):u&&(u=lc(u))&&(d=u.g[d.toString()],u=-1,d&&(u=ic(d,m,T,b)),(m=-1<u?d[u]:null)&&ac(m))}function ac(u){if(typeof u!="number"&&u&&!u.da){var d=u.src;if(d&&d[ze])rc(d.i,u);else{var m=u.type,T=u.proxy;d.removeEventListener?d.removeEventListener(m,T,u.capture):d.detachEvent?d.detachEvent(Am(m),T):d.addListener&&d.removeListener&&d.removeListener(T),(m=lc(d))?(rc(m,u),m.h==0&&(m.src=null,d[sc]=null)):ai(u)}}}function Am(u){return u in oc?oc[u]:oc[u]="on"+u}function JS(u,d){if(u.da)u=!0;else{d=new Ut(d,this);var m=u.listener,T=u.ha||u.src;u.fa&&ac(u),u=m.call(T,d)}return u}function lc(u){return u=u[sc],u instanceof li?u:null}var uc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Im(u){return typeof u=="function"?u:(u[uc]||(u[uc]=function(d){return u.handleEvent(d)}),u[uc])}function st(){ce.call(this),this.i=new li(this),this.M=this,this.F=null}E(st,ce),st.prototype[ze]=!0,st.prototype.removeEventListener=function(u,d,m,T){xm(this,u,d,m,T)};function gt(u,d){var m,T=u.F;if(T)for(m=[];T;T=T.F)m.push(T);if(u=u.M,T=d.type||d,typeof d=="string")d=new ve(d,u);else if(d instanceof ve)d.target=d.target||u;else{var b=d;d=new ve(T,u),P(d,b)}if(b=!0,m)for(var L=m.length-1;0<=L;L--){var z=d.g=m[L];b=pa(z,T,!0,d)&&b}if(z=d.g=u,b=pa(z,T,!0,d)&&b,b=pa(z,T,!1,d)&&b,m)for(L=0;L<m.length;L++)z=d.g=m[L],b=pa(z,T,!1,d)&&b}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var u=this.i,d;for(d in u.g){for(var m=u.g[d],T=0;T<m.length;T++)ai(m[T]);delete u.g[d],u.h--}}this.F=null},st.prototype.K=function(u,d,m,T){return this.i.add(String(u),d,!1,m,T)},st.prototype.L=function(u,d,m,T){return this.i.add(String(u),d,!0,m,T)};function pa(u,d,m,T){if(d=u.i.g[String(d)],!d)return!0;d=d.concat();for(var b=!0,L=0;L<d.length;++L){var z=d[L];if(z&&!z.da&&z.capture==m){var ye=z.listener,Ye=z.ha||z.src;z.fa&&rc(u.i,z),b=ye.call(Ye,T)!==!1&&b}}return b&&!T.defaultPrevented}function Cm(u,d,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(u,d||0)}function Pm(u){u.g=Cm(()=>{u.g=null,u.i&&(u.i=!1,Pm(u))},u.l);const d=u.h;u.h=null,u.m.apply(null,d)}class ZS extends ce{constructor(d,m){super(),this.m=d,this.l=m,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Pm(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _s(u){ce.call(this),this.h=u,this.g={}}E(_s,ce);var Rm=[];function km(u){O(u.g,function(d,m){this.g.hasOwnProperty(m)&&ac(d)},u),u.g={}}_s.prototype.N=function(){_s.aa.N.call(this),km(this)},_s.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cc=a.JSON.stringify,ex=a.JSON.parse,tx=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function hc(){}hc.prototype.h=null;function Vm(u){return u.h||(u.h=u.i())}function Nm(){}var ws={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fc(){ve.call(this,"d")}E(fc,ve);function dc(){ve.call(this,"c")}E(dc,ve);var Cr={},Dm=null;function ma(){return Dm=Dm||new st}Cr.La="serverreachability";function bm(u){ve.call(this,Cr.La,u)}E(bm,ve);function Es(u){const d=ma();gt(d,new bm(d))}Cr.STAT_EVENT="statevent";function Mm(u,d){ve.call(this,Cr.STAT_EVENT,u),this.stat=d}E(Mm,ve);function yt(u){const d=ma();gt(d,new Mm(d,u))}Cr.Ma="timingevent";function Lm(u,d){ve.call(this,Cr.Ma,u),this.size=d}E(Lm,ve);function Ts(u,d){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},d)}function Ss(){this.g=!0}Ss.prototype.xa=function(){this.g=!1};function nx(u,d,m,T,b,L){u.info(function(){if(u.g)if(L)for(var z="",ye=L.split("&"),Ye=0;Ye<ye.length;Ye++){var le=ye[Ye].split("=");if(1<le.length){var ot=le[0];le=le[1];var at=ot.split("_");z=2<=at.length&&at[1]=="type"?z+(ot+"="+le+"&"):z+(ot+"=redacted&")}}else z=null;else z=L;return"XMLHTTP REQ ("+T+") [attempt "+b+"]: "+d+`
`+m+`
`+z})}function rx(u,d,m,T,b,L,z){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+b+"]: "+d+`
`+m+`
`+L+" "+z})}function ui(u,d,m,T){u.info(function(){return"XMLHTTP TEXT ("+d+"): "+sx(u,m)+(T?" "+T:"")})}function ix(u,d){u.info(function(){return"TIMEOUT: "+d})}Ss.prototype.info=function(){};function sx(u,d){if(!u.g)return d;if(!d)return null;try{var m=JSON.parse(d);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var T=m[u];if(!(2>T.length)){var b=T[1];if(Array.isArray(b)&&!(1>b.length)){var L=b[0];if(L!="noop"&&L!="stop"&&L!="close")for(var z=1;z<b.length;z++)b[z]=""}}}}return cc(m)}catch{return d}}var ga={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Om={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},pc;function ya(){}E(ya,hc),ya.prototype.g=function(){return new XMLHttpRequest},ya.prototype.i=function(){return{}},pc=new ya;function Un(u,d,m,T){this.j=u,this.i=d,this.l=m,this.R=T||1,this.U=new _s(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fm}function Fm(){this.i=null,this.g="",this.h=!1}var jm={},mc={};function gc(u,d,m){u.L=1,u.v=Ea(En(d)),u.m=m,u.P=!0,Bm(u,null)}function Bm(u,d){u.F=Date.now(),va(u),u.A=En(u.v);var m=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),eg(m.i,"t",T),u.C=0,m=u.j.J,u.h=new Fm,u.g=vg(u.j,m?d:null,!u.m),0<u.O&&(u.M=new ZS(p(u.Y,u,u.g),u.O)),d=u.U,m=u.g,T=u.ca;var b="readystatechange";Array.isArray(b)||(b&&(Rm[0]=b.toString()),b=Rm);for(var L=0;L<b.length;L++){var z=Sm(m,b[L],T||d.handleEvent,!1,d.h||d);if(!z)break;d.g[z.key]=z}d=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,d)):(u.u="GET",u.g.ea(u.A,u.u,null,d)),Es(),nx(u.i,u.u,u.A,u.l,u.R,u.m)}Un.prototype.ca=function(u){u=u.target;const d=this.M;d&&Tn(u)==3?d.j():this.Y(u)},Un.prototype.Y=function(u){try{if(u==this.g)e:{const at=Tn(this.g);var d=this.g.Ba();const fi=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||ag(this.g)))){this.J||at!=4||d==7||(d==8||0>=fi?Es(3):Es(2)),yc(this);var m=this.g.Z();this.X=m;t:if(Um(this)){var T=ag(this.g);u="";var b=T.length,L=Tn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Pr(this),xs(this);var z="";break t}this.h.i=new a.TextDecoder}for(d=0;d<b;d++)this.h.h=!0,u+=this.h.i.decode(T[d],{stream:!(L&&d==b-1)});T.length=0,this.h.g+=u,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=m==200,rx(this.i,this.u,this.A,this.l,this.R,at,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,Ye=this.g;if((ye=Ye.g?Ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ye)){var le=ye;break t}}le=null}if(m=le)ui(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vc(this,m);else{this.o=!1,this.s=3,yt(12),Pr(this),xs(this);break e}}if(this.P){m=!0;let Jt;for(;!this.J&&this.C<z.length;)if(Jt=ox(this,z),Jt==mc){at==4&&(this.s=4,yt(14),m=!1),ui(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==jm){this.s=4,yt(15),ui(this.i,this.l,z,"[Invalid Chunk]"),m=!1;break}else ui(this.i,this.l,Jt,null),vc(this,Jt);if(Um(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||z.length!=0||this.h.h||(this.s=1,yt(16),m=!1),this.o=this.o&&m,!m)ui(this.i,this.l,z,"[Invalid Chunked Response]"),Pr(this),xs(this);else if(0<z.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),xc(ot),ot.M=!0,yt(11))}}else ui(this.i,this.l,z,null),vc(this,z);at==4&&Pr(this),this.o&&!this.J&&(at==4?pg(this.j,this):(this.o=!1,va(this)))}else Sx(this.g),m==400&&0<z.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Pr(this),xs(this)}}}catch{}finally{}};function Um(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ox(u,d){var m=u.C,T=d.indexOf(`
`,m);return T==-1?mc:(m=Number(d.substring(m,T)),isNaN(m)?jm:(T+=1,T+m>d.length?mc:(d=d.slice(T,T+m),u.C=T+m,d)))}Un.prototype.cancel=function(){this.J=!0,Pr(this)};function va(u){u.S=Date.now()+u.I,zm(u,u.I)}function zm(u,d){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ts(p(u.ba,u),d)}function yc(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Un.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ix(this.i,this.A),this.L!=2&&(Es(),yt(17)),Pr(this),this.s=2,xs(this)):zm(this,this.S-u)};function xs(u){u.j.G==0||u.J||pg(u.j,u)}function Pr(u){yc(u);var d=u.M;d&&typeof d.ma=="function"&&d.ma(),u.M=null,km(u.U),u.g&&(d=u.g,u.g=null,d.abort(),d.ma())}function vc(u,d){try{var m=u.j;if(m.G!=0&&(m.g==u||_c(m.h,u))){if(!u.K&&_c(m.h,u)&&m.G==3){try{var T=m.Da.g.parse(d)}catch{T=null}if(Array.isArray(T)&&T.length==3){var b=T;if(b[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Ca(m),Aa(m);else break e;Sc(m),yt(18)}}else m.za=b[1],0<m.za-m.T&&37500>b[2]&&m.F&&m.v==0&&!m.C&&(m.C=Ts(p(m.Za,m),6e3));if(1>=Hm(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else kr(m,11)}else if((u.K||m.g==u)&&Ca(m),!_(d))for(b=m.Da.g.parse(d),d=0;d<b.length;d++){let le=b[d];if(m.T=le[0],le=le[1],m.G==2)if(le[0]=="c"){m.K=le[1],m.ia=le[2];const ot=le[3];ot!=null&&(m.la=ot,m.j.info("VER="+m.la));const at=le[4];at!=null&&(m.Aa=at,m.j.info("SVER="+m.Aa));const fi=le[5];fi!=null&&typeof fi=="number"&&0<fi&&(T=1.5*fi,m.L=T,m.j.info("backChannelRequestTimeoutMs_="+T)),T=m;const Jt=u.g;if(Jt){const Ra=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ra){var L=T.h;L.g||Ra.indexOf("spdy")==-1&&Ra.indexOf("quic")==-1&&Ra.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(wc(L,L.h),L.h=null))}if(T.D){const Ac=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Ac&&(T.ya=Ac,we(T.I,T.D,Ac))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),T=m;var z=u;if(T.qa=yg(T,T.J?T.ia:null,T.W),z.K){Km(T.h,z);var ye=z,Ye=T.L;Ye&&(ye.I=Ye),ye.B&&(yc(ye),va(ye)),T.g=z}else fg(T);0<m.i.length&&Ia(m)}else le[0]!="stop"&&le[0]!="close"||kr(m,7);else m.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?kr(m,7):Tc(m):le[0]!="noop"&&m.l&&m.l.ta(le),m.v=0)}}Es(4)}catch{}}var ax=class{constructor(u,d){this.g=u,this.map=d}};function $m(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wm(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Hm(u){return u.h?1:u.g?u.g.size:0}function _c(u,d){return u.h?u.h==d:u.g?u.g.has(d):!1}function wc(u,d){u.g?u.g.add(d):u.h=d}function Km(u,d){u.h&&u.h==d?u.h=null:u.g&&u.g.has(d)&&u.g.delete(d)}$m.prototype.cancel=function(){if(this.i=qm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function qm(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let d=u.i;for(const m of u.g.values())d=d.concat(m.D);return d}return S(u.i)}function lx(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var d=[],m=u.length,T=0;T<m;T++)d.push(u[T]);return d}d=[],m=0;for(T in u)d[m++]=u[T];return d}function ux(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var d=[];u=u.length;for(var m=0;m<u;m++)d.push(m);return d}d=[],m=0;for(const T in u)d[m++]=T;return d}}}function Gm(u,d){if(u.forEach&&typeof u.forEach=="function")u.forEach(d,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,d,void 0);else for(var m=ux(u),T=lx(u),b=T.length,L=0;L<b;L++)d.call(void 0,T[L],m&&m[L],u)}var Qm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cx(u,d){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var T=u[m].indexOf("="),b=null;if(0<=T){var L=u[m].substring(0,T);b=u[m].substring(T+1)}else L=u[m];d(L,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function Rr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Rr){this.h=u.h,_a(this,u.j),this.o=u.o,this.g=u.g,wa(this,u.s),this.l=u.l;var d=u.i,m=new Cs;m.i=d.i,d.g&&(m.g=new Map(d.g),m.h=d.h),Ym(this,m),this.m=u.m}else u&&(d=String(u).match(Qm))?(this.h=!1,_a(this,d[1]||"",!0),this.o=As(d[2]||""),this.g=As(d[3]||"",!0),wa(this,d[4]),this.l=As(d[5]||"",!0),Ym(this,d[6]||"",!0),this.m=As(d[7]||"")):(this.h=!1,this.i=new Cs(null,this.h))}Rr.prototype.toString=function(){var u=[],d=this.j;d&&u.push(Is(d,Xm,!0),":");var m=this.g;return(m||d=="file")&&(u.push("//"),(d=this.o)&&u.push(Is(d,Xm,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Is(m,m.charAt(0)=="/"?dx:fx,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Is(m,mx)),u.join("")};function En(u){return new Rr(u)}function _a(u,d,m){u.j=m?As(d,!0):d,u.j&&(u.j=u.j.replace(/:$/,""))}function wa(u,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);u.s=d}else u.s=null}function Ym(u,d,m){d instanceof Cs?(u.i=d,gx(u.i,u.h)):(m||(d=Is(d,px)),u.i=new Cs(d,u.h))}function we(u,d,m){u.i.set(d,m)}function Ea(u){return we(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function As(u,d){return u?d?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Is(u,d,m){return typeof u=="string"?(u=encodeURI(u).replace(d,hx),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function hx(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Xm=/[#\/\?@]/g,fx=/[#\?:]/g,dx=/[#\?]/g,px=/[#\?@]/g,mx=/#/g;function Cs(u,d){this.h=this.g=null,this.i=u||null,this.j=!!d}function zn(u){u.g||(u.g=new Map,u.h=0,u.i&&cx(u.i,function(d,m){u.add(decodeURIComponent(d.replace(/\+/g," ")),m)}))}t=Cs.prototype,t.add=function(u,d){zn(this),this.i=null,u=ci(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(d),this.h+=1,this};function Jm(u,d){zn(u),d=ci(u,d),u.g.has(d)&&(u.i=null,u.h-=u.g.get(d).length,u.g.delete(d))}function Zm(u,d){return zn(u),d=ci(u,d),u.g.has(d)}t.forEach=function(u,d){zn(this),this.g.forEach(function(m,T){m.forEach(function(b){u.call(d,b,T,this)},this)},this)},t.na=function(){zn(this);const u=Array.from(this.g.values()),d=Array.from(this.g.keys()),m=[];for(let T=0;T<d.length;T++){const b=u[T];for(let L=0;L<b.length;L++)m.push(d[T])}return m},t.V=function(u){zn(this);let d=[];if(typeof u=="string")Zm(this,u)&&(d=d.concat(this.g.get(ci(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)d=d.concat(u[m])}return d},t.set=function(u,d){return zn(this),this.i=null,u=ci(this,u),Zm(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[d]),this.h+=1,this},t.get=function(u,d){return u?(u=this.V(u),0<u.length?String(u[0]):d):d};function eg(u,d,m){Jm(u,d),0<m.length&&(u.i=null,u.g.set(ci(u,d),S(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],d=Array.from(this.g.keys());for(var m=0;m<d.length;m++){var T=d[m];const L=encodeURIComponent(String(T)),z=this.V(T);for(T=0;T<z.length;T++){var b=L;z[T]!==""&&(b+="="+encodeURIComponent(String(z[T]))),u.push(b)}}return this.i=u.join("&")};function ci(u,d){return d=String(d),u.j&&(d=d.toLowerCase()),d}function gx(u,d){d&&!u.j&&(zn(u),u.i=null,u.g.forEach(function(m,T){var b=T.toLowerCase();T!=b&&(Jm(this,T),eg(this,b,m))},u)),u.j=d}function yx(u,d){const m=new Ss;if(a.Image){const T=new Image;T.onload=g($n,m,"TestLoadImage: loaded",!0,d,T),T.onerror=g($n,m,"TestLoadImage: error",!1,d,T),T.onabort=g($n,m,"TestLoadImage: abort",!1,d,T),T.ontimeout=g($n,m,"TestLoadImage: timeout",!1,d,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else d(!1)}function vx(u,d){const m=new Ss,T=new AbortController,b=setTimeout(()=>{T.abort(),$n(m,"TestPingServer: timeout",!1,d)},1e4);fetch(u,{signal:T.signal}).then(L=>{clearTimeout(b),L.ok?$n(m,"TestPingServer: ok",!0,d):$n(m,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),$n(m,"TestPingServer: error",!1,d)})}function $n(u,d,m,T,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),T(m)}catch{}}function _x(){this.g=new tx}function wx(u,d,m){const T=m||"";try{Gm(u,function(b,L){let z=b;c(b)&&(z=cc(b)),d.push(T+L+"="+encodeURIComponent(z))})}catch(b){throw d.push(T+"type="+encodeURIComponent("_badmap")),b}}function Ta(u){this.l=u.Ub||null,this.j=u.eb||!1}E(Ta,hc),Ta.prototype.g=function(){return new Sa(this.l,this.j)},Ta.prototype.i=function(u){return function(){return u}}({});function Sa(u,d){st.call(this),this.D=u,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Sa,st),t=Sa.prototype,t.open=function(u,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=d,this.readyState=1,Rs(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(d.body=u),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ps(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Rs(this)),this.g&&(this.readyState=3,Rs(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tg(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function tg(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var d=u.value?u.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!u.done}))&&(this.response=this.responseText+=d)}u.done?Ps(this):Rs(this),this.readyState==3&&tg(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ps(this))},t.Qa=function(u){this.g&&(this.response=u,Ps(this))},t.ga=function(){this.g&&Ps(this)};function Ps(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Rs(u)}t.setRequestHeader=function(u,d){this.u.append(u,d)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],d=this.h.entries();for(var m=d.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=d.next();return u.join(`\r
`)};function Rs(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ng(u){let d="";return O(u,function(m,T){d+=T,d+=":",d+=m,d+=`\r
`}),d}function Ec(u,d,m){e:{for(T in m){var T=!1;break e}T=!0}T||(m=ng(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):we(u,d,m))}function Ve(u){st.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Ve,st);var Ex=/^https?$/i,Tx=["POST","PUT"];t=Ve.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,d,m,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);d=d?d.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():pc.g(),this.v=this.o?Vm(this.o):Vm(pc),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(d,String(u),!0),this.B=!1}catch(L){rg(this,L);return}if(u=m||"",m=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var b in T)m.set(b,T[b]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const L of T.keys())m.set(L,T.get(L));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),b=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Tx,d,void 0))||T||b||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,z]of m)this.g.setRequestHeader(L,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{og(this),this.u=!0,this.g.send(u),this.u=!1}catch(L){rg(this,L)}};function rg(u,d){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=d,u.m=5,ig(u),xa(u)}function ig(u){u.A||(u.A=!0,gt(u,"complete"),gt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,gt(this,"complete"),gt(this,"abort"),xa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xa(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?sg(this):this.bb())},t.bb=function(){sg(this)};function sg(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Tn(u)!=4||u.Z()!=2)){if(u.u&&Tn(u)==4)Cm(u.Ea,0,u);else if(gt(u,"readystatechange"),Tn(u)==4){u.h=!1;try{const z=u.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var m;if(!(m=d)){var T;if(T=z===0){var b=String(u.D).match(Qm)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),T=!Ex.test(b?b.toLowerCase():"")}m=T}if(m)gt(u,"complete"),gt(u,"success");else{u.m=6;try{var L=2<Tn(u)?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.Z()+"]",ig(u)}}finally{xa(u)}}}}function xa(u,d){if(u.g){og(u);const m=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,d||gt(u,"ready");try{m.onreadystatechange=T}catch{}}}function og(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Tn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Tn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var d=this.g.responseText;return u&&d.indexOf(u)==0&&(d=d.substring(u.length)),ex(d)}};function ag(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Sx(u){const d={};u=(u.g&&2<=Tn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(_(u[T]))continue;var m=R(u[T]);const b=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=d[b]||[];d[b]=L,L.push(m)}A(d,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ks(u,d,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||d}function lg(u){this.Aa=0,this.i=[],this.j=new Ss,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ks("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ks("baseRetryDelayMs",5e3,u),this.cb=ks("retryDelaySeedMs",1e4,u),this.Wa=ks("forwardChannelMaxRetries",2,u),this.wa=ks("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new $m(u&&u.concurrentRequestLimit),this.Da=new _x,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=lg.prototype,t.la=8,t.G=1,t.connect=function(u,d,m,T){yt(0),this.W=u,this.H=d||{},m&&T!==void 0&&(this.H.OSID=m,this.H.OAID=T),this.F=this.X,this.I=yg(this,null,this.W),Ia(this)};function Tc(u){if(ug(u),u.G==3){var d=u.U++,m=En(u.I);if(we(m,"SID",u.K),we(m,"RID",d),we(m,"TYPE","terminate"),Vs(u,m),d=new Un(u,u.j,d),d.L=2,d.v=Ea(En(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=d.v,m=!0),m||(d.g=vg(d.j,null),d.g.ea(d.v)),d.F=Date.now(),va(d)}gg(u)}function Aa(u){u.g&&(xc(u),u.g.cancel(),u.g=null)}function ug(u){Aa(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ca(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Ia(u){if(!Wm(u.h)&&!u.s){u.s=!0;var d=u.Ga;q||G(),B||(q(),B=!0),W.add(d,u),u.B=0}}function xx(u,d){return Hm(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=d.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ts(p(u.Ga,u,d),mg(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const b=new Un(this,this.j,u);let L=this.o;if(this.S&&(L?(L=y(L),P(L,this.S)):L=this.S),this.m!==null||this.O||(b.H=L,L=null),this.P)e:{for(var d=0,m=0;m<this.i.length;m++){t:{var T=this.i[m];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(d+=T,4096<d){d=m;break e}if(d===4096||m===this.i.length-1){d=m+1;break e}}d=1e3}else d=1e3;d=hg(this,b,d),m=En(this.I),we(m,"RID",u),we(m,"CVER",22),this.D&&we(m,"X-HTTP-Session-Id",this.D),Vs(this,m),L&&(this.O?d="headers="+encodeURIComponent(String(ng(L)))+"&"+d:this.m&&Ec(m,this.m,L)),wc(this.h,b),this.Ua&&we(m,"TYPE","init"),this.P?(we(m,"$req",d),we(m,"SID","null"),b.T=!0,gc(b,m,null)):gc(b,m,d),this.G=2}}else this.G==3&&(u?cg(this,u):this.i.length==0||Wm(this.h)||cg(this))};function cg(u,d){var m;d?m=d.l:m=u.U++;const T=En(u.I);we(T,"SID",u.K),we(T,"RID",m),we(T,"AID",u.T),Vs(u,T),u.m&&u.o&&Ec(T,u.m,u.o),m=new Un(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),d&&(u.i=d.D.concat(u.i)),d=hg(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),wc(u.h,m),gc(m,T,d)}function Vs(u,d){u.H&&O(u.H,function(m,T){we(d,T,m)}),u.l&&Gm({},function(m,T){we(d,T,m)})}function hg(u,d,m){m=Math.min(u.i.length,m);var T=u.l?p(u.l.Na,u.l,u):null;e:{var b=u.i;let L=-1;for(;;){const z=["count="+m];L==-1?0<m?(L=b[0].g,z.push("ofs="+L)):L=0:z.push("ofs="+L);let ye=!0;for(let Ye=0;Ye<m;Ye++){let le=b[Ye].g;const ot=b[Ye].map;if(le-=L,0>le)L=Math.max(0,b[Ye].g-100),ye=!1;else try{wx(ot,z,"req"+le+"_")}catch{T&&T(ot)}}if(ye){T=z.join("&");break e}}}return u=u.i.splice(0,m),d.D=u,T}function fg(u){if(!u.g&&!u.u){u.Y=1;var d=u.Fa;q||G(),B||(q(),B=!0),W.add(d,u),u.v=0}}function Sc(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ts(p(u.Fa,u),mg(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,dg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ts(p(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Aa(this),dg(this))};function xc(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function dg(u){u.g=new Un(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var d=En(u.qa);we(d,"RID","rpc"),we(d,"SID",u.K),we(d,"AID",u.T),we(d,"CI",u.F?"0":"1"),!u.F&&u.ja&&we(d,"TO",u.ja),we(d,"TYPE","xmlhttp"),Vs(u,d),u.m&&u.o&&Ec(d,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Ea(En(d)),m.m=null,m.P=!0,Bm(m,u)}t.Za=function(){this.C!=null&&(this.C=null,Aa(this),Sc(this),yt(19))};function Ca(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function pg(u,d){var m=null;if(u.g==d){Ca(u),xc(u),u.g=null;var T=2}else if(_c(u.h,d))m=d.D,Km(u.h,d),T=1;else return;if(u.G!=0){if(d.o)if(T==1){m=d.m?d.m.length:0,d=Date.now()-d.F;var b=u.B;T=ma(),gt(T,new Lm(T,m)),Ia(u)}else fg(u);else if(b=d.s,b==3||b==0&&0<d.X||!(T==1&&xx(u,d)||T==2&&Sc(u)))switch(m&&0<m.length&&(d=u.h,d.i=d.i.concat(m)),b){case 1:kr(u,5);break;case 4:kr(u,10);break;case 3:kr(u,6);break;default:kr(u,2)}}}function mg(u,d){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*d}function kr(u,d){if(u.j.info("Error code "+d),d==2){var m=p(u.fb,u),T=u.Xa;const b=!T;T=new Rr(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_a(T,"https"),Ea(T),b?yx(T.toString(),m):vx(T.toString(),m)}else yt(2);u.G=0,u.l&&u.l.sa(d),gg(u),ug(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function gg(u){if(u.G=0,u.ka=[],u.l){const d=qm(u.h);(d.length!=0||u.i.length!=0)&&(C(u.ka,d),C(u.ka,u.i),u.h.i.length=0,S(u.i),u.i.length=0),u.l.ra()}}function yg(u,d,m){var T=m instanceof Rr?En(m):new Rr(m);if(T.g!="")d&&(T.g=d+"."+T.g),wa(T,T.s);else{var b=a.location;T=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;var L=new Rr(null);T&&_a(L,T),d&&(L.g=d),b&&wa(L,b),m&&(L.l=m),T=L}return m=u.D,d=u.ya,m&&d&&we(T,m,d),we(T,"VER",u.la),Vs(u,T),T}function vg(u,d,m){if(d&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=u.Ca&&!u.pa?new Ve(new Ta({eb:m})):new Ve(u.pa),d.Ha(u.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _g(){}t=_g.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Pa(){}Pa.prototype.g=function(u,d){return new Dt(u,d)};function Dt(u,d){st.call(this),this.g=new lg(d),this.l=u,this.h=d&&d.messageUrlParams||null,u=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(u?u["X-WebChannel-Content-Type"]=d.messageContentType:u={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(u?u["X-WebChannel-Client-Profile"]=d.va:u={"X-WebChannel-Client-Profile":d.va}),this.g.S=u,(u=d&&d.Sb)&&!_(u)&&(this.g.m=u),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,u=this.h,u!==null&&d in u&&(u=this.h,d in u&&delete u[d])),this.j=new hi(this)}E(Dt,st),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){Tc(this.g)},Dt.prototype.o=function(u){var d=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=cc(u),u=m);d.i.push(new ax(d.Ya++,u)),d.G==3&&Ia(d)},Dt.prototype.N=function(){this.g.l=null,delete this.j,Tc(this.g),delete this.g,Dt.aa.N.call(this)};function wg(u){fc.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var d=u.__sm__;if(d){e:{for(const m in d){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,d=d!==null&&u in d?d[u]:void 0),this.data=d}else this.data=u}E(wg,fc);function Eg(){dc.call(this),this.status=1}E(Eg,dc);function hi(u){this.g=u}E(hi,_g),hi.prototype.ua=function(){gt(this.g,"a")},hi.prototype.ta=function(u){gt(this.g,new wg(u))},hi.prototype.sa=function(u){gt(this.g,new Eg)},hi.prototype.ra=function(){gt(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,F1=function(){return new Pa},O1=function(){return ma()},L1=Cr,xf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ga.NO_ERROR=0,ga.TIMEOUT=8,ga.HTTP_ERROR=6,fl=ga,Om.COMPLETE="complete",M1=Om,Nm.EventType=ws,ws.OPEN="a",ws.CLOSE="b",ws.ERROR="c",ws.MESSAGE="d",st.prototype.listen=st.prototype.K,Ks=Nm,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,b1=Ve}).apply(typeof qa<"u"?qa:typeof self<"u"?self:typeof window<"u"?window:{});const Jy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ht.UNAUTHENTICATED=new ht(null),ht.GOOGLE_CREDENTIALS=new ht("google-credentials-uid"),ht.FIRST_PARTY=new ht("first-party-uid"),ht.MOCK_USER=new ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fs="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr=new C1("@firebase/firestore");function Bs(){return Jr.logLevel}function H(t,...e){if(Jr.logLevel<=oe.DEBUG){const n=e.map(rp);Jr.debug(`Firestore (${fs}): ${t}`,...n)}}function Mn(t,...e){if(Jr.logLevel<=oe.ERROR){const n=e.map(rp);Jr.error(`Firestore (${fs}): ${t}`,...n)}}function Xi(t,...e){if(Jr.logLevel<=oe.WARN){const n=e.map(rp);Jr.warn(`Firestore (${fs}): ${t}`,...n)}}function rp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${fs}) INTERNAL ASSERTION FAILED: `+t;throw Mn(e),new Error(e)}function de(t,e){t||X()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends hs{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ht.UNAUTHENTICATED))}shutdown(){}}class ZP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class eR{constructor(e){this.t=e,this.currentUser=ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){de(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Pn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(de(typeof r.accessToken=="string"),new j1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return de(e===null||typeof e=="string"),new ht(e)}}class tR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class nR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new tR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){de(this.o===void 0);const r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(de(typeof n.token=="string"),this.R=n.token,new rR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=sR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function Ji(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ke(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new Ke(0,0))}static max(){return new J(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Oo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Oo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xe extends Oo{construct(e,n,r){return new xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new xe(n)}static emptyPath(){return new xe([])}}const oR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends Oo{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return oR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new et(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(xe.fromString(e))}static fromName(e){return new Q(xe.fromString(e).popFirst(5))}static empty(){return new Q(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new xe(e.slice()))}}function aR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new mr(i,Q.empty(),e)}function lR(t){return new mr(t.readTime,t.key,-1)}class mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mr(J.min(),Q.empty(),-1)}static max(){return new mr(J.max(),Q.empty(),-1)}}function uR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==cR)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(i=>i?j.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new j((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new j((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function fR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ra(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ip.oe=-1;function Du(t){return t==null}function Jl(t){return t===0&&1/t==-1/0}function dR(t){return typeof t=="number"&&Number.isInteger(t)&&!Jl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function si(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function U1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||Ze.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ga(this.root,e,this.comparator,!0)}}class Ga{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=i??Ze.EMPTY,this.right=s??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Ze(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ze.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ev(this.data.getIterator())}getIteratorFrom(e){return new ev(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new nt(this.comparator);return n.data=e,n}}class ev{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new Lt([])}unionWith(e){let n=new nt(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Lt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ji(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new z1("Invalid base64 string: "+s):s}}(e);return new it(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const pR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gr(t){if(de(!!t),typeof t=="string"){let e=0;const n=pR.exec(t);if(de(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Oe(t.seconds),nanos:Oe(t.nanos)}}function Oe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zr(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function op(t){const e=t.mapValue.fields.__previous_value__;return sp(e)?op(e):e}function Fo(t){const e=gr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class jo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new jo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof jo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa={mapValue:{}};function ei(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sp(t)?4:yR(t)?9007199254740991:gR(t)?10:11:X()}function vn(t,e){if(t===e)return!0;const n=ei(t);if(n!==ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fo(t).isEqual(Fo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=gr(i.timestampValue),a=gr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Zr(i.bytesValue).isEqual(Zr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Oe(i.geoPointValue.latitude)===Oe(s.geoPointValue.latitude)&&Oe(i.geoPointValue.longitude)===Oe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Oe(i.integerValue)===Oe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Oe(i.doubleValue),a=Oe(s.doubleValue);return o===a?Jl(o)===Jl(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ji(t.arrayValue.values||[],e.arrayValue.values||[],vn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Zy(o)!==Zy(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!vn(o[l],a[l])))return!1;return!0}(t,e);default:return X()}}function Bo(t,e){return(t.values||[]).find(n=>vn(n,e))!==void 0}function Zi(t,e){if(t===e)return 0;const n=ei(t),r=ei(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Oe(s.integerValue||s.doubleValue),l=Oe(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return tv(t.timestampValue,e.timestampValue);case 4:return tv(Fo(t),Fo(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Zr(s),l=Zr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=ue(a[c],l[c]);if(h!==0)return h}return ue(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ue(Oe(s.latitude),Oe(o.latitude));return a!==0?a:ue(Oe(s.longitude),Oe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return nv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const f=s.fields||{},p=o.fields||{},g=(a=f.value)===null||a===void 0?void 0:a.arrayValue,E=(l=p.value)===null||l===void 0?void 0:l.arrayValue,S=ue(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return S!==0?S:nv(g,E)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Qa.mapValue&&o===Qa.mapValue)return 0;if(s===Qa.mapValue)return 1;if(o===Qa.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let f=0;f<l.length&&f<h.length;++f){const p=ue(l[f],h[f]);if(p!==0)return p;const g=Zi(a[l[f]],c[h[f]]);if(g!==0)return g}return ue(l.length,h.length)}(t.mapValue,e.mapValue);default:throw X()}}function tv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=gr(t),r=gr(e),i=ue(n.seconds,r.seconds);return i!==0?i:ue(n.nanos,r.nanos)}function nv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Zi(n[i],r[i]);if(s)return s}return ue(n.length,r.length)}function es(t){return Af(t)}function Af(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Af(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Af(n.fields[o])}`;return i+"}"}(t.mapValue):X()}function If(t){return!!t&&"integerValue"in t}function ap(t){return!!t&&"arrayValue"in t}function rv(t){return!!t&&"nullValue"in t}function iv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dl(t){return!!t&&"mapValue"in t}function gR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function oo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return si(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=oo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function yR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oo(n)}setAll(e){let n=et.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=oo(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());dl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];dl(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){si(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new It(oo(this.value))}}function $1(t){const e=[];return si(t.fields,(n,r)=>{const i=new et([n]);if(dl(r)){const s=$1(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Lt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new dt(e,0,J.min(),J.min(),J.min(),It.empty(),0)}static newFoundDocument(e,n,r,i){return new dt(e,1,n,J.min(),r,i,0)}static newNoDocument(e,n){return new dt(e,2,n,J.min(),J.min(),It.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,J.min(),J.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,n){this.position=e,this.inclusive=n}}function sv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Zi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function ov(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n="asc"){this.field=e,this.dir=n}}function vR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{}class We extends W1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new wR(e,n,r):n==="array-contains"?new SR(e,r):n==="in"?new xR(e,r):n==="not-in"?new AR(e,r):n==="array-contains-any"?new IR(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ER(e,r):new TR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Zi(n,this.value)):n!==null&&ei(this.value)===ei(n)&&this.matchesComparison(Zi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _n extends W1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new _n(e,n)}matches(e){return H1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function H1(t){return t.op==="and"}function K1(t){return _R(t)&&H1(t)}function _R(t){for(const e of t.filters)if(e instanceof _n)return!1;return!0}function Cf(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+es(t.value);if(K1(t))return t.filters.map(e=>Cf(e)).join(",");{const e=t.filters.map(n=>Cf(n)).join(",");return`${t.op}(${e})`}}function q1(t,e){return t instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.field.isEqual(i.field)&&vn(r.value,i.value)}(t,e):t instanceof _n?function(r,i){return i instanceof _n&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&q1(o,i.filters[a]),!0):!1}(t,e):void X()}function G1(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${es(n.value)}`}(t):t instanceof _n?function(n){return n.op.toString()+" {"+n.getFilters().map(G1).join(" ,")+"}"}(t):"Filter"}class wR extends We{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class ER extends We{constructor(e,n){super(e,"in",n),this.keys=Q1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class TR extends We{constructor(e,n){super(e,"not-in",n),this.keys=Q1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Q1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class SR extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ap(n)&&Bo(n.arrayValue,this.value)}}class xR extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bo(this.value.arrayValue,n)}}class AR extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Bo(this.value.arrayValue,n)}}class IR extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ap(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Bo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function av(t,e=null,n=[],r=[],i=null,s=null,o=null){return new CR(t,e,n,r,i,s,o)}function lp(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Cf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Du(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>es(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>es(r)).join(",")),e.ue=n}return e.ue}function up(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!q1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ov(t.startAt,e.startAt)&&ov(t.endAt,e.endAt)}function Pf(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function PR(t,e,n,r,i,s,o,a){return new bu(t,e,n,r,i,s,o,a)}function Mu(t){return new bu(t)}function lv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function RR(t){return t.collectionGroup!==null}function ao(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new nt(et.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new eu(s,r))}),n.has(et.keyField().canonicalString())||e.ce.push(new eu(et.keyField(),r))}return e.ce}function dn(t){const e=Z(t);return e.le||(e.le=kR(e,ao(t))),e.le}function kR(t,e){if(t.limitType==="F")return av(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new eu(i.field,s)});const n=t.endAt?new Zl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zl(t.startAt.position,t.startAt.inclusive):null;return av(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Rf(t,e,n){return new bu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lu(t,e){return up(dn(t),dn(e))&&t.limitType===e.limitType}function Y1(t){return`${lp(dn(t))}|lt:${t.limitType}`}function pi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>G1(i)).join(", ")}]`),Du(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>es(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>es(i)).join(",")),`Target(${r})`}(dn(t))}; limitType=${t.limitType})`}function Ou(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ao(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=sv(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,ao(r),i)||r.endAt&&!function(o,a,l){const c=sv(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,ao(r),i))}(t,e)}function VR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function X1(t){return(e,n)=>{let r=!1;for(const i of ao(t)){const s=NR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function NR(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Zi(l,c):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){si(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return U1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new ke(Q.comparator);function Ln(){return DR}const J1=new ke(Q.comparator);function qs(...t){let e=J1;for(const n of t)e=e.insert(n.key,n);return e}function Z1(t){let e=J1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function jr(){return lo()}function eE(){return lo()}function lo(){return new ds(t=>t.toString(),(t,e)=>t.isEqual(e))}const bR=new ke(Q.comparator),MR=new nt(Q.comparator);function ie(...t){let e=MR;for(const n of t)e=e.add(n);return e}const LR=new nt(ue);function OR(){return LR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jl(e)?"-0":e}}function tE(t){return{integerValue:""+t}}function FR(t,e){return dR(e)?tE(e):cp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(){this._=void 0}}function jR(t,e,n){return t instanceof tu?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&sp(s)&&(s=op(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Uo?rE(t,e):t instanceof zo?iE(t,e):function(i,s){const o=nE(i,s),a=uv(o)+uv(i.Pe);return If(o)&&If(i.Pe)?tE(a):cp(i.serializer,a)}(t,e)}function BR(t,e,n){return t instanceof Uo?rE(t,e):t instanceof zo?iE(t,e):n}function nE(t,e){return t instanceof nu?function(r){return If(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class tu extends Fu{}class Uo extends Fu{constructor(e){super(),this.elements=e}}function rE(t,e){const n=sE(e);for(const r of t.elements)n.some(i=>vn(i,r))||n.push(r);return{arrayValue:{values:n}}}class zo extends Fu{constructor(e){super(),this.elements=e}}function iE(t,e){let n=sE(e);for(const r of t.elements)n=n.filter(i=>!vn(i,r));return{arrayValue:{values:n}}}class nu extends Fu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function uv(t){return Oe(t.integerValue||t.doubleValue)}function sE(t){return ap(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function UR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Uo&&i instanceof Uo||r instanceof zo&&i instanceof zo?Ji(r.elements,i.elements,vn):r instanceof nu&&i instanceof nu?vn(r.Pe,i.Pe):r instanceof tu&&i instanceof tu}(t.transform,e.transform)}class zR{constructor(e,n){this.version=e,this.transformResults=n}}class Gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ju{}function oE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hp(t.key,Gt.none()):new ia(t.key,t.data,Gt.none());{const n=t.data,r=It.empty();let i=new nt(et.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ar(t.key,r,new Lt(i.toArray()),Gt.none())}}function $R(t,e,n){t instanceof ia?function(i,s,o){const a=i.value.clone(),l=hv(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ar?function(i,s,o){if(!pl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=hv(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(aE(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function uo(t,e,n,r){return t instanceof ia?function(s,o,a,l){if(!pl(s.precondition,o))return a;const c=s.value.clone(),h=fv(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ar?function(s,o,a,l){if(!pl(s.precondition,o))return a;const c=fv(s.fieldTransforms,l,o),h=o.data;return h.setAll(aE(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return pl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function WR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=nE(r.transform,i||null);s!=null&&(n===null&&(n=It.empty()),n.set(r.field,s))}return n||null}function cv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ji(r,i,(s,o)=>UR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ia extends ju{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ar extends ju{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function aE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function hv(t,e,n){const r=new Map;de(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,BR(o,a,n[i]))}return r}function fv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,jR(s,o,e))}return r}class hp extends ju{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HR extends ju{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&$R(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=uo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=uo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=eE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=oE(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Ji(this.mutations,e.mutations,(n,r)=>cv(n,r))&&Ji(this.baseMutations,e.baseMutations,(n,r)=>cv(n,r))}}class fp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){de(e.mutations.length===r.length);let i=function(){return bR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new fp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,se;function QR(t){switch(t){default:return X();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function lE(t){if(t===void 0)return Mn("GRPC error has no .code"),F.UNKNOWN;switch(t){case je.OK:return F.OK;case je.CANCELLED:return F.CANCELLED;case je.UNKNOWN:return F.UNKNOWN;case je.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case je.INTERNAL:return F.INTERNAL;case je.UNAVAILABLE:return F.UNAVAILABLE;case je.UNAUTHENTICATED:return F.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case je.NOT_FOUND:return F.NOT_FOUND;case je.ALREADY_EXISTS:return F.ALREADY_EXISTS;case je.PERMISSION_DENIED:return F.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case je.ABORTED:return F.ABORTED;case je.OUT_OF_RANGE:return F.OUT_OF_RANGE;case je.UNIMPLEMENTED:return F.UNIMPLEMENTED;case je.DATA_LOSS:return F.DATA_LOSS;default:return X()}}(se=je||(je={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new Wr([4294967295,4294967295],0);function dv(t){const e=YR().encode(t),n=new D1;return n.update(e),new Uint8Array(n.digest())}function pv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Wr([n,r],0),new Wr([i,s],0)]}class dp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gs(`Invalid padding: ${n}`);if(r<0)throw new Gs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Wr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Wr.fromNumber(r)));return i.compare(XR)===1&&(i=new Wr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=dv(e),[r,i]=pv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new dp(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=dv(e),[r,i]=pv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,sa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Bu(J.min(),i,new ke(ue),Ln(),ie())}}class sa{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new sa(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class uE{constructor(e,n){this.targetId=e,this.me=n}}class cE{constructor(e,n,r=it.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class mv{constructor(){this.fe=0,this.ge=yv(),this.pe=it.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:X()}}),new sa(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=yv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,de(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class JR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ln(),this.qe=gv(),this.Qe=new ke(ue)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Pf(s))if(r===0){const o=new Q(s.path);this.Ue(n,o,dt.newNoDocument(o,J.min()))}else de(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Zr(r).toUint8Array()}catch(l){if(l instanceof z1)return Xi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new dp(o,i,s)}catch(l){return Xi(l instanceof Gs?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Pf(a.target)){const l=new Q(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,dt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ie();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Bu(e,n,this.Qe,this.ke,r);return this.ke=Ln(),this.qe=gv(),this.Qe=new ke(ue),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new mv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new nt(ue),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new mv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function gv(){return new ke(Q.comparator)}function yv(){return new ke(Q.comparator)}const ZR={asc:"ASCENDING",desc:"DESCENDING"},ek={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tk={and:"AND",or:"OR"};class nk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function kf(t,e){return t.useProto3Json||Du(e)?e:{value:e}}function ru(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rk(t,e){return ru(t,e.toTimestamp())}function pn(t){return de(!!t),J.fromTimestamp(function(n){const r=gr(n);return new Ke(r.seconds,r.nanos)}(t))}function pp(t,e){return Vf(t,e).canonicalString()}function Vf(t,e){const n=function(i){return new xe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fE(t){const e=xe.fromString(t);return de(yE(e)),e}function Nf(t,e){return pp(t.databaseId,e.path)}function rh(t,e){const n=fE(e);if(n.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(pE(n))}function dE(t,e){return pp(t.databaseId,e)}function ik(t){const e=fE(t);return e.length===4?xe.emptyPath():pE(e)}function Df(t){return new xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pE(t){return de(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function vv(t,e,n){return{name:Nf(t,e),fields:n.value.mapValue.fields}}function sk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(de(h===void 0||typeof h=="string"),it.fromBase64String(h||"")):(de(h===void 0||h instanceof Buffer||h instanceof Uint8Array),it.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:lE(c.code);return new K(h,c.message||"")}(o);n=new cE(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=rh(t,r.document.name),s=pn(r.document.updateTime),o=r.document.createTime?pn(r.document.createTime):J.min(),a=new It({mapValue:{fields:r.document.fields}}),l=dt.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new ml(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=rh(t,r.document),s=r.readTime?pn(r.readTime):J.min(),o=dt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ml([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=rh(t,r.document),s=r.removedTargetIds||[];n=new ml([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new GR(i,s),a=r.targetId;n=new uE(a,o)}}return n}function ok(t,e){let n;if(e instanceof ia)n={update:vv(t,e.key,e.value)};else if(e instanceof hp)n={delete:Nf(t,e.key)};else if(e instanceof Ar)n={update:vv(t,e.key,e.data),updateMask:mk(e.fieldMask)};else{if(!(e instanceof HR))return X();n={verify:Nf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof tu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Uo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof zo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof nu)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:rk(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(t,e.precondition)),n}function ak(t,e){return t&&t.length>0?(de(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?pn(i.updateTime):pn(s);return o.isEqual(J.min())&&(o=pn(s)),new zR(o,i.transformResults||[])}(n,e))):[]}function lk(t,e){return{documents:[dE(t,e.path)]}}function uk(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=dE(t,i);const s=function(c){if(c.length!==0)return gE(_n.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:mi(p.field),direction:fk(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=kf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function ck(t){let e=ik(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){de(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(f){const p=mE(f);return p instanceof _n&&K1(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(E){return new eu(gi(E.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,Du(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,g=f.values||[];return new Zl(g,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new Zl(g,p)}(n.endAt)),PR(e,i,o,s,a,"F",l,c)}function hk(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gi(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=gi(n.unaryFilter.field);return We.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=gi(n.unaryFilter.field);return We.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gi(n.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return We.create(gi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _n.create(n.compositeFilter.filters.map(r=>mE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function fk(t){return ZR[t]}function dk(t){return ek[t]}function pk(t){return tk[t]}function mi(t){return{fieldPath:t.canonicalString()}}function gi(t){return et.fromServerFormat(t.fieldPath)}function gE(t){return t instanceof We?function(n){if(n.op==="=="){if(iv(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NAN"}};if(rv(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(iv(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NOT_NAN"}};if(rv(n.value))return{unaryFilter:{field:mi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mi(n.field),op:dk(n.op),value:n.value}}}(t):t instanceof _n?function(n){const r=n.getFilters().map(i=>gE(i));return r.length===1?r[0]:{compositeFilter:{op:pk(n.op),filters:r}}}(t):X()}function mk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,n,r,i,s=J.min(),o=J.min(),a=it.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.ct=e}}function yk(t){const e=ck({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.un=new _k}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(mr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(mr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class _k{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new nt(xe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new nt(xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ts(0)}static kn(){return new ts(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.changes=new ds(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&uo(r.mutation,i,Lt.empty(),Ke.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const i=jr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=qs();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=jr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Ln();const o=lo(),a=function(){return lo()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Ar)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),uo(h.mutation,c,h.mutation.getFieldMask(),Ke.now())):o.set(c.key,Lt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new Ek(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=lo();let i=new ke((o,a)=>o-a),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Lt.empty();h=a.applyToLocalView(c,h),r.set(l,h);const f=(i.get(a.batchId)||ie()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,f=eE();h.forEach(p=>{if(!s.has(p)){const g=oE(n.get(p),r.get(p));g!==null&&f.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):j.resolve(jr());let a=-1,l=s;return o.next(c=>j.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{l=l.insert(h,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,ie())).next(h=>({batchId:a,changes:Z1(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=qs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=qs();return this.indexManager.getCollectionParents(e,s).next(a=>j.forEach(a,l=>{const c=function(f,p){return new bu(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,dt.newInvalidDocument(h)))});let a=qs();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&uo(h.mutation,c,Lt.empty(),Ke.now()),Ou(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:pn(i.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:yk(i.bundledQuery),readTime:pn(i.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(){this.overlays=new ke(Q.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=jr();return j.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const i=jr(),s=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return j.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ke((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=jr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=jr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return j.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new qR(n,r));let s=this.Ir.get(n);s===void 0&&(s=ie(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(){this.Tr=new nt(qe.Er),this.dr=new nt(qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Q(new xe([])),r=new qe(n,e),i=new qe(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new xe([])),r=new qe(n,e),i=new qe(n,e+1);let s=ie();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||ue(e.wr,n.wr)}static Ar(e,n){return ue(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new nt(qe.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new KR(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new qe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return j.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),j.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nt(ue);return n.forEach(i=>{const s=new qe(i,0),o=new qe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Q.isDocumentKey(s)||(s=s.child(""));const o=new qe(new Q(s),0);let a=new nt(ue);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),j.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){de(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(n.mutations,i=>{const s=new qe(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new qe(n,0),i=this.br.firstAfterOrEqual(r);return j.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){this.Mr=e,this.docs=function(){return new ke(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=Ln();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():dt.newInvalidDocument(i))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Ln();const o=n.path,a=new Q(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||uR(lR(h),r)<=0||(i.has(h.key)||Ou(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return j.resolve(s)}getAllFromCollectionGroup(e,n,r,i){X()}Or(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Pk(this)}getSize(e){return j.resolve(this.size)}}class Pk extends wk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e){this.persistence=e,this.Nr=new ds(n=>lp(n),up),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new mp,this.targetCount=0,this.kr=ts.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ts(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),j.waitFor(s).next(()=>i)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),j.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ip(0),this.Kr=!1,this.Kr=!0,this.$r=new Ak,this.referenceDelegate=e(this),this.Ur=new Rk(this),this.indexManager=new vk,this.remoteDocumentCache=function(i){return new Ck(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new gk(n),this.Gr=new Sk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Ik(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const i=new Vk(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return j.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class Vk extends hR{constructor(e){super(),this.currentSequenceNumber=e}}class gp{constructor(e){this.persistence=e,this.Jr=new mp,this.Yr=null}static Zr(e){return new gp(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,r=>{const i=Q.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ie(),i=ie();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new yp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return bC()?8:fR(NC())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Nk;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Bs()<=oe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",pi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(Bs()<=oe.DEBUG&&H("QueryEngine","Query:",pi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Bs()<=oe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",pi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(n))):j.resolve())}Yi(e,n){if(lv(n))return j.resolve(null);let r=dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Rf(n,null,"F"),r=dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ie(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Rf(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return lv(n)||i.isEqual(J.min())?j.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?j.resolve(null):(Bs()<=oe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pi(n)),this.rs(e,o,n,aR(i,-1)).next(a=>a))})}ts(e,n){let r=new nt(X1(e));return n.forEach((i,s)=>{Ou(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Bs()<=oe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",pi(n)),this.Ji.getDocumentsMatchingQuery(e,n,mr.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new ke(ue),this._s=new ds(s=>lp(s),up),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Tk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Mk(t,e,n,r){return new bk(t,e,n,r)}async function vE(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=ie();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Lk(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const f=c.batch,p=f.keys();let g=j.resolve();return p.forEach(E=>{g=g.next(()=>h.getEntry(l,E)).next(S=>{const C=c.docVersions.get(E);de(C!==null),S.version.compareTo(C)<0&&(f.applyToRemoteDocument(S,c),S.isValidDocument()&&(S.setReadTime(c.commitVersion),h.addEntry(S)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=ie();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function _E(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Ok(t,e){const n=Z(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const p=i.get(f);if(!p)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,f)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(it.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),i=i.insert(f,g),function(S,C,w){return S.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-S.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,g,h)&&a.push(n.Ur.updateTargetData(s,g))});let l=Ln(),c=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Fk(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(J.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function Fk(t,e,n){let r=ie(),i=ie();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Ln();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(J.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function jk(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Bk(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,j.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new er(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function bf(t,e,n){const r=Z(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ra(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function _v(t,e,n){const r=Z(t);let i=J.min(),s=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const f=Z(l),p=f._s.get(h);return p!==void 0?j.resolve(f.os.get(p)):f.Ur.getTargetData(c,h)}(r,o,dn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:J.min(),n?s:ie())).next(a=>(Uk(r,VR(e),a),{documents:a,Ts:s})))}function Uk(t,e,n){let r=t.us.get(e)||J.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class wv{constructor(){this.activeTargetIds=OR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zk{constructor(){this.so=new wv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new wv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ya=null;function ih(){return Ya===null?Ya=function(){return 268435456+Math.round(2147483648*Math.random())}():Ya++,"0x"+Ya.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ct="WebChannelConnection";class Kk extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=ih(),l=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(H("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Xi("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Wk[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=ih();return new Promise((o,a)=>{const l=new b1;l.setWithCredentials(!0),l.listenOnce(M1.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case fl.NO_ERROR:const h=l.getResponseJson();H(ct,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case fl.TIMEOUT:H(ct,`RPC '${e}' ${s} timed out`),a(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case fl.HTTP_ERROR:const f=l.getStatus();if(H(ct,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const E=function(C){const w=C.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(g.status);a(new K(E,g.message))}else a(new K(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new K(F.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{H(ct,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);H(ct,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=ih(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=F1(),a=O1(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");H(ct,`Creating RPC '${e}' stream ${i}: ${h}`,l);const f=o.createWebChannel(h,l);let p=!1,g=!1;const E=new Hk({Io:C=>{g?H(ct,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(p||(H(ct,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),H(ct,`RPC '${e}' stream ${i} sending:`,C),f.send(C))},To:()=>f.close()}),S=(C,w,_)=>{C.listen(w,v=>{try{_(v)}catch(V){setTimeout(()=>{throw V},0)}})};return S(f,Ks.EventType.OPEN,()=>{g||(H(ct,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),S(f,Ks.EventType.CLOSE,()=>{g||(g=!0,H(ct,`RPC '${e}' stream ${i} transport closed`),E.So())}),S(f,Ks.EventType.ERROR,C=>{g||(g=!0,Xi(ct,`RPC '${e}' stream ${i} transport errored:`,C),E.So(new K(F.UNAVAILABLE,"The operation could not be completed")))}),S(f,Ks.EventType.MESSAGE,C=>{var w;if(!g){const _=C.data[0];de(!!_);const v=_,V=v.error||((w=v[0])===null||w===void 0?void 0:w.error);if(V){H(ct,`RPC '${e}' stream ${i} received error:`,V);const M=V.status;let O=function(x){const P=je[x];if(P!==void 0)return lE(P)}(M),A=V.message;O===void 0&&(O=F.INTERNAL,A="Unknown error status: "+M+" with message "+V.message),g=!0,E.So(new K(O,A)),f.close()}else H(ct,`RPC '${e}' stream ${i} received:`,_),E.bo(_)}}),S(a,L1.STAT_EVENT,C=>{C.stat===xf.PROXY?H(ct,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===xf.NOPROXY&&H(ct,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function sh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t){return new nk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Mn(n.toString()),Mn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new K(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class qk extends EE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=sk(this.serializer,e),r=function(s){if(!("targetChange"in s))return J.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?pn(o.readTime):J.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Df(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Pf(l)?{documents:lk(s,l)}:{query:uk(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=hE(s,o.resumeToken);const c=kf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=ru(s,o.snapshotVersion.toTimestamp());const c=kf(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=hk(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Df(this.serializer),n.removeTarget=e,this.a_(n)}}class Gk extends EE{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return de(!!e.streamToken),this.lastStreamToken=e.streamToken,de(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){de(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=ak(e.writeResults,e.commitTime),r=pn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Df(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ok(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Vf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Vf(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Yk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Mn(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{oi(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Z(l);c.L_.add(4),await oa(c),c.q_.set("Unknown"),c.L_.delete(4),await zu(c)}(this))})}),this.q_=new Yk(r,i)}}async function zu(t){if(oi(t))for(const e of t.B_)await e(!0)}async function oa(t){for(const e of t.B_)await e(!1)}function TE(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ep(n)?wp(n):ps(n).r_()&&_p(n,e))}function vp(t,e){const n=Z(t),r=ps(n);n.N_.delete(e),r.r_()&&SE(n,e),n.N_.size===0&&(r.r_()?r.o_():oi(n)&&n.q_.set("Unknown"))}function _p(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ps(t).A_(e)}function SE(t,e){t.Q_.xe(e),ps(t).R_(e)}function wp(t){t.Q_=new JR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ps(t).start(),t.q_.v_()}function Ep(t){return oi(t)&&!ps(t).n_()&&t.N_.size>0}function oi(t){return Z(t).L_.size===0}function xE(t){t.Q_=void 0}async function Jk(t){t.q_.set("Online")}async function Zk(t){t.N_.forEach((e,n)=>{_p(t,e)})}async function eV(t,e){xE(t),Ep(t)?(t.q_.M_(e),wp(t)):t.q_.set("Unknown")}async function tV(t,e,n){if(t.q_.set("Online"),e instanceof cE&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await iu(t,r)}else if(e instanceof ml?t.Q_.Ke(e):e instanceof uE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const r=await _E(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(it.EMPTY_BYTE_STRING,h.snapshotVersion)),SE(s,l);const f=new er(h.target,l,c,h.sequenceNumber);_p(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await iu(t,r)}}async function iu(t,e,n){if(!ra(e))throw e;t.L_.add(1),await oa(t),t.q_.set("Offline"),n||(n=()=>_E(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await zu(t)})}function AE(t,e){return e().catch(n=>iu(t,n,e))}async function $u(t){const e=Z(t),n=yr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;nV(e);)try{const i=await jk(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,rV(e,i)}catch(i){await iu(e,i)}IE(e)&&CE(e)}function nV(t){return oi(t)&&t.O_.length<10}function rV(t,e){t.O_.push(e);const n=yr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function IE(t){return oi(t)&&!yr(t).n_()&&t.O_.length>0}function CE(t){yr(t).start()}async function iV(t){yr(t).p_()}async function sV(t){const e=yr(t);for(const n of t.O_)e.m_(n.mutations)}async function oV(t,e,n){const r=t.O_.shift(),i=fp.from(r,e,n);await AE(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await $u(t)}async function aV(t,e){e&&yr(t).V_&&await async function(r,i){if(function(o){return QR(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();yr(r).s_(),await AE(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await $u(r)}}(t,e),IE(t)&&CE(t)}async function Tv(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=oi(n);n.L_.add(3),await oa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await zu(n)}async function lV(t,e){const n=Z(t);e?(n.L_.delete(2),await zu(n)):e||(n.L_.add(2),await oa(n),n.q_.set("Unknown"))}function ps(t){return t.K_||(t.K_=function(n,r,i){const s=Z(n);return s.w_(),new qk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:Jk.bind(null,t),Ro:Zk.bind(null,t),mo:eV.bind(null,t),d_:tV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ep(t)?wp(t):t.q_.set("Unknown")):(await t.K_.stop(),xE(t))})),t.K_}function yr(t){return t.U_||(t.U_=function(n,r,i){const s=Z(n);return s.w_(),new Gk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:iV.bind(null,t),mo:aV.bind(null,t),f_:sV.bind(null,t),g_:oV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await $u(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Tp(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sp(t,e){if(Mn("AsyncQueue",`${e}: ${t}`),ra(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=qs(),this.sortedSet=new ke(this.comparator)}static emptySet(e){return new zi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new zi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(){this.W_=new ke(Q.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ns{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ns(e,n,zi.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class cV{constructor(){this.queries=xv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Z(n),s=i.queries;i.queries=xv(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function xv(){return new ds(t=>Y1(t),Lu)}async function xp(t,e){const n=Z(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new uV,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Sp(o,`Initialization of query '${pi(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Ip(n)}async function Ap(t,e){const n=Z(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function hV(t,e){const n=Z(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Ip(n)}function fV(t,e,n){const r=Z(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Ip(t){t.Y_.forEach(e=>{e.next()})}var Mf,Av;(Av=Mf||(Mf={})).ea="default",Av.Cache="cache";class Cp{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ns(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ns.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Mf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e){this.key=e}}class RE{constructor(e){this.key=e}}class dV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=X1(e),this.Ra=new zi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Sv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const p=i.get(h),g=Ou(this.query,f)?f:null,E=!!p&&this.mutatedKeys.has(p.key),S=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let C=!1;p&&g?p.data.isEqual(g.data)?E!==S&&(r.track({type:3,doc:g}),C=!0):this.ga(p,g)||(r.track({type:2,doc:g}),C=!0,(l&&this.Aa(g,l)>0||c&&this.Aa(g,c)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),C=!0):p&&!g&&(r.track({type:1,doc:p}),C=!0,(l||c)&&(a=!0)),C&&(g?(o=o.add(g),s=S?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(g,E){const S=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return S(g)-S(E)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new ns(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Sv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new RE(r))}),this.da.forEach(r=>{e.has(r)||n.push(new PE(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ns.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class pV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class mV{constructor(e){this.key=e,this.va=!1}}class gV{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ds(a=>Y1(a),Lu),this.Ma=new Map,this.xa=new Set,this.Oa=new ke(Q.comparator),this.Na=new Map,this.La=new mp,this.Ba={},this.ka=new Map,this.qa=ts.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function yV(t,e,n=!0){const r=ME(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await kE(r,e,n,!0),i}async function vV(t,e){const n=ME(t);await kE(n,e,!0,!1)}async function kE(t,e,n,r){const i=await Bk(t.localStore,dn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await _V(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&TE(t.remoteStore,i),a}async function _V(t,e,n,r,i){t.Ka=(f,p,g)=>async function(S,C,w,_){let v=C.view.ma(w);v.ns&&(v=await _v(S.localStore,C.query,!1).then(({documents:A})=>C.view.ma(A,v)));const V=_&&_.targetChanges.get(C.targetId),M=_&&_.targetMismatches.get(C.targetId)!=null,O=C.view.applyChanges(v,S.isPrimaryClient,V,M);return Cv(S,C.targetId,O.wa),O.snapshot}(t,f,p,g);const s=await _v(t.localStore,e,!0),o=new dV(e,s.Ts),a=o.ma(s.documents),l=sa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Cv(t,n,c.wa);const h=new pV(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function wV(t,e,n){const r=Z(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Lu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&vp(r.remoteStore,i.targetId),Lf(r,i.targetId)}).catch(na)):(Lf(r,i.targetId),await bf(r.localStore,i.targetId,!0))}async function EV(t,e){const n=Z(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vp(n.remoteStore,r.targetId))}async function TV(t,e,n){const r=RV(t);try{const i=await function(o,a){const l=Z(o),c=Ke.now(),h=a.reduce((g,E)=>g.add(E.key),ie());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=Ln(),S=ie();return l.cs.getEntries(g,h).next(C=>{E=C,E.forEach((w,_)=>{_.isValidDocument()||(S=S.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,E)).next(C=>{f=C;const w=[];for(const _ of a){const v=WR(_,f.get(_.key).overlayedDocument);v!=null&&w.push(new Ar(_.key,v,$1(v.value.mapValue),Gt.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,w,a)}).next(C=>{p=C;const w=C.applyToLocalDocumentSet(f,S);return l.documentOverlayCache.saveOverlays(g,C.batchId,w)})}).then(()=>({batchId:p.batchId,changes:Z1(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new ke(ue)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await aa(r,i.changes),await $u(r.remoteStore)}catch(i){const s=Sp(i,"Failed to persist write");n.reject(s)}}async function VE(t,e){const n=Z(t);try{const r=await Ok(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(de(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?de(o.va):i.removedDocuments.size>0&&(de(o.va),o.va=!1))}),await aa(n,r,e)}catch(r){await na(r)}}function Iv(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Z(o);l.onlineState=a;let c=!1;l.queries.forEach((h,f)=>{for(const p of f.j_)p.Z_(a)&&(c=!0)}),c&&Ip(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SV(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new ke(Q.comparator);o=o.insert(s,dt.newNoDocument(s,J.min()));const a=ie().add(s),l=new Bu(J.min(),new Map,new ke(ue),o,a);await VE(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Pp(r)}else await bf(r.localStore,e,!1).then(()=>Lf(r,e,n)).catch(na)}async function xV(t,e){const n=Z(t),r=e.batch.batchId;try{const i=await Lk(n.localStore,e);DE(n,r,null),NE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await aa(n,i)}catch(i){await na(i)}}async function AV(t,e,n){const r=Z(t);try{const i=await function(o,a){const l=Z(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(de(f!==null),h=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);DE(r,e,n),NE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await aa(r,i)}catch(i){await na(i)}}function NE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function DE(t,e,n){const r=Z(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Lf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||bE(t,r)})}function bE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(vp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Pp(t))}function Cv(t,e,n){for(const r of n)r instanceof PE?(t.La.addReference(r.key,e),IV(t,r)):r instanceof RE?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||bE(t,r.key)):X()}function IV(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),Pp(t))}function Pp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(xe.fromString(e)),r=t.qa.next();t.Na.set(r,new mV(n)),t.Oa=t.Oa.insert(n,r),TE(t.remoteStore,new er(dn(Mu(n.path)),r,"TargetPurposeLimboResolution",ip.oe))}}async function aa(t,e,n){const r=Z(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=yp.Wi(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=Z(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>j.forEach(c,p=>j.forEach(p.$i,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>j.forEach(p.Ui,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!ra(f))throw f;H("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=h.os.get(p),E=g.snapshotVersion,S=g.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(p,S)}}}(r.localStore,s))}async function CV(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await vE(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new K(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await aa(n,r.hs)}}function PV(t,e){const n=Z(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let i=ie();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function ME(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=VE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=PV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SV.bind(null,e),e.Ca.d_=hV.bind(null,e.eventManager),e.Ca.$a=fV.bind(null,e.eventManager),e}function RV(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AV.bind(null,e),e}class su{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Mk(this.persistence,new Dk,e.initialUser,this.serializer)}Ga(e){return new kk(gp.Zr,this.serializer)}Wa(e){return new zk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}su.provider={build:()=>new su};class Of{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Iv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CV.bind(null,this.syncEngine),await lV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new cV}()}createDatastore(e){const n=Uu(e.databaseInfo.databaseId),r=function(s){return new Kk(s)}(e.databaseInfo);return function(s,o,a,l){return new Qk(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Xk(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Iv(this.syncEngine,n,0),function(){return Ev.D()?new Ev:new $k}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const f=new gV(i,s,o,a,l,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Z(i);H("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await oa(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Of.provider={build:()=>new Of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Mn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ht.UNAUTHENTICATED,this.clientId=B1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Sp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function oh(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Pv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await VV(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Tv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Tv(e.remoteStore,i)),t._onlineComponents=e}async function VV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await oh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Xi("Error using user provided cache. Falling back to memory cache: "+n),await oh(t,new su)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await oh(t,new su);return t._offlineComponents}async function LE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await Pv(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await Pv(t,new Of))),t._onlineComponents}function NV(t){return LE(t).then(e=>e.syncEngine)}async function ou(t){const e=await LE(t),n=e.eventManager;return n.onListen=yV.bind(null,e.syncEngine),n.onUnlisten=wV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=EV.bind(null,e.syncEngine),n}function DV(t,e,n={}){const r=new Pn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Rp({next:p=>{h.Za(),o.enqueueAndForget(()=>Ap(s,f));const g=p.docs.has(a);!g&&p.fromCache?c.reject(new K(F.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&l&&l.source==="server"?c.reject(new K(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Cp(Mu(a.path),h,{includeMetadataChanges:!0,_a:!0});return xp(s,f)}(await ou(t),t.asyncQueue,e,n,r)),r.promise}function bV(t,e,n={}){const r=new Pn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new Rp({next:p=>{h.Za(),o.enqueueAndForget(()=>Ap(s,f)),p.fromCache&&l.source==="server"?c.reject(new K(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Cp(a,h,{includeMetadataChanges:!0,_a:!0});return xp(s,f)}(await ou(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t,e,n){if(!n)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function MV(t,e,n,r){if(e===!0&&r===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kv(t){if(!Q.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Vv(t){if(Q.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Nt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=kp(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}MV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new JP;switch(r.type){case"firstParty":return new nR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Rv.get(n);r&&(H("ComponentProvider","Removing Datastore"),Rv.delete(n),r.terminate())}(this),Promise.resolve()}}function LV(t,e,n,r={}){var i;const s=(t=Nt(t,Wu))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ht.MOCK_USER;else{a=VC(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ht(c)}t._authCredentials=new ZP(new j1(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new la(this.firestore,e,this._query)}}class Et{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}}class fr extends la{constructor(e,n,r){super(e,n,Mu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new Q(e))}withConverter(e){return new fr(this.firestore,e,this._path)}}function ua(t,e,...n){if(t=Dn(t),FE("collection","path",e),t instanceof Wu){const r=xe.fromString(e,...n);return Vv(r),new fr(t,null,r)}{if(!(t instanceof Et||t instanceof fr))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return Vv(r),new fr(t.firestore,null,r)}}function ms(t,e,...n){if(t=Dn(t),arguments.length===1&&(e=B1.newId()),FE("doc","path",e),t instanceof Wu){const r=xe.fromString(e,...n);return kv(r),new Et(t,null,new Q(r))}{if(!(t instanceof Et||t instanceof fr))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(xe.fromString(e,...n));return kv(r),new Et(t.firestore,t instanceof fr?t.converter:null,new Q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new wE(this,"async_queue_retry"),this.Vu=()=>{const r=sh();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=sh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=sh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Pn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ra(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Mn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Tp.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function bv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class On extends Wu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Dv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dv(e),this._firestoreClient=void 0,await e}}}function OV(t,e){const n=typeof t=="object"?t:BP(),r=typeof t=="string"?t:"(default)",i=LP(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=RC("firestore");s&&LV(i,...s)}return i}function Hu(t){if(t._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||FV(t),t._firestoreClient}function FV(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new mR(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,OE(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new kV(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rs(it.fromBase64String(e))}catch(n){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rs(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=/^__.*__$/;class BV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ar(e,this.data,this.fieldMask,n,this.fieldTransforms):new ia(e,this.data,n,this.fieldTransforms)}}class jE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ar(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function BE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class bp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new bp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return au(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(BE(this.Cu)&&jV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class UV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uu(e)}Qu(e,n,r,i=!1){return new bp({Cu:e,methodName:n,qu:r,path:et.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mp(t){const e=t._freezeSettings(),n=Uu(t._databaseId);return new UV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function UE(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Lp("Data must be an object, but it was:",o,r);const a=zE(r,o);let l,c;if(s.merge)l=new Lt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const f of s.mergeFields){const p=Ff(e,f,n);if(!o.contains(p))throw new K(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);WE(h,p)||h.push(p)}l=new Lt(h),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new BV(new It(a),l,c)}class qu extends Vp{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qu}}function zV(t,e,n,r){const i=t.Qu(1,e,n);Lp("Data must be an object, but it was:",i,r);const s=[],o=It.empty();si(r,(l,c)=>{const h=Op(e,l,n);c=Dn(c);const f=i.Nu(h);if(c instanceof qu)s.push(h);else{const p=Gu(c,f);p!=null&&(s.push(h),o.set(h,p))}});const a=new Lt(s);return new jE(o,a,i.fieldTransforms)}function $V(t,e,n,r,i,s){const o=t.Qu(1,e,n),a=[Ff(e,r,n)],l=[i];if(s.length%2!=0)throw new K(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Ff(e,s[p])),l.push(s[p+1]);const c=[],h=It.empty();for(let p=a.length-1;p>=0;--p)if(!WE(c,a[p])){const g=a[p];let E=l[p];E=Dn(E);const S=o.Nu(g);if(E instanceof qu)c.push(g);else{const C=Gu(E,S);C!=null&&(c.push(g),h.set(g,C))}}const f=new Lt(c);return new jE(h,f,o.fieldTransforms)}function Gu(t,e){if($E(t=Dn(t)))return Lp("Unsupported field value:",e,t),zE(t,e);if(t instanceof Vp)return function(r,i){if(!BE(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Gu(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Dn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return FR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ke.fromDate(r);return{timestampValue:ru(i.serializer,s)}}if(r instanceof Ke){const s=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ru(i.serializer,s)}}if(r instanceof Np)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rs)return{bytesValue:hE(i.serializer,r._byteString)};if(r instanceof Et){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:pp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Dp)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return cp(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${kp(r)}`)}(t,e)}function zE(t,e){const n={};return U1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):si(t,(r,i)=>{const s=Gu(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function $E(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Np||t instanceof rs||t instanceof Et||t instanceof Vp||t instanceof Dp)}function Lp(t,e,n){if(!$E(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=kp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Ff(t,e,n){if((e=Dn(e))instanceof Ku)return e._internalPath;if(typeof e=="string")return Op(t,e);throw au("Field path arguments must be of type string or ",t,!1,void 0,n)}const WV=new RegExp("[~\\*/\\[\\]]");function Op(t,e,n){if(e.search(WV)>=0)throw au(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ku(...e.split("."))._internalPath}catch{throw au(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function au(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new K(F.INVALID_ARGUMENT,a+t+l)}function WE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(KE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HV extends HE{data(){return super.data()}}function KE(t,e){return typeof e=="string"?Op(t,e):e instanceof Ku?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KV{convertValue(e,n="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Oe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return si(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Oe(o.doubleValue));return new Dp(s)}convertGeoPoint(e){return new Np(Oe(e.latitude),Oe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=op(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fo(e));default:return null}}convertTimestamp(e){const n=gr(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=xe.fromString(e);de(yE(r));const i=new jo(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(n)||Mn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class QE extends HE{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new gl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(KE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class gl extends QE{data(e={}){return super.data(e)}}class YE{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Qs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new gl(this._firestore,this._userDataWriter,r.key,r,new Qs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new gl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new gl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:qV(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function qV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GV(t){t=Nt(t,Et);const e=Nt(t.firestore,On);return DV(Hu(e),t._key).then(n=>JE(e,t,n))}class Fp extends KV{constructor(e){super(),this.firestore=e}convertBytes(e){return new rs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function jp(t){t=Nt(t,la);const e=Nt(t.firestore,On),n=Hu(e),r=new Fp(e);return qE(t._query),bV(n,t._query).then(i=>new YE(e,r,t,i))}function QV(t,e,n){t=Nt(t,Et);const r=Nt(t.firestore,On),i=GE(t.converter,e,n);return Yu(r,[UE(Mp(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Gt.none())])}function YV(t,e,n,...r){t=Nt(t,Et);const i=Nt(t.firestore,On),s=Mp(i);let o;return o=typeof(e=Dn(e))=="string"||e instanceof Ku?$V(s,"updateDoc",t._key,e,n,r):zV(s,"updateDoc",t._key,e),Yu(i,[o.toMutation(t._key,Gt.exists(!0))])}function XE(t){return Yu(Nt(t.firestore,On),[new hp(t._key,Gt.none())])}function Qu(t,e){const n=Nt(t.firestore,On),r=ms(t),i=GE(t.converter,e);return Yu(n,[UE(Mp(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then(()=>r)}function Bp(t,...e){var n,r,i;t=Dn(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||bv(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(bv(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let l,c,h;if(t instanceof Et)c=Nt(t.firestore,On),h=Mu(t._key.path),l={next:f=>{e[o]&&e[o](JE(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Nt(t,la);c=Nt(f.firestore,On),h=f._query;const p=new Fp(c);l={next:g=>{e[o]&&e[o](new YE(c,p,f,g))},error:e[o+1],complete:e[o+2]},qE(t._query)}return function(p,g,E,S){const C=new Rp(S),w=new Cp(g,C,E);return p.asyncQueue.enqueueAndForget(async()=>xp(await ou(p),w)),()=>{C.Za(),p.asyncQueue.enqueueAndForget(async()=>Ap(await ou(p),w))}}(Hu(c),h,a,l)}function Yu(t,e){return function(r,i){const s=new Pn;return r.asyncQueue.enqueueAndForget(async()=>TV(await NV(r),i,s)),s.promise}(Hu(t),e)}function JE(t,e,n){const r=n.docs.get(e._key),i=new Fp(t);return new QE(t,i,e._key,r,new Qs(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){fs=i})(jP),Xl(new Mo("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new On(new eR(r.getProvider("auth-internal")),new iR(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jo(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ui(Jy,"4.7.3",e),Ui(Jy,"4.7.3","esm2017")})();const XV={apiKey:"AIzaSyDqxaUutYqyGsYfny_PUdrArV1VcJ432MI",authDomain:"syncserve-7a27b.firebaseapp.com",projectId:"syncserve-7a27b",storageBucket:"syncserve-7a27b.firebasestorage.app",messagingSenderId:"961632456350",appId:"1:961632456350:web:372b3e4deec94dd740358f",measurementId:"G-TNYB3MM0ZV"},JV=k1(XV),wn=OV(JV),Up=ua(wn,"tables"),zp=ua(wn,"menuItems"),ZE=ua(wn,"staff"),eT=ua(wn,"orders");ua(wn,"settings");const tT=async()=>{try{const t=ms(wn,"settings","appSettings"),e=await GV(t);return e.exists()?e.data():(console.warn("Settings document 'appSettings' not found."),null)}catch(t){throw console.error("Error fetching settings:",t),t}},ZV=async t=>{try{const e=ms(wn,"settings","appSettings");await QV(e,t,{merge:!0})}catch(e){throw console.error("Error updating settings:",e),e}},eN=async t=>{try{return{id:(await Qu(Up,{name:t,status:"available"})).id,name:t,status:"available"}}catch(e){throw console.error("Error adding table:",e),e}},nT=async()=>{try{return(await jp(Up)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error fetching tables:",t),t}},rT=(t,e)=>Bp(Up,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)},n=>{console.error("onTablesRealtime error:",n),e&&e(n)}),iT=async(t,e)=>{if(!t)throw new Error("updateTableStatus: tableId is required");try{const n=ms(wn,"tables",t);return await YV(n,{status:e}),!0}catch(n){throw console.error("Error updating table status:",n),n}},tN=async t=>{if(!t)throw new Error("deleteTable: tableId is required");try{return await XE(ms(wn,"tables",t)),!0}catch(e){throw console.error("Error deleting table:",e),e}},nN=async t=>{try{if(!t||!t.name||t.price==null)throw new Error("addMenuItem: item must have name and price");return{id:(await Qu(zp,t)).id,...t}}catch(e){throw console.error("Error adding menu item:",e),e}},$p=async()=>{try{return(await jp(zp)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error fetching menu items:",t),t}},rN=(t,e)=>Bp(zp,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)},n=>{console.error("onMenuItemsRealtime error:",n)}),iN=async t=>{try{return{id:(await Qu(ZE,{name:t})).id,name:t}}catch(e){throw console.error("Error adding staff:",e),e}},Wp=async()=>{try{return(await jp(ZE)).docs.map(e=>({id:e.id,...e.data()}))}catch(t){throw console.error("Error fetching staff:",t),t}},sN=async t=>{try{return{id:(await Qu(eT,t)).id,...t}}catch(e){throw console.error("Error adding order:",e),e}},oN=async t=>{if(!t)throw new Error("deleteOrder: orderId is required");try{return await XE(ms(wn,"orders",t)),!0}catch(e){throw console.error("Error deleting order:",e),e}},sT=(t,e)=>Bp(eT,n=>{const r=n.docs.map(i=>({id:i.id,...i.data()}));t(r)},n=>{console.error("onOrdersRealtime error:",n),e&&e(n)}),Xu=({isOpen:t,onClose:e,children:n})=>t?k.jsx("div",{className:"modal-overlay",children:k.jsxs("div",{className:"modal-content relative",children:[k.jsx("button",{onClick:e,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-700",children:k.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:k.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})}),n]})}):null,oT=D.createContext({});function aN(t){const e=D.useRef(null);return e.current===null&&(e.current=t()),e.current}const Hp=typeof window<"u",lN=Hp?D.useLayoutEffect:D.useEffect,Kp=D.createContext(null);function qp(t,e){t.indexOf(e)===-1&&t.push(e)}function Gp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Fn=(t,e,n)=>n>e?e:n<t?t:n;let Qp=()=>{};const jn={},aT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function lT(t){return typeof t=="object"&&t!==null}const uT=t=>/^0[^.\s]+$/u.test(t);function Yp(t){let e;return()=>(e===void 0&&(e=t()),e)}const Qt=t=>t,uN=(t,e)=>n=>e(t(n)),ca=(...t)=>t.reduce(uN),$o=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Xp{constructor(){this.subscriptions=[]}add(e){return qp(this.subscriptions,e),()=>Gp(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const mn=t=>t*1e3,gn=t=>t/1e3;function cT(t,e){return e?t*(1e3/e):0}const hT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,cN=1e-7,hN=12;function fN(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=hT(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>cN&&++a<hN);return o}function ha(t,e,n,r){if(t===e&&n===r)return Qt;const i=s=>fN(s,0,1,t,n);return s=>s===0||s===1?s:hT(i(s),e,r)}const fT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,dT=t=>e=>1-t(1-e),pT=ha(.33,1.53,.69,.99),Jp=dT(pT),mT=fT(Jp),gT=t=>(t*=2)<1?.5*Jp(t):.5*(2-Math.pow(2,-10*(t-1))),Zp=t=>1-Math.sin(Math.acos(t)),yT=dT(Zp),vT=fT(Zp),dN=ha(.42,0,1,1),pN=ha(0,0,.58,1),_T=ha(.42,0,.58,1),mN=t=>Array.isArray(t)&&typeof t[0]!="number",wT=t=>Array.isArray(t)&&typeof t[0]=="number",gN={linear:Qt,easeIn:dN,easeInOut:_T,easeOut:pN,circIn:Zp,circInOut:vT,circOut:yT,backIn:Jp,backInOut:mT,backOut:pT,anticipate:gT},yN=t=>typeof t=="string",Mv=t=>{if(wT(t)){Qp(t.length===4);const[e,n,r,i]=t;return ha(e,n,r,i)}else if(yN(t))return gN[t];return t},Xa=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],Lv={value:null};function vN(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(f){o.has(f)&&(h.schedule(f),t()),l++,f(a)}const h={schedule:(f,p=!1,g=!1)=>{const S=g&&i?n:r;return p&&o.add(f),S.has(f)||S.add(f),f},cancel:f=>{r.delete(f),o.delete(f)},process:f=>{if(a=f,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),e&&Lv.value&&Lv.value.frameloop[e].push(l),l=0,n.clear(),i=!1,s&&(s=!1,h.process(f))}};return h}const _N=40;function ET(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Xa.reduce((v,V)=>(v[V]=vN(s,e?V:void 0),v),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:h,update:f,preRender:p,render:g,postRender:E}=o,S=()=>{const v=jn.useManualTiming?i.timestamp:performance.now();n=!1,jn.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,_N),1)),i.timestamp=v,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),h.process(i),f.process(i),p.process(i),g.process(i),E.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(S))},C=()=>{n=!0,r=!0,i.isProcessing||t(S)};return{schedule:Xa.reduce((v,V)=>{const M=o[V];return v[V]=(O,A=!1,y=!1)=>(n||C(),M.schedule(O,A,y)),v},{}),cancel:v=>{for(let V=0;V<Xa.length;V++)o[Xa[V]].cancel(v)},state:i,steps:o}}const{schedule:Pe,cancel:vr,state:Je,steps:ah}=ET(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qt,!0);let yl;function wN(){yl=void 0}const Pt={now:()=>(yl===void 0&&Pt.set(Je.isProcessing||jn.useManualTiming?Je.timestamp:performance.now()),yl),set:t=>{yl=t,queueMicrotask(wN)}},TT=t=>e=>typeof e=="string"&&e.startsWith(t),em=TT("--"),EN=TT("var(--"),tm=t=>EN(t)?TN.test(t.split("/*")[0].trim()):!1,TN=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,gs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Wo={...gs,transform:t=>Fn(0,1,t)},Ja={...gs,default:1},co=t=>Math.round(t*1e5)/1e5,nm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function SN(t){return t==null}const xN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rm=(t,e)=>n=>!!(typeof n=="string"&&xN.test(n)&&n.startsWith(t)||e&&!SN(n)&&Object.prototype.hasOwnProperty.call(n,e)),ST=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(nm);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},AN=t=>Fn(0,255,t),lh={...gs,transform:t=>Math.round(AN(t))},Br={test:rm("rgb","red"),parse:ST("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+lh.transform(t)+", "+lh.transform(e)+", "+lh.transform(n)+", "+co(Wo.transform(r))+")"};function IN(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const jf={test:rm("#"),parse:IN,transform:Br.transform},fa=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Kn=fa("deg"),yn=fa("%"),Y=fa("px"),CN=fa("vh"),PN=fa("vw"),Ov={...yn,parse:t=>yn.parse(t)/100,transform:t=>yn.transform(t*100)},Ri={test:rm("hsl","hue"),parse:ST("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+yn.transform(co(e))+", "+yn.transform(co(n))+", "+co(Wo.transform(r))+")"},Be={test:t=>Br.test(t)||jf.test(t)||Ri.test(t),parse:t=>Br.test(t)?Br.parse(t):Ri.test(t)?Ri.parse(t):jf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Br.transform(t):Ri.transform(t),getAnimatableNone:t=>{const e=Be.parse(t);return e.alpha=0,Be.transform(e)}},RN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function kN(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(nm))==null?void 0:e.length)||0)+(((n=t.match(RN))==null?void 0:n.length)||0)>0}const xT="number",AT="color",VN="var",NN="var(",Fv="${}",DN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ho(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(DN,l=>(Be.test(l)?(r.color.push(s),i.push(AT),n.push(Be.parse(l))):l.startsWith(NN)?(r.var.push(s),i.push(VN),n.push(l)):(r.number.push(s),i.push(xT),n.push(parseFloat(l))),++s,Fv)).split(Fv);return{values:n,split:a,indexes:r,types:i}}function IT(t){return Ho(t).values}function CT(t){const{split:e,types:n}=Ho(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===xT?s+=co(i[o]):a===AT?s+=Be.transform(i[o]):s+=i[o]}return s}}const bN=t=>typeof t=="number"?0:Be.test(t)?Be.getAnimatableNone(t):t;function MN(t){const e=IT(t);return CT(t)(e.map(bN))}const _r={test:kN,parse:IT,createTransformer:CT,getAnimatableNone:MN};function uh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function LN({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=uh(l,a,t+1/3),s=uh(l,a,t),o=uh(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function lu(t,e){return n=>n>0?e:t}const Ie=(t,e,n)=>t+(e-t)*n,ch=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},ON=[jf,Br,Ri],FN=t=>ON.find(e=>e.test(t));function jv(t){const e=FN(t);if(!e)return!1;let n=e.parse(t);return e===Ri&&(n=LN(n)),n}const Bv=(t,e)=>{const n=jv(t),r=jv(e);if(!n||!r)return lu(t,e);const i={...n};return s=>(i.red=ch(n.red,r.red,s),i.green=ch(n.green,r.green,s),i.blue=ch(n.blue,r.blue,s),i.alpha=Ie(n.alpha,r.alpha,s),Br.transform(i))},Bf=new Set(["none","hidden"]);function jN(t,e){return Bf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function BN(t,e){return n=>Ie(t,e,n)}function im(t){return typeof t=="number"?BN:typeof t=="string"?tm(t)?lu:Be.test(t)?Bv:$N:Array.isArray(t)?PT:typeof t=="object"?Be.test(t)?Bv:UN:lu}function PT(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>im(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function UN(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=im(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function zN(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const $N=(t,e)=>{const n=_r.createTransformer(e),r=Ho(t),i=Ho(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Bf.has(t)&&!i.values.length||Bf.has(e)&&!r.values.length?jN(t,e):ca(PT(zN(r,i),i.values),n):lu(t,e)};function RT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ie(t,e,n):im(t)(t,e)}const WN=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Pe.update(e,n),stop:()=>vr(e),now:()=>Je.isProcessing?Je.timestamp:Pt.now()}},kT=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},uu=2e4;function sm(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<uu;)e+=n,r=t.next(e);return e>=uu?1/0:e}function HN(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(sm(r),uu);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:gn(i)}}const KN=5;function VT(t,e,n){const r=Math.max(e-KN,0);return cT(n-t(r),e-r)}const De={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},hh=.001;function qN({duration:t=De.duration,bounce:e=De.bounce,velocity:n=De.velocity,mass:r=De.mass}){let i,s,o=1-e;o=Fn(De.minDamping,De.maxDamping,o),t=Fn(De.minDuration,De.maxDuration,gn(t)),o<1?(i=c=>{const h=c*o,f=h*t,p=h-n,g=Uf(c,o),E=Math.exp(-f);return hh-p/g*E},s=c=>{const f=c*o*t,p=f*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,E=Math.exp(-f),S=Uf(Math.pow(c,2),o);return(-i(c)+hh>0?-1:1)*((p-g)*E)/S}):(i=c=>{const h=Math.exp(-c*t),f=(c-n)*t+1;return-hh+h*f},s=c=>{const h=Math.exp(-c*t),f=(n-c)*(t*t);return h*f});const a=5/t,l=QN(i,s,a);if(t=mn(t),isNaN(l))return{stiffness:De.stiffness,damping:De.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const GN=12;function QN(t,e,n){let r=n;for(let i=1;i<GN;i++)r=r-t(r)/e(r);return r}function Uf(t,e){return t*Math.sqrt(1-e*e)}const YN=["duration","bounce"],XN=["stiffness","damping","mass"];function Uv(t,e){return e.some(n=>t[n]!==void 0)}function JN(t){let e={velocity:De.velocity,stiffness:De.stiffness,damping:De.damping,mass:De.mass,isResolvedFromDuration:!1,...t};if(!Uv(t,XN)&&Uv(t,YN))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Fn(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:De.mass,stiffness:i,damping:s}}else{const n=qN(t);e={...e,...n,mass:De.mass},e.isResolvedFromDuration=!0}return e}function cu(t=De.visualDuration,e=De.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:f,velocity:p,isResolvedFromDuration:g}=JN({...n,velocity:-gn(n.velocity||0)}),E=p||0,S=c/(2*Math.sqrt(l*h)),C=o-s,w=gn(Math.sqrt(l/h)),_=Math.abs(C)<5;r||(r=_?De.restSpeed.granular:De.restSpeed.default),i||(i=_?De.restDelta.granular:De.restDelta.default);let v;if(S<1){const M=Uf(w,S);v=O=>{const A=Math.exp(-S*w*O);return o-A*((E+S*w*C)/M*Math.sin(M*O)+C*Math.cos(M*O))}}else if(S===1)v=M=>o-Math.exp(-w*M)*(C+(E+w*C)*M);else{const M=w*Math.sqrt(S*S-1);v=O=>{const A=Math.exp(-S*w*O),y=Math.min(M*O,300);return o-A*((E+S*w*C)*Math.sinh(y)+M*C*Math.cosh(y))/M}}const V={calculatedDuration:g&&f||null,next:M=>{const O=v(M);if(g)a.done=M>=f;else{let A=M===0?E:0;S<1&&(A=M===0?mn(E):VT(v,M,O));const y=Math.abs(A)<=r,x=Math.abs(o-O)<=i;a.done=y&&x}return a.value=a.done?o:O,a},toString:()=>{const M=Math.min(sm(V),uu),O=kT(A=>V.next(M*A).value,M,30);return M+"ms "+O},toTransition:()=>{}};return V}cu.applyToOptions=t=>{const e=HN(t,100,cu);return t.ease=e.ease,t.duration=mn(e.duration),t.type="keyframes",t};function zf({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const f=t[0],p={done:!1,value:f},g=y=>a!==void 0&&y<a||l!==void 0&&y>l,E=y=>a===void 0?l:l===void 0||Math.abs(a-y)<Math.abs(l-y)?a:l;let S=n*e;const C=f+S,w=o===void 0?C:o(C);w!==C&&(S=w-f);const _=y=>-S*Math.exp(-y/r),v=y=>w+_(y),V=y=>{const x=_(y),P=v(y);p.done=Math.abs(x)<=c,p.value=p.done?w:P};let M,O;const A=y=>{g(p.value)&&(M=y,O=cu({keyframes:[p.value,E(p.value)],velocity:VT(v,y,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return A(0),{calculatedDuration:null,next:y=>{let x=!1;return!O&&M===void 0&&(x=!0,V(y),A(y)),M!==void 0&&y>=M?O.next(y-M):(!x&&V(y),p)}}}function ZN(t,e,n){const r=[],i=n||jn.mix||RT,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Qt:e;a=ca(l,a)}r.push(a)}return r}function e4(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Qp(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=ZN(e,r,i),l=a.length,c=h=>{if(o&&h<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const p=$o(t[f],t[f+1],h);return a[f](p)};return n?h=>c(Fn(t[0],t[s-1],h)):c}function t4(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=$o(0,e,r);t.push(Ie(n,1,i))}}function n4(t){const e=[0];return t4(e,t.length-1),e}function r4(t,e){return t.map(n=>n*e)}function i4(t,e){return t.map(()=>e||_T).splice(0,t.length-1)}function ho({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=mN(r)?r.map(Mv):Mv(r),s={done:!1,value:e[0]},o=r4(n&&n.length===e.length?n:n4(e),t),a=e4(o,e,{ease:Array.isArray(i)?i:i4(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const s4=t=>t!==null;function om(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(s4),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const o4={decay:zf,inertia:zf,tween:ho,keyframes:ho,spring:cu};function NT(t){typeof t.type=="string"&&(t.type=o4[t.type])}class am{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const a4=t=>t/100;class lm extends am{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Pt.now()&&this.tick(Pt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;NT(e);const{type:n=ho,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||ho;l!==ho&&typeof a[0]!="number"&&(this.mixKeyframes=ca(a4,RT(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=sm(c));const{calculatedDuration:h}=c;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:h,repeat:f,repeatType:p,repeatDelay:g,type:E,onUpdate:S,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-c*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let v=this.currentTime,V=r;if(f){const y=Math.min(this.currentTime,i)/a;let x=Math.floor(y),P=y%1;!P&&y>=1&&(P=1),P===1&&x--,x=Math.min(x,f+1),!!(x%2)&&(p==="reverse"?(P=1-P,g&&(P-=g/a)):p==="mirror"&&(V=o)),v=Fn(0,1,P)*a}const M=_?{done:!1,value:h[0]}:V.next(v);s&&(M.value=s(M.value));let{done:O}=M;!_&&l!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return A&&E!==zf&&(M.value=om(h,this.options,C,this.speed)),S&&S(M.value),A&&this.finish(),M}then(e,n){return this.finished.then(e,n)}get duration(){return gn(this.calculatedDuration)}get time(){return gn(this.currentTime)}set time(e){var n;e=mn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Pt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=gn(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=WN,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function l4(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ur=t=>t*180/Math.PI,$f=t=>{const e=Ur(Math.atan2(t[1],t[0]));return Wf(e)},u4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:$f,rotateZ:$f,skewX:t=>Ur(Math.atan(t[1])),skewY:t=>Ur(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Wf=t=>(t=t%360,t<0&&(t+=360),t),zv=$f,$v=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Wv=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),c4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$v,scaleY:Wv,scale:t=>($v(t)+Wv(t))/2,rotateX:t=>Wf(Ur(Math.atan2(t[6],t[5]))),rotateY:t=>Wf(Ur(Math.atan2(-t[2],t[0]))),rotateZ:zv,rotate:zv,skewX:t=>Ur(Math.atan(t[4])),skewY:t=>Ur(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Hf(t){return t.includes("scale")?1:0}function Kf(t,e){if(!t||t==="none")return Hf(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=c4,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=u4,i=a}if(!i)return Hf(e);const s=r[e],o=i[1].split(",").map(f4);return typeof s=="function"?s(o):o[s]}const h4=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Kf(n,e)};function f4(t){return parseFloat(t.trim())}const ys=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vs=new Set(ys),Hv=t=>t===gs||t===Y,d4=new Set(["x","y","z"]),p4=ys.filter(t=>!d4.has(t));function m4(t){const e=[];return p4.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Hr={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Kf(e,"x"),y:(t,{transform:e})=>Kf(e,"y")};Hr.translateX=Hr.x;Hr.translateY=Hr.y;const Kr=new Set;let qf=!1,Gf=!1,Qf=!1;function DT(){if(Gf){const t=Array.from(Kr).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=m4(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Gf=!1,qf=!1,Kr.forEach(t=>t.complete(Qf)),Kr.clear()}function bT(){Kr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Gf=!0)})}function g4(){Qf=!0,bT(),DT(),Qf=!1}class um{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Kr.add(this),qf||(qf=!0,Pe.read(bT),Pe.resolveKeyframes(DT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}l4(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Kr.delete(this)}cancel(){this.state==="scheduled"&&(Kr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const y4=t=>t.startsWith("--");function v4(t,e,n){y4(e)?t.style.setProperty(e,n):t.style[e]=n}const _4=Yp(()=>window.ScrollTimeline!==void 0),w4={};function E4(t,e){const n=Yp(t);return()=>w4[e]??n()}const MT=E4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ys=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Kv={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ys([0,.65,.55,1]),circOut:Ys([.55,0,1,.45]),backIn:Ys([.31,.01,.66,-.59]),backOut:Ys([.33,1.53,.69,.99])};function LT(t,e){if(t)return typeof t=="function"?MT()?kT(t,e):"ease-out":wT(t)?Ys(t):Array.isArray(t)?t.map(n=>LT(n,e)||Kv.easeOut):Kv[t]}function T4(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const h={[e]:n};l&&(h.offset=l);const f=LT(a,i);Array.isArray(f)&&(h.easing=f);const p={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),t.animate(h,p)}function OT(t){return typeof t=="function"&&"applyToOptions"in t}function S4({type:t,...e}){return OT(t)&&MT()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class x4 extends am{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Qp(typeof e.type!="string");const c=S4(e);this.animation=T4(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=om(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):v4(n,r,h),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return gn(Number(e))}get time(){return gn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=mn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&_4()?(this.animation.timeline=e,Qt):n(this)}}const FT={anticipate:gT,backInOut:mT,circInOut:vT};function A4(t){return t in FT}function I4(t){typeof t.ease=="string"&&A4(t.ease)&&(t.ease=FT[t.ease])}const qv=10;class C4 extends x4{constructor(e){I4(e),NT(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new lm({...o,autoplay:!1}),l=mn(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-qv).value,a.sample(l).value,qv),a.stop()}}const Gv=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(_r.test(t)||t==="0")&&!t.startsWith("url("));function P4(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function R4(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Gv(i,e),a=Gv(s,e);return!o||!a?!1:P4(t)||(n==="spring"||OT(n))&&r}function jT(t){return lT(t)&&"offsetHeight"in t}const k4=new Set(["opacity","clipPath","filter","transform"]),V4=Yp(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function N4(t){var c;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!jT((c=e==null?void 0:e.owner)==null?void 0:c.current))return!1;const{onUpdate:a,transformTemplate:l}=e.owner.getProps();return V4()&&n&&k4.has(n)&&(n!=="transform"||!l)&&!a&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const D4=40;class b4 extends am{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:h,...f}){var E;super(),this.stop=()=>{var S,C;this._animation&&(this._animation.stop(),(S=this.stopTimeline)==null||S.call(this)),(C=this.keyframeResolver)==null||C.cancel()},this.createdAt=Pt.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:h,...f},g=(h==null?void 0:h.KeyframeResolver)||um;this.keyframeResolver=new g(a,(S,C,w)=>this.onKeyframesResolved(S,C,p,!w),l,c,h),(E=this.keyframeResolver)==null||E.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:h}=r;this.resolvedAt=Pt.now(),R4(e,s,o,a)||((jn.instantAnimations||!l)&&(h==null||h(om(e,r,n))),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>D4?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&N4(p)?new C4({...p,element:p.motionValue.owner.current}):new lm(p);g.finished.then(()=>this.notifyFinished()).catch(Qt),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),g4()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const M4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function L4(t){const e=M4.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function BT(t,e,n=1){const[r,i]=L4(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return aT(o)?parseFloat(o):o}return tm(i)?BT(i,e,n+1):i}function cm(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const UT=new Set(["width","height","top","left","right","bottom",...ys]),O4={test:t=>t==="auto",parse:t=>t},zT=t=>e=>e.test(t),$T=[gs,Y,yn,Kn,PN,CN,O4],Qv=t=>$T.find(zT(t));function F4(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||uT(t):!0}const j4=new Set(["brightness","contrast","saturate","opacity"]);function B4(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(nm)||[];if(!r)return t;const i=n.replace(r,"");let s=j4.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const U4=/\b([a-z-]*)\(.*?\)/gu,Yf={..._r,getAnimatableNone:t=>{const e=t.match(U4);return e?e.map(B4).join(" "):t}},Yv={...gs,transform:Math.round},z4={rotate:Kn,rotateX:Kn,rotateY:Kn,rotateZ:Kn,scale:Ja,scaleX:Ja,scaleY:Ja,scaleZ:Ja,skew:Kn,skewX:Kn,skewY:Kn,distance:Y,translateX:Y,translateY:Y,translateZ:Y,x:Y,y:Y,z:Y,perspective:Y,transformPerspective:Y,opacity:Wo,originX:Ov,originY:Ov,originZ:Y},hm={borderWidth:Y,borderTopWidth:Y,borderRightWidth:Y,borderBottomWidth:Y,borderLeftWidth:Y,borderRadius:Y,radius:Y,borderTopLeftRadius:Y,borderTopRightRadius:Y,borderBottomRightRadius:Y,borderBottomLeftRadius:Y,width:Y,maxWidth:Y,height:Y,maxHeight:Y,top:Y,right:Y,bottom:Y,left:Y,padding:Y,paddingTop:Y,paddingRight:Y,paddingBottom:Y,paddingLeft:Y,margin:Y,marginTop:Y,marginRight:Y,marginBottom:Y,marginLeft:Y,backgroundPositionX:Y,backgroundPositionY:Y,...z4,zIndex:Yv,fillOpacity:Wo,strokeOpacity:Wo,numOctaves:Yv},$4={...hm,color:Be,backgroundColor:Be,outlineColor:Be,fill:Be,stroke:Be,borderColor:Be,borderTopColor:Be,borderRightColor:Be,borderBottomColor:Be,borderLeftColor:Be,filter:Yf,WebkitFilter:Yf},WT=t=>$4[t];function HT(t,e){let n=WT(t);return n!==Yf&&(n=_r),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const W4=new Set(["auto","none","0"]);function H4(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!W4.has(s)&&Ho(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=HT(n,i)}class K4 extends um{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),tm(c))){const h=BT(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!UT.has(r)||e.length!==2)return;const[i,s]=e,o=Qv(i),a=Qv(s);if(o!==a)if(Hv(o)&&Hv(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Hr[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||F4(e[i]))&&r.push(i);r.length&&H4(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Hr[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Hr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function q4(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const KT=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Xv=30,G4=t=>!isNaN(parseFloat(t));class Q4{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{var o,a;const s=Pt.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&((a=this.events.renderRequest)==null||a.notify(this.current))},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Pt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=G4(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Xp);const r=this.events[e].add(n);return e==="change"?()=>{r(),Pe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Pt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Xv)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Xv);return cT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function is(t,e){return new Q4(t,e)}const{schedule:fm}=ET(queueMicrotask,!1),en={x:!1,y:!1};function qT(){return en.x||en.y}function Y4(t){return t==="x"||t==="y"?en[t]?null:(en[t]=!0,()=>{en[t]=!1}):en.x||en.y?null:(en.x=en.y=!0,()=>{en.x=en.y=!1})}function GT(t,e){const n=q4(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Jv(t){return!(t.pointerType==="touch"||qT())}function X4(t,e,n={}){const[r,i,s]=GT(t,n),o=a=>{if(!Jv(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const h=f=>{Jv(f)&&(c(f),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const QT=(t,e)=>e?t===e?!0:QT(t,e.parentElement):!1,dm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,J4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Z4(t){return J4.has(t.tagName)||t.tabIndex!==-1}const vl=new WeakSet;function Zv(t){return e=>{e.key==="Enter"&&t(e)}}function fh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const eD=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Zv(()=>{if(vl.has(n))return;fh(n,"down");const i=Zv(()=>{fh(n,"up")}),s=()=>fh(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function e0(t){return dm(t)&&!qT()}function tD(t,e,n={}){const[r,i,s]=GT(t,n),o=a=>{const l=a.currentTarget;if(!e0(a))return;vl.add(l);const c=e(l,a),h=(g,E)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),vl.has(l)&&vl.delete(l),e0(g)&&typeof c=="function"&&c(g,{success:E})},f=g=>{h(g,l===window||l===document||n.useGlobalTarget||QT(l,g.target))},p=g=>{h(g,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),jT(a)&&(a.addEventListener("focus",c=>eD(c,i)),!Z4(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function YT(t){return lT(t)&&"ownerSVGElement"in t}function nD(t){return YT(t)&&t.tagName==="svg"}const pt=t=>!!(t&&t.getVelocity),rD=[...$T,Be,_r],iD=t=>rD.find(zT(t)),XT=D.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function sD(t=!0){const e=D.useContext(Kp);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=D.useId();D.useEffect(()=>{if(t)return i(s)},[t]);const o=D.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const JT=D.createContext({strict:!1}),t0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ss={};for(const t in t0)ss[t]={isEnabled:e=>t0[t].some(n=>!!e[n])};function oD(t){for(const e in t)ss[e]={...ss[e],...t[e]}}const aD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function hu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||aD.has(t)}let ZT=t=>!hu(t);function lD(t){typeof t=="function"&&(ZT=e=>e.startsWith("on")?!hu(e):t(e))}try{lD(require("@emotion/is-prop-valid").default)}catch{}function uD(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(ZT(i)||n===!0&&hu(i)||!e&&!hu(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function cD(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const Ju=D.createContext({});function Zu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ko(t){return typeof t=="string"||Array.isArray(t)}const pm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mm=["initial",...pm];function ec(t){return Zu(t.animate)||mm.some(e=>Ko(t[e]))}function eS(t){return!!(ec(t)||t.variants)}function hD(t,e){if(ec(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ko(n)?n:void 0,animate:Ko(r)?r:void 0}}return t.inherit!==!1?e:{}}function fD(t){const{initial:e,animate:n}=hD(t,D.useContext(Ju));return D.useMemo(()=>({initial:e,animate:n}),[n0(e),n0(n)])}function n0(t){return Array.isArray(t)?t.join(" "):t}const dD=Symbol.for("motionComponentSymbol");function ki(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function pD(t,e,n){return D.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):ki(n)&&(n.current=r))},[e])}const gm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mD="framerAppearId",tS="data-"+gm(mD),nS=D.createContext({});function gD(t,e,n,r,i){var S,C;const{visualElement:s}=D.useContext(Ju),o=D.useContext(JT),a=D.useContext(Kp),l=D.useContext(XT).reducedMotion,c=D.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=c.current,f=D.useContext(nS);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&yD(c.current,n,i,f);const p=D.useRef(!1);D.useInsertionEffect(()=>{h&&p.current&&h.update(n,a)});const g=n[tS],E=D.useRef(!!g&&!((S=window.MotionHandoffIsComplete)!=null&&S.call(window,g))&&((C=window.MotionHasOptimisedAnimation)==null?void 0:C.call(window,g)));return lN(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),fm.render(h.render),E.current&&h.animationState&&h.animationState.animateChanges())}),D.useEffect(()=>{h&&(!E.current&&h.animationState&&h.animationState.animateChanges(),E.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,g)}),E.current=!1))}),h}function yD(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:rS(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&ki(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:l,layoutRoot:c})}function rS(t){if(t)return t.options.allowProjection!==!1?t.projection:rS(t.parent)}function vD({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&oD(t);function s(a,l){let c;const h={...D.useContext(XT),...a,layoutId:_D(a)},{isStatic:f}=h,p=fD(a),g=r(a,f);if(!f&&Hp){wD();const E=ED(h);c=E.MeasureLayout,p.visualElement=gD(i,g,h,e,E.ProjectionNode)}return k.jsxs(Ju.Provider,{value:p,children:[c&&p.visualElement?k.jsx(c,{visualElement:p.visualElement,...h}):null,n(i,a,pD(g,p.visualElement,l),g,f,p.visualElement)]})}s.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const o=D.forwardRef(s);return o[dD]=i,o}function _D({layoutId:t}){const e=D.useContext(oT).id;return e&&t!==void 0?e+"-"+t:t}function wD(t,e){D.useContext(JT).strict}function ED(t){const{drag:e,layout:n}=ss;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const qo={};function TD(t){for(const e in t)qo[e]=t[e],em(e)&&(qo[e].isCSSVariable=!0)}function iS(t,{layout:e,layoutId:n}){return vs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!qo[t]||t==="opacity")}const SD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xD=ys.length;function AD(t,e,n){let r="",i=!0;for(let s=0;s<xD;s++){const o=ys[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=KT(a,hm[o]);if(!l){i=!1;const h=SD[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function ym(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(vs.has(l)){o=!0;continue}else if(em(l)){i[l]=c;continue}else{const h=KT(c,hm[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=AD(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${c} ${h}`}}const vm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function sS(t,e,n){for(const r in e)!pt(e[r])&&!iS(r,n)&&(t[r]=e[r])}function ID({transformTemplate:t},e){return D.useMemo(()=>{const n=vm();return ym(n,e,t),Object.assign({},n.vars,n.style)},[e])}function CD(t,e){const n=t.style||{},r={};return sS(r,n,t),Object.assign(r,ID(t,e)),r}function PD(t,e){const n={},r=CD(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const RD={offset:"stroke-dashoffset",array:"stroke-dasharray"},kD={offset:"strokeDashoffset",array:"strokeDasharray"};function VD(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?RD:kD;t[s.offset]=Y.transform(-r);const o=Y.transform(e),a=Y.transform(n);t[s.array]=`${o} ${a}`}function oS(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,h){if(ym(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p}=t;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&VD(f,i,s,o,!1)}const aS=()=>({...vm(),attrs:{}}),lS=t=>typeof t=="string"&&t.toLowerCase()==="svg";function ND(t,e,n,r){const i=D.useMemo(()=>{const s=aS();return oS(s,e,lS(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};sS(s,t.style,t),i.style={...s,...i.style}}return i}const DD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _m(t){return typeof t!="string"||t.includes("-")?!1:!!(DD.indexOf(t)>-1||/[A-Z]/u.test(t))}function bD(t=!1){return(n,r,i,{latestValues:s},o)=>{const l=(_m(n)?ND:PD)(r,s,o,n),c=uD(r,typeof n=="string",t),h=n!==D.Fragment?{...c,...l,ref:i}:{},{children:f}=r,p=D.useMemo(()=>pt(f)?f.get():f,[f]);return D.createElement(n,{...h,children:p})}}function r0(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function wm(t,e,n,r){if(typeof e=="function"){const[i,s]=r0(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=r0(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function _l(t){return pt(t)?t.get():t}function MD({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:LD(n,r,i,t),renderState:e()}}const uS=t=>(e,n)=>{const r=D.useContext(Ju),i=D.useContext(Kp),s=()=>MD(t,e,r,i);return n?s():aN(s)};function LD(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=_l(s[p]);let{initial:o,animate:a}=t;const l=ec(t),c=eS(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!Zu(f)){const p=Array.isArray(f)?f:[f];for(let g=0;g<p.length;g++){const E=wm(t,p[g]);if(E){const{transitionEnd:S,transition:C,...w}=E;for(const _ in w){let v=w[_];if(Array.isArray(v)){const V=h?v.length-1:0;v=v[V]}v!==null&&(i[_]=v)}for(const _ in S)i[_]=S[_]}}}return i}function Em(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(pt(r[o])||e.style&&pt(e.style[o])||iS(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const OD={useVisualState:uS({scrapeMotionValuesFromProps:Em,createRenderState:vm})};function cS(t,e,n){const r=Em(t,e,n);for(const i in t)if(pt(t[i])||pt(e[i])){const s=ys.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const FD={useVisualState:uS({scrapeMotionValuesFromProps:cS,createRenderState:aS})};function jD(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const o={..._m(r)?FD:OD,preloadedFeatures:t,useRender:bD(i),createVisualElement:e,Component:r};return vD(o)}}function Go(t,e,n){const r=t.getProps();return wm(r,e,n!==void 0?n:r.custom,t)}const Xf=t=>Array.isArray(t);function BD(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,is(n))}function UD(t){return Xf(t)?t[t.length-1]||0:t}function zD(t,e){const n=Go(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=UD(s[o]);BD(t,o,a)}}function $D(t){return!!(pt(t)&&t.add)}function Jf(t,e){const n=t.getValue("willChange");if($D(n))return n.add(e);if(!n&&jn.WillChange){const r=new jn.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function hS(t){return t.props[tS]}const WD=t=>t!==null;function HD(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(WD),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const KD={type:"spring",stiffness:500,damping:25,restSpeed:10},qD=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),GD={type:"keyframes",duration:.8},QD={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},YD=(t,{keyframes:e})=>e.length>2?GD:vs.has(t)?t.startsWith("scale")?qD(e[1]):KD:QD;function XD({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const Tm=(t,e,n,r={},i,s)=>o=>{const a=cm(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-mn(l);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};XD(a)||Object.assign(h,YD(t,h)),h.duration&&(h.duration=mn(h.duration)),h.repeatDelay&&(h.repeatDelay=mn(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(h.duration=0,h.delay===0&&(f=!0)),(jn.instantAnimations||jn.skipAnimations)&&(f=!0,h.duration=0,h.delay=0),h.allowFlatten=!a.type&&!a.ease,f&&!s&&e.get()!==void 0){const p=HD(h.keyframes,a);if(p!==void 0){Pe.update(()=>{h.onUpdate(p),h.onComplete()});return}}return a.isSync?new lm(h):new b4(h)};function JD({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function fS(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const f=t.getValue(h,t.latestValues[h]??null),p=a[h];if(p===void 0||c&&JD(c,h))continue;const g={delay:n,...cm(s||{},h)},E=f.get();if(E!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===E&&!g.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const w=hS(t);if(w){const _=window.MotionHandoffAnimation(w,h,Pe);_!==null&&(g.startTime=_,S=!0)}}Jf(t,h),f.start(Tm(h,f,p,t.shouldReduceMotion&&UT.has(h)?{type:!1}:g,t,S));const C=f.animation;C&&l.push(C)}return o&&Promise.all(l).then(()=>{Pe.update(()=>{o&&zD(t,o)})}),l}function Zf(t,e,n={}){var l;const r=Go(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(fS(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=i;return ZD(t,e,h+c,f,p,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,h]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function ZD(t,e,n=0,r=0,i=1,s){const o=[],a=(t.variantChildren.size-1)*r,l=i===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(eb).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(Zf(c,e,{...s,delay:n+l(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function eb(t,e){return t.sortNodePosition(e)}function tb(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Zf(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Zf(t,e,n);else{const i=typeof e=="function"?Go(t,e,n.custom):e;r=Promise.all(fS(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function dS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const nb=mm.length;function pS(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?pS(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<nb;n++){const r=mm[n],i=t.props[r];(Ko(i)||i===!1)&&(e[r]=i)}return e}const rb=[...pm].reverse(),ib=pm.length;function sb(t){return e=>Promise.all(e.map(({animation:n,options:r})=>tb(t,n,r)))}function ob(t){let e=sb(t),n=i0(),r=!0;const i=l=>(c,h)=>{var p;const f=Go(t,h,l==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(f){const{transition:g,transitionEnd:E,...S}=f;c={...c,...S,...E}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,h=pS(t.parent)||{},f=[],p=new Set;let g={},E=1/0;for(let C=0;C<ib;C++){const w=rb[C],_=n[w],v=c[w]!==void 0?c[w]:h[w],V=Ko(v),M=w===l?_.isActive:null;M===!1&&(E=C);let O=v===h[w]&&v!==c[w]&&V;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),_.protectedKeys={...g},!_.isActive&&M===null||!v&&!_.prevProp||Zu(v)||typeof v=="boolean")continue;const A=ab(_.prevProp,v);let y=A||w===l&&_.isActive&&!O&&V||C>E&&V,x=!1;const P=Array.isArray(v)?v:[v];let R=P.reduce(i(w),{});M===!1&&(R={});const{prevResolvedValues:N={}}=_,I={...N,...R},ee=q=>{y=!0,p.has(q)&&(x=!0,p.delete(q)),_.needsAnimating[q]=!0;const B=t.getValue(q);B&&(B.liveStyle=!1)};for(const q in I){const B=R[q],W=N[q];if(g.hasOwnProperty(q))continue;let G=!1;Xf(B)&&Xf(W)?G=!dS(B,W):G=B!==W,G?B!=null?ee(q):p.add(q):B!==void 0&&p.has(q)?ee(q):_.protectedKeys[q]=!0}_.prevProp=v,_.prevResolvedValues=R,_.isActive&&(g={...g,...R}),r&&t.blockInitialAnimation&&(y=!1),y&&(!(O&&A)||x)&&f.push(...P.map(q=>({animation:q,options:{type:w}})))}if(p.size){const C={};if(typeof c.initial!="boolean"){const w=Go(t,Array.isArray(c.initial)?c.initial[0]:c.initial);w&&w.transition&&(C.transition=w.transition)}p.forEach(w=>{const _=t.getBaseTarget(w),v=t.getValue(w);v&&(v.liveStyle=!0),C[w]=_??null}),f.push({animation:C})}let S=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(S=!1),r=!1,S?e(f):Promise.resolve()}function a(l,c){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=i0(),r=!0}}}function ab(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!dS(e,t):!1}function Vr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function i0(){return{animate:Vr(!0),whileInView:Vr(),whileHover:Vr(),whileTap:Vr(),whileDrag:Vr(),whileFocus:Vr(),exit:Vr()}}class Ir{constructor(e){this.isMounted=!1,this.node=e}update(){}}class lb extends Ir{constructor(e){super(e),e.animationState||(e.animationState=ob(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Zu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let ub=0;class cb extends Ir{constructor(){super(...arguments),this.id=ub++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const hb={animation:{Feature:lb},exit:{Feature:cb}};function Qo(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function da(t){return{point:{x:t.pageX,y:t.pageY}}}const fb=t=>e=>dm(e)&&t(e,da(e));function fo(t,e,n,r){return Qo(t,e,fb(n),r)}function mS({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function db({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function pb(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const gS=1e-4,mb=1-gS,gb=1+gS,yS=.01,yb=0-yS,vb=0+yS;function _t(t){return t.max-t.min}function _b(t,e,n){return Math.abs(t-e)<=n}function s0(t,e,n,r=.5){t.origin=r,t.originPoint=Ie(e.min,e.max,t.origin),t.scale=_t(n)/_t(e),t.translate=Ie(n.min,n.max,t.origin)-t.originPoint,(t.scale>=mb&&t.scale<=gb||isNaN(t.scale))&&(t.scale=1),(t.translate>=yb&&t.translate<=vb||isNaN(t.translate))&&(t.translate=0)}function po(t,e,n,r){s0(t.x,e.x,n.x,r?r.originX:void 0),s0(t.y,e.y,n.y,r?r.originY:void 0)}function o0(t,e,n){t.min=n.min+e.min,t.max=t.min+_t(e)}function wb(t,e,n){o0(t.x,e.x,n.x),o0(t.y,e.y,n.y)}function a0(t,e,n){t.min=e.min-n.min,t.max=t.min+_t(e)}function mo(t,e,n){a0(t.x,e.x,n.x),a0(t.y,e.y,n.y)}const l0=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vi=()=>({x:l0(),y:l0()}),u0=()=>({min:0,max:0}),Le=()=>({x:u0(),y:u0()});function $t(t){return[t("x"),t("y")]}function dh(t){return t===void 0||t===1}function ed({scale:t,scaleX:e,scaleY:n}){return!dh(t)||!dh(e)||!dh(n)}function Mr(t){return ed(t)||vS(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function vS(t){return c0(t.x)||c0(t.y)}function c0(t){return t&&t!=="0%"}function fu(t,e,n){const r=t-n,i=e*r;return n+i}function h0(t,e,n,r,i){return i!==void 0&&(t=fu(t,i,r)),fu(t,n,r)+e}function td(t,e=0,n=1,r,i){t.min=h0(t.min,e,n,r,i),t.max=h0(t.max,e,n,r,i)}function _S(t,{x:e,y:n}){td(t.x,e.translate,e.scale,e.originPoint),td(t.y,n.translate,n.scale,n.originPoint)}const f0=.999999999999,d0=1.0000000000001;function Eb(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Di(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,_S(t,o)),r&&Mr(s.latestValues)&&Di(t,s.latestValues))}e.x<d0&&e.x>f0&&(e.x=1),e.y<d0&&e.y>f0&&(e.y=1)}function Ni(t,e){t.min=t.min+e,t.max=t.max+e}function p0(t,e,n,r,i=.5){const s=Ie(t.min,t.max,i);td(t,e,n,s,r)}function Di(t,e){p0(t.x,e.x,e.scaleX,e.scale,e.originX),p0(t.y,e.y,e.scaleY,e.scale,e.originY)}function wS(t,e){return mS(pb(t.getBoundingClientRect(),e))}function Tb(t,e,n){const r=wS(t,n),{scroll:i}=e;return i&&(Ni(r.x,i.offset.x),Ni(r.y,i.offset.y)),r}const ES=({current:t})=>t?t.ownerDocument.defaultView:null,m0=(t,e)=>Math.abs(t-e);function Sb(t,e){const n=m0(t.x,e.x),r=m0(t.y,e.y);return Math.sqrt(n**2+r**2)}class TS{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=mh(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=Sb(f.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:E}=f,{timestamp:S}=Je;this.history.push({...E,timestamp:S});const{onStart:C,onMove:w}=this.handlers;p||(C&&C(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=ph(p,this.transformPagePoint),Pe.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:E,resumeAnimation:S}=this.handlers;if(this.dragSnapToOrigin&&S&&S(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=mh(f.type==="pointercancel"?this.lastMoveEventInfo:ph(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,C),E&&E(f,C)},!dm(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const o=da(e),a=ph(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Je;this.history=[{...l,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,mh(a,this.history)),this.removeListeners=ca(fo(this.contextWindow,"pointermove",this.handlePointerMove),fo(this.contextWindow,"pointerup",this.handlePointerUp),fo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vr(this.updatePoint)}}function ph(t,e){return e?{point:e(t.point)}:t}function g0(t,e){return{x:t.x-e.x,y:t.y-e.y}}function mh({point:t},e){return{point:t,delta:g0(t,SS(e)),offset:g0(t,xb(e)),velocity:Ab(e,.1)}}function xb(t){return t[0]}function SS(t){return t[t.length-1]}function Ab(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=SS(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>mn(e)));)n--;if(!r)return{x:0,y:0};const s=gn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Ib(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ie(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ie(n,t,r.max):Math.min(t,n)),t}function y0(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Cb(t,{top:e,left:n,bottom:r,right:i}){return{x:y0(t.x,n,i),y:y0(t.y,e,r)}}function v0(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Pb(t,e){return{x:v0(t.x,e.x),y:v0(t.y,e.y)}}function Rb(t,e){let n=.5;const r=_t(t),i=_t(e);return i>r?n=$o(e.min,e.max-r,t.min):r>i&&(n=$o(t.min,t.max-i,e.min)),Fn(0,1,n)}function kb(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const nd=.35;function Vb(t=nd){return t===!1?t=0:t===!0&&(t=nd),{x:_0(t,"left","right"),y:_0(t,"top","bottom")}}function _0(t,e,n){return{min:w0(t,e),max:w0(t,n)}}function w0(t,e){return typeof t=="number"?t:t[e]||0}const Nb=new WeakMap;class Db{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Le(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(da(h).point)},s=(h,f)=>{const{drag:p,dragPropagation:g,onDragStart:E}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Y4(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$t(C=>{let w=this.getAxisMotionValue(C).get()||0;if(yn.test(w)){const{projection:_}=this.visualElement;if(_&&_.layout){const v=_.layout.layoutBox[C];v&&(w=_t(v)*(parseFloat(w)/100))}}this.originPoint[C]=w}),E&&Pe.postRender(()=>E(h,f)),Jf(this.visualElement,"transform");const{animationState:S}=this.visualElement;S&&S.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:E,onDrag:S}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:C}=f;if(g&&this.currentDirection===null){this.currentDirection=bb(C),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",f.point,C),this.updateAxis("y",f.point,C),this.visualElement.render(),S&&S(h,f)},a=(h,f)=>this.stop(h,f),l=()=>$t(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new TS(e,{onSessionStart:i,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:ES(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:s}=this.getProps();s&&Pe.postRender(()=>s(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Za(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=Ib(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&ki(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Cb(r.layoutBox,e):this.constraints=!1,this.elastic=Vb(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&$t(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=kb(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ki(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Tb(r,i.root,this.visualElement.getTransformPagePoint());let o=Pb(i.layout.layoutBox,s);if(n){const a=n(db(o));this.hasMutatedConstraints=!!a,a&&(o=mS(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=$t(h=>{if(!Za(h,n,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,E={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,E)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Jf(this.visualElement,e),r.start(Tm(e,r,0,n,this.visualElement,!1))}stopAnimation(){$t(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$t(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){$t(n=>{const{drag:r}=this.getProps();if(!Za(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-Ie(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!ki(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};$t(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=Rb({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),$t(o=>{if(!Za(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Ie(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;Nb.set(this.visualElement,this);const e=this.visualElement.current,n=fo(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();ki(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Pe.read(r);const o=Qo(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&($t(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=nd,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Za(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function bb(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Mb extends Ir{constructor(e){super(e),this.removeGroupControls=Qt,this.removeListeners=Qt,this.controls=new Db(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qt}unmount(){this.removeGroupControls(),this.removeListeners()}}const E0=t=>(e,n)=>{t&&Pe.postRender(()=>t(e,n))};class Lb extends Ir{constructor(){super(...arguments),this.removePointerDownListener=Qt}onPointerDown(e){this.session=new TS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ES(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:E0(e),onStart:E0(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Pe.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=fo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const wl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function T0(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Us={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Y.test(t))t=parseFloat(t);else return t;const n=T0(t,e.target.x),r=T0(t,e.target.y);return`${n}% ${r}%`}},Ob={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=_r.parse(t);if(i.length>5)return r;const s=_r.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=Ie(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};class Fb extends D.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;TD(jb),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),wl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Pe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),fm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function xS(t){const[e,n]=sD(),r=D.useContext(oT);return k.jsx(Fb,{...t,layoutGroup:r,switchLayoutGroup:D.useContext(nS),isPresent:e,safeToRemove:n})}const jb={borderRadius:{...Us,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Us,borderTopRightRadius:Us,borderBottomLeftRadius:Us,borderBottomRightRadius:Us,boxShadow:Ob};function Bb(t,e,n){const r=pt(t)?t:is(t);return r.start(Tm("",r,e,n)),r.animation}const Ub=(t,e)=>t.depth-e.depth;class zb{constructor(){this.children=[],this.isDirty=!1}add(e){qp(this.children,e),this.isDirty=!0}remove(e){Gp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Ub),this.isDirty=!1,this.children.forEach(e)}}function $b(t,e){const n=Pt.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(vr(r),t(s-e))};return Pe.setup(r,!0),()=>vr(r)}const AS=["TopLeft","TopRight","BottomLeft","BottomRight"],Wb=AS.length,S0=t=>typeof t=="string"?parseFloat(t):t,x0=t=>typeof t=="number"||Y.test(t);function Hb(t,e,n,r,i,s){i?(t.opacity=Ie(0,n.opacity??1,Kb(r)),t.opacityExit=Ie(e.opacity??1,0,qb(r))):s&&(t.opacity=Ie(e.opacity??1,n.opacity??1,r));for(let o=0;o<Wb;o++){const a=`border${AS[o]}Radius`;let l=A0(e,a),c=A0(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||x0(l)===x0(c)?(t[a]=Math.max(Ie(S0(l),S0(c),r),0),(yn.test(c)||yn.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Ie(e.rotate||0,n.rotate||0,r))}function A0(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Kb=IS(0,.5,yT),qb=IS(.5,.95,Qt);function IS(t,e,n){return r=>r<t?0:r>e?1:n($o(t,e,r))}function I0(t,e){t.min=e.min,t.max=e.max}function zt(t,e){I0(t.x,e.x),I0(t.y,e.y)}function C0(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function P0(t,e,n,r,i){return t-=e,t=fu(t,1/n,r),i!==void 0&&(t=fu(t,1/i,r)),t}function Gb(t,e=0,n=1,r=.5,i,s=t,o=t){if(yn.test(e)&&(e=parseFloat(e),e=Ie(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ie(s.min,s.max,r);t===s&&(a-=e),t.min=P0(t.min,e,n,a,i),t.max=P0(t.max,e,n,a,i)}function R0(t,e,[n,r,i],s,o){Gb(t,e[n],e[r],e[i],e.scale,s,o)}const Qb=["x","scaleX","originX"],Yb=["y","scaleY","originY"];function k0(t,e,n,r){R0(t.x,e,Qb,n?n.x:void 0,r?r.x:void 0),R0(t.y,e,Yb,n?n.y:void 0,r?r.y:void 0)}function V0(t){return t.translate===0&&t.scale===1}function CS(t){return V0(t.x)&&V0(t.y)}function N0(t,e){return t.min===e.min&&t.max===e.max}function Xb(t,e){return N0(t.x,e.x)&&N0(t.y,e.y)}function D0(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function PS(t,e){return D0(t.x,e.x)&&D0(t.y,e.y)}function b0(t){return _t(t.x)/_t(t.y)}function M0(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Jb{constructor(){this.members=[]}add(e){qp(this.members,e),e.scheduleRender()}remove(e){if(Gp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Zb(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:f,rotateY:p,skewX:g,skewY:E}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),E&&(r+=`skewY(${E}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const gh=["","X","Y","Z"],eM={visibility:"hidden"},tM=1e3;let nM=0;function yh(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function RS(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=hS(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Pe,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&RS(r)}function kS({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=nM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(sM),this.nodes.forEach(cM),this.nodes.forEach(hM),this.nodes.forEach(oM)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new zb)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Xp),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=YT(o)&&!nD(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let h;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=$b(f,250),wl.hasAnimatedSinceResize&&(wl.hasAnimatedSinceResize=!1,this.nodes.forEach(O0))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const E=this.options.transition||c.getDefaultTransition()||gM,{onLayoutAnimationStart:S,onLayoutAnimationComplete:C}=c.getProps(),w=!this.targetLayout||!PS(this.targetLayout,g),_=!f&&p;if(this.options.layoutRoot||this.resumeFrom||_||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...cm(E,"layout"),onPlay:S,onComplete:C};(c.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(h,_)}else f||O0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(fM),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&RS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(L0);return}this.isUpdating||this.nodes.forEach(lM),this.isUpdating=!1,this.nodes.forEach(uM),this.nodes.forEach(rM),this.nodes.forEach(iM),this.clearAllSnapshots();const a=Pt.now();Je.delta=Fn(0,1e3/60,a-Je.timestamp),Je.timestamp=a,Je.isProcessing=!0,ah.update.process(Je),ah.preRender.process(Je),ah.render.process(Je),Je.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,fm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(aM),this.sharedNodes.forEach(dM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!_t(this.snapshot.measuredBox.x)&&!_t(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Le(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!CS(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||Mr(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),yM(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Le();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(vM))){const{scroll:h}=this.root;h&&(Ni(a.x,h.offset.x),Ni(a.y,h.offset.y))}return a}removeElementScroll(o){var l;const a=Le();if(zt(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&zt(a,o),Ni(a.x,f.offset.x),Ni(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=Le();zt(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Di(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Mr(h.latestValues)&&Di(l,h.latestValues)}return Mr(this.latestValues)&&Di(l,this.latestValues),l}removeTransform(o){const a=Le();zt(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Mr(c.latestValues))continue;ed(c.latestValues)&&c.updateSnapshot();const h=Le(),f=c.measurePageBox();zt(h,f),k0(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Mr(this.latestValues)&&k0(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Je.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Je.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Le(),this.relativeTargetOrigin=Le(),mo(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Le(),this.targetWithTransforms=Le()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wb(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):zt(this.target,this.layout.layoutBox),_S(this.target,this.targetDelta)):zt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Le(),this.relativeTargetOrigin=Le(),mo(this.relativeTargetOrigin,this.target,g.target),zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ed(this.parent.latestValues)||vS(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var E;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Je.timestamp&&(l=!1),l)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;zt(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;Eb(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Le());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(C0(this.prevProjectionDelta.x,this.projectionDelta.x),C0(this.prevProjectionDelta.y,this.projectionDelta.y)),po(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!M0(this.projectionDelta.x,this.prevProjectionDelta.x)||!M0(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vi(),this.projectionDelta=Vi(),this.projectionDeltaWithTransform=Vi()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},f=Vi();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=Le(),g=l?l.source:void 0,E=this.layout?this.layout.source:void 0,S=g!==E,C=this.getStack(),w=!C||C.members.length<=1,_=!!(S&&!w&&this.options.crossfade===!0&&!this.path.some(mM));this.animationProgress=0;let v;this.mixTargetDelta=V=>{const M=V/1e3;F0(f.x,o.x,M),F0(f.y,o.y,M),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mo(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),pM(this.relativeTarget,this.relativeTargetOrigin,p,M),v&&Xb(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=Le()),zt(v,this.relativeTarget)),S&&(this.animationValues=h,Hb(h,c,this.latestValues,M,_,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(vr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pe.update(()=>{wl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=is(0)),this.currentAnimation=Bb(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tM),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&VS(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Le();const f=_t(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=_t(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}zt(a,l),Di(a,h),po(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Jb),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&yh("z",o,c,this.animationValues);for(let h=0;h<gh.length;h++)yh(`rotate${gh[h]}`,o,c,this.animationValues),yh(`skew${gh[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}getProjectionStyles(o){if(!this.instance||this.isSVG)return;if(!this.isVisible)return eM;const a={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,a.opacity="",a.pointerEvents=_l(o==null?void 0:o.pointerEvents)||"",a.transform=l?l(this.latestValues,""):"none",a;const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=_l(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Mr(this.latestValues)&&(g.transform=l?l({},""):"none",this.hasProjected=!1),g}const h=c.animationValues||c.latestValues;this.applyTransformsToTarget(),a.transform=Zb(this.projectionDeltaWithTransform,this.treeScale,h),l&&(a.transform=l(h,a.transform));const{x:f,y:p}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,c.animationValues?a.opacity=c===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:a.opacity=c===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const g in qo){if(h[g]===void 0)continue;const{correct:E,applyTo:S,isCSSVariable:C}=qo[g],w=a.transform==="none"?h[g]:E(h[g],c);if(S){const _=S.length;for(let v=0;v<_;v++)a[S[v]]=w}else C?this.options.visualElement.renderState.vars[g]=w:a[g]=w}return this.options.layoutId&&(a.pointerEvents=c===this?_l(o==null?void 0:o.pointerEvents)||"":"none"),a}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(L0),this.root.sharedNodes.clear()}}}function rM(t){t.updateLayout()}function iM(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?$t(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],g=_t(p);p.min=r[f].min,p.max=p.min+g}):VS(s,e.layoutBox,r)&&$t(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],g=_t(r[f]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const a=Vi();po(a,r,e.layoutBox);const l=Vi();o?po(l,t.applyTransform(i,!0),e.measuredBox):po(l,r,e.layoutBox);const c=!CS(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:g}=f;if(p&&g){const E=Le();mo(E,e.layoutBox,p.layoutBox);const S=Le();mo(S,r,g.layoutBox),PS(E,S)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=S,t.relativeTargetOrigin=E,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function sM(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function oM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function aM(t){t.clearSnapshot()}function L0(t){t.clearMeasurements()}function lM(t){t.isLayoutDirty=!1}function uM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function O0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function cM(t){t.resolveTargetDelta()}function hM(t){t.calcProjection()}function fM(t){t.resetSkewAndRotation()}function dM(t){t.removeLeadSnapshot()}function F0(t,e,n){t.translate=Ie(e.translate,0,n),t.scale=Ie(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function j0(t,e,n,r){t.min=Ie(e.min,n.min,r),t.max=Ie(e.max,n.max,r)}function pM(t,e,n,r){j0(t.x,e.x,n.x,r),j0(t.y,e.y,n.y,r)}function mM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const gM={duration:.45,ease:[.4,0,.1,1]},B0=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),U0=B0("applewebkit/")&&!B0("chrome/")?Math.round:Qt;function z0(t){t.min=U0(t.min),t.max=U0(t.max)}function yM(t){z0(t.x),z0(t.y)}function VS(t,e,n){return t==="position"||t==="preserve-aspect"&&!_b(b0(e),b0(n),.2)}function vM(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const _M=kS({attachResizeListener:(t,e)=>Qo(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),vh={current:void 0},NS=kS({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!vh.current){const t=new _M({});t.mount(window),t.setOptions({layoutScroll:!0}),vh.current=t}return vh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),wM={pan:{Feature:Lb},drag:{Feature:Mb,ProjectionNode:NS,MeasureLayout:xS}};function $0(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Pe.postRender(()=>s(e,da(e)))}class EM extends Ir{mount(){const{current:e}=this.node;e&&(this.unmount=X4(e,(n,r)=>($0(this.node,r,"Start"),i=>$0(this.node,i,"End"))))}unmount(){}}class TM extends Ir{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ca(Qo(this.node.current,"focus",()=>this.onFocus()),Qo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function W0(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Pe.postRender(()=>s(e,da(e)))}class SM extends Ir{mount(){const{current:e}=this.node;e&&(this.unmount=tD(e,(n,r)=>(W0(this.node,r,"Start"),(i,{success:s})=>W0(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const rd=new WeakMap,_h=new WeakMap,xM=t=>{const e=rd.get(t.target);e&&e(t)},AM=t=>{t.forEach(xM)};function IM({root:t,...e}){const n=t||document;_h.has(n)||_h.set(n,{});const r=_h.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(AM,{root:t,...e})),r[i]}function CM(t,e,n){const r=IM(e);return rd.set(t,n),r.observe(t),()=>{rd.delete(t),r.unobserve(t)}}const PM={some:0,all:1};class RM extends Ir{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:PM[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=c?h:f;p&&p(l)};return CM(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(kM(e,n))&&this.startObserver()}unmount(){}}function kM({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const VM={inView:{Feature:RM},tap:{Feature:SM},focus:{Feature:TM},hover:{Feature:EM}},NM={layout:{ProjectionNode:NS,MeasureLayout:xS}},id={current:null},DS={current:!1};function DM(){if(DS.current=!0,!!Hp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>id.current=t.matches;t.addListener(e),e()}else id.current=!1}const bM=new WeakMap;function MM(t,e,n){for(const r in e){const i=e[r],s=n[r];if(pt(i))t.addValue(r,i);else if(pt(s))t.addValue(r,is(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,is(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const H0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class LM{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=um,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Pt.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Pe.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=ec(n),this.isVariantNode=eS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const g=f[p];l[p]!==void 0&&pt(g)&&g.set(l[p],!1)}}mount(e){this.current=e,bM.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),DS.current||DM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:id.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),vr(this.notifyUpdate),vr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=vs.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Pe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),s=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ss){const n=ss[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Le()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<H0.length;r++){const i=H0[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=MM(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=is(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(aT(r)||uT(r))?r=parseFloat(r):!iD(r)&&_r.test(n)&&(r=HT(e,n)),this.setBaseTarget(e,pt(r)?r.get():r)),pt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=wm(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!pt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Xp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class bS extends LM{constructor(){super(...arguments),this.KeyframeResolver=K4}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function MS(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const s in n)t.style.setProperty(s,n[s])}function OM(t){return window.getComputedStyle(t)}class FM extends bS{constructor(){super(...arguments),this.type="html",this.renderInstance=MS}readValueFromInstance(e,n){var r;if(vs.has(n))return(r=this.projection)!=null&&r.isProjecting?Hf(n):h4(e,n);{const i=OM(e),s=(em(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return wS(e,n)}build(e,n,r){ym(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Em(e,n,r)}}const LS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function jM(t,e,n,r){MS(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(LS.has(i)?i:gm(i),e.attrs[i])}class BM extends bS{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Le}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(vs.has(n)){const r=WT(n);return r&&r.default||0}return n=LS.has(n)?n:gm(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return cS(e,n,r)}build(e,n,r){oS(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){jM(e,n,r,i)}mount(e){this.isSVGTag=lS(e.tagName),super.mount(e)}}const UM=(t,e)=>_m(t)?new BM(e):new FM(e,{allowProjection:t!==D.Fragment}),zM=jD({...hb,...VM,...wM,...NM},UM),K0=cD(zM),$M=600,WM=300,q0=({table:t,isAddButton:e,onClick:n,onDoubleClick:r,onLongPress:i,onDelete:s})=>{const o=D.useRef(null),a=D.useRef(null),l=D.useRef(0),[c,h]=D.useState(!1),f=D.useRef(null);D.useEffect(()=>{const w=_=>{f.current&&!f.current.contains(_.target)&&h(!1)};return document.addEventListener("mousedown",w),()=>{document.removeEventListener("mousedown",w)}},[]);const p=w=>{i&&(a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{i(),clearTimeout(a.current),a.current=null},$M))},g=()=>{a.current&&(clearTimeout(a.current),a.current=null)};D.useEffect(()=>{const w=o.current;if(!w)return;const _=v=>{var O;g();const V=Date.now(),M=V-(l.current||0);if(M>0&&M<=WM){v.preventDefault(),(O=v.stopPropagation)==null||O.call(v),r==null||r(),l.current=0;return}l.current=V};return w.addEventListener("touchend",_,{passive:!1}),()=>{w.removeEventListener("touchend",_),g()}},[r]),D.useEffect(()=>()=>g(),[]);const E=w=>{w.stopPropagation(),h(_=>!_)},S=w=>{w.stopPropagation(),s==null||s(),h(!1)};if(e)return k.jsx(K0.button,{onClick:n,whileHover:{scale:1.03},whileTap:{scale:.97},className:"h-40 rounded-2xl border-2 border-dashed border-gray-300 flex items-center justify-center transition hover:border-blue-500 hover:text-blue-600 bg-white shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Add Table",children:k.jsx("span",{className:"text-gray-500 font-medium text-lg",children:"+ Add Table"})});const C=(t==null?void 0:t.status)==="occupied";return k.jsxs(K0.div,{ref:o,role:"button",tabIndex:0,whileHover:{scale:1.02},whileTap:{scale:.98},onDoubleClick:()=>r==null?void 0:r(),onKeyDown:w=>{w.key==="Enter"&&(r==null||r())},onTouchStart:p,onTouchEnd:g,onTouchCancel:g,onTouchMove:g,className:`relative h-40 rounded-2xl shadow-md hover:shadow-lg transition cursor-pointer flex flex-col items-center justify-center border p-4
        ${C?"bg-green-100 border-green-400 text-green-900":"bg-white border-gray-200 text-gray-800"}`,"aria-pressed":C,children:[s&&k.jsxs("div",{ref:f,className:"absolute top-1 right-1 z-10",children:[k.jsx("button",{onClick:E,className:"p-2 rounded-full hover:bg-black/10 transition-colors","aria-label":"Table options",children:k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:k.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),c&&k.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5",children:k.jsx("div",{className:"py-1",children:k.jsxs("button",{onClick:S,className:"w-full text-left px-4 py-2 text-sm text-red-700 hover:bg-red-50 hover:text-red-800 flex items-center gap-2",children:[k.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:k.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm4 0a1 1 0 012 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})}),"Delete Table"]})})})]}),(t==null?void 0:t.status)&&k.jsx("div",{className:`absolute top-2 left-2 h-3 w-3 rounded-full ${t.status==="available"?"bg-green-500":t.status==="occupied"?"bg-green-700":"bg-yellow-400"}`,title:t.status}),k.jsx("span",{className:"text-xl font-semibold",children:(t==null?void 0:t.name)??"Table"}),(t==null?void 0:t.status)&&k.jsx("span",{className:"text-sm mt-1 capitalize",children:t.status})]})},HM=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!1),[i,s]=D.useState(""),[o,a]=D.useState(!0),l=g1();D.useEffect(()=>{a(!0);const p=rT(g=>{e(g||[]),a(!1)},g=>{console.error("Error fetching tables in real-time:",g),a(!1)});return()=>p()},[]);const c=p=>{p&&l(`/order?tableId=${encodeURIComponent(p)}`)},h=async()=>{const p=i.trim();if(p)try{await eN(p),s(""),r(!1)}catch(g){console.error("Error adding table:",g),alert("Failed to add table.")}},f=async p=>{if(!p)return;if(window.confirm("Are you sure you want to delete this table? This action cannot be undone."))try{await tN(p)}catch(E){console.error("Error deleting table:",E),alert("Failed to delete table. Please try again.")}};return k.jsxs("div",{className:"min-h-screen bg-gray-100 px-4 py-8 md:px-8",children:[k.jsxs("div",{className:"max-w-6xl mx-auto",children:[k.jsxs("header",{className:"mb-8",children:[k.jsx("h1",{className:"text-4xl font-semibold text-gray-900",children:"Tables"}),k.jsx("p",{className:"text-gray-600 mt-2",children:"Manage all your restaurant tables from here."})]}),o?k.jsx("div",{className:"text-gray-500 mb-6",children:"Loading tables..."}):null,k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-6",children:[[...t].sort((p,g)=>{const E=parseInt(p.name.replace(/\D/g,""),10)||0,S=parseInt(g.name.replace(/\D/g,""),10)||0;return E-S}).map(p=>{const g=p.id??p._id??p.name;return k.jsx(q0,{table:p,onDoubleClick:()=>c(p.id??p._id),onLongPress:()=>c(p.id??p._id),onDelete:()=>f(p.id??p._id)},g)}),k.jsx(q0,{isAddButton:!0,onClick:()=>r(!0)})]})]}),k.jsx(Xu,{isOpen:n,onClose:()=>r(!1),children:k.jsxs("div",{className:"p-4",children:[k.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Add New Table"}),k.jsx("input",{type:"text",value:i,onChange:p=>s(p.target.value),placeholder:"Enter table name (e.g. T1)",className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 mb-4",onKeyDown:p=>{p.key==="Enter"&&h()}}),k.jsxs("div",{className:"flex justify-end gap-2",children:[k.jsx("button",{onClick:()=>{s(""),r(!1)},className:"px-4 py-2 rounded-lg border",children:"Cancel"}),k.jsx("button",{onClick:h,className:"bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 transition",children:"Done"})]})]})})]})},OS=({item:t,quantity:e,onQuantityChange:n})=>{var r;return t?k.jsxs("div",{className:"card border rounded-lg shadow-md p-4 bg-white flex flex-col",children:[k.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:t.name}),k.jsxs("p",{className:"text-gray-700 font-semibold mb-2",children:["",(r=t.price)==null?void 0:r.toFixed(2)]}),t.ingredients&&k.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[k.jsx("span",{className:"font-medium",children:"Ingredients:"})," ",t.ingredients]}),t.specialNote&&k.jsx("p",{className:"text-xs italic text-gray-500 mb-3",children:t.specialNote}),k.jsxs("div",{className:"mt-auto flex items-center gap-2",children:[k.jsx("button",{onClick:()=>n(Math.max(0,e-1)),className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300",children:"-"}),k.jsx("span",{className:"px-2",children:e}),k.jsx("button",{onClick:()=>n(e+1),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700",children:"+"})]})]}):null},KM=()=>{var O,A;const[t,e]=D.useState([]),[n,r]=D.useState([]),[i,s]=D.useState([]),[o,a]=D.useState(""),[l,c]=D.useState(""),[h,f]=D.useState(!0),[p,g]=D.useState({}),[E,S]=D.useState(!1),[C,w]=D.useState(!1),_=cs();D.useEffect(()=>{let y=!0;return(async()=>{S(!0);try{const[P,R,N]=await Promise.all([nT(),Wp(),$p()]);if(!y)return;e(P||[]),r(R||[]),s(N||[]);const ee=new URLSearchParams(_.search).get("tableId");ee&&(a(ee),f(!0)),R&&R.length>0&&!l&&c(R[0].id??R[0]._id??"")}catch(P){console.error("Error fetching order data:",P),alert("Failed to load order data. Please try again.")}finally{S(!1)}})(),()=>{y=!1}},[_.search]);const v=(y,x)=>{g(P=>{const R={...P};return!x||x<=0?delete R[y]:R[y]=x,R})},V=i.reduce((y,x)=>{const P=p[x.id]||0;return y+(x.price||0)*P},0),M=async()=>{if(!o){alert("Please select a table before submitting the order."),f(!0);return}if(!(Object.keys(p).length===0&&!confirm("You have no items in the order. Submit empty order?"))){w(!0);try{const y=Object.entries(p).map(([P,R])=>({itemId:P,quantity:R})),x={tableId:o,staffId:l||null,items:y,total:V,createdAt:new Date().toISOString()};await sN(x);try{await iT(o,"occupied")}catch(P){console.error("Failed to update table status:",P)}window.dispatchEvent(new CustomEvent("tablesUpdated")),alert("Order submitted successfully!"),g({}),c(""),f(!1)}catch(y){console.error("Error submitting order:",y),alert("Failed to submit order. Try again.")}finally{w(!1)}}};return k.jsxs("div",{className:"container mx-auto py-6",children:[k.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Place Order"}),k.jsxs(Xu,{isOpen:h,onClose:()=>f(!1),children:[k.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Select Table and Staff"}),k.jsx("label",{className:"block text-sm font-medium mb-1",children:"Table"}),k.jsxs("select",{value:o,onChange:y=>a(y.target.value),className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[k.jsx("option",{value:"",children:"Select Table"}),t.map(y=>k.jsx("option",{value:y.id??y._id,children:y.name},y.id??y._id??y.name))]}),k.jsx("label",{className:"block text-sm font-medium mb-1",children:"Staff (optional)"}),k.jsxs("select",{value:l,onChange:y=>c(y.target.value),className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[k.jsx("option",{value:"",children:"Select Staff (Optional)"}),n.map(y=>k.jsx("option",{value:y.id??y._id,children:y.name},y.id??y._id))]}),k.jsx("div",{className:"flex justify-end",children:k.jsx("button",{onClick:()=>f(!1),disabled:!o,className:`px-4 py-2 rounded-lg transition-colors ${o?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-600"}`,children:"Done"})})]}),E&&k.jsx("div",{className:"text-gray-500 mb-4",children:"Loading menu & data..."}),o?k.jsxs("div",{className:"mb-4 p-4 bg-white rounded shadow flex items-center justify-between",children:[k.jsxs("div",{children:[k.jsx("div",{className:"text-lg font-medium text-gray-800",children:((O=t.find(y=>(y.id??y._id)===o))==null?void 0:O.name)||"Selected Table"}),k.jsxs("div",{className:"text-sm text-gray-500",children:["Staff:"," ",((A=n.find(y=>(y.id??y._id)===l))==null?void 0:A.name)||"Not assigned"]})]}),k.jsx("div",{children:k.jsx("button",{onClick:()=>f(!0),className:"px-3 py-2 bg-gray-100 rounded border hover:bg-gray-200",children:"Change"})})]}):null,k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mb-6",children:i.map(y=>k.jsx(OS,{item:y,quantity:p[y.id]||0,onQuantityChange:x=>v(y.id??y._id,x)},y.id??y._id))}),k.jsxs("div",{className:"bg-white shadow rounded-lg p-4 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[k.jsxs("div",{className:"text-xl font-semibold text-gray-800",children:["Total: ",V.toFixed(2)]}),k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("button",{onClick:()=>f(!0),className:"px-3 py-2 rounded border hover:bg-gray-50",children:"Select Table / Staff"}),k.jsx("button",{onClick:M,disabled:C||!o,className:`px-4 py-2 rounded-lg transition-colors ${o?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-600 cursor-not-allowed"}`,children:C?"Submitting...":"Submit Order"})]})]})]})},qM=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!1),[i,s]=D.useState({name:"",price:"",ingredients:"",specialNote:""});D.useEffect(()=>{const l=rN(c=>{e(c)});return()=>l()},[]);const o=l=>{const{name:c,value:h}=l.target;s(f=>({...f,[c]:h}))},a=async()=>{if(!i.name||!i.price){alert("Item name and price are required.");return}try{const l=parseFloat(i.price);if(isNaN(l)){alert("Price must be a valid number.");return}const c={...i,price:l},h=await nN(c);console.log("Added Item:",h),s({name:"",price:"",ingredients:"",specialNote:""}),r(!1)}catch(l){console.error("Error adding menu item:",l),alert("Failed to add menu item.")}};return k.jsxs("div",{className:"container mx-auto",children:[k.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Menu"}),k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[k.jsx("button",{onClick:()=>r(!0),className:"card border-2 border-dashed border-gray-400 flex items-center justify-center h-40",children:k.jsx("span",{className:"text-gray-500 font-medium",children:"+ Add Item"})}),t.map(l=>k.jsx(OS,{item:l,quantity:0,onQuantityChange:()=>{}},l.id))]}),k.jsxs(Xu,{isOpen:n,onClose:()=>r(!1),children:[k.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Add New Menu Item"}),k.jsx("input",{type:"text",name:"name",value:i.name,onChange:o,placeholder:"Item Name",className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),k.jsx("input",{type:"text",name:"price",value:i.price,onChange:o,placeholder:"Price (with GST)",className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),k.jsx("input",{type:"text",name:"ingredients",value:i.ingredients,onChange:o,placeholder:"Ingredients (comma-separated)",className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),k.jsx("textarea",{name:"specialNote",value:i.specialNote,onChange:o,placeholder:"Special Note (optional)",className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),k.jsx("div",{className:"flex justify-end",children:k.jsx("button",{onClick:a,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Done"})})]})]})},GM=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!1),[i,s]=D.useState("");D.useEffect(()=>{(async()=>{try{const l=await Wp();e(l)}catch(l){console.error("Error loading staff:",l)}})()},[]);const o=async()=>{if(i.trim())try{const a=await iN(i);e([...t,a]),s(""),r(!1)}catch(a){console.error("Error adding staff:",a),alert("Failed to add staff member.")}else alert("Staff name is required.")};return k.jsxs("div",{className:"container mx-auto",children:[k.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Staff"}),k.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[k.jsx("button",{onClick:()=>r(!0),className:"card border-2 border-dashed border-gray-400 flex items-center justify-center h-40",children:k.jsx("span",{className:"text-gray-500 font-medium",children:"+ Add Staff"})}),t.map(a=>k.jsx("div",{className:"card flex items-center justify-center h-40",children:k.jsx("span",{className:"text-xl font-semibold text-gray-800",children:a.name})},a.id))]}),k.jsxs(Xu,{isOpen:n,onClose:()=>r(!1),children:[k.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Add New Staff"}),k.jsx("input",{type:"text",value:i,onChange:a=>s(a.target.value),placeholder:"Enter staff name",className:"w-full p-2 mb-4 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),k.jsx("div",{className:"flex justify-end",children:k.jsx("button",{onClick:o,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Done"})})]})]})},QM=()=>{const[t,e]=D.useState([]),[n,r]=D.useState([]),[i,s]=D.useState([]);D.useEffect(()=>{(async()=>{try{const[h,f]=await Promise.all([nT(),$p()]);r(h||[]),s(f||[])}catch(h){console.error("Error fetching tables or menu items:",h)}})();const c=sT(h=>{const f=h.map(p=>({...p,createdAt:new Date(p.createdAt)})).sort((p,g)=>g.createdAt-p.createdAt);e(f)},h=>console.error("Realtime orders error:",h));return()=>c()},[]);const o=l=>{const c=n.find(h=>(h.id??h._id)===l);return c?c.name:"Unknown"},a=l=>{const c=i.find(h=>(h.id??h._id)===l);return c?c.name:"Unknown"};return k.jsxs("div",{className:"container mx-auto py-6",children:[k.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Kitchen Orders"}),t.length===0?k.jsx("p",{className:"text-gray-600",children:"No orders currently."}):k.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:t.map(l=>k.jsxs("div",{className:"bg-white p-4 rounded shadow",children:[k.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:["Table: ",o(l.tableId)]}),k.jsx("ul",{className:"text-gray-600 mb-2",children:l.items.map((c,h)=>k.jsxs("li",{children:[a(c.itemId)," x ",c.quantity]},h))}),k.jsxs("p",{className:"text-gray-800 font-semibold",children:["Total: ",l.total.toFixed(2)]}),l.staffId&&k.jsxs("p",{className:"text-sm text-gray-500",children:["Staff ID: ",l.staffId]})]},l.id))})]})};var YM=Object.defineProperty,du=Object.getOwnPropertySymbols,FS=Object.prototype.hasOwnProperty,jS=Object.prototype.propertyIsEnumerable,G0=(t,e,n)=>e in t?YM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,sd=(t,e)=>{for(var n in e||(e={}))FS.call(e,n)&&G0(t,n,e[n]);if(du)for(var n of du(e))jS.call(e,n)&&G0(t,n,e[n]);return t},od=(t,e)=>{var n={};for(var r in t)FS.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&du)for(var r of du(t))e.indexOf(r)<0&&jS.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ti;(t=>{const e=class ne{constructor(l,c,h,f){if(this.version=l,this.errorCorrectionLevel=c,this.modules=[],this.isFunction=[],l<ne.MIN_VERSION||l>ne.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=l*4+17;let p=[];for(let E=0;E<this.size;E++)p.push(!1);for(let E=0;E<this.size;E++)this.modules.push(p.slice()),this.isFunction.push(p.slice());this.drawFunctionPatterns();const g=this.addEccAndInterleave(h);if(this.drawCodewords(g),f==-1){let E=1e9;for(let S=0;S<8;S++){this.applyMask(S),this.drawFormatBits(S);const C=this.getPenaltyScore();C<E&&(f=S,E=C),this.applyMask(S)}}i(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(l,c){const h=t.QrSegment.makeSegments(l);return ne.encodeSegments(h,c)}static encodeBinary(l,c){const h=t.QrSegment.makeBytes(l);return ne.encodeSegments([h],c)}static encodeSegments(l,c,h=1,f=40,p=-1,g=!0){if(!(ne.MIN_VERSION<=h&&h<=f&&f<=ne.MAX_VERSION)||p<-1||p>7)throw new RangeError("Invalid value");let E,S;for(E=h;;E++){const v=ne.getNumDataCodewords(E,c)*8,V=o.getTotalBits(l,E);if(V<=v){S=V;break}if(E>=f)throw new RangeError("Data too long")}for(const v of[ne.Ecc.MEDIUM,ne.Ecc.QUARTILE,ne.Ecc.HIGH])g&&S<=ne.getNumDataCodewords(E,v)*8&&(c=v);let C=[];for(const v of l){n(v.mode.modeBits,4,C),n(v.numChars,v.mode.numCharCountBits(E),C);for(const V of v.getData())C.push(V)}i(C.length==S);const w=ne.getNumDataCodewords(E,c)*8;i(C.length<=w),n(0,Math.min(4,w-C.length),C),n(0,(8-C.length%8)%8,C),i(C.length%8==0);for(let v=236;C.length<w;v^=253)n(v,8,C);let _=[];for(;_.length*8<C.length;)_.push(0);return C.forEach((v,V)=>_[V>>>3]|=v<<7-(V&7)),new ne(E,c,_,p)}getModule(l,c){return 0<=l&&l<this.size&&0<=c&&c<this.size&&this.modules[c][l]}getModules(){return this.modules}drawFunctionPatterns(){for(let h=0;h<this.size;h++)this.setFunctionModule(6,h,h%2==0),this.setFunctionModule(h,6,h%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const l=this.getAlignmentPatternPositions(),c=l.length;for(let h=0;h<c;h++)for(let f=0;f<c;f++)h==0&&f==0||h==0&&f==c-1||h==c-1&&f==0||this.drawAlignmentPattern(l[h],l[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(l){const c=this.errorCorrectionLevel.formatBits<<3|l;let h=c;for(let p=0;p<10;p++)h=h<<1^(h>>>9)*1335;const f=(c<<10|h)^21522;i(f>>>15==0);for(let p=0;p<=5;p++)this.setFunctionModule(8,p,r(f,p));this.setFunctionModule(8,7,r(f,6)),this.setFunctionModule(8,8,r(f,7)),this.setFunctionModule(7,8,r(f,8));for(let p=9;p<15;p++)this.setFunctionModule(14-p,8,r(f,p));for(let p=0;p<8;p++)this.setFunctionModule(this.size-1-p,8,r(f,p));for(let p=8;p<15;p++)this.setFunctionModule(8,this.size-15+p,r(f,p));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let l=this.version;for(let h=0;h<12;h++)l=l<<1^(l>>>11)*7973;const c=this.version<<12|l;i(c>>>18==0);for(let h=0;h<18;h++){const f=r(c,h),p=this.size-11+h%3,g=Math.floor(h/3);this.setFunctionModule(p,g,f),this.setFunctionModule(g,p,f)}}drawFinderPattern(l,c){for(let h=-4;h<=4;h++)for(let f=-4;f<=4;f++){const p=Math.max(Math.abs(f),Math.abs(h)),g=l+f,E=c+h;0<=g&&g<this.size&&0<=E&&E<this.size&&this.setFunctionModule(g,E,p!=2&&p!=4)}}drawAlignmentPattern(l,c){for(let h=-2;h<=2;h++)for(let f=-2;f<=2;f++)this.setFunctionModule(l+f,c+h,Math.max(Math.abs(f),Math.abs(h))!=1)}setFunctionModule(l,c,h){this.modules[c][l]=h,this.isFunction[c][l]=!0}addEccAndInterleave(l){const c=this.version,h=this.errorCorrectionLevel;if(l.length!=ne.getNumDataCodewords(c,h))throw new RangeError("Invalid argument");const f=ne.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][c],p=ne.ECC_CODEWORDS_PER_BLOCK[h.ordinal][c],g=Math.floor(ne.getNumRawDataModules(c)/8),E=f-g%f,S=Math.floor(g/f);let C=[];const w=ne.reedSolomonComputeDivisor(p);for(let v=0,V=0;v<f;v++){let M=l.slice(V,V+S-p+(v<E?0:1));V+=M.length;const O=ne.reedSolomonComputeRemainder(M,w);v<E&&M.push(0),C.push(M.concat(O))}let _=[];for(let v=0;v<C[0].length;v++)C.forEach((V,M)=>{(v!=S-p||M>=E)&&_.push(V[v])});return i(_.length==g),_}drawCodewords(l){if(l.length!=Math.floor(ne.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let c=0;for(let h=this.size-1;h>=1;h-=2){h==6&&(h=5);for(let f=0;f<this.size;f++)for(let p=0;p<2;p++){const g=h-p,S=(h+1&2)==0?this.size-1-f:f;!this.isFunction[S][g]&&c<l.length*8&&(this.modules[S][g]=r(l[c>>>3],7-(c&7)),c++)}}i(c==l.length*8)}applyMask(l){if(l<0||l>7)throw new RangeError("Mask value out of range");for(let c=0;c<this.size;c++)for(let h=0;h<this.size;h++){let f;switch(l){case 0:f=(h+c)%2==0;break;case 1:f=c%2==0;break;case 2:f=h%3==0;break;case 3:f=(h+c)%3==0;break;case 4:f=(Math.floor(h/3)+Math.floor(c/2))%2==0;break;case 5:f=h*c%2+h*c%3==0;break;case 6:f=(h*c%2+h*c%3)%2==0;break;case 7:f=((h+c)%2+h*c%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[c][h]&&f&&(this.modules[c][h]=!this.modules[c][h])}}getPenaltyScore(){let l=0;for(let p=0;p<this.size;p++){let g=!1,E=0,S=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[p][C]==g?(E++,E==5?l+=ne.PENALTY_N1:E>5&&l++):(this.finderPenaltyAddHistory(E,S),g||(l+=this.finderPenaltyCountPatterns(S)*ne.PENALTY_N3),g=this.modules[p][C],E=1);l+=this.finderPenaltyTerminateAndCount(g,E,S)*ne.PENALTY_N3}for(let p=0;p<this.size;p++){let g=!1,E=0,S=[0,0,0,0,0,0,0];for(let C=0;C<this.size;C++)this.modules[C][p]==g?(E++,E==5?l+=ne.PENALTY_N1:E>5&&l++):(this.finderPenaltyAddHistory(E,S),g||(l+=this.finderPenaltyCountPatterns(S)*ne.PENALTY_N3),g=this.modules[C][p],E=1);l+=this.finderPenaltyTerminateAndCount(g,E,S)*ne.PENALTY_N3}for(let p=0;p<this.size-1;p++)for(let g=0;g<this.size-1;g++){const E=this.modules[p][g];E==this.modules[p][g+1]&&E==this.modules[p+1][g]&&E==this.modules[p+1][g+1]&&(l+=ne.PENALTY_N2)}let c=0;for(const p of this.modules)c=p.reduce((g,E)=>g+(E?1:0),c);const h=this.size*this.size,f=Math.ceil(Math.abs(c*20-h*10)/h)-1;return i(0<=f&&f<=9),l+=f*ne.PENALTY_N4,i(0<=l&&l<=2568888),l}getAlignmentPatternPositions(){if(this.version==1)return[];{const l=Math.floor(this.version/7)+2,c=this.version==32?26:Math.ceil((this.version*4+4)/(l*2-2))*2;let h=[6];for(let f=this.size-7;h.length<l;f-=c)h.splice(1,0,f);return h}}static getNumRawDataModules(l){if(l<ne.MIN_VERSION||l>ne.MAX_VERSION)throw new RangeError("Version number out of range");let c=(16*l+128)*l+64;if(l>=2){const h=Math.floor(l/7)+2;c-=(25*h-10)*h-55,l>=7&&(c-=36)}return i(208<=c&&c<=29648),c}static getNumDataCodewords(l,c){return Math.floor(ne.getNumRawDataModules(l)/8)-ne.ECC_CODEWORDS_PER_BLOCK[c.ordinal][l]*ne.NUM_ERROR_CORRECTION_BLOCKS[c.ordinal][l]}static reedSolomonComputeDivisor(l){if(l<1||l>255)throw new RangeError("Degree out of range");let c=[];for(let f=0;f<l-1;f++)c.push(0);c.push(1);let h=1;for(let f=0;f<l;f++){for(let p=0;p<c.length;p++)c[p]=ne.reedSolomonMultiply(c[p],h),p+1<c.length&&(c[p]^=c[p+1]);h=ne.reedSolomonMultiply(h,2)}return c}static reedSolomonComputeRemainder(l,c){let h=c.map(f=>0);for(const f of l){const p=f^h.shift();h.push(0),c.forEach((g,E)=>h[E]^=ne.reedSolomonMultiply(g,p))}return h}static reedSolomonMultiply(l,c){if(l>>>8||c>>>8)throw new RangeError("Byte out of range");let h=0;for(let f=7;f>=0;f--)h=h<<1^(h>>>7)*285,h^=(c>>>f&1)*l;return i(h>>>8==0),h}finderPenaltyCountPatterns(l){const c=l[1];i(c<=this.size*3);const h=c>0&&l[2]==c&&l[3]==c*3&&l[4]==c&&l[5]==c;return(h&&l[0]>=c*4&&l[6]>=c?1:0)+(h&&l[6]>=c*4&&l[0]>=c?1:0)}finderPenaltyTerminateAndCount(l,c,h){return l&&(this.finderPenaltyAddHistory(c,h),c=0),c+=this.size,this.finderPenaltyAddHistory(c,h),this.finderPenaltyCountPatterns(h)}finderPenaltyAddHistory(l,c){c[0]==0&&(l+=this.size),c.pop(),c.unshift(l)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(a,l,c){if(l<0||l>31||a>>>l)throw new RangeError("Value out of range");for(let h=l-1;h>=0;h--)c.push(a>>>h&1)}function r(a,l){return(a>>>l&1)!=0}function i(a){if(!a)throw new Error("Assertion error")}const s=class Ne{constructor(l,c,h){if(this.mode=l,this.numChars=c,this.bitData=h,c<0)throw new RangeError("Invalid argument");this.bitData=h.slice()}static makeBytes(l){let c=[];for(const h of l)n(h,8,c);return new Ne(Ne.Mode.BYTE,l.length,c)}static makeNumeric(l){if(!Ne.isNumeric(l))throw new RangeError("String contains non-numeric characters");let c=[];for(let h=0;h<l.length;){const f=Math.min(l.length-h,3);n(parseInt(l.substring(h,h+f),10),f*3+1,c),h+=f}return new Ne(Ne.Mode.NUMERIC,l.length,c)}static makeAlphanumeric(l){if(!Ne.isAlphanumeric(l))throw new RangeError("String contains unencodable characters in alphanumeric mode");let c=[],h;for(h=0;h+2<=l.length;h+=2){let f=Ne.ALPHANUMERIC_CHARSET.indexOf(l.charAt(h))*45;f+=Ne.ALPHANUMERIC_CHARSET.indexOf(l.charAt(h+1)),n(f,11,c)}return h<l.length&&n(Ne.ALPHANUMERIC_CHARSET.indexOf(l.charAt(h)),6,c),new Ne(Ne.Mode.ALPHANUMERIC,l.length,c)}static makeSegments(l){return l==""?[]:Ne.isNumeric(l)?[Ne.makeNumeric(l)]:Ne.isAlphanumeric(l)?[Ne.makeAlphanumeric(l)]:[Ne.makeBytes(Ne.toUtf8ByteArray(l))]}static makeEci(l){let c=[];if(l<0)throw new RangeError("ECI assignment value out of range");if(l<128)n(l,8,c);else if(l<16384)n(2,2,c),n(l,14,c);else if(l<1e6)n(6,3,c),n(l,21,c);else throw new RangeError("ECI assignment value out of range");return new Ne(Ne.Mode.ECI,0,c)}static isNumeric(l){return Ne.NUMERIC_REGEX.test(l)}static isAlphanumeric(l){return Ne.ALPHANUMERIC_REGEX.test(l)}getData(){return this.bitData.slice()}static getTotalBits(l,c){let h=0;for(const f of l){const p=f.mode.numCharCountBits(c);if(f.numChars>=1<<p)return 1/0;h+=4+p+f.bitData.length}return h}static toUtf8ByteArray(l){l=encodeURI(l);let c=[];for(let h=0;h<l.length;h++)l.charAt(h)!="%"?c.push(l.charCodeAt(h)):(c.push(parseInt(l.substring(h+1,h+3),16)),h+=2);return c}};s.NUMERIC_REGEX=/^[0-9]*$/,s.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,s.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=s;t.QrSegment=s})(ti||(ti={}));(t=>{(e=>{const n=class{constructor(i,s){this.ordinal=i,this.formatBits=s}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(ti||(ti={}));(t=>{(e=>{const n=class{constructor(i,s){this.modeBits=i,this.numBitsCharCount=s}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(ti||(ti={}));var bi=ti;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var XM={L:bi.QrCode.Ecc.LOW,M:bi.QrCode.Ecc.MEDIUM,Q:bi.QrCode.Ecc.QUARTILE,H:bi.QrCode.Ecc.HIGH},BS=128,US="L",zS="#FFFFFF",$S="#000000",WS=!1,HS=1,JM=4,ZM=0,eL=.1;function KS(t,e=0){const n=[];return t.forEach(function(r,i){let s=null;r.forEach(function(o,a){if(!o&&s!==null){n.push(`M${s+e} ${i+e}h${a-s}v1H${s+e}z`),s=null;return}if(a===r.length-1){if(!o)return;s===null?n.push(`M${a+e},${i+e} h1v1H${a+e}z`):n.push(`M${s+e},${i+e} h${a+1-s}v1H${s+e}z`);return}o&&s===null&&(s=a)})}),n.join("")}function qS(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((i,s)=>s<e.x||s>=e.x+e.w?i:!1))}function tL(t,e,n,r){if(r==null)return null;const i=t.length+n*2,s=Math.floor(e*eL),o=i/e,a=(r.width||s)*o,l=(r.height||s)*o,c=r.x==null?t.length/2-a/2:r.x*o,h=r.y==null?t.length/2-l/2:r.y*o,f=r.opacity==null?1:r.opacity;let p=null;if(r.excavate){let E=Math.floor(c),S=Math.floor(h),C=Math.ceil(a+c-E),w=Math.ceil(l+h-S);p={x:E,y:S,w:C,h:w}}const g=r.crossOrigin;return{x:c,y:h,h:l,w:a,excavation:p,opacity:f,crossOrigin:g}}function nL(t,e){return e!=null?Math.max(Math.floor(e),0):t?JM:ZM}function GS({value:t,level:e,minVersion:n,includeMargin:r,marginSize:i,imageSettings:s,size:o,boostLevel:a}){let l=me.useMemo(()=>{const E=(Array.isArray(t)?t:[t]).reduce((S,C)=>(S.push(...bi.QrSegment.makeSegments(C)),S),[]);return bi.QrCode.encodeSegments(E,XM[e],n,void 0,void 0,a)},[t,e,n,a]);const{cells:c,margin:h,numCells:f,calculatedImageSettings:p}=me.useMemo(()=>{let g=l.getModules();const E=nL(r,i),S=g.length+E*2,C=tL(g,o,E,s);return{cells:g,margin:E,numCells:S,calculatedImageSettings:C}},[l,o,s,r,i]);return{qrcode:l,margin:h,cells:c,numCells:f,calculatedImageSettings:p}}var rL=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),iL=me.forwardRef(function(e,n){const r=e,{value:i,size:s=BS,level:o=US,bgColor:a=zS,fgColor:l=$S,includeMargin:c=WS,minVersion:h=HS,boostLevel:f,marginSize:p,imageSettings:g}=r,S=od(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:C}=S,w=od(S,["style"]),_=g==null?void 0:g.src,v=me.useRef(null),V=me.useRef(null),M=me.useCallback(ee=>{v.current=ee,typeof n=="function"?n(ee):n&&(n.current=ee)},[n]),[O,A]=me.useState(!1),{margin:y,cells:x,numCells:P,calculatedImageSettings:R}=GS({value:i,level:o,minVersion:h,boostLevel:f,includeMargin:c,marginSize:p,imageSettings:g,size:s});me.useEffect(()=>{if(v.current!=null){const ee=v.current,te=ee.getContext("2d");if(!te)return;let he=x;const q=V.current,B=R!=null&&q!==null&&q.complete&&q.naturalHeight!==0&&q.naturalWidth!==0;B&&R.excavation!=null&&(he=qS(x,R.excavation));const W=window.devicePixelRatio||1;ee.height=ee.width=s*W;const G=s/P*W;te.scale(G,G),te.fillStyle=a,te.fillRect(0,0,P,P),te.fillStyle=l,rL?te.fill(new Path2D(KS(he,y))):x.forEach(function(ge,ce){ge.forEach(function(ve,xt){ve&&te.fillRect(xt+y,ce+y,1,1)})}),R&&(te.globalAlpha=R.opacity),B&&te.drawImage(q,R.x+y,R.y+y,R.w,R.h)}}),me.useEffect(()=>{A(!1)},[_]);const N=sd({height:s,width:s},C);let I=null;return _!=null&&(I=me.createElement("img",{src:_,key:_,style:{display:"none"},onLoad:()=>{A(!0)},ref:V,crossOrigin:R==null?void 0:R.crossOrigin})),me.createElement(me.Fragment,null,me.createElement("canvas",sd({style:N,height:s,width:s,ref:M,role:"img"},w)),I)});iL.displayName="QRCodeCanvas";var QS=me.forwardRef(function(e,n){const r=e,{value:i,size:s=BS,level:o=US,bgColor:a=zS,fgColor:l=$S,includeMargin:c=WS,minVersion:h=HS,boostLevel:f,title:p,marginSize:g,imageSettings:E}=r,S=od(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:C,cells:w,numCells:_,calculatedImageSettings:v}=GS({value:i,level:o,minVersion:h,boostLevel:f,includeMargin:c,marginSize:g,imageSettings:E,size:s});let V=w,M=null;E!=null&&v!=null&&(v.excavation!=null&&(V=qS(w,v.excavation)),M=me.createElement("image",{href:E.src,height:v.h,width:v.w,x:v.x+C,y:v.y+C,preserveAspectRatio:"none",opacity:v.opacity,crossOrigin:v.crossOrigin}));const O=KS(V,C);return me.createElement("svg",sd({height:s,width:s,viewBox:`0 0 ${_} ${_}`,ref:n,role:"img"},S),!!p&&me.createElement("title",null,p),me.createElement("path",{fill:a,d:`M0,0 h${_}v${_}H0z`,shapeRendering:"crispEdges"}),me.createElement("path",{fill:l,d:O,shapeRendering:"crispEdges"}),M)});QS.displayName="QRCodeSVG";const sL=D.forwardRef(({details:t,settings:e,discount:n=0,onDiscountChange:r,onPrint:i},s)=>{if(!t)return null;const{order:o={},items:a=[],tableName:l="N/A",staffName:c="N/A"}=t,h=(e==null?void 0:e.restaurantName)||"SyncServe Restaurant",f=(e==null?void 0:e.address)||"123 Culinary Lane, Edakkara, Kerala",p=(e==null?void 0:e.upiId)||"shankp@fam",g=D.useMemo(()=>(Array.isArray(a)?a:[]).map(V=>{const M=Number(V.quantity??V.qty??1),O=Number(V.price??V.rate??0);return{itemId:V.itemId??Math.random(),name:String(V.name??V.itemName??"Item"),notes:String(V.notes??V.modifiers??V.description??""),quantity:Number.isFinite(M)?M:1,price:Number.isFinite(O)?O:0,amount:Number.isFinite(M)&&Number.isFinite(O)?M*O:0}}),[a]),{subTotal:E,grandTotal:S}=D.useMemo(()=>{const v=g.reduce((A,y)=>A+y.amount,0),V=Number(o.total??v),M=Number(n||0),O=Math.max(0,V-M);return{subTotal:V,grandTotal:O}},[g,o.total,n]),{dateStr:C,timeStr:w}=D.useMemo(()=>{const v=new Date;try{const V=new Date(o.createdAt??o.date);return isNaN(V.getTime())?{dateStr:v.toLocaleDateString("en-IN"),timeStr:v.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}:{dateStr:V.toLocaleDateString("en-IN"),timeStr:V.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}}catch{return{dateStr:v.toLocaleDateString("en-IN"),timeStr:v.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}}},[o.createdAt,o.date]),_=D.useMemo(()=>{const v=h.replace(/\s/g,"%20"),V=`Bill%20for%20${l}`.replace(/\s/g,"%20");return`upi://pay?pa=${p}&pn=${v}&am=${S.toFixed(2)}&cu=INR&tn=${V}`},[S,l,h,p]);return k.jsxs("div",{ref:s,className:"thermal-print","aria-label":`Bill for ${l}`,children:[k.jsxs("header",{className:"header",children:[k.jsx("div",{className:"logo-placeholder",children:"[Your Logo Here]"}),k.jsx("h1",{className:"business-name",children:h})," ",k.jsx("p",{className:"business-details",children:f})," ",k.jsx("p",{className:"invoice-title",children:"--- INVOICE ---"})]}),k.jsxs("section",{className:"meta-info",children:[k.jsxs("div",{className:"meta-row",children:[k.jsxs("span",{children:["Table: ",k.jsx("strong",{children:l})]}),k.jsxs("span",{children:["Date: ",C]})]}),k.jsxs("div",{className:"meta-row",children:[k.jsxs("span",{children:["Staff: ",k.jsx("strong",{children:c})]}),k.jsxs("span",{children:["Time: ",w]})]})]}),k.jsxs("table",{className:"items-table",children:[k.jsx("thead",{children:k.jsxs("tr",{children:[k.jsx("th",{className:"col-sno",children:"#"}),k.jsx("th",{className:"col-item",children:"ITEM"}),k.jsx("th",{className:"col-qty",children:"QTY"}),k.jsx("th",{className:"col-price",children:"RATE"}),k.jsx("th",{className:"col-total",children:"TOTAL"})]})}),k.jsx("tbody",{children:g.length===0?k.jsx("tr",{children:k.jsx("td",{colSpan:"5",className:"no-items",children:"No items in this order."})}):g.map((v,V)=>k.jsxs("tr",{children:[k.jsx("td",{className:"col-sno",children:V+1}),k.jsxs("td",{className:"col-item",children:[k.jsx("span",{className:"item-name",children:v.name}),v.notes&&k.jsx("span",{className:"item-notes",children:v.notes})]}),k.jsx("td",{className:"col-qty",children:v.quantity}),k.jsx("td",{className:"col-price",children:v.price.toFixed(2)}),k.jsx("td",{className:"col-total",children:v.amount.toFixed(2)})]},v.itemId))})]}),k.jsxs("section",{className:"totals",children:[k.jsxs("div",{className:"total-row",children:[k.jsx("span",{children:"Sub Total"}),k.jsxs("span",{children:["",E.toFixed(2)]})]}),k.jsxs("div",{className:"total-row no-print",children:[k.jsx("span",{children:"Discount"}),k.jsxs("div",{className:"discount-control",children:[k.jsxs("span",{children:["",Number(n).toFixed(2)]}),k.jsx("input",{type:"number",value:n,onChange:r,className:"discount-input","aria-label":"Discount amount"})]})]}),k.jsxs("div",{className:"total-row print-only",children:[k.jsx("span",{children:"Discount"}),k.jsxs("span",{children:["",Number(n).toFixed(2)]})]}),k.jsxs("div",{className:"total-row grand-total",children:[k.jsx("span",{children:"Grand Total"}),k.jsxs("span",{children:["",S.toFixed(2)]})]})]}),k.jsx("div",{className:"actions no-print",children:k.jsx("button",{onClick:i,className:"print-button",children:"Print / Finalize Bill"})}),k.jsxs("footer",{className:"footer",children:[k.jsx("div",{className:"qr-code-container",children:S>0?k.jsx(QS,{value:_,size:110,bgColor:"#ffffff",fgColor:"#000000",level:"L",includeMargin:!1}):k.jsx("div",{className:"qr-placeholder",children:"[QR Code Here]"})}),k.jsx("p",{className:"footer-message",children:"Thank you for your visit!"}),o.id&&k.jsxs("p",{className:"order-id",children:["Order ID: ",String(o.id)]})]})]})}),oL=".thermal-print{width:100%;max-width:76mm;margin:0 auto;padding:12px;background-color:#fff;color:#000;font-family:Courier New,Courier,monospace;font-size:12px;line-height:1.4;box-sizing:border-box}.thermal-print *{box-sizing:border-box}.header{text-align:center;margin-bottom:10px}.logo-placeholder{font-size:10px;color:#888;margin-bottom:8px}.business-name{font-size:16px;font-weight:700;margin:0}.business-details{font-size:10px;margin:2px 0}.invoice-title{font-size:10px;margin:8px 0 0;font-weight:700}.meta-info{font-size:10px;margin-bottom:10px;border-top:1px dashed #000;border-bottom:1px dashed #000;padding:5px 0}.meta-row{display:flex;justify-content:space-between}.items-table{width:100%;border-collapse:collapse;margin-bottom:10px}.items-table thead{border-bottom:1px solid #000}.items-table th{font-size:10px;font-weight:700;padding:5px 2px}.items-table td{padding:5px 2px;vertical-align:top;border-bottom:1px dotted #888}.no-items{text-align:center;padding:15px 0;color:#888}.item-name{display:block}.item-notes{display:block;font-size:9px;color:#555;padding-left:5px}.col-sno{width:8%;text-align:left;padding-right:4px}.col-item{width:37%;text-align:left}.col-qty,.col-price,.col-total{text-align:right;white-space:nowrap;font-variant-numeric:tabular-nums}.col-qty{width:15%}.col-price,.col-total{width:20%}.totals{font-size:12px;border-top:1px solid #000;padding-top:5px}.total-row{display:flex;justify-content:space-between;margin-bottom:3px}.grand-total{font-weight:700;font-size:15px;margin-top:5px;padding-top:5px;border-top:1px dashed #000}.discount-control{display:flex;align-items:center;gap:8px}.discount-input{width:70px;border:1px solid #ccc;text-align:right;padding:2px}.actions{margin:15px 0}.print-button{width:100%;padding:10px;background-color:#333;color:#fff;border:none;cursor:pointer;font-family:inherit;font-size:14px}.footer{text-align:center;margin-top:15px;border-top:1px dashed #000;padding-top:10px}.qr-placeholder{width:90px;height:90px;border:1px solid #888;margin:0 auto 10px;display:flex;align-items:center;justify-content:center;font-size:9px;color:#888}.footer-message{font-weight:700}.order-id{font-size:9px;color:#555;margin-top:5px}.qr-code-container{margin:0 auto 10px;width:110px;height:110px}.print-only{display:none}@media print{.no-print{display:none!important}.print-only{display:flex}.thermal-print{max-width:100%;padding:0;box-shadow:none}.qr-code-container{display:block}}",aL=()=>{const[t,e]=D.useState([]),[n,r]=D.useState([]),[i,s]=D.useState([]),[o,a]=D.useState([]),[l,c]=D.useState(null),[h,f]=D.useState(""),[p,g]=D.useState(null),[E,S]=D.useState(0),[C,w]=D.useState(!1),[_,v]=D.useState(""),V=D.useRef(null),M=D.useRef(null);D.useEffect(()=>{var N;(async()=>{w(!0);try{const[I,ee,te]=await Promise.all([$p(),Wp(),tT()]);s(I||[]),a(ee||[]),c(te||{})}catch(I){console.error("Failed to fetch initial data:",I),v("Could not load necessary data. Please refresh.")}finally{w(!1)}})(),(N=V.current)==null||N.focus()},[]),D.useEffect(()=>{const R=rT(N=>{e(N||[]),w(!1)},N=>{console.error("Tables real-time listener error:",N),v("Failed to load table data. Please try again."),w(!1)});return()=>{try{R()}catch{}}},[]),D.useEffect(()=>{const R=sT(N=>{r(N||[]),w(!1)},N=>{console.error("Orders real-time listener error:",N),v("Failed to load order data. Please try again."),w(!1)});return()=>{try{R()}catch{}}},[]),D.useEffect(()=>{var he,q;if(!h){g(null);return}const R=n.filter(B=>B.tableId===h).sort((B,W)=>new Date(W.createdAt)-new Date(B.createdAt));if(R.length===0){v("No active orders found for this table."),g(null);return}const N=R[0],I=(N.items||[]).map(B=>{const W=i.find(G=>G.id===B.itemId);return{...B,name:(W==null?void 0:W.name)||B.name||"Unknown Item",price:Number((W==null?void 0:W.price)??B.price??0)}}),ee=((he=t.find(B=>B.id===N.tableId))==null?void 0:he.name)||"N/A",te=((q=o.find(B=>B.id===N.staffId))==null?void 0:q.name)||"N/A";g({order:N,items:I,tableName:ee,staffName:te}),S(0),v("")},[h,n,i,o,t]);const O=D.useCallback(()=>{if(!M.current){alert("Nothing to print  make sure a table is selected and the bill is visible.");return}const R=M.current.innerHTML||M.current.outerHTML||"",N=`
      <!doctype html>
      <html>
        <head>
          <meta charset="utf-8"/>
          <meta name="viewport" content="width=device-width,initial-scale=1"/>
          <title>Receipt</title>
          <style>${oL}</style>
        </head>
        <body>
          <div class="receipt-print-container">
            <div class="receipt">
              ${R}
            </div>
          </div>
        </body>
      </html>
    `,I=document.createElement("iframe");I.style.position="fixed",I.style.right="0",I.style.bottom="0",I.style.width="0",I.style.height="0",I.style.border="0",I.style.visibility="hidden",document.body.appendChild(I);const ee=I.contentDocument||I.contentWindow.document;ee.open(),ee.write(N),ee.close();const te=()=>{const he=I.contentWindow;if(he)try{he.focus(),setTimeout(()=>{try{he.print()}catch(q){console.error("Print error:",q)}setTimeout(()=>{try{document.body.removeChild(I)}catch{}},600)},250)}catch(q){console.error("Print error:",q)}};I.contentWindow&&I.contentDocument.readyState==="complete"?te():(I.onload=te,setTimeout(()=>{document.body.contains(I)&&te()},900))},[M]),A=(R,N=0)=>{var Ut;if(!R)return new Uint8Array;const I=27,ee=29,te=[],he=pe=>te.push(new Uint8Array(pe)),q=pe=>{const ze=new TextEncoder;te.push(ze.encode(pe))},B=(l==null?void 0:l.restaurantName)||"SyncServe";he([I,64]),he([I,97,1]),he([I,69,1]),q(`${R.tableName||"TABLE"}
`),q(`${B}
`),he([I,69,0]),q(`Served by: ${R.staffName||"N/A"}
`),q(`Order: ${((Ut=R.order)==null?void 0:Ut.id)||""}
`),q(`
`),he([I,97,0]),q(`No  ITEM                     QTY   RATE     AMT
`),he([I,45,1]),q(`---------------------------------------------
`),he([I,45,0]),(R.items||[]).forEach((pe,ze)=>{const tc=(pe.name||"Item").toString().slice(0,20).padEnd(20," "),nc=String(pe.quantity??pe.qty??1).padStart(3," "),ai=Number(pe.price??0).toFixed(2).padStart(8," "),li=(Number(pe.price??0)*Number(pe.quantity??pe.qty??1)).toFixed(2).padStart(8," ");q(`${String(ze+1).padStart(2," ")}  ${tc}${nc}${ai}${li}
`)}),q(`
`);const W=(R.items||[]).reduce((pe,ze)=>pe+Number(ze.price??0)*Number(ze.quantity??ze.qty??1),0),G=Number(N||0),ge=W-G;q(`Sub Total:${String(W.toFixed(2)).padStart(12," ")}
`),G>0&&q(`Discount:${String(G.toFixed(2)).padStart(12," ")}
`),he([ee,33,17]),q(`TOTAL:${String(ge.toFixed(2)).padStart(14," ")}
`),he([ee,33,0]),q(`
`),he([I,97,1]),q(`Thank you for dining with us!
`),he([I,97,0]),he([ee,86,0]);const ce=te.reduce((pe,ze)=>pe+ze.length,0),ve=new Uint8Array(ce);let xt=0;return te.forEach(pe=>{ve.set(pe,xt),xt+=pe.length}),ve},y=()=>{var R;if(!p){alert("Select a table and load a bill first");return}try{const N=A(p,E),I=new Blob([N],{type:"application/octet-stream"}),ee=URL.createObjectURL(I),te=document.createElement("a");te.href=ee,te.download=`receipt_${String(((R=p.order)==null?void 0:R.id)||"receipt")}.bin`,document.body.appendChild(te),te.click(),te.remove(),URL.revokeObjectURL(ee),alert("ESC/POS payload downloaded. Send this raw .bin to your printer service.")}catch(N){console.error("Failed to generate ESC/POS payload",N),alert("Failed to create ESC/POS payload (see console).")}},x=async()=>{if(!p||!h){alert("Please select a table with a bill to finalize.");return}O();try{await iT(h,"available"),await oN(p.order.id),console.log(`Finalized bill for table ${h}. Table set to available, order deleted.`),alert(`Bill for table ${p.tableName} has been processed.`),g(null),f(""),S(0)}catch(R){console.error("Failed to finalize bill:",R),alert("An error occurred while finalizing the bill. Check console.")}},P=t.filter(R=>R.status==="occupied");return k.jsxs("div",{className:"container mx-auto py-6 px-4",children:[k.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Billing"}),k.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md mb-6 no-print",children:[k.jsx("label",{htmlFor:"table-select",className:"block text-sm font-medium text-gray-700 mb-1",children:"Select an Occupied Table"}),k.jsxs("select",{id:"table-select",ref:V,value:h,onChange:R=>f(R.target.value),className:"w-full md:w-1/2 p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:C,children:[k.jsx("option",{value:"",children:C?"Loading tables...":"Select a Table"}),P.map(R=>k.jsx("option",{value:R.id,children:R.name},R.id))]})]}),_&&k.jsx("p",{className:"text-red-500 text-center mb-4 no-print",children:_}),p&&k.jsxs(k.Fragment,{children:[k.jsx(sL,{ref:M,details:p,settings:l,discount:E,onDiscountChange:R=>S(parseFloat(R.target.value)||0),onPrint:x}),k.jsxs("div",{className:"mt-3 flex gap-2 items-center no-print",children:[k.jsx("button",{onClick:()=>O(),className:"px-3 py-2 bg-blue-600 text-white rounded shadow hover:bg-blue-700",children:"Preview / Print (Browser)"}),k.jsx("button",{onClick:y,className:"px-3 py-2 bg-green-600 text-white rounded shadow hover:bg-green-700",children:"Download ESC/POS Payload"}),k.jsx("button",{onClick:x,className:"px-3 py-2 bg-indigo-600 text-white rounded shadow hover:bg-indigo-700",children:"Finalize & Print"})]})]})]})},lL=()=>{const[t,e]=D.useState({restaurantName:"",address:"",upiId:""}),[n,r]=D.useState(!0),[i,s]=D.useState(""),[o,a]=D.useState(!1);D.useEffect(()=>{(async()=>{try{r(!0);const f=await tT();f&&e(f)}catch(f){console.error("Error fetching settings:",f),s("Could not load settings."),a(!0)}finally{r(!1)}})()},[]);const l=h=>{const{name:f,value:p}=h.target;e(g=>({...g,[f]:p}))},c=async h=>{if(h.preventDefault(),!t.restaurantName||!t.upiId){s("Restaurant Name and UPI ID are required."),a(!0);return}try{s("Saving..."),a(!1),await ZV(t),s("Settings saved successfully!")}catch(f){console.error("Error updating settings:",f),s("Failed to save settings. Please try again."),a(!0)}};return n?k.jsx("div",{className:"text-center p-10",children:"Loading settings..."}):k.jsxs("div",{className:"container mx-auto py-6 px-4",children:[k.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-800",children:"Application Settings"}),k.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md max-w-2xl mx-auto",children:k.jsxs("form",{onSubmit:c,children:[k.jsxs("div",{className:"mb-4",children:[k.jsx("label",{htmlFor:"restaurantName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Restaurant Name"}),k.jsx("input",{type:"text",id:"restaurantName",name:"restaurantName",value:t.restaurantName,onChange:l,className:"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., The Grand Eatery",required:!0})]}),k.jsxs("div",{className:"mb-4",children:[k.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),k.jsx("input",{type:"text",id:"address",name:"address",value:t.address,onChange:l,className:"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 123 Culinary Lane, Food Town"})]}),k.jsxs("div",{className:"mb-6",children:[k.jsx("label",{htmlFor:"upiId",className:"block text-sm font-medium text-gray-700 mb-1",children:"UPI ID (for QR Code Payments)"}),k.jsx("input",{type:"text",id:"upiId",name:"upiId",value:t.upiId,onChange:l,className:"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., yourname@oksbi",required:!0})]}),k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg shadow hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Save Settings"}),i&&k.jsx("p",{className:`text-sm ${o?"text-red-600":"text-green-600"}`,children:i})]})]})})]})},uL=()=>k.jsxs("div",{className:"flex min-h-screen",children:[k.jsx(_C,{}),k.jsx("main",{className:"flex-1 p-4 bg-gray-100 overflow-y-auto",children:k.jsxs(zI,{children:[k.jsx(Hn,{path:"/",element:k.jsx(HM,{})}),k.jsx(Hn,{path:"/order",element:k.jsx(KM,{})}),k.jsx(Hn,{path:"/menu",element:k.jsx(qM,{})}),k.jsx(Hn,{path:"/staff",element:k.jsx(GM,{})}),k.jsx(Hn,{path:"/kitchen",element:k.jsx(QM,{})}),k.jsx(Hn,{path:"/billing",element:k.jsx(aL,{})}),k.jsx(Hn,{path:"/settings",element:k.jsx(lL,{})})," "]})})]});wh.createRoot(document.getElementById("root")).render(k.jsx(me.StrictMode,{children:k.jsx(YI,{children:k.jsx(uL,{})})}));
